{
  "type": "issue",
  "issue": {
    "id": 317837093,
    "node_id": "MDU6SXNzdWUzMTc4MzcwOTM=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13085",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13085/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13085/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13085/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/13085",
    "number": 13085,
    "state": "closed",
    "state_reason": "completed",
    "title": "What is the functional purpose special case in ASM?",
    "body": "https://github.com/bitcoin/bitcoin/blob/master/src/core_write.cpp#L95\r\n\r\nLooking here the ASM will convert byte arrays of 4 or less to an integer. Specifically a 4 byte array is converted to little endian instead of `hexstr` for example. So if the 4 bytes is \"cats\" the ASM will output `1937006947`. \r\n\r\nSo I am more interested in why this is in bitcoin and what functional purpose this serves?",
    "user": {
      "login": "tiger5226",
      "id": 3402064,
      "node_id": "MDQ6VXNlcjM0MDIwNjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3402064?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tiger5226",
      "html_url": "https://github.com/tiger5226",
      "followers_url": "https://api.github.com/users/tiger5226/followers",
      "following_url": "https://api.github.com/users/tiger5226/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/tiger5226/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/tiger5226/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/tiger5226/subscriptions",
      "organizations_url": "https://api.github.com/users/tiger5226/orgs",
      "repos_url": "https://api.github.com/users/tiger5226/repos",
      "events_url": "https://api.github.com/users/tiger5226/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/tiger5226/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 4,
    "closed_at": "2018-04-26T02:11:49Z",
    "created_at": "2018-04-26T00:27:06Z",
    "updated_at": "2021-09-08T12:29:17Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 384486398,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDQ4NjM5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384486398",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-26T01:45:41Z",
      "updated_at": "2018-04-26T01:46:19Z",
      "author_association": "MEMBER",
      "body": "> Looking here the ASM will convert byte arrays of 4 or less to an integer\r\n\r\nThat is not at all what this does. This is not a special case at all, nor is it specific to the ASM conversion, it is how scripts work.\r\n\r\nFirstly, OP_PUSHDATA4 does not mean that a 4 byte array is to pushed to the stack. OP_PUSHDATA4 means that the next 4 bytes should be interpreted as an integer which indicates the size of the next piece of data that will be pushed to the stack. ALL opcodes less than OP_PUSHDATA4 indicate the size of the next piece of data to be pushed to the stack. For all opcodes less than OP_PUSHDATA1, the single byte is the length of the data itself. For OP_PUSHDATA1, the next 1 byte indicates the size. Same for OP_PUSHDATA2 and OP_PUSHDATA4.\r\n\r\nIf you wanted to have a 4 byte array with the string \"cats\", you would actually have 5 bytes, the first being `04` which indicates the length of the data and then the 4 bytes of data itself. You never just have data in a script without a length prefix.\r\n\r\nThis is not an issue with Bitcoin Core and such questions should be asked elsewhere such as on bitcoin.stackexchange.com.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/13085#issuecomment-384486398",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13085"
    },
    {
      "event": "commented",
      "id": 384489406,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDQ4OTQwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384489406",
      "actor": {
        "login": "kaykurokawa",
        "id": 7075051,
        "node_id": "MDQ6VXNlcjcwNzUwNTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7075051?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kaykurokawa",
        "html_url": "https://github.com/kaykurokawa",
        "followers_url": "https://api.github.com/users/kaykurokawa/followers",
        "following_url": "https://api.github.com/users/kaykurokawa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kaykurokawa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kaykurokawa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kaykurokawa/subscriptions",
        "organizations_url": "https://api.github.com/users/kaykurokawa/orgs",
        "repos_url": "https://api.github.com/users/kaykurokawa/repos",
        "events_url": "https://api.github.com/users/kaykurokawa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kaykurokawa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-26T02:05:12Z",
      "updated_at": "2018-04-26T02:05:12Z",
      "author_association": "NONE",
      "body": "I think what he is asking is why does the size of vch determine whether vch is rendered as an integer as opposed to a hex string by https://github.com/bitcoin/bitcoin/blob/master/src/core_write.cpp#L95\r\n\r\nIf I'm understanding the code correctly vch are the exact bytes being pushed onto the stack, not the number of bytes that are being pushed on to the stack.  \r\n\r\n",
      "user": {
        "login": "kaykurokawa",
        "id": 7075051,
        "node_id": "MDQ6VXNlcjcwNzUwNTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7075051?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kaykurokawa",
        "html_url": "https://github.com/kaykurokawa",
        "followers_url": "https://api.github.com/users/kaykurokawa/followers",
        "following_url": "https://api.github.com/users/kaykurokawa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kaykurokawa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kaykurokawa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kaykurokawa/subscriptions",
        "organizations_url": "https://api.github.com/users/kaykurokawa/orgs",
        "repos_url": "https://api.github.com/users/kaykurokawa/repos",
        "events_url": "https://api.github.com/users/kaykurokawa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kaykurokawa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/13085#issuecomment-384489406",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13085"
    },
    {
      "event": "commented",
      "id": 384490356,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDQ5MDM1Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384490356",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-26T02:11:43Z",
      "updated_at": "2018-04-26T02:11:43Z",
      "author_association": "MEMBER",
      "body": "Short pushes are usually small numbers, for use as counts in multisig or as timestamps for locktime checks. As humans prefer decimals for integers, and the asm format is for human consumption, it gets printed that way.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/13085#issuecomment-384490356",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13085"
    },
    {
      "event": "closed",
      "id": 1595465828,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTU5NTQ2NTgyOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1595465828",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-26T02:11:49Z"
    },
    {
      "event": "commented",
      "id": 384490440,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDQ5MDQ0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384490440",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-26T02:12:18Z",
      "updated_at": "2018-04-26T02:12:18Z",
      "author_association": "MEMBER",
      "body": "Please post future questions like this on bitcoin.stackexchange.com. This is not a support site.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/13085#issuecomment-384490440",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13085"
    },
    {
      "event": "locked",
      "id": 5271985761,
      "node_id": "LOE_lADOABII584S8c8lzwAAAAE6PB5h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271985761",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:29:17Z",
      "lock_reason": "resolved"
    }
  ]
}