{
  "type": "issue",
  "issue": {
    "id": 614768292,
    "node_id": "MDU6SXNzdWU2MTQ3NjgyOTI=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18915",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18915/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18915/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18915/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/18915",
    "number": 18915,
    "state": "closed",
    "state_reason": "completed",
    "title": "depends: should linux host should be using -sysroot?",
    "body": "It seems strange that linux host definition in depends just calls the native system compiler with -m32/-m64 flags, instead of supporting cross compilers, and that it doesn't use a -sysroot value to prevent picking up system libraries:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/master/depends/hosts/linux.mk\r\n\r\nThis is pretty different than the other windows/darwin/android hosts defined in the same directory, and seems like it would prevent `make HOST=x86_64-pc-linux-gnu` from working on anything other than a matching native platform.\r\n\r\nAnother side-effect of using the native compiler without a -sysroot value is that the build currently pick ups system libraries like BDB. From [#bitcoin-builds](http://gnusha.org/bitcoin-builds/2020-05-04.log):\r\n\r\n> [19:57:12] \\<achow101> when I build with the depends system, is it supposed to fallback to my system libs if the depends build misses a dependendency?\r\n> [22:40:02] \\<dongcarl> achow101: What's the full context?\r\n> [22:45:13] \\<achow101> dongcarl: I modified depends to build a version of bdb that we didn't support. configure then ignored that version and used my system lib instead of erroring as i was expecting it to\r\n\r\nThis is also causing headaches in #18677. I first added new packages there not even using `host_CC` etc variables, so native builds on linux and mac worked fine, but the cross compiled linux->mac build didn't work, which fanquake reported. To fix that, I started using the `host_CC` etc variables and passing along `-sysroot` values for host packages to fix the reported [linux->mac cross-compile](https://github.com/bitcoin/bitcoin/pull/18677#pullrequestreview-395075571) problem. But this turned out to break the i686-linux-gnu build on travis, because specifying `-sysroot` prevents gcc from using include files like `stdio.h` from `/usr/include/` and instead only use `/usr/x86_64-linux-gnu/include/stdio.h`. This worked fine on my system, but didn't work on travis because the [libc6-dev-amd64-cross package](https://packages.ubuntu.com/bionic/libc6-dev-amd64-cross) wasn't installed. So I added that package and travis turned green.\r\n\r\nBut now hebasto is reporting the same error I was seeing on travis in an local linux mint build https://github.com/bitcoin/bitcoin/pull/18677#issuecomment-625674673 and it seems like linux mint might not have a `libc6-dev-amd64-cross` package.\r\n\r\nI fixed this by [not setting -sysroot for the new packages for the native linux build](https://github.com/bitcoin/bitcoin/pull/18677#issuecomment-627022845), and I probably should have done this before to respect the `host_CC` etc variables more. But it would also be good to understand why the linux host variables are set the way they are to begin with. Are they actually intended to pick up outside system libraries and not support cross compiling?\r\n\r\nIt's unclear if they're set the current way for expediency, or if there's a different design goal for the linux host compared to the other hosts.",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 61889416,
        "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
        "name": "Build system",
        "color": "5319e7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 4,
    "closed_at": "2020-10-27T18:19:03Z",
    "created_at": "2020-05-08T14:12:50Z",
    "updated_at": "2022-08-18T18:36:13Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 3317120375,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzMTcxMjAzNzU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317120375",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T14:12:50Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "labeled",
      "id": 3317129807,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzMTcxMjk4MDc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317129807",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T14:15:25Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 625870345,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTg3MDM0NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625870345",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T15:27:13Z",
      "updated_at": "2020-05-08T15:27:13Z",
      "author_association": "MEMBER",
      "body": "@theuni @dongcarl @hebasto @achow101 @fanquake (not that I have to tag fanquake) may be interested or know more about this",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/18915#issuecomment-625870345",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18915"
    },
    {
      "event": "mentioned",
      "id": 3317385556,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzMxNzM4NTU1Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317385556",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T15:27:13Z"
    },
    {
      "event": "subscribed",
      "id": 3317385560,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzMTczODU1NjA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317385560",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T15:27:13Z"
    },
    {
      "event": "mentioned",
      "id": 3317385568,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzMxNzM4NTU2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317385568",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T15:27:13Z"
    },
    {
      "event": "subscribed",
      "id": 3317385573,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzMTczODU1NzM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317385573",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T15:27:13Z"
    },
    {
      "event": "mentioned",
      "id": 3317385577,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzMxNzM4NTU3Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317385577",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T15:27:13Z"
    },
    {
      "event": "subscribed",
      "id": 3317385582,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzMTczODU1ODI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317385582",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T15:27:13Z"
    },
    {
      "event": "mentioned",
      "id": 3317385592,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzMxNzM4NTU5Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317385592",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T15:27:13Z"
    },
    {
      "event": "subscribed",
      "id": 3317385596,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzMTczODU1OTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317385596",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T15:27:13Z"
    },
    {
      "event": "mentioned",
      "id": 3317385603,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzMxNzM4NTYwMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317385603",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T15:27:13Z"
    },
    {
      "event": "subscribed",
      "id": 3317385609,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzMTczODU2MDk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3317385609",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-08T15:27:14Z"
    },
    {
      "event": "commented",
      "id": 675134254,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY3NTEzNDI1NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/675134254",
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-17T21:54:06Z",
      "updated_at": "2020-08-17T21:54:06Z",
      "author_association": "MEMBER",
      "body": "@ryanofsky I'm a little unclear on the specific question you have here, but would very much like to get to the bottom of it :relaxed:\r\n\r\n-----\r\n\r\n> It seems strange that linux host definition in depends just calls the native system compiler with -m32/-m64 flags, instead of supporting cross compilers and that it doesn't use a -sysroot value to prevent picking up system libraries:\r\n>\r\n> [https://github.com/bitcoin/bitcoin/blob/master/depends/hosts/linux.mk](https://github.com/bitcoin/bitcoin/blob/master/depends/hosts/linux.mk?rgh-link-date=2020-05-08T14%3A12%3A50Z)\r\n> \r\n> This is pretty different than the other windows/darwin/android hosts defined in the same directory, and seems like it would prevent `make HOST=x86_64-pc-linux-gnu` from working on anything other than a matching native platform.\r\n\r\nI'm not 100% sure what you mean here.\r\n\r\n- The only host we use a `-sysroot` value for is darwin\r\n- I believe the `Makefile` logic in `default.mk` and `linux.mk` works (but can most likely be improved) for cross compiling. In the specific case you mentioned, this is the current behaviour:\r\n\t```bash\r\n\t$ make BUILD=riscv64-linux-gnu HOST=x86_64-pc-linux-gnu print-{build,host}{,_CC,_CXX}\r\n\tbuild = riscv64-unknown-linux-gnu\r\n\thost = x86_64-pc-linux-gnu\r\n\tbuild_CC = gcc\r\n\thost_CC = x86_64-pc-linux-gnu-gcc -m64\r\n\tbuild_CXX = g++\r\n\thost_CXX = x86_64-pc-linux-gnu-g++ -m64\r\n\r\n\t``` \r\n\r\nI can see what you're talking about w/re the sysroot situation. I think the situation currently is:\r\n\r\n1. For HOST=BUILD native builds, we rely on unprefixed-`gcc`'s search/library path detection routine, which _will definitely_ pick up system libraries:\r\n\thttps://github.com/bitcoin/bitcoin/blob/1bc8e8eae2dc4b47ef67afc6880ea48b8e84a086/depends/hosts/default.mk#L1-L13\r\n2. For cross builds, we either invoke `$(HOST)-gcc`, or in the case of i686/x86_64 crosses, specify the `-m32/64` multilib. This _should_ indicate to gcc's detection routine to only look for library/headers matching the desired architecture, but it is possible that the user has installed \"cross-compiling development\" system headers/libraries (other than libc and gang) that get picked up. \r\n\r\nI think it is a worthwhile goal to make sure that we pick up the system headers/libraries that we _do_ want (libc, libgcc, libstdc++, kernel headers etc.) and not pick up the system headers/libraries that we _don't_ want (the system bdb, for example). The macOS SDK allows us to do that very nicely, however, it is difficult on Linux distros to separate the two.\r\n\r\nI'll do some more investigation around this, and feel free to clarify your question if I understood it wrong. Will follow up tomorrow...",
      "user": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/18915#issuecomment-675134254",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18915"
    },
    {
      "event": "mentioned",
      "id": 3663750620,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzY2Mzc1MDYyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3663750620",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-17T21:54:07Z"
    },
    {
      "event": "subscribed",
      "id": 3663750623,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2NjM3NTA2MjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3663750623",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-17T21:54:07Z"
    },
    {
      "event": "commented",
      "id": 717432635,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcxNzQzMjYzNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717432635",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-27T18:19:03Z",
      "updated_at": "2020-10-27T18:19:03Z",
      "author_association": "MEMBER",
      "body": "Thanks! I think that answers my questions.\r\n\r\nIIUC, you're saying it might make sense in theory to `-sysroot` when `host_CC` is the local system compiler (`gcc`/`clang`) instead of a cross-compiler `$(default_host_CC)`. Using `-sysroot` in this case would avoid unintentionally picking up libraries and headers that happen to be installed locally. But things are messy so this doesn't work well in practice, and we aren't doing it right now on linux. We are for macos.\r\n\r\nWe could probably also use `-sysroot` when `host_CC` is set to a cross-compiler `$(default_host_CC)` rather than the local system compiler. But we don't because cross-compilers already know to look in their own toolchains and ignore local libraries and headers, so it would be mostly redundant and only serve to avoid picking up \"cross-compiling development\" libraries.\r\n\r\nThe other thing I was confused by is `hosts/linux.mk` choosing the native compiler instead of the cross compiler in cases where using the native compiler would be wrong. You're right to point out that it actually does choose the cross compiler in the linux->linux case:\r\n\r\n```\r\n$ make BUILD=riscv64-linux-gnu HOST=x86_64-pc-linux-gnu print-host_CC\r\nhost_CC = x86_64-pc-linux-gnu-gcc -m64\r\n```\r\n\r\nBut I was thinking more about nonlinux->linux cases:\r\n\r\n```\r\n$ make BUILD=x86_64-apple-darwin16 HOST=x86_64-pc-linux-gnu print-host_CC\r\nhost_CC = gcc -m64\r\n\r\n$ make BUILD=x86_64-w64-mingw32 HOST=x86_64-pc-linux-gnu print-host_CC\r\nmake: *** No rule to make target 'builders/mingw32.mk'.  Stop.\r\n```\r\n\r\nBut I guess these cases are so broken there'd be no point trying to set the variables more correctly",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/18915#issuecomment-717432635",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18915"
    },
    {
      "event": "closed",
      "id": 3927439832,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzkyNzQzOTgzMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3927439832",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-27T18:19:03Z"
    },
    {
      "event": "commented",
      "id": 853331782,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg1MzMzMTc4Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853331782",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-02T19:38:18Z",
      "updated_at": "2021-06-02T19:38:18Z",
      "author_association": "MEMBER",
      "body": "re: https://github.com/bitcoin/bitcoin/issues/18915#issue-614768292\r\n\r\n> > [19:57:12] <achow101> when I build with the depends system, is it supposed to fallback to my system libs if the depends build misses a dependendency?\r\n\r\nJust to link a related issue, #21629 seems to add a way of reliably not falling back to system BDB",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/18915#issuecomment-853331782",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18915"
    },
    {
      "event": "locked",
      "id": 7216609781,
      "node_id": "LOE_lADOABII584kpJ6kzwAAAAGuJLn1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7216609781",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-18T18:36:13Z",
      "lock_reason": "resolved"
    }
  ]
}