{
  "type": "issue",
  "issue": {
    "id": 953307668,
    "node_id": "MDU6SXNzdWU5NTMzMDc2Njg=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/22559",
    "number": 22559,
    "state": "open",
    "state_reason": null,
    "title": "net: redundant connections with a single peer",
    "body": "To reproduce: \r\nhttps://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887305332 (general I2P setup, in+out)\r\nhttps://github.com/bitcoin/bitcoin/issues/22559#issuecomment-903851322 (multiple in, multiple out)\r\n\r\nI've observed my node keeping multiple connections to the same peer in various ways, due to long I2P connection negotiation times, as it's not uncommon to take 10 to 20 seconds to connect to a peer. If additional connections are made during negotiation with the same peer, all connections remain open.\r\n\r\nThe bug should occur on any network. This is an I2P only node, which I'm sure increases the chances of this bug happening because my peers.dat is tiny. Note that I do not have any `addnode=` in my config or anything like that.\r\n\r\n**1 inbound + 1 outbound:**\r\nI connected to a peer. 18 seconds later, it connected to me. These connections persisted for over 12 hours. Both peers are running on a very recent `22.99.0` master branch.\r\n\r\n**2 inbound or 2 inbound:** (2 can be any number with the right timing)\r\nA node connected to me twice around the same time. These connections persisted for over 12 hours. This peer was running the `22.0.0` release.\r\n\r\n`getpeerinfo` data for **1 inbound + 1 outbound** peers:\r\n```\r\n  {\r\n    \"id\": 680,\r\n    \"addr\": \"jz3s4eurm5vzjresf4mwo7oni4bk36daolwxh4iqtewakylgkxmq.b32.i2p:0\",\r\n    \"addrbind\": \"bitcornrd36coazsbzsz4pdebyzvaplmsalq4kpoljmn6cg6x5zq.b32.i2p:0\",\r\n    \"network\": \"i2p\",\r\n    \"services\": \"0000000000000409\",\r\n    \"servicesnames\": [\r\n      \"NETWORK\",\r\n      \"WITNESS\",\r\n      \"NETWORK_LIMITED\"\r\n    ],\r\n    \"relaytxes\": true,\r\n    \"lastsend\": 1627290126,\r\n    \"lastrecv\": 1627290124,\r\n    \"last_transaction\": 1627290120,\r\n    \"last_block\": 0,\r\n    \"bytessent\": 3930317,\r\n    \"bytesrecv\": 13011805,\r\n    \"conntime\": 1627229534,\r\n    \"timeoffset\": -2,\r\n    \"pingtime\": 3.264304,\r\n    \"minping\": 0.719468,\r\n    \"version\": 70016,\r\n    \"subver\": \"/Satoshi:22.99.0(@dunxen)/\",\r\n    \"inbound\": false,\r\n    \"bip152_hb_to\": false,\r\n    \"bip152_hb_from\": false,\r\n    \"startingheight\": 692610,\r\n    \"synced_headers\": 692727,\r\n    \"synced_blocks\": 692727,\r\n    \"inflight\": [\r\n    ],\r\n    \"addr_processed\": 7049,\r\n    \"addr_rate_limited\": 1244,\r\n    \"permissions\": [\r\n    ],\r\n    \"minfeefilter\": 0.00001000,\r\n    \"bytessent_per_msg\": {\r\n      \"addrv2\": 121698,\r\n      \"feefilter\": 32,\r\n      \"getaddr\": 24,\r\n      \"getdata\": 442191,\r\n      \"getheaders\": 1053,\r\n      \"headers\": 8480,\r\n      \"inv\": 3307633,\r\n      \"notfound\": 316,\r\n      \"ping\": 16128,\r\n      \"pong\": 16128,\r\n      \"sendaddrv2\": 24,\r\n      \"sendcmpct\": 66,\r\n      \"sendheaders\": 24,\r\n      \"tx\": 16345,\r\n      \"verack\": 24,\r\n      \"version\": 127,\r\n      \"wtxidrelay\": 24\r\n    },\r\n    \"bytesrecv_per_msg\": {\r\n      \"addrv2\": 167167,\r\n      \"feefilter\": 32,\r\n      \"getdata\": 2090,\r\n      \"getheaders\": 1053,\r\n      \"headers\": 12190,\r\n      \"inv\": 3572569,\r\n      \"notfound\": 122,\r\n      \"ping\": 16128,\r\n      \"pong\": 16128,\r\n      \"sendaddrv2\": 24,\r\n      \"sendcmpct\": 66,\r\n      \"sendheaders\": 24,\r\n      \"tx\": 9208916,\r\n      \"verack\": 24,\r\n      \"version\": 136,\r\n      \"wtxidrelay\": 24\r\n    },\r\n    \"connection_type\": \"outbound-full-relay\"\r\n  },\r\n  {\r\n    \"id\": 682,\r\n    \"addr\": \"jz3s4eurm5vzjresf4mwo7oni4bk36daolwxh4iqtewakylgkxmq.b32.i2p:0\",\r\n    \"addrbind\": \"bitcornrd36coazsbzsz4pdebyzvaplmsalq4kpoljmn6cg6x5zq.b32.i2p:0\",\r\n    \"network\": \"i2p\",\r\n    \"services\": \"0000000000000409\",\r\n    \"servicesnames\": [\r\n      \"NETWORK\",\r\n      \"WITNESS\",\r\n      \"NETWORK_LIMITED\"\r\n    ],\r\n    \"relaytxes\": true,\r\n    \"lastsend\": 1627290124,\r\n    \"lastrecv\": 1627290123,\r\n    \"last_transaction\": 1627290013,\r\n    \"last_block\": 0,\r\n    \"bytessent\": 1585430,\r\n    \"bytesrecv\": 7794448,\r\n    \"conntime\": 1627229552,\r\n    \"timeoffset\": -13,\r\n    \"pingtime\": 1.396263,\r\n    \"minping\": 0.759804,\r\n    \"version\": 70016,\r\n    \"subver\": \"/Satoshi:22.99.0(@dunxen)/\",\r\n    \"inbound\": true,\r\n    \"bip152_hb_to\": false,\r\n    \"bip152_hb_from\": false,\r\n    \"startingheight\": 692610,\r\n    \"synced_headers\": 692727,\r\n    \"synced_blocks\": 692727,\r\n    \"inflight\": [\r\n    ],\r\n    \"addr_processed\": 6055,\r\n    \"addr_rate_limited\": 1188,\r\n    \"permissions\": [\r\n    ],\r\n    \"minfeefilter\": 0.00001000,\r\n    \"bytessent_per_msg\": {\r\n      \"addrv2\": 124133,\r\n      \"feefilter\": 32,\r\n      \"getdata\": 90391,\r\n      \"getheaders\": 1053,\r\n      \"headers\": 8455,\r\n      \"inv\": 1201793,\r\n      \"ping\": 16160,\r\n      \"pong\": 16160,\r\n      \"sendaddrv2\": 24,\r\n      \"sendcmpct\": 66,\r\n      \"sendheaders\": 24,\r\n      \"tx\": 126964,\r\n      \"verack\": 24,\r\n      \"version\": 127,\r\n      \"wtxidrelay\": 24\r\n    },\r\n    \"bytesrecv_per_msg\": {\r\n      \"addrv2\": 145913,\r\n      \"cmpctblock\": 2422,\r\n      \"feefilter\": 32,\r\n      \"getaddr\": 24,\r\n      \"getdata\": 14266,\r\n      \"getheaders\": 1053,\r\n      \"headers\": 12084,\r\n      \"inv\": 5364780,\r\n      \"notfound\": 61,\r\n      \"ping\": 16160,\r\n      \"pong\": 16160,\r\n      \"sendaddrv2\": 24,\r\n      \"sendcmpct\": 66,\r\n      \"sendheaders\": 24,\r\n      \"tx\": 2221195,\r\n      \"verack\": 24,\r\n      \"version\": 136,\r\n      \"wtxidrelay\": 24\r\n    },\r\n    \"connection_type\": \"inbound\"\r\n  }\r\n```\r\n\r\n`getpeerinfo` data for **2 inbound** peers:\r\n```\r\n {\r\n    \"id\": 1326,\r\n    \"addr\": \"acgncqkgqekcxaagpes6ubfiuhg54ijklwcupbnitte5svh3a3bq.b32.i2p:0\",\r\n    \"addrbind\": \"bitcornrd36coazsbzsz4pdebyzvaplmsalq4kpoljmn6cg6x5zq.b32.i2p:0\",\r\n    \"network\": \"i2p\",\r\n    \"services\": \"0000000000000409\",\r\n    \"servicesnames\": [\r\n      \"NETWORK\",\r\n      \"WITNESS\",\r\n      \"NETWORK_LIMITED\"\r\n    ],\r\n    \"relaytxes\": true,\r\n    \"lastsend\": 1629449575,\r\n    \"lastrecv\": 1629449571,\r\n    \"last_transaction\": 1629449402,\r\n    \"last_block\": 0,\r\n    \"bytessent\": 4675731,\r\n    \"bytesrecv\": 5393457,\r\n    \"conntime\": 1629383715,\r\n    \"timeoffset\": -3,\r\n    \"pingtime\": 2.009341,\r\n    \"minping\": 0.5858950000000001,\r\n    \"version\": 70016,\r\n    \"subver\": \"/Satoshi:22.0.0(MN@ca)/\",\r\n    \"inbound\": true,\r\n    \"bip152_hb_to\": false,\r\n    \"bip152_hb_from\": false,\r\n    \"startingheight\": 696531,\r\n    \"synced_headers\": 696664,\r\n    \"synced_blocks\": 696664,\r\n    \"inflight\": [\r\n    ],\r\n    \"addr_relay_enabled\": true,\r\n    \"addr_processed\": 6062,\r\n    \"addr_rate_limited\": 0,\r\n    \"permissions\": [\r\n    ],\r\n    \"minfeefilter\": 0.00001000,\r\n    \"bytessent_per_msg\": {\r\n      \"addrv2\": 149637,\r\n      \"cmpctblock\": 5710,\r\n      \"feefilter\": 32,\r\n      \"getdata\": 2941,\r\n      \"getheaders\": 1053,\r\n      \"headers\": 9752,\r\n      \"inv\": 3847162,\r\n      \"notfound\": 3173,\r\n      \"ping\": 17568,\r\n      \"pong\": 17312,\r\n      \"sendaddrv2\": 24,\r\n      \"sendcmpct\": 66,\r\n      \"sendheaders\": 24,\r\n      \"tx\": 621102,\r\n      \"verack\": 24,\r\n      \"version\": 127,\r\n      \"wtxidrelay\": 24\r\n    },\r\n    \"bytesrecv_per_msg\": {\r\n      \"addrv2\": 130686,\r\n      \"feefilter\": 32,\r\n      \"getaddr\": 24,\r\n      \"getdata\": 51317,\r\n      \"getheaders\": 1053,\r\n      \"headers\": 10519,\r\n      \"inv\": 5142494,\r\n      \"ping\": 17312,\r\n      \"pong\": 17568,\r\n      \"sendaddrv2\": 24,\r\n      \"sendcmpct\": 66,\r\n      \"sendheaders\": 24,\r\n      \"tx\": 22157,\r\n      \"verack\": 24,\r\n      \"version\": 133,\r\n      \"wtxidrelay\": 24\r\n    },\r\n    \"connection_type\": \"inbound\"\r\n  },\r\n  {\r\n    \"id\": 1327,\r\n    \"addr\": \"acgncqkgqekcxaagpes6ubfiuhg54ijklwcupbnitte5svh3a3bq.b32.i2p:0\",\r\n    \"addrbind\": \"bitcornrd36coazsbzsz4pdebyzvaplmsalq4kpoljmn6cg6x5zq.b32.i2p:0\",\r\n    \"network\": \"i2p\",\r\n    \"services\": \"0000000000000409\",\r\n    \"servicesnames\": [\r\n      \"NETWORK\",\r\n      \"WITNESS\",\r\n      \"NETWORK_LIMITED\"\r\n    ],\r\n    \"relaytxes\": true,\r\n    \"lastsend\": 1629449578,\r\n    \"lastrecv\": 1629449580,\r\n    \"last_transaction\": 1629448430,\r\n    \"last_block\": 0,\r\n    \"bytessent\": 4869327,\r\n    \"bytesrecv\": 5433036,\r\n    \"conntime\": 1629383742,\r\n    \"timeoffset\": -21,\r\n    \"pingtime\": 1.979714,\r\n    \"minping\": 0.69269,\r\n    \"version\": 70016,\r\n    \"subver\": \"/Satoshi:22.0.0(MN@ca)/\",\r\n    \"inbound\": true,\r\n    \"bip152_hb_to\": false,\r\n    \"bip152_hb_from\": false,\r\n    \"startingheight\": 696531,\r\n    \"synced_headers\": 696664,\r\n    \"synced_blocks\": 696664,\r\n    \"inflight\": [\r\n    ],\r\n    \"addr_relay_enabled\": true,\r\n    \"addr_processed\": 6188,\r\n    \"addr_rate_limited\": 0,\r\n    \"permissions\": [\r\n    ],\r\n    \"minfeefilter\": 0.00001000,\r\n    \"bytessent_per_msg\": {\r\n      \"addrv2\": 148858,\r\n      \"feefilter\": 32,\r\n      \"getdata\": 1932,\r\n      \"getheaders\": 1053,\r\n      \"headers\": 9858,\r\n      \"inv\": 3872869,\r\n      \"notfound\": 2259,\r\n      \"ping\": 17568,\r\n      \"pong\": 17312,\r\n      \"sendaddrv2\": 24,\r\n      \"sendcmpct\": 66,\r\n      \"sendheaders\": 24,\r\n      \"tx\": 797297,\r\n      \"verack\": 24,\r\n      \"version\": 127,\r\n      \"wtxidrelay\": 24\r\n    },\r\n    \"bytesrecv_per_msg\": {\r\n      \"addrv2\": 133478,\r\n      \"feefilter\": 32,\r\n      \"getaddr\": 24,\r\n      \"getdata\": 68654,\r\n      \"getheaders\": 1053,\r\n      \"headers\": 10625,\r\n      \"inv\": 5171958,\r\n      \"ping\": 17312,\r\n      \"pong\": 17568,\r\n      \"sendaddrv2\": 24,\r\n      \"sendcmpct\": 66,\r\n      \"sendheaders\": 24,\r\n      \"tx\": 12037,\r\n      \"verack\": 24,\r\n      \"version\": 133,\r\n      \"wtxidrelay\": 24\r\n    },\r\n    \"connection_type\": \"inbound\"\r\n  }\r\n```",
    "user": {
      "login": "tryphe",
      "id": 8435003,
      "node_id": "MDQ6VXNlcjg0MzUwMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tryphe",
      "html_url": "https://github.com/tryphe",
      "followers_url": "https://api.github.com/users/tryphe/followers",
      "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
      "organizations_url": "https://api.github.com/users/tryphe/orgs",
      "repos_url": "https://api.github.com/users/tryphe/repos",
      "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/tryphe/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 32,
    "created_at": "2021-07-26T21:35:29Z",
    "updated_at": "2021-08-31T10:23:39Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 5070883942,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDUwNzA4ODM5NDI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5070883942",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-26T21:35:29Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "commented",
      "id": 887060058,
      "node_id": "IC_kwDOABII584033Za",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887060058",
      "actor": {
        "login": "ghost",
        "id": 10137,
        "node_id": "MDQ6VXNlcjEwMTM3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ghost",
        "html_url": "https://github.com/ghost",
        "followers_url": "https://api.github.com/users/ghost/followers",
        "following_url": "https://api.github.com/users/ghost/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ghost/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ghost/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
        "organizations_url": "https://api.github.com/users/ghost/orgs",
        "repos_url": "https://api.github.com/users/ghost/repos",
        "events_url": "https://api.github.com/users/ghost/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ghost/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-26T22:07:55Z",
      "updated_at": "2021-07-26T22:07:55Z",
      "author_association": "NONE",
      "body": "Can you share the result for `bitcoin-cli -netinfo` and relevant options from bitcoin.conf ? Does this happen only with i2p peers?",
      "user": {
        "login": "ghost",
        "id": 10137,
        "node_id": "MDQ6VXNlcjEwMTM3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ghost",
        "html_url": "https://github.com/ghost",
        "followers_url": "https://api.github.com/users/ghost/followers",
        "following_url": "https://api.github.com/users/ghost/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ghost/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ghost/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
        "organizations_url": "https://api.github.com/users/ghost/orgs",
        "repos_url": "https://api.github.com/users/ghost/repos",
        "events_url": "https://api.github.com/users/ghost/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ghost/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887060058",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887117828,
      "node_id": "IC_kwDOABII58404FgE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887117828",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T00:24:37Z",
      "updated_at": "2021-08-31T10:23:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Can you share the result for `bitcoin-cli -netinfo` and relevant options from bitcoin.conf ? Does this happen only with i2p peers?\r\n\r\nSure! {moved extra info to original post about being an I2P-only node}\r\n\r\nEdit: I misread your initial request but here's the `-netinfo` output:\r\n```\r\nBitcoin Core v22.99.0-8193294caba0-dirty - 70016/Satoshi:22.99.0/\r\n\r\n        ipv4    ipv6   onion     i2p   total   block  manual\r\nin         0       0       0       3       3\r\nout        0       0       0      11      11       0       2\r\ntotal      0       0       0      14      14\r\n\r\nLocal addresses\r\nbitcornrd36coazsbzsz4pdebyzvaplmsalq4kpoljmn6cg6x5zq.b32.i2p     port      0    score      4\r\n```\r\n\r\n`getnetworkinfo`:\r\n```\r\n{\r\n  \"version\": 229900,\r\n  \"subversion\": \"/Satoshi:22.99.0/\",\r\n  \"protocolversion\": 70016,\r\n  \"localservices\": \"0000000000000409\",\r\n  \"localservicesnames\": [\r\n    \"NETWORK\",\r\n    \"WITNESS\",\r\n    \"NETWORK_LIMITED\"\r\n  ],\r\n  \"localrelay\": true,\r\n  \"timeoffset\": -6,\r\n  \"networkactive\": true,\r\n  \"connections\": 10,\r\n  \"connections_in\": 4,\r\n  \"connections_out\": 6,\r\n  \"networks\": [\r\n    {\r\n      \"name\": \"ipv4\",\r\n      \"limited\": true,\r\n      \"reachable\": false,\r\n      \"proxy\": \"\",\r\n      \"proxy_randomize_credentials\": false\r\n    },\r\n    {\r\n      \"name\": \"ipv6\",\r\n      \"limited\": true,\r\n      \"reachable\": false,\r\n      \"proxy\": \"\",\r\n      \"proxy_randomize_credentials\": false\r\n    },\r\n    {\r\n      \"name\": \"onion\",\r\n      \"limited\": true,\r\n      \"reachable\": false,\r\n      \"proxy\": \"\",\r\n      \"proxy_randomize_credentials\": false\r\n    },\r\n    {\r\n      \"name\": \"i2p\",\r\n      \"limited\": false,\r\n      \"reachable\": true,\r\n      \"proxy\": \"127.0.0.1:7656\",\r\n      \"proxy_randomize_credentials\": false\r\n    }\r\n  ],\r\n  \"relayfee\": 0.00001000,\r\n  \"incrementalfee\": 0.00001000,\r\n  \"localaddresses\": [\r\n    {\r\n      \"address\": \"bitcornrd36coazsbzsz4pdebyzvaplmsalq4kpoljmn6cg6x5zq.b32.i2p\",\r\n      \"port\": 0,\r\n      \"score\": 4\r\n    }\r\n  ],\r\n  \"warnings\": \"This is a pre-release test build - use at your own risk - do not use for mining or merchant applications\"\r\n}\r\n```\r\n\r\nbitcoin.conf:\r\n```\r\nlisten=1\r\nport=8333\r\nbind=127.0.0.1\r\nonlynet=i2p\r\ni2pacceptincoming=1\r\ni2psam=127.0.0.1:7656\r\n```\r\n\r\n(note: removed the `port=` line and the bug still occurs)",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887117828",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "renamed",
      "id": 5071377816,
      "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50NTA3MTM3NzgxNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5071377816",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T00:31:38Z",
      "rename": {
        "from": "net: redundant connections are made with a single peer",
        "to": "net: redundant connections with a single peer"
      }
    },
    {
      "event": "commented",
      "id": 887184901,
      "node_id": "IC_kwDOABII58404V4F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887184901",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T03:46:30Z",
      "updated_at": "2021-07-27T03:49:38Z",
      "author_association": "MEMBER",
      "body": "Thanks for reporting and for testing an I2P service. Are you or the inbound peer running a version before https://github.com/bitcoin/bitcoin/pull/22112? I see you're setting port to 8333. (This might be a duplicate of https://github.com/bitcoin/bitcoin/issues/21389.)",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887184901",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887185619,
      "node_id": "IC_kwDOABII58404WDT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887185619",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T03:49:11Z",
      "updated_at": "2021-07-27T03:49:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Thanks for reporting. Are you or the inbound peer running a version before #22112? I see you're setting port to 8333. (This might be a duplicate of #21389.)\r\n\r\nNegative. The port=0 change was merged on 7/13, and the version was bumped to 0.22 on 7/20. I just happened to leave my config the same.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887185619",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887186974,
      "node_id": "IC_kwDOABII58404WYe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887186974",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T03:53:53Z",
      "updated_at": "2021-07-27T03:53:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "As per `getnetworkinfo`, my I2P port is forced to 0, so I don't think this something to do with the bug.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887186974",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887187447,
      "node_id": "IC_kwDOABII58404Wf3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887187447",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T03:55:23Z",
      "updated_at": "2021-07-27T05:15:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "I tried to replicate the bug by waiting for a random I2P peer to make an inbound connection. Afterwards, I call `addconnection abc.b32.i2p full-outbound-relay`. I commented out [these lines](https://github.com/ytytgo/lit/blob/7f37a1d560a86aa0a4397c3dcdaa974337594c00/src/rpc/net.cpp#L350-L352) to skip the regtest check. \r\n\r\nBut I can't reproduce the bug in the OP, the call fails via debug.log: \r\n`Failed to open new connection, already connected`\r\n\r\nI think one or two things are happening here:\r\n1. Some environmental variables are at play. I did not connect to the peer as quickly as when the bug was produced. Ping times on I2P are often 5 to 20 seconds. I'm not sure if this could cause the issue. I often see inbound/outbound duplicate connections to the same peer at the same time, however the latter connection almost always closes within a few seconds, except for in the case of the OP and one other time that I've observed. Perhaps the bug happens if we connect simultaneously, but only under certain conditions?\r\n2. Maybe the call stack which fails during my test is not the same as during real time. There are many places in which we call `FindNode` in various fashions (sometimes called directly or through `AlreadyConnectedToAddress`, for example) and does not fail or succeed verbosely, which may lead to an edge case somewhere?\r\n",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887187447",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887189364,
      "node_id": "IC_kwDOABII58404W90",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887189364",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T04:01:29Z",
      "updated_at": "2021-07-27T04:01:29Z",
      "author_association": "MEMBER",
      "body": "Are both peers you? (an inbound peer running an earlier version could still double connect to you.)",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887189364",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887190269,
      "node_id": "IC_kwDOABII58404XL9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887190269",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T04:03:44Z",
      "updated_at": "2021-07-27T04:03:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Are both peers you? (an inbound peer running an earlier version could still double connect to you.)\r\n\r\nNope, although they do have an @dunxen in their User Agent. But I'm unsure who that is. We are both running the i2p-port=0 branch.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887190269",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887199651,
      "node_id": "IC_kwDOABII58404Zej",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887199651",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T04:29:29Z",
      "updated_at": "2021-07-27T04:30:30Z",
      "author_association": "MEMBER",
      "body": "Just restarted a clearnet/onion/i2p node and both peers were briefly double-connected to me as double inbound peers, but only for a few seconds and now down to one connection each.\r\n\r\n@duncandean, at what commit is your I2P service running? (cli -version or -netinfo will tell you)",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887199651",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "mentioned",
      "id": 5071939438,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTA3MTkzOTQzOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5071939438",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T04:29:30Z"
    },
    {
      "event": "subscribed",
      "id": 5071939442,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUwNzE5Mzk0NDI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5071939442",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T04:29:30Z"
    },
    {
      "event": "commented",
      "id": 887204696,
      "node_id": "IC_kwDOABII58404atY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887204696",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T04:45:11Z",
      "updated_at": "2021-07-27T05:00:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Just restarted a clearnet/onion/i2p node and both peers were briefly double-connected to me as double inbound peers, but only for a few seconds and now down to one connection each.\r\n\r\nSounds about right, I've observed this as well. I only spotted the bug because I frequently look at my peer list to see how quickly people are onboarding to I2P. But fwiw, my node was up for about a week before I observed the 12 hour long connections in the OP.\r\n\r\nI'm going to clone my I2P machine to see if I can reproduce the bug by connecting to myself.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887204696",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887223569,
      "node_id": "IC_kwDOABII58404fUR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887223569",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T05:35:02Z",
      "updated_at": "2021-07-27T05:45:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "> @duncandean, at what commit is your I2P service running? (cli -version or -netinfo will tell you)\n\nI'm at fd557ceb.\n\nAlso, I do have an `addnode=bitcorn...` in my config.\n\n",
      "user": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887223569",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "mentioned",
      "id": 5072106808,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTA3MjEwNjgwOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5072106808",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T05:35:03Z"
    },
    {
      "event": "subscribed",
      "id": 5072106810,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUwNzIxMDY4MTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5072106810",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T05:35:03Z"
    },
    {
      "event": "commented",
      "id": 887230321,
      "node_id": "IC_kwDOABII58404g9x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887230321",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T05:52:59Z",
      "updated_at": "2021-07-27T05:53:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > @duncandean, at what commit is your I2P service running? (cli -version or -netinfo will tell you)\r\n> \r\n> I'm at [fd557ce](https://github.com/bitcoin/bitcoin/commit/fd557ceb885ec55ac6865953e7325bcebc5a6972).\r\n> \r\n> Also, I do have an `addnode=bitcorn...` in my config.\r\n\r\nAhh, thanks for clarifying!\r\n\r\nI wonder why my node automatically maintained a connection to you, though. I don't use any addnodes.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887230321",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "mentioned",
      "id": 5072156856,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTA3MjE1Njg1Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5072156856",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T05:53:00Z"
    },
    {
      "event": "subscribed",
      "id": 5072156863,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUwNzIxNTY4NjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5072156863",
      "actor": {
        "login": "dunxen",
        "id": 3072149,
        "node_id": "MDQ6VXNlcjMwNzIxNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3072149?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dunxen",
        "html_url": "https://github.com/dunxen",
        "followers_url": "https://api.github.com/users/dunxen/followers",
        "following_url": "https://api.github.com/users/dunxen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dunxen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dunxen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dunxen/subscriptions",
        "organizations_url": "https://api.github.com/users/dunxen/orgs",
        "repos_url": "https://api.github.com/users/dunxen/repos",
        "events_url": "https://api.github.com/users/dunxen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dunxen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T05:53:00Z"
    },
    {
      "event": "commented",
      "id": 887272056,
      "node_id": "IC_kwDOABII58404rJ4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887272056",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T07:15:16Z",
      "updated_at": "2021-07-27T07:15:16Z",
      "author_association": "MEMBER",
      "body": "@tryphe you will probably see the address if you run rpc getnodeaddresses 0 \"i2p\", indicating its in your addrman. Then look at how many I2P peers your node knows (cli -addrinfo gives the totals).",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887272056",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "mentioned",
      "id": 5072460847,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTA3MjQ2MDg0Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5072460847",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T07:15:16Z"
    },
    {
      "event": "subscribed",
      "id": 5072460852,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUwNzI0NjA4NTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5072460852",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T07:15:16Z"
    },
    {
      "event": "commented",
      "id": 887295157,
      "node_id": "IC_kwDOABII58404wy1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887295157",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T07:54:21Z",
      "updated_at": "2021-07-27T07:54:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "> @tryphe you will probably see the address if you run rpc getnodeaddresses 0 \"i2p\", indicating its in your addrman. Then look at how many I2P peers your node knows (cli -addrinfo gives the totals).\r\n\r\n18 I2P peers currently.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887295157",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "mentioned",
      "id": 5072639984,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTA3MjYzOTk4NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5072639984",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T07:54:21Z"
    },
    {
      "event": "subscribed",
      "id": 5072639986,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUwNzI2Mzk5ODY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5072639986",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T07:54:21Z"
    },
    {
      "event": "commented",
      "id": 887305332,
      "node_id": "IC_kwDOABII58404zR0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887305332",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T08:09:43Z",
      "updated_at": "2021-07-27T09:11:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "I was able to reproduce the behavior of the bug with 2 machines on mainnet. To reproduce:\r\n\r\nOptional steps on installing if you don't have an I2P node: \r\na. [stackexchange howto for I2P bitcoin](https://bitcoin.stackexchange.com/a/103403)\r\nb. Configure and confirm your i2pd mixnet(external) port and sam(local loopback) port in `/etc/i2pd/i2pd.conf`\r\nc. Restart i2pd: `sudo systemctl restart i2pd`\r\nd. Ensure the sam/mixnet ports are listening locally: `ss -lt`. You should see `127.0.0.1:sam_port`(default 7656) and `0.0.0.0:mixnet_port`(random port)\r\ne. Open a hole in your firewall to your mixnet ports. One mixnet port for each machine.\r\n\r\n1. Obtain two I2P bitcoin nodes and ensure the I2P mixnet port is _externally_ accessible on each machine. \r\n\r\n2. Start bitcoind or bitcoin-qt. Run `getnetworkinfo` until the service is established and you see your `abcdef.b32.i2p` address near the bottom of the output. Takes a few minutes.\r\n\r\n3. On machine A, enter `addnode machine_b_address.b32.i2p onetry`, and vice versa on machine B.\r\n\r\n4. Run the commands at the same time.\r\n\r\nIf you are fast enough, the machines will maintain two connections, and the bug occurs. If you are too slow, normal expected behavior will occur, and each subsequent connection will close.\r\n\r\nNote: also works with `addconnection` instead of `addnode`, which has the same behavior bugwise, but tags the connection differently, ie. \"Full Relay\" vs \"Manual\".",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887305332",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887352658,
      "node_id": "IC_kwDOABII58404-1S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887352658",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T09:19:06Z",
      "updated_at": "2021-07-27T09:23:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "I didn't test it on normal IP but I'm going to assume the latency has something to do with the bug. Otherwise it would have already been reported.... maybe. If anyone can try to reproduce it on non-i2p with/without some latency, that would be sweet!",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887352658",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887409971,
      "node_id": "IC_kwDOABII58405M0z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887409971",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T10:47:58Z",
      "updated_at": "2021-07-27T10:47:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "Doh, this seems like a duplicate of https://github.com/bitcoin/bitcoin/issues/21389. Just realized, sorry. Will follow up there if there's a good solution found.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887409971",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "closed",
      "id": 5073529958,
      "node_id": "MDExOkNsb3NlZEV2ZW50NTA3MzUyOTk1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5073529958",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T10:47:58Z"
    },
    {
      "event": "commented",
      "id": 887412967,
      "node_id": "IC_kwDOABII58405Njn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887412967",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T10:53:24Z",
      "updated_at": "2021-07-27T10:55:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "@jonatack I think we should re-open the original issue instead of keeping this one open. Regarding [this comment](https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-866925116), it should be fixed, but isn't.\r\n\r\nBut feel free to re-open this one if you want.\r\n\r\nNote: I removed the `port=` line from my config before and after testing, so it seems unrelated to that.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887412967",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "mentioned",
      "id": 5073553817,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTA3MzU1MzgxNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5073553817",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T10:53:24Z"
    },
    {
      "event": "subscribed",
      "id": 5073553820,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUwNzM1NTM4MjA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5073553820",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T10:53:24Z"
    },
    {
      "event": "commented",
      "id": 887442171,
      "node_id": "IC_kwDOABII58405Ur7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887442171",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T11:43:00Z",
      "updated_at": "2021-07-27T11:43:00Z",
      "author_association": "MEMBER",
      "body": "> Note: I removed the `port=` line from my config before and after testing, so it seems unrelated to that.\r\n\r\nI didn't try setting port=8333 while testing #22112, so thanks for checking and reporting on that.  I have `watch -netinfo 4` running all the time and haven't seen any persistent double connections lately but will keep an eye out.  Good to finally know who the `bitcorn...b32.i2p` address is!",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887442171",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887494942,
      "node_id": "IC_kwDOABII58405hke",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887494942",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T13:05:09Z",
      "updated_at": "2021-07-27T13:05:09Z",
      "author_association": "MEMBER",
      "body": "I think this is a different issue than https://github.com/bitcoin/bitcoin/issues/21389.\r\n\r\nThe latter allowed `A` to open more than one outgoing connections to `B` on different ports. This is I2P specific because ports are irrelevant in I2P (when using SAM 3.1), so connecting to `B:port1` and `B:port2` would be, for sure, connecting to the same peer.\r\n\r\nThis issue looks to be about `A` opening a connection to `B` while, at about the same time, `B` opening a connection to `A`. I think, with the right timing, this can happen also with other networks, i.e. is not I2P specific. I have not confirmed that with an experiment.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887494942",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 887817351,
      "node_id": "IC_kwDOABII58406wSH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887817351",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T20:36:26Z",
      "updated_at": "2021-07-27T20:36:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks vasild! That makes sense. If one socket is already open, it works as intended. I'll reopen this.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887817351",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "reopened",
      "id": 5076580510,
      "node_id": "MDEzOlJlb3BlbmVkRXZlbnQ1MDc2NTgwNTEw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5076580510",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T20:36:26Z"
    },
    {
      "event": "commented",
      "id": 887879011,
      "node_id": "IC_kwDOABII58406_Vj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887879011",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T22:35:51Z",
      "updated_at": "2021-07-27T22:47:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "@jonatack I tried your patch(looks like the comment is deleted now) with some added verbosity and both nodes disconnect each other instead of maintaining redundant connections.\r\n\r\nThis looks like an observation timing problem. From the perspective of node A and B, they both tried to connect first. If they disconnect on accept, both are disconnected. If we make them disconnect after accept, I assume both will disconnect unless there is some sort of agreement made on who will disconnect. Something like: `if (my_address < peer_address) { disconnect(); }` that way only one side will disconnect and no communication is required.\r\n\r\nBut putting in this kind of logic will require the other peer to have an updated binary. Maybe if they don't disconnect after a certain period and they are the one with a lower peer address, disconnect one of the redundant sockets after a certain period.\r\n\r\nOr maybe it can be done with just some `FindNode()` logic and an edge case is missing somewhere. I'm not sure.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-887879011",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "mentioned",
      "id": 5077000181,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTA3NzAwMDE4MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5077000181",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T22:35:51Z"
    },
    {
      "event": "subscribed",
      "id": 5077000182,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUwNzcwMDAxODI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5077000182",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-07-27T22:35:51Z"
    },
    {
      "event": "commented",
      "id": 890710790,
      "node_id": "IC_kwDOABII5841FysG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890710790",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-02T04:46:32Z",
      "updated_at": "2021-08-02T04:49:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "I observed the bug happening again today while restarting my node on the current master branch with a different 22.99.0 peer.\r\n\r\nMaybe we can add a task scheduler routine to check for duplicate connections? It seems like we can't patch into existing functionality so this seems like the most obvious thing to do.\r\n\r\n",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-890710790",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 890895300,
      "node_id": "IC_kwDOABII5841GfvE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890895300",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-02T10:01:30Z",
      "updated_at": "2021-08-02T10:01:30Z",
      "author_association": "MEMBER",
      "body": "Was the double connection in+in or in+out? An I2P peer?",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-890895300",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 891375318,
      "node_id": "IC_kwDOABII5841IU7W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891375318",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-02T22:26:27Z",
      "updated_at": "2021-08-02T22:26:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Was the double connection in+in or in+out? An I2P peer?\r\n\r\nIn + out, I2P",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-891375318",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 898876871,
      "node_id": "IC_kwDOABII5841k8XH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/898876871",
      "actor": {
        "login": "xanoni",
        "id": 77220130,
        "node_id": "MDQ6VXNlcjc3MjIwMTMw",
        "avatar_url": "https://avatars.githubusercontent.com/u/77220130?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xanoni",
        "html_url": "https://github.com/xanoni",
        "followers_url": "https://api.github.com/users/xanoni/followers",
        "following_url": "https://api.github.com/users/xanoni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xanoni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xanoni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xanoni/subscriptions",
        "organizations_url": "https://api.github.com/users/xanoni/orgs",
        "repos_url": "https://api.github.com/users/xanoni/repos",
        "events_url": "https://api.github.com/users/xanoni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xanoni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-14T10:32:38Z",
      "updated_at": "2021-08-14T10:32:38Z",
      "author_association": "NONE",
      "body": "I have a (hopefully straight forward) question that's not exactly the same that OP mentioned, but somewhat related:\r\n\r\nWould `bitcoind` ever connect to (and stay connected to) the same node more than once if that node was using some combination of Tor, I2P, and clearnet? Or would it detect this reliably and only keep one of the connections?  ",
      "user": {
        "login": "xanoni",
        "id": 77220130,
        "node_id": "MDQ6VXNlcjc3MjIwMTMw",
        "avatar_url": "https://avatars.githubusercontent.com/u/77220130?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xanoni",
        "html_url": "https://github.com/xanoni",
        "followers_url": "https://api.github.com/users/xanoni/followers",
        "following_url": "https://api.github.com/users/xanoni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xanoni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xanoni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xanoni/subscriptions",
        "organizations_url": "https://api.github.com/users/xanoni/orgs",
        "repos_url": "https://api.github.com/users/xanoni/repos",
        "events_url": "https://api.github.com/users/xanoni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xanoni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-898876871",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 902666895,
      "node_id": "IC_kwDOABII5841zZqP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/902666895",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-20T12:48:18Z",
      "updated_at": "2021-08-20T12:49:56Z",
      "author_association": "MEMBER",
      "body": "> Would `bitcoind` ever connect to (and stay connected to) the same node more than once if that node was using some combination of Tor, I2P, and clearnet? Or would it detect this reliably and only keep one of the connections?\r\n\r\nThere is no such detection. So we can connect to e.g. `2.39.173.126:8333` and `2g5qfdkn2vvcbqhzcyvyiitg4ceukybxklraxjnu7atlhd22gdwywaid.onion:8333` and remain connected even if that is the same (multi-homed) node.\r\n\r\nThere is only a detection that we do not keep a connection to ourselves. It works roughly like this: when `A` connects to `B`, `A` assigns a \"random\" nonce to that connection and sends it as part of the `VERSION` message to `B`. When `B` receives the `VERSION` message it checks if the nonce from it equals any of the nonces of its outgoing connections - if it does, then `B` closes the just accepted connection, thinking that it connected to itself:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/192a959b65660ffacedb5a5eb2a0d26736c636d7/src/net_processing.cpp#L2535-L2541",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-902666895",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 902970365,
      "node_id": "IC_kwDOABII58410jv9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/902970365",
      "actor": {
        "login": "xanoni",
        "id": 77220130,
        "node_id": "MDQ6VXNlcjc3MjIwMTMw",
        "avatar_url": "https://avatars.githubusercontent.com/u/77220130?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xanoni",
        "html_url": "https://github.com/xanoni",
        "followers_url": "https://api.github.com/users/xanoni/followers",
        "following_url": "https://api.github.com/users/xanoni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xanoni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xanoni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xanoni/subscriptions",
        "organizations_url": "https://api.github.com/users/xanoni/orgs",
        "repos_url": "https://api.github.com/users/xanoni/repos",
        "events_url": "https://api.github.com/users/xanoni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xanoni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-20T21:35:14Z",
      "updated_at": "2021-08-20T21:42:00Z",
      "author_association": "NONE",
      "body": "> There is no such detection.\r\n\r\nThank you. How difficult would it be to detect this, if desired? Is there some type of fingerprint/key/identifier that could be matched? Or would this require a whole new mechanism to be designed & implemented? [1]\r\n\r\nAlso, would it be possible for an attacker to just create 13,337 Hidden Services (e.g., all `.onion`'s or a mix of I2P and Tor) that all connect to the same `bitcoind`? Or does `bitcoind` only behave predictably with one address per network? I assume independent of the answer, an attacker could modify `bitcoind` to handle a large number of addresses predictably.\r\n\r\n(One could also reframe the above as: can I protect my node from Sybil-attacks by creating an undisclosed number of extra hidden services / I2P destinations?)\r\n\r\n[1] If yes, it could potentially be similar to what JoinMarket is doing with its Fidelity Bonds. (Assuming one wants protection from malicious Sybil activity ... otherwise I guess there would be a non-deposit solution.) However, I am aware that this would be a very major change and is probably not needed.",
      "user": {
        "login": "xanoni",
        "id": 77220130,
        "node_id": "MDQ6VXNlcjc3MjIwMTMw",
        "avatar_url": "https://avatars.githubusercontent.com/u/77220130?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xanoni",
        "html_url": "https://github.com/xanoni",
        "followers_url": "https://api.github.com/users/xanoni/followers",
        "following_url": "https://api.github.com/users/xanoni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xanoni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xanoni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xanoni/subscriptions",
        "organizations_url": "https://api.github.com/users/xanoni/orgs",
        "repos_url": "https://api.github.com/users/xanoni/repos",
        "events_url": "https://api.github.com/users/xanoni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xanoni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-902970365",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 903333808,
      "node_id": "IC_kwDOABII584118ew",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/903333808",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-22T21:36:42Z",
      "updated_at": "2021-08-23T04:11:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "I noticed 2 inbound connections to me from a `22.0.0` peer which lasted many hours, so I updated the OP with the relevant peer info. I knew in+out was possible, but not in+in, which seems more dangerous as it seems like an I2P peer could _possibly_ maliciously fill as many of my inbound connections as they want, with careful timing. \r\n\r\nAlthough I'm not sure whether this is conceptually more dangerous than someone just creating a bunch of different I2P addresses and connecting to me normally, which is already possible without the bug.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-903333808",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 903851322,
      "node_id": "IC_kwDOABII58413606",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/903851322",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-23T14:59:39Z",
      "updated_at": "2021-08-23T14:59:39Z",
      "author_association": "MEMBER",
      "body": "I confirm the 2x inbound case: just execute the below two times quickly one after another (in different terminals, e.g. start connecting to the same peer at the same time):\r\n```\r\nbitcoin-cli addnode 4hllr6w55mbtemb3ebvlzl4zj6qke4si7zcob5qdyg63mjgq624a.b32.i2p:0 onetry\r\n```\r\n\r\nThe relevant code is:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/f6f7a12462b381945b1cb9bcb94b129d8fb7e289/src/net.cpp#L2214-L2233\r\n\r\nThis is the code that opens a new connection - on line 2216 or 2219 it checks if we are already connected to the peer (this looks into `vNodes`) and it adds the peer to `vNodes` later on line 2232. So, if two threads come here and pass the check \"not already connected to that peer\" they will both connect and add the peer to `vNodes`.\r\n\r\nThis is not I2P specific, but if `ConnectNode()` (line 2222) is slow like in I2P, that makes it more likely to occur. ",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-903851322",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "commented",
      "id": 904256504,
      "node_id": "IC_kwDOABII58415dv4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/904256504",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-24T01:50:26Z",
      "updated_at": "2021-08-24T20:31:01Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks @vasild! I can confirm this. I initially tried this with a bunch of peers that weren't myself, to no avail. Seems like my latency was too low to reproduce the bug after being connected to the mixnet for a while. But I tried again with a fresh VM and a fresh I2P address and was able to easily open 4 connections to my main node which remained open.\r\n\r\n```\r\n$ ./bitcoin-cli getpeerinfo | grep \\\"addr\\\":\r\n    \"addr\": \"yadcavfqg6urtrpss2zxylxumw6sbp5tgk6hon7uxosjippeulwa.b32.i2p:0\",\r\n    \"addr\": \"yadcavfqg6urtrpss2zxylxumw6sbp5tgk6hon7uxosjippeulwa.b32.i2p:0\",\r\n    \"addr\": \"yadcavfqg6urtrpss2zxylxumw6sbp5tgk6hon7uxosjippeulwa.b32.i2p:0\",\r\n    \"addr\": \"yadcavfqg6urtrpss2zxylxumw6sbp5tgk6hon7uxosjippeulwa.b32.i2p:0\",\r\n```\r\n",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-904256504",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    },
    {
      "event": "mentioned",
      "id": 5197783468,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTE5Nzc4MzQ2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5197783468",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-24T01:50:27Z"
    },
    {
      "event": "subscribed",
      "id": 5197783470,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUxOTc3ODM0NzA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5197783470",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-24T01:50:27Z"
    },
    {
      "event": "commented",
      "id": 904261220,
      "node_id": "IC_kwDOABII58415e5k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/904261220",
      "actor": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-24T02:04:01Z",
      "updated_at": "2021-08-24T05:24:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "If we modify `OpenNetworkConnection()` in vasild's comment above to remove the outbound race condition, there is still an inbound race condition in this call to `AcceptConnection()` via `CConnMan::SocketHandler()`:\r\nhttps://github.com/bitcoin/bitcoin/blob/602c8eb8f0fb1a09ba44b8a744c4aaf3f8a6a78a/src/net.cpp#L1528 \r\n\r\nThe new connection is accepted but the node is not added to `vNodes` until the end of nested call `CreateNodeFromAcceptedSocket()`:\r\nhttps://github.com/bitcoin/bitcoin/blob/602c8eb8f0fb1a09ba44b8a744c4aaf3f8a6a78a/src/net.cpp#L1205-L1208\r\n`pnode` is not created and added to `vNodes` until the end of the function, when we know `hSocket` is valid. But intuitively it doesn't seem to me like the rest of the code should block for very long. At least not enough time for multiple other connections to occur. Strange?\r\n\r\nWe should look into fixing both inbound and outbound races so that implementations with OR without the outbound race won't be able to create duplicate connections to future nodes that have been patched for this bug.",
      "user": {
        "login": "tryphe",
        "id": 8435003,
        "node_id": "MDQ6VXNlcjg0MzUwMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8435003?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tryphe",
        "html_url": "https://github.com/tryphe",
        "followers_url": "https://api.github.com/users/tryphe/followers",
        "following_url": "https://api.github.com/users/tryphe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tryphe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tryphe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
        "organizations_url": "https://api.github.com/users/tryphe/orgs",
        "repos_url": "https://api.github.com/users/tryphe/repos",
        "events_url": "https://api.github.com/users/tryphe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tryphe/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22559#issuecomment-904261220",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22559"
    }
  ]
}