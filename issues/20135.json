{
  "type": "issue",
  "issue": {
    "id": 719599583,
    "node_id": "MDU6SXNzdWU3MTk1OTk1ODM=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20135",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20135/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20135/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20135/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/20135",
    "number": 20135,
    "state": "closed",
    "state_reason": "completed",
    "title": "UBSan warning when fuzzing abs64(...)",
    "body": "When extending the `test/fuzz/integer` fuzzer I noticed the following UBSan warning when fuzzing `abs64(...)`:\r\n\r\n```\r\nruntime error: negation of -9223372036854775808 cannot be represented in type 'int64_t' (aka 'long'); cast to an unsigned type to negate this value to itself\r\n```\r\n\r\nFuzzing harness:\r\n\r\n```diff\r\ndiff --git a/src/test/fuzz/integer.cpp b/src/test/fuzz/integer.cpp\r\nindex 35d6804d4..bc158e5a2 100644\r\n--- a/src/test/fuzz/integer.cpp\r\n+++ b/src/test/fuzz/integer.cpp\r\n@@ -40,6 +40,8 @@\r\n #include <set>\r\n #include <vector>\r\n\r\n void initialize()\r\n {\r\n     SelectParams(CBaseChainParams::REGTEST);\r\n@@ -82,6 +84,7 @@ void test_one_input(const std::vector<uint8_t>& buffer)\r\n     (void)ComputeMerkleRoot(v256);\r\n     (void)CountBits(u64);\r\n     (void)DecompressAmount(u64);\r\n+    (void)abs64(i64);\r\n     (void)FormatISO8601Date(i64);\r\n     (void)FormatISO8601DateTime(i64);\r\n     // FormatMoney(i) not defined when i == std::numeric_limits<int64_t>::min()\r\n```\r\n\r\nTypically `abs(I n)` type functions are not defined when `n == std::numeric_limits<I>::min()` so it could be argued that this is expected, but perhaps the function could be rewritten in a way which guarantees that it gives the same behaviour across systems (instead of UB).\r\n",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 0,
    "closed_at": "2020-10-13T12:00:59Z",
    "created_at": "2020-10-12T19:10:54Z",
    "updated_at": "2022-02-15T10:48:03Z"
  },
  "events": [
    {
      "event": "closed",
      "id": 3870899842,
      "node_id": "MDExOkNsb3NlZEV2ZW50Mzg3MDg5OTg0Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3870899842",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ad90dd9f313aa4a2f87675b4392b85c0b06a5a83",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ad90dd9f313aa4a2f87675b4392b85c0b06a5a83",
      "created_at": "2020-10-13T12:00:59Z"
    },
    {
      "event": "closed",
      "id": 3870899852,
      "node_id": "MDExOkNsb3NlZEV2ZW50Mzg3MDg5OTg1Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3870899852",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-13T12:00:59Z"
    },
    {
      "event": "referenced",
      "id": 5607808589,
      "node_id": "REFE_lADOABII584q5DffzwAAAAFOQF5N",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5607808589",
      "actor": {
        "login": "Fabcien",
        "id": 44533924,
        "node_id": "MDQ6VXNlcjQ0NTMzOTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/44533924?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fabcien",
        "html_url": "https://github.com/Fabcien",
        "followers_url": "https://api.github.com/users/Fabcien/followers",
        "following_url": "https://api.github.com/users/Fabcien/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fabcien/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fabcien/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fabcien/subscriptions",
        "organizations_url": "https://api.github.com/users/Fabcien/orgs",
        "repos_url": "https://api.github.com/users/Fabcien/repos",
        "events_url": "https://api.github.com/users/Fabcien/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fabcien/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f61fd4290412b012848a21c5bf25085eafe7b8de",
      "commit_url": "https://api.github.com/repos/Bitcoin-ABC/bitcoin-abc/commits/f61fd4290412b012848a21c5bf25085eafe7b8de",
      "created_at": "2021-11-12T07:03:38Z"
    },
    {
      "event": "locked",
      "id": 6073905146,
      "node_id": "LOE_lADOABII584q5DffzwAAAAFqCG_6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6073905146",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T10:48:03Z",
      "lock_reason": "resolved"
    },
    {
      "event": "referenced",
      "id": 9331739017,
      "node_id": "REFE_lADOABII584q5DffzwAAAAIsNwmJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9331739017",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5e63fcb79211a4f4d737d12b78893b5275a6f2eb",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/5e63fcb79211a4f4d737d12b78893b5275a6f2eb",
      "created_at": "2023-05-24T19:14:01Z"
    },
    {
      "event": "referenced",
      "id": 9370189705,
      "node_id": "REFE_lADOABII584q5DffzwAAAAIugb-J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9370189705",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b1d0a35d78dbb3e186ba2c9d0cc5d1100e84baa7",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/b1d0a35d78dbb3e186ba2c9d0cc5d1100e84baa7",
      "created_at": "2023-05-29T15:26:35Z"
    },
    {
      "event": "referenced",
      "id": 9370618612,
      "node_id": "REFE_lADOABII584q5DffzwAAAAIuiEr0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9370618612",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ee3953adb95fffc1e04a7a6072326f784bcaa13a",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/ee3953adb95fffc1e04a7a6072326f784bcaa13a",
      "created_at": "2023-05-29T16:39:53Z"
    },
    {
      "event": "referenced",
      "id": 9392414042,
      "node_id": "REFE_lADOABII584q5DffzwAAAAIv1N1a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9392414042",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "1fdf76bfb6779d781ad95d23598748ba2d43bd0f",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/1fdf76bfb6779d781ad95d23598748ba2d43bd0f",
      "created_at": "2023-05-31T15:52:08Z"
    }
  ]
}