{
  "type": "issue",
  "issue": {
    "id": 851805884,
    "node_id": "MDU6SXNzdWU4NTE4MDU4ODQ=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/21627",
    "number": 21627,
    "state": "open",
    "state_reason": null,
    "title": "Potential data race on fHavePruned flag",
    "body": "<!-- This issue tracker is only for technical issues related to Bitcoin Core.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the Bitcoin StackExchange at https://bitcoin.stackexchange.com.\r\n\r\nFor reporting security issues, please read instructions at https://bitcoincore.org/en/contact/.\r\n\r\nIf the node is \"stuck\" during sync or giving \"block checksum mismatch\" errors, please ensure your hardware is stable by running memtest and observe CPU temperature with a load-test tool such as linpack before creating an issue! -->\r\n\r\n<!-- Describe the issue -->\r\n\r\nWe detected a potential race on the global variable [`fHavePruned`][fHavePruned] with a static data race detection tool.\r\n\r\nBecause the report is from a static analysis tool,  we do not have a concrete execution or trace, but we have reviewed the report and are reasonably confident this variable can be accessed in parallel and is not guarded by any common locks.\r\n\r\nWe are not able to confirm 100% that this race is real, or what impacts it may have on the program, but we decided to report it just to be safe.  \r\n\r\n#### Writing Thread\r\nThe flag can be set to true by the thread spawned at [`init.cpp:1883`](https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/init.cpp#L1883)\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/init.cpp#L1883-L1885\r\n\r\nThis thread can call [`ThreadImport`][ThreadImport] -> [`LoadExternalBlockFile`][LoadExternalBlockFile] -> [`AcceptBlock`][AcceptBlock] -> [`FlushStateToDisk`][FlushStateToDisk]\r\n\r\nAnd the `FlushStateToDisk` function can write to the `fHavePruned` flag.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/validation.cpp#L2311\r\n\r\n\r\n[fHavePruned]: https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/validation.cpp#L139\r\n[ThreadImport]: https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/init.cpp#L1884\r\n[LoadExternalBlockFile]: https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/init.cpp#L715\r\n[AcceptBlock]: https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/validation.cpp#L4717\r\n[FlushStateToDisk]: https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/validation.cpp#L3807\r\n\r\n#### Reading Thread\r\n\r\nThe [`fHavePruned`][fHavePruned] flag can be read as part of the REST HTTP handler [`rest_block_extended`](https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/rest.cpp#L300) which registered at [`rest.cpp:690`](\r\nhttps://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/rest.cpp#L672-L693).\r\n\r\nFrom there the handler can call [`rest_block`][rest_block] -> [`blockToJSON`][blockToJSON] -> [`IsBlockPruned`][isBlockPruned]\r\n\r\nAnd `IsBlockPruned` will read `fHavePruned`\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/validation.h#L1026\r\n\r\n[isBlockPruned]: https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/rpc/blockchain.cpp#L167\r\n[blockToJSON]: https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/rest.cpp#L285\r\n[rest_block]: https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/rest.cpp#L300\r\n\r\n**Expected behavior**\r\n\r\nNo threads reading and writing to the same variable without synchronization.\r\n\r\n**Actual behavior**\r\n\r\nIt appears possible for threads to read and write [`fHavePruned`][fHavePruned] in parallel.\r\n\r\n**To reproduce**\r\n\r\nMay be difficult to reproduce consistently as we found the potential race through static analysis and data races can be non-deterministic.\r\n\r\n**System information**\r\n\r\nWe analyzed commit 328aaac80 specifically, but the issue is still present at the time of posting this issue. \r\n\r\nFor reference, here is a screenshot of the report generated by our tool ([Coderrect Scanner](https://coderrect.com/overview/)). I have summarized all the info from this report above.\r\n![Coderrect Scanner Report](https://user-images.githubusercontent.com/25114061/113774750-4f7deb80-96ed-11eb-98e1-b7553a82f001.png)\r\n\r\n",
    "user": {
      "login": "BradSwain",
      "id": 25114061,
      "node_id": "MDQ6VXNlcjI1MTE0MDYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BradSwain",
      "html_url": "https://github.com/BradSwain",
      "followers_url": "https://api.github.com/users/BradSwain/followers",
      "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
      "organizations_url": "https://api.github.com/users/BradSwain/orgs",
      "repos_url": "https://api.github.com/users/BradSwain/repos",
      "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/BradSwain/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 219890555,
        "node_id": "MDU6TGFiZWwyMTk4OTA1NTU=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Block%20storage",
        "name": "Block storage",
        "color": "000000",
        "default": false
      }
    ],
    "assignee": {
      "login": "pinheadmz",
      "id": 2084648,
      "node_id": "MDQ6VXNlcjIwODQ2NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinheadmz",
      "html_url": "https://github.com/pinheadmz",
      "followers_url": "https://api.github.com/users/pinheadmz/followers",
      "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
      "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
      "repos_url": "https://api.github.com/users/pinheadmz/repos",
      "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "author_association": "NONE",
    "locked": false,
    "comments": 9,
    "created_at": "2021-04-06T20:58:58Z",
    "updated_at": "2023-06-02T14:59:25Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 4559045192,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ1NTkwNDUxOTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4559045192",
      "actor": {
        "login": "BradSwain",
        "id": 25114061,
        "node_id": "MDQ6VXNlcjI1MTE0MDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BradSwain",
        "html_url": "https://github.com/BradSwain",
        "followers_url": "https://api.github.com/users/BradSwain/followers",
        "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
        "organizations_url": "https://api.github.com/users/BradSwain/orgs",
        "repos_url": "https://api.github.com/users/BradSwain/repos",
        "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BradSwain/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-06T20:58:58Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "labeled",
      "id": 4559052338,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ1NTkwNTIzMzg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4559052338",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-06T21:00:52Z",
      "label": {
        "name": "Block storage",
        "color": "000000"
      }
    },
    {
      "event": "commented",
      "id": 816433376,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjQzMzM3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/816433376",
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-09T06:05:26Z",
      "updated_at": "2021-04-09T06:05:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "@BradSwain Thanks a lot for reporting!\r\n\r\nI love when our code base is analysed using new static analysis tools: the more the merrier! Did you find any other data race issues? Can you share your results in a gist or similar?\r\n\r\nUnfortunately we're doing CI testing with quite a few ThreadSanitizer suppressions in https://github.com/bitcoin/bitcoin/blob/master/test/sanitizer_suppressions/tsan. Were you able to replicate any of those finds?\r\n\r\nI think we should try to more clearly categorise our suppressions as \"benign\" vs. impactful: currently it is a mix of both which makes it hard to reason about the potential worst-case impact of each case. \r\n\r\nLast week a technical report on related work in the Firefox project was published: [\"Eliminating Data Races in Firefox – A Technical Report\"](https://hacks.mozilla.org/2021/04/eliminating-data-races-in-firefox-a-technical-report/). I think this makes sense:\r\n\r\n> While benign data races do exist, we found (in agreement with previous work on this subject [1] [2]) that data races are very easily misclassified as benign. The reasons for this are clear: It is hard to reason about what compilers can and will optimize, and confirmation for certain “benign” data races requires you to look at the assembler code that the compiler finally produces.\r\n> \r\n> Needless to say, this procedure is often much more time consuming than fixing the actual data race and also not future-proof. As a result, we decided that the ultimate goal should be a “no data races” policy that declares even benign data races as undesirable due to their risk of misclassification, the required time for investigation and the potential risk from future compilers (with better optimizations) or future platforms (e.g. ARM).\r\n\r\n",
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21627#issuecomment-816433376",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627"
    },
    {
      "event": "mentioned",
      "id": 4572532846,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDU3MjUzMjg0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4572532846",
      "actor": {
        "login": "BradSwain",
        "id": 25114061,
        "node_id": "MDQ6VXNlcjI1MTE0MDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BradSwain",
        "html_url": "https://github.com/BradSwain",
        "followers_url": "https://api.github.com/users/BradSwain/followers",
        "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
        "organizations_url": "https://api.github.com/users/BradSwain/orgs",
        "repos_url": "https://api.github.com/users/BradSwain/repos",
        "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BradSwain/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-09T06:05:26Z"
    },
    {
      "event": "subscribed",
      "id": 4572532848,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1NzI1MzI4NDg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4572532848",
      "actor": {
        "login": "BradSwain",
        "id": 25114061,
        "node_id": "MDQ6VXNlcjI1MTE0MDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BradSwain",
        "html_url": "https://github.com/BradSwain",
        "followers_url": "https://api.github.com/users/BradSwain/followers",
        "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
        "organizations_url": "https://api.github.com/users/BradSwain/orgs",
        "repos_url": "https://api.github.com/users/BradSwain/repos",
        "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BradSwain/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-09T06:05:26Z"
    },
    {
      "event": "commented",
      "id": 816839793,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjgzOTc5Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/816839793",
      "actor": {
        "login": "BradSwain",
        "id": 25114061,
        "node_id": "MDQ6VXNlcjI1MTE0MDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BradSwain",
        "html_url": "https://github.com/BradSwain",
        "followers_url": "https://api.github.com/users/BradSwain/followers",
        "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
        "organizations_url": "https://api.github.com/users/BradSwain/orgs",
        "repos_url": "https://api.github.com/users/BradSwain/repos",
        "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BradSwain/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-09T17:30:56Z",
      "updated_at": "2021-04-09T17:30:56Z",
      "author_association": "NONE",
      "body": "> Did you find any other data race issues?\r\n> Were you able to replicate any of those finds?\r\n\r\nWe are still going through some of the reports. We will see if our tool can also find those races from the TSan suppression list.  \r\nI will post anything else we find as a comment on this issue.\r\n\r\n> Last week a technical report on related work in the Firefox project was published\r\n\r\nI really like this report and I fully agree.",
      "user": {
        "login": "BradSwain",
        "id": 25114061,
        "node_id": "MDQ6VXNlcjI1MTE0MDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BradSwain",
        "html_url": "https://github.com/BradSwain",
        "followers_url": "https://api.github.com/users/BradSwain/followers",
        "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
        "organizations_url": "https://api.github.com/users/BradSwain/orgs",
        "repos_url": "https://api.github.com/users/BradSwain/repos",
        "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BradSwain/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21627#issuecomment-816839793",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627"
    },
    {
      "event": "commented",
      "id": 858045641,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg1ODA0NTY0MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/858045641",
      "actor": {
        "login": "amadeuszpawlik",
        "id": 35263201,
        "node_id": "MDQ6VXNlcjM1MjYzMjAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/35263201?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amadeuszpawlik",
        "html_url": "https://github.com/amadeuszpawlik",
        "followers_url": "https://api.github.com/users/amadeuszpawlik/followers",
        "following_url": "https://api.github.com/users/amadeuszpawlik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amadeuszpawlik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amadeuszpawlik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amadeuszpawlik/subscriptions",
        "organizations_url": "https://api.github.com/users/amadeuszpawlik/orgs",
        "repos_url": "https://api.github.com/users/amadeuszpawlik/repos",
        "events_url": "https://api.github.com/users/amadeuszpawlik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amadeuszpawlik/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-09T19:48:04Z",
      "updated_at": "2021-06-09T19:48:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "Don't [LoadExternalBlockFile](https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/validation.cpp#L4700)  and [rest_block](https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/rest.cpp#L251) both hold the `cs_main` though? ",
      "user": {
        "login": "amadeuszpawlik",
        "id": 35263201,
        "node_id": "MDQ6VXNlcjM1MjYzMjAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/35263201?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amadeuszpawlik",
        "html_url": "https://github.com/amadeuszpawlik",
        "followers_url": "https://api.github.com/users/amadeuszpawlik/followers",
        "following_url": "https://api.github.com/users/amadeuszpawlik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amadeuszpawlik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amadeuszpawlik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amadeuszpawlik/subscriptions",
        "organizations_url": "https://api.github.com/users/amadeuszpawlik/orgs",
        "repos_url": "https://api.github.com/users/amadeuszpawlik/repos",
        "events_url": "https://api.github.com/users/amadeuszpawlik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amadeuszpawlik/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21627#issuecomment-858045641",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627"
    },
    {
      "event": "commented",
      "id": 858075418,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg1ODA3NTQxOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/858075418",
      "actor": {
        "login": "BradSwain",
        "id": 25114061,
        "node_id": "MDQ6VXNlcjI1MTE0MDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BradSwain",
        "html_url": "https://github.com/BradSwain",
        "followers_url": "https://api.github.com/users/BradSwain/followers",
        "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
        "organizations_url": "https://api.github.com/users/BradSwain/orgs",
        "repos_url": "https://api.github.com/users/BradSwain/repos",
        "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BradSwain/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-09T20:22:45Z",
      "updated_at": "2021-06-09T20:22:45Z",
      "author_association": "NONE",
      "body": "Thanks for taking a look @amadeuszpawlik \r\n\r\nMy understanding may be wrong, but is the lock released at the end of this block (line 263)?\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/rest.cpp#L250-L263\r\n",
      "user": {
        "login": "BradSwain",
        "id": 25114061,
        "node_id": "MDQ6VXNlcjI1MTE0MDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BradSwain",
        "html_url": "https://github.com/BradSwain",
        "followers_url": "https://api.github.com/users/BradSwain/followers",
        "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
        "organizations_url": "https://api.github.com/users/BradSwain/orgs",
        "repos_url": "https://api.github.com/users/BradSwain/repos",
        "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BradSwain/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21627#issuecomment-858075418",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627"
    },
    {
      "event": "mentioned",
      "id": 4867524605,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDg2NzUyNDYwNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4867524605",
      "actor": {
        "login": "amadeuszpawlik",
        "id": 35263201,
        "node_id": "MDQ6VXNlcjM1MjYzMjAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/35263201?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amadeuszpawlik",
        "html_url": "https://github.com/amadeuszpawlik",
        "followers_url": "https://api.github.com/users/amadeuszpawlik/followers",
        "following_url": "https://api.github.com/users/amadeuszpawlik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amadeuszpawlik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amadeuszpawlik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amadeuszpawlik/subscriptions",
        "organizations_url": "https://api.github.com/users/amadeuszpawlik/orgs",
        "repos_url": "https://api.github.com/users/amadeuszpawlik/repos",
        "events_url": "https://api.github.com/users/amadeuszpawlik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amadeuszpawlik/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-09T20:22:46Z"
    },
    {
      "event": "subscribed",
      "id": 4867524610,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ4Njc1MjQ2MTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4867524610",
      "actor": {
        "login": "amadeuszpawlik",
        "id": 35263201,
        "node_id": "MDQ6VXNlcjM1MjYzMjAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/35263201?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amadeuszpawlik",
        "html_url": "https://github.com/amadeuszpawlik",
        "followers_url": "https://api.github.com/users/amadeuszpawlik/followers",
        "following_url": "https://api.github.com/users/amadeuszpawlik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amadeuszpawlik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amadeuszpawlik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amadeuszpawlik/subscriptions",
        "organizations_url": "https://api.github.com/users/amadeuszpawlik/orgs",
        "repos_url": "https://api.github.com/users/amadeuszpawlik/repos",
        "events_url": "https://api.github.com/users/amadeuszpawlik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amadeuszpawlik/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-09T20:22:46Z"
    },
    {
      "event": "commented",
      "id": 858101968,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg1ODEwMTk2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/858101968",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-09T21:07:37Z",
      "updated_at": "2021-06-09T21:07:37Z",
      "author_association": "MEMBER",
      "body": "@BradSwain Yes it is. `LOCK(cs_main);` locks for the duration of the scope it occurs in (like `std::unique_lock` etc).",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21627#issuecomment-858101968",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627"
    },
    {
      "event": "mentioned",
      "id": 4867720645,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDg2NzcyMDY0NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4867720645",
      "actor": {
        "login": "BradSwain",
        "id": 25114061,
        "node_id": "MDQ6VXNlcjI1MTE0MDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BradSwain",
        "html_url": "https://github.com/BradSwain",
        "followers_url": "https://api.github.com/users/BradSwain/followers",
        "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
        "organizations_url": "https://api.github.com/users/BradSwain/orgs",
        "repos_url": "https://api.github.com/users/BradSwain/repos",
        "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BradSwain/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-09T21:07:37Z"
    },
    {
      "event": "subscribed",
      "id": 4867720647,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ4Njc3MjA2NDc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4867720647",
      "actor": {
        "login": "BradSwain",
        "id": 25114061,
        "node_id": "MDQ6VXNlcjI1MTE0MDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BradSwain",
        "html_url": "https://github.com/BradSwain",
        "followers_url": "https://api.github.com/users/BradSwain/followers",
        "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
        "organizations_url": "https://api.github.com/users/BradSwain/orgs",
        "repos_url": "https://api.github.com/users/BradSwain/repos",
        "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BradSwain/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-09T21:07:38Z"
    },
    {
      "event": "commented",
      "id": 858442467,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg1ODQ0MjQ2Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/858442467",
      "actor": {
        "login": "amadeuszpawlik",
        "id": 35263201,
        "node_id": "MDQ6VXNlcjM1MjYzMjAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/35263201?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amadeuszpawlik",
        "html_url": "https://github.com/amadeuszpawlik",
        "followers_url": "https://api.github.com/users/amadeuszpawlik/followers",
        "following_url": "https://api.github.com/users/amadeuszpawlik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amadeuszpawlik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amadeuszpawlik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amadeuszpawlik/subscriptions",
        "organizations_url": "https://api.github.com/users/amadeuszpawlik/orgs",
        "repos_url": "https://api.github.com/users/amadeuszpawlik/repos",
        "events_url": "https://api.github.com/users/amadeuszpawlik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amadeuszpawlik/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-10T08:54:52Z",
      "updated_at": "2021-06-10T08:54:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "@BradSwain now I see, I was staring at\r\n[`rest_block -> IsBlockPruned`](https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/rest.cpp#L258)\r\nbut it obviously doesn't hold for\r\n[`rest_block -> blockToJSON -> IsBlockPruned`](https://github.com/bitcoin/bitcoin/blob/9be7fe4849310884294669b019dd8300f69bc334/src/rest.cpp#L285)\r\nThanks!",
      "user": {
        "login": "amadeuszpawlik",
        "id": 35263201,
        "node_id": "MDQ6VXNlcjM1MjYzMjAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/35263201?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amadeuszpawlik",
        "html_url": "https://github.com/amadeuszpawlik",
        "followers_url": "https://api.github.com/users/amadeuszpawlik/followers",
        "following_url": "https://api.github.com/users/amadeuszpawlik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amadeuszpawlik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amadeuszpawlik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amadeuszpawlik/subscriptions",
        "organizations_url": "https://api.github.com/users/amadeuszpawlik/orgs",
        "repos_url": "https://api.github.com/users/amadeuszpawlik/repos",
        "events_url": "https://api.github.com/users/amadeuszpawlik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amadeuszpawlik/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21627#issuecomment-858442467",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627"
    },
    {
      "event": "mentioned",
      "id": 4869976384,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDg2OTk3NjM4NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4869976384",
      "actor": {
        "login": "BradSwain",
        "id": 25114061,
        "node_id": "MDQ6VXNlcjI1MTE0MDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BradSwain",
        "html_url": "https://github.com/BradSwain",
        "followers_url": "https://api.github.com/users/BradSwain/followers",
        "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
        "organizations_url": "https://api.github.com/users/BradSwain/orgs",
        "repos_url": "https://api.github.com/users/BradSwain/repos",
        "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BradSwain/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-10T08:54:52Z"
    },
    {
      "event": "subscribed",
      "id": 4869976389,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ4Njk5NzYzODk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4869976389",
      "actor": {
        "login": "BradSwain",
        "id": 25114061,
        "node_id": "MDQ6VXNlcjI1MTE0MDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25114061?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BradSwain",
        "html_url": "https://github.com/BradSwain",
        "followers_url": "https://api.github.com/users/BradSwain/followers",
        "following_url": "https://api.github.com/users/BradSwain/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BradSwain/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BradSwain/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BradSwain/subscriptions",
        "organizations_url": "https://api.github.com/users/BradSwain/orgs",
        "repos_url": "https://api.github.com/users/BradSwain/repos",
        "events_url": "https://api.github.com/users/BradSwain/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BradSwain/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-10T08:54:52Z"
    },
    {
      "event": "commented",
      "id": 858652549,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg1ODY1MjU0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/858652549",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-10T14:05:45Z",
      "updated_at": "2021-06-10T14:05:45Z",
      "author_association": "MEMBER",
      "body": "See also #17161 ",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21627#issuecomment-858652549",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627"
    },
    {
      "event": "commented",
      "id": 1458495557,
      "node_id": "IC_kwDOABII585W7uBF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1458495557",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T16:46:45Z",
      "updated_at": "2023-03-07T16:46:45Z",
      "author_association": "MEMBER",
      "body": "I think this issue can be closed, `fHavePruned` seems to have been replaced with `chainman().m_blockman.m_have_pruned` (etc) and looks to me like all the setters (e.g. `FlushStateToDisk()`) have appropriate locks",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21627#issuecomment-1458495557",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627"
    },
    {
      "event": "commented",
      "id": 1458503844,
      "node_id": "IC_kwDOABII585W7wCk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1458503844",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T16:52:03Z",
      "updated_at": "2023-03-07T16:52:03Z",
      "author_association": "MEMBER",
      "body": "The variable was only renamed, so the issue may still exist. ",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21627#issuecomment-1458503844",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21627"
    },
    {
      "event": "assigned",
      "id": 9415313080,
      "node_id": "AE_lADOABII584yxYa8zwAAAAIxMka4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9415313080",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-02T14:59:25Z",
      "assignee": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      }
    }
  ]
}