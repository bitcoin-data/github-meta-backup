{
  "type": "issue",
  "issue": {
    "id": 836139901,
    "node_id": "MDU6SXNzdWU4MzYxMzk5MDE=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21479",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21479/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21479/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21479/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/21479",
    "number": 21479,
    "state": "closed",
    "state_reason": "completed",
    "title": "fuzz: UndefinedBehaviorSanitizer warnings in netbase.cpp",
    "body": "https://cirrus-ci.com/task/6113700391157760:\r\n\r\n```\r\nRun netbase_dns_lookup with args ['/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz', '-runs=1', '/tmp/cirrus-ci-build/ci/scratch/qa-assets/fuzz_seed_corpus/netbase_dns_lookup']INFO: Seed: 2191391191\r\nINFO: Loaded 1 modules   (515777 inline 8-bit counters): 515777 [0x55f8604c4498, 0x55f860542359), \r\nINFO: Loaded 1 PC tables (515777 PCs): 515777 [0x55f860542360,0x55f860d20f70), \r\nINFO:      510 files found in /tmp/cirrus-ci-build/ci/scratch/qa-assets/fuzz_seed_corpus/netbase_dns_lookup\r\nINFO: -max_len is not provided; libFuzzer will not generate inputs larger than 4096 bytes\r\nINFO: seed corpus: files: 510 min: 1b max: 4042b total: 273870b rss: 117Mb\r\nnetbase.cpp:212:37: runtime error: implicit conversion from type 'int' of value -2147483632 (32-bit, signed) to type 'uint16_t' (aka 'unsigned short') changed the value to 16 (16-bit, unsigned)\r\n    #0 0x55f85dbd91cc  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x338e1cc)\r\n    #1 0x55f85cfd0f5f  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x2785f5f)\r\n    #2 0x55f85ccebeb7  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x24a0eb7)\r\n    #3 0x55f85e498067  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x3c4d067)\r\n    #4 0x55f85e497d15  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x3c4cd15)\r\n    #5 0x55f85cbf1851  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23a6851)\r\n    #6 0x55f85cbf0f95  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23a5f95)\r\n    #7 0x55f85cbf38b7  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23a88b7)\r\n    #8 0x55f85cbf3c19  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23a8c19)\r\n    #9 0x55f85cbe28ee  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23978ee)\r\n    #10 0x55f85cc0b732  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23c0732)\r\n    #11 0x7f05b2c830b2  (/lib/x86_64-linux-gnu/libc.so.6+0x270b2)\r\n    #12 0x55f85cbb768d  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x236c68d)\r\nSUMMARY: UndefinedBehaviorSanitizer: implicit-signed-integer-truncation netbase.cpp:212:37 in \r\nMS: 0 ; base unit: 0000000000000000000000000000000000000000\r\n0xa,0x5c,0x0,0x1,0x0,0x0,0x10,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,\r\n\\x0a\\\\\\x00\\x01\\x00\\x00\\x10\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\r\nartifact_prefix='./'; Test unit written to ./crash-f5bef9785939348fdc554918c368ce0977d8fd7a\r\nBase64: ClwAAQAAEAAAAAAAAAAA\r\n```\r\n\r\n```\r\nINFO: Seed: 2191391191\r\nINFO: Loaded 1 modules   (515777 inline 8-bit counters): 515777 [0x55f8604c4498, 0x55f860542359), \r\nINFO: Loaded 1 PC tables (515777 PCs): 515777 [0x55f860542360,0x55f860d20f70), \r\nINFO:      510 files found in /tmp/cirrus-ci-build/ci/scratch/qa-assets/fuzz_seed_corpus/netbase_dns_lookup\r\nINFO: -max_len is not provided; libFuzzer will not generate inputs larger than 4096 bytes\r\nINFO: seed corpus: files: 510 min: 1b max: 4042b total: 273870b rss: 117Mb\r\nnetbase.cpp:212:37: runtime error: implicit conversion from type 'int' of value -2147483632 (32-bit, signed) to type 'uint16_t' (aka 'unsigned short') changed the value to 16 (16-bit, unsigned)\r\n    #0 0x55f85dbd91cc  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x338e1cc)\r\n    #1 0x55f85cfd0f5f  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x2785f5f)\r\n    #2 0x55f85ccebeb7  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x24a0eb7)\r\n    #3 0x55f85e498067  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x3c4d067)\r\n    #4 0x55f85e497d15  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x3c4cd15)\r\n    #5 0x55f85cbf1851  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23a6851)\r\n    #6 0x55f85cbf0f95  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23a5f95)\r\n    #7 0x55f85cbf38b7  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23a88b7)\r\n    #8 0x55f85cbf3c19  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23a8c19)\r\n    #9 0x55f85cbe28ee  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23978ee)\r\n    #10 0x55f85cc0b732  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x23c0732)\r\n    #11 0x7f05b2c830b2  (/lib/x86_64-linux-gnu/libc.so.6+0x270b2)\r\n    #12 0x55f85cbb768d  (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x236c68d)\r\nSUMMARY: UndefinedBehaviorSanitizer: implicit-signed-integer-truncation netbase.cpp:212:37 in \r\nMS: 0 ; base unit: 0000000000000000000000000000000000000000\r\n0xa,0x5c,0x0,0x1,0x0,0x0,0x10,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,\r\n\\x0a\\\\\\x00\\x01\\x00\\x00\\x10\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\r\nartifact_prefix='./'; Test unit written to ./crash-f5bef9785939348fdc554918c368ce0977d8fd7a\r\nBase64: ClwAAQAAEAAAAAAAAAAA\r\n```",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 2,
    "closed_at": "2021-03-19T20:00:40Z",
    "created_at": "2021-03-19T15:49:07Z",
    "updated_at": "2022-08-18T18:34:51Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 803085285,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwMzA4NTI4NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/803085285",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-19T20:00:30Z",
      "updated_at": "2021-03-19T20:00:30Z",
      "author_association": "MEMBER",
      "body": "I hope it is fixed in #21328.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21479#issuecomment-803085285",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21479"
    },
    {
      "event": "closed",
      "id": 4484054337,
      "node_id": "MDExOkNsb3NlZEV2ZW50NDQ4NDA1NDMzNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4484054337",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-19T20:00:41Z"
    },
    {
      "event": "commented",
      "id": 803091944,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwMzA5MTk0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/803091944",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-19T20:10:07Z",
      "updated_at": "2021-03-19T20:10:07Z",
      "author_association": "MEMBER",
      "body": "Yes :+1: hopefully https://github.com/bitcoin/bitcoin/pull/21328#issuecomment-800523781 should get it. I hit this issue in the fuzz CI there.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21479#issuecomment-803091944",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21479"
    },
    {
      "event": "locked",
      "id": 7216602008,
      "node_id": "LOE_lADOABII584x1nt9zwAAAAGuJJuY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7216602008",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-18T18:34:51Z",
      "lock_reason": "resolved"
    }
  ]
}