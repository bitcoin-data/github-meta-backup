{
  "type": "issue",
  "issue": {
    "id": 51554330,
    "node_id": "MDU6SXNzdWU1MTU1NDMzMA==",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5456",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5456/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5456/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5456/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/5456",
    "number": 5456,
    "state": "closed",
    "state_reason": "completed",
    "title": "Release 0.9.3 + 0.9.3~ Gitian build on Win 8.1 x64 fails scriptnum_tests",
    "body": "I noticed the release 0.9.3 as well as Gitian builds, build with a Debian 7.6.0 VM via the \"old\" route, appear to have some issues with OpenSSL, CBigNum or CScriptNum in combination with Win x64.\n\nTo be more specific:\nOn Windows 8.1 x64 there are 798 scriptnum_tests failures when using the 64 bit build of the official release 0.9.3 and 0 failures when using the 32 bit build release:\n- http://bitwatch.co/uploads/win64_release_0_9_3.txt\n\nThen I used a v0.9.3~ non release as basis, added some code for debug output, and build on a Debian 7.6.0 VM via Gitian, following a similar route as outlined in the [doc/release-process.md](https://github.com/bitcoin/bitcoin/blob/3ae41a64dd79aa20bbb53a53ae8a2b654305b07e/doc/release-process.md) file, creating the following results:\n- http://bitwatch.co/uploads/win64_scriptnum_verbose_64.log (Gitian via Debian VM)\n- http://bitwatch.co/uploads/win64_scriptnum_verbose_32.log (Gitian via Debian VM)\n- http://bitwatch.co/uploads/ubuntu1404_scriptnum_verbose_64.log (Ubuntuu 14.04 x64)\n\nThe last log was not part of a Gitian build.\n\nClient information:\n\n```\nRelease 0.9.3, 32 bit:\nv0.9.3.0-g40d2041-beta, OpenSSL 1.0.1i 6 Aug 2014, build: Mon, 22 Sep 2014 16:42:15 +0200\n\nRelease 0.9.3, 64 bit:\nv0.9.3.0-g40d2041-beta, OpenSSL 1.0.1i 6 Aug 2014, build: Mon, 22 Sep 2014 16:42:15 +0200\n\nGitian/Debian verbose build, 32 bit:\nv0.9.3.0-ge449166-beta, OpenSSL 1.0.1i 6 Aug 2014, build: 9 Dec 2014 23:10:05 -0500\n\nGitian/Debian verbose build, 64 bit:\nv0.9.3.0-ge449166-beta, OpenSSL 1.0.1i 6 Aug 2014, build: 9 Dec 2014 23:10:05 -0500\n\nUbuntu 14.04 build:\nv0.9.3.0-5719766-dirty-beta, OpenSSL 1.0.1f 6 Jan 2014, build: 2014-12-10 10:58:05 +0100\n```\n\nA few samples to compare, whereby all failures are related to 64 bit builds, run on Win 8.1 x64:\n\n```\nbignum.ToHex():     100000078\nbignum.ToString():  4294967416\nbignum.getulong():  4294967416\nbignum.getuint():   120\nbignum.getint():    2147483647 <<\nscriptnum.getint(): 2147483647 <<\nbignum.getvch():    7800000001 << vch.size(): 5\nscriptnum.getvch(): 7800000001 << vch.size(): 5\n\nbignum.ToHex():     100000078\nbignum.ToString():  4294967416\nbignum.getulong():  120\nbignum.getuint():   120\nbignum.getint():    120 <<\nscriptnum.getint(): 2147483647 <<\nbignum.getvch():    7800000001 << vch.size(): 5\nscriptnum.getvch(): 7800000001 << vch.size(): 5\nscriptnum_tests.cpp(54): error in \"creation\": check verify(bignum, scriptnum) failed\n```\n\n```\nbignum.ToHex():     7fffffff\nbignum.ToString():  2147483647\nbignum.getulong():  2147483647\nbignum.getuint():   2147483647\nbignum.getint():    2147483647 <<\nscriptnum.getint(): 2147483647 <<\nbignum.getvch():    ffffff7f << vch.size(): 4\nscriptnum.getvch(): ffffff7f << vch.size(): 4\n\nbignum.ToHex():     78\nbignum.ToString():  120\nbignum.getulong():  120\nbignum.getuint():   120\nbignum.getint():    120 <<\nscriptnum.getint(): 2147483647 <<\nbignum.getvch():    ffffff7f << vch.size(): 4\nscriptnum.getvch(): ffffff7f << vch.size(): 4\nscriptnum_tests.cpp(55): error in \"creation\": check verify(bignum.getint(), ...\n```\n\n```\nbignum.ToHex():     7fffffff\nbignum.ToString():  2147483647\nbignum.getulong():  2147483647\nbignum.getuint():   2147483647\nbignum.getint():    2147483647 <<\nscriptnum.getint(): 2147483647 <<\nbignum.getvch():    ffffff7f << vch.size(): 4\nscriptnum.getvch(): ffffff7f << vch.size(): 4\n\nbignum.ToHex():     7fffffff\nbignum.ToString():  2147483647\nbignum.getulong():  2147483647\nbignum.getuint():   2147483647\nbignum.getint():    2147483647 <<\nscriptnum.getint(): 120 <<\nbignum.getvch():    78 << vch.size(): 1\nscriptnum.getvch(): 78 << vch.size(): 1\nscriptnum_tests.cpp(56): error in \"creation\": check verify(scriptnum.getint(), ...\n```\n\nThe arrows `<<` mark values that are used in the verification function ([scriptnum_tests.cpp#L18](https://github.com/bitcoin/bitcoin/blob/master/src/test/scriptnum_tests.cpp#L18)). Furthermore I prefixed all lines related to failures in verbose_64.log with `##`.\n\n`bignum.getvch()` and `scriptnum.getvch()` were embedded in `HexStr()` and the output was printed with `printf` and `%s`, `%lu`, `%u` and `%d` format specifiers.\n\nIt's not clear to me, if the results can be compared line by line, because they seem to differ in length sometimes, even without failure, but a look at [master/crypto/bn/bn.h](https://github.com/openssl/openssl/blob/master/crypto/bn/bn.h) already hints why this might be.\n\nMy very best and unsophisticated guess: OpenSSL and LLP64 are not the best friends.\n",
    "user": {
      "login": "dexX7",
      "id": 5836089,
      "node_id": "MDQ6VXNlcjU4MzYwODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5836089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dexX7",
      "html_url": "https://github.com/dexX7",
      "followers_url": "https://api.github.com/users/dexX7/followers",
      "following_url": "https://api.github.com/users/dexX7/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/dexX7/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/dexX7/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/dexX7/subscriptions",
      "organizations_url": "https://api.github.com/users/dexX7/orgs",
      "repos_url": "https://api.github.com/users/dexX7/repos",
      "events_url": "https://api.github.com/users/dexX7/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/dexX7/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 3,
    "closed_at": "2014-12-11T14:59:20Z",
    "created_at": "2014-12-10T12:47:46Z",
    "updated_at": "2021-09-08T12:21:29Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 206134543,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDIwNjEzNDU0Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/206134543",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-12-11T12:50:59Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "labeled",
      "id": 206134567,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDIwNjEzNDU2Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/206134567",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-12-11T12:51:03Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 66628694,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjI4Njk0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/66628694",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-12-11T14:48:43Z",
      "updated_at": "2014-12-11T14:48:43Z",
      "author_association": "MEMBER",
      "body": "Yes, this is a bug in the bignum tests that has been solved in master.\n",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/5456#issuecomment-66628694",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5456"
    },
    {
      "event": "commented",
      "id": 66629778,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjI5Nzc4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/66629778",
      "actor": {
        "login": "dexX7",
        "id": 5836089,
        "node_id": "MDQ6VXNlcjU4MzYwODk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5836089?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dexX7",
        "html_url": "https://github.com/dexX7",
        "followers_url": "https://api.github.com/users/dexX7/followers",
        "following_url": "https://api.github.com/users/dexX7/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dexX7/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dexX7/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dexX7/subscriptions",
        "organizations_url": "https://api.github.com/users/dexX7/orgs",
        "repos_url": "https://api.github.com/users/dexX7/repos",
        "events_url": "https://api.github.com/users/dexX7/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dexX7/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-12-11T14:55:53Z",
      "updated_at": "2014-12-11T14:55:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "Ah, I think I found it: https://github.com/bitcoin/bitcoin/commit/63c17613ab808208c8a760fc750e0429c8e53a39\n\nSeems to be resolved then.\n",
      "user": {
        "login": "dexX7",
        "id": 5836089,
        "node_id": "MDQ6VXNlcjU4MzYwODk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5836089?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dexX7",
        "html_url": "https://github.com/dexX7",
        "followers_url": "https://api.github.com/users/dexX7/followers",
        "following_url": "https://api.github.com/users/dexX7/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dexX7/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dexX7/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dexX7/subscriptions",
        "organizations_url": "https://api.github.com/users/dexX7/orgs",
        "repos_url": "https://api.github.com/users/dexX7/repos",
        "events_url": "https://api.github.com/users/dexX7/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dexX7/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/5456#issuecomment-66629778",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5456"
    },
    {
      "event": "commented",
      "id": 66630043,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjMwMDQz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/66630043",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-12-11T14:57:28Z",
      "updated_at": "2014-12-11T14:57:28Z",
      "author_association": "MEMBER",
      "body": "Indeed, that's the commit that fixed it.\n",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/5456#issuecomment-66630043",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5456"
    },
    {
      "event": "closed",
      "id": 206201893,
      "node_id": "MDExOkNsb3NlZEV2ZW50MjA2MjAxODkz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/206201893",
      "actor": {
        "login": "dexX7",
        "id": 5836089,
        "node_id": "MDQ6VXNlcjU4MzYwODk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5836089?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dexX7",
        "html_url": "https://github.com/dexX7",
        "followers_url": "https://api.github.com/users/dexX7/followers",
        "following_url": "https://api.github.com/users/dexX7/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dexX7/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dexX7/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dexX7/subscriptions",
        "organizations_url": "https://api.github.com/users/dexX7/orgs",
        "repos_url": "https://api.github.com/users/dexX7/repos",
        "events_url": "https://api.github.com/users/dexX7/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dexX7/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-12-11T14:59:20Z"
    },
    {
      "event": "locked",
      "id": 5271944039,
      "node_id": "LOE_lADOABII584DEqgazwAAAAE6O3tn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271944039",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:21:29Z",
      "lock_reason": "resolved"
    }
  ]
}