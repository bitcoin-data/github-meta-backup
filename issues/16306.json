{
  "type": "issue",
  "issue": {
    "id": 462265951,
    "node_id": "MDU6SXNzdWU0NjIyNjU5NTE=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16306",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16306/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16306/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16306/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/16306",
    "number": 16306,
    "state": "closed",
    "state_reason": "completed",
    "title": "gui: crash in Console after loading & unloading wallet",
    "body": "Using the Console, this crash occurs after loading a wallet (which starts rescanning), then unloading the same wallet. Using master (0f309541aa6dee91ac1cf6058c1ab5f51447b3c1).\r\n\r\n```bash\r\n./autogen.sh && ./configure --enable-debug && make check -j8 && make deploy\r\n```\r\n\r\n```bash\r\nlldb Bitcoin-Qt.app\r\n(lldb) target create \"Bitcoin-Qt.app\"\r\nCurrent executable set to 'Bitcoin-Qt.app' (x86_64).\r\n(lldb) run\r\nProcess 8595 launched: '/Users/michael/github/bitcoin/Bitcoin-Qt.app/Contents/MacOS/Bitcoin-Qt' (x86_64)\r\n2019-06-29 12:51:35.076094+0800 Bitcoin-Qt[8595:1670460] MessageTracer: Falling back to default whitelist\r\nProcess 8595 stopped\r\n* thread #1, name = 'bitcoin-main', queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)\r\n    frame #0: 0x0000000101f1f89d QtCore`QObject::connect(QObject const*, char const*, QObject const*, char const*, Qt::ConnectionType) + 125\r\nQtCore`QObject::connect:\r\n->  0x101f1f89d <+125>: movq   (%r14), %rax\r\n    0x101f1f8a0 <+128>: movq   %r14, %rdi\r\n    0x101f1f8a3 <+131>: callq  *(%rax)\r\n    0x101f1f8a5 <+133>: movq   %r12, -0x1a8(%rbp)\r\nTarget 0: (Bitcoin-Qt) stopped.\r\n```\r\n\r\n```bash\r\n2019-06-29T04:52:35Z UpdateTip: new best=00000000000001fae6c844a0973ca2b25abbfa5ceabd7ad1f29a30169f24771e height=176516 version=0x00000001 log2_work=68.020722 tx=2878576 date='2012-04-20T23:28:53Z' progress=0.006761 cache=46.4MiB(353740txo)\r\n2019-06-29T04:52:35Z Using BerkeleyDB version Berkeley DB 4.8.30: (April  9, 2010)\r\n2019-06-29T04:52:35Z Using wallet /Users/michael/Library/Application Support/Bitcoin/some wallet\r\n2019-06-29T04:52:35Z BerkeleyEnvironment::Open: LogDir=/Users/michael/Library/Application Support/Bitcoin/some wallet/database ErrorFile=/Users/michael/Library/Application Support/Bitcoin/some wallet/db.log\r\n2019-06-29T04:52:35Z UpdateTip: new best=00000000000002229dcf910627a2c8e64885390e7e3bded45bb38149f36ec108 height=176517 version=0x00000001 log2_work=68.020754 tx=2878644 date='2012-04-20T23:42:26Z' progress=0.006761 cache=46.4MiB(353704txo)\r\n2019-06-29T04:52:36Z UpdateTip: new best=0000000000000242d1e72b1b06aa731ed516ab1119223570850da9cc8b36f4ea height=176518 version=0x00000001 log2_work=68.020787 tx=2878704 date='2012-04-20T23:43:26Z' progress=0.006761 cache=46.4MiB(353824txo)\r\n2019-06-29T04:52:36Z UpdateTip: new best=0000000000000202e681cb9e07b4a5c63869153a865d30d02f283d098cdbf186 height=176519 version=0x00000001 log2_work=68.02082 tx=2878740 date='2012-04-20T23:48:38Z' progress=0.006761 cache=46.4MiB(353790txo)\r\n2019-06-29T04:52:36Z UpdateTip: new best=0000000000000391bc5a7df2aca4ee4eed786ea16a3f76e1ae7030cd82a6fd1b height=176520 version=0x00000001 log2_work=68.020852 tx=2878866 date='2012-04-20T23:56:11Z' progress=0.006761 cache=46.4MiB(353854txo)\r\n2019-06-29T04:52:36Z UpdateTip: new best=00000000000000d664f0b5ddd5617dcd8ec5010f7d5745aa2563a9beefd4036f height=176521 version=0x00000001 log2_work=68.020885 tx=2878940 date='2012-04-21T00:06:06Z' progress=0.006762 cache=46.4MiB(353939txo)\r\n2019-06-29T04:52:36Z UpdateTip: new best=00000000000009c4df44f6e721b7e775953da05713d70d4d470776453535abab height=176522 version=0x00000001 log2_work=68.020918 tx=2878970 date='2012-04-21T00:05:26Z' progress=0.006762 cache=46.4MiB(354025txo)\r\n2019-06-29T04:52:36Z UpdateTip: new best=000000000000002f01198e0fd214566715ad4c78d6ee6c7f325d35670a4c250a height=176523 version=0x00000001 log2_work=68.02095 tx=2878971 date='2012-04-21T00:09:46Z' progress=0.006762 cache=46.4MiB(354026txo)\r\n2019-06-29T04:52:36Z UpdateTip: new best=00000000000008b6cee08dc8ddbf3930d12c3d2796309fa21f22369c666a1e3d height=176524 version=0x00000001 log2_work=68.020983 tx=2879001 date='2012-04-21T00:13:03Z' progress=0.006762 cache=46.4MiB(354026txo)\r\n2019-06-29T04:52:36Z UpdateTip: new best=00000000000007f68e267217145d0582a12ae5bc17c35b9f1f768fc8161fe972 height=176525 version=0x00000001 log2_work=68.021016 tx=2879017 date='2012-04-21T00:15:51Z' progress=0.006762 cache=46.4MiB(354035txo)\r\n2019-06-29T04:52:36Z init message: Loading wallet...\r\n2019-06-29T04:52:36Z BerkeleyEnvironment::Open: LogDir=/Users/michael/Library/Application Support/Bitcoin/some wallet/database ErrorFile=/Users/michael/Library/Application Support/Bitcoin/some wallet/db.log\r\n2019-06-29T04:52:36Z UpdateTip: new best=00000000000007fb9d3d05eb42930e344c5bea9cc2eabbc12013607f316b2e2f height=176526 version=0x00000001 log2_work=68.021048 tx=2879089 date='2012-04-21T00:34:08Z' progress=0.006762 cache=46.4MiB(353993txo)\r\n2019-06-29T04:52:36Z UpdateTip: new best=000000000000055bb0ac3d1d33c48f8288f9725bcbed6555eebcafd5031f217a height=176527 version=0x00000001 log2_work=68.021081 tx=2879132 date='2012-04-21T00:38:43Z' progress=0.006762 cache=46.4MiB(353997txo)\r\n2019-06-29T04:52:36Z [some wallet] nFileVersion = 189900\r\n2019-06-29T04:52:36Z [some wallet] Keys: 0 plaintext, 2001 encrypted, 2001 w/ metadata, 2001 total. Unknown wallet records: 0\r\n2019-06-29T04:52:36Z [some wallet] Wallet completed loading in             128ms\r\n2019-06-29T04:52:36Z init message: Rescanning...\r\n2019-06-29T04:52:36Z [some wallet] Rescanning last 5406 blocks (from block 171121)...\r\n2019-06-29T04:52:36Z [some wallet] Rescan started from block 000000000000030de70be2d0a247608bd5ce681744076ccda1a3d24dab18bb65...\r\n2019-06-29T04:52:40Z [some wallet] Rescan completed in            4175ms\r\n2019-06-29T04:52:40Z [some wallet] setKeyPool.size() = 2000\r\n2019-06-29T04:52:40Z [some wallet] mapWallet.size() = 0\r\n2019-06-29T04:52:40Z [some wallet] mapAddressBook.size() = 0\r\n2019-06-29T04:52:40Z UpdateTip: new best=000000000000022f132ffe582f0156576fb4834ecf29abc08ff387ef2e56b31b height=176528 version=0x00000001 log2_work=68.021114 tx=2879222 date='2012-04-21T00:56:16Z' progress=0.006762 cache=46.4MiB(354000txo)\r\n2019-06-29T04:52:40Z [some wallet] Releasing wallet\r\n```",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 135946,
        "node_id": "MDU6TGFiZWwxMzU5NDY=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI",
        "name": "GUI",
        "color": "02d7e1",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 2,
    "closed_at": "2020-04-26T16:19:25Z",
    "created_at": "2019-06-29T05:01:13Z",
    "updated_at": "2022-02-15T10:43:28Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 2448763146,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDI0NDg3NjMxNDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2448763146",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-29T05:01:13Z",
      "label": {
        "name": "GUI",
        "color": "02d7e1"
      }
    },
    {
      "event": "commented",
      "id": 602481738,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYwMjQ4MTczOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/602481738",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-23T09:32:06Z",
      "updated_at": "2020-03-23T09:32:06Z",
      "author_association": "MEMBER",
      "body": "@fanquake this might be fixed by #18338.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/16306#issuecomment-602481738",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16306"
    },
    {
      "event": "mentioned",
      "id": 3154354944,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzE1NDM1NDk0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3154354944",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-23T09:32:06Z"
    },
    {
      "event": "subscribed",
      "id": 3154354946,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMxNTQzNTQ5NDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3154354946",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-23T09:32:06Z"
    },
    {
      "event": "commented",
      "id": 617978946,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYxNzk3ODk0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617978946",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-22T19:18:56Z",
      "updated_at": "2020-04-22T19:18:56Z",
      "author_association": "MEMBER",
      "body": "Is this fixed?",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/16306#issuecomment-617978946",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16306"
    },
    {
      "event": "closed",
      "id": 3273103155,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzI3MzEwMzE1NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3273103155",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-26T16:19:25Z"
    },
    {
      "event": "locked",
      "id": 6073873652,
      "node_id": "LOE_lADOABII584bjZ5fzwAAAAFqB_T0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6073873652",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T10:43:28Z",
      "lock_reason": "resolved"
    }
  ]
}