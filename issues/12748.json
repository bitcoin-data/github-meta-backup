{
  "type": "issue",
  "issue": {
    "id": 307357782,
    "node_id": "MDU6SXNzdWUzMDczNTc3ODI=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12748",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12748/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12748/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12748/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/12748",
    "number": 12748,
    "state": "closed",
    "state_reason": "completed",
    "title": "datadir path corruption while starting bitcoin-qt",
    "body": "Built commit 90a0aed51194ad82da8e011b96f9561c685e40b7. It has been working fine until now, when it failed to start up. I use an alias to run it:\r\n\r\n    alias btcd='~/Programs/bitcoin.git/src/qt/bitcoin-qt      -datadir=/home/chris/.bitcoin-prune'\r\n\r\nWhen I ran it, I saw this:\r\n\r\n    chris@chris:~$ btcd\r\n    ICE default IO error handler doing an exit(), pid = 17342, errno = 32\r\n    bitcoin-qt: /usr/include/boost/signals2/detail/lwm_pthreads.hpp:60: void boost::signals2::mutex::lock(): \r\n    Assertion `pthread_mutex_lock(&m_) == 0' failed.\r\n    Aborted\r\n    chris@chris:~$ \r\n\r\nThe debug.log file didn't have much in it, just the following:\r\n\r\n    2018-03-21 13:35:41 Bitcoin Core version v0.16.99.0-fbaac219d-dirty (release build)\r\n    2018-03-21 13:35:41 InitParameterInteraction: parameter interaction: -whitelistforcerelay=1 -> setting -whitelistrelay=1\r\n    2018-03-21 13:43:10 Assuming ancestors of block 0000000000000000005214481d2d96f898e3d5416e43359c145944a909d242e0 have valid signatures.\r\n    2018-03-21 13:43:10 Setting nMinimumChainWork=000000000000000000000000000000000000000000f91c579d57cad4bc5278cc\r\n    2018-03-21 13:43:10 Prune configured to target 600600MiB on disk for block and undo files.\r\n    2018-03-21 13:43:10 Using the 'sse4' SHA256 implementation\r\n    2018-03-21 13:43:10 Using RdRand as an additional entropy source\r\n    2018-03-21 13:43:10 Default data directory /home/chris/.bitcoin\r\n    2018-03-21 13:43:10 Using data directory `�Mj�Uris/.bitcoin-prune\r\n    2018-03-21 13:43:10 Using config file /home/chris/�8cj�Uris/.bitcoin-prune/bitcoin.conf\r\n    2018-03-21 13:43:10 Using at most 125 automatic connections (1024 file descriptors available)\r\n    2018-03-21 13:43:10 Warning: relative datadir option 'Psmj�Uris/.bitcoin-prune' specified, which will be interpreted relative to the current working directory '/home/chris'. This is fragile, because if bitcoin is started in the future from a different location, it will be unable to locate the current data files. There could also be data loss if bitcoin is started while in a temporary directory.\r\n    2018-03-21 13:43:10 Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements\r\n    2018-03-21 13:43:10 Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements\r\n    2018-03-21 13:43:10 Using 2 threads for script verification\r\n    2018-03-21 13:43:10 scheduler thread start\r\n    2018-03-21 13:43:10 Using wallet directory `�Mj�Uris/.bitcoin-prune\r\n\r\nNote the corrupted datadir paths. It contains some non-ASCII characters, so I'm not sure how best to preserve them. Here's a screenshot as rendered in GNU Emacs:\r\n\r\n![screenshot_2018-03-21_10-56-42](https://user-images.githubusercontent.com/573356/37728159-c821bf12-2cf6-11e8-96fb-488cd0be9e28.png)\r\n\r\nand here's the file itself:\r\n\r\n[debug.log](https://github.com/bitcoin/bitcoin/files/1834593/debug.log)\r\n\r\nI was running `wipe` to wipe an external hard drive at the same time, which is the only thing I can think of that was different than usual. The command I was running was `sudo wipe -q -Q 1 -kD /dev/sdb`. Nothing from /dev/sdb was mounted at the time, so it shouldn't have caused this, but I figured I should mention it.\r\n\r\nEdit: oh, another thing that was different than usual was that I locked the laptop screen immediately after hitting return to the `btcd` command. Usually I would wait and watch the UI appear.",
    "user": {
      "login": "dooglus",
      "id": 573356,
      "node_id": "MDQ6VXNlcjU3MzM1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/573356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dooglus",
      "html_url": "https://github.com/dooglus",
      "followers_url": "https://api.github.com/users/dooglus/followers",
      "following_url": "https://api.github.com/users/dooglus/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/dooglus/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/dooglus/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/dooglus/subscriptions",
      "organizations_url": "https://api.github.com/users/dooglus/orgs",
      "repos_url": "https://api.github.com/users/dooglus/repos",
      "events_url": "https://api.github.com/users/dooglus/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/dooglus/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 234878,
        "node_id": "MDU6TGFiZWwyMzQ4Nzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Linux/Unix",
        "name": "Linux/Unix",
        "color": "770000",
        "default": false
      },
      {
        "id": 323697996,
        "node_id": "MDU6TGFiZWwzMjM2OTc5OTY=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Data%20corruption",
        "name": "Data corruption",
        "color": "f7c6c7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 3,
    "closed_at": "2018-03-22T17:14:06Z",
    "created_at": "2018-03-21T18:01:56Z",
    "updated_at": "2021-09-08T12:44:13Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 375178487,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTE3ODQ4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375178487",
      "actor": {
        "login": "meshcollider",
        "id": 3211283,
        "node_id": "MDQ6VXNlcjMyMTEyODM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/meshcollider",
        "html_url": "https://github.com/meshcollider",
        "followers_url": "https://api.github.com/users/meshcollider/followers",
        "following_url": "https://api.github.com/users/meshcollider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/meshcollider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/meshcollider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
        "organizations_url": "https://api.github.com/users/meshcollider/orgs",
        "repos_url": "https://api.github.com/users/meshcollider/repos",
        "events_url": "https://api.github.com/users/meshcollider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/meshcollider/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-22T04:46:25Z",
      "updated_at": "2018-03-22T04:46:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "Was it a once-off or does it happen every time now? If it happens every time, does running it directly without the alias work ok? And is it only Qt, or does bitcoind also have the same issue?",
      "user": {
        "login": "meshcollider",
        "id": 3211283,
        "node_id": "MDQ6VXNlcjMyMTEyODM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/meshcollider",
        "html_url": "https://github.com/meshcollider",
        "followers_url": "https://api.github.com/users/meshcollider/followers",
        "following_url": "https://api.github.com/users/meshcollider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/meshcollider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/meshcollider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
        "organizations_url": "https://api.github.com/users/meshcollider/orgs",
        "repos_url": "https://api.github.com/users/meshcollider/repos",
        "events_url": "https://api.github.com/users/meshcollider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/meshcollider/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12748#issuecomment-375178487",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12748"
    },
    {
      "event": "commented",
      "id": 375180990,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTE4MDk5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375180990",
      "actor": {
        "login": "dooglus",
        "id": 573356,
        "node_id": "MDQ6VXNlcjU3MzM1Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/573356?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dooglus",
        "html_url": "https://github.com/dooglus",
        "followers_url": "https://api.github.com/users/dooglus/followers",
        "following_url": "https://api.github.com/users/dooglus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dooglus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dooglus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dooglus/subscriptions",
        "organizations_url": "https://api.github.com/users/dooglus/orgs",
        "repos_url": "https://api.github.com/users/dooglus/repos",
        "events_url": "https://api.github.com/users/dooglus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dooglus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-22T05:05:14Z",
      "updated_at": "2018-03-22T05:05:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "It was a one-off. I've never seen it before or since.\r\n\r\nIt has been suggested to me on another issue here that perhaps my computer has some hardware fault.",
      "user": {
        "login": "dooglus",
        "id": 573356,
        "node_id": "MDQ6VXNlcjU3MzM1Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/573356?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dooglus",
        "html_url": "https://github.com/dooglus",
        "followers_url": "https://api.github.com/users/dooglus/followers",
        "following_url": "https://api.github.com/users/dooglus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dooglus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dooglus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dooglus/subscriptions",
        "organizations_url": "https://api.github.com/users/dooglus/orgs",
        "repos_url": "https://api.github.com/users/dooglus/repos",
        "events_url": "https://api.github.com/users/dooglus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dooglus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12748#issuecomment-375180990",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12748"
    },
    {
      "event": "commented",
      "id": 375190479,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTE5MDQ3OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375190479",
      "actor": {
        "login": "meshcollider",
        "id": 3211283,
        "node_id": "MDQ6VXNlcjMyMTEyODM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/meshcollider",
        "html_url": "https://github.com/meshcollider",
        "followers_url": "https://api.github.com/users/meshcollider/followers",
        "following_url": "https://api.github.com/users/meshcollider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/meshcollider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/meshcollider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
        "organizations_url": "https://api.github.com/users/meshcollider/orgs",
        "repos_url": "https://api.github.com/users/meshcollider/repos",
        "events_url": "https://api.github.com/users/meshcollider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/meshcollider/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-22T06:07:56Z",
      "updated_at": "2018-03-22T06:07:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "Yeah its likely not a bug with bitcoin in that case, I think this can be safely closed :)",
      "user": {
        "login": "meshcollider",
        "id": 3211283,
        "node_id": "MDQ6VXNlcjMyMTEyODM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/meshcollider",
        "html_url": "https://github.com/meshcollider",
        "followers_url": "https://api.github.com/users/meshcollider/followers",
        "following_url": "https://api.github.com/users/meshcollider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/meshcollider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/meshcollider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
        "organizations_url": "https://api.github.com/users/meshcollider/orgs",
        "repos_url": "https://api.github.com/users/meshcollider/repos",
        "events_url": "https://api.github.com/users/meshcollider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/meshcollider/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12748#issuecomment-375190479",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12748"
    },
    {
      "event": "labeled",
      "id": 1534834276,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE1MzQ4MzQyNzY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1534834276",
      "actor": {
        "login": "meshcollider",
        "id": 3211283,
        "node_id": "MDQ6VXNlcjMyMTEyODM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/meshcollider",
        "html_url": "https://github.com/meshcollider",
        "followers_url": "https://api.github.com/users/meshcollider/followers",
        "following_url": "https://api.github.com/users/meshcollider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/meshcollider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/meshcollider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
        "organizations_url": "https://api.github.com/users/meshcollider/orgs",
        "repos_url": "https://api.github.com/users/meshcollider/repos",
        "events_url": "https://api.github.com/users/meshcollider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/meshcollider/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-22T06:09:13Z",
      "label": {
        "name": "Linux/Unix",
        "color": "770000"
      }
    },
    {
      "event": "closed",
      "id": 1536133033,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTUzNjEzMzAzMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1536133033",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-22T17:14:06Z"
    },
    {
      "event": "labeled",
      "id": 1536133248,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE1MzYxMzMyNDg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1536133248",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-22T17:14:13Z",
      "label": {
        "name": "Data corruption",
        "color": "f7c6c7"
      }
    },
    {
      "event": "locked",
      "id": 5272066288,
      "node_id": "LOE_lADOABII584SUehWzwAAAAE6PVjw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5272066288",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:44:13Z",
      "lock_reason": "resolved"
    }
  ]
}