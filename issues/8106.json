{
  "type": "issue",
  "issue": {
    "id": 157118210,
    "node_id": "MDU6SXNzdWUxNTcxMTgyMTA=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8106",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8106/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8106/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8106/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/8106",
    "number": 8106,
    "state": "open",
    "state_reason": null,
    "title": "Testnet/mainnet cross-reading of settings",
    "body": "In the settings, the Testnet seems to be reading from and setting some options for mainnet and not testnet. I have noticed this with at least the strDataDir option.\n\nReplication steps on Ubuntu 15.10\n1. Tail ~/.config/Bitcoin-Qt.conf and ~/.config/Bitcoin-Qt-testnet.conf\n2. Reset the testnet settings by going to Settings > Reset Options. Notice how the testnet conf file changes.\n3. Now start Bitcoin core with `-choosedatadir -testnet`.\n\nAfter the third step, you will see that the strDataDir setting is not added to the testnet conf but is added/changed in the normal conf file.\n",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 135946,
        "node_id": "MDU6TGFiZWwxMzU5NDY=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI",
        "name": "GUI",
        "color": "02d7e1",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 4,
    "created_at": "2016-05-27T02:35:26Z",
    "updated_at": "2021-03-04T00:44:26Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 222136902,
      "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjEzNjkwMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/222136902",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-05-27T12:44:42Z",
      "updated_at": "2016-05-27T12:44:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "The settings overwritten by the GUI (`QSettings`) are stored/managed by QT. The filename is handled by Qt. I guess chaining the app name (using testnet switched the application name somewhere in init) could lead to a mixed settings read/write behavior.\n",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/8106#issuecomment-222136902",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8106"
    },
    {
      "event": "commented",
      "id": 222146186,
      "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjE0NjE4Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/222146186",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-05-27T13:28:30Z",
      "updated_at": "2016-05-27T13:28:30Z",
      "author_association": "MEMBER",
      "body": "Are you starting with `-choosedatadir` or `-choosedatadir -testnet`?\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/8106#issuecomment-222146186",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8106"
    },
    {
      "event": "commented",
      "id": 222146685,
      "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjE0NjY4NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/222146685",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-05-27T13:30:45Z",
      "updated_at": "2016-05-27T13:30:45Z",
      "author_association": "MEMBER",
      "body": "`-choosedatadir -testnet`\n\nOn May 27, 2016 9:28:54 AM MarcoFalke notifications@github.com wrote:\n\n> Are you starting with `-choosedatadir` or `-choosedatadir -testnet`?\n> \n> ---\n> \n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub:\n> https://github.com/bitcoin/bitcoin/issues/8106#issuecomment-222146186\n",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/8106#issuecomment-222146685",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8106"
    },
    {
      "event": "commented",
      "id": 790193404,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5MDE5MzQwNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/790193404",
      "actor": {
        "login": "beirut-boop",
        "id": 78885860,
        "node_id": "MDQ6VXNlcjc4ODg1ODYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78885860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/beirut-boop",
        "html_url": "https://github.com/beirut-boop",
        "followers_url": "https://api.github.com/users/beirut-boop/followers",
        "following_url": "https://api.github.com/users/beirut-boop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/beirut-boop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/beirut-boop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/beirut-boop/subscriptions",
        "organizations_url": "https://api.github.com/users/beirut-boop/orgs",
        "repos_url": "https://api.github.com/users/beirut-boop/repos",
        "events_url": "https://api.github.com/users/beirut-boop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/beirut-boop/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-04T00:44:26Z",
      "updated_at": "2021-03-04T00:44:26Z",
      "author_association": "NONE",
      "body": "Perhaps it would work as intended if we would use the NetworkStyle app name when locating QSettings. E.g.:\r\n\r\n```diff\r\n    /// 3. Application identification\r\n    // must be set before OptionsModel is initialized or translations are loaded,\r\n    // as it is used to locate QSettings\r\n    QApplication::setOrganizationName(QAPP_ORG_NAME);\r\n    QApplication::setOrganizationDomain(QAPP_ORG_DOMAIN);\r\n-    QApplication::setApplicationName(QAPP_APP_NAME_DEFAULT);\r\n+    QApplication::setApplicationName(networkStyle->getAppName());\r\n```\r\n\r\nBut I am not confident this is all there is to it.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/8e1913ae025ad8912457abe24ae5c61da02fc17a/src/qt/bitcoin.cpp#L496-L501\r\nhttps://github.com/bitcoin-core/gui/issues/212",
      "user": {
        "login": "beirut-boop",
        "id": 78885860,
        "node_id": "MDQ6VXNlcjc4ODg1ODYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78885860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/beirut-boop",
        "html_url": "https://github.com/beirut-boop",
        "followers_url": "https://api.github.com/users/beirut-boop/followers",
        "following_url": "https://api.github.com/users/beirut-boop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/beirut-boop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/beirut-boop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/beirut-boop/subscriptions",
        "organizations_url": "https://api.github.com/users/beirut-boop/orgs",
        "repos_url": "https://api.github.com/users/beirut-boop/repos",
        "events_url": "https://api.github.com/users/beirut-boop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/beirut-boop/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/8106#issuecomment-790193404",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8106"
    }
  ]
}