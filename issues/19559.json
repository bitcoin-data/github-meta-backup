{
  "type": "issue",
  "issue": {
    "id": 661812383,
    "node_id": "MDU6SXNzdWU2NjE4MTIzODM=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19559",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19559/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19559/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19559/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/19559",
    "number": 19559,
    "state": "closed",
    "state_reason": "completed",
    "title": "build: cannot compile on OpenBSD since libsecp256k1 subtree update",
    "body": "Since the secp256k1 subtree update in #19228 (8c97780db8c9dd33efed134385573ba97e9cd165), it hasn't been possible to compile on OpenBSD. \r\nBuilding fails with (cc is Clang 8.0.1):\r\n```bash\r\n./autogen.sh\r\n./configure --disable-wallet --with-gui=no CC=cc CXX=c++ MAKE=gmake\r\ngmake -j6 V=1\r\n...\r\ngmake[3]: Entering directory '/home/vagrant/bitcoin/src/secp256k1'\r\ngcc -I. -I./src -Wall -Wextra -Wno-unused-function -g -O2 -c src/gen_context.c -o gen_context.o\r\nIn file included from src/gen_context.c:16:\r\nsrc/util.h:179: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'uint128_t'\r\ngmake[3]: *** [Makefile:1689: gen_context.o] Error 1\r\ngmake[3]: Leaving directory '/home/vagrant/bitcoin/src/secp256k1'\r\n```\r\n\r\nThe issue is that libsecp does some native compiler detection in configure, and then uses that compiler specifically for the ecmult precomputation. See here, (the call settings `CC_FOR_BUILD` is earlier):\r\nhttps://github.com/bitcoin/bitcoin/blob/476436b2dec254bb988f8c7a6cbec1d7bb7cecfd/src/secp256k1/configure.ac#L186-L188\r\nand then here where it's used:\r\n https://github.com/bitcoin/bitcoin/blob/476436b2dec254bb988f8c7a6cbec1d7bb7cecfd/src/secp256k1/Makefile.am#L129-L130\r\n\r\nThe problem is that this ends up picking up and using OpenBSDs ancient GCC 4.2.1, which barfs when it gets to util.h:\r\nhttps://github.com/bitcoin/bitcoin/blob/476436b2dec254bb988f8c7a6cbec1d7bb7cecfd/src/secp256k1/src/util.h#L179\r\n\r\nIf anyone does happen to run into this issue, the immediate workaround is to just pass `CC_FOR_BUILD` to configure, i.e: `./configure --disable-wallet --with-gui=no CC=cc CXX=c++ MAKE=gmake CC_FOR_BUILD=cc`.\r\n\r\nHowever before we update any docs etc, I'm going to take the issue upstream.",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 61889416,
        "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
        "name": "Build system",
        "color": "5319e7",
        "default": false
      },
      {
        "id": 159815356,
        "node_id": "MDU6TGFiZWwxNTk4MTUzNTY=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Upstream",
        "name": "Upstream",
        "color": "bfd4f2",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 0,
    "closed_at": "2020-08-10T14:39:29Z",
    "created_at": "2020-07-20T13:16:53Z",
    "updated_at": "2022-02-15T10:46:54Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 3565769401,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDM1NjU3Njk0MDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3565769401",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-20T13:16:53Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "labeled",
      "id": 3565769404,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDM1NjU3Njk0MDQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3565769404",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-20T13:16:53Z",
      "label": {
        "name": "Upstream",
        "color": "bfd4f2"
      }
    },
    {
      "event": "referenced",
      "id": 3593253984,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM1OTMyNTM5ODQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3593253984",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "01cd24c22606408d5c0ac74c9a2c5d85eff77846",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/01cd24c22606408d5c0ac74c9a2c5d85eff77846",
      "created_at": "2020-07-28T08:32:55Z"
    },
    {
      "event": "closed",
      "id": 3639084407,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzYzOTA4NDQwNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3639084407",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "01cd24c22606408d5c0ac74c9a2c5d85eff77846",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/01cd24c22606408d5c0ac74c9a2c5d85eff77846",
      "created_at": "2020-08-10T14:39:30Z"
    },
    {
      "event": "referenced",
      "id": 3639084431,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM2MzkwODQ0MzE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3639084431",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6d5a9fec2d576bdb17ff612e421a8c94dc362fbe",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d5a9fec2d576bdb17ff612e421a8c94dc362fbe",
      "created_at": "2020-08-10T14:39:30Z"
    },
    {
      "event": "referenced",
      "id": 3639955538,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM2Mzk5NTU1Mzg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3639955538",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d61eebb471a6245f3ef9cefcf7add2c71cde9cfa",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/d61eebb471a6245f3ef9cefcf7add2c71cde9cfa",
      "created_at": "2020-08-10T18:22:12Z"
    },
    {
      "event": "locked",
      "id": 6073896870,
      "node_id": "LOE_lADOABII584ncnSfzwAAAAFqCE-m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6073896870",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T10:46:54Z",
      "lock_reason": "resolved"
    },
    {
      "event": "referenced",
      "id": 8842676656,
      "node_id": "REFE_lADOABII584ncnSfzwAAAAIPEImw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8842676656",
      "actor": {
        "login": "lyricidal",
        "id": 2319897,
        "node_id": "MDQ6VXNlcjIzMTk4OTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2319897?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lyricidal",
        "html_url": "https://github.com/lyricidal",
        "followers_url": "https://api.github.com/users/lyricidal/followers",
        "following_url": "https://api.github.com/users/lyricidal/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lyricidal/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lyricidal/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lyricidal/subscriptions",
        "organizations_url": "https://api.github.com/users/lyricidal/orgs",
        "repos_url": "https://api.github.com/users/lyricidal/repos",
        "events_url": "https://api.github.com/users/lyricidal/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lyricidal/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "640f5a23698066c501d7771309011bbf5f57847f",
      "commit_url": "https://api.github.com/repos/PRCYCoin/PRCYCoin/commits/640f5a23698066c501d7771309011bbf5f57847f",
      "created_at": "2023-03-24T20:54:35Z"
    }
  ]
}