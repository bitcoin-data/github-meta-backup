{
  "type": "issue",
  "issue": {
    "id": 287735114,
    "node_id": "MDU6SXNzdWUyODc3MzUxMTQ=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12145",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12145/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12145/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12145/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/12145",
    "number": 12145,
    "state": "closed",
    "state_reason": "completed",
    "title": "Reorganize Bitcoin Core directory structure for easier database management",
    "body": "<!-- This issue tracker is only for technical issues related to Bitcoin Core.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the Bitcoin StackExchange at https://bitcoin.stackexchange.com.\r\n\r\nFor reporting security issues, please read instructions at https://bitcoincore.org/en/contact/.\r\n\r\nIf the node is \"stuck\" during sync or giving \"block checksum mismatch\" errors, please ensure your hardware is stable by running memtest and observe CPU temperature with a load-test tool such as linpack before creating an issue! -->\r\n\r\n<!-- Describe the issue -->\r\n\r\nI suspect that the subdirectory blocks/index is accessed more frequently and does better on a fast local disk even if the rest of the blocks subdirectory is on a slower disk.  The symlinks required for that are a bit obscene from a maintenance perspective, so I'd like you to reorganize the subdirectories of Bitcoin to unnest the more frequently accessed files directories from the less frequently accessed larger things, i.e., either move blocks/index into index (e.g., ~/.bitcoin/index rather than ~/.bitcoin/blocks/index), or move blocks/\\*.\\* into a new subdirectory blocks/data and you can leave blocks/index where it is.  \r\n\r\n<!--- What behavior did you expect? -->\r\n\r\nLess difficulty managing apportionment of large subdirectories and frequently accessed files onto different speed disks\r\n\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\n\r\nA canonical root-based symlink was required, which can offer difficulties in maintenance in the future.\r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\n\r\nOh gosh.  Must you with the extra unnecessary questions?\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n\r\ngit as of January 11, 2018.  (git has no manual, so I have no idea which version control system version number.)\r\n\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\n\r\nPresumably platform independent, but Mac.\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\n\r\nP.S., did you know \\* is only able to be typed in this Github post with the text \\\\\\*?",
    "user": {
      "login": "Ulmo",
      "id": 224672,
      "node_id": "MDQ6VXNlcjIyNDY3Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/224672?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ulmo",
      "html_url": "https://github.com/Ulmo",
      "followers_url": "https://api.github.com/users/Ulmo/followers",
      "following_url": "https://api.github.com/users/Ulmo/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Ulmo/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Ulmo/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Ulmo/subscriptions",
      "organizations_url": "https://api.github.com/users/Ulmo/orgs",
      "repos_url": "https://api.github.com/users/Ulmo/repos",
      "events_url": "https://api.github.com/users/Ulmo/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Ulmo/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 2,
    "closed_at": "2018-01-22T08:58:12Z",
    "created_at": "2018-01-11T10:27:37Z",
    "updated_at": "2021-09-08T12:36:30Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 357233622,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzIzMzYyMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/357233622",
      "actor": {
        "login": "jsarenik",
        "id": 244565,
        "node_id": "MDQ6VXNlcjI0NDU2NQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/244565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jsarenik",
        "html_url": "https://github.com/jsarenik",
        "followers_url": "https://api.github.com/users/jsarenik/followers",
        "following_url": "https://api.github.com/users/jsarenik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jsarenik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jsarenik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jsarenik/subscriptions",
        "organizations_url": "https://api.github.com/users/jsarenik/orgs",
        "repos_url": "https://api.github.com/users/jsarenik/repos",
        "events_url": "https://api.github.com/users/jsarenik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jsarenik/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-12T13:07:00Z",
      "updated_at": "2018-01-12T13:07:00Z",
      "author_association": "NONE",
      "body": "```\r\n$ git --version\r\ngit version 2.15.0\r\n```\r\n\r\nAs far as I know and just proved on Linux with ext4 filesystem (but should be the same on Mac I guess), there is no overhead accessing a particular file in a directory full of thousands of other files. It takes a while to list such a big directory, but for accessing a particular file which name is known (like `index`) there is no need to list the contents of the directory.\r\n\r\nI hope that helps.\r\n\r\n```\r\n$ mkdir dirs files; seq 999999 | while read a; do mkdir dirs/$a; touch files/$a; done\r\n$ time ls files/ > /dev/null\r\nreal\t0m 2.71s\r\nuser\t0m 1.31s\r\nsys\t0m 0.59s\r\nlomidrevo:/mnt/yocto/test$ time sh -c \"echo test > files/test\"\r\nreal\t0m 0.03s\r\nuser\t0m 0.00s\r\nsys\t0m 0.00s\r\nlomidrevo:/mnt/yocto/test$ time cat files/test\r\ntest\r\nreal\t0m 0.03s\r\nuser\t0m 0.00s\r\nsys\t0m 0.00s\r\n```",
      "user": {
        "login": "jsarenik",
        "id": 244565,
        "node_id": "MDQ6VXNlcjI0NDU2NQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/244565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jsarenik",
        "html_url": "https://github.com/jsarenik",
        "followers_url": "https://api.github.com/users/jsarenik/followers",
        "following_url": "https://api.github.com/users/jsarenik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jsarenik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jsarenik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jsarenik/subscriptions",
        "organizations_url": "https://api.github.com/users/jsarenik/orgs",
        "repos_url": "https://api.github.com/users/jsarenik/repos",
        "events_url": "https://api.github.com/users/jsarenik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jsarenik/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12145#issuecomment-357233622",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12145"
    },
    {
      "event": "commented",
      "id": 357481324,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzQ4MTMyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/357481324",
      "actor": {
        "login": "Willtech",
        "id": 1173622,
        "node_id": "MDQ6VXNlcjExNzM2MjI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1173622?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Willtech",
        "html_url": "https://github.com/Willtech",
        "followers_url": "https://api.github.com/users/Willtech/followers",
        "following_url": "https://api.github.com/users/Willtech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Willtech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Willtech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Willtech/subscriptions",
        "organizations_url": "https://api.github.com/users/Willtech/orgs",
        "repos_url": "https://api.github.com/users/Willtech/repos",
        "events_url": "https://api.github.com/users/Willtech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Willtech/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-14T01:27:52Z",
      "updated_at": "2018-01-14T01:27:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "@Ulmo If you are interested in git manuals, you can try [Git From The Bottom Up](https://github.com/Willtech/GitRefDocs/blob/master/git.from.bottom.up.pdf) and [Pro Git](https://git-scm.com/book). Enjoy!",
      "user": {
        "login": "Willtech",
        "id": 1173622,
        "node_id": "MDQ6VXNlcjExNzM2MjI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1173622?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Willtech",
        "html_url": "https://github.com/Willtech",
        "followers_url": "https://api.github.com/users/Willtech/followers",
        "following_url": "https://api.github.com/users/Willtech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Willtech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Willtech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Willtech/subscriptions",
        "organizations_url": "https://api.github.com/users/Willtech/orgs",
        "repos_url": "https://api.github.com/users/Willtech/repos",
        "events_url": "https://api.github.com/users/Willtech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Willtech/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12145#issuecomment-357481324",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12145"
    },
    {
      "event": "mentioned",
      "id": 1423166838,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTQyMzE2NjgzOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1423166838",
      "actor": {
        "login": "Ulmo",
        "id": 224672,
        "node_id": "MDQ6VXNlcjIyNDY3Mg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/224672?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Ulmo",
        "html_url": "https://github.com/Ulmo",
        "followers_url": "https://api.github.com/users/Ulmo/followers",
        "following_url": "https://api.github.com/users/Ulmo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Ulmo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Ulmo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Ulmo/subscriptions",
        "organizations_url": "https://api.github.com/users/Ulmo/orgs",
        "repos_url": "https://api.github.com/users/Ulmo/repos",
        "events_url": "https://api.github.com/users/Ulmo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Ulmo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-14T01:27:52Z"
    },
    {
      "event": "subscribed",
      "id": 1423166839,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE0MjMxNjY4Mzk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1423166839",
      "actor": {
        "login": "Ulmo",
        "id": 224672,
        "node_id": "MDQ6VXNlcjIyNDY3Mg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/224672?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Ulmo",
        "html_url": "https://github.com/Ulmo",
        "followers_url": "https://api.github.com/users/Ulmo/followers",
        "following_url": "https://api.github.com/users/Ulmo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Ulmo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Ulmo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Ulmo/subscriptions",
        "organizations_url": "https://api.github.com/users/Ulmo/orgs",
        "repos_url": "https://api.github.com/users/Ulmo/repos",
        "events_url": "https://api.github.com/users/Ulmo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Ulmo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-14T01:27:52Z"
    },
    {
      "event": "closed",
      "id": 1434671122,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTQzNDY3MTEyMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1434671122",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-22T08:58:12Z"
    },
    {
      "event": "locked",
      "id": 5272024146,
      "node_id": "LOE_lADOABII584RJn1KzwAAAAE6PLRS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5272024146",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:36:30Z",
      "lock_reason": "resolved"
    }
  ]
}