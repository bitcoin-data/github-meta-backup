{
  "type": "issue",
  "issue": {
    "id": 385035125,
    "node_id": "MDU6SXNzdWUzODUwMzUxMjU=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14823",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14823/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14823/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14823/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/14823",
    "number": 14823,
    "state": "closed",
    "state_reason": "completed",
    "title": "Confusing output when partial signing multisig transaction",
    "body": "<!-- This issue tracker is only for technical issues related to Bitcoin Core.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the Bitcoin StackExchange at https://bitcoin.stackexchange.com.\r\n\r\nFor reporting security issues, please read instructions at https://bitcoincore.org/en/contact/.\r\n\r\nIf the node is \"stuck\" during sync or giving \"block checksum mismatch\" errors, please ensure your hardware is stable by running memtest and observe CPU temperature with a load-test tool such as linpack before creating an issue! -->\r\n\r\n<!-- Describe the issue -->\r\nUnexpected output during multisig signing. See the following example when signing a 2/2 key.\r\n\r\n```\r\nbc signrawtransactionwithkey 0200000001b8a7873d892de2930cdb00a6c69dadbe8d553e2bef0688186a71009fd82062460100000000ffffffff028093dc140000000017a914a732060d1955ab93c50c1096597e2ea466b9937d8780d6e34c0000000017a9142d2aad185524b244ef2b2f6a0507d6f187d02fbe8700000000 '[\"cU3C1Uu4oN8ZPXrCz55GyjmrsaeoF8UhmBai2d9jzq9iw7ty9EMc\"]' '[{\"txid\":\"466220d89f00716a188806ef2b3e558dbead9dc6a600db0c93e22d893d87a7b8\", \"vout\":1,\"scriptPubKey\":\"a9142d2aad185524b244ef2b2f6a0507d6f187d02fbe87\",\"redeemScript\":\"5221032559b7054ff5468aa9508579379b62c5f6b31145e5bfe743fc66c0ec72608dab21030eaf6ea71e09bd6f6b10a3ee42cc1a445d9020627a4569f17b7fbf1d5801959a52ae\"}]'\r\n```\r\n\r\n```\r\n{\r\n  \"hex\": \"0200000001b8a7873d892de2930cdb00a6c69dadbe8d553e2bef0688186a71009fd820624601000000920047304402202d3ccf2360f990235e2e0ce17f5f28f4313f413301869b554c4e79905de93508022009a4acd673571d7924e8c0cd192386972a72316e8195338ebb8577a2a2941ed70100475221032559b7054ff5468aa9508579379b62c5f6b31145e5bfe743fc66c0ec72608dab21030eaf6ea71e09bd6f6b10a3ee42cc1a445d9020627a4569f17b7fbf1d5801959a52aeffffffff028093dc140000000017a914a732060d1955ab93c50c1096597e2ea466b9937d8780d6e34c0000000017a9142d2aad185524b244ef2b2f6a0507d6f187d02fbe8700000000\",\r\n  \"complete\": false,\r\n  \"errors\": [\r\n    {\r\n      \"txid\": \"466220d89f00716a188806ef2b3e558dbead9dc6a600db0c93e22d893d87a7b8\",\r\n      \"vout\": 1,\r\n      \"witness\": [\r\n      ],\r\n      \"scriptSig\": \"0047304402202d3ccf2360f990235e2e0ce17f5f28f4313f413301869b554c4e79905de93508022009a4acd673571d7924e8c0cd192386972a72316e8195338ebb8577a2a2941ed70100475221032559b7054ff5468aa9508579379b62c5f6b31145e5bfe743fc66c0ec72608dab21030eaf6ea71e09bd6f6b10a3ee42cc1a445d9020627a4569f17b7fbf1d5801959a52ae\",\r\n      \"sequence\": 4294967295,\r\n      \"error\": \"Signature must be zero for failed CHECK(MULTI)SIG operation\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n```\r\nbc signrawtransactionwithkey 0200000001b8a7873d892de2930cdb00a6c69dadbe8d553e2bef0688186a71009fd820624601000000920047304402202d3ccf2360f990235e2e0ce17f5f28f4313f413301869b554c4e79905de93508022009a4acd673571d7924e8c0cd192386972a72316e8195338ebb8577a2a2941ed70100475221032559b7054ff5468aa9508579379b62c5f6b31145e5bfe743fc66c0ec72608dab21030eaf6ea71e09bd6f6b10a3ee42cc1a445d9020627a4569f17b7fbf1d5801959a52aeffffffff028093dc140000000017a914a732060d1955ab93c50c1096597e2ea466b9937d8780d6e34c0000000017a9142d2aad185524b244ef2b2f6a0507d6f187d02fbe8700000000 '[\"cSB1o7v1QBZDHJropQqBYfuiUA4Js1o24uzkgB2vYeND1st5uGqV\"]' \r\n```\r\n\r\n```\r\n{\r\n  \"hex\": \"0200000001b8a7873d892de2930cdb00a6c69dadbe8d553e2bef0688186a71009fd820624601000000d90047304402202d3ccf2360f990235e2e0ce17f5f28f4313f413301869b554c4e79905de93508022009a4acd673571d7924e8c0cd192386972a72316e8195338ebb8577a2a2941ed70147304402206fe3aa79e02894ec40d3f6e9df7d7056c5b50cd7a39e1cde3aa3dd097c76798f0220464cd0a39690cbf28687b3b695eb0dc59ca73aef624b16b9586ade31a0761b3101475221032559b7054ff5468aa9508579379b62c5f6b31145e5bfe743fc66c0ec72608dab21030eaf6ea71e09bd6f6b10a3ee42cc1a445d9020627a4569f17b7fbf1d5801959a52aeffffffff028093dc140000000017a914a732060d1955ab93c50c1096597e2ea466b9937d8780d6e34c0000000017a9142d2aad185524b244ef2b2f6a0507d6f187d02fbe8700000000\",\r\n  \"complete\": true\r\n}\r\n```\r\n\r\n<!--- What behavior did you expect? -->\r\nWhen dealing with the RPC calls alone, it was difficult to realize that the partial signing was actually working. This is due to the this specific portion of the response:\r\n\r\n```\r\n  \"errors\": [\r\n    {\r\n      \"txid\": \"466220d89f00716a188806ef2b3e558dbead9dc6a600db0c93e22d893d87a7b8\",\r\n      \"vout\": 1,\r\n      \"witness\": [\r\n      ],\r\n      \"scriptSig\": \"0047304402202d3ccf2360f990235e2e0ce17f5f28f4313f413301869b554c4e79905de93508022009a4acd673571d7924e8c0cd192386972a72316e8195338ebb8577a2a2941ed70100475221032559b7054ff5468aa9508579379b62c5f6b31145e5bfe743fc66c0ec72608dab21030eaf6ea71e09bd6f6b10a3ee42cc1a445d9020627a4569f17b7fbf1d5801959a52ae\",\r\n      \"sequence\": 4294967295,\r\n      \"error\": \"Signature must be zero for failed CHECK(MULTI)SIG operation\"\r\n    }\r\n\r\n```\r\n\r\nBased on the RPC respons on here: https://bitcoin.org/en/developer-examples#p2sh-multisig\r\n\r\nI expected the successful partial signature to be as follows:\r\n```\r\n{\r\n    \"hex\" : \"010000000175e1769813db8418fea17576694af1ff31cb2b512\\\r\n             b7333e6eb42f030d0d7787200000000b5004830450221008d5e\\\r\n             c57d362ff6ef6602e4e756ef1bdeee12bd5c5c72697ef1455b3\\\r\n             79c90531002202ef3ea04dfbeda043395e5bc701e4878c15baa\\\r\n             b9c6ba5808eb3d04c91f641a0c014c69522103310188e911026\\\r\n             cf18c3ce274e0ebb5f95b007f230d8cb7d09879d96dbeab1aff\\\r\n             210243930746e6ed6552e03359db521b088134652905bd2d154\\\r\n             1fa9124303a41e95621029e03a901b85534ff1e92c43c74431f\\\r\n             7ce72046060fcf7a95c37e148f78c7725553aeffffffff01c0b\\\r\n             c973b000000001976a914b6f64f5bf3e38f25ead28817df7929\\\r\n             c06fe847ee88ac00000000\",\r\n    \"complete\" : false\r\n}\r\n```\r\n\r\nI'm using `Bitcoin Core RPC client version v0.17.0`\r\n\r\nI suspect the issue is related to this: https://github.com/bitcoin/bitcoin/issues/9988, however they're using a different RPC call.",
    "user": {
      "login": "tipu",
      "id": 460057,
      "node_id": "MDQ6VXNlcjQ2MDA1Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/460057?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tipu",
      "html_url": "https://github.com/tipu",
      "followers_url": "https://api.github.com/users/tipu/followers",
      "following_url": "https://api.github.com/users/tipu/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/tipu/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/tipu/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/tipu/subscriptions",
      "organizations_url": "https://api.github.com/users/tipu/orgs",
      "repos_url": "https://api.github.com/users/tipu/repos",
      "events_url": "https://api.github.com/users/tipu/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/tipu/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 0,
    "closed_at": "2019-09-11T05:37:24Z",
    "created_at": "2018-11-27T23:36:51Z",
    "updated_at": "2021-12-16T14:09:54Z"
  },
  "events": [
    {
      "event": "closed",
      "id": 2624460661,
      "node_id": "MDExOkNsb3NlZEV2ZW50MjYyNDQ2MDY2MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2624460661",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2296fe65f598eefb72e944cefcca462e740bfaf3",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2296fe65f598eefb72e944cefcca462e740bfaf3",
      "created_at": "2019-09-11T05:37:24Z"
    },
    {
      "event": "locked",
      "id": 5778609962,
      "node_id": "LOE_lADOABII584W8yt1zwAAAAFYbpcq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5778609962",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-16T14:09:54Z",
      "lock_reason": "resolved"
    },
    {
      "event": "referenced",
      "id": 8838002058,
      "node_id": "REFE_lADOABII584W8yt1zwAAAAIOyTWK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8838002058",
      "actor": {
        "login": "knst",
        "id": 545784,
        "node_id": "MDQ6VXNlcjU0NTc4NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/545784?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/knst",
        "html_url": "https://github.com/knst",
        "followers_url": "https://api.github.com/users/knst/followers",
        "following_url": "https://api.github.com/users/knst/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/knst/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/knst/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/knst/subscriptions",
        "organizations_url": "https://api.github.com/users/knst/orgs",
        "repos_url": "https://api.github.com/users/knst/repos",
        "events_url": "https://api.github.com/users/knst/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/knst/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "46c2c0d7962b3bdb010d4255b0512bd2a528d610",
      "commit_url": "https://api.github.com/repos/knst/dash/commits/46c2c0d7962b3bdb010d4255b0512bd2a528d610",
      "created_at": "2023-03-24T12:13:26Z"
    },
    {
      "event": "referenced",
      "id": 8874251334,
      "node_id": "REFE_lADOABII584W8yt1zwAAAAIQ8lRG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8874251334",
      "actor": {
        "login": "knst",
        "id": 545784,
        "node_id": "MDQ6VXNlcjU0NTc4NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/545784?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/knst",
        "html_url": "https://github.com/knst",
        "followers_url": "https://api.github.com/users/knst/followers",
        "following_url": "https://api.github.com/users/knst/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/knst/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/knst/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/knst/subscriptions",
        "organizations_url": "https://api.github.com/users/knst/orgs",
        "repos_url": "https://api.github.com/users/knst/repos",
        "events_url": "https://api.github.com/users/knst/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/knst/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a2ce1e20c7a981c27b868d81fb510cb80c7237d6",
      "commit_url": "https://api.github.com/repos/knst/dash/commits/a2ce1e20c7a981c27b868d81fb510cb80c7237d6",
      "created_at": "2023-03-29T09:44:01Z"
    },
    {
      "event": "referenced",
      "id": 8948153626,
      "node_id": "REFE_lADOABII584W8yt1zwAAAAIVWf0a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8948153626",
      "actor": {
        "login": "UdjinM6",
        "id": 1935069,
        "node_id": "MDQ6VXNlcjE5MzUwNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1935069?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/UdjinM6",
        "html_url": "https://github.com/UdjinM6",
        "followers_url": "https://api.github.com/users/UdjinM6/followers",
        "following_url": "https://api.github.com/users/UdjinM6/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/UdjinM6/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/UdjinM6/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/UdjinM6/subscriptions",
        "organizations_url": "https://api.github.com/users/UdjinM6/orgs",
        "repos_url": "https://api.github.com/users/UdjinM6/repos",
        "events_url": "https://api.github.com/users/UdjinM6/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/UdjinM6/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "993418041c8740fc0779af4f162bd1a4fe198355",
      "commit_url": "https://api.github.com/repos/knst/dash/commits/993418041c8740fc0779af4f162bd1a4fe198355",
      "created_at": "2023-04-06T17:15:53Z"
    }
  ]
}