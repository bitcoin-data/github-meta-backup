{
  "type": "issue",
  "issue": {
    "id": 55242653,
    "node_id": "MDU6SXNzdWU1NTI0MjY1Mw==",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5693",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5693/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5693/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5693/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/5693",
    "number": 5693,
    "state": "closed",
    "state_reason": "completed",
    "title": "Unify uses of MAX_FREE_TRANSACTION_CREATE_SIZE",
    "body": "https://github.com/bitcoin/bitcoin/blob/master/src/main.cpp#L896\n\n```\nCAmount GetMinRelayFee(const CTransaction& tx, unsigned int nBytes, bool fAllowFree)\n{\n...\n    CAmount nMinFee = ::minRelayTxFee.GetFee(nBytes);\n\n    if (fAllowFree)\n    {\n        // There is a free transaction area in blocks created by most miners,\n        // * If we are relaying we allow transactions up to DEFAULT_BLOCK_PRIORITY_SIZE - 1000\n        //   to be considered to fall into this category. We don't want to encourage sending\n        //   multiple transactions instead of one big transaction to avoid fees.\n        if (nBytes < (DEFAULT_BLOCK_PRIORITY_SIZE - 1000))\n            nMinFee = 0;\n    }\n```\n\nThat 1000 is a magic number, previously 10000 in versions prior to 0.8.6.\n\nhttps://github.com/bitcoin/bitcoin/blob/master/src/wallet.h#L48\n\n```\n//! Largest (in bytes) free transaction we're willing to create\nstatic const unsigned int MAX_FREE_TRANSACTION_CREATE_SIZE = 1000;\n```\n\nIt has been equal to what is now defined as MAX_FREE_TRANSACTION_CREATE_SIZE for the creation of wallet transactions, but this constant can't be used directly by main.cpp because it isn't reliant on the wallet.\n\nShould we unify it so isn't it is no longer an unexplained magic number or should we just eliminate the magic?\n",
    "user": {
      "login": "wtogami",
      "id": 93665,
      "node_id": "MDQ6VXNlcjkzNjY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/93665?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wtogami",
      "html_url": "https://github.com/wtogami",
      "followers_url": "https://api.github.com/users/wtogami/followers",
      "following_url": "https://api.github.com/users/wtogami/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/wtogami/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/wtogami/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/wtogami/subscriptions",
      "organizations_url": "https://api.github.com/users/wtogami/orgs",
      "repos_url": "https://api.github.com/users/wtogami/repos",
      "events_url": "https://api.github.com/users/wtogami/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/wtogami/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 1,
    "closed_at": "2015-01-27T00:33:09Z",
    "created_at": "2015-01-23T04:00:29Z",
    "updated_at": "2021-09-08T12:21:42Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 71568272,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcxNTY4Mjcy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/71568272",
      "actor": {
        "login": "wtogami",
        "id": 93665,
        "node_id": "MDQ6VXNlcjkzNjY1",
        "avatar_url": "https://avatars.githubusercontent.com/u/93665?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/wtogami",
        "html_url": "https://github.com/wtogami",
        "followers_url": "https://api.github.com/users/wtogami/followers",
        "following_url": "https://api.github.com/users/wtogami/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/wtogami/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/wtogami/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/wtogami/subscriptions",
        "organizations_url": "https://api.github.com/users/wtogami/orgs",
        "repos_url": "https://api.github.com/users/wtogami/repos",
        "events_url": "https://api.github.com/users/wtogami/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/wtogami/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-01-27T00:33:09Z",
      "updated_at": "2015-01-27T00:33:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "```\n<wumpus> [13:41:10] warren: +1 for creating a constant for the magic number, although I don't think it should be unified with the wallet constant\n<wumpus> [14:04:53] warren: It makes sense to be able to set it for the wallet and network separately\n<wumpus> [14:29:32] warren: you remove the negative magic so you get moar magic\n```\n\nOK ... I don't care enough to define another constant that isn't unified.  Closing.\n",
      "user": {
        "login": "wtogami",
        "id": 93665,
        "node_id": "MDQ6VXNlcjkzNjY1",
        "avatar_url": "https://avatars.githubusercontent.com/u/93665?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/wtogami",
        "html_url": "https://github.com/wtogami",
        "followers_url": "https://api.github.com/users/wtogami/followers",
        "following_url": "https://api.github.com/users/wtogami/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/wtogami/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/wtogami/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/wtogami/subscriptions",
        "organizations_url": "https://api.github.com/users/wtogami/orgs",
        "repos_url": "https://api.github.com/users/wtogami/repos",
        "events_url": "https://api.github.com/users/wtogami/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/wtogami/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/5693#issuecomment-71568272",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5693"
    },
    {
      "event": "closed",
      "id": 225034939,
      "node_id": "MDExOkNsb3NlZEV2ZW50MjI1MDM0OTM5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/225034939",
      "actor": {
        "login": "wtogami",
        "id": 93665,
        "node_id": "MDQ6VXNlcjkzNjY1",
        "avatar_url": "https://avatars.githubusercontent.com/u/93665?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/wtogami",
        "html_url": "https://github.com/wtogami",
        "followers_url": "https://api.github.com/users/wtogami/followers",
        "following_url": "https://api.github.com/users/wtogami/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/wtogami/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/wtogami/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/wtogami/subscriptions",
        "organizations_url": "https://api.github.com/users/wtogami/orgs",
        "repos_url": "https://api.github.com/users/wtogami/repos",
        "events_url": "https://api.github.com/users/wtogami/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/wtogami/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-01-27T00:33:09Z"
    },
    {
      "event": "locked",
      "id": 5271945223,
      "node_id": "LOE_lADOABII584DSu-dzwAAAAE6O4AH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271945223",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:21:42Z",
      "lock_reason": "resolved"
    }
  ]
}