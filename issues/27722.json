{
  "type": "issue",
  "issue": {
    "id": 1720770400,
    "node_id": "I_kwDOABII585mkN9g",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/27722",
    "number": 27722,
    "state": "open",
    "state_reason": null,
    "title": "bitcoind hangs waiting for `g_requests.empty()`",
    "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nbitcoind hangs \r\n\r\n### Expected behaviour\r\n\r\nbitcoind shouldn't hang\r\n\r\nI was able to dump the running threads and it was stuck waiting for `g_requests` to be empty. The issue seems to be that this callback may not actually be called in case of error: https://github.com/bitcoin/bitcoin/blob/22139f6e83a2bedd2dad9f280567d2c76c54252f/src/httpserver.cpp#L222-L227\r\n\r\nSee this issue https://github.com/libevent/libevent/issues/589 for more details. I think what happens is that interrupting `bitcoin-cli` before it has received the reply calls the error callback and then the success callback is never called.\r\n\r\nI think this is also a memory leak since `g_requests` won't get cleaned up. Whether it's severe or not probably depends on the caller and what type of requests they are making. This new code was introduced here https://github.com/bitcoin/bitcoin/pull/26742\r\n\r\n### Steps to reproduce\r\n\r\nI was running a simple shell script in 4 terminal windows for fun:\r\n\r\n```\r\n#!/bin/bash\r\n\r\nfor i in {1..50000}\r\ndo\r\n\t./src/bitcoin-cli -rpcuser=admin -rpcpassword=pass getrawtransaction 217819875434324c412d5e938f7f3c1670fb60814974cf7958f1fac90ee5afb7\r\ndone\r\n```\r\n\r\nI was messing around with this script and randomly Ctrl-C'd each terminal window in rapid succession and then when I waited up to a minute and Ctrl-C'd bitcoind, it didn't shutdown. I can reproduce it pretty reliably as well.\r\n\r\nCompilation commands:\r\n```\r\n./autogen.sh; ./configure --without-wallet --with-gui=no --disable-zmq; make -j4\r\n```\r\n\r\nRun-time options (note that I was able to reproduce this with the default number of rpcthreads as well):\r\n```\r\n./src/bitcoind -txindex -rpcthreads=1 -debug\r\n```\r\n\r\nOutput of `gcc --version`:\r\n```\r\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\r\nApple clang version 11.0.3 (clang-1103.0.32.62)\r\nTarget: x86_64-apple-darwin21.6.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n```\r\n\r\nOutput of `g++ --version`:\r\n```\r\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\r\nApple clang version 11.0.3 (clang-1103.0.32.62)\r\nTarget: x86_64-apple-darwin21.6.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n```\r\n\r\nMy libevent version is 2.1.12\r\n\r\n### Relevant log output\r\n\r\n```\r\n^C2023-05-22T20:56:10Z [http] Interrupting HTTP server\r\n2023-05-22T20:56:10Z [rpc] Interrupting HTTP RPC server\r\n2023-05-22T20:56:10Z [rpc] Interrupting RPC\r\n2023-05-22T20:56:10Z tor: Thread interrupt\r\n2023-05-22T20:56:10Z Shutdown: In progress...\r\n2023-05-22T20:56:10Z [rpc] Stopping HTTP RPC server\r\n2023-05-22T20:56:10Z torcontrol thread exit\r\n2023-05-22T20:56:10Z [http] Unregistering HTTP handler for / (exactmatch 1)\r\n2023-05-22T20:56:10Z addcon thread exit\r\n2023-05-22T20:56:10Z [http] Unregistering HTTP handler for /wallet/ (exactmatch 0)\r\n2023-05-22T20:56:10Z [rpc] Stopping RPC\r\n2023-05-22T20:56:10Z net thread exit\r\n2023-05-22T20:56:10Z [rpc] RPC stopped.\r\n2023-05-22T20:56:10Z [http] Stopping HTTP server\r\n2023-05-22T20:56:10Z [http] Waiting for HTTP worker threads to exit\r\n2023-05-22T20:56:10Z [http] Exited http event loop\r\n2023-05-22T20:56:10Z [http] Waiting for 1 requests to stop HTTP server\r\n```\r\n\r\nThe important bit is the very last log line. bitcoind was still alive and periodically printed log lines about feeding dynamic environment data into the RNG.\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\n17acb2782a66f033238340e4fb81009e7f79e97a\r\n\r\n### Operating system and version\r\n\r\nmacOS intel\r\n\r\n### Machine specifications\r\n\r\n_No response_",
    "user": {
      "login": "Crypt-iQ",
      "id": 15145615,
      "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Crypt-iQ",
      "html_url": "https://github.com/Crypt-iQ",
      "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
      "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
      "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
      "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
      "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/62",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/62",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/62/labels",
      "id": 9441433,
      "node_id": "MI_kwDOABII584AkBCZ",
      "number": 62,
      "state": "open",
      "title": "25.1",
      "description": "",
      "creator": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 2,
      "closed_issues": 3,
      "created_at": "2023-05-25T10:17:04Z",
      "updated_at": "2023-06-02T09:09:54Z"
    },
    "locked": false,
    "comments": 11,
    "created_at": "2023-05-22T23:05:42Z",
    "updated_at": "2023-06-01T09:53:05Z"
  },
  "events": [
    {
      "event": "unsubscribed",
      "id": 9311285228,
      "node_id": "UE_lADOABII585mkN9gzwAAAAIq_u_s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9311285228",
      "actor": {
        "login": "joostjager",
        "id": 4638168,
        "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joostjager",
        "html_url": "https://github.com/joostjager",
        "followers_url": "https://api.github.com/users/joostjager/followers",
        "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
        "organizations_url": "https://api.github.com/users/joostjager/orgs",
        "repos_url": "https://api.github.com/users/joostjager/repos",
        "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/joostjager/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-23T05:59:29Z"
    },
    {
      "event": "commented",
      "id": 1559296260,
      "node_id": "IC_kwDOABII585c8PkE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1559296260",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-23T13:05:46Z",
      "updated_at": "2023-05-23T13:19:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think #27245 which uses `evhttp_connection_set_closecb` is needed to avoid this, but:\r\n- it doesn't seem to be slated for v25.0\r\n- I experience this in one of the libevent versions that #27245 doesn't address",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1559296260",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722"
    },
    {
      "event": "commented",
      "id": 1559453982,
      "node_id": "IC_kwDOABII585c82Ee",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1559453982",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-23T14:02:43Z",
      "updated_at": "2023-05-23T14:02:43Z",
      "author_association": "MEMBER",
      "body": "Thanks for reporting! I observed this issue sporadically, but were never able to reproduce it until now. With the help of your description (_\"... interrupting bitcoin-cli before it has received the reply ...\"_) I found it's actually quite trivial at least on my machine:\r\n\r\n1. startup `bitcoind -debug=http` (and any other desired flags; note that the hangup also happens without the debug flag, but this allows us to see where it's hanging)\r\n2. execute `bitcoin-cli waitforblockheight 1234567` (or any other RPC call which doesn't terminate immediately)\r\n3. terminate bitcoin-cli via CTRL-C\r\n4. terminate bitcoind via CTRL-C\r\n\r\nThe shutdown leads to the following messages and then hangs forever:\r\n```\r\n2023-05-23T13:58:01Z [http] Unregistering HTTP handler for / (exactmatch 1)\r\n2023-05-23T13:58:01Z [http] Unregistering HTTP handler for /wallet/ (exactmatch 0)\r\n2023-05-23T13:58:01Z [http] Stopping HTTP server\r\n2023-05-23T13:58:01Z [http] Waiting for HTTP worker threads to exit\r\n2023-05-23T13:58:01Z [http] Waiting for 1 requests to stop HTTP server\r\n2023-05-23T13:58:01Z [http] Exited http event loop\r\n2023-05-23T13:58:01Z msghand thread exit\r\n2023-05-23T13:58:01Z net thread exit\r\n2023-05-23T13:58:03Z opencon thread exit\r\n```\r\n\r\nTested on master branch (commit 5ef2c1ee7a7416907e0f9135dc0701a88d92a7f6) with default configuration, running OpenBSD 7.3 with libevent 2.1.12 here.",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1559453982",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722"
    },
    {
      "event": "labeled",
      "id": 9316799305,
      "node_id": "LE_lADOABII585mkN9gzwAAAAIrUxNJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9316799305",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-23T14:05:14Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 1559731418,
      "node_id": "IC_kwDOABII585c95za",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1559731418",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-23T16:00:49Z",
      "updated_at": "2023-05-23T16:00:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "I was able to fix this with my branch here https://github.com/Crypt-iQ/bitcoin/commit/4fd7adb30f584664421b6431bce8ebcbf7ceef2f by adding a `evhttp_connection_set_closecb` callback. I didn't need to modify the logic related to `EV_READ` and no functional test errors are introduced on my machine",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1559731418",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722"
    },
    {
      "event": "commented",
      "id": 1561718193,
      "node_id": "IC_kwDOABII585dFe2x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1561718193",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-24T18:09:25Z",
      "updated_at": "2023-05-24T18:09:25Z",
      "author_association": "MEMBER",
      "body": "> I was able to fix this with my branch here [Crypt-iQ@4fd7adb](https://github.com/Crypt-iQ/bitcoin/commit/4fd7adb30f584664421b6431bce8ebcbf7ceef2f) by adding a `evhttp_connection_set_closecb` callback. I didn't need to modify the logic related to `EV_READ` and no functional test errors are introduced on my machine\r\n\r\nCan confirm that this patch fixes the issue on my side. ",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1561718193",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722"
    },
    {
      "event": "commented",
      "id": 1564196898,
      "node_id": "IC_kwDOABII585dO8Ai",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1564196898",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T10:44:53Z",
      "updated_at": "2023-05-26T10:44:53Z",
      "author_association": "MEMBER",
      "body": "Hmmm, curiously enough I was not able to reproduce using either method on master @ aa6cc5bec9 \r\n\r\nWith @theStack method:\r\n\r\n```log\r\n2023-05-26T10:39:07Z [http] Received a POST request for / from 127.0.0.1:50704\r\n^C2023-05-26T10:39:10Z [http] Interrupting HTTP server\r\n2023-05-26T10:39:10Z tor: Thread interrupt\r\n2023-05-26T10:39:10Z torcontrol thread exit\r\n2023-05-26T10:39:10Z addcon thread exit\r\n2023-05-26T10:39:10Z opencon thread exit\r\n2023-05-26T10:39:10Z Shutdown: In progress...\r\n2023-05-26T10:39:10Z [http] Unregistering HTTP handler for / (exactmatch 1)\r\n2023-05-26T10:39:10Z [http] Unregistering HTTP handler for /wallet/ (exactmatch 0)\r\n2023-05-26T10:39:10Z [http] Stopping HTTP server\r\n2023-05-26T10:39:10Z [http] Waiting for HTTP worker threads to exit\r\n2023-05-26T10:39:10Z [http] Waiting for 1 requests to stop HTTP server\r\n2023-05-26T10:39:10Z [http] Waiting for HTTP event thread to exit\r\n2023-05-26T10:39:10Z [http] Exited http event loop\r\n2023-05-26T10:39:10Z [http] Stopped HTTP server\r\n2023-05-26T10:39:10Z loadblk thread exit\r\n2023-05-26T10:39:10Z net thread exit\r\n2023-05-26T10:39:10Z msghand thread exit\r\n2023-05-26T10:39:10Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2023-05-26T10:39:10Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.00s)\r\n2023-05-26T10:39:10Z scheduler thread exit\r\n2023-05-26T10:39:16Z Shutdown: done\r\n```\r\n\r\nWith @Crypt-iQ method:\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\n```log\r\n... many lines like this\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59546\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59562\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59566\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59570\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59574\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59580\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59590\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59596\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59606\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59616\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59618\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59636\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59638\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59660\r\n2023-05-26T10:42:04Z [http] Received a POST request for / from 127.0.0.1:59658\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59686\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59684\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59704\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59706\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59722\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59734\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59740\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59746\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59760\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59774\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59790\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59792\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59798\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59802\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59804\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59818\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59822\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59828\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59826\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59840\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59854\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59864\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59866\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59870\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59868\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59886\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59900\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59914\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59928\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59944\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59960\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59964\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59968\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59980\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:59982\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60002\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60004\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60010\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60008\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60018\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60016\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60038\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60044\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60048\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60054\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60066\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60064\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60080\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60082\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60108\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60110\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60124\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60128\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60130\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60142\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60154\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60158\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60170\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60168\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60186\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60184\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60196\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60198\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60224\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60226\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60242\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60244\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60258\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60256\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60284\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60296\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60298\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60310\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60320\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60336\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60344\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60342\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60362\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60370\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60378\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60382\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60386\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60388\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60400\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60402\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60422\r\n2023-05-26T10:42:05Z [http] Received a POST request for / from 127.0.0.1:60430\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60436\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60450\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60462\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60468\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60472\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60470\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60494\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60496\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60508\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60510\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60514\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60522\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60524\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60532\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60544\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60552\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60556\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60560\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60570\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60582\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60592\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60598\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60612\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60614\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60620\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60626\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60628\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60646\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60654\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60652\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60676\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60678\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60680\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60688\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60700\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60706\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60710\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60712\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60724\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60736\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60750\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60756\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60760\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60772\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60776\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60788\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60802\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60814\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60816\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60828\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60830\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60846\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60848\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60854\r\n2023-05-26T10:42:06Z [http] Received a POST request for / from 127.0.0.1:60866\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60880\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60892\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60896\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60906\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60918\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60934\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60940\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60950\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60960\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60972\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60988\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:60994\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32772\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32774\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32776\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32778\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32788\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32802\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32812\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32828\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32830\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32832\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32846\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32854\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32870\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32872\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32876\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32890\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32892\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32904\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32906\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32912\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32928\r\n2023-05-26T10:42:07Z [http] Received a POST request for / from 127.0.0.1:32934\r\n^C2023-05-26T10:42:14Z [http] Interrupting HTTP server\r\n2023-05-26T10:42:14Z tor: Thread interrupt\r\n2023-05-26T10:42:14Z torcontrol thread exit\r\n2023-05-26T10:42:14Z opencon thread exit\r\n2023-05-26T10:42:14Z addcon thread exit\r\n2023-05-26T10:42:14Z Shutdown: In progress...\r\n2023-05-26T10:42:14Z [http] Unregistering HTTP handler for / (exactmatch 1)\r\n2023-05-26T10:42:14Z [http] Unregistering HTTP handler for /wallet/ (exactmatch 0)\r\n2023-05-26T10:42:14Z [http] Stopping HTTP server\r\n2023-05-26T10:42:14Z [http] Waiting for HTTP worker threads to exit\r\n2023-05-26T10:42:14Z [http] Exited http event loop\r\n2023-05-26T10:42:14Z [http] Waiting for HTTP event thread to exit\r\n2023-05-26T10:42:14Z [http] Stopped HTTP server\r\n2023-05-26T10:42:14Z net thread exit\r\n2023-05-26T10:42:14Z loadblk thread exit\r\n2023-05-26T10:42:14Z msghand thread exit\r\n2023-05-26T10:42:14Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2023-05-26T10:42:14Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.00s)\r\n2023-05-26T10:42:14Z scheduler thread exit\r\n2023-05-26T10:42:15Z Shutdown: done\r\n```\r\n\r\n</details>",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1564196898",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722"
    },
    {
      "event": "mentioned",
      "id": 9349314476,
      "node_id": "MEE_lADOABII585mkN9gzwAAAAItQzes",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9349314476",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T10:44:53Z"
    },
    {
      "event": "subscribed",
      "id": 9349314484,
      "node_id": "SE_lADOABII585mkN9gzwAAAAItQze0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9349314484",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T10:44:53Z"
    },
    {
      "event": "mentioned",
      "id": 9349314501,
      "node_id": "MEE_lADOABII585mkN9gzwAAAAItQzfF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9349314501",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T10:44:53Z"
    },
    {
      "event": "subscribed",
      "id": 9349314517,
      "node_id": "SE_lADOABII585mkN9gzwAAAAItQzfV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9349314517",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T10:44:54Z"
    },
    {
      "event": "commented",
      "id": 1564380223,
      "node_id": "IC_kwDOABII585dPow_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1564380223",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T13:15:58Z",
      "updated_at": "2023-05-26T13:15:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "@willcl-ark can you find what libevent version you're using? ",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1564380223",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722"
    },
    {
      "event": "mentioned",
      "id": 9350744216,
      "node_id": "MEE_lADOABII585mkN9gzwAAAAItWQiY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9350744216",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T13:15:59Z"
    },
    {
      "event": "subscribed",
      "id": 9350744231,
      "node_id": "SE_lADOABII585mkN9gzwAAAAItWQin",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9350744231",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T13:15:59Z"
    },
    {
      "event": "commented",
      "id": 1568888056,
      "node_id": "IC_kwDOABII585dg1T4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1568888056",
      "actor": {
        "login": "erikarvstedt",
        "id": 36110478,
        "node_id": "MDQ6VXNlcjM2MTEwNDc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/36110478?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/erikarvstedt",
        "html_url": "https://github.com/erikarvstedt",
        "followers_url": "https://api.github.com/users/erikarvstedt/followers",
        "following_url": "https://api.github.com/users/erikarvstedt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/erikarvstedt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/erikarvstedt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/erikarvstedt/subscriptions",
        "organizations_url": "https://api.github.com/users/erikarvstedt/orgs",
        "repos_url": "https://api.github.com/users/erikarvstedt/repos",
        "events_url": "https://api.github.com/users/erikarvstedt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/erikarvstedt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T18:31:39Z",
      "updated_at": "2023-05-30T20:30:43Z",
      "author_association": "NONE",
      "body": "This bug appeared in the [nix-bitcoin](https://github.com/fort-nix/nix-bitcoin/) [test suite](https://github.com/fort-nix/nix-bitcoin/blob/master/test/tests.py). I can confirm that it is fixed by https://github.com/Crypt-iQ/bitcoin/commit/4fd7adb30f584664421b6431bce8ebcbf7ceef2f.\r\n\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\nThe test is executed inside a QEMU VM and runs `bitcoind` together with a bunch of client services (like `clightning`, `lnd`, `joinmarket`). It then stops all services, including `bitcoind`.\r\nSometimes `bitcoind` hangs during shutdown:\r\n1. First, it waits for a few minutes at [httpserver.cpp#L469](https://github.com/bitcoin/bitcoin/blob/v25.0/src/httpserver.cpp#L469) (`[http] Waiting for HTTP worker threads to exit`)\r\n2. Then it hangs indefinitely at [httpserver.cpp#L484](https://github.com/bitcoin/bitcoin/blob/v25.0/src/httpserver.cpp#L484) (`[http] Waiting for 1 requests to stop HTTP server`')\r\n\r\n`bitcoind` gets shutdown *after* all client services have exited, so there are never any lingering active connections.\r\n\r\nThis bug is hard to reproduce in the context of the test suite.\r\nI once could consistently trigger it on my desktop system, but never again after rebooting the system.\r\nCurrently, I can reproduce it in 80% of all test runs on our [nix-bitcoin server](https://nixbitcoin.org).\r\n\r\n[Here's the log output](https://gist.github.com/erikarvstedt/843f6d5fdb545b52f6bd34bc66651c52) of the shutdown sequence, interspersed with gdb backtraces of all threads.\r\n\r\n</details>\r\n\r\n",
      "user": {
        "login": "erikarvstedt",
        "id": 36110478,
        "node_id": "MDQ6VXNlcjM2MTEwNDc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/36110478?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/erikarvstedt",
        "html_url": "https://github.com/erikarvstedt",
        "followers_url": "https://api.github.com/users/erikarvstedt/followers",
        "following_url": "https://api.github.com/users/erikarvstedt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/erikarvstedt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/erikarvstedt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/erikarvstedt/subscriptions",
        "organizations_url": "https://api.github.com/users/erikarvstedt/orgs",
        "repos_url": "https://api.github.com/users/erikarvstedt/repos",
        "events_url": "https://api.github.com/users/erikarvstedt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/erikarvstedt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1568888056",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722"
    },
    {
      "event": "commented",
      "id": 1568965050,
      "node_id": "IC_kwDOABII585dhIG6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1568965050",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T19:26:08Z",
      "updated_at": "2023-05-30T19:26:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "@erikarvstedt it seems like there's a call to `importmulti` that is outstanding while bitcoind is trying to shut down",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1568965050",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722"
    },
    {
      "event": "mentioned",
      "id": 9382163187,
      "node_id": "MEE_lADOABII585mkN9gzwAAAAIvOHLz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9382163187",
      "actor": {
        "login": "erikarvstedt",
        "id": 36110478,
        "node_id": "MDQ6VXNlcjM2MTEwNDc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/36110478?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/erikarvstedt",
        "html_url": "https://github.com/erikarvstedt",
        "followers_url": "https://api.github.com/users/erikarvstedt/followers",
        "following_url": "https://api.github.com/users/erikarvstedt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/erikarvstedt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/erikarvstedt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/erikarvstedt/subscriptions",
        "organizations_url": "https://api.github.com/users/erikarvstedt/orgs",
        "repos_url": "https://api.github.com/users/erikarvstedt/repos",
        "events_url": "https://api.github.com/users/erikarvstedt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/erikarvstedt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T19:26:08Z"
    },
    {
      "event": "subscribed",
      "id": 9382163206,
      "node_id": "SE_lADOABII585mkN9gzwAAAAIvOHMG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9382163206",
      "actor": {
        "login": "erikarvstedt",
        "id": 36110478,
        "node_id": "MDQ6VXNlcjM2MTEwNDc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/36110478?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/erikarvstedt",
        "html_url": "https://github.com/erikarvstedt",
        "followers_url": "https://api.github.com/users/erikarvstedt/followers",
        "following_url": "https://api.github.com/users/erikarvstedt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/erikarvstedt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/erikarvstedt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/erikarvstedt/subscriptions",
        "organizations_url": "https://api.github.com/users/erikarvstedt/orgs",
        "repos_url": "https://api.github.com/users/erikarvstedt/repos",
        "events_url": "https://api.github.com/users/erikarvstedt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/erikarvstedt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T19:26:08Z"
    },
    {
      "event": "commented",
      "id": 1569074534,
      "node_id": "IC_kwDOABII585dhi1m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1569074534",
      "actor": {
        "login": "erikarvstedt",
        "id": 36110478,
        "node_id": "MDQ6VXNlcjM2MTEwNDc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/36110478?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/erikarvstedt",
        "html_url": "https://github.com/erikarvstedt",
        "followers_url": "https://api.github.com/users/erikarvstedt/followers",
        "following_url": "https://api.github.com/users/erikarvstedt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/erikarvstedt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/erikarvstedt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/erikarvstedt/subscriptions",
        "organizations_url": "https://api.github.com/users/erikarvstedt/orgs",
        "repos_url": "https://api.github.com/users/erikarvstedt/repos",
        "events_url": "https://api.github.com/users/erikarvstedt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/erikarvstedt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T20:43:30Z",
      "updated_at": "2023-05-30T21:12:26Z",
      "author_association": "NONE",
      "body": "@Crypt-iQ, the slow progress of `importmulti` is indeed a separate issue. Maybe it has existed before and was just uncovered by https://github.com/bitcoin/bitcoin/pull/26742. I'll check this later.\r\nI've updated my previous post. ",
      "user": {
        "login": "erikarvstedt",
        "id": 36110478,
        "node_id": "MDQ6VXNlcjM2MTEwNDc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/36110478?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/erikarvstedt",
        "html_url": "https://github.com/erikarvstedt",
        "followers_url": "https://api.github.com/users/erikarvstedt/followers",
        "following_url": "https://api.github.com/users/erikarvstedt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/erikarvstedt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/erikarvstedt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/erikarvstedt/subscriptions",
        "organizations_url": "https://api.github.com/users/erikarvstedt/orgs",
        "repos_url": "https://api.github.com/users/erikarvstedt/repos",
        "events_url": "https://api.github.com/users/erikarvstedt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/erikarvstedt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1569074534",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722"
    },
    {
      "event": "mentioned",
      "id": 9382834480,
      "node_id": "MEE_lADOABII585mkN9gzwAAAAIvQrEw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9382834480",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T20:43:31Z"
    },
    {
      "event": "subscribed",
      "id": 9382834492,
      "node_id": "SE_lADOABII585mkN9gzwAAAAIvQrE8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9382834492",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-30T20:43:31Z"
    },
    {
      "event": "commented",
      "id": 1569922589,
      "node_id": "IC_kwDOABII585dkx4d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1569922589",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T10:23:30Z",
      "updated_at": "2023-05-31T10:23:30Z",
      "author_association": "MEMBER",
      "body": "> @willcl-ark can you find what libevent version you're using?\r\n\r\nI am using libevent 2.1.12 (like TheStack)",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1569922589",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722"
    },
    {
      "event": "mentioned",
      "id": 9388371194,
      "node_id": "MEE_lADOABII585mkN9gzwAAAAIvlyz6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9388371194",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T10:23:31Z"
    },
    {
      "event": "subscribed",
      "id": 9388371219,
      "node_id": "SE_lADOABII585mkN9gzwAAAAIvly0T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9388371219",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T10:23:31Z"
    },
    {
      "event": "commented",
      "id": 1570668159,
      "node_id": "IC_kwDOABII585dnn5_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1570668159",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T17:56:30Z",
      "updated_at": "2023-05-31T17:56:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "I get this when compiling with both gcc and clang-16. I am also using libevent 2.1.12. Is there anything unique about your setup @willcl-ark ? Also, did you Ctrl-C the `waitforblockheight` command before trying to stop bitcoind?",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/27722#issuecomment-1570668159",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27722"
    },
    {
      "event": "mentioned",
      "id": 9393658143,
      "node_id": "MEE_lADOABII585mkN9gzwAAAAIv59kf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9393658143",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T17:56:30Z"
    },
    {
      "event": "subscribed",
      "id": 9393658159,
      "node_id": "SE_lADOABII585mkN9gzwAAAAIv59kv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9393658159",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T17:56:30Z"
    },
    {
      "event": "milestoned",
      "id": 9400997628,
      "node_id": "MIE_lADOABII585mkN9gzwAAAAIwV9b8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9400997628",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-01T09:53:05Z",
      "milestone": {
        "title": "25.1"
      }
    }
  ]
}