{
  "type": "issue",
  "issue": {
    "id": 957361247,
    "node_id": "MDU6SXNzdWU5NTczNjEyNDc=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/22596",
    "number": 22596,
    "state": "closed",
    "state_reason": "completed",
    "title": "Coin database inconsistencies found",
    "body": "\r\n**Describe the issue**\r\nCore can not check past blocks correctly\r\n\r\n**What behavior did you expect?**\r\nExpected setting checkblocks=0, checklevel=6, and assumevalid=0 to result in verification that the chain is valid. And that it would take nigh upon forever. It doesn‚Äôt. It poops out in about 12 hours. \r\n\r\n**What was the actual behavior** \r\nDebug.log highlights:\r\n(Note: Block height at time of message was 693086)\r\ninit message: Verifying blocks‚Ä¶\r\nVerifying last 693086 blocks at level 4\r\n[0%]‚Ä¶ [10%]‚Ä¶ [20%]‚Ä¶ [30%]‚Ä¶ [40%]‚Ä¶ERROR: VerifyDB(): *** coin database inconsistencies found (last 601365 blocks, 142571 good transactions before that)\r\n\r\nCorrupted block database detected.\r\n\r\n**How reliably can you reproduce the issue, what are the steps to do so?**\r\n100% reproducible. To reproduce, just try rechecking the chain. I don‚Äôt know the fastest way to do this, in fact, I‚Äôm not even entirely sure how many checklevels there even are but I read 6 on stack exchange‚Ä¶anyhow, just add this to bitcoin.conf and restart node:\r\n\r\nassumevalid=0\r\ncheckblocks=0\r\nchecklevel=6\r\n\r\n**What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)?**\r\n0.21.1.0; self compiled. I got the code two different t ways: over Internet using git at the command line and from the friendly lizards working for blockstream in space via satellite using blocksat-cli.\r\n\r\n**What type of machine are you observing the error on (OS/CPU and disk type)?**\r\nI‚Äôve checked two intel architecture nodes I have running. Both are little intel NUCs.\r\nUbuntu 20.04 Lts/2.6 ghz intel i7 underclocked at 2.4 GHz max just in case/16 and 32 GB RAM at conservative BIOS settings/NVME SSD (tried it on one node with a single Samsung 970 evo plus formatted ext4 filesystem and another with 2 Samsung 980 NVME in raid 1 configuration‚Ä¶also ext4)\r\n\r\n**What is your operating system and its version? If Linux, what is your desktop environment and graphical shell?**\r\nWhatever is default for Ubuntu \r\n\r\n**Any extra information that might be useful in the debugging process.**\r\nSomeone far smarter than me can reproduce this too (dflate)\r\n\r\nSomehow relates to this‚Ä¶see explorers disagreeing (via dflate)\r\n\r\nhttps://blockstream.info/tx/d5d27987d2a3dfc724e359870c6644b40e497bdc0589a033220fe15429d88599?expand\r\n\r\nhttps://explorer.bitcoin.com/btc/tx/d5d27987d2a3dfc724e359870c6644b40e497bdc0589a033220fe15429d88599\r\n\r\n\r\nOtherwise, not yet. I keep my node off the internet, because, you know, satellite and stuff‚Ä¶but I‚Äôve typed out by hand what seems relevant above. \r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\n",
    "user": {
      "login": "bg002h",
      "id": 3718063,
      "node_id": "MDQ6VXNlcjM3MTgwNjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3718063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bg002h",
      "html_url": "https://github.com/bg002h",
      "followers_url": "https://api.github.com/users/bg002h/followers",
      "following_url": "https://api.github.com/users/bg002h/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/bg002h/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/bg002h/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/bg002h/subscriptions",
      "organizations_url": "https://api.github.com/users/bg002h/orgs",
      "repos_url": "https://api.github.com/users/bg002h/repos",
      "events_url": "https://api.github.com/users/bg002h/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/bg002h/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 8,
    "closed_at": "2022-10-13T18:16:28Z",
    "created_at": "2021-08-01T01:55:02Z",
    "updated_at": "2022-10-13T18:16:28Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 890438290,
      "node_id": "IC_kwDOABII5841EwKS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890438290",
      "actor": {
        "login": "snpoold",
        "id": 78295570,
        "node_id": "MDQ6VXNlcjc4Mjk1NTcw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78295570?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/snpoold",
        "html_url": "https://github.com/snpoold",
        "followers_url": "https://api.github.com/users/snpoold/followers",
        "following_url": "https://api.github.com/users/snpoold/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/snpoold/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/snpoold/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/snpoold/subscriptions",
        "organizations_url": "https://api.github.com/users/snpoold/orgs",
        "repos_url": "https://api.github.com/users/snpoold/repos",
        "events_url": "https://api.github.com/users/snpoold/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/snpoold/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-01T02:51:19Z",
      "updated_at": "2021-08-01T02:51:19Z",
      "author_association": "NONE",
      "body": "Blocks 91812 and 91722 coinbase spends cause that issue.\r\nI can confirm the observation.\r\nWhen the full scan reach deep down into the data at block 91721 and try to invalidate older blocks in DisconnectBlock\r\n... some memories came up, when digging way back into November 2010 :woman_shrugging: ",
      "user": {
        "login": "snpoold",
        "id": 78295570,
        "node_id": "MDQ6VXNlcjc4Mjk1NTcw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78295570?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/snpoold",
        "html_url": "https://github.com/snpoold",
        "followers_url": "https://api.github.com/users/snpoold/followers",
        "following_url": "https://api.github.com/users/snpoold/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/snpoold/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/snpoold/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/snpoold/subscriptions",
        "organizations_url": "https://api.github.com/users/snpoold/orgs",
        "repos_url": "https://api.github.com/users/snpoold/repos",
        "events_url": "https://api.github.com/users/snpoold/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/snpoold/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890438290",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596"
    },
    {
      "event": "commented",
      "id": 890442984,
      "node_id": "IC_kwDOABII5841ExTo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890442984",
      "actor": {
        "login": "bg002h",
        "id": 3718063,
        "node_id": "MDQ6VXNlcjM3MTgwNjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3718063?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bg002h",
        "html_url": "https://github.com/bg002h",
        "followers_url": "https://api.github.com/users/bg002h/followers",
        "following_url": "https://api.github.com/users/bg002h/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bg002h/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bg002h/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bg002h/subscriptions",
        "organizations_url": "https://api.github.com/users/bg002h/orgs",
        "repos_url": "https://api.github.com/users/bg002h/repos",
        "events_url": "https://api.github.com/users/bg002h/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bg002h/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-01T03:45:19Z",
      "updated_at": "2021-08-01T03:45:19Z",
      "author_association": "NONE",
      "body": "> Blocks 91812 and 91722 coinbase spends cause that issue.\r\n> I can confirm the observation.\r\n> When the full scan reach deep down into the data at block 91721 and try to invalidate older blocks in DisconnectBlock\r\n> ... some memories came up, when digging way back into November 2010 ü§∑‚Äç‚ôÄÔ∏è\r\n\r\nMaybe related to the overflow thing? https://bitcointalk.org/index.php?topic=822.0",
      "user": {
        "login": "bg002h",
        "id": 3718063,
        "node_id": "MDQ6VXNlcjM3MTgwNjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3718063?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bg002h",
        "html_url": "https://github.com/bg002h",
        "followers_url": "https://api.github.com/users/bg002h/followers",
        "following_url": "https://api.github.com/users/bg002h/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bg002h/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bg002h/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bg002h/subscriptions",
        "organizations_url": "https://api.github.com/users/bg002h/orgs",
        "repos_url": "https://api.github.com/users/bg002h/repos",
        "events_url": "https://api.github.com/users/bg002h/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bg002h/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890442984",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596"
    },
    {
      "event": "commented",
      "id": 890454196,
      "node_id": "IC_kwDOABII5841E0C0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890454196",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-01T05:32:00Z",
      "updated_at": "2021-08-01T05:32:00Z",
      "author_association": "MEMBER",
      "body": "These are the two BIP30 exceptions, where coinbases were overwritten.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890454196",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596"
    },
    {
      "event": "commented",
      "id": 890491604,
      "node_id": "IC_kwDOABII5841E9LU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890491604",
      "actor": {
        "login": "snpoold",
        "id": 78295570,
        "node_id": "MDQ6VXNlcjc4Mjk1NTcw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78295570?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/snpoold",
        "html_url": "https://github.com/snpoold",
        "followers_url": "https://api.github.com/users/snpoold/followers",
        "following_url": "https://api.github.com/users/snpoold/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/snpoold/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/snpoold/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/snpoold/subscriptions",
        "organizations_url": "https://api.github.com/users/snpoold/orgs",
        "repos_url": "https://api.github.com/users/snpoold/repos",
        "events_url": "https://api.github.com/users/snpoold/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/snpoold/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-01T10:23:12Z",
      "updated_at": "2021-08-01T10:23:12Z",
      "author_association": "NONE",
      "body": "> These are the two BIP30 exceptions, where coinbases were overwritten.\r\n\r\nAlthough it would be nice if we could skip the detection by setting option` checkblocks=0` more gracefully and not error break and maybe just a hint to BIP30, what we hardcode anyway in IBD?  \r\n\r\n```diff \r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex d1dd4f472..49158b588 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -3980,8 +3980,13 @@\r\n         if (ShutdownRequested()) return true;\r\n     }\r\n-    if (pindexFailure)\r\n-        return error(\"VerifyDB(): *** coin database inconsistencies found (last %i blocks, %i good transactions before that)\\n\", chainstate.m_chain.Height() - pindexFailure->nHeight + 1, nGoodTransactions);\r\n+    if (pindexFailure) {\r\n+        if (pindexFailure->nHeight == 91722) {\r\n+            LogPrintf(\"VerifyDB(): skiping BIP30 exeption at height %d\\n\", pindexFailure->nHeight);\r\n+               } else {\r\n+            return error(\"VerifyDB(): *** coin database inconsistencies found (last %i blocks, %i accumulated good transactions vtx size before that)\\n\", chainstate.m_chain.Height() - pindexFailure->nHeight + 1, nGoodTransactions);\r\n+        }\r\n+    }\r\n\r\n```",
      "user": {
        "login": "snpoold",
        "id": 78295570,
        "node_id": "MDQ6VXNlcjc4Mjk1NTcw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78295570?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/snpoold",
        "html_url": "https://github.com/snpoold",
        "followers_url": "https://api.github.com/users/snpoold/followers",
        "following_url": "https://api.github.com/users/snpoold/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/snpoold/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/snpoold/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/snpoold/subscriptions",
        "organizations_url": "https://api.github.com/users/snpoold/orgs",
        "repos_url": "https://api.github.com/users/snpoold/repos",
        "events_url": "https://api.github.com/users/snpoold/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/snpoold/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890491604",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596"
    },
    {
      "event": "commented",
      "id": 890530493,
      "node_id": "IC_kwDOABII5841FGq9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890530493",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-01T14:27:08Z",
      "updated_at": "2021-08-01T14:27:08Z",
      "author_association": "MEMBER",
      "body": "Sure, this is a bug, and should be fixed. I'm just pointing out what it is related to.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890530493",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596"
    },
    {
      "event": "commented",
      "id": 890542786,
      "node_id": "IC_kwDOABII5841FJrC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890542786",
      "actor": {
        "login": "bg002h",
        "id": 3718063,
        "node_id": "MDQ6VXNlcjM3MTgwNjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3718063?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bg002h",
        "html_url": "https://github.com/bg002h",
        "followers_url": "https://api.github.com/users/bg002h/followers",
        "following_url": "https://api.github.com/users/bg002h/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bg002h/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bg002h/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bg002h/subscriptions",
        "organizations_url": "https://api.github.com/users/bg002h/orgs",
        "repos_url": "https://api.github.com/users/bg002h/repos",
        "events_url": "https://api.github.com/users/bg002h/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bg002h/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-01T15:49:33Z",
      "updated_at": "2021-08-02T15:05:42Z",
      "author_association": "NONE",
      "body": "> These are the two BIP30 exceptions, where coinbases were overwritten.\r\n\r\nI see. I‚Äôm rather glad to hear this is expected behavior! Is the code different when validating from\r\nGenesis to tip different than tip to Genesis (eg hard coded ~~deception~~ exception in IBD) or is it the over writing of a txid that makes it impossible to validate ‚Äúbackwards‚Äù beyond a certain point? \r\n\r\nI can‚Äôt see how this has any practical impact on the network (other than someone wanting to write  a click baity FUD hysteria ‚Äúnews‚Äù article). Bitcoin is quirky like that. Things aren‚Äôt always as simple as they seem. ",
      "user": {
        "login": "bg002h",
        "id": 3718063,
        "node_id": "MDQ6VXNlcjM3MTgwNjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3718063?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bg002h",
        "html_url": "https://github.com/bg002h",
        "followers_url": "https://api.github.com/users/bg002h/followers",
        "following_url": "https://api.github.com/users/bg002h/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bg002h/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bg002h/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bg002h/subscriptions",
        "organizations_url": "https://api.github.com/users/bg002h/orgs",
        "repos_url": "https://api.github.com/users/bg002h/repos",
        "events_url": "https://api.github.com/users/bg002h/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bg002h/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-890542786",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596"
    },
    {
      "event": "commented",
      "id": 891069454,
      "node_id": "IC_kwDOABII5841HKQO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891069454",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-02T14:22:05Z",
      "updated_at": "2021-08-02T14:22:05Z",
      "author_association": "MEMBER",
      "body": "> Is the code different when validating from\r\nGenesis to tip different than tip to Genesis (eg hard coded deception in IBD) or is it the over writing of a txid that makes it impossible to validate ‚Äúbackwards‚Äù beyond a certain point?\r\n\r\nYes, there is special handling of the duplicate coinbase transactions in `ConnectBlock()`:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b620b2d58a55a88ad21da70cb2000863ef17b651/src/validation.cpp#L1758-L1759\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b620b2d58a55a88ad21da70cb2000863ef17b651/src/validation.cpp#L1825-L1834\r\n\r\nThere is no such special handling in the analogous code `DisconnectBlock()` which checks that the ouputs of the transactions exist in the UTXO set:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b620b2d58a55a88ad21da70cb2000863ef17b651/src/validation.cpp#L1535-L1544\r\n\r\nWhich means that when `VerifyDB()` tries to rewind the effects of the blocks, it finds the inconsistency.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-891069454",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596"
    },
    {
      "event": "commented",
      "id": 891114177,
      "node_id": "IC_kwDOABII5841HVLB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891114177",
      "actor": {
        "login": "bg002h",
        "id": 3718063,
        "node_id": "MDQ6VXNlcjM3MTgwNjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3718063?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bg002h",
        "html_url": "https://github.com/bg002h",
        "followers_url": "https://api.github.com/users/bg002h/followers",
        "following_url": "https://api.github.com/users/bg002h/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bg002h/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bg002h/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bg002h/subscriptions",
        "organizations_url": "https://api.github.com/users/bg002h/orgs",
        "repos_url": "https://api.github.com/users/bg002h/repos",
        "events_url": "https://api.github.com/users/bg002h/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bg002h/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-02T15:21:23Z",
      "updated_at": "2021-08-02T15:21:23Z",
      "author_association": "NONE",
      "body": "This seems like a bug worth preserving for someone looking to cut their teeth on Core. I‚Äôm just a physician with rather modest coding skills and this has even my interest piqued‚Ä¶maybe someone more qualified (and/or less busy) can pick up this ball and run with it. \r\n\r\nAll that said, performance for checking all the blocks seems really rather good. I thought it would take a day or more, but it looks like it was gonna be about half that. There‚Äôs some deep magic going on to make this happen so quickly.  ",
      "user": {
        "login": "bg002h",
        "id": 3718063,
        "node_id": "MDQ6VXNlcjM3MTgwNjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3718063?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bg002h",
        "html_url": "https://github.com/bg002h",
        "followers_url": "https://api.github.com/users/bg002h/followers",
        "following_url": "https://api.github.com/users/bg002h/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bg002h/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bg002h/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bg002h/subscriptions",
        "organizations_url": "https://api.github.com/users/bg002h/orgs",
        "repos_url": "https://api.github.com/users/bg002h/repos",
        "events_url": "https://api.github.com/users/bg002h/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bg002h/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/22596#issuecomment-891114177",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22596"
    },
    {
      "event": "closed",
      "id": 7583928817,
      "node_id": "CE_lADOABII5845ECxfzwAAAAHECZHx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7583928817",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0384b194149305ffc8580ad6947e0471a36446ff",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/0384b194149305ffc8580ad6947e0471a36446ff",
      "created_at": "2022-10-13T18:16:28Z"
    }
  ]
}