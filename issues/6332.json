{
  "type": "issue",
  "issue": {
    "id": 90618428,
    "node_id": "MDU6SXNzdWU5MDYxODQyOA==",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6332",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6332/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6332/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6332/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/6332",
    "number": 6332,
    "state": "closed",
    "state_reason": "completed",
    "title": "Segmentation fault on bitcoind or bitcoin-qt startup (64bit Linux)",
    "body": "I cannot start the application due to a segmentation fault on 64 bit Linux (Ubuntu 14.04). This applies to both bitcoind or bitcoin-qt. For reference, 'uname -a' outputs '3.16.0-41-generic'.\n\nThe issue happens with the current binary download of bitcoin core from bitcoin.org and from my own compiled version, in which --enable-hardened was the only ./configure flag I used. Using the compiled version I collected the following backtraces from bitcoind and bitcoin-qt.\n\nHere are the gdb bt results following the seg fault for bitcoind:\n#0  CBlockIndex::GetAncestor (this=<optimized out>, height=29985) at chain.cpp:85\n#1  0x00005555556b5864 in CBlockIndex::BuildSkip (this=this@entry=0x555556b5d980) at chain.cpp:108\n#2  0x00005555555ddeb2 in LoadBlockIndexDB () at main.cpp:3190\n#3  0x00005555555deb05 in LoadBlockIndex () at main.cpp:3381\n#4  0x00005555555a9955 in AppInit2 (threadGroup=..., scheduler=...) at init.cpp:1142\n#5  0x000055555558f07d in AppInit (argc=<optimized out>, argv=<optimized out>) at bitcoind.cpp:147\n#6  0x000055555558667f in main (argc=1, argv=0x7fffffffe068) at bitcoind.cpp:176\n\nAnd here are the gdb bt results following the seg fault for bitcoin-qt\n#0  CBlockIndex::GetAncestor (this=<optimized out>, height=29985) at chain.cpp:85\n#1  0x00005555557b4064 in CBlockIndex::BuildSkip (this=this@entry=0x7fffc50857b0) at chain.cpp:108\n#2  0x00005555556e96c2 in LoadBlockIndexDB () at main.cpp:3190\n#3  0x00005555556ea315 in LoadBlockIndex () at main.cpp:3381\n#4  0x00005555556bf235 in AppInit2 (threadGroup=..., scheduler=...) at init.cpp:1142\n#5  0x00005555555c8fa7 in BitcoinCore::initialize (this=0x5555567c2390) at qt/bitcoin.cpp:263\n#6  0x00005555555c93f8 in BitcoinCore::qt_static_metacall (_o=0x5555567c2390, _id=<optimized out>, _a=0x5555567c2af0, _c=<optimized out>) at qt/bitcoin.moc:58\n#7  0x00007ffff5d6fc1e in QObject::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#8  0x00007ffff684be2c in QApplicationPrivate::notify_helper(QObject_, QEvent_) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#9  0x00007ffff68524a0 in QApplication::notify(QObject_, QEvent_) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#10 0x00007ffff5d574dd in QCoreApplication::notifyInternal(QObject_, QEvent_) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#11 0x00007ffff5d5ab3d in QCoreApplicationPrivate::sendPostedEvents(QObject_, int, QThreadData_) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#12 0x00007ffff5d84f83 in ?? () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#13 0x00007ffff31cae04 in g_main_context_dispatch () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#14 0x00007ffff31cb048 in ?? () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#15 0x00007ffff31cb0ec in g_main_context_iteration () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#16 0x00007ffff5d847a1 in QEventDispatcherGlib::processEvents(QFlagsQEventLoop::ProcessEventsFlag) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#17 0x00007ffff5d560af in QEventLoop::processEvents(QFlagsQEventLoop::ProcessEventsFlag) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#18 0x00007ffff5d563a5 in QEventLoop::exec(QFlagsQEventLoop::ProcessEventsFlag) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#19 0x00007ffff5c52c5f in QThread::exec() () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#20 0x00007ffff5c5532f in ?? () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#21 0x00007ffff54b6182 in start_thread (arg=0x7fffd5fef700) at pthread_create.c:312\n#22 0x00007ffff3be047d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nFor bitcoind, the seg fault occurs right after this output explaining the RPC password:\nIf the file does not exist, create it with owner-readable-only file permissions.\nIt is also recommended to set alertnotify so you are notified of problems;\nfor example: alertnotify=echo %s | mail -s \"Bitcoin Alert\" admin@foo.com\n",
    "user": {
      "login": "primezeta",
      "id": 6187832,
      "node_id": "MDQ6VXNlcjYxODc4MzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6187832?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/primezeta",
      "html_url": "https://github.com/primezeta",
      "followers_url": "https://api.github.com/users/primezeta/followers",
      "following_url": "https://api.github.com/users/primezeta/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/primezeta/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/primezeta/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/primezeta/subscriptions",
      "organizations_url": "https://api.github.com/users/primezeta/orgs",
      "repos_url": "https://api.github.com/users/primezeta/repos",
      "events_url": "https://api.github.com/users/primezeta/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/primezeta/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 2,
    "closed_at": "2015-07-07T02:28:11Z",
    "created_at": "2015-06-24T09:11:57Z",
    "updated_at": "2021-09-08T12:22:22Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 118337159,
      "node_id": "MDEyOklzc3VlQ29tbWVudDExODMzNzE1OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/118337159",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-07-03T12:38:54Z",
      "updated_at": "2015-07-03T12:38:54Z",
      "author_association": "MEMBER",
      "body": "Which version?\n\nDoes the segfault still happen if you set a RPC password?\n",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/6332#issuecomment-118337159",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6332"
    },
    {
      "event": "commented",
      "id": 119050790,
      "node_id": "MDEyOklzc3VlQ29tbWVudDExOTA1MDc5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/119050790",
      "actor": {
        "login": "primezeta",
        "id": 6187832,
        "node_id": "MDQ6VXNlcjYxODc4MzI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6187832?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/primezeta",
        "html_url": "https://github.com/primezeta",
        "followers_url": "https://api.github.com/users/primezeta/followers",
        "following_url": "https://api.github.com/users/primezeta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/primezeta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/primezeta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/primezeta/subscriptions",
        "organizations_url": "https://api.github.com/users/primezeta/orgs",
        "repos_url": "https://api.github.com/users/primezeta/repos",
        "events_url": "https://api.github.com/users/primezeta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/primezeta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-07-07T02:28:11Z",
      "updated_at": "2015-07-07T02:28:11Z",
      "author_association": "NONE",
      "body": "It was from the head revision from around the time of my post. Unfortunately I can't find the hash of that revision, but I just cloned the latest and the resulting binary does not have a segmentation fault.\n",
      "user": {
        "login": "primezeta",
        "id": 6187832,
        "node_id": "MDQ6VXNlcjYxODc4MzI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6187832?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/primezeta",
        "html_url": "https://github.com/primezeta",
        "followers_url": "https://api.github.com/users/primezeta/followers",
        "following_url": "https://api.github.com/users/primezeta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/primezeta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/primezeta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/primezeta/subscriptions",
        "organizations_url": "https://api.github.com/users/primezeta/orgs",
        "repos_url": "https://api.github.com/users/primezeta/repos",
        "events_url": "https://api.github.com/users/primezeta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/primezeta/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/6332#issuecomment-119050790",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6332"
    },
    {
      "event": "closed",
      "id": 349256206,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzQ5MjU2MjA2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/349256206",
      "actor": {
        "login": "primezeta",
        "id": 6187832,
        "node_id": "MDQ6VXNlcjYxODc4MzI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6187832?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/primezeta",
        "html_url": "https://github.com/primezeta",
        "followers_url": "https://api.github.com/users/primezeta/followers",
        "following_url": "https://api.github.com/users/primezeta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/primezeta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/primezeta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/primezeta/subscriptions",
        "organizations_url": "https://api.github.com/users/primezeta/orgs",
        "repos_url": "https://api.github.com/users/primezeta/repos",
        "events_url": "https://api.github.com/users/primezeta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/primezeta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-07-07T02:28:11Z"
    },
    {
      "event": "locked",
      "id": 5271948639,
      "node_id": "LOE_lADOABII584FZro8zwAAAAE6O41f",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271948639",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:22:22Z",
      "lock_reason": "resolved"
    }
  ]
}