{
  "type": "issue",
  "issue": {
    "id": 1190867105,
    "node_id": "I_kwDOABII585G-zCh",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24744",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24744/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24744/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24744/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/24744",
    "number": 24744,
    "state": "closed",
    "state_reason": "completed",
    "title": "How to get rid of \" WARNING: the RPC server is not safe to expose to untrusted networks such as the public internet\"",
    "body": "I am using the container [kylemanna](https://hub.docker.com/r/kylemanna/bitcoind/).\r\nIn the `bitcoin.conf` I have one entry\r\n`rpcallowip=192.168.1.0/24`\r\n\r\nLogs are:\r\n```\r\n+ cat /bitcoin/.bitcoin/bitcoin.conf\r\n+ echo 'Initialization completed successfully'\r\nrpcallowip=192.168.1.0/24Initialization completed successfully\r\n+ [ 0 -eq 0 ]\r\n+ set -- -rpcbind=:8332 -rpcallowip=0.0.0.0/0\r\n+ exec bitcoind -rpcbind=:8332 -rpcallowip=0.0.0.0/0\r\n2022-04-03T08:38:57Z Bitcoin Core version v22.0.0 (release build)\r\n2022-04-03T08:38:57Z Assuming ancestors of block 00000000000000000008a89e854d57e5667df88f1cdef6fde2fbca1de5b639ad have valid signatures.\r\n2022-04-03T08:38:57Z Setting nMinimumChainWork=00000000000000000000000000000000000000001fa4663bbbe19f82de910280\r\n2022-04-03T08:38:57Z Using the 'shani(1way,2way)' SHA256 implementation\r\n2022-04-03T08:38:57Z Using RdSeed as additional entropy source\r\n2022-04-03T08:38:57Z Using RdRand as an additional entropy source\r\n2022-04-03T08:38:57Z Default data directory /bitcoin/.bitcoin\r\n2022-04-03T08:38:57Z Using data directory /bitcoin/.bitcoin\r\n2022-04-03T08:38:57Z Config file: /bitcoin/.bitcoin/bitcoin.conf\r\n2022-04-03T08:38:57Z Config file arg: rpcallowip=\"192.168.1.0/24\"\r\n2022-04-03T08:38:57Z Config file arg: txindex=\"1\"\r\n2022-04-03T08:38:57Z Command-line arg: rpcallowip=\"0.0.0.0/0\"\r\n2022-04-03T08:38:57Z Command-line arg: rpcbind=****\r\n2022-04-03T08:38:57Z Using at most 125 automatic connections (1048576 file descriptors available)\r\n2022-04-03T08:38:57Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements\r\n2022-04-03T08:38:57Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements\r\n2022-04-03T08:38:57Z Script verification uses 1 additional threads\r\n2022-04-03T08:38:57Z scheduler thread start\r\n2022-04-03T08:38:57Z WARNING: the RPC server is not safe to expose to untrusted networks such as the public internet\r\n```\r\nI am trying to get rid of the  RPC server warning with many attempts playing with `rpcallowip` and `rpcbind`, but the warning keeps popping up.\r\n\r\nHow can I have a local LAN connection to the RPC server only? \r\nWhich settings do I need to put into `bitcoin.conf` to get rid of the warning?\r\n\r\nWhich commands take precedence? The cli commands of the container, or my settings in `bitcoin.conf`?",
    "user": {
      "login": "juxeii",
      "id": 4497675,
      "node_id": "MDQ6VXNlcjQ0OTc2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4497675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/juxeii",
      "html_url": "https://github.com/juxeii",
      "followers_url": "https://api.github.com/users/juxeii/followers",
      "following_url": "https://api.github.com/users/juxeii/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/juxeii/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/juxeii/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/juxeii/subscriptions",
      "organizations_url": "https://api.github.com/users/juxeii/orgs",
      "repos_url": "https://api.github.com/users/juxeii/repos",
      "events_url": "https://api.github.com/users/juxeii/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/juxeii/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "comments": 1,
    "closed_at": "2022-04-03T09:16:44Z",
    "created_at": "2022-04-03T08:50:16Z",
    "updated_at": "2022-04-11T12:51:24Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 1086819746,
      "node_id": "IC_kwDOABII585Ax42i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1086819746",
      "actor": {
        "login": "juxeii",
        "id": 4497675,
        "node_id": "MDQ6VXNlcjQ0OTc2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4497675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/juxeii",
        "html_url": "https://github.com/juxeii",
        "followers_url": "https://api.github.com/users/juxeii/followers",
        "following_url": "https://api.github.com/users/juxeii/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/juxeii/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/juxeii/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/juxeii/subscriptions",
        "organizations_url": "https://api.github.com/users/juxeii/orgs",
        "repos_url": "https://api.github.com/users/juxeii/repos",
        "events_url": "https://api.github.com/users/juxeii/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/juxeii/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-03T09:16:44Z",
      "updated_at": "2022-04-03T09:16:44Z",
      "author_association": "NONE",
      "body": "Answering my own question.\r\nI changed the `docker-compose` to\r\n```\r\nversion: '2'\r\nservices:\r\n  bitcoind:\r\n    image: kylemanna/bitcoind:latest\r\n    ports:\r\n      - 8333:8333\r\n      - 127.0.0.1:8332:8332\r\n    volumes:\r\n      - /volume1/docker/bitcoin:/bitcoin/.bitcoin\r\n    command: \r\n      bash -c \"bitcoind -printtoconsole\"\r\n```\r\nAnd the` bitcoin.conf` to\r\n```\r\ntxindex=1\r\nrpcallowip=192.168.1.0/24\r\nrpcbind=127.0.0.1\r\n```\r\nAll warnings are gone now and I can issue commands like `bitcoin-cli -getinfo` without problems.\r\nNot sure if these settings make sense, but they are working for now.\r\n\r\nFinally, here is the startup log:\r\n```\r\n2022-04-03T09:10:42Z Bitcoin Core version v22.0.0 (release build)\r\n2022-04-03T09:10:42Z Assuming ancestors of block 00000000000000000008a89e854d57e5667df88f1cdef6fde2fbca1de5b639ad have valid signatures.\r\n2022-04-03T09:10:42Z Setting nMinimumChainWork=00000000000000000000000000000000000000001fa4663bbbe19f82de910280\r\n2022-04-03T09:10:42Z Using the 'shani(1way,2way)' SHA256 implementation\r\n2022-04-03T09:10:42Z Using RdSeed as additional entropy source\r\n2022-04-03T09:10:42Z Using RdRand as an additional entropy source\r\n2022-04-03T09:10:42Z Default data directory /bitcoin/.bitcoin\r\n2022-04-03T09:10:42Z Using data directory /bitcoin/.bitcoin\r\n2022-04-03T09:10:42Z Config file: /bitcoin/.bitcoin/bitcoin.conf\r\n2022-04-03T09:10:42Z Config file arg: rpcallowip=\"192.168.1.0/24\"\r\n2022-04-03T09:10:42Z Config file arg: rpcbind=****\r\n2022-04-03T09:10:42Z Config file arg: txindex=\"1\"\r\n2022-04-03T09:10:42Z Command-line arg: printtoconsole=\"\"\r\n2022-04-03T09:10:42Z Using at most 125 automatic connections (1048576 file descriptors available)\r\n2022-04-03T09:10:42Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements\r\n2022-04-03T09:10:42Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements\r\n2022-04-03T09:10:42Z Script verification uses 1 additional threads\r\n2022-04-03T09:10:42Z scheduler thread start\r\n2022-04-03T09:10:42Z HTTP: creating work queue of depth 16\r\n2022-04-03T09:10:42Z Using random cookie authentication.\r\n2022-04-03T09:10:42Z Generated RPC authentication cookie /bitcoin/.bitcoin/.cookie\r\n2022-04-03T09:10:42Z HTTP: starting 4 worker threads\r\n2022-04-03T09:10:42Z Using wallet directory /bitcoin/.bitcoin\r\n2022-04-03T09:10:42Z init message: Verifying wallet(s)…\r\n2022-04-03T09:10:42Z init message: Loading banlist…\r\n2022-04-03T09:10:42Z SetNetworkActive: true\r\n2022-04-03T09:10:42Z Using /16 prefix for IP bucketing\r\n2022-04-03T09:10:42Z Cache configuration:\r\n2022-04-03T09:10:42Z * Using 2.0 MiB for block index database\r\n2022-04-03T09:10:42Z * Using 56.0 MiB for transaction index database\r\n2022-04-03T09:10:42Z * Using 8.0 MiB for chain state database\r\n2022-04-03T09:10:42Z * Using 384.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\r\n2022-04-03T09:10:42Z init message: Loading block index…\r\n2022-04-03T09:10:42Z Switching active chainstate to Chainstate [ibd] @ height -1 (null)\r\n2022-04-03T09:10:42Z Opening LevelDB in /bitcoin/.bitcoin/blocks/index\r\n2022-04-03T09:10:42Z Opened LevelDB successfully\r\n2022-04-03T09:10:42Z Using obfuscation key for /bitcoin/.bitcoin/blocks/index: 0000000000000000\r\n2022-04-03T09:10:53Z LoadBlockIndexDB: last block file = 2984\r\n2022-04-03T09:10:53Z LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=67, size=64923785, heights=730154...730220, time=2022-04-02...2022-04-03)\r\n2022-04-03T09:10:53Z Checking all blk files are present...\r\n2022-04-03T09:10:53Z Opening LevelDB in /bitcoin/.bitcoin/chainstate\r\n2022-04-03T09:10:53Z Opened LevelDB successfully\r\n2022-04-03T09:10:53Z Using obfuscation key for /bitcoin/.bitcoin/chainstate: 56f4126eb434d41e\r\n2022-04-03T09:10:54Z Loaded best chain: hashBestChain=0000000000000000000310e42d8fbcbe9799e297892fb42d1706dedf09a9cd57 height=730220 date=2022-04-03T08:56:55Z progress=0.999997\r\n2022-04-03T09:10:54Z init message: Verifying blocks…\r\n2022-04-03T09:10:54Z Verifying last 6 blocks at level 3\r\n2022-04-03T09:10:54Z [0%]...[16%]...[33%]...[50%]...[66%]...[83%]...[99%]...[DONE].\r\n2022-04-03T09:11:00Z No coin database inconsistencies in last 6 blocks (6589 transactions)\r\n2022-04-03T09:11:00Z  block index           17470ms\r\n2022-04-03T09:11:00Z Opening LevelDB in /bitcoin/.bitcoin/indexes/txindex\r\n2022-04-03T09:11:00Z Opened LevelDB successfully\r\n2022-04-03T09:11:00Z Using obfuscation key for /bitcoin/.bitcoin/indexes/txindex: 0000000000000000\r\n2022-04-03T09:11:00Z txindex thread start\r\n2022-04-03T09:11:00Z loadblk thread start\r\n2022-04-03T09:11:00Z block tree size = 730240\r\n2022-04-03T09:11:00Z nBestHeight = 730220\r\n2022-04-03T09:11:00Z Syncing txindex with block chain from height 416439\r\n2022-04-03T09:11:00Z Bound to 127.0.0.1:8334\r\n2022-04-03T09:11:00Z Bound to [::]:8333\r\n2022-04-03T09:11:00Z torcontrol thread start\r\n2022-04-03T09:11:00Z Bound to 0.0.0.0:8333\r\n2022-04-03T09:11:00Z init message: Loading P2P addresses…\r\n2022-04-03T09:11:00Z Leaving InitialBlockDownload (latching to false)\r\n2022-04-03T09:11:01Z Loaded 66237 addresses from peers.dat  251ms\r\n2022-04-03T09:11:01Z Loaded 2 addresses from \"anchors.dat\"\r\n2022-04-03T09:11:01Z 2 block-relay-only anchors will be tried for connections.\r\n2022-04-03T09:11:01Z init message: Starting network threads…\r\n2022-04-03T09:11:01Z init message: Done loading\r\n2022-04-03T09:11:01Z addcon thread start\r\n2022-04-03T09:11:01Z opencon thread start\r\n2022-04-03T09:11:01Z msghand thread start\r\n2022-04-03T09:11:01Z dnsseed thread start\r\n2022-04-03T09:11:01Z Waiting 300 seconds before querying DNS seeds.\r\n2022-04-03T09:11:01Z net thread start\r\n2022-04-03T09:11:01Z New outbound peer connected: version: 70016, blocks=730220, peer=4 (block-relay-only)\r\n2022-04-03T09:11:02Z New outbound peer connected: version: 70016, blocks=730220, peer=5 (block-relay-only)\r\n2022-04-03T09:11:14Z New outbound peer connected: version: 70016, blocks=730220, peer=9 (outbound-full-relay)\r\n2022-04-03T09:11:15Z New outbound peer connected: version: 70016, blocks=730220, peer=10 (outbound-full-relay)\r\n2022-04-03T09:11:15Z New outbound peer connected: version: 70015, blocks=730220, peer=11 (outbound-full-relay)\r\n2022-04-03T09:11:27Z Imported mempool transactions from disk: 4311 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\r\n2022-04-03T09:11:27Z loadblk thread exit\r\n2022-04-03T09:11:28Z New outbound peer connected: version: 70015, blocks=730220, peer=17 (outbound-full-relay)\r\n2022-04-03T09:11:29Z New outbound peer connected: version: 70015, blocks=730220, peer=18 (outbound-full-relay)\r\n2022-04-03T09:11:31Z Syncing txindex with block chain from height 416752\r\n2022-04-03T09:11:34Z P2P peers available. Skipped DNS seeding.\r\n2022-04-03T09:11:34Z dnsseed thread exit\r\n2022-04-03T09:11:35Z New outbound peer connected: version: 70016, blocks=730220, peer=23 (outbound-full-relay)\r\n2022-04-03T09:11:36Z New outbound peer connected: version: 70016, blocks=730220, peer=24 (outbound-full-relay)\r\n2022-04-03T09:11:36Z New outbound peer connected: version: 70016, blocks=730220, peer=25 (outbound-full-relay)\r\n2022-04-03T09:11:38Z New outbound peer connected: version: 70013, blocks=730220, peer=27 (outbound-full-relay)\r\n2022-04-03T09:11:39Z New outbound peer connected: version: 70016, blocks=730220, peer=26 (outbound-full-relay)\r\n2022-04-03T09:12:00Z New outbound peer connected: version: 70016, blocks=730220, peer=33 (outbound-full-relay)\r\n2022-04-03T09:12:01Z New outbound peer connected: version: 70016, blocks=730220, peer=35 (outbound-full-relay)\r\n2022-04-03T09:12:01Z New outbound peer connected: version: 70016, blocks=730220, peer=37 (outbound-full-relay)\r\n2022-04-03T09:12:13Z New outbound peer connected: version: 70016, blocks=730220, peer=41 (outbound-full-relay)\r\n2022-04-03T09:12:52Z Syncing txindex with block chain from height 417553\r\n2022-04-03T09:13:23Z Syncing txindex with block chain from height 418401\r\n2022-04-03T09:15:14Z Syncing txindex with block chain from height 419190\r\n```\r\n",
      "user": {
        "login": "juxeii",
        "id": 4497675,
        "node_id": "MDQ6VXNlcjQ0OTc2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4497675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/juxeii",
        "html_url": "https://github.com/juxeii",
        "followers_url": "https://api.github.com/users/juxeii/followers",
        "following_url": "https://api.github.com/users/juxeii/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/juxeii/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/juxeii/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/juxeii/subscriptions",
        "organizations_url": "https://api.github.com/users/juxeii/orgs",
        "repos_url": "https://api.github.com/users/juxeii/repos",
        "events_url": "https://api.github.com/users/juxeii/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/juxeii/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/24744#issuecomment-1086819746",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24744"
    },
    {
      "event": "closed",
      "id": 6357982025,
      "node_id": "CE_lADOABII585G-zChzwAAAAF69xtJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6357982025",
      "actor": {
        "login": "juxeii",
        "id": 4497675,
        "node_id": "MDQ6VXNlcjQ0OTc2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4497675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/juxeii",
        "html_url": "https://github.com/juxeii",
        "followers_url": "https://api.github.com/users/juxeii/followers",
        "following_url": "https://api.github.com/users/juxeii/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/juxeii/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/juxeii/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/juxeii/subscriptions",
        "organizations_url": "https://api.github.com/users/juxeii/orgs",
        "repos_url": "https://api.github.com/users/juxeii/repos",
        "events_url": "https://api.github.com/users/juxeii/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/juxeii/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-03T09:16:44Z"
    },
    {
      "event": "locked",
      "id": 6408730481,
      "node_id": "LOE_lADOABII585G-zChzwAAAAF9_Xdx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6408730481",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-11T12:51:24Z"
    }
  ]
}