{
  "type": "issue",
  "issue": {
    "id": 642463293,
    "node_id": "MDU6SXNzdWU2NDI0NjMyOTM=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19341",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19341/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19341/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19341/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/19341",
    "number": 19341,
    "state": "closed",
    "state_reason": "completed",
    "title": "rpc: pathHandlers is not protected by any locks (data race)",
    "body": "It is accessed by at least two threads:\r\n\r\n* `[shutoff]` in `UnregisterHTTPHandler`\r\n* `[http]` in `http_request_cb`",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 4,
    "closed_at": "2022-09-07T09:28:24Z",
    "created_at": "2020-06-20T23:30:01Z",
    "updated_at": "2022-09-07T09:28:24Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 3465078229,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDM0NjUwNzgyMjk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3465078229",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-20T23:30:01Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "labeled",
      "id": 3465078230,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDM0NjUwNzgyMzA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3465078230",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-20T23:30:01Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 647163561,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzE2MzU2MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647163561",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-21T18:23:58Z",
      "updated_at": "2020-06-21T18:23:58Z",
      "author_association": "MEMBER",
      "body": "Do we have logs from sanitizers?",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/19341#issuecomment-647163561",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19341"
    },
    {
      "event": "commented",
      "id": 647174674,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzE3NDY3NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647174674",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-21T20:00:54Z",
      "updated_at": "2020-06-21T20:00:54Z",
      "author_association": "MEMBER",
      "body": "Sanitizer logs can be generated if needed, but they shouldn't contain any additional information",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/19341#issuecomment-647174674",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19341"
    },
    {
      "event": "commented",
      "id": 1239101390,
      "node_id": "IC_kwDOABII585J2y_O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1239101390",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-07T08:52:44Z",
      "updated_at": "2022-09-07T08:52:44Z",
      "author_association": "MEMBER",
      "body": "Diff to produce sanitizer logs:\r\n\r\n```diff\r\ndiff --git a/test/functional/rpc_blockchain.py b/test/functional/rpc_blockchain.py\r\nindex d8147b3355..aff002577c 100755\r\n--- a/test/functional/rpc_blockchain.py\r\n+++ b/test/functional/rpc_blockchain.py\r\n@@ -67,6 +67,25 @@ class BlockchainTest(BitcoinTestFramework):\r\n         self.supports_cli = False\r\n \r\n     def run_test(self):\r\n+        import time\r\n+\r\n+        def gbci():\r\n+            while True:\r\n+                try:\r\n+                    print(self.nodes[0].getblockchaininfo())\r\n+                except:\r\n+                    return\r\n+\r\n+        import threading\r\n+        t = threading.Thread(target=gbci)\r\n+        t.start()\r\n+        time.sleep(0.1)\r\n+        self.nodes[0].process.terminate()  # stop_node does not work for some reason\r\n+        assert_equal(0, self.nodes[0].process.wait())\r\n+        self.nodes[0].running = False\r\n+        self.nodes[0].process = None\r\n+        t.join()\r\n+        return\r\n         self.wallet = MiniWallet(self.nodes[0])\r\n         self.mine_chain()\r\n         self._test_max_future_block_time()\r\n```\r\n\r\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/19341#issuecomment-1239101390",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19341"
    },
    {
      "event": "commented",
      "id": 1239136952,
      "node_id": "IC_kwDOABII585J27q4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1239136952",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-07T09:23:56Z",
      "updated_at": "2022-09-07T09:23:56Z",
      "author_association": "MEMBER",
      "body": "<details><summary>example log:</summary>\r\n\r\n```\r\n test  2022-09-07T09:22:44.635000Z TestFramework (ERROR): Assertion failed \r\n                                   Traceback (most recent call last):\r\n                                     File \"/root/bitcoin-core/test/functional/test_framework/test_framework.py\", line 133, in main\r\n                                       self.run_test()\r\n                                     File \"/root/bitcoin-core/test/functional/rpc_blockchain.py\", line 84, in run_test\r\n                                       assert_equal(0, self.nodes[0].process.wait())\r\n                                     File \"/root/bitcoin-core/test/functional/test_framework/util.py\", line 56, in assert_equal\r\n                                       raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\r\n                                   AssertionError: not(0 == 66)\r\n test  2022-09-07T09:22:44.636000Z TestFramework (DEBUG): Closing down network thread \r\n test  2022-09-07T09:22:44.686000Z TestFramework (INFO): Stopping nodes \r\n test  2022-09-07T09:22:44.686000Z TestFramework.node0 (DEBUG): Stopping node \r\n\r\n node0 stderr ==================\r\nWARNING: ThreadSanitizer: data race (pid=56291)\r\n  Write of size 8 at 0x558a6e7a4330 by main thread (mutexes: write M0):\r\n    #0 std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> >::_M_erase(__gnu_cxx::__normal_iterator<HTTPPathHandler*, std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> > >) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/vector.tcc:176:7 (bitcoind+0x582a93) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #1 std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> >::erase(__gnu_cxx::__normal_iterator<HTTPPathHandler const*, std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> > >) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/stl_vector.h:1431:16 (bitcoind+0x582a93)\r\n    #2 UnregisterHTTPHandler(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) src/./src/httpserver.cpp:690:22 (bitcoind+0x582a93)\r\n    #3 StopHTTPRPC() src/./src/httprpc.cpp:320:5 (bitcoind+0x572c7a) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #4 Shutdown(node::NodeContext&) src/./src/init.cpp:226:5 (bitcoind+0x11e784) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #5 AppInit(node::NodeContext&, int, char**) src/./src/bitcoind.cpp:254:5 (bitcoind+0x11a8cf) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #6 main src/./src/bitcoind.cpp:278:13 (bitcoind+0x11a8cf)\r\n\r\n  Previous read of size 8 at 0x558a6e7a4330 by thread T17:\r\n    #0 __gnu_cxx::__normal_iterator<HTTPPathHandler*, std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> > >::__normal_iterator(HTTPPathHandler* const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/stl_iterator.h:1011:20 (bitcoind+0x57e2e4) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #1 std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> >::end() /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/stl_vector.h:830:16 (bitcoind+0x57e2e4)\r\n    #2 http_request_cb(evhttp_request*, void*) src/./src/httpserver.cpp:247:70 (bitcoind+0x57e2e4)\r\n    #3 <null> <null> (libevent-2.1.so.7+0x3be9b) (BuildId: 4c26f7362d55dd3d9504a9fe94805a6235d480c7)\r\n    #4 bool std::__invoke_impl<bool, bool (*)(event_base*), event_base*>(std::__invoke_other, bool (*&&)(event_base*), event_base*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:61:14 (bitcoind+0x586f07) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #5 std::__invoke_result<bool (*)(event_base*), event_base*>::type std::__invoke<bool (*)(event_base*), event_base*>(bool (*&&)(event_base*), event_base*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:96:14 (bitcoind+0x586f07)\r\n    #6 bool std::thread::_Invoker<std::tuple<bool (*)(event_base*), event_base*> >::_M_invoke<0ul, 1ul>(std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_thread.h:253:13 (bitcoind+0x586f07)\r\n    #7 std::thread::_Invoker<std::tuple<bool (*)(event_base*), event_base*> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_thread.h:260:11 (bitcoind+0x586f07)\r\n    #8 std::thread::_State_impl<std::thread::_Invoker<std::tuple<bool (*)(event_base*), event_base*> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_thread.h:211:13 (bitcoind+0x586f07)\r\n    #9 <null> <null> (libstdc++.so.6+0xdc2c2) (BuildId: 725ef5da52ee6d881f9024d8238a989903932637)\r\n\r\n  Location is global 'pathHandlers' of size 24 at 0x558a6e7a4328 (bitcoind+0x1ee7330)\r\n\r\n  Mutex M0 (0x558a6e79ef70) created at:\r\n    #0 pthread_mutex_trylock <null> (bitcoind+0x998fa) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/x86_64-linux-gnu/c++/11/bits/gthr-default.h:758:12 (bitcoind+0x11e640) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_mutex.h:111:15 (bitcoind+0x11e640)\r\n    #3 std::unique_lock<std::mutex>::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/unique_lock.h:153:27 (bitcoind+0x11e640)\r\n    #4 UniqueLock<AnnotatedMixin<std::mutex>, std::unique_lock<std::mutex> >::TryEnter(char const*, char const*, int) src/./sync.h:168:15 (bitcoind+0x11e640)\r\n    #5 UniqueLock<AnnotatedMixin<std::mutex>, std::unique_lock<std::mutex> >::UniqueLock(AnnotatedMixin<std::mutex>&, char const*, char const*, int, bool) src/./sync.h:179:13 (bitcoind+0x11e640)\r\n    #6 Shutdown(node::NodeContext&) src/./src/init.cpp:214:5 (bitcoind+0x11e640)\r\n    #7 AppInit(node::NodeContext&, int, char**) src/./src/bitcoind.cpp:254:5 (bitcoind+0x11a8cf) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #8 main src/./src/bitcoind.cpp:278:13 (bitcoind+0x11a8cf)\r\n\r\n  Thread T17 'b-http' (tid=56736, running) created by main thread at:\r\n    #0 pthread_create <null> (bitcoind+0x97e3d) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc398) (BuildId: 725ef5da52ee6d881f9024d8238a989903932637)\r\n    #2 AppInitServers(node::NodeContext&) src/./src/init.cpp:650:5 (bitcoind+0x13becf) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #3 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) src/./src/init.cpp:1178:14 (bitcoind+0x133b78) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #4 AppInit(node::NodeContext&, int, char**) src/./src/bitcoind.cpp:234:43 (bitcoind+0x119ac1) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #5 main src/./src/bitcoind.cpp:278:13 (bitcoind+0x119ac1)\r\n\r\nSUMMARY: ThreadSanitizer: data race /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/vector.tcc:176:7 in std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> >::_M_erase(__gnu_cxx::__normal_iterator<HTTPPathHandler*, std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> > >)\r\n==================\r\n==================\r\nWARNING: ThreadSanitizer: data race (pid=56291)\r\n  Write of size 8 at 0x7b04000008b0 by main thread (mutexes: write M0):\r\n    #0 operator delete(void*) <null> (bitcoind+0x11848e) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #1 std::_Function_base::_Base_manager<StartHTTPRPC(std::any const&)::$_0>::_M_destroy(std::_Any_data&, std::integral_constant<bool, false>) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:175:4 (bitcoind+0x576180) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #2 std::_Function_base::_Base_manager<StartHTTPRPC(std::any const&)::$_0>::_M_manager(std::_Any_data&, std::_Any_data const&, std::_Manager_operation) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:203:8 (bitcoind+0x576180)\r\n    #3 std::_Function_handler<bool (HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&), StartHTTPRPC(std::any const&)::$_0>::_M_manager(std::_Any_data&, std::_Any_data const&, std::_Manager_operation) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:282:6 (bitcoind+0x576180)\r\n    #4 std::_Function_base::~_Function_base() /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:244:2 (bitcoind+0x582aba) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #5 HTTPPathHandler::~HTTPPathHandler() src/./src/httpserver.cpp:123:8 (bitcoind+0x582aba)\r\n    #6 void __gnu_cxx::new_allocator<HTTPPathHandler>::destroy<HTTPPathHandler>(HTTPPathHandler*) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/ext/new_allocator.h:168:10 (bitcoind+0x582aba)\r\n    #7 void std::allocator_traits<std::allocator<HTTPPathHandler> >::destroy<HTTPPathHandler>(std::allocator<HTTPPathHandler>&, HTTPPathHandler*) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/alloc_traits.h:535:8 (bitcoind+0x582aba)\r\n    #8 std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> >::_M_erase(__gnu_cxx::__normal_iterator<HTTPPathHandler*, std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> > >) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/vector.tcc:177:7 (bitcoind+0x582aba)\r\n    #9 std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> >::erase(__gnu_cxx::__normal_iterator<HTTPPathHandler const*, std::vector<HTTPPathHandler, std::allocator<HTTPPathHandler> > >) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/stl_vector.h:1431:16 (bitcoind+0x582aba)\r\n    #10 UnregisterHTTPHandler(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) src/./src/httpserver.cpp:690:22 (bitcoind+0x582aba)\r\n    #11 StopHTTPRPC() src/./src/httprpc.cpp:320:5 (bitcoind+0x572c7a) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #12 Shutdown(node::NodeContext&) src/./src/init.cpp:226:5 (bitcoind+0x11e784) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #13 AppInit(node::NodeContext&, int, char**) src/./src/bitcoind.cpp:254:5 (bitcoind+0x11a8cf) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #14 main src/./src/bitcoind.cpp:278:13 (bitcoind+0x11a8cf)\r\n\r\n  Previous read of size 8 at 0x7b04000008b0 by thread T17:\r\n    #0 std::any::has_value() const /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/any:327:46 (bitcoind+0x576117) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #1 std::any::any(std::any const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/any:157:20 (bitcoind+0x576117)\r\n    #2 StartHTTPRPC(std::any const&)::$_0::$_0($_0 const&) src/./src/httprpc.cpp:300:23 (bitcoind+0x576117)\r\n    #3 void std::_Function_base::_Base_manager<StartHTTPRPC(std::any const&)::$_0>::_M_create<StartHTTPRPC(std::any const&)::$_0 const&>(std::_Any_data&, StartHTTPRPC(std::any const&)::$_0 const&, std::integral_constant<bool, false>) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:161:14 (bitcoind+0x576117)\r\n    #4 void std::_Function_base::_Base_manager<StartHTTPRPC(std::any const&)::$_0>::_M_init_functor<StartHTTPRPC(std::any const&)::$_0 const&>(std::_Any_data&, StartHTTPRPC(std::any const&)::$_0 const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:215:6 (bitcoind+0x576117)\r\n    #5 std::_Function_base::_Base_manager<StartHTTPRPC(std::any const&)::$_0>::_M_manager(std::_Any_data&, std::_Any_data const&, std::_Manager_operation) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:198:8 (bitcoind+0x576117)\r\n    #6 std::_Function_handler<bool (HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&), StartHTTPRPC(std::any const&)::$_0>::_M_manager(std::_Any_data&, std::_Any_data const&, std::_Manager_operation) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:282:6 (bitcoind+0x576117)\r\n    #7 std::function<bool (HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)>::function(std::function<bool (HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)> const&) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_function.h:391:6 (bitcoind+0x5853cb) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #8 HTTPWorkItem::HTTPWorkItem(std::unique_ptr<HTTPRequest, std::default_delete<HTTPRequest> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::function<bool (HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)> const&) src/./src/httpserver.cpp:51:44 (bitcoind+0x5853cb)\r\n    #9 http_request_cb(evhttp_request*, void*) src/./src/httpserver.cpp:262:48 (bitcoind+0x57e79c) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #10 <null> <null> (libevent-2.1.so.7+0x3be9b) (BuildId: 4c26f7362d55dd3d9504a9fe94805a6235d480c7)\r\n    #11 bool std::__invoke_impl<bool, bool (*)(event_base*), event_base*>(std::__invoke_other, bool (*&&)(event_base*), event_base*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:61:14 (bitcoind+0x586f07) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #12 std::__invoke_result<bool (*)(event_base*), event_base*>::type std::__invoke<bool (*)(event_base*), event_base*>(bool (*&&)(event_base*), event_base*&&) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/invoke.h:96:14 (bitcoind+0x586f07)\r\n    #13 bool std::thread::_Invoker<std::tuple<bool (*)(event_base*), event_base*> >::_M_invoke<0ul, 1ul>(std::_Index_tuple<0ul, 1ul>) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_thread.h:253:13 (bitcoind+0x586f07)\r\n    #14 std::thread::_Invoker<std::tuple<bool (*)(event_base*), event_base*> >::operator()() /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_thread.h:260:11 (bitcoind+0x586f07)\r\n    #15 std::thread::_State_impl<std::thread::_Invoker<std::tuple<bool (*)(event_base*), event_base*> > >::_M_run() /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_thread.h:211:13 (bitcoind+0x586f07)\r\n    #16 <null> <null> (libstdc++.so.6+0xdc2c2) (BuildId: 725ef5da52ee6d881f9024d8238a989903932637)\r\n\r\n  Mutex M0 (0x558a6e79ef70) created at:\r\n    #0 pthread_mutex_trylock <null> (bitcoind+0x998fa) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #1 __gthread_mutex_trylock(pthread_mutex_t*) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/x86_64-linux-gnu/c++/11/bits/gthr-default.h:758:12 (bitcoind+0x11e640) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #2 std::mutex::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/std_mutex.h:111:15 (bitcoind+0x11e640)\r\n    #3 std::unique_lock<std::mutex>::try_lock() /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/unique_lock.h:153:27 (bitcoind+0x11e640)\r\n    #4 UniqueLock<AnnotatedMixin<std::mutex>, std::unique_lock<std::mutex> >::TryEnter(char const*, char const*, int) src/./sync.h:168:15 (bitcoind+0x11e640)\r\n    #5 UniqueLock<AnnotatedMixin<std::mutex>, std::unique_lock<std::mutex> >::UniqueLock(AnnotatedMixin<std::mutex>&, char const*, char const*, int, bool) src/./sync.h:179:13 (bitcoind+0x11e640)\r\n    #6 Shutdown(node::NodeContext&) src/./src/init.cpp:214:5 (bitcoind+0x11e640)\r\n    #7 AppInit(node::NodeContext&, int, char**) src/./src/bitcoind.cpp:254:5 (bitcoind+0x11a8cf) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #8 main src/./src/bitcoind.cpp:278:13 (bitcoind+0x11a8cf)\r\n\r\n  Thread T17 'b-http' (tid=56736, running) created by main thread at:\r\n    #0 pthread_create <null> (bitcoind+0x97e3d) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xdc398) (BuildId: 725ef5da52ee6d881f9024d8238a989903932637)\r\n    #2 AppInitServers(node::NodeContext&) src/./src/init.cpp:650:5 (bitcoind+0x13becf) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #3 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) src/./src/init.cpp:1178:14 (bitcoind+0x133b78) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #4 AppInit(node::NodeContext&, int, char**) src/./src/bitcoind.cpp:234:43 (bitcoind+0x119ac1) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1)\r\n    #5 main src/./src/bitcoind.cpp:278:13 (bitcoind+0x119ac1)\r\n\r\nSUMMARY: ThreadSanitizer: data race (/root/bitcoin-core/src/bitcoind+0x11848e) (BuildId: e4357ad76681023995313fed2aa9c2995c9fabb1) in operator delete(void*)\r\n==================\r\nThreadSanitizer: reported 2 warnings \r\n\r\n```\r\n\r\n</details>",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/19341#issuecomment-1239136952",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19341"
    },
    {
      "event": "closed",
      "id": 7337133988,
      "node_id": "CE_lADOABII584mSzY9zwAAAAG1U8ek",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7337133988",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "fc44d1796e4df5824423d7d13de3082fe204db7d",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/fc44d1796e4df5824423d7d13de3082fe204db7d",
      "created_at": "2022-09-07T09:28:24Z"
    },
    {
      "event": "referenced",
      "id": 7341430205,
      "node_id": "REFE_lADOABII584mSzY9zwAAAAG1lVW9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7341430205",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d1f05de3c682652fbd2ac53b6cff84a36c7767da",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/d1f05de3c682652fbd2ac53b6cff84a36c7767da",
      "created_at": "2022-09-07T18:57:27Z"
    }
  ]
}