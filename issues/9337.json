{
  "type": "issue",
  "issue": {
    "id": 195154167,
    "node_id": "MDU6SXNzdWUxOTUxNTQxNjc=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9337",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9337/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9337/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9337/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/9337",
    "number": 9337,
    "state": "closed",
    "state_reason": "completed",
    "title": "block downloads timeout on slow connection even though downloading",
    "body": "With additional debugging (a7629d3490d18a64a5eb2e0e3e0f593190940f0e) we can see that timeouts occur even when the block is still being downloaded (i.e. many examples of download progressing within the last few seconds prior to being disconnected).\r\n\r\ndebug.log extract:-\r\n\r\n```\r\n2016-12-11 15:36:23.372866 block download timeout. nDownloadingSince=600s nLastRecv=2s nLastSend=40s sipa disconnect peer=38\r\n2016-12-12 13:06:12.458955 block download timeout. nDownloadingSince=900s nLastRecv=2s nLastSend=7s sipa disconnect peer=30\r\n2016-12-12 13:16:03.047371 block download timeout. nDownloadingSince=900s nLastRecv=160s nLastSend=552s sipa disconnect peer=38\r\n2016-12-12 13:16:12.656307 block download timeout. nDownloadingSince=600s nLastRecv=102s nLastSend=2s sipa disconnect peer=31\r\n```\r\n\r\nThe debug above is prior to me adding the LastRecvBlk variable, but tests so far show that the data being received is block data at time of disconnection. E.g. the 1200s timeout often disconnects peers currently providing blocks also. This does not imply that it takes >1200s to download a block, as obviously that would be too slow given the average 1MB of block data every 10 minutes, but what can often happen is that internet connections become temporarily slow (e.g. in shared places, such as hotels) and this can cause several blocks to be downloading concurrently, therefore many blocks taking > 1200s to download but still achieving an average download speed of more than 1MB per 10 minutes.\r\n\r\n#9213 and #9314 are related also",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/rebroad/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/rebroad/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 1,
    "closed_at": "2022-08-04T09:24:01Z",
    "created_at": "2016-12-13T03:48:16Z",
    "updated_at": "2022-08-04T09:24:01Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 891734780,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDg5MTczNDc4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/891734780",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-12-13T09:55:14Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "commented",
      "id": 1204995934,
      "node_id": "IC_kwDOABII585H0sde",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1204995934",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-04T09:24:01Z",
      "updated_at": "2022-08-04T09:24:01Z",
      "author_association": "MEMBER",
      "body": "Is this still an issue with a recent version of Bitcoin Core? If yes, what are the steps to reproduce?",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/9337#issuecomment-1204995934",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9337"
    },
    {
      "event": "closed",
      "id": 7126064657,
      "node_id": "CE_lADOABII584LodD3zwAAAAGovx4R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7126064657",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-04T09:24:01Z"
    }
  ]
}