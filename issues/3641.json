{
  "type": "issue",
  "issue": {
    "id": 27159262,
    "node_id": "MDU6SXNzdWUyNzE1OTI2Mg==",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/3641",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/3641/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/3641/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/3641/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/3641",
    "number": 3641,
    "state": "closed",
    "state_reason": "completed",
    "title": "datadir on plan9 filesystem",
    "body": "Plan9 has a network file system called 9p. Also really handy when trying to share storage between Host OS and virtualized guests in Qemu environment. Kinda like NFS, but less bloat.\n\nApparently bitcoind doesn't like this file system, I assume it's because of lacking file locking capabilities in leveldb on 9p... or something.\n\nAnyways, would be awesome if debug.log would at least give an error message on why this is failing.\n\ndebug.log:\n2014-02-07 10:54:46 Bitcoin version v0.8.6.0-g03a7d67-beta ()\n2014-02-07 10:54:46 Using OpenSSL version OpenSSL 1.0.1f 6 Jan 2014\n2014-02-07 10:54:46 Default data directory /var/lib/bitcoin/.bitcoin\n2014-02-07 10:54:46 Using data directory /var/lib/bitcoin/.bitcoin\n2014-02-07 10:54:46 Using at most 125 connections (1024 file descriptors available)\n2014-02-07 10:54:46 Using 4 threads for script verification\n2014-02-07 10:54:46 init message: Verifying wallet...\n2014-02-07 10:54:46 dbenv.open LogDir=/var/lib/bitcoin/.bitcoin/database ErrorFile=/var/lib/bitcoin/.bitcoin/db.log\n2014-02-07 10:54:46 Bound to 0.0.0.0:8333\n2014-02-07 10:54:46 init message: Loading block index...\n2014-02-07 10:54:46 Opening LevelDB in /var/lib/bitcoin/.bitcoin/blocks/index\n2014-02-07 10:54:46 : Error opening block database.\nDo you want to rebuild the block database now?\n2014-02-07 10:54:46 Shutdown : In progress...\n2014-02-07 10:54:46 Flush(false)\n2014-02-07 10:54:46 DBFlush(false) ended               1ms\n2014-02-07 10:54:46 StopNode()\n2014-02-07 10:54:47 Flushed 0 addresses to peers.dat  520ms\n2014-02-07 10:54:47 Flush(true)\n2014-02-07 10:54:47 DBFlush(true) ended               1ms\n2014-02-07 10:54:47 Shutdown : done\n",
    "user": {
      "login": "ViliusSutkus89",
      "id": 812793,
      "node_id": "MDQ6VXNlcjgxMjc5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/812793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ViliusSutkus89",
      "html_url": "https://github.com/ViliusSutkus89",
      "followers_url": "https://api.github.com/users/ViliusSutkus89/followers",
      "following_url": "https://api.github.com/users/ViliusSutkus89/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ViliusSutkus89/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ViliusSutkus89/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ViliusSutkus89/subscriptions",
      "organizations_url": "https://api.github.com/users/ViliusSutkus89/orgs",
      "repos_url": "https://api.github.com/users/ViliusSutkus89/repos",
      "events_url": "https://api.github.com/users/ViliusSutkus89/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ViliusSutkus89/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 3,
    "closed_at": "2014-02-25T20:45:18Z",
    "created_at": "2014-02-07T18:18:57Z",
    "updated_at": "2021-09-08T12:19:46Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 35230670,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjMwNjcw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35230670",
      "actor": {
        "login": "scintill",
        "id": 848492,
        "node_id": "MDQ6VXNlcjg0ODQ5Mg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/848492?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scintill",
        "html_url": "https://github.com/scintill",
        "followers_url": "https://api.github.com/users/scintill/followers",
        "following_url": "https://api.github.com/users/scintill/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/scintill/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/scintill/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/scintill/subscriptions",
        "organizations_url": "https://api.github.com/users/scintill/orgs",
        "repos_url": "https://api.github.com/users/scintill/repos",
        "events_url": "https://api.github.com/users/scintill/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/scintill/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-02-17T05:56:03Z",
      "updated_at": "2014-02-17T05:56:03Z",
      "author_association": "NONE",
      "body": "You might be able to get a better idea of the error by running `strace bitcoind` and looking for an error code before it writes \"Error opening block database.\"  I also suspect LevelDB and/or bitcoin are requesting some special flags when they open the file, which are not supported by 9p, or networked FS in general.\n\nRunning with datadir over a network may not be advisable for heavy production use.  But perhaps you are not in such a situation, or others can vouch it works OK.\n",
      "user": {
        "login": "scintill",
        "id": 848492,
        "node_id": "MDQ6VXNlcjg0ODQ5Mg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/848492?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scintill",
        "html_url": "https://github.com/scintill",
        "followers_url": "https://api.github.com/users/scintill/followers",
        "following_url": "https://api.github.com/users/scintill/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/scintill/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/scintill/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/scintill/subscriptions",
        "organizations_url": "https://api.github.com/users/scintill/orgs",
        "repos_url": "https://api.github.com/users/scintill/repos",
        "events_url": "https://api.github.com/users/scintill/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/scintill/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/3641#issuecomment-35230670",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/3641"
    },
    {
      "event": "commented",
      "id": 35256537,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjU2NTM3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35256537",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-02-17T13:27:58Z",
      "updated_at": "2014-02-17T13:27:58Z",
      "author_association": "MEMBER",
      "body": "This is really an issue for upstream leveldb. If leveldb doesn't support that file system we can't either.\n",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/3641#issuecomment-35256537",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/3641"
    },
    {
      "event": "commented",
      "id": 36055809,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDU1ODA5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/36055809",
      "actor": {
        "login": "ViliusSutkus89",
        "id": 812793,
        "node_id": "MDQ6VXNlcjgxMjc5Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/812793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ViliusSutkus89",
        "html_url": "https://github.com/ViliusSutkus89",
        "followers_url": "https://api.github.com/users/ViliusSutkus89/followers",
        "following_url": "https://api.github.com/users/ViliusSutkus89/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ViliusSutkus89/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ViliusSutkus89/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ViliusSutkus89/subscriptions",
        "organizations_url": "https://api.github.com/users/ViliusSutkus89/orgs",
        "repos_url": "https://api.github.com/users/ViliusSutkus89/repos",
        "events_url": "https://api.github.com/users/ViliusSutkus89/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ViliusSutkus89/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-02-25T20:45:18Z",
      "updated_at": "2014-02-25T20:45:18Z",
      "author_association": "NONE",
      "body": "scintill, thanks for the hint.\n\nTurns out virtfs doesn't like mmaps which are writeable and MAP_SHARED.\nMay dig deeper, but this is kind of a rabbit hole.\n\nDefinitely NOTOURBUG from bitcoin perspective.\n",
      "user": {
        "login": "ViliusSutkus89",
        "id": 812793,
        "node_id": "MDQ6VXNlcjgxMjc5Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/812793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ViliusSutkus89",
        "html_url": "https://github.com/ViliusSutkus89",
        "followers_url": "https://api.github.com/users/ViliusSutkus89/followers",
        "following_url": "https://api.github.com/users/ViliusSutkus89/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ViliusSutkus89/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ViliusSutkus89/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ViliusSutkus89/subscriptions",
        "organizations_url": "https://api.github.com/users/ViliusSutkus89/orgs",
        "repos_url": "https://api.github.com/users/ViliusSutkus89/repos",
        "events_url": "https://api.github.com/users/ViliusSutkus89/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ViliusSutkus89/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/3641#issuecomment-36055809",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/3641"
    },
    {
      "event": "closed",
      "id": 96768624,
      "node_id": "MDExOkNsb3NlZEV2ZW50OTY3Njg2MjQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/96768624",
      "actor": {
        "login": "ViliusSutkus89",
        "id": 812793,
        "node_id": "MDQ6VXNlcjgxMjc5Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/812793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ViliusSutkus89",
        "html_url": "https://github.com/ViliusSutkus89",
        "followers_url": "https://api.github.com/users/ViliusSutkus89/followers",
        "following_url": "https://api.github.com/users/ViliusSutkus89/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ViliusSutkus89/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ViliusSutkus89/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ViliusSutkus89/subscriptions",
        "organizations_url": "https://api.github.com/users/ViliusSutkus89/orgs",
        "repos_url": "https://api.github.com/users/ViliusSutkus89/repos",
        "events_url": "https://api.github.com/users/ViliusSutkus89/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ViliusSutkus89/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-02-25T20:45:18Z"
    },
    {
      "event": "locked",
      "id": 5271935020,
      "node_id": "LOE_lADOABII584BnmrezwAAAAE6O1gs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271935020",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:19:46Z",
      "lock_reason": "resolved"
    }
  ]
}