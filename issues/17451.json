{
  "type": "issue",
  "issue": {
    "id": 521387041,
    "node_id": "MDU6SXNzdWU1MjEzODcwNDE=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17451",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17451/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17451/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17451/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/17451",
    "number": 17451,
    "state": "closed",
    "state_reason": "completed",
    "title": "P2P block inv notification bug",
    "body": "Connecting with a whitebinded peer on localshost to P2P, Bitcoin Core selectively sends block invs after `generatetoaddress 10 address` RPC command.\r\n\r\n**Expected behavior**\r\n\r\nSend block invs for every block generated in the proper order.\r\n\r\n**To reproduce**\r\n\r\n1. Connect to bitcoind with a whitebinded local peer and listen to the invs. \r\n2. Generate 10 blocks with RPC in one command: `generatetoaddress 10 address`\r\n3. Only get some invs. On my computer it's 7, on @lontivero's computer it's 2.\r\n\r\n**System information**\r\n\r\nUbuntu 18.04, Windows 10, Bitooin Core 0.18.1\r\n",
    "user": {
      "login": "nopara73",
      "id": 9156103,
      "node_id": "MDQ6VXNlcjkxNTYxMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9156103?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nopara73",
      "html_url": "https://github.com/nopara73",
      "followers_url": "https://api.github.com/users/nopara73/followers",
      "following_url": "https://api.github.com/users/nopara73/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/nopara73/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/nopara73/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/nopara73/subscriptions",
      "organizations_url": "https://api.github.com/users/nopara73/orgs",
      "repos_url": "https://api.github.com/users/nopara73/repos",
      "events_url": "https://api.github.com/users/nopara73/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/nopara73/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 6,
    "closed_at": "2020-01-18T13:46:16Z",
    "created_at": "2019-11-12T07:57:13Z",
    "updated_at": "2022-02-15T10:40:50Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 2790466704,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDI3OTA0NjY3MDQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2790466704",
      "actor": {
        "login": "nopara73",
        "id": 9156103,
        "node_id": "MDQ6VXNlcjkxNTYxMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9156103?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nopara73",
        "html_url": "https://github.com/nopara73",
        "followers_url": "https://api.github.com/users/nopara73/followers",
        "following_url": "https://api.github.com/users/nopara73/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/nopara73/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/nopara73/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/nopara73/subscriptions",
        "organizations_url": "https://api.github.com/users/nopara73/orgs",
        "repos_url": "https://api.github.com/users/nopara73/repos",
        "events_url": "https://api.github.com/users/nopara73/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/nopara73/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-12T07:57:13Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "mentioned",
      "id": 2790466713,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50Mjc5MDQ2NjcxMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2790466713",
      "actor": {
        "login": "lontivero",
        "id": 127973,
        "node_id": "MDQ6VXNlcjEyNzk3Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127973?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lontivero",
        "html_url": "https://github.com/lontivero",
        "followers_url": "https://api.github.com/users/lontivero/followers",
        "following_url": "https://api.github.com/users/lontivero/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lontivero/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lontivero/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lontivero/subscriptions",
        "organizations_url": "https://api.github.com/users/lontivero/orgs",
        "repos_url": "https://api.github.com/users/lontivero/repos",
        "events_url": "https://api.github.com/users/lontivero/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lontivero/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-12T07:57:13Z"
    },
    {
      "event": "subscribed",
      "id": 2790466715,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDI3OTA0NjY3MTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2790466715",
      "actor": {
        "login": "lontivero",
        "id": 127973,
        "node_id": "MDQ6VXNlcjEyNzk3Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127973?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lontivero",
        "html_url": "https://github.com/lontivero",
        "followers_url": "https://api.github.com/users/lontivero/followers",
        "following_url": "https://api.github.com/users/lontivero/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lontivero/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lontivero/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lontivero/subscriptions",
        "organizations_url": "https://api.github.com/users/lontivero/orgs",
        "repos_url": "https://api.github.com/users/lontivero/repos",
        "events_url": "https://api.github.com/users/lontivero/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lontivero/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-12T07:57:13Z"
    },
    {
      "event": "labeled",
      "id": 2790468972,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDI3OTA0Njg5NzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2790468972",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-12T07:58:15Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "commented",
      "id": 553195296,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzE5NTI5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/553195296",
      "actor": {
        "login": "lontivero",
        "id": 127973,
        "node_id": "MDQ6VXNlcjEyNzk3Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127973?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lontivero",
        "html_url": "https://github.com/lontivero",
        "followers_url": "https://api.github.com/users/lontivero/followers",
        "following_url": "https://api.github.com/users/lontivero/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lontivero/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lontivero/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lontivero/subscriptions",
        "organizations_url": "https://api.github.com/users/lontivero/orgs",
        "repos_url": "https://api.github.com/users/lontivero/repos",
        "events_url": "https://api.github.com/users/lontivero/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lontivero/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-13T01:29:15Z",
      "updated_at": "2019-11-13T02:43:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Below is the log that shows that 10 blocks are created but only 9 inv messages are sent. I've run our test many times and 9 is the maximum number of invs messages that I've received when using `generatetoaddress 10 address`.\r\n\r\nHowever, if we introduce a one second wait in between of each block creation, the 10 invs are sent as expected, this is:\r\n```\r\ngeneratetoaddress 1 address\r\nsleep 1\r\ngeneratetoaddress 1 address\r\nsleep 1\r\ngeneratetoaddress 1 address\r\nsleep 1\r\n...\r\n...\r\n```\r\n\r\nAlso, the node had time to send the inv message for the latest block because there are 2 minutes between the last inv message and the rpc stop request.   \r\n\r\n---------------------\r\n\r\n## Log \r\n \r\n```\r\n2019-11-12T09:28:01Z Bitcoin Core version v0.18.1 (release build)\r\n2019-11-12T09:28:01Z InitParameterInteraction: parameter interaction: -whitebind set -> setting -listen=1\r\n2019-11-12T09:28:01Z Validating signatures for all blocks.\r\n2019-11-12T09:28:01Z Setting nMinimumChainWork=0000000000000000000000000000000000000000000000000000000000000000\r\n2019-11-12T09:28:01Z Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation\r\n2019-11-12T09:28:01Z Using RdSeed as additional entropy source\r\n2019-11-12T09:28:01Z Using RdRand as an additional entropy source\r\n2019-11-12T09:28:01Z Default data directory /home/lontivero/.bitcoin\r\n2019-11-12T09:28:01Z Using data directory /home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest\r\n2019-11-12T09:28:01Z Config file: /home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/bitcoin.conf\r\n2019-11-12T09:28:01Z Using at most 125 automatic connections (1048576 file descriptors available)\r\n2019-11-12T09:28:01Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements\r\n2019-11-12T09:28:01Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements\r\n2019-11-12T09:28:01Z Using 4 threads for script verification\r\n2019-11-12T09:28:01Z scheduler thread start\r\n2019-11-12T09:28:01Z HTTP: creating work queue of depth 16\r\n2019-11-12T09:28:01Z Starting RPC\r\n2019-11-12T09:28:01Z Starting HTTP RPC server\r\n2019-11-12T09:28:01Z Config options rpcuser and rpcpassword will soon be deprecated. Locally-run instances may remove rpcuser to use cookie-based auth, or may be replaced with rpcauth. Please see share/rpcauth for rpcauth auth generation.\r\n2019-11-12T09:28:01Z HTTP: starting 4 worker threads\r\n2019-11-12T09:28:01Z Using wallet directory /home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/wallets\r\n2019-11-12T09:28:01Z init message: Verifying wallet(s)...\r\n2019-11-12T09:28:01Z Using BerkeleyDB version Berkeley DB 4.8.30: (April  9, 2010)\r\n2019-11-12T09:28:01Z Using wallet /home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/wallets\r\n2019-11-12T09:28:01Z BerkeleyEnvironment::Open: LogDir=/home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/wallets/database ErrorFile=/home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/wallets/db.log\r\n2019-11-12T09:28:01Z init message: Loading banlist...\r\n2019-11-12T09:28:01Z Loaded 0 banned node ips/subnets from banlist.dat  0ms\r\n2019-11-12T09:28:01Z net: setting try another outbound peer=false\r\n2019-11-12T09:28:01Z Cache configuration:\r\n2019-11-12T09:28:01Z * Using 2.0 MiB for block index database\r\n2019-11-12T09:28:01Z * Using 56.0 MiB for transaction index database\r\n2019-11-12T09:28:01Z * Using 8.0 MiB for chain state database\r\n2019-11-12T09:28:01Z * Using 384.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\r\n2019-11-12T09:28:01Z init message: Loading block index...\r\n2019-11-12T09:28:01Z Opening LevelDB in /home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/blocks/index\r\n2019-11-12T09:28:01Z Opened LevelDB successfully\r\n2019-11-12T09:28:01Z Using obfuscation key for /home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/blocks/index: 0000000000000000\r\n2019-11-12T09:28:01Z LoadBlockIndexDB: last block file = 0\r\n2019-11-12T09:28:01Z LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=1452, size=377070, heights=0...1451, time=2011-02-02...2019-11-12)\r\n2019-11-12T09:28:01Z Checking all blk files are present...\r\n2019-11-12T09:28:01Z Opening LevelDB in /home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/chainstate\r\n2019-11-12T09:28:01Z Opened LevelDB successfully\r\n2019-11-12T09:28:01Z Using obfuscation key for /home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/chainstate: a12e61b4a55d5787\r\n2019-11-12T09:28:01Z Loaded best chain: hashBestChain=699739cba6c3cb2192aa8cf046c9f3568ada62ec8b2b3d72d3a81682cbe6a942 height=1451 date=2019-11-12T09:25:03Z progress=1.000000\r\n2019-11-12T09:28:01Z init message: Rewinding blocks...\r\n2019-11-12T09:28:01Z init message: Verifying blocks...\r\n2019-11-12T09:28:01Z Verifying last 6 blocks at level 3\r\n2019-11-12T09:28:01Z [83%]...[99%]...[DONE].\r\n2019-11-12T09:28:01Z No coin database inconsistencies in last 6 blocks (6 transactions)\r\n2019-11-12T09:28:01Z  block index              59ms\r\n2019-11-12T09:28:01Z Opening LevelDB in /home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/indexes/txindex\r\n2019-11-12T09:28:01Z Opened LevelDB successfully\r\n2019-11-12T09:28:01Z Using obfuscation key for /home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/indexes/txindex: 0000000000000000\r\n2019-11-12T09:28:01Z init message: Loading wallet...\r\n2019-11-12T09:28:01Z txindex thread start\r\n2019-11-12T09:28:01Z Syncing txindex with block chain from height 1442\r\n2019-11-12T09:28:01Z BerkeleyEnvironment::Open: LogDir=/home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/wallets/database ErrorFile=/home/lontivero/.walletwasabi/tests/P2pBasedTests/TrustedNotifierNotifiesBlockAsync/regtest/wallets/db.log\r\n2019-11-12T09:28:01Z [default wallet] nFileVersion = 180100\r\n2019-11-12T09:28:01Z [default wallet] Keys: 2012 plaintext, 0 encrypted, 2012 w/ metadata, 2012 total. Unknown wallet records: 0\r\n2019-11-12T09:28:01Z txindex is enabled at height 1451\r\n2019-11-12T09:28:01Z txindex thread exit\r\n2019-11-12T09:28:01Z [default wallet] Wallet completed loading in              53ms\r\n2019-11-12T09:28:01Z [default wallet] setKeyPool.size() = 2000\r\n2019-11-12T09:28:01Z [default wallet] mapWallet.size() = 1111\r\n2019-11-12T09:28:01Z [default wallet] mapAddressBook.size() = 11\r\n2019-11-12T09:28:01Z mapBlockIndex.size() = 1452\r\n2019-11-12T09:28:01Z nBestHeight = 1451\r\n2019-11-12T09:28:01Z torcontrol thread start\r\n2019-11-12T09:28:01Z Bound to 127.0.0.1:12911\r\n2019-11-12T09:28:01Z init message: Loading P2P addresses...\r\n2019-11-12T09:28:01Z Loaded 0 addresses from peers.dat  0ms\r\n2019-11-12T09:28:01Z init message: Starting network threads...\r\n2019-11-12T09:28:01Z net thread start\r\n2019-11-12T09:28:01Z Imported mempool transactions from disk: 0 succeeded, 0 failed, 0 expired, 0 already there\r\n2019-11-12T09:28:01Z dnsseed thread start\r\n2019-11-12T09:28:01Z Loading addresses from DNS seeds (could take a while)\r\n2019-11-12T09:28:01Z 0 addresses found from DNS seeds\r\n2019-11-12T09:28:01Z dnsseed thread exit\r\n2019-11-12T09:28:01Z addcon thread start\r\n2019-11-12T09:28:01Z init message: Done loading\r\n2019-11-12T09:28:01Z msghand thread start\r\n2019-11-12T09:28:01Z Leaving InitialBlockDownload (latching to false)\r\n2019-11-12T09:28:01Z opencon thread start\r\n2019-11-12T09:28:01Z Added connection peer=0\r\n2019-11-12T09:28:01Z connection from 127.0.0.1:39923 accepted\r\n2019-11-12T09:28:01Z received: version (108 bytes) peer=0\r\n2019-11-12T09:28:01Z sending version (102 bytes) peer=0\r\n2019-11-12T09:28:01Z send version message: version 70015, blocks=1451, us=[::]:0, peer=0\r\n2019-11-12T09:28:01Z sending verack (0 bytes) peer=0\r\n2019-11-12T09:28:01Z receive version message: /WasabiClient:1.1.9.3/: version 70012, blocks=0, us=127.0.0.1:12911, peer=0\r\n2019-11-12T09:28:01Z added time data, samples 2, offset +0 (+0 minutes)\r\n2019-11-12T09:28:01Z sending alert (168 bytes) peer=0\r\n2019-11-12T09:28:01Z received: verack (0 bytes) peer=0\r\n2019-11-12T09:28:01Z sending sendheaders (0 bytes) peer=0\r\n2019-11-12T09:28:01Z sending ping (8 bytes) peer=0\r\n2019-11-12T09:28:02Z received: ping (8 bytes) peer=0\r\n2019-11-12T09:28:02Z sending pong (8 bytes) peer=0\r\n2019-11-12T09:28:02Z received: pong (8 bytes) peer=0\r\n2019-11-12T09:28:02Z ThreadRPCServer method=generatetoaddress user=f8985cc2feca0c178e42c67adef33d6bbda6fd1b9f\r\n2019-11-12T09:28:02Z CreateNewBlock(): block weight: 892 txs: 0 fees: 0 sigops 400\r\n2019-11-12T09:28:02Z UpdateTip: new best=484096729b1785a0e7dac627a60adbffe87ee8db8b60fec0dffe5602b3dce390 height=1452 version=0x20000000 log2_work=11.504819 tx=1453 date='2019-11-12T09:28:02Z' progress=1.000000 cache=0.0MiB(1txo)\r\n2019-11-12T09:28:02Z CreateNewBlock(): block weight: 892 txs: 0 fees: 0 sigops 400\r\n2019-11-12T09:28:02Z UpdateTip: new best=32bd2a1aaac32d8fd2b47289c8da6d0458bd6a16b6bba2c8d1a027e07685c9b8 height=1453 version=0x20000000 log2_work=11.505812 tx=1454 date='2019-11-12T09:28:02Z' progress=1.000000 cache=0.0MiB(2txo)\r\n2019-11-12T09:28:02Z CreateNewBlock(): block weight: 892 txs: 0 fees: 0 sigops 400\r\n2019-11-12T09:28:02Z UpdateTip: new best=4845a8e32bbb6738ab46cb28d83782ebedf02a9e2e9dfdf65f415896063da7f1 height=1454 version=0x20000000 log2_work=11.506803 tx=1455 date='2019-11-12T09:28:02Z' progress=1.000000 cache=0.0MiB(3txo)\r\n2019-11-12T09:28:02Z CreateNewBlock(): block weight: 892 txs: 0 fees: 0 sigops 400\r\n2019-11-12T09:28:02Z UpdateTip: new best=6d2515a602daacab6142030f5f337e94a20ab76b09d6cf6abe84d00303c5791c height=1455 version=0x20000000 log2_work=11.507795 tx=1456 date='2019-11-12T09:28:02Z' progress=1.000000 cache=0.0MiB(4txo)\r\n2019-11-12T09:28:02Z CreateNewBlock(): block weight: 892 txs: 0 fees: 0 sigops 400\r\n2019-11-12T09:28:02Z UpdateTip: new best=6d7f3af9bbcc52e372717d9fbbd74334a5bafa91beaa8abf8a43f6e5454cae28 height=1456 version=0x20000000 log2_work=11.508785 tx=1457 date='2019-11-12T09:28:02Z' progress=1.000000 cache=0.0MiB(5txo)\r\n2019-11-12T09:28:02Z CreateNewBlock(): block weight: 892 txs: 0 fees: 0 sigops 400\r\n2019-11-12T09:28:02Z UpdateTip: new best=2f48479e01bb83271c316d718dc2ecf2dd35168fea0560ab7373991f72a36af4 height=1457 version=0x20000000 log2_work=11.509775 tx=1458 date='2019-11-12T09:28:02Z' progress=1.000000 cache=0.0MiB(6txo)\r\n2019-11-12T09:28:02Z CreateNewBlock(): block weight: 892 txs: 0 fees: 0 sigops 400\r\n2019-11-12T09:28:02Z SendMessages: sending inv peer=0 hash=484096729b1785a0e7dac627a60adbffe87ee8db8b60fec0dffe5602b3dce390\r\n2019-11-12T09:28:02Z sending inv (37 bytes) peer=0\r\n2019-11-12T09:28:02Z SendMessages: sending inv peer=0 hash=32bd2a1aaac32d8fd2b47289c8da6d0458bd6a16b6bba2c8d1a027e07685c9b8\r\n2019-11-12T09:28:02Z sending inv (37 bytes) peer=0\r\n2019-11-12T09:28:02Z SendMessages: sending inv peer=0 hash=4845a8e32bbb6738ab46cb28d83782ebedf02a9e2e9dfdf65f415896063da7f1\r\n2019-11-12T09:28:02Z sending inv (37 bytes) peer=0\r\n2019-11-12T09:28:02Z SendMessages: sending inv peer=0 hash=6d2515a602daacab6142030f5f337e94a20ab76b09d6cf6abe84d00303c5791c\r\n2019-11-12T09:28:02Z sending inv (37 bytes) peer=0\r\n2019-11-12T09:28:02Z SendMessages: sending inv peer=0 hash=6d7f3af9bbcc52e372717d9fbbd74334a5bafa91beaa8abf8a43f6e5454cae28\r\n2019-11-12T09:28:02Z sending inv (37 bytes) peer=0\r\n2019-11-12T09:28:02Z SendMessages: sending inv peer=0 hash=2f48479e01bb83271c316d718dc2ecf2dd35168fea0560ab7373991f72a36af4\r\n2019-11-12T09:28:02Z sending inv (37 bytes) peer=0\r\n2019-11-12T09:28:02Z UpdateTip: new best=0ec957f5349e856c1a24f0ca785446bfc65d02f91f3d33084696fae446243974 height=1458 version=0x20000000 log2_work=11.510764 tx=1459 date='2019-11-12T09:28:03Z' progress=1.000000 cache=0.0MiB(7txo)\r\n2019-11-12T09:28:02Z CreateNewBlock(): block weight: 892 txs: 0 fees: 0 sigops 400\r\n2019-11-12T09:28:02Z UpdateTip: new best=3cf99ebca1d0683aa98f01f88b08f9ee073885391744704734f4f61c1110f3cf height=1459 version=0x20000000 log2_work=11.511753 tx=1460 date='2019-11-12T09:28:03Z' progress=1.000000 cache=0.0MiB(8txo)\r\n2019-11-12T09:28:02Z CreateNewBlock(): block weight: 892 txs: 0 fees: 0 sigops 400\r\n2019-11-12T09:28:02Z received: getdata (37 bytes) peer=0\r\n2019-11-12T09:28:02Z received getdata (1 invsz) peer=0\r\n2019-11-12T09:28:02Z received getdata for: block 484096729b1785a0e7dac627a60adbffe87ee8db8b60fec0dffe5602b3dce390 peer=0\r\n2019-11-12T09:28:02Z UpdateTip: new best=42a40e412ed1804fabdca9aef42f1af920241cdb254c49dc0da5adbcd7f14286 height=1460 version=0x20000000 log2_work=11.51274 tx=1461 date='2019-11-12T09:28:03Z' progress=1.000000 cache=0.0MiB(9txo)\r\n2019-11-12T09:28:02Z CreateNewBlock(): block weight: 892 txs: 0 fees: 0 sigops 400\r\n2019-11-12T09:28:02Z UpdateTip: new best=11fefbdb728be17af779df4245a88f8654502fd2f5c06f2299946a01512bd2ac height=1461 version=0x20000000 log2_work=11.513728 tx=1462 date='2019-11-12T09:28:03Z' progress=1.000000 cache=0.0MiB(10txo)\r\n2019-11-12T09:28:02Z sending block (215 bytes) peer=0\r\n2019-11-12T09:28:02Z SendMessages: sending inv peer=0 hash=3cf99ebca1d0683aa98f01f88b08f9ee073885391744704734f4f61c1110f3cf\r\n2019-11-12T09:28:02Z sending inv (37 bytes) peer=0\r\n2019-11-12T09:28:02Z received: getdata (37 bytes) peer=0\r\n2019-11-12T09:28:02Z received getdata (1 invsz) peer=0\r\n2019-11-12T09:28:02Z received getdata for: block 32bd2a1aaac32d8fd2b47289c8da6d0458bd6a16b6bba2c8d1a027e07685c9b8 peer=0\r\n2019-11-12T09:28:02Z sending block (215 bytes) peer=0\r\n2019-11-12T09:28:02Z received: getdata (37 bytes) peer=0\r\n2019-11-12T09:28:02Z received getdata (1 invsz) peer=0\r\n2019-11-12T09:28:02Z received getdata for: block 4845a8e32bbb6738ab46cb28d83782ebedf02a9e2e9dfdf65f415896063da7f1 peer=0\r\n2019-11-12T09:28:02Z sending block (215 bytes) peer=0\r\n2019-11-12T09:28:02Z received: getdata (37 bytes) peer=0\r\n2019-11-12T09:28:02Z received getdata (1 invsz) peer=0\r\n2019-11-12T09:28:02Z received getdata for: block 6d2515a602daacab6142030f5f337e94a20ab76b09d6cf6abe84d00303c5791c peer=0\r\n2019-11-12T09:28:02Z sending block (215 bytes) peer=0\r\n2019-11-12T09:28:02Z received: getdata (37 bytes) peer=0\r\n2019-11-12T09:28:02Z received getdata (1 invsz) peer=0\r\n2019-11-12T09:28:02Z received getdata for: block 6d7f3af9bbcc52e372717d9fbbd74334a5bafa91beaa8abf8a43f6e5454cae28 peer=0\r\n2019-11-12T09:28:02Z sending block (215 bytes) peer=0\r\n2019-11-12T09:28:02Z received: getdata (37 bytes) peer=0\r\n2019-11-12T09:28:02Z received getdata (1 invsz) peer=0\r\n2019-11-12T09:28:02Z received getdata for: block 2f48479e01bb83271c316d718dc2ecf2dd35168fea0560ab7373991f72a36af4 peer=0\r\n2019-11-12T09:28:02Z sending block (215 bytes) peer=0\r\n2019-11-12T09:28:02Z SendMessages: sending inv peer=0 hash=42a40e412ed1804fabdca9aef42f1af920241cdb254c49dc0da5adbcd7f14286\r\n2019-11-12T09:28:02Z sending inv (37 bytes) peer=0\r\n2019-11-12T09:28:02Z SendMessages: sending inv peer=0 hash=11fefbdb728be17af779df4245a88f8654502fd2f5c06f2299946a01512bd2ac\r\n2019-11-12T09:28:02Z sending inv (37 bytes) peer=0\r\n2019-11-12T09:28:02Z received: getdata (37 bytes) peer=0\r\n2019-11-12T09:28:02Z received getdata (1 invsz) peer=0\r\n2019-11-12T09:28:02Z received getdata for: block 3cf99ebca1d0683aa98f01f88b08f9ee073885391744704734f4f61c1110f3cf peer=0\r\n2019-11-12T09:28:02Z sending block (215 bytes) peer=0\r\n2019-11-12T09:28:02Z received: getdata (37 bytes) peer=0\r\n2019-11-12T09:28:02Z received getdata (1 invsz) peer=0\r\n2019-11-12T09:28:02Z received getdata for: block 42a40e412ed1804fabdca9aef42f1af920241cdb254c49dc0da5adbcd7f14286 peer=0\r\n2019-11-12T09:28:02Z sending block (215 bytes) peer=0\r\n2019-11-12T09:28:02Z received: getdata (37 bytes) peer=0\r\n2019-11-12T09:28:02Z received getdata (1 invsz) peer=0\r\n2019-11-12T09:28:02Z received getdata for: block 11fefbdb728be17af779df4245a88f8654502fd2f5c06f2299946a01512bd2ac peer=0\r\n2019-11-12T09:28:02Z sending block (215 bytes) peer=0\r\n2019-11-12T09:29:02Z Adding fixed seed nodes as DNS doesn't seem to be available.\r\n2019-11-12T09:30:01Z received: ping (8 bytes) peer=0\r\n2019-11-12T09:30:01Z sending pong (8 bytes) peer=0\r\n2019-11-12T09:30:02Z sending ping (8 bytes) peer=0\r\n2019-11-12T09:30:02Z received: pong (8 bytes) peer=0\r\n2019-11-12T09:30:23Z socket closed\r\n2019-11-12T09:30:23Z disconnecting peer=0\r\n2019-11-12T09:30:23Z Cleared nodestate for peer=0\r\n2019-11-12T09:30:23Z ThreadRPCServer method=stop user=f8985cc2feca0c178e42c67adef33d6bbda6fd1b9f\r\n2019-11-12T09:30:23Z Interrupting HTTP RPC server\r\n2019-11-12T09:30:23Z Interrupting RPC\r\n2019-11-12T09:30:23Z tor: Thread interrupt\r\n2019-11-12T09:30:23Z addcon thread exit\r\n2019-11-12T09:30:23Z torcontrol thread exit\r\n2019-11-12T09:30:23Z Shutdown: In progress...\r\n2019-11-12T09:30:23Z opencon thread exit\r\n2019-11-12T09:30:23Z Stopping HTTP RPC server\r\n2019-11-12T09:30:23Z Stopping RPC\r\n2019-11-12T09:30:23Z RPC stopped.\r\n2019-11-12T09:30:23Z net thread exit\r\n2019-11-12T09:30:23Z msghand thread exit\r\n2019-11-12T09:30:23Z Flushed 0 addresses to peers.dat  4ms\r\n2019-11-12T09:30:23Z scheduler thread interrupt\r\n2019-11-12T09:30:23Z Dumped mempool: 7e-06s to copy, 0.00746s to dump\r\n2019-11-12T09:30:23Z [default wallet] Releasing wallet\r\n2019-11-12T09:30:23Z Shutdown: done\r\n\r\n```",
      "user": {
        "login": "lontivero",
        "id": 127973,
        "node_id": "MDQ6VXNlcjEyNzk3Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127973?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lontivero",
        "html_url": "https://github.com/lontivero",
        "followers_url": "https://api.github.com/users/lontivero/followers",
        "following_url": "https://api.github.com/users/lontivero/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lontivero/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lontivero/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lontivero/subscriptions",
        "organizations_url": "https://api.github.com/users/lontivero/orgs",
        "repos_url": "https://api.github.com/users/lontivero/repos",
        "events_url": "https://api.github.com/users/lontivero/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lontivero/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/17451#issuecomment-553195296",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17451"
    },
    {
      "event": "commented",
      "id": 553771009,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU1Mzc3MTAwOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/553771009",
      "actor": {
        "login": "NicolasDorier",
        "id": 3020646,
        "node_id": "MDQ6VXNlcjMwMjA2NDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NicolasDorier",
        "html_url": "https://github.com/NicolasDorier",
        "followers_url": "https://api.github.com/users/NicolasDorier/followers",
        "following_url": "https://api.github.com/users/NicolasDorier/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NicolasDorier/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NicolasDorier/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
        "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
        "repos_url": "https://api.github.com/users/NicolasDorier/repos",
        "events_url": "https://api.github.com/users/NicolasDorier/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-14T07:59:18Z",
      "updated_at": "2019-11-14T07:59:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "@lontivero just to add to this log: the problem is that `0ec957f5349e856c1a24f0ca785446bfc65d02f91f3d33084696fae446243974` was never announced via a inv.",
      "user": {
        "login": "NicolasDorier",
        "id": 3020646,
        "node_id": "MDQ6VXNlcjMwMjA2NDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NicolasDorier",
        "html_url": "https://github.com/NicolasDorier",
        "followers_url": "https://api.github.com/users/NicolasDorier/followers",
        "following_url": "https://api.github.com/users/NicolasDorier/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NicolasDorier/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NicolasDorier/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
        "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
        "repos_url": "https://api.github.com/users/NicolasDorier/repos",
        "events_url": "https://api.github.com/users/NicolasDorier/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/17451#issuecomment-553771009",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17451"
    },
    {
      "event": "mentioned",
      "id": 2798063655,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50Mjc5ODA2MzY1NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2798063655",
      "actor": {
        "login": "lontivero",
        "id": 127973,
        "node_id": "MDQ6VXNlcjEyNzk3Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127973?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lontivero",
        "html_url": "https://github.com/lontivero",
        "followers_url": "https://api.github.com/users/lontivero/followers",
        "following_url": "https://api.github.com/users/lontivero/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lontivero/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lontivero/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lontivero/subscriptions",
        "organizations_url": "https://api.github.com/users/lontivero/orgs",
        "repos_url": "https://api.github.com/users/lontivero/repos",
        "events_url": "https://api.github.com/users/lontivero/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lontivero/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-14T07:59:18Z"
    },
    {
      "event": "subscribed",
      "id": 2798063657,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDI3OTgwNjM2NTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2798063657",
      "actor": {
        "login": "lontivero",
        "id": 127973,
        "node_id": "MDQ6VXNlcjEyNzk3Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127973?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lontivero",
        "html_url": "https://github.com/lontivero",
        "followers_url": "https://api.github.com/users/lontivero/followers",
        "following_url": "https://api.github.com/users/lontivero/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lontivero/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lontivero/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lontivero/subscriptions",
        "organizations_url": "https://api.github.com/users/lontivero/orgs",
        "repos_url": "https://api.github.com/users/lontivero/repos",
        "events_url": "https://api.github.com/users/lontivero/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lontivero/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-14T07:59:18Z"
    },
    {
      "event": "commented",
      "id": 553771398,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU1Mzc3MTM5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/553771398",
      "actor": {
        "login": "NicolasDorier",
        "id": 3020646,
        "node_id": "MDQ6VXNlcjMwMjA2NDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NicolasDorier",
        "html_url": "https://github.com/NicolasDorier",
        "followers_url": "https://api.github.com/users/NicolasDorier/followers",
        "following_url": "https://api.github.com/users/NicolasDorier/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NicolasDorier/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NicolasDorier/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
        "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
        "repos_url": "https://api.github.com/users/NicolasDorier/repos",
        "events_url": "https://api.github.com/users/NicolasDorier/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-14T08:00:38Z",
      "updated_at": "2019-11-14T08:00:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "It is strange, it never happened to me but the log seems to indeed show that a block was not announced.",
      "user": {
        "login": "NicolasDorier",
        "id": 3020646,
        "node_id": "MDQ6VXNlcjMwMjA2NDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NicolasDorier",
        "html_url": "https://github.com/NicolasDorier",
        "followers_url": "https://api.github.com/users/NicolasDorier/followers",
        "following_url": "https://api.github.com/users/NicolasDorier/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NicolasDorier/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NicolasDorier/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
        "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
        "repos_url": "https://api.github.com/users/NicolasDorier/repos",
        "events_url": "https://api.github.com/users/NicolasDorier/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/17451#issuecomment-553771398",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17451"
    },
    {
      "event": "commented",
      "id": 553927047,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzkyNzA0Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/553927047",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-14T15:04:06Z",
      "updated_at": "2019-11-14T15:04:06Z",
      "author_association": "MEMBER",
      "body": "This seems to be the case if direct headers announcement / BIP 130 is not used (is there a reason for that?) and if the blocks are generated faster than the propagation mechanism with validationinterface callbacks and SendMessages picks them up - according to the following code comment it is intentional that in this case, only the tip is INV'ed and the rest of the blocks are dropped from `vBlockHashesToAnnounce` and never INV'ed  (I am not sure why):\r\nhttps://github.com/bitcoin/bitcoin/blob/cd6cb9745e13a62e130b11f78a13bcc1d424b05e/src/net_processing.cpp#L3751-L3754\r\n",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/17451#issuecomment-553927047",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17451"
    },
    {
      "event": "commented",
      "id": 557852887,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU1Nzg1Mjg4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/557852887",
      "actor": {
        "login": "NicolasDorier",
        "id": 3020646,
        "node_id": "MDQ6VXNlcjMwMjA2NDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NicolasDorier",
        "html_url": "https://github.com/NicolasDorier",
        "followers_url": "https://api.github.com/users/NicolasDorier/followers",
        "following_url": "https://api.github.com/users/NicolasDorier/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NicolasDorier/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NicolasDorier/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
        "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
        "repos_url": "https://api.github.com/users/NicolasDorier/repos",
        "events_url": "https://api.github.com/users/NicolasDorier/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-24T02:57:28Z",
      "updated_at": "2019-11-24T02:57:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think @mzumsande might be right. I never experienced this problem, probably because I use header announcement. You should try to switch to the same by sending a `SendHeaders` upon connection and using new headers announcement instead of the invs.",
      "user": {
        "login": "NicolasDorier",
        "id": 3020646,
        "node_id": "MDQ6VXNlcjMwMjA2NDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NicolasDorier",
        "html_url": "https://github.com/NicolasDorier",
        "followers_url": "https://api.github.com/users/NicolasDorier/followers",
        "following_url": "https://api.github.com/users/NicolasDorier/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NicolasDorier/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NicolasDorier/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
        "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
        "repos_url": "https://api.github.com/users/NicolasDorier/repos",
        "events_url": "https://api.github.com/users/NicolasDorier/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/17451#issuecomment-557852887",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17451"
    },
    {
      "event": "mentioned",
      "id": 2825712855,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjgyNTcxMjg1NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2825712855",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-24T02:57:28Z"
    },
    {
      "event": "subscribed",
      "id": 2825712857,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDI4MjU3MTI4NTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2825712857",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-24T02:57:28Z"
    },
    {
      "event": "commented",
      "id": 575898689,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU3NTg5ODY4OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575898689",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-18T13:31:04Z",
      "updated_at": "2020-01-18T13:31:04Z",
      "author_association": "MEMBER",
      "body": "This behavior is intentional and, in my view, largely correct.  For some history, this code was last restructured in #6494 (merged in #7129) and also discussed in #5982, see in particular [this comment](https://github.com/bitcoin/bitcoin/pull/5307#issuecomment-93785348).\r\n\r\nI don't think that the goal of the p2p protocol for block announcements is to ensure that every block hash is announced; instead our goal is to ensure that the network synchronizes quickly and reasonably efficiently.  If somehow our queue of block announcements fills to the point that we're falling back to just announcing our tip, it's either because (a) our node is too slow to drain the announcement queue, (b) blocks are arriving way faster than you'd ever expect given our consensus parameters, or (c) we're experiencing a large (>8 block) reorg.\r\n\r\nI think (a) is by far the most likely cause that we'd see in practice -- and in the event that we are being slow to process block announcements, it's not important for the network's health to clear through our backlog announcing old blocks.  Scenario (b), which is described in this issue, is unrealistic for mainnet, and (c) should be very rare, so it's something we should handle but not necessarily optimize for, as such a large reorg will already be very disruptive (and it's not clear that having the whole network announce every block hash on every link is better in such a case than just announcing tips and letting nodes decide which peers to sync headers from).\r\n\r\nMoreover, as I pointed out in the comment linked above, sending INV messages for lots of intermediate block hashes is inefficient for implementations like Bitcoin Core's, where we send a getheaders message in response to an INV in order to determine whether to download the block (which is necessary for anti-DoS reasons), resulting in n^2 behavior if we were to be announced a quick succession of blocks at once.\r\n\r\nThat said, if there is a use case of applications listening to (say) a trusted node implementation to be notified of all blocks which is not yet being met using the existing ways (like zmq or -blocknotify or whatever other listening ways we have nowadays), then I think we should improve that.  I would just be skeptical about trying to make the p2p layer serve that need -- and if some use case must use the p2p layer, I would suggest implementing some minimal headers syncing logic to be compatible.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/17451#issuecomment-575898689",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17451"
    },
    {
      "event": "closed",
      "id": 2960230457,
      "node_id": "MDExOkNsb3NlZEV2ZW50Mjk2MDIzMDQ1Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2960230457",
      "actor": {
        "login": "nopara73",
        "id": 9156103,
        "node_id": "MDQ6VXNlcjkxNTYxMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9156103?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nopara73",
        "html_url": "https://github.com/nopara73",
        "followers_url": "https://api.github.com/users/nopara73/followers",
        "following_url": "https://api.github.com/users/nopara73/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/nopara73/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/nopara73/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/nopara73/subscriptions",
        "organizations_url": "https://api.github.com/users/nopara73/orgs",
        "repos_url": "https://api.github.com/users/nopara73/repos",
        "events_url": "https://api.github.com/users/nopara73/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/nopara73/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-18T13:46:16Z"
    },
    {
      "event": "locked",
      "id": 6073855794,
      "node_id": "LOE_lADOABII584fE7whzwAAAAFqB68y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6073855794",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T10:40:50Z",
      "lock_reason": "resolved"
    }
  ]
}