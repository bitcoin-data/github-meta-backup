{
  "type": "issue",
  "issue": {
    "id": 394813517,
    "node_id": "MDU6SXNzdWUzOTQ4MTM1MTc=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15058",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15058/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15058/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15058/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/15058",
    "number": 15058,
    "state": "closed",
    "state_reason": "completed",
    "title": "Cannot lock data directory over NFS [0.17.1][0.17.0.1]",
    "body": "#### ISSUE\r\nData directory locking fails over NFS\r\n\r\n#### CONTEXT\r\n\r\n\r\n```\r\n# data directory\r\nls -ahl\r\ntotal 12M\r\ndrwxrwx--- 5 bitcoin bitcoin   10 Dec 29 09:50 .\r\ndrwxrwx--- 3 bitcoin bitcoin    3 Dec 29 07:22 ..\r\n-rw-rw---- 1 bitcoin bitcoin  12K Dec 29 07:22 banlist.dat\r\ndrwxrwx--- 3 bitcoin bitcoin 2.9K Dec 29 08:03 blocks\r\ndrwxrwx--- 2 bitcoin bitcoin 1.4K Dec 29 08:08 chainstate\r\n-rw-rw---- 1 bitcoin bitcoin 9.6M Dec 29 07:22 debug.log\r\n-rw-rw---- 1 bitcoin bitcoin 243K Dec 29 07:22 fee_estimates.dat\r\n-rw-rw---- 1 bitcoin bitcoin 6.4M Dec 29 07:22 mempool.dat\r\n-rw-rw---- 1 bitcoin bitcoin 4.7M Dec 29 07:22 peers.dat\r\ndrwxrwx--- 4 bitcoin bitcoin   13 Dec 29 08:12 testnet3\r\n```\r\n\r\n```\r\nDec 29 17:50:50 bitcoin systemd[1]: Started BitcoinD Mainnet.\r\nDec 29 17:50:50 bitcoin bitcoind[567]: 2018-12-29T17:50:50Z Bitcoin Core version v0.17.0.1 (release build)\r\nDec 29 17:50:50 bitcoin bitcoind[567]: 2018-12-29T17:50:50Z InitParameterInteraction: parameter interaction: -whitelistforcerelay=1 -> setting -whitelistrelay=1\r\nDec 29 17:50:50 bitcoin bitcoind[567]: 2018-12-29T17:50:50Z Assuming ancestors of block 0000000000000000002e63058c023a9a1de233554f28c7b21380b6c9003f36a8 have valid signatures.\r\nDec 29 17:50:50 bitcoin bitcoind[567]: 2018-12-29T17:50:50Z Setting nMinimumChainWork=0000000000000000000000000000000000000000028822fef1c230963535a90d\r\nDec 29 17:50:50 bitcoin bitcoind[567]: 2018-12-29T17:50:50Z Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation\r\nDec 29 17:50:50 bitcoin bitcoind[567]: 2018-12-29T17:50:50Z Using RdRand as an additional entropy source\r\nDec 29 17:50:56 bitcoin bitcoind[567]: 2018-12-29T17:50:56Z ERROR: Error while attempting to lock directory /mnt/bitcoin/bitcoind/data/: No locks available\r\nDec 29 17:50:56 bitcoin bitcoind[567]: 2018-12-29T17:50:56Z Error: Cannot obtain a lock on data directory /mnt/bitcoin/bitcoind/data/. Bitcoin Core is probably already running.\r\nDec 29 17:50:56 bitcoin bitcoind[567]: Error: Cannot obtain a lock on data directory /mnt/bitcoin/bitcoind/data/. Bitcoin Core is probably already running.\r\n```\r\n```\r\n# data directory lock\r\nls -ahl\r\ntotal 12M\r\ndrwxrwx--- 5 bitcoin bitcoin   11 Dec 29 09:53 .\r\ndrwxrwx--- 3 bitcoin bitcoin    3 Dec 29 07:22 ..\r\n-rw-rw---- 1 bitcoin bitcoin  12K Dec 29 07:22 banlist.dat\r\ndrwxrwx--- 3 bitcoin bitcoin 2.9K Dec 29 08:03 blocks\r\ndrwxrwx--- 2 bitcoin bitcoin 1.4K Dec 29 08:08 chainstate\r\n-rw-rw---- 1 bitcoin bitcoin 9.6M Dec 29 07:22 debug.log\r\n-rw-rw---- 1 bitcoin bitcoin 243K Dec 29 07:22 fee_estimates.dat\r\n-rw------- 1 bitcoin bitcoin    0 Dec 29 09:50 .lock\r\n-rw-rw---- 1 bitcoin bitcoin 6.4M Dec 29 07:22 mempool.dat\r\n-rw-rw---- 1 bitcoin bitcoin 4.7M Dec 29 07:22 peers.dat\r\ndrwxrwx--- 4 bitcoin bitcoin   13 Dec 29 08:12 testnet3\r\n```",
    "user": {
      "login": "cluelessperson",
      "id": 5635253,
      "node_id": "MDQ6VXNlcjU2MzUyNTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5635253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cluelessperson",
      "html_url": "https://github.com/cluelessperson",
      "followers_url": "https://api.github.com/users/cluelessperson/followers",
      "following_url": "https://api.github.com/users/cluelessperson/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/cluelessperson/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/cluelessperson/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/cluelessperson/subscriptions",
      "organizations_url": "https://api.github.com/users/cluelessperson/orgs",
      "repos_url": "https://api.github.com/users/cluelessperson/repos",
      "events_url": "https://api.github.com/users/cluelessperson/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/cluelessperson/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 3,
    "closed_at": "2018-12-30T00:45:54Z",
    "created_at": "2018-12-29T17:57:29Z",
    "updated_at": "2021-09-08T12:45:58Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 450529694,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDUyOTY5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/450529694",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-30T00:02:24Z",
      "updated_at": "2018-12-30T00:02:24Z",
      "author_association": "MEMBER",
      "body": "Pretty sure this is a NFS issue, not bitcoind.",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/15058#issuecomment-450529694",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15058"
    },
    {
      "event": "commented",
      "id": 450530410,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDUzMDQxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/450530410",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-30T00:20:12Z",
      "updated_at": "2018-12-30T00:20:12Z",
      "author_association": "MEMBER",
      "body": "https://serverfault.com/questions/61594/what-does-no-locks-available-mean",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/15058#issuecomment-450530410",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15058"
    },
    {
      "event": "commented",
      "id": 450531366,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDUzMTM2Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/450531366",
      "actor": {
        "login": "cluelessperson",
        "id": 5635253,
        "node_id": "MDQ6VXNlcjU2MzUyNTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5635253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cluelessperson",
        "html_url": "https://github.com/cluelessperson",
        "followers_url": "https://api.github.com/users/cluelessperson/followers",
        "following_url": "https://api.github.com/users/cluelessperson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/cluelessperson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/cluelessperson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/cluelessperson/subscriptions",
        "organizations_url": "https://api.github.com/users/cluelessperson/orgs",
        "repos_url": "https://api.github.com/users/cluelessperson/repos",
        "events_url": "https://api.github.com/users/cluelessperson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/cluelessperson/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-30T00:45:54Z",
      "updated_at": "2018-12-30T00:45:54Z",
      "author_association": "NONE",
      "body": "```\r\nDec 29 16:43:35 <server1> kernel: [ 3114.560194] lockd: cannot monitor <server2>\r\n```\r\n\r\nhuh, yeah, it is an nfs issue.\r\nturns out someone in systemd disabled statd service by default.\r\n\r\nSorry for the bother. ",
      "user": {
        "login": "cluelessperson",
        "id": 5635253,
        "node_id": "MDQ6VXNlcjU2MzUyNTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5635253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cluelessperson",
        "html_url": "https://github.com/cluelessperson",
        "followers_url": "https://api.github.com/users/cluelessperson/followers",
        "following_url": "https://api.github.com/users/cluelessperson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/cluelessperson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/cluelessperson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/cluelessperson/subscriptions",
        "organizations_url": "https://api.github.com/users/cluelessperson/orgs",
        "repos_url": "https://api.github.com/users/cluelessperson/repos",
        "events_url": "https://api.github.com/users/cluelessperson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/cluelessperson/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/15058#issuecomment-450531366",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15058"
    },
    {
      "event": "closed",
      "id": 2048264964,
      "node_id": "MDExOkNsb3NlZEV2ZW50MjA0ODI2NDk2NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2048264964",
      "actor": {
        "login": "cluelessperson",
        "id": 5635253,
        "node_id": "MDQ6VXNlcjU2MzUyNTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5635253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cluelessperson",
        "html_url": "https://github.com/cluelessperson",
        "followers_url": "https://api.github.com/users/cluelessperson/followers",
        "following_url": "https://api.github.com/users/cluelessperson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/cluelessperson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/cluelessperson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/cluelessperson/subscriptions",
        "organizations_url": "https://api.github.com/users/cluelessperson/orgs",
        "repos_url": "https://api.github.com/users/cluelessperson/repos",
        "events_url": "https://api.github.com/users/cluelessperson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/cluelessperson/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-30T00:45:54Z"
    },
    {
      "event": "locked",
      "id": 5272076230,
      "node_id": "LOE_lADOABII584XiGBNzwAAAAE6PX_G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5272076230",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:45:58Z",
      "lock_reason": "resolved"
    }
  ]
}