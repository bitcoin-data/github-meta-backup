{
  "type": "issue",
  "issue": {
    "id": 392180385,
    "node_id": "MDU6SXNzdWUzOTIxODAzODU=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/14995",
    "number": 14995,
    "state": "closed",
    "state_reason": "completed",
    "title": "possible deadlock with walletpassphrase",
    "body": "When i used the encrypted wallet to test transfer parallelly,i frequently got the trouble: The rpc server is not responding.My test script is like below:\r\n#!/bin/sh\r\nwhile [ 1 ]\r\ndo\r\n./bitcoin-cli listaddressgroupings>null\r\n./bitcoin-cli walletpassphrase \"!@#$%^&*\" 2\r\n./bitcoin sendtoaddress \"mhAW6mzs5DeCbzBUHXBi4U446Fdnr1z8U7\" 0.01\r\ndone\r\n\r\nWhen i open the dead lock trace macro and check the debug log,i found the last print is as below:\r\n2018-12-17 08:27:58 ThreadRPCServer method=walletpassphrase\r\n2018-12-17 08:27:58 LOCKCONTENTION: cs_main\r\n2018-12-17 08:27:58 Locker: wallet/rpcwallet.cpp:2642\r\n2018-12-17 08:27:58 LOCKCONTENTION: pWallet->cs_wallet\r\n2018-12-17 08:27:58 Locker: wallet/rpcwallet.cpp:2607\r\n\r\nThe line no 2642 is walletpassphrase and 2607 is LockWallet. I checked the code,i found there is no log printed for this line in function \"walletpassphrase\":\r\n\"LogPrint(BCLog::RPC, \"queue run of timer %s in %i seconds (using %s)\\n\", name, nSeconds, timerInterface->Name());\" So i guess the reason may be:\r\nWhen \"walletpassphrase\" is running and lock the cs_wallet,the last relock timer triggered and call \"LockWallet\".\"LockWallet\" want to lock the cs_wallet but it has been locked by \"walletpassphrase\",so \"LockWallet\" is blocked.When \"walletpassphrase\" run to call \"RPCRunLater\",the function will erase the timer from the std::map \"deadlineTimers\",but the timer's timeout call is blocked,so the dead lock take place.\r\nIs my guess right?\r\nHow to reslove the issue?\r\nAny help will be appreciativeÔºÅ",
    "user": {
      "login": "xuzhitong",
      "id": 18006914,
      "node_id": "MDQ6VXNlcjE4MDA2OTE0",
      "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xuzhitong",
      "html_url": "https://github.com/xuzhitong",
      "followers_url": "https://api.github.com/users/xuzhitong/followers",
      "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
      "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
      "repos_url": "https://api.github.com/users/xuzhitong/repos",
      "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 9,
    "closed_at": "2020-04-06T18:29:53Z",
    "created_at": "2018-12-18T14:26:46Z",
    "updated_at": "2022-02-15T10:42:26Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 448295379,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODI5NTM3OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448295379",
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-18T17:07:21Z",
      "updated_at": "2018-12-18T17:07:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "@xuzhitong \r\n\r\nThanks a lot for reporting!\r\n\r\nWhat is the output of `bitcoind --version | head -1`?\r\n\r\nAre you able to reproduce this consistently? \r\n\r\nIf you start a fresh `bitcoind` instance and run your test script; will the issue trigger?",
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14995#issuecomment-448295379",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995"
    },
    {
      "event": "mentioned",
      "id": 2033570806,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjAzMzU3MDgwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2033570806",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-18T17:07:21Z"
    },
    {
      "event": "subscribed",
      "id": 2033570807,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwMzM1NzA4MDc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2033570807",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-18T17:07:21Z"
    },
    {
      "event": "commented",
      "id": 448424871,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODQyNDg3MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448424871",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T00:34:14Z",
      "updated_at": "2018-12-19T00:34:14Z",
      "author_association": "MEMBER",
      "body": "> I checked the code,i found there is no log printed for this line\r\n\r\n@xuzhitong you have to give us more details ‚òùÔ∏è ",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14995#issuecomment-448424871",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995"
    },
    {
      "event": "mentioned",
      "id": 2034462083,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjAzNDQ2MjA4Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2034462083",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T00:34:14Z"
    },
    {
      "event": "subscribed",
      "id": 2034462084,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwMzQ0NjIwODQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2034462084",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T00:34:14Z"
    },
    {
      "event": "labeled",
      "id": 2034506280,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDIwMzQ1MDYyODA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2034506280",
      "actor": {
        "login": "meshcollider",
        "id": 3211283,
        "node_id": "MDQ6VXNlcjMyMTEyODM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/meshcollider",
        "html_url": "https://github.com/meshcollider",
        "followers_url": "https://api.github.com/users/meshcollider/followers",
        "following_url": "https://api.github.com/users/meshcollider/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/meshcollider/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/meshcollider/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
        "organizations_url": "https://api.github.com/users/meshcollider/orgs",
        "repos_url": "https://api.github.com/users/meshcollider/repos",
        "events_url": "https://api.github.com/users/meshcollider/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/meshcollider/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T01:10:47Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 448433694,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODQzMzY5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448433694",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T01:18:28Z",
      "updated_at": "2018-12-19T01:18:28Z",
      "author_association": "NONE",
      "body": "> > I checked the code,i found there is no log printed for this line\r\n> \r\n> @xuzhitong you have to give us more details ‚òùÔ∏è\r\n\r\nOK.Sorry for not clear it.\r\nThe line is in function \"RPCRunLater\"  which called by \"walletpassphrase\" .\r\nThe code is below:\r\nvoid RPCRunLater(const std::string& name, std::function<void(void)> func, int64_t nSeconds)\r\n{\r\n    if (!timerInterface)\r\n        throw JSONRPCError(RPC_INTERNAL_ERROR, \"No timer handler registered for RPC\");\r\n    deadlineTimers.erase(name);\r\n    **LogPrint(BCLog::RPC, \"queue run of timer %s in %i seconds (using %s)\\n\", name, nSeconds, timerInterface->Name());**\r\n    deadlineTimers.emplace(name, std::unique_ptr<RPCTimerBase>(timerInterface->NewTimer(func, nSeconds*1000)));\r\n}\r\nstatic UniValue walletpassphrase(const JSONRPCRequest& request)\r\n{\r\n    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\r\n    CWallet* const pwallet = wallet.get();\r\n\r\n    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\r\n        return NullUniValue;\r\n    }\r\n    ......\r\n    LOCK2(cs_main, pwallet->cs_wallet);\r\n    if (!pwallet->IsCrypted()) {\r\n        throw JSONRPCError(RPC_WALLET_WRONG_ENC_STATE, \"Error: running with an unencrypted wallet, but walletpassphrase was called.\");\r\n    }\r\n\r\n    // Note that the walletpassphrase is stored in request.params[0] which is not mlock()ed\r\n    SecureString strWalletPass;\r\n    strWalletPass.reserve(100);\r\n    // TODO: get rid of this .c_str() by implementing SecureString::operator=(std::string)\r\n    // Alternately, find a way to make request.params[0] mlock()'d to begin with.\r\n    strWalletPass = request.params[0].get_str().c_str();\r\n\r\n    // Get the timeout\r\n    int64_t nSleepTime = request.params[1].get_int64();\r\n    // Timeout cannot be negative, otherwise it will relock immediately\r\n    if (nSleepTime < 0) {\r\n        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Timeout cannot be negative.\");\r\n    }\r\n    // Clamp timeout\r\n    constexpr int64_t MAX_SLEEP_TIME = 100000000; // larger values trigger a macos/libevent bug?\r\n    if (nSleepTime > MAX_SLEEP_TIME) {\r\n        nSleepTime = MAX_SLEEP_TIME;\r\n    }\r\n\r\n    if (strWalletPass.length() > 0)\r\n    {\r\n        if (!pwallet->Unlock(strWalletPass)) {\r\n            throw JSONRPCError(RPC_WALLET_PASSPHRASE_INCORRECT, \"Error: The wallet passphrase entered was incorrect.\");\r\n        }\r\n    }\r\n    else\r\n        throw std::runtime_error(\r\n            \"walletpassphrase <passphrase> <timeout>\\n\"\r\n            \"Stores the wallet decryption key in memory for <timeout> seconds.\");\r\n\r\n    pwallet->TopUpKeyPool();\r\n\r\n    pwallet->nRelockTime = GetTime() + nSleepTime;\r\n    **RPCRunLater(strprintf(\"lockwallet(%s)\", pwallet->GetName()), std::bind(LockWallet, pwallet), nSleepTime);**\r\n\r\n    return NullUniValue;\r\n}",
      "user": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14995#issuecomment-448433694",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995"
    },
    {
      "event": "mentioned",
      "id": 2034515587,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjAzNDUxNTU4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2034515587",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T01:18:28Z"
    },
    {
      "event": "subscribed",
      "id": 2034515588,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwMzQ1MTU1ODg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2034515588",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T01:18:28Z"
    },
    {
      "event": "commented",
      "id": 448435078,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODQzNTA3OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448435078",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T01:25:25Z",
      "updated_at": "2018-12-19T01:25:25Z",
      "author_association": "NONE",
      "body": "> @xuzhitong\r\n> \r\n> Thanks a lot for reporting!\r\n> \r\n> What is the output of `bitcoind --version | head -1`?\r\n> \r\n> Are you able to reproduce this consistently?\r\n> \r\n> If you start a fresh `bitcoind` instance and run your test script; will the issue trigger?\r\n\r\nYes.The issue is not difficulty to reproduce in my test condition.I will try the newest version later. I compared the newest version code,but I didn't find any difference associated with \"walletpassphrase\".So i think the issue may be also exist in the fresh \"bitcoind\".",
      "user": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14995#issuecomment-448435078",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995"
    },
    {
      "event": "mentioned",
      "id": 2034524005,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjAzNDUyNDAwNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2034524005",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T01:25:25Z"
    },
    {
      "event": "subscribed",
      "id": 2034524006,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwMzQ1MjQwMDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2034524006",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T01:25:25Z"
    },
    {
      "event": "commented",
      "id": 448499680,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODQ5OTY4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448499680",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T07:44:23Z",
      "updated_at": "2018-12-19T07:44:23Z",
      "author_association": "MEMBER",
      "body": "I mean, let us know what version you have.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14995#issuecomment-448499680",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995"
    },
    {
      "event": "commented",
      "id": 448569148,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODU2OTE0OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448569148",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T11:56:44Z",
      "updated_at": "2018-12-19T11:56:44Z",
      "author_association": "NONE",
      "body": "> I mean, let us know what version you have.\r\n\r\nThe version is 0.15.2.It's must be too old.But for some reason,i couldn't update the version to the newest.So if the issue has been repair in some version,please tell me,thanks very much!",
      "user": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14995#issuecomment-448569148",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995"
    },
    {
      "event": "commented",
      "id": 448572419,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODU3MjQxOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448572419",
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T12:10:02Z",
      "updated_at": "2018-12-19T12:10:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "@xuzhitong The probability that this has been fixed since 0.15.2 is quite high, so please try to reproduce against the current version. Thanks for reporting!",
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14995#issuecomment-448572419",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995"
    },
    {
      "event": "mentioned",
      "id": 2035501004,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjAzNTUwMTAwNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2035501004",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T12:10:02Z"
    },
    {
      "event": "subscribed",
      "id": 2035501006,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwMzU1MDEwMDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2035501006",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-19T12:10:02Z"
    },
    {
      "event": "commented",
      "id": 448953884,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ0ODk1Mzg4NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448953884",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-20T10:46:53Z",
      "updated_at": "2018-12-20T11:20:12Z",
      "author_association": "NONE",
      "body": "> @xuzhitong The probability that this has been fixed since 0.15.2 is quite high, so please try to reproduce against the current version. Thanks for reporting!\r\n\r\nI compared the two version code and tried to merge the code  associated  with httprpc mutithread part.I noticed the significant modify is changing the boost thread call to std thread call.The merged files list are below:\r\nsync.h,sync.cpp,httprpc.cpp,init.cpp,rpc/mining.cpp.\r\nThen I make and upgrade to test the same scenario,but unfortunately the issue is also exist.\r\nI think the issue caused by erasing a pending(waiting cs_wallet lock)  timer from \"deadlinetimes\" map ,so i tried a fix using \"evtimer_pending\" and \"EV_PERSIST\" to check if the timer pending or active.If the timer is pending and the tv_out time is earlier than the current time,keep it in map,else,delete it.I found the issue has gone.I think it's not a very good way.Please help to confirm the issue.Thanks very much! ",
      "user": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14995#issuecomment-448953884",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995"
    },
    {
      "event": "mentioned",
      "id": 2038038461,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjAzODAzODQ2MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2038038461",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-20T10:46:53Z"
    },
    {
      "event": "subscribed",
      "id": 2038038462,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwMzgwMzg0NjI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2038038462",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-20T10:46:53Z"
    },
    {
      "event": "commented",
      "id": 606941293,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYwNjk0MTI5Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/606941293",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-31T23:34:48Z",
      "updated_at": "2020-03-31T23:34:48Z",
      "author_association": "MEMBER",
      "body": "@xuzhitong I'm afraid 0.19.1 still has this problem. FYI #18487 might fix the issue. Thanks for reporting!",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14995#issuecomment-606941293",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14995"
    },
    {
      "event": "mentioned",
      "id": 3185566992,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzE4NTU2Njk5Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3185566992",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-31T23:34:48Z"
    },
    {
      "event": "subscribed",
      "id": 3185566996,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMxODU1NjY5OTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3185566996",
      "actor": {
        "login": "xuzhitong",
        "id": 18006914,
        "node_id": "MDQ6VXNlcjE4MDA2OTE0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18006914?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xuzhitong",
        "html_url": "https://github.com/xuzhitong",
        "followers_url": "https://api.github.com/users/xuzhitong/followers",
        "following_url": "https://api.github.com/users/xuzhitong/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/xuzhitong/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/xuzhitong/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/xuzhitong/subscriptions",
        "organizations_url": "https://api.github.com/users/xuzhitong/orgs",
        "repos_url": "https://api.github.com/users/xuzhitong/repos",
        "events_url": "https://api.github.com/users/xuzhitong/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/xuzhitong/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-31T23:34:48Z"
    },
    {
      "event": "closed",
      "id": 3206682400,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzIwNjY4MjQwMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3206682400",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "75021e80ee4439dddadbe8c586cee04b85ac110c",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/75021e80ee4439dddadbe8c586cee04b85ac110c",
      "created_at": "2020-04-06T18:29:54Z"
    },
    {
      "event": "referenced",
      "id": 3212526970,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMyMTI1MjY5NzA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3212526970",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "82255a05ecae54f9a60b990493d96cf7ea21de18",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/82255a05ecae54f9a60b990493d96cf7ea21de18",
      "created_at": "2020-04-08T05:00:09Z"
    },
    {
      "event": "locked",
      "id": 6073866717,
      "node_id": "LOE_lADOABII584XYDKhzwAAAAFqB9nd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6073866717",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T10:42:26Z",
      "lock_reason": "resolved"
    }
  ]
}