{
  "type": "issue",
  "issue": {
    "id": 307608833,
    "node_id": "MDU6SXNzdWUzMDc2MDg4MzM=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/12754",
    "number": 12754,
    "state": "closed",
    "state_reason": "completed",
    "title": "[zmq] pub/sub is not reliable at all",
    "body": "The client only subscribe `hashblock` topic, if there's no block found over than about 30 minutes on the network, the pub/sub will timeout and the client can't detect anything unusual, the client will keep waiting forever.\r\n\r\nI fix this by reconnecting, example code:\r\n\r\n```cpp\r\n#define BITCOIND_ZMQ_HASHBLOCK      \"hashblock\"\r\n\r\nconst time_t KReconnectInterval = 600;  // seconds\r\n\r\n//\r\n// check if need to reconnect ZMQ\r\n//\r\nif (subscriber == nullptr || lastRecvTime + KReconnectInterval < time(nullptr)) {\r\n  // disconnect\r\n  if (subscriber != nullptr) {\r\n    delete subscriber;\r\n    subscriber = nullptr;\r\n  }\r\n\r\n  // connect\r\n  subscriber = new zmq::socket_t(zmqContext_, ZMQ_SUB);\r\n  subscriber->connect(zmqBitcoindAddr_);\r\n\r\n  // subscribe topic\r\n  subscriber->setsockopt(ZMQ_SUBSCRIBE,\r\n                         BITCOIND_ZMQ_HASHBLOCK, strlen(BITCOIND_ZMQ_HASHBLOCK));\r\n}\r\n\r\n//\r\n// recv ZMQ messages\r\n//\r\n\r\n// ...\r\n\r\n// set last recv time\r\nlastRecvTime = time(nullptr);\r\n\r\n// ...\r\n```\r\n\r\nI am not sure if add these options by `zmq_setsockopt()` could solve this issue.\r\n\r\n```\r\n// ZMQ_HEARTBEAT_xxxx available since zmq-4.2.0\r\nZMQ_HEARTBEAT_TTL\r\nZMQ_HEARTBEAT_TIMEOUT\r\nZMQ_HEARTBEAT_IVL\r\n```\r\n\r\nMaybe could add some heartbeat messages when there's no traffic for a while? I prefer this way.\r\n\r\nSome links: \r\n* https://stackoverflow.com/questions/26112992/zeromq-pub-sub-on-unreliable-connection\r\n* https://github.com/zeromq/jeromq/issues/364",
    "user": {
      "login": "bitkevin",
      "id": 514951,
      "node_id": "MDQ6VXNlcjUxNDk1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/514951?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitkevin",
      "html_url": "https://github.com/bitkevin",
      "followers_url": "https://api.github.com/users/bitkevin/followers",
      "following_url": "https://api.github.com/users/bitkevin/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/bitkevin/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/bitkevin/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/bitkevin/subscriptions",
      "organizations_url": "https://api.github.com/users/bitkevin/orgs",
      "repos_url": "https://api.github.com/users/bitkevin/repos",
      "events_url": "https://api.github.com/users/bitkevin/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/bitkevin/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 11,
    "closed_at": "2020-12-17T07:58:01Z",
    "created_at": "2018-03-22T11:43:05Z",
    "updated_at": "2022-02-15T11:05:06Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 1535364475,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE1MzUzNjQ0NzU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1535364475",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-22T11:43:48Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "labeled",
      "id": 1543610772,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE1NDM2MTA3NzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1543610772",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-27T16:01:14Z",
      "label": {
        "name": "Upstream",
        "color": "bfd4f2"
      }
    },
    {
      "event": "commented",
      "id": 377008424,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzAwODQyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377008424",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-28T19:32:58Z",
      "updated_at": "2018-03-28T19:32:58Z",
      "author_association": "MEMBER",
      "body": "ZMQ_HEARTBEAT_* look promising, can you test with those in your test setup?",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12754#issuecomment-377008424",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754"
    },
    {
      "event": "unlabeled",
      "id": 1546408328,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50MTU0NjQwODMyOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1546408328",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-28T19:33:41Z",
      "label": {
        "name": "Upstream",
        "color": "bfd4f2"
      }
    },
    {
      "event": "commented",
      "id": 377016849,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzAxNjg0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377016849",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-03-28T20:00:50Z",
      "updated_at": "2018-03-28T20:00:50Z",
      "author_association": "MEMBER",
      "body": "ZMQ is itself unreliable. I'm not sure this is a Core issue.",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12754#issuecomment-377016849",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754"
    },
    {
      "event": "commented",
      "id": 402603088,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjYwMzA4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/402603088",
      "actor": {
        "login": "mruddy",
        "id": 6440430,
        "node_id": "MDQ6VXNlcjY0NDA0MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6440430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mruddy",
        "html_url": "https://github.com/mruddy",
        "followers_url": "https://api.github.com/users/mruddy/followers",
        "following_url": "https://api.github.com/users/mruddy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mruddy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mruddy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mruddy/subscriptions",
        "organizations_url": "https://api.github.com/users/mruddy/orgs",
        "repos_url": "https://api.github.com/users/mruddy/repos",
        "events_url": "https://api.github.com/users/mruddy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mruddy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-05T04:26:41Z",
      "updated_at": "2018-07-05T04:26:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "@bitkevin Do you have any more info on this problem? Is it caused by a middle box? Does it only happen when running with a particular node topology? Have you tried tuning TCP keepalive, or anything like that, on your host(s) to remedy the problem? Did you try the ZMQ_HEARTBEAT_* options https://github.com/zeromq/libzmq/blob/master/doc/zmq_setsockopt.txt ?\r\n\r\nI tried running a regtest node as a publisher with `./src/qt/bitcoin-qt -regtest -txindex -datadir=/tmp/node1 -zmqpubhashblock=tcp://127.0.0.1:28332 &` and `python3 contrib/zmq/zmq_sub.py` as a subscriber so that I could easily control block generation. Then I watched my loopback interface with WireShark. I generated one block, saw the packets, and then did nothing and did not see any packets go either way around the 30 minute mark with my system config. After 45 minutes of doing nothing and seeing no packet traffic for that TCP port, I generated a block and my subscriber got the message as expected from my Bitcoin node. I am using libzmq v4.2.5, if it matters.\r\n\r\nAre you able to reproduce the issue using the same tools from the bitcoin repo that I used in my test?",
      "user": {
        "login": "mruddy",
        "id": 6440430,
        "node_id": "MDQ6VXNlcjY0NDA0MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6440430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mruddy",
        "html_url": "https://github.com/mruddy",
        "followers_url": "https://api.github.com/users/mruddy/followers",
        "following_url": "https://api.github.com/users/mruddy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mruddy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mruddy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mruddy/subscriptions",
        "organizations_url": "https://api.github.com/users/mruddy/orgs",
        "repos_url": "https://api.github.com/users/mruddy/repos",
        "events_url": "https://api.github.com/users/mruddy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mruddy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12754#issuecomment-402603088",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754"
    },
    {
      "event": "mentioned",
      "id": 1717182726,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTcxNzE4MjcyNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1717182726",
      "actor": {
        "login": "bitkevin",
        "id": 514951,
        "node_id": "MDQ6VXNlcjUxNDk1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/514951?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitkevin",
        "html_url": "https://github.com/bitkevin",
        "followers_url": "https://api.github.com/users/bitkevin/followers",
        "following_url": "https://api.github.com/users/bitkevin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitkevin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitkevin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitkevin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitkevin/orgs",
        "repos_url": "https://api.github.com/users/bitkevin/repos",
        "events_url": "https://api.github.com/users/bitkevin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitkevin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-05T04:26:41Z"
    },
    {
      "event": "subscribed",
      "id": 1717182728,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3MTcxODI3Mjg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1717182728",
      "actor": {
        "login": "bitkevin",
        "id": 514951,
        "node_id": "MDQ6VXNlcjUxNDk1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/514951?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitkevin",
        "html_url": "https://github.com/bitkevin",
        "followers_url": "https://api.github.com/users/bitkevin/followers",
        "following_url": "https://api.github.com/users/bitkevin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitkevin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitkevin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitkevin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitkevin/orgs",
        "repos_url": "https://api.github.com/users/bitkevin/repos",
        "events_url": "https://api.github.com/users/bitkevin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitkevin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-05T04:26:41Z"
    },
    {
      "event": "commented",
      "id": 413982780,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzk4Mjc4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/413982780",
      "actor": {
        "login": "ch4ot1c",
        "id": 2287825,
        "node_id": "MDQ6VXNlcjIyODc4MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2287825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ch4ot1c",
        "html_url": "https://github.com/ch4ot1c",
        "followers_url": "https://api.github.com/users/ch4ot1c/followers",
        "following_url": "https://api.github.com/users/ch4ot1c/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ch4ot1c/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ch4ot1c/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ch4ot1c/subscriptions",
        "organizations_url": "https://api.github.com/users/ch4ot1c/orgs",
        "repos_url": "https://api.github.com/users/ch4ot1c/repos",
        "events_url": "https://api.github.com/users/ch4ot1c/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ch4ot1c/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-17T20:42:22Z",
      "updated_at": "2018-08-18T02:52:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "Looks like they're starting to sort it out in the ZMQ repo:\r\n\r\nhttps://github.com/zeromq/libzmq/commit/0867c380326829dc7e48e12d46b977bffad207c4\r\nhttps://github.com/zeromq/libzmq/commit/79d5ac3deeb944c9fd8a7a7a20a8b973d119fa5e\r\nhttps://github.com/zeromq/libzmq/commit/cdf556610812c172a15c53da063ffd5684c5d995\r\n\r\nWe should probably await a fresh release / sufficient tests, but can begin on the implementation with 4.2.3 (using `zmq_setsockopt` and `ZMQ_HEARTBEAT_IVL`/`TIMEOUT`/`TTL`. I'll take a crack at it this week.\r\n\r\nhttp://api.zeromq.org/4-2:zmq-setsockopt#toc17\r\n\r\nhttps://github.com/zeromq/libzmq/blob/master/tests/test_heartbeats.cpp#L425",
      "user": {
        "login": "ch4ot1c",
        "id": 2287825,
        "node_id": "MDQ6VXNlcjIyODc4MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2287825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ch4ot1c",
        "html_url": "https://github.com/ch4ot1c",
        "followers_url": "https://api.github.com/users/ch4ot1c/followers",
        "following_url": "https://api.github.com/users/ch4ot1c/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ch4ot1c/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ch4ot1c/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ch4ot1c/subscriptions",
        "organizations_url": "https://api.github.com/users/ch4ot1c/orgs",
        "repos_url": "https://api.github.com/users/ch4ot1c/repos",
        "events_url": "https://api.github.com/users/ch4ot1c/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ch4ot1c/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12754#issuecomment-413982780",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754"
    },
    {
      "event": "commented",
      "id": 414051841,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDA1MTg0MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/414051841",
      "actor": {
        "login": "mruddy",
        "id": 6440430,
        "node_id": "MDQ6VXNlcjY0NDA0MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6440430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mruddy",
        "html_url": "https://github.com/mruddy",
        "followers_url": "https://api.github.com/users/mruddy/followers",
        "following_url": "https://api.github.com/users/mruddy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mruddy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mruddy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mruddy/subscriptions",
        "organizations_url": "https://api.github.com/users/mruddy/orgs",
        "repos_url": "https://api.github.com/users/mruddy/repos",
        "events_url": "https://api.github.com/users/mruddy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mruddy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-18T11:36:05Z",
      "updated_at": "2018-08-18T11:36:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "@ch4ot1c Are you able to reproduce the issue using the same tools from the bitcoin repo that I used in my test?",
      "user": {
        "login": "mruddy",
        "id": 6440430,
        "node_id": "MDQ6VXNlcjY0NDA0MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6440430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mruddy",
        "html_url": "https://github.com/mruddy",
        "followers_url": "https://api.github.com/users/mruddy/followers",
        "following_url": "https://api.github.com/users/mruddy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mruddy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mruddy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mruddy/subscriptions",
        "organizations_url": "https://api.github.com/users/mruddy/orgs",
        "repos_url": "https://api.github.com/users/mruddy/repos",
        "events_url": "https://api.github.com/users/mruddy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mruddy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12754#issuecomment-414051841",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754"
    },
    {
      "event": "mentioned",
      "id": 1795948176,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTc5NTk0ODE3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1795948176",
      "actor": {
        "login": "ch4ot1c",
        "id": 2287825,
        "node_id": "MDQ6VXNlcjIyODc4MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2287825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ch4ot1c",
        "html_url": "https://github.com/ch4ot1c",
        "followers_url": "https://api.github.com/users/ch4ot1c/followers",
        "following_url": "https://api.github.com/users/ch4ot1c/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ch4ot1c/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ch4ot1c/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ch4ot1c/subscriptions",
        "organizations_url": "https://api.github.com/users/ch4ot1c/orgs",
        "repos_url": "https://api.github.com/users/ch4ot1c/repos",
        "events_url": "https://api.github.com/users/ch4ot1c/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ch4ot1c/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-18T11:36:05Z"
    },
    {
      "event": "subscribed",
      "id": 1795948178,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3OTU5NDgxNzg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1795948178",
      "actor": {
        "login": "ch4ot1c",
        "id": 2287825,
        "node_id": "MDQ6VXNlcjIyODc4MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2287825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ch4ot1c",
        "html_url": "https://github.com/ch4ot1c",
        "followers_url": "https://api.github.com/users/ch4ot1c/followers",
        "following_url": "https://api.github.com/users/ch4ot1c/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ch4ot1c/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ch4ot1c/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ch4ot1c/subscriptions",
        "organizations_url": "https://api.github.com/users/ch4ot1c/orgs",
        "repos_url": "https://api.github.com/users/ch4ot1c/repos",
        "events_url": "https://api.github.com/users/ch4ot1c/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ch4ot1c/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-18T11:36:05Z"
    },
    {
      "event": "commented",
      "id": 414408828,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDQwODgyOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/414408828",
      "actor": {
        "login": "ch4ot1c",
        "id": 2287825,
        "node_id": "MDQ6VXNlcjIyODc4MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2287825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ch4ot1c",
        "html_url": "https://github.com/ch4ot1c",
        "followers_url": "https://api.github.com/users/ch4ot1c/followers",
        "following_url": "https://api.github.com/users/ch4ot1c/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ch4ot1c/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ch4ot1c/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ch4ot1c/subscriptions",
        "organizations_url": "https://api.github.com/users/ch4ot1c/orgs",
        "repos_url": "https://api.github.com/users/ch4ot1c/repos",
        "events_url": "https://api.github.com/users/ch4ot1c/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ch4ot1c/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-20T18:03:14Z",
      "updated_at": "2018-08-21T01:11:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "@mruddy Just tried it out, got the same results - everything seems to still be connected and appear immediately (block 7 here, after a `generate 1` after 45 minutes, port 28332):\r\n\r\n<img width=\"791\" alt=\"screen shot 2018-08-20 at 1 00 24 pm\" src=\"https://user-images.githubusercontent.com/2287825/44357995-4460e900-a479-11e8-8efe-db8349c71f0f.png\">\r\n\r\nMaybe this is a timeout due to a middle box topology, like you mentioned?",
      "user": {
        "login": "ch4ot1c",
        "id": 2287825,
        "node_id": "MDQ6VXNlcjIyODc4MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2287825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ch4ot1c",
        "html_url": "https://github.com/ch4ot1c",
        "followers_url": "https://api.github.com/users/ch4ot1c/followers",
        "following_url": "https://api.github.com/users/ch4ot1c/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ch4ot1c/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ch4ot1c/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ch4ot1c/subscriptions",
        "organizations_url": "https://api.github.com/users/ch4ot1c/orgs",
        "repos_url": "https://api.github.com/users/ch4ot1c/repos",
        "events_url": "https://api.github.com/users/ch4ot1c/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ch4ot1c/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12754#issuecomment-414408828",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754"
    },
    {
      "event": "mentioned",
      "id": 1798330956,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTc5ODMzMDk1Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1798330956",
      "actor": {
        "login": "mruddy",
        "id": 6440430,
        "node_id": "MDQ6VXNlcjY0NDA0MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6440430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mruddy",
        "html_url": "https://github.com/mruddy",
        "followers_url": "https://api.github.com/users/mruddy/followers",
        "following_url": "https://api.github.com/users/mruddy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mruddy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mruddy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mruddy/subscriptions",
        "organizations_url": "https://api.github.com/users/mruddy/orgs",
        "repos_url": "https://api.github.com/users/mruddy/repos",
        "events_url": "https://api.github.com/users/mruddy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mruddy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-20T18:03:14Z"
    },
    {
      "event": "subscribed",
      "id": 1798330958,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE3OTgzMzA5NTg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1798330958",
      "actor": {
        "login": "mruddy",
        "id": 6440430,
        "node_id": "MDQ6VXNlcjY0NDA0MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6440430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mruddy",
        "html_url": "https://github.com/mruddy",
        "followers_url": "https://api.github.com/users/mruddy/followers",
        "following_url": "https://api.github.com/users/mruddy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mruddy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mruddy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mruddy/subscriptions",
        "organizations_url": "https://api.github.com/users/mruddy/orgs",
        "repos_url": "https://api.github.com/users/mruddy/repos",
        "events_url": "https://api.github.com/users/mruddy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mruddy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-20T18:03:14Z"
    },
    {
      "event": "commented",
      "id": 415992268,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTk5MjI2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/415992268",
      "actor": {
        "login": "mruddy",
        "id": 6440430,
        "node_id": "MDQ6VXNlcjY0NDA0MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6440430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mruddy",
        "html_url": "https://github.com/mruddy",
        "followers_url": "https://api.github.com/users/mruddy/followers",
        "following_url": "https://api.github.com/users/mruddy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mruddy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mruddy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mruddy/subscriptions",
        "organizations_url": "https://api.github.com/users/mruddy/orgs",
        "repos_url": "https://api.github.com/users/mruddy/repos",
        "events_url": "https://api.github.com/users/mruddy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mruddy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-25T19:45:46Z",
      "updated_at": "2018-11-08T10:49:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "@ch4ot1c Thanks for confirming what you see!\r\n\r\nI'm convinced that this behavior is caused by middle boxes. The OP could confirm with a little command line inspection using tools like `netstat`, `ss`, and `tcpdump`. He could verify that both sides think the connection is established and that some packets are sent, but not received, when this condition occurs.\r\n\r\nWith the middle box idea in mind, I've reproduced this behavior with a topology spread across multiple hosts with multiple NATs and firewalls in between.\r\n\r\nThe thing is that the ZMQ PUB sockets are not being created with TCP keep-alive enabled (i.e.- SO_KEEPALIVE, or more specifically to libzmq, setting `ZMQ_TCP_KEEPALIVE` to 1 in `CZMQAbstractPublishNotifier::Initialize`) This is easily verified with th the `-o` option to `netstat` or `ss`. I think enabling TCP keep-alive is what we want to do here because we want to keep the connection alive and we are not concerned if the other side is alive (what app level heartbeating is designed to do). Plus, using the TCP keep-alive options means we don't have to bump the min required library version (the heartbeat options are newer, see https://github.com/zeromq/libzmq/releases/tag/v4.2.0).\r\n\r\nSo, one way we can go is to set `ZMQ_TCP_KEEPALIVE` to 1 and then use the operating system provided defaults for keep alive interval and probes to fail before killing the connection. That works for me when the OS settings are set low enough to keep the middle boxes from forgetting the connection. The values must be set before ~~starting the bitcoin process~~ the connection is established.\r\n\r\nThe other way we could go is to set `ZMQ_TCP_KEEPALIVE` to 1 and then also provide bitcoin command line args to customize the other ZMQ ZMQ_TCP_KEEPALIVE_* socket options (see http://api.zeromq.org/4-2:zmq-setsockopt).\r\n\r\nFor more on the OS keep alive settings see `/proc/sys/net/ipv4/tcp_keepalive_time`, `/proc/sys/net/ipv4/tcp_keepalive_intvl`, and `/proc/sys/net/ipv4/tcp_keepalive_probes` in `man 7 tcp`.\r\n\r\nSo I don't forget, something like this works (added in `src/zmq/zmqpublishnotifier.cpp` before `zmq_bind`):\r\n```\r\n        const int so_keepalive_option = 1;\r\n\r\n        rc = zmq_setsockopt(psocket, ZMQ_TCP_KEEPALIVE, &so_keepalive_option, sizeof(so_keepalive_option));\r\n        if (rc != 0)\r\n        {\r\n            zmqError(\"Failed to set SO_KEEPALIVE\");\r\n            zmq_close(psocket);\r\n            return false;\r\n        }\r\n```",
      "user": {
        "login": "mruddy",
        "id": 6440430,
        "node_id": "MDQ6VXNlcjY0NDA0MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6440430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mruddy",
        "html_url": "https://github.com/mruddy",
        "followers_url": "https://api.github.com/users/mruddy/followers",
        "following_url": "https://api.github.com/users/mruddy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mruddy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mruddy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mruddy/subscriptions",
        "organizations_url": "https://api.github.com/users/mruddy/orgs",
        "repos_url": "https://api.github.com/users/mruddy/repos",
        "events_url": "https://api.github.com/users/mruddy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mruddy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12754#issuecomment-415992268",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754"
    },
    {
      "event": "mentioned",
      "id": 1809113692,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTgwOTExMzY5Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1809113692",
      "actor": {
        "login": "ch4ot1c",
        "id": 2287825,
        "node_id": "MDQ6VXNlcjIyODc4MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2287825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ch4ot1c",
        "html_url": "https://github.com/ch4ot1c",
        "followers_url": "https://api.github.com/users/ch4ot1c/followers",
        "following_url": "https://api.github.com/users/ch4ot1c/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ch4ot1c/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ch4ot1c/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ch4ot1c/subscriptions",
        "organizations_url": "https://api.github.com/users/ch4ot1c/orgs",
        "repos_url": "https://api.github.com/users/ch4ot1c/repos",
        "events_url": "https://api.github.com/users/ch4ot1c/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ch4ot1c/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-25T19:45:46Z"
    },
    {
      "event": "subscribed",
      "id": 1809113693,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE4MDkxMTM2OTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1809113693",
      "actor": {
        "login": "ch4ot1c",
        "id": 2287825,
        "node_id": "MDQ6VXNlcjIyODc4MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2287825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ch4ot1c",
        "html_url": "https://github.com/ch4ot1c",
        "followers_url": "https://api.github.com/users/ch4ot1c/followers",
        "following_url": "https://api.github.com/users/ch4ot1c/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ch4ot1c/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ch4ot1c/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ch4ot1c/subscriptions",
        "organizations_url": "https://api.github.com/users/ch4ot1c/orgs",
        "repos_url": "https://api.github.com/users/ch4ot1c/repos",
        "events_url": "https://api.github.com/users/ch4ot1c/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ch4ot1c/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-08-25T19:45:46Z"
    },
    {
      "event": "commented",
      "id": 418132977,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQxODEzMjk3Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/418132977",
      "actor": {
        "login": "bitkevin",
        "id": 514951,
        "node_id": "MDQ6VXNlcjUxNDk1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/514951?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitkevin",
        "html_url": "https://github.com/bitkevin",
        "followers_url": "https://api.github.com/users/bitkevin/followers",
        "following_url": "https://api.github.com/users/bitkevin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitkevin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitkevin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitkevin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitkevin/orgs",
        "repos_url": "https://api.github.com/users/bitkevin/repos",
        "events_url": "https://api.github.com/users/bitkevin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitkevin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-09-03T14:34:14Z",
      "updated_at": "2018-09-03T14:34:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "After read zmq doc, still have no idea how to use `ZMQ_HEARTBEAT_*`, copy some code snippets, try use `zmq_socket_monitor()`, heartbeat still not work, no timeout event or similar event.\r\n\r\nBut reconnect after no message in a while is very stable.",
      "user": {
        "login": "bitkevin",
        "id": 514951,
        "node_id": "MDQ6VXNlcjUxNDk1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/514951?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitkevin",
        "html_url": "https://github.com/bitkevin",
        "followers_url": "https://api.github.com/users/bitkevin/followers",
        "following_url": "https://api.github.com/users/bitkevin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitkevin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitkevin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitkevin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitkevin/orgs",
        "repos_url": "https://api.github.com/users/bitkevin/repos",
        "events_url": "https://api.github.com/users/bitkevin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitkevin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12754#issuecomment-418132977",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754"
    },
    {
      "event": "commented",
      "id": 420448433,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDQ0ODQzMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/420448433",
      "actor": {
        "login": "mruddy",
        "id": 6440430,
        "node_id": "MDQ6VXNlcjY0NDA0MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6440430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mruddy",
        "html_url": "https://github.com/mruddy",
        "followers_url": "https://api.github.com/users/mruddy/followers",
        "following_url": "https://api.github.com/users/mruddy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mruddy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mruddy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mruddy/subscriptions",
        "organizations_url": "https://api.github.com/users/mruddy/orgs",
        "repos_url": "https://api.github.com/users/mruddy/repos",
        "events_url": "https://api.github.com/users/mruddy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mruddy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-09-11T22:31:54Z",
      "updated_at": "2018-09-11T22:31:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "`ZMQ_HEARTBEAT_*` is not what you want. i'll make some `ZMQ_TCP_KEEPALIVE` changes available after some of my other zmq stuff gets merged to avoid having to rebase more than necessary.",
      "user": {
        "login": "mruddy",
        "id": 6440430,
        "node_id": "MDQ6VXNlcjY0NDA0MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6440430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mruddy",
        "html_url": "https://github.com/mruddy",
        "followers_url": "https://api.github.com/users/mruddy/followers",
        "following_url": "https://api.github.com/users/mruddy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mruddy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mruddy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mruddy/subscriptions",
        "organizations_url": "https://api.github.com/users/mruddy/orgs",
        "repos_url": "https://api.github.com/users/mruddy/repos",
        "events_url": "https://api.github.com/users/mruddy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mruddy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12754#issuecomment-420448433",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754"
    },
    {
      "event": "referenced",
      "id": 3718189711,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM3MTgxODk3MTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3718189711",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3a3e21dafb721e96fc60355462f93d9edfda528c",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3a3e21dafb721e96fc60355462f93d9edfda528c",
      "created_at": "2020-09-02T07:09:38Z"
    },
    {
      "event": "referenced",
      "id": 3725599276,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM3MjU1OTkyNzY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3725599276",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "73c1218670038d95f10dfc7552dfc3ee8b7d48e2",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/73c1218670038d95f10dfc7552dfc3ee8b7d48e2",
      "created_at": "2020-09-03T16:31:23Z"
    },
    {
      "event": "commented",
      "id": 747094004,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzA5NDAwNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747094004",
      "actor": {
        "login": "adamjonas",
        "id": 755825,
        "node_id": "MDQ6VXNlcjc1NTgyNQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/755825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjonas",
        "html_url": "https://github.com/adamjonas",
        "followers_url": "https://api.github.com/users/adamjonas/followers",
        "following_url": "https://api.github.com/users/adamjonas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/adamjonas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/adamjonas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/adamjonas/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjonas/orgs",
        "repos_url": "https://api.github.com/users/adamjonas/repos",
        "events_url": "https://api.github.com/users/adamjonas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/adamjonas/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-16T23:05:18Z",
      "updated_at": "2020-12-16T23:05:18Z",
      "author_association": "MEMBER",
      "body": "Closed by #14687.",
      "user": {
        "login": "adamjonas",
        "id": 755825,
        "node_id": "MDQ6VXNlcjc1NTgyNQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/755825?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adamjonas",
        "html_url": "https://github.com/adamjonas",
        "followers_url": "https://api.github.com/users/adamjonas/followers",
        "following_url": "https://api.github.com/users/adamjonas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/adamjonas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/adamjonas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/adamjonas/subscriptions",
        "organizations_url": "https://api.github.com/users/adamjonas/orgs",
        "repos_url": "https://api.github.com/users/adamjonas/repos",
        "events_url": "https://api.github.com/users/adamjonas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/adamjonas/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12754#issuecomment-747094004",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754"
    },
    {
      "event": "commented",
      "id": 747277317,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzI3NzMxNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747277317",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-17T07:58:01Z",
      "updated_at": "2020-12-17T07:58:01Z",
      "author_association": "MEMBER",
      "body": "Is this still an issue with a recent version of Bitcoin Core? If yes, what are the steps to reproduce?",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12754#issuecomment-747277317",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12754"
    },
    {
      "event": "closed",
      "id": 4123771044,
      "node_id": "MDExOkNsb3NlZEV2ZW50NDEyMzc3MTA0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4123771044",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-17T07:58:02Z"
    },
    {
      "event": "referenced",
      "id": 5321369425,
      "node_id": "REFE_lADOABII584SVb0BzwAAAAE9LadR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5321369425",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9d7f30252cacd5f4f7968dd116c45dca5352e0f1",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/9d7f30252cacd5f4f7968dd116c45dca5352e0f1",
      "created_at": "2021-09-17T20:06:56Z"
    },
    {
      "event": "referenced",
      "id": 5357450169,
      "node_id": "REFE_lADOABII584SVb0BzwAAAAE_VDO5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5357450169",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "516cfb54c574952d7bf015c80fa03603e64f3719",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/516cfb54c574952d7bf015c80fa03603e64f3719",
      "created_at": "2021-09-24T17:27:05Z"
    },
    {
      "event": "referenced",
      "id": 5446824531,
      "node_id": "REFE_lADOABII584SVb0BzwAAAAFEp_JT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5446824531",
      "actor": {
        "login": "kittywhiskers",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kittywhiskers",
        "html_url": "https://github.com/kittywhiskers",
        "followers_url": "https://api.github.com/users/kittywhiskers/followers",
        "following_url": "https://api.github.com/users/kittywhiskers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kittywhiskers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kittywhiskers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kittywhiskers/subscriptions",
        "organizations_url": "https://api.github.com/users/kittywhiskers/orgs",
        "repos_url": "https://api.github.com/users/kittywhiskers/repos",
        "events_url": "https://api.github.com/users/kittywhiskers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kittywhiskers/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4bb73be509c779eaf5eabae7f2f8baff1bc969e9",
      "commit_url": "https://api.github.com/repos/kittywhiskers/dash/commits/4bb73be509c779eaf5eabae7f2f8baff1bc969e9",
      "created_at": "2021-10-12T04:14:06Z"
    },
    {
      "event": "locked",
      "id": 6074020448,
      "node_id": "LOE_lADOABII584SVb0BzwAAAAFqCjJg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6074020448",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T11:05:06Z",
      "lock_reason": "resolved"
    }
  ]
}