{
  "type": "issue",
  "issue": {
    "id": 1004101948,
    "node_id": "I_kwDOABII58472WE8",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23062",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23062/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23062/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23062/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/23062",
    "number": 23062,
    "state": "open",
    "state_reason": null,
    "title": "Int command line settings silently fail to be used in a bool context",
    "body": "Command line args to set int values can't easily be used in a bool context. In fact, they will silently do the wrong thing.\r\n\r\nFor example, setting `-checkaddrman` will silently *disable* the checks, instead of enabling them.\r\n\r\nObviously reading the documentation would avoid those mishaps, but it still feels wrong to silently do the opposite thing the user asked for.\r\n\r\nSame for: `-mempoolexpiry`, `-par`, and pretty much any other int setting that can be mistaken as a bool setting. ",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 241832923,
        "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
        "name": "Utils/log/libs",
        "description": "",
        "color": "5319e7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 1,
    "created_at": "2021-09-22T10:01:53Z",
    "updated_at": "2021-09-22T13:13:20Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 5342021527,
      "node_id": "LE_lADOABII58472WE8zwAAAAE-aMeX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5342021527",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-22T10:02:09Z",
      "label": {
        "name": "Utils/log/libs",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 924918055,
      "node_id": "IC_kwDOABII5843ISEn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/924918055",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-22T13:13:20Z",
      "updated_at": "2021-09-22T13:13:20Z",
      "author_association": "MEMBER",
      "body": "Few thoughts:\r\n\r\n- I think it's good to only change the way options are interpreted in targeted PRs like [#23061](https://github.com/bitcoin/bitcoin/pull/23061), and in general be as careful as possible changing what any existing option does.\r\n- Changes in how options are interpreted should be well documented:\r\n  -  At minimum, I think PRs changing this should have release notes saying \"Option `-X` previously did `Y`, starting from this release the new behavior is `Z`.\"\r\n  - Ideally, I think these changes be a part of man and -help documentation, even though we don't have a precedent for doing this. I think ideally help should look like \"-flag: \\<description of flag>. Behavior of this option changed in version `V`. Previously `X` did `Y` instead of `Z`.\" The information about previous versions could be removed after those versions are no longer supported.\r\n\r\n- If any options can have a big impact on security or privacy or performance, it would be better to avoid changing their behavior at all, and instead just add new options to replace them. This could be done with errors \"Option `-X` has been removed. Please use option `-Y` instead\" or warnings \"Option `-X` is deprecated, please use option `-Y` instead\"\r\n\r\n- In [#16545](https://github.com/bitcoin/bitcoin/pull/16545), with the ALLOW_INT flag, this problem would not happen. The ambiguous syntax would trigger \"[Can not set -xxx with no value. It must be set to an integer](https://github.com/ryanofsky/bitcoin/blob/c7ba71fb9165b1aae22d4b55a7f804223d5be3a0/src/test/util_tests.cpp#L353)\" errors ",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/23062#issuecomment-924918055",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23062"
    }
  ]
}