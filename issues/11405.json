{
  "type": "issue",
  "issue": {
    "id": 260641986,
    "node_id": "MDU6SXNzdWUyNjA2NDE5ODY=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11405",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11405/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11405/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11405/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/11405",
    "number": 11405,
    "state": "closed",
    "state_reason": "completed",
    "title": "Feature request: single payment only addresses",
    "body": "I'm not really sure if this is even possible.\r\n\r\nThe way I would like to request payments is such that, the address only accepts the requested payment amount, and it only accepts it once. All other attempts are denied.\r\n\r\nThree reasons:\r\n\r\n1. Payers might believe they can send a payment to an old address to pay for a bill. That is wrong, but if it happens, the payee would need to go hunting for their payment, or else coldly deny them their service.\r\n2. The correct amount is required. (advantage is obvious)\r\n3. Some people think they can just donate to any address that they believe you hold, and I guess that works technically, but from an accounting stand-point, it is not certain which fund a donation might go to. You'd need to create a new minor account for dust transactions that you never intended to receive.\r\n\r\nIs this possible at any level?",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ghost/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ghost/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 2,
    "closed_at": "2017-09-28T02:51:39Z",
    "created_at": "2017-09-26T14:20:14Z",
    "updated_at": "2021-09-08T12:26:29Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 332395194,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjM5NTE5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/332395194",
      "actor": {
        "login": "john-light",
        "id": 9424721,
        "node_id": "MDQ6VXNlcjk0MjQ3MjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9424721?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-light",
        "html_url": "https://github.com/john-light",
        "followers_url": "https://api.github.com/users/john-light/followers",
        "following_url": "https://api.github.com/users/john-light/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-light/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-light/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-light/subscriptions",
        "organizations_url": "https://api.github.com/users/john-light/orgs",
        "repos_url": "https://api.github.com/users/john-light/repos",
        "events_url": "https://api.github.com/users/john-light/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-light/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-27T03:01:46Z",
      "updated_at": "2017-09-27T03:01:46Z",
      "author_association": "NONE",
      "body": "What you're asking for is possible but would result in extra resource usage for full nodes. Such a new rule would be implemented like this:  \r\n\r\n1. When address Y is created with this special rule, the owner broadcasts transaction X specifying that address Y can only accept amount Z, no more or less, and no further transactions after balance Z is reached.  \r\n2. After transaction X is confirmed, all nodes would then have to check each new transaction that is relayed to make sure it conforms with the rule set by transaction X. It's basically adding a new protocol rule for each address that has this special rule.  \r\n3. Any transactions (or blocks that include such transactions) that violate this rule for address Y will be rejected as invalid.  \r\n\r\nSo this special rule will result in at least 2x blockchain load for each special address that is used (one tx to create the rule, one tx to receive the payment) and will also result in an additional resource load on all nodes (akin to permanently increasing the UTXO set by the number of special addresses that are created, since the rule must be enforced forever).  \r\n\r\nTo sum up, you have two concerns:  \r\n\r\n1. You don't want people to reuse an address, and  \r\n2. You only want the address to accept a specified amount.  \r\n\r\n(1) can be addressed using [BIP-0047](https://github.com/bitcoin/bips/blob/master/bip-0047.mediawiki) bitcoin payment codes. (2) can be addressed off-chain using e.g. [BIP-0070](https://github.com/bitcoin/bips/blob/master/bip-0070.mediawiki) payment requests; if the payer overpays, you can refund them the difference, and if the payer underpays, you (or the UI) can tell them as much and request they send more, else refund the balance (minus tx fees, perhaps).  ",
      "user": {
        "login": "john-light",
        "id": 9424721,
        "node_id": "MDQ6VXNlcjk0MjQ3MjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9424721?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-light",
        "html_url": "https://github.com/john-light",
        "followers_url": "https://api.github.com/users/john-light/followers",
        "following_url": "https://api.github.com/users/john-light/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-light/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-light/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-light/subscriptions",
        "organizations_url": "https://api.github.com/users/john-light/orgs",
        "repos_url": "https://api.github.com/users/john-light/repos",
        "events_url": "https://api.github.com/users/john-light/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-light/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11405#issuecomment-332395194",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11405"
    },
    {
      "event": "commented",
      "id": 332712773,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjcxMjc3Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/332712773",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-28T02:51:39Z",
      "updated_at": "2017-09-28T02:51:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think this is the wrong place to discuss this (although I think it's an important topic).\r\n\r\nPlease move this to the bitcoin-dev mailing list or contribute/read the current Thread with a similar topic by @petertodd: https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/015063.html\r\n\r\nClosing.",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11405#issuecomment-332712773",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11405"
    },
    {
      "event": "mentioned",
      "id": 1268972163,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTI2ODk3MjE2Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1268972163",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-28T02:51:39Z"
    },
    {
      "event": "subscribed",
      "id": 1268972164,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEyNjg5NzIxNjQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1268972164",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-28T02:51:39Z"
    },
    {
      "event": "closed",
      "id": 1268972166,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTI2ODk3MjE2Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1268972166",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-28T02:51:39Z"
    },
    {
      "event": "locked",
      "id": 5271970850,
      "node_id": "LOE_lADOABII584PiRTCzwAAAAE6O-Qi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271970850",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:26:29Z",
      "lock_reason": "resolved"
    }
  ]
}