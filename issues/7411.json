{
  "type": "issue",
  "issue": {
    "id": 128459714,
    "node_id": "MDU6SXNzdWUxMjg0NTk3MTQ=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7411",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7411/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7411/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7411/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/7411",
    "number": 7411,
    "state": "closed",
    "state_reason": "completed",
    "title": "Giving manual CXXFLAGS to make results in errors when compiling",
    "body": "I am compiling v0.12.0rc2 for Raspbian Jessie on a Raspberry Pi 2. Since it\nonly has 1 GB of memory and no swap, I am following Luke-jr's workaround in\nissue 6658 to make gcc use less memory by options for more aggressive garbage\ncollecting.\n\nWhen I invoke make:\n\n```\n$ make CXXFLAGS=\"--param ggc-min-expand=1 --param ggc-min-heapsize=32768\"\n```\n\nIt solves the memory use problem for the first part of the build, however it\ngets to compiling leveldb objects and errors:\n\n```\nBuilding LevelDB ...\nmake[3]: Entering directory '/home/jarret/git/bitcoin/src/leveldb'\ng++ --param ggc-min-expand=1 --param ggc-min-heapsize=32768 -c helpers/memenv/memenv.cc -o helpers/memenv/memenv.o\nhelpers/memenv/memenv.cc:5:35: fatal error: helpers/memenv/memenv.h: No such file or directory\n#include \"helpers/memenv/memenv.h\"\n                               ^\n```\n\nI see that g++ is getting invoked here without the full set of normal flags\nincluding the '-I.' to find the memenv.h header in this error.\n\nIf I reissue the make in debug mode without specifying any manual CXXFLAGS:\n\n```\n$ make -d\n```\n\nI see that the normal compilation of this source file looks like this:\n\n```\ng++ -I. -I./include -std=c++0x -fno-builtin-memcmp -pthread -DOS_LINUX -DLEVELDB_PLATFORM_POSIX -DLEVELDB_ATOMIC_PRESENT -Wstack-protector -fstack-protector-all -fPIE --param ggc-min-expand=1 --param ggc-min-heapsize=32768 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=2 -DHAVE_BUILD_INFO -D__STDC_FORMAT_MACROS -D_FILE_OFFSET_BITS=64 -D__STDC_LIMIT_MACROS -c helpers/memenv/memenv.cc -o helpers/memenv/memenv.o\n```\n\nFor which I find that it now doing this correctly, and it successfully builds.\nSomehow, it gets the ggc-min-expand and ggc-min-heapsize parameters in there too, which\nmust be residual from the first invocation - strange.\n\nWorkaround 1:\n\nOnce leveldb is done building, I can Ctrl-C the build and then go back to the\nmanual CXXFLAGS. This builds fine until the end without running out of memory.\n\nWorkaround 2:\n\nSpecify the CXXFLAGS at configure time:\n\n```\n$ ./configure --disable-wallet CXXFLAGS=\"--param ggc-min-expand=1 --param ggc-min-heapsize=32768\"\n```\n",
    "user": {
      "login": "jarret",
      "id": 528853,
      "node_id": "MDQ6VXNlcjUyODg1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/528853?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jarret",
      "html_url": "https://github.com/jarret",
      "followers_url": "https://api.github.com/users/jarret/followers",
      "following_url": "https://api.github.com/users/jarret/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jarret/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jarret/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jarret/subscriptions",
      "organizations_url": "https://api.github.com/users/jarret/orgs",
      "repos_url": "https://api.github.com/users/jarret/repos",
      "events_url": "https://api.github.com/users/jarret/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jarret/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 61889416,
        "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
        "name": "Build system",
        "color": "5319e7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 5,
    "closed_at": "2016-01-27T11:39:25Z",
    "created_at": "2016-01-25T04:38:20Z",
    "updated_at": "2021-09-08T12:23:27Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 174398527,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDM5ODUyNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/174398527",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-01-25T04:52:59Z",
      "updated_at": "2016-01-25T04:52:59Z",
      "author_association": "MEMBER",
      "body": "I think this is typical/expected for automake?\n",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/7411#issuecomment-174398527",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7411"
    },
    {
      "event": "labeled",
      "id": 524664368,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDUyNDY2NDM2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/524664368",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-01-25T07:55:22Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 174562148,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDU2MjE0OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/174562148",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-01-25T16:20:44Z",
      "updated_at": "2016-01-25T16:20:44Z",
      "author_association": "MEMBER",
      "body": "I always pass my custom CXXFLAGS, CPPFLAGS, CFLAGS to `./configure` instead of make. Maybe that works better? At least I've never had issues.\n",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/7411#issuecomment-174562148",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7411"
    },
    {
      "event": "commented",
      "id": 174624923,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDYyNDkyMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/174624923",
      "actor": {
        "login": "jarret",
        "id": 528853,
        "node_id": "MDQ6VXNlcjUyODg1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528853?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jarret",
        "html_url": "https://github.com/jarret",
        "followers_url": "https://api.github.com/users/jarret/followers",
        "following_url": "https://api.github.com/users/jarret/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jarret/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jarret/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jarret/subscriptions",
        "organizations_url": "https://api.github.com/users/jarret/orgs",
        "repos_url": "https://api.github.com/users/jarret/repos",
        "events_url": "https://api.github.com/users/jarret/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jarret/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-01-25T19:11:19Z",
      "updated_at": "2016-01-25T19:11:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "Yes, I can confirm that giving the flags to './configure' works as expected. Giving them to 'make' only trips up at the leveldb part as described.\n",
      "user": {
        "login": "jarret",
        "id": 528853,
        "node_id": "MDQ6VXNlcjUyODg1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528853?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jarret",
        "html_url": "https://github.com/jarret",
        "followers_url": "https://api.github.com/users/jarret/followers",
        "following_url": "https://api.github.com/users/jarret/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jarret/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jarret/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jarret/subscriptions",
        "organizations_url": "https://api.github.com/users/jarret/orgs",
        "repos_url": "https://api.github.com/users/jarret/repos",
        "events_url": "https://api.github.com/users/jarret/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jarret/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/7411#issuecomment-174624923",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7411"
    },
    {
      "event": "commented",
      "id": 174628103,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDYyODEwMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/174628103",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-01-25T19:23:03Z",
      "updated_at": "2016-01-25T19:23:03Z",
      "author_association": "MEMBER",
      "body": "Yep, what they said. Pass them to configure so they persist.\n",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/7411#issuecomment-174628103",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7411"
    },
    {
      "event": "commented",
      "id": 175574112,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE3NTU3NDExMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/175574112",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-01-27T11:39:25Z",
      "updated_at": "2016-01-27T11:39:25Z",
      "author_association": "MEMBER",
      "body": "Ok, closing this issue then.\n",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/7411#issuecomment-175574112",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7411"
    },
    {
      "event": "closed",
      "id": 527966173,
      "node_id": "MDExOkNsb3NlZEV2ZW50NTI3OTY2MTcz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/527966173",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-01-27T11:39:25Z"
    },
    {
      "event": "locked",
      "id": 5271954661,
      "node_id": "LOE_lADOABII584HqCPCzwAAAAE6O6Tl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271954661",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:23:27Z",
      "lock_reason": "resolved"
    }
  ]
}