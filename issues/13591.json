{
  "type": "issue",
  "issue": {
    "id": 338001479,
    "node_id": "MDU6SXNzdWUzMzgwMDE0Nzk=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13591",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13591/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13591/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13591/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/13591",
    "number": 13591,
    "state": "closed",
    "state_reason": "completed",
    "title": "Deploying Private Testnet",
    "body": "Trying to deploy a private testnet in a local environment. I'm coming over from the Ethereum side, so I'm used to how things run in  geth where I can initialize a custom genesis file on node 1, indicate a data directory, and then create a static peers JSON file to allow separate nodes that I control to join the testnet. So far, I haven't found any way to do this. \r\n\r\nIn chainparams.cpp, we commented out the DNS seeds (around lines 132-140) that are predefined and replaced them with our own. \r\n\r\nI then created a custom bitcoin.conf file which contains:\r\n\r\n`connect=[node 1 ip addr]:8333 \r\nconnect=[node 2 ip addr]:8333 \r\nconnect=[node 3 ip addr]:8333 \r\nconnect=[node 4 ip addr]:8333 \r\n`\r\nThen I run the following command to start bitcoind: \r\n\r\n`bitcoind -conf=/home/appo/bitcoin/bitcoin.conf -port=8333`\r\n\r\nFirst problem:\r\n`connect() to [node ip addr]:8333 failed after select(): Connection refused (111)`\r\n\r\nI also notice that it's still loading peers from peers.dat even though I've disabled DNS seeding (I think) and it's also referencing the mainnet chain state, but I'd like to create a new genesis block. \r\n\r\nI'm trying to test in a local environment by essentially forking Bitcoin to allow me to run tests without any external dependancies, so TL;DR what I need is to be able to:\r\n\r\n1. Initialize a new genesis block so we don't need to reference any of the historical chain data and can create our own fork. This is so we can run functional performance tests in a controlled environment. \r\n2. Either manually peer or allow discovery of only specific nodes within our network that we control.  \r\n\r\nAny help would be appreciated. Thanks!\r\n",
    "user": {
      "login": "zscole",
      "id": 20308948,
      "node_id": "MDQ6VXNlcjIwMzA4OTQ4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20308948?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zscole",
      "html_url": "https://github.com/zscole",
      "followers_url": "https://api.github.com/users/zscole/followers",
      "following_url": "https://api.github.com/users/zscole/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/zscole/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/zscole/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/zscole/subscriptions",
      "organizations_url": "https://api.github.com/users/zscole/orgs",
      "repos_url": "https://api.github.com/users/zscole/repos",
      "events_url": "https://api.github.com/users/zscole/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/zscole/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 477890092,
        "node_id": "MDU6TGFiZWw0Nzc4OTAwOTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Questions%20and%20Help",
        "name": "Questions and Help",
        "color": "006688",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 4,
    "closed_at": "2018-07-10T11:53:07Z",
    "created_at": "2018-07-03T18:02:25Z",
    "updated_at": "2021-09-08T12:30:16Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 402253232,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjI1MzIzMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/402253232",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-03T18:34:10Z",
      "updated_at": "2018-07-03T18:34:10Z",
      "author_association": "MEMBER",
      "body": "You can use the regtest. See ./test/functional on how to set up a network\n\nOn Tue, Jul 3, 2018, 19:03 Zak Cole <notifications@github.com> wrote:\n\n> Trying to deploy a private testnet in a local environment. I'm coming over\n> from the Ethereum side, so I'm used to how things run in geth where I can\n> initialize a custom genesis file on node 1, indicate a data directory, and\n> then create a static peers JSON file to allow separate nodes that I control\n> to join the testnet. So far, I haven't found any way to do this.\n>\n> In chainparams.cpp, we commented out the DNS seeds (around lines 132-140)\n> that are predefined and replaced them with our own.\n>\n> I then created a custom bitcoin.conf file which contains:\n>\n> connect=[node 1 ip addr]:8333 connect=[node 2 ip addr]:8333 connect=[node\n> 3 ip addr]:8333 connect=[node 4 ip addr]:8333\n> Then I run the following command to start bitcoind:\n>\n> bitcoind -conf=/home/appo/bitcoin/bitcoin.conf -port=8333\n>\n> First problem:\n> connect() to [node ip addr]:8333 failed after select(): Connection refused\n> (111)\n>\n> I also notice that it's still loading peers from peers.dat even though\n> I've disabled DNS seeding (I think) and it's also referencing the mainnet\n> chain state, but I'd like to create a new genesis block.\n>\n> I'm trying to test in a local environment by essentially forking Bitcoin\n> to allow me to run tests without any external dependancies, so TL;DR what I\n> need is to be able to:\n>\n>    1. Initialize a new genesis block so we don't need to reference any of\n>    the historical chain data and can create our own fork. This is so we can\n>    run functional performance tests in a controlled environment.\n>    2. Either manually peer or allow discovery of only specific nodes\n>    within our network that we control.\n>\n> Any help would be appreciated. Thanks!\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/issues/13591>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmv6m7L-5SvXulZfxCvvjxAPwjWRxWks5uC7H7gaJpZM4VBZZG>\n> .\n>\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/13591#issuecomment-402253232",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13591"
    },
    {
      "event": "commented",
      "id": 402284578,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjI4NDU3OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/402284578",
      "actor": {
        "login": "zscole",
        "id": 20308948,
        "node_id": "MDQ6VXNlcjIwMzA4OTQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/20308948?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zscole",
        "html_url": "https://github.com/zscole",
        "followers_url": "https://api.github.com/users/zscole/followers",
        "following_url": "https://api.github.com/users/zscole/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/zscole/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/zscole/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/zscole/subscriptions",
        "organizations_url": "https://api.github.com/users/zscole/orgs",
        "repos_url": "https://api.github.com/users/zscole/repos",
        "events_url": "https://api.github.com/users/zscole/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/zscole/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-03T20:35:27Z",
      "updated_at": "2018-07-03T20:35:27Z",
      "author_association": "NONE",
      "body": "I've been looking it over and it seems like regtest is still limited, IIUC. Does regtest allow for more than one node? Can I deploy a node on a separate machine and have it join the testnet or does it have to be done locally? ",
      "user": {
        "login": "zscole",
        "id": 20308948,
        "node_id": "MDQ6VXNlcjIwMzA4OTQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/20308948?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zscole",
        "html_url": "https://github.com/zscole",
        "followers_url": "https://api.github.com/users/zscole/followers",
        "following_url": "https://api.github.com/users/zscole/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/zscole/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/zscole/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/zscole/subscriptions",
        "organizations_url": "https://api.github.com/users/zscole/orgs",
        "repos_url": "https://api.github.com/users/zscole/repos",
        "events_url": "https://api.github.com/users/zscole/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/zscole/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/13591#issuecomment-402284578",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13591"
    },
    {
      "event": "commented",
      "id": 402288310,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjI4ODMxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/402288310",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-03T20:50:58Z",
      "updated_at": "2018-07-03T20:50:58Z",
      "author_association": "MEMBER",
      "body": "You can run as many nodes as you want in regtest, on different machines. You can connect them using -addnode / -connect.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/13591#issuecomment-402288310",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13591"
    },
    {
      "event": "commented",
      "id": 402290851,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjI5MDg1MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/402290851",
      "actor": {
        "login": "zscole",
        "id": 20308948,
        "node_id": "MDQ6VXNlcjIwMzA4OTQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/20308948?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zscole",
        "html_url": "https://github.com/zscole",
        "followers_url": "https://api.github.com/users/zscole/followers",
        "following_url": "https://api.github.com/users/zscole/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/zscole/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/zscole/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/zscole/subscriptions",
        "organizations_url": "https://api.github.com/users/zscole/orgs",
        "repos_url": "https://api.github.com/users/zscole/repos",
        "events_url": "https://api.github.com/users/zscole/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/zscole/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-03T21:02:10Z",
      "updated_at": "2018-07-03T21:02:10Z",
      "author_association": "NONE",
      "body": "Ok, great! Thanks a lot! ",
      "user": {
        "login": "zscole",
        "id": 20308948,
        "node_id": "MDQ6VXNlcjIwMzA4OTQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/20308948?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zscole",
        "html_url": "https://github.com/zscole",
        "followers_url": "https://api.github.com/users/zscole/followers",
        "following_url": "https://api.github.com/users/zscole/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/zscole/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/zscole/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/zscole/subscriptions",
        "organizations_url": "https://api.github.com/users/zscole/orgs",
        "repos_url": "https://api.github.com/users/zscole/repos",
        "events_url": "https://api.github.com/users/zscole/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/zscole/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/13591#issuecomment-402290851",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13591"
    },
    {
      "event": "labeled",
      "id": 1715230739,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE3MTUyMzA3Mzk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1715230739",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-04T00:02:21Z",
      "label": {
        "name": "Questions and Help",
        "color": "006688"
      }
    },
    {
      "event": "closed",
      "id": 1725317905,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTcyNTMxNzkwNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1725317905",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-07-10T11:53:07Z"
    },
    {
      "event": "locked",
      "id": 5271991059,
      "node_id": "LOE_lADOABII584UJX5HzwAAAAE6PDMT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271991059",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:30:16Z",
      "lock_reason": "resolved"
    }
  ]
}