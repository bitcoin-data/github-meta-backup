{
  "type": "issue",
  "issue": {
    "id": 1028344980,
    "node_id": "I_kwDOABII5849S0yU",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23297",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23297/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23297/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23297/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/23297",
    "number": 23297,
    "state": "closed",
    "state_reason": "completed",
    "title": "tracing: include tracepoints in GUIX builds",
    "body": "There has been light conceptual agreement on including the USDT based tracepoints in Bitcoin Core release builds. This, for example, enables user to hook into production deployments, if they need to. Binaries don't have to be switched out. This is possible because we don't do [expensive computations](https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#no-expensive-computations-for-tracepoints) only for the tracepoints and the tracepoints are NOPs when not used.\r\n\r\nThere is a slight chance that the GUIX build on the current master already includes the tracepoints. I have not done an GUIX build on a branch with the tracepoints merged yet. This can be tested on a `bitcoind` binary using one of the methods mentioned in the [tracing documentation section \"Listing avaliable tracepoints\"](https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#listing-available-tracepoints).\r\n\r\nIf not present, making the `systemtap` headers (`sys/sdt.h`) available during the GUIX build should build `bitcoind` with the tracepoints.\r\n",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      },
      {
        "id": 61889416,
        "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
        "name": "Build system",
        "color": "5319e7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": true,
    "comments": 6,
    "closed_at": "2022-01-10T03:00:15Z",
    "created_at": "2021-10-17T14:42:20Z",
    "updated_at": "2023-01-10T10:07:14Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 5474331145,
      "node_id": "LE_lADOABII5849S0yUzwAAAAFGS6oJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5474331145",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-17T14:42:20Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "comment_deleted",
      "id": 5474569722,
      "node_id": "CDE_lADOABII5849S0yUzwAAAAFGT036",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5474569722",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-17T18:26:05Z"
    },
    {
      "event": "labeled",
      "id": 5477621230,
      "node_id": "LE_lADOABII5849S0yUzwAAAAFGfd3u",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5477621230",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-18T11:16:44Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 979874121,
      "node_id": "IC_kwDOABII5846Z7FJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/979874121",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-11-26T10:46:50Z",
      "updated_at": "2021-11-26T10:46:50Z",
      "author_association": "MEMBER",
      "body": "> There is a slight chance that the GUIX build on the current master already includes the tracepoints. I have not done an GUIX build on a branch with the tracepoints merged yet. This can be tested on a `bitcoind` binary using one of the methods mentioned in the [tracing documentation section \"Listing avaliable tracepoints\"](https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#listing-available-tracepoints).\r\n\r\nA GUIX build on 76392b042e98 didn't include the tracepoints. The systemtap headers need to be added.\r\n",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/23297#issuecomment-979874121",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23297"
    },
    {
      "event": "commented",
      "id": 985334877,
      "node_id": "IC_kwDOABII5846uwRd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/985334877",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-03T09:04:34Z",
      "updated_at": "2021-12-10T12:17:42Z",
      "author_association": "MEMBER",
      "body": "I've been exploring this a bit more. Currently two approaches, non of them really great. \r\n\r\n- a) Package the systemtap `sys/sdt.h` header as GUIX package in [manifest.scm](https://github.com/bitcoin/bitcoin/blob/master/contrib/guix/manifest.scm) and make it available as _include_ during configure and build.\r\n  - See GUIX package definition below.\r\n  - While the package is available during configure and build, the header includes not are picked up automatically. Likely, an additional include needs to be set. \r\n- b) Include systemtap as package in `depends`\r\n  - We don't need systemtap. We only need the `sys/sdt.h` header file.\r\n  - depends are usually compiled, we don't want and need to compile systemtap here.\r\n\r\nCarl Dong noted that this belongs into the depends and shouldn't be a GUIX package.\r\n\r\n\r\n\r\n```patch\r\ndiff --git a/contrib/guix/manifest.scm b/contrib/guix/manifest.scm\r\nindex 580500605..3f4814ba3 100644\r\n--- a/contrib/guix/manifest.scm\r\n+++ b/contrib/guix/manifest.scm\r\n@@ -30,6 +30,7 @@\r\n              (gnu packages shells)\r\n              (gnu packages tls)\r\n              (gnu packages version-control)\r\n+             (guix build-system copy)\r\n              (guix build-system font)\r\n              (guix build-system gnu)\r\n              (guix build-system python)\r\n@@ -597,6 +598,27 @@ inspecting signatures in Mach-O binaries.\")\r\n   (package-with-extra-patches glibc-2.27\r\n     (search-our-patches \"glibc-2.27-riscv64-Use-__has_include__-to-include-asm-syscalls.h.patch\")))\r\n\r\n+(define-public systemtap-sdt\r\n+  (package\r\n+    (name \"systemtap-sdt\")\r\n+    (version \"4.6\")\r\n+    (source (origin\r\n+              (method url-fetch)\r\n+              (uri (string-append \"https://sourceware.org/systemtap/ftp/releases/systemtap-\" version\r\n+                                  \".tar.gz\"))\r\n+              (sha256\r\n+               (base32\r\n+                \"1bps2926x9m8mp2684wwwwjm4yb12mpylbnvnffk889b4c4p7yw0\"))))\r\n+    (build-system copy-build-system)\r\n+    (arguments\r\n+      '(#:install-plan\r\n+        '((\"includes/sys/sdt.h\" \"include/sys/sdt.h\"))))\r\n+    (synopsis \"Systemtap header files defining tracing probe marcos\")\r\n+    (description \"This package includes the <sys/sdt.h> header file used for static instrumentation compiled into userspace programs and libraries\")\r\n+    (home-page \"https://sourceware.org/systemtap/\")\r\n+    (license license:gpl2)))\r\n+\r\n (packages->manifest\r\n  (append\r\n   (list ;; The Basics\r\n@@ -637,7 +659,9 @@ inspecting signatures in Mach-O binaries.\")\r\n         lief\r\n         ;; Native gcc 7 toolchain\r\n         gcc-toolchain-7\r\n-        (list gcc-toolchain-7 \"static\"))\r\n+        (list gcc-toolchain-7 \"static\")\r\n+        ;; Tracing\r\n+        systemtap-sdt)\r\n   (let ((target (getenv \"HOST\")))\r\n     (cond ((string-suffix? \"-mingw32\" target)\r\n            ;; Windows\r\n```",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/23297#issuecomment-985334877",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23297"
    },
    {
      "event": "commented",
      "id": 986285049,
      "node_id": "IC_kwDOABII5846yYP5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/986285049",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-05T19:17:34Z",
      "updated_at": "2021-12-05T19:17:34Z",
      "author_association": "MEMBER",
      "body": "Seems to be possible with option b) too. The configure/build/postprocess steps in the depends are optional and normal shell commands can be used. I haven't figured out where to copy the `includes/sys/sdt.h` file from systemtap so that it makes it into `depends/x86_64-linux-gnu/include/`. \r\n\r\nI think option b) is cleaner than option a).",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/23297#issuecomment-986285049",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23297"
    },
    {
      "event": "commented",
      "id": 988116618,
      "node_id": "IC_kwDOABII58465XaK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/988116618",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-07T17:11:16Z",
      "updated_at": "2021-12-07T17:11:16Z",
      "author_association": "MEMBER",
      "body": "@fanquake helped getting the includes copied. In this case it was: (note the `&& \\` as only the first command has the correct ENV var set)\r\n\r\n``` Makefile\r\ndefine $(package)_preprocess_cmds\r\n  mkdir -p $($(package)_staging_prefix_dir)/include/sys && \\\r\n  cp -r includes/sys $($(package)_staging_prefix_dir)/include\r\nendef\r\n```\r\n\r\nHe also commented:\r\n\r\n> One catch is that if we don't run configure and make, then we don't end up with a properly named and filled out sdt-config.h. That is included from sdt.h, and determines whether the probes can use certain assembly, see _SDT_ASM_AUTOGROUP.\r\n\r\n> Maybe this is mostly a legacy check, and we can assume that we can use it, although then we'd still have to modify the sdt.h header to drop the include and make sure _SDT_ASM_SECTION_AUTOGROUP_SUPPORT is defined ourselves.\r\n\r\n> The annoying thing about having to run configure and make is that we'll need to install a bunch of dependencies.\r\n\r\nThe relevant section from sdt.h is\r\n\r\n``` h\r\n/* If the assembler supports the necessary feature, then we can play\r\n nice with code in COMDAT sections, which comes up in C++ code.\r\n Without that assembler support, some combinations of probe placements\r\n in certain kinds of C++ code may produce link-time errors.  */\r\n#include \"sdt-config.h\"\r\n#if _SDT_ASM_SECTION_AUTOGROUP_SUPPORT\r\n# define _SDT_ASM_AUTOGROUP \"?\"\r\n#else\r\n# define _SDT_ASM_AUTOGROUP \"\"\r\n#endif\r\n```\r\n\r\nAs we don't need Systemtap itself, running configure and make would require additional dependencies and slow the depends build down. Both, the include of `sdt-config.h` in `sdt.h` and the `sdt-config.h.in` file were added and last touched in 2010 ( \r\n[blame sdt.h](https://sourceware.org/git/?p=systemtap.git;a=blame;f=includes/sys/sdt.h;h=48cb7263f325ff8094b4288249a24b65dd00ab84;hb=HEAD), [blame sdt-config.h.in](https://sourceware.org/git/?p=systemtap.git;a=blame;f=includes/sys/sdt-config.h.in;h=7a3373cca0d9d52e74c9096a9db48cc37d897c5e;hb=HEAD)), so it's likely that the feature is supported by now and it should be possible to drop the include in a patch.",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/23297#issuecomment-988116618",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23297"
    },
    {
      "event": "mentioned",
      "id": 5728951149,
      "node_id": "MEE_lADOABII5849S0yUzwAAAAFVeNtt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5728951149",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-07T17:11:17Z"
    },
    {
      "event": "subscribed",
      "id": 5728951154,
      "node_id": "SE_lADOABII5849S0yUzwAAAAFVeNty",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5728951154",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-07T17:11:17Z"
    },
    {
      "event": "commented",
      "id": 988126706,
      "node_id": "IC_kwDOABII58465Z3y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/988126706",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-07T17:25:19Z",
      "updated_at": "2021-12-07T17:25:19Z",
      "author_association": "MEMBER",
      "body": "gcc seems to have a problem with Systemtap 4.6 (Nov 2021). I'll be using Systemtap 4.5 (May 2021) for now. From what I can tell, this is a know problem and it should be fixed in 4.7:\r\n\r\nhttps://sourceware.org/git/?p=systemtap.git;a=commit;h=1d3653936fc1fd13135a723a27e6c7e959793ad0\r\nhttps://bugzilla.redhat.com/show_bug.cgi?id=2028798\r\n\r\n",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/23297#issuecomment-988126706",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23297"
    },
    {
      "event": "commented",
      "id": 988652484,
      "node_id": "IC_kwDOABII58467aPE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/988652484",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-08T09:41:53Z",
      "updated_at": "2021-12-09T16:03:58Z",
      "author_association": "MEMBER",
      "body": "I've successfully ran a GUIX build with the new `sys/sdt.h` systemtap depends as described above. All host triples with linux in the name contain the tracepoints (checked with `readelf -n bitcoind`). I haven't looked at the macOS and Windows binaries. Maybe the macOS binaries contain tracepoints that can be listed with e.g. `dtrace` on macOS?\r\n\r\n<details>\r\n<summary>Show outdated testing matrix. See PR 23724 for an up-to-date one.</summary>\r\n\r\n|      host-triplet     \t| contains tracepoints \t|    synced signet   \t| tracepoints tested \t|\r\n|:---------------------:\t|:--------------------:\t|:------------------:\t|:------------------:\t|\r\n|   aarch64-linux-gnu   \t|  :heavy_check_mark:  \t| :heavy_check_mark: \t| :heavy_check_mark: \t|\r\n|  arm-linux-gnueabihf  \t|  :heavy_check_mark:  \t|                    \t|                    \t|\r\n|  powerpc64-linux-gnu  \t|  :heavy_check_mark:  \t|                    \t|                    \t|\r\n| powerpc64le-linux-gnu \t|  :heavy_check_mark:  \t|                    \t|                    \t|\r\n|   riscv64-linux-gnu   \t|  :heavy_check_mark:  \t|                    \t|                    \t|\r\n|    x86_64-linux-gnu   \t|  :heavy_check_mark:  \t| :heavy_check_mark: \t|                    \t|\r\n| x86_64-apple-darwin19 \t|    :grey_question:   \t|                    \t|                    \t|\r\n|   x86_64-w64-mingw32  \t|    :grey_question:   \t| :heavy_check_mark: \t|                    \t|\r\n\r\n</details>\r\n\r\nWill do a bit of basic testing and then open a PR.",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/23297#issuecomment-988652484",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23297"
    },
    {
      "event": "closed",
      "id": 5863227982,
      "node_id": "CE_lADOABII5849S0yUzwAAAAFdecJO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5863227982",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "542e405a8517e50bf6687a02af69117931234fde",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/542e405a8517e50bf6687a02af69117931234fde",
      "created_at": "2022-01-10T03:00:15Z"
    },
    {
      "event": "referenced",
      "id": 5869558887,
      "node_id": "REFE_lADOABII5849S0yUzwAAAAFd2lxn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5869558887",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5ca60a8fdc71faa31d585b0c99dc65f2c8e4b667",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/5ca60a8fdc71faa31d585b0c99dc65f2c8e4b667",
      "created_at": "2022-01-10T23:47:32Z"
    },
    {
      "event": "locked",
      "id": 8190236172,
      "node_id": "LOE_lADOABII5849S0yUzwAAAAHoLRYM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8190236172",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-10T10:07:14Z"
    }
  ]
}