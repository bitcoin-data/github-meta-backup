{
  "type": "issue",
  "issue": {
    "id": 466768124,
    "node_id": "MDU6SXNzdWU0NjY3NjgxMjQ=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16372",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16372/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16372/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16372/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/16372",
    "number": 16372,
    "state": "closed",
    "state_reason": "completed",
    "title": "Zmq Questions about Block Rollback",
    "body": "\r\nhello,\r\nI'd like to ask ZMQ whether block monitoring for bitcoin will process rollback blocks into queues\r\nfor example：\r\n I found that ZMQ hashblock listener did not listen for the correct hash of the rollback block.\r\nOriginal Chain： 590482 -->590483 --->590484\r\nNormal occurrence block rollback chain:590482 -->590483(roll) --->590484(roll)-->590485--->(......)\r\nZMQ is not acquired the 590483(r) 590484(r) blockhash ,but the blockhash of 590485 is acquired. the old 590483 590484 is acquired\r\nDoes Bitcoin ZMQ not support this?",
    "user": {
      "login": "Rui2guo",
      "id": 42934194,
      "node_id": "MDQ6VXNlcjQyOTM0MTk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/42934194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rui2guo",
      "html_url": "https://github.com/Rui2guo",
      "followers_url": "https://api.github.com/users/Rui2guo/followers",
      "following_url": "https://api.github.com/users/Rui2guo/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Rui2guo/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Rui2guo/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Rui2guo/subscriptions",
      "organizations_url": "https://api.github.com/users/Rui2guo/orgs",
      "repos_url": "https://api.github.com/users/Rui2guo/repos",
      "events_url": "https://api.github.com/users/Rui2guo/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Rui2guo/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 5,
    "closed_at": "2019-08-04T05:53:25Z",
    "created_at": "2019-07-11T09:16:33Z",
    "updated_at": "2021-12-16T14:09:03Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 511150530,
      "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTE1MDUzMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/511150530",
      "actor": {
        "login": "FndNur1Labs",
        "id": 11433397,
        "node_id": "MDQ6VXNlcjExNDMzMzk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11433397?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/FndNur1Labs",
        "html_url": "https://github.com/FndNur1Labs",
        "followers_url": "https://api.github.com/users/FndNur1Labs/followers",
        "following_url": "https://api.github.com/users/FndNur1Labs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/FndNur1Labs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/FndNur1Labs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/FndNur1Labs/subscriptions",
        "organizations_url": "https://api.github.com/users/FndNur1Labs/orgs",
        "repos_url": "https://api.github.com/users/FndNur1Labs/repos",
        "events_url": "https://api.github.com/users/FndNur1Labs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/FndNur1Labs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-07-13T20:12:54Z",
      "updated_at": "2019-07-13T20:12:54Z",
      "author_association": "NONE",
      "body": "Is this for fixed indexed or block check point?",
      "user": {
        "login": "FndNur1Labs",
        "id": 11433397,
        "node_id": "MDQ6VXNlcjExNDMzMzk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11433397?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/FndNur1Labs",
        "html_url": "https://github.com/FndNur1Labs",
        "followers_url": "https://api.github.com/users/FndNur1Labs/followers",
        "following_url": "https://api.github.com/users/FndNur1Labs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/FndNur1Labs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/FndNur1Labs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/FndNur1Labs/subscriptions",
        "organizations_url": "https://api.github.com/users/FndNur1Labs/orgs",
        "repos_url": "https://api.github.com/users/FndNur1Labs/repos",
        "events_url": "https://api.github.com/users/FndNur1Labs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/FndNur1Labs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/16372#issuecomment-511150530",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16372"
    },
    {
      "event": "commented",
      "id": 511299603,
      "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTI5OTYwMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/511299603",
      "actor": {
        "login": "Rui2guo",
        "id": 42934194,
        "node_id": "MDQ6VXNlcjQyOTM0MTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/42934194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Rui2guo",
        "html_url": "https://github.com/Rui2guo",
        "followers_url": "https://api.github.com/users/Rui2guo/followers",
        "following_url": "https://api.github.com/users/Rui2guo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Rui2guo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Rui2guo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Rui2guo/subscriptions",
        "organizations_url": "https://api.github.com/users/Rui2guo/orgs",
        "repos_url": "https://api.github.com/users/Rui2guo/repos",
        "events_url": "https://api.github.com/users/Rui2guo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Rui2guo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-07-15T07:29:12Z",
      "updated_at": "2019-07-15T07:29:12Z",
      "author_association": "NONE",
      "body": "\r\n> Is this for fixed indexed or block check point?\r\n\r\nyes,this is block index, imply put, the rollback block will not be retrieved via ZMQ",
      "user": {
        "login": "Rui2guo",
        "id": 42934194,
        "node_id": "MDQ6VXNlcjQyOTM0MTk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/42934194?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Rui2guo",
        "html_url": "https://github.com/Rui2guo",
        "followers_url": "https://api.github.com/users/Rui2guo/followers",
        "following_url": "https://api.github.com/users/Rui2guo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Rui2guo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Rui2guo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Rui2guo/subscriptions",
        "organizations_url": "https://api.github.com/users/Rui2guo/orgs",
        "repos_url": "https://api.github.com/users/Rui2guo/repos",
        "events_url": "https://api.github.com/users/Rui2guo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Rui2guo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/16372#issuecomment-511299603",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16372"
    },
    {
      "event": "commented",
      "id": 512042211,
      "node_id": "MDEyOklzc3VlQ29tbWVudDUxMjA0MjIxMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/512042211",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-07-16T23:40:41Z",
      "updated_at": "2019-07-16T23:40:41Z",
      "author_association": "MEMBER",
      "body": "I could be missing something but looking at `CChainState::ActivateBestChain` you can see that `NotifyBlockTip` is only called for the tip of the reorg. Maybe you should \"walk backwards\" from that new tip until you find an already known block?",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/16372#issuecomment-512042211",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16372"
    },
    {
      "event": "commented",
      "id": 512260454,
      "node_id": "MDEyOklzc3VlQ29tbWVudDUxMjI2MDQ1NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/512260454",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-07-17T13:43:48Z",
      "updated_at": "2019-07-17T13:43:48Z",
      "author_association": "MEMBER",
      "body": "After all this behavior is expected and documented in https://github.com/bitcoin/bitcoin/blob/master/doc/zmq.md#remarks, quoting:\r\n\r\n> Note that when the block chain tip changes, a reorganisation may occur and just the tip will be notified. It is up to the subscriber to retrieve the chain from the last known block to the new tip.\r\n\r\nYou can close this.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/16372#issuecomment-512260454",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16372"
    },
    {
      "event": "commented",
      "id": 512261373,
      "node_id": "MDEyOklzc3VlQ29tbWVudDUxMjI2MTM3Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/512261373",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-07-17T13:46:07Z",
      "updated_at": "2019-07-17T13:46:07Z",
      "author_association": "MEMBER",
      "body": "FYI #16404.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/16372#issuecomment-512261373",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16372"
    },
    {
      "event": "labeled",
      "id": 2531608620,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDI1MzE2MDg2MjA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2531608620",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-08-04T05:53:10Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "closed",
      "id": 2531608655,
      "node_id": "MDExOkNsb3NlZEV2ZW50MjUzMTYwODY1NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2531608655",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-08-04T05:53:26Z"
    },
    {
      "event": "locked",
      "id": 5778604428,
      "node_id": "LOE_lADOABII584b0lD8zwAAAAFYboGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5778604428",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-16T14:09:03Z",
      "lock_reason": "resolved"
    }
  ]
}