{
  "type": "issue",
  "issue": {
    "id": 806523307,
    "node_id": "MDU6SXNzdWU4MDY1MjMzMDc=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21154",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21154/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21154/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21154/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/21154",
    "number": 21154,
    "state": "closed",
    "state_reason": "completed",
    "title": "Testnet configuration is ignored.",
    "body": "Running `bitcoin-qt.exe -testnet` creates a separate testnet QSettings called `Bitcoin-Qt-testnet`. I assume this was done on purpose, so you can easily run testnet settings in parallel to mainnet.\r\n\r\n**Expected behavior**\r\n\r\nChanging settings in the `Bitcoin-Qt-testnet` QSettings should be reflected in the Qt wallet when running with `-testnet`.\r\n\r\nFor example, on Windows the QSettings are stored in the registry. The testnet key is here:\r\n\r\n![image](https://user-images.githubusercontent.com/78885860/107659308-4d685500-6c87-11eb-87b0-79e5e87b1653.png)\r\n\r\n**Actual behavior**\r\n\r\nThe `Bitcoin-Qt-testnet` settings are ignored, and `Bitcoin-Qt` mainnet settings are used in stead.\r\n\r\n**To reproduce**\r\n\r\nOn a clean system, start the wallet for the first time in `-testnet` mode. In the start wizard, change any option (e.g. the path). Observe how all defaults are written to `Bitcoin-Qt-testnet`, but the updated settings are written to the (previously empty) `Bitcoin-Qt` QSettings:\r\n\r\n![image](https://user-images.githubusercontent.com/78885860/107662270-6aeaee00-6c8a-11eb-893c-ddbab9798c99.png)\r\n\r\n**What is happening**\r\n\r\nIt appears as if during the initialization of the app (while writing default settings), the appName (and QSettings based on appName) is still `QAPP_APP_NAME_TESTNET`. Yet later (when reading the settings) the app name changed to `QAPP_APP_NAME_DEFAULT`.\r\n\r\n**What causes this**\r\n\r\nPerhaps because here the appName is set to `QAPP_APP_NAME_DEFAULT`:\r\nhttps://github.com/bitcoin/bitcoin/blob/8e1913ae025ad8912457abe24ae5c61da02fc17a/src/qt/bitcoin.cpp#L496-L501\r\n\r\nRather than the one from the test NetworkStyle:\r\nhttps://github.com/bitcoin/bitcoin/blob/8e1913ae025ad8912457abe24ae5c61da02fc17a/src/qt/networkstyle.cpp#L14-L24\r\n\r\nPerhaps it would work as intended if we would use the NetworkStyle app name. E.g.:\r\n\r\n```diff\r\n    /// 3. Application identification\r\n    // must be set before OptionsModel is initialized or translations are loaded,\r\n    // as it is used to locate QSettings\r\n    QApplication::setOrganizationName(QAPP_ORG_NAME);\r\n    QApplication::setOrganizationDomain(QAPP_ORG_DOMAIN);\r\n-    QApplication::setApplicationName(QAPP_APP_NAME_DEFAULT);\r\n+    QApplication::setApplicationName(networkStyle->getAppName());\r\n```\r\n\r\n**System information**\r\n\r\nWindows 10\r\nBitcoin 0.21 precompiled\r\n\r\n**Extra info**\r\n\r\nIt is possible that the intended behavior was never finished and forgotten, or it was never intended to work the way I am assuming.\r\n\r\nOriginally found on Syscoin here: https://github.com/syscoin/syscoin/issues/417",
    "user": {
      "login": "beirut-boop",
      "id": 78885860,
      "node_id": "MDQ6VXNlcjc4ODg1ODYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/78885860?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/beirut-boop",
      "html_url": "https://github.com/beirut-boop",
      "followers_url": "https://api.github.com/users/beirut-boop/followers",
      "following_url": "https://api.github.com/users/beirut-boop/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/beirut-boop/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/beirut-boop/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/beirut-boop/subscriptions",
      "organizations_url": "https://api.github.com/users/beirut-boop/orgs",
      "repos_url": "https://api.github.com/users/beirut-boop/repos",
      "events_url": "https://api.github.com/users/beirut-boop/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/beirut-boop/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 2,
    "closed_at": "2021-02-19T00:12:20Z",
    "created_at": "2021-02-11T15:59:09Z",
    "updated_at": "2022-08-18T18:34:19Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 4320627335,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQzMjA2MjczMzU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4320627335",
      "actor": {
        "login": "beirut-boop",
        "id": 78885860,
        "node_id": "MDQ6VXNlcjc4ODg1ODYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78885860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/beirut-boop",
        "html_url": "https://github.com/beirut-boop",
        "followers_url": "https://api.github.com/users/beirut-boop/followers",
        "following_url": "https://api.github.com/users/beirut-boop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/beirut-boop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/beirut-boop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/beirut-boop/subscriptions",
        "organizations_url": "https://api.github.com/users/beirut-boop/orgs",
        "repos_url": "https://api.github.com/users/beirut-boop/repos",
        "events_url": "https://api.github.com/users/beirut-boop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/beirut-boop/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-11T15:59:09Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "commented",
      "id": 780305160,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDMwNTE2MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/780305160",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-17T05:16:42Z",
      "updated_at": "2021-02-17T05:16:42Z",
      "author_association": "MEMBER",
      "body": "@beirut-boop \r\nDo you mind opening this issue in the dedicated https://github.com/bitcoin-core/gui/issues repo, and closing it here?",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21154#issuecomment-780305160",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21154"
    },
    {
      "event": "mentioned",
      "id": 4339494732,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDMzOTQ5NDczMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4339494732",
      "actor": {
        "login": "beirut-boop",
        "id": 78885860,
        "node_id": "MDQ6VXNlcjc4ODg1ODYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78885860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/beirut-boop",
        "html_url": "https://github.com/beirut-boop",
        "followers_url": "https://api.github.com/users/beirut-boop/followers",
        "following_url": "https://api.github.com/users/beirut-boop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/beirut-boop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/beirut-boop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/beirut-boop/subscriptions",
        "organizations_url": "https://api.github.com/users/beirut-boop/orgs",
        "repos_url": "https://api.github.com/users/beirut-boop/repos",
        "events_url": "https://api.github.com/users/beirut-boop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/beirut-boop/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-17T05:16:43Z"
    },
    {
      "event": "subscribed",
      "id": 4339494736,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQzMzk0OTQ3MzY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4339494736",
      "actor": {
        "login": "beirut-boop",
        "id": 78885860,
        "node_id": "MDQ6VXNlcjc4ODg1ODYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78885860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/beirut-boop",
        "html_url": "https://github.com/beirut-boop",
        "followers_url": "https://api.github.com/users/beirut-boop/followers",
        "following_url": "https://api.github.com/users/beirut-boop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/beirut-boop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/beirut-boop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/beirut-boop/subscriptions",
        "organizations_url": "https://api.github.com/users/beirut-boop/orgs",
        "repos_url": "https://api.github.com/users/beirut-boop/repos",
        "events_url": "https://api.github.com/users/beirut-boop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/beirut-boop/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-17T05:16:43Z"
    },
    {
      "event": "commented",
      "id": 781719763,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTcxOTc2Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/781719763",
      "actor": {
        "login": "beirut-boop",
        "id": 78885860,
        "node_id": "MDQ6VXNlcjc4ODg1ODYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78885860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/beirut-boop",
        "html_url": "https://github.com/beirut-boop",
        "followers_url": "https://api.github.com/users/beirut-boop/followers",
        "following_url": "https://api.github.com/users/beirut-boop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/beirut-boop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/beirut-boop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/beirut-boop/subscriptions",
        "organizations_url": "https://api.github.com/users/beirut-boop/orgs",
        "repos_url": "https://api.github.com/users/beirut-boop/repos",
        "events_url": "https://api.github.com/users/beirut-boop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/beirut-boop/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-19T00:12:20Z",
      "updated_at": "2021-02-19T00:12:20Z",
      "author_association": "NONE",
      "body": "@hebasto moved to https://github.com/bitcoin-core/gui/issues/212",
      "user": {
        "login": "beirut-boop",
        "id": 78885860,
        "node_id": "MDQ6VXNlcjc4ODg1ODYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78885860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/beirut-boop",
        "html_url": "https://github.com/beirut-boop",
        "followers_url": "https://api.github.com/users/beirut-boop/followers",
        "following_url": "https://api.github.com/users/beirut-boop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/beirut-boop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/beirut-boop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/beirut-boop/subscriptions",
        "organizations_url": "https://api.github.com/users/beirut-boop/orgs",
        "repos_url": "https://api.github.com/users/beirut-boop/repos",
        "events_url": "https://api.github.com/users/beirut-boop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/beirut-boop/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21154#issuecomment-781719763",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21154"
    },
    {
      "event": "closed",
      "id": 4349562238,
      "node_id": "MDExOkNsb3NlZEV2ZW50NDM0OTU2MjIzOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4349562238",
      "actor": {
        "login": "beirut-boop",
        "id": 78885860,
        "node_id": "MDQ6VXNlcjc4ODg1ODYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/78885860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/beirut-boop",
        "html_url": "https://github.com/beirut-boop",
        "followers_url": "https://api.github.com/users/beirut-boop/followers",
        "following_url": "https://api.github.com/users/beirut-boop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/beirut-boop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/beirut-boop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/beirut-boop/subscriptions",
        "organizations_url": "https://api.github.com/users/beirut-boop/orgs",
        "repos_url": "https://api.github.com/users/beirut-boop/repos",
        "events_url": "https://api.github.com/users/beirut-boop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/beirut-boop/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-19T00:12:21Z"
    },
    {
      "event": "mentioned",
      "id": 4349562243,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDM0OTU2MjI0Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4349562243",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-19T00:12:21Z"
    },
    {
      "event": "subscribed",
      "id": 4349562246,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQzNDk1NjIyNDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4349562246",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-19T00:12:21Z"
    },
    {
      "event": "locked",
      "id": 7216599087,
      "node_id": "LOE_lADOABII584wEpGrzwAAAAGuJJAv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7216599087",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-18T18:34:19Z",
      "lock_reason": "resolved"
    }
  ]
}