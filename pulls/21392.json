{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
    "id": 587158479,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTg3MTU4NDc5",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21392",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/21392.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/21392.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
    "number": 21392,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Implement BIP 8 based Speedy Trial activation",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Implements the block height (BIP 8) based Speedy Trial activation proposal that was discussed on the bitcoin-dev mailing list.\r\n\r\nIn order to do so, this PR first changes the versionbits (BIP 9) implementation to use heights rather than MTP. Then the minimum activation height parameter is introduced. This also adds the minimum activation height as a third parameter of `-vbparams`. Additionally, the threshold is made a parameter of each deployment so that it can be customized for each deployment. Lastly several unit and functional tests are added.\r\n\r\nIn order to make this easier to backport, the names of functions and classes are largely unchanged (except where necessary for the height based things). This means that some things are misnamed as they refer to BIP 9 even though this is really BIP 8.\r\n\r\nThis PR borrows 2 commits from #19573 to implement height based versionbits, one commit from #21377 for tests, and 1 commit formerly part of #21380 for the threshold parameterization.",
    "labels": [
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      },
      {
        "id": 192202000,
        "node_id": "MDU6TGFiZWwxOTIyMDIwMDA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Consensus",
        "name": "Consensus",
        "color": "009800",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2021-03-08T22:31:04Z",
    "updated_at": "2022-08-18T18:20:33Z",
    "closed_at": "2021-04-06T23:47:39Z",
    "mergeable_state": "unknown",
    "merge_commit_sha": "23c9b47dc98e4e783f6bdb43b3006bf20a667684",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "achow101:bip8-speedy-trial",
      "ref": "bip8-speedy-trial",
      "sha": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 45006379,
        "node_id": "MDEwOlJlcG9zaXRvcnk0NTAwNjM3OQ==",
        "name": "bitcoin",
        "full_name": "achow101/bitcoin",
        "owner": {
          "login": "achow101",
          "id": 3782274,
          "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/achow101",
          "html_url": "https://github.com/achow101",
          "followers_url": "https://api.github.com/users/achow101/followers",
          "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
          "organizations_url": "https://api.github.com/users/achow101/orgs",
          "repos_url": "https://api.github.com/users/achow101/repos",
          "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/achow101/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/achow101/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/achow101/bitcoin",
        "archive_url": "https://api.github.com/repos/achow101/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/achow101/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/achow101/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/achow101/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/achow101/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/achow101/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/achow101/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/achow101/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/achow101/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/achow101/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/achow101/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/achow101/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/achow101/bitcoin/events",
        "forks_url": "https://api.github.com/repos/achow101/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/achow101/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/achow101/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/achow101/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/achow101/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/achow101/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/achow101/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/achow101/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/achow101/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/achow101/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/achow101/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/achow101/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/achow101/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/achow101/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/achow101/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/achow101/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:achow101/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/achow101/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/achow101/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/achow101/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/achow101/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/achow101/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/achow101/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/achow101/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/achow101/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/achow101/bitcoin/hooks",
        "svn_url": "https://github.com/achow101/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 10,
        "stargazers_count": 34,
        "watchers_count": 34,
        "size": 238743,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-02T17:43:24Z",
        "created_at": "2015-10-27T00:20:28Z",
        "updated_at": "2023-05-16T00:18:41Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ed49203daabb6550d44518792c30faad64bf9a9f",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69819,
        "watchers_count": 69819,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T22:42:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T04:47:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 503,
    "deletions": 300,
    "changed_files": 17,
    "commits": 8,
    "review_comments": 180,
    "comments": 35
  },
  "events": [
    {
      "event": "reviewed",
      "id": 606773707,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA2NzczNzA3",
      "url": null,
      "actor": null,
      "commit_id": "b16a75572684865e4a54b7cb56f05c028ac98026",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-606773707",
      "submitted_at": "2021-03-08T22:44:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "commented",
      "id": 793147434,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5MzE0NzQzNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/793147434",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-08T22:56:22Z",
      "updated_at": "2021-03-08T22:56:22Z",
      "author_association": "MEMBER",
      "body": "Maybe consider rebasing on #21380 ; it adds fuzz testing and removes the need for the `MinActivationHeight()` virtual functions, and should make the \"per-deployment-threshold\" part a bit simpler.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-793147434",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4424038237,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQyNDAzODIzNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4424038237",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-08T22:56:56Z"
    },
    {
      "event": "labeled",
      "id": 4424298347,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ0MjQyOTgzNDc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4424298347",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T00:15:49Z",
      "label": {
        "name": "Consensus",
        "color": "009800"
      }
    },
    {
      "event": "labeled",
      "id": 4424298349,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ0MjQyOTgzNDk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4424298349",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T00:15:49Z",
      "label": {
        "name": "Docs",
        "color": "02d7e1"
      }
    },
    {
      "event": "labeled",
      "id": 4424298350,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ0MjQyOTgzNTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4424298350",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T00:15:49Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "labeled",
      "id": 4424298353,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ0MjQyOTgzNTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4424298353",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T00:15:49Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "labeled",
      "id": 4424298354,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ0MjQyOTgzNTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4424298354",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T00:15:49Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4424620820,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQyNDYyMDgyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4424620820",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T01:47:02Z"
    },
    {
      "event": "commented",
      "id": 793254716,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5MzI1NDcxNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/793254716",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T01:47:11Z",
      "updated_at": "2021-03-09T01:47:11Z",
      "author_association": "MEMBER",
      "body": "> Maybe consider rebasing on #21380 ; it adds fuzz testing and removes the need for the `MinActivationHeight()` virtual functions, and should make the \"per-deployment-threshold\" part a bit simpler.\r\n\r\nDone. It did indeed make this simpler. The fuzzer also caught one minor issue.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-793254716",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4424668128,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQyNDY2ODEyOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4424668128",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T02:00:27Z"
    },
    {
      "event": "reviewed",
      "id": 606866335,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA2ODY2MzM1",
      "url": null,
      "actor": null,
      "commit_id": "3d6fa014f3f122bbcfcdbe39cc2bd043bf2fe915",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "generally looks ok to me couple minor comments; can do a more detailed review later",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-606866335",
      "submitted_at": "2021-03-09T02:11:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4424721644,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQyNDcyMTY0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4424721644",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T02:16:04Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4424740107,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQyNDc0MDEwNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4424740107",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T02:21:25Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4424771776,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQyNDc3MTc3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4424771776",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T02:30:21Z"
    },
    {
      "event": "commented",
      "id": 793365182,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5MzM2NTE4Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/793365182",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T04:23:02Z",
      "updated_at": "2021-03-30T14:23:12Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21401 (Refactor versionbits deployments to avoid potential uninitialized variables by achow101)\n* #21391 ([Bundle 5/n] Prune g_chainman usage in RPC modules by dongcarl)\n* #21378 (Convert taproot to flag day activation by ajtowns)\n* #21377 (Speedy trial support for versionbits by ajtowns)\n* #20354 (test: Add feature_taproot.py --previous_release by MarcoFalke)\n* #19438 (Introduce deploymentstatus by ajtowns)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-793365182",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4425442553,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQyNTQ0MjU1Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4425442553",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T05:23:01Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4425660256,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQyNTY2MDI1Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4425660256",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T06:29:00Z"
    },
    {
      "event": "reviewed",
      "id": 607356173,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA3MzU2MTcz",
      "url": null,
      "actor": null,
      "commit_id": "3395165dfe6b84e6d04ad134f0135c44e8c8ddc6",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK. Did some light review of 9e50401c8a593c569f586786d84554c027fd8e8d.\r\n\r\nWould love to see a functional test that shows the speedy trial in action, by looking at `softforks` in `getblockchaininfo` (I might write one myself)",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-607356173",
      "submitted_at": "2021-03-09T13:07:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "commented",
      "id": 794078821,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5NDA3ODgyMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/794078821",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T15:53:31Z",
      "updated_at": "2021-03-09T15:53:31Z",
      "author_association": "MEMBER",
      "body": "Here you go, a BIP 8 delayed activation functional test for your cherry-picking: https://github.com/Sjors/bitcoin/commits/2021/03/bip8-speedy-trial-test",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-794078821",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4430196452,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQzMDE5NjQ1Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4430196452",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T17:47:24Z"
    },
    {
      "event": "commented",
      "id": 794224457,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5NDIyNDQ1Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/794224457",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T17:48:03Z",
      "updated_at": "2021-03-09T17:48:03Z",
      "author_association": "MEMBER",
      "body": "> Here you go, a BIP 8 delayed activation functional test for your cherry-picking: https://github.com/Sjors/bitcoin/commits/2021/03/bip8-speedy-trial-test\r\n\r\nCherry picked.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-794224457",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 794391494,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5NDM5MTQ5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/794391494",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T20:09:37Z",
      "updated_at": "2021-03-09T20:09:37Z",
      "author_association": "MEMBER",
      "body": "Linter complains `'time' imported but unused`; my bad, I needed that import during an intermediate struggle (when generating coins on node 1, node 2 refused to sync).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-794391494",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 794414561,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5NDQxNDU2MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/794414561",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T20:30:05Z",
      "updated_at": "2021-03-09T20:30:05Z",
      "author_association": "MEMBER",
      "body": "Fixed the linter",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-794414561",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4431186310,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQzMTE4NjMxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4431186310",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T20:30:13Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4431677838,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQzMTY3NzgzOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4431677838",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-09T21:57:53Z"
    },
    {
      "event": "reviewed",
      "id": 608728480,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA4NzI4NDgw",
      "url": null,
      "actor": null,
      "commit_id": "d4c40a52cdc0e07647b6543427e621585028fcdd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "The code changes for 7ff01fb91960b029f67fde68de6a9ea0178c8ab3 look good to me, but I'm a bit confused by the changes in and removal of tests in d4c40a5.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-608728480",
      "submitted_at": "2021-03-10T14:04:28Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "commented",
      "id": 797382764,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5NzM4Mjc2NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797382764",
      "actor": {
        "login": "kristapsk",
        "id": 4500994,
        "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kristapsk",
        "html_url": "https://github.com/kristapsk",
        "followers_url": "https://api.github.com/users/kristapsk/followers",
        "following_url": "https://api.github.com/users/kristapsk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kristapsk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kristapsk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
        "organizations_url": "https://api.github.com/users/kristapsk/orgs",
        "repos_url": "https://api.github.com/users/kristapsk/repos",
        "events_url": "https://api.github.com/users/kristapsk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kristapsk/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-12T10:06:40Z",
      "updated_at": "2021-03-12T10:06:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "There are some compiler warnings for me (GCC 9.3.0).\r\n```\r\ntest/fuzz/versionbits.cpp: In function ‘void versionbits_fuzz_target(FuzzBufferType)’:\r\ntest/fuzz/versionbits.cpp:150:37: warning: ‘*((void*)& last_stats +16)’ may be used uninitialized in this function [-Wmaybe-uninitialized]\r\n  150 |                     if (last_stats->possible) {\r\n      |                         ~~~~~~~~~~~~^~~~~~~~\r\ntest/fuzz/versionbits.cpp:149:97: warning: ‘last_stats.VBitsStats::count’ may be used uninitialized in this function [-Wmaybe-uninitialized]\r\n  149 |                     assert(stats.count == last_stats->count || stats.count == last_stats->count + 1);\r\n      |                                                                                                 ^\r\ntest/fuzz/versionbits.cpp:127:35: warning: ‘last_stats.VBitsStats::elapsed’ may be used uninitialized in this function [-Wmaybe-uninitialized]\r\n  127 |                 assert(last_stats && last_stats->elapsed == period - 1);\r\n      |                                   ^~\r\n```",
      "user": {
        "login": "kristapsk",
        "id": 4500994,
        "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kristapsk",
        "html_url": "https://github.com/kristapsk",
        "followers_url": "https://api.github.com/users/kristapsk/followers",
        "following_url": "https://api.github.com/users/kristapsk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kristapsk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kristapsk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
        "organizations_url": "https://api.github.com/users/kristapsk/orgs",
        "repos_url": "https://api.github.com/users/kristapsk/repos",
        "events_url": "https://api.github.com/users/kristapsk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kristapsk/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-797382764",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 797656298,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5NzY1NjI5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797656298",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-12T17:55:31Z",
      "updated_at": "2021-03-12T17:55:31Z",
      "author_association": "MEMBER",
      "body": "> There are some compiler warnings for me (GCC 9.3.0).\r\n\r\nI believe these are caused by the changes from #21380.\r\n",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-797656298",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 797866949,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5Nzg2Njk0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797866949",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-13T04:54:05Z",
      "updated_at": "2021-03-13T04:54:05Z",
      "author_association": "MEMBER",
      "body": "Hmm, I'm not seeing those warnings, and I think all those statements are protected by an `if (last_stats)` which should ensure it's initialised.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-797866949",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 797872796,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5Nzg3Mjc5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/797872796",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-13T05:49:27Z",
      "updated_at": "2021-03-13T05:49:27Z",
      "author_association": "MEMBER",
      "body": "I see this warnings with gcc 10.2.0",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-797872796",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 798810300,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5ODgxMDMwMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/798810300",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-14T00:59:17Z",
      "updated_at": "2021-03-14T00:59:17Z",
      "author_association": "MEMBER",
      "body": "Apparently I wasn't seeing those warnings because my fuzz things were being compiled with `-O0`... Seems to be a gcc bug not handling optional very well to me ([80635](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=80635) maybe?) but it's easy enough to not use an optional here, so I've added a patch to do that.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-798810300",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "reviewed",
      "id": 607868995,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA3ODY4OTk1",
      "url": null,
      "actor": null,
      "commit_id": "968bc1e07b4a8a359876f5b8035fb4c369d04bad",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-607868995",
      "submitted_at": "2021-03-14T01:07:27Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4454771670,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ1NDc3MTY3MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4454771670",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-14T01:23:05Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4454807833,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ1NDgwNzgzMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4454807833",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-14T02:31:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4454824125,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ1NDgyNDEyNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4454824125",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-14T03:03:58Z"
    },
    {
      "event": "reviewed",
      "id": 611657500,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjExNjU3NTAw",
      "url": null,
      "actor": null,
      "commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-611657500",
      "submitted_at": "2021-03-14T04:13:38Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "reviewed",
      "id": 611657938,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjExNjU3OTM4",
      "url": null,
      "actor": null,
      "commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-611657938",
      "submitted_at": "2021-03-14T04:18:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "reviewed",
      "id": 611658059,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjExNjU4MDU5",
      "url": null,
      "actor": null,
      "commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-611658059",
      "submitted_at": "2021-03-14T04:21:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "referenced",
      "id": 4454866311,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0NTQ4NjYzMTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4454866311",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d5594e6d9906e94ecc72b9382c63b6032822b31a",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/d5594e6d9906e94ecc72b9382c63b6032822b31a",
      "created_at": "2021-03-14T04:27:40Z"
    },
    {
      "event": "referenced",
      "id": 4454866312,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0NTQ4NjYzMTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4454866312",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f21d054aafad6240fd8b4d256aeb9578c7a4e63c",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/f21d054aafad6240fd8b4d256aeb9578c7a4e63c",
      "created_at": "2021-03-14T04:27:40Z"
    },
    {
      "event": "referenced",
      "id": 4454866313,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0NTQ4NjYzMTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4454866313",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "12cd6b6b8a2a9d6e3dabedf6fd37ba5b87ee7fa3",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/12cd6b6b8a2a9d6e3dabedf6fd37ba5b87ee7fa3",
      "created_at": "2021-03-14T04:27:40Z"
    },
    {
      "event": "referenced",
      "id": 4454866314,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0NTQ4NjYzMTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4454866314",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3a56d56fa68d3b060a18cd07e3fb5726a3ea3785",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/3a56d56fa68d3b060a18cd07e3fb5726a3ea3785",
      "created_at": "2021-03-14T04:27:40Z"
    },
    {
      "event": "referenced",
      "id": 4454866315,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0NTQ4NjYzMTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4454866315",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "798d7788e36f62a2eb9f46d8e06b8f8a90a2dfcc",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/798d7788e36f62a2eb9f46d8e06b8f8a90a2dfcc",
      "created_at": "2021-03-14T04:27:40Z"
    },
    {
      "event": "referenced",
      "id": 4454866316,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0NTQ4NjYzMTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4454866316",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a050123661294450a874be44d4e1640e3b93d35f",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/a050123661294450a874be44d4e1640e3b93d35f",
      "created_at": "2021-03-14T04:27:40Z"
    },
    {
      "event": "reviewed",
      "id": 611687104,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjExNjg3MTA0",
      "url": null,
      "actor": null,
      "commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-611687104",
      "submitted_at": "2021-03-14T11:47:49Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "reviewed",
      "id": 611711166,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjExNzExMTY2",
      "url": null,
      "actor": null,
      "commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-611711166",
      "submitted_at": "2021-03-14T16:01:28Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4455527974,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ1NTUyNzk3NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4455527974",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-14T17:53:27Z"
    },
    {
      "event": "labeled",
      "id": 4457161593,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ0NTcxNjE1OTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4457161593",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T08:20:22Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 799378366,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5OTM3ODM2Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/799378366",
      "actor": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T12:25:50Z",
      "updated_at": "2021-03-15T12:31:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, Approach ACK. \r\n\r\nThere appears to be considerable community [support](https://gist.github.com/michaelfolkson/92899f27f1ab30aa2ebee82314f8fe7f) for the Speedy Trial proposal and I think this PR is best positioned today to be merged in the near future given that it cherry picks commits from other authors (Luke, AJ, Sjors). \r\n\r\nThis bitcoin-dev mailing list [post](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-March/018594.html) had a startheight of May 1st (and that is the startheight Andrew is going with I think). That doesn't leave much time if this is going to be released well in advance of that startheight with communication to users (including miners). The startheight can be pushed back if needed though ideally it wouldn't need to be. The merge decision is obviously ultimately up to the maintainers. If this PR (or any PR) isn't ready to be merged I wouldn't expect it to be merged regardless of any upcoming planned startheight.\r\n\r\nedit: To be clear I don't think this PR is ready to be merged yet. But hopefully it will be after **at the very least** a couple of weeks of sustained review.",
      "user": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-799378366",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4459537243,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ1OTUzNzI0Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4459537243",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T15:43:41Z"
    },
    {
      "event": "unlabeled",
      "id": 4459889664,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDQ1OTg4OTY2NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4459889664",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T16:45:08Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 799573801,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc5OTU3MzgwMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/799573801",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T16:48:59Z",
      "updated_at": "2021-03-15T16:48:59Z",
      "author_association": "MEMBER",
      "body": "<!--4a62be1de6b64f3ed646cdc7932c8cf5-->\n🕵️ @harding @sipa have been requested to review this pull request as specified in the REVIEWERS file.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-799573801",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "mentioned",
      "id": 4459910564,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDQ1OTkxMDU2NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4459910564",
      "actor": {
        "login": "harding",
        "id": 61096,
        "node_id": "MDQ6VXNlcjYxMDk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/61096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/harding",
        "html_url": "https://github.com/harding",
        "followers_url": "https://api.github.com/users/harding/followers",
        "following_url": "https://api.github.com/users/harding/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/harding/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/harding/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/harding/subscriptions",
        "organizations_url": "https://api.github.com/users/harding/orgs",
        "repos_url": "https://api.github.com/users/harding/repos",
        "events_url": "https://api.github.com/users/harding/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/harding/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T16:48:59Z"
    },
    {
      "event": "subscribed",
      "id": 4459910571,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ0NTk5MTA1NzE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4459910571",
      "actor": {
        "login": "harding",
        "id": 61096,
        "node_id": "MDQ6VXNlcjYxMDk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/61096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/harding",
        "html_url": "https://github.com/harding",
        "followers_url": "https://api.github.com/users/harding/followers",
        "following_url": "https://api.github.com/users/harding/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/harding/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/harding/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/harding/subscriptions",
        "organizations_url": "https://api.github.com/users/harding/orgs",
        "repos_url": "https://api.github.com/users/harding/repos",
        "events_url": "https://api.github.com/users/harding/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/harding/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T16:48:59Z"
    },
    {
      "event": "mentioned",
      "id": 4459910580,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDQ1OTkxMDU4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4459910580",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T16:48:59Z"
    },
    {
      "event": "subscribed",
      "id": 4459910582,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ0NTk5MTA1ODI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4459910582",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T16:48:59Z"
    },
    {
      "event": "labeled",
      "id": 4460531023,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ0NjA1MzEwMjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4460531023",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T18:54:34Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4461431636,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ2MTQzMTYzNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4461431636",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T22:52:55Z"
    },
    {
      "event": "unlabeled",
      "id": 4461463134,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDQ2MTQ2MzEzNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4461463134",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-15T23:04:21Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 800579275,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwMDU3OTI3NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/800579275",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-16T20:24:28Z",
      "updated_at": "2021-03-16T20:24:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "Now that #21380 has been revamped to only add a fuzz test (no refactors), probably makes sense to update this PR to match?\r\n\r\nAlso, can you update the OP description to match the commits? OP refers to 5 commits but the branch has 14 😛",
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-800579275",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4466898794,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ2Njg5ODc5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4466898794",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-16T21:01:16Z"
    },
    {
      "event": "commented",
      "id": 800606952,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwMDYwNjk1Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/800606952",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-16T21:10:29Z",
      "updated_at": "2021-03-16T21:10:29Z",
      "author_association": "MEMBER",
      "body": "> Now that #21380 has been revamped to only add a fuzz test (no refactors), probably makes sense to update this PR to match?\r\n\r\nI have kept the refactoring commits and dropped the fuzzer commits, as the refactors were the reason this PR was based on #21380.\r\n\r\n> Also, can you update the OP description to match the commits? OP refers to 5 commits but the branch has 14 stuck_out_tongue\r\n\r\nUpdated the description.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-800606952",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "referenced",
      "id": 4467649391,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0Njc2NDkzOTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4467649391",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "36d7ef09a78113ce6a801c0451a040d698cd3d9d",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/36d7ef09a78113ce6a801c0451a040d698cd3d9d",
      "created_at": "2021-03-17T01:34:58Z"
    },
    {
      "event": "referenced",
      "id": 4467649393,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0Njc2NDkzOTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4467649393",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "dc368e4957b77d6bfa1cda51f4f634e7140f7436",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/dc368e4957b77d6bfa1cda51f4f634e7140f7436",
      "created_at": "2021-03-17T01:34:58Z"
    },
    {
      "event": "commented",
      "id": 801220786,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwMTIyMDc4Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/801220786",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-17T16:21:02Z",
      "updated_at": "2021-03-17T16:21:02Z",
      "author_association": "MEMBER",
      "body": "It's probably a good idea to extract 524b41ffdb67ebaf1538a39b88344e7d4118b4b8 to 414640fbaf8cf00e8e37451764a77cdec3fdd730 into a seperate PR, and perhaps also incorporate @luke-jr's #21399. That covers all the refactoring and generic-making. This PR, the BIP 9 variant #21377, a BIP 8 (lot=false) and a BIP 9 activation can all build on that.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-801220786",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "mentioned",
      "id": 4471276815,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDQ3MTI3NjgxNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4471276815",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-17T16:21:02Z"
    },
    {
      "event": "subscribed",
      "id": 4471276823,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ0NzEyNzY4MjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4471276823",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-17T16:21:02Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4472023987,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ3MjAyMzk4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4472023987",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-17T18:51:46Z"
    },
    {
      "event": "commented",
      "id": 801328699,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwMTMyODY5OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/801328699",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-17T18:52:10Z",
      "updated_at": "2021-03-17T18:54:57Z",
      "author_association": "MEMBER",
      "body": "I've dropped the refactoring and will include it in another PR.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-801328699",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "added_to_project",
      "id": 4478083620,
      "node_id": "MDE5OkFkZGVkVG9Qcm9qZWN0RXZlbnQ0NDc4MDgzNjIw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4478083620",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-18T19:05:36Z",
      "project_card": {
        "id": 57222719,
        "url": "https://api.github.com/projects/columns/cards/57222719",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Blockers"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4478193505,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ3ODE5MzUwNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4478193505",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-18T19:31:38Z"
    },
    {
      "event": "reviewed",
      "id": 615833221,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE1ODMzMjIx",
      "url": null,
      "actor": null,
      "commit_id": "2961b34e085787691701fd85b58061c205d489f3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-615833221",
      "submitted_at": "2021-03-18T20:13:59Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4478415732,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ3ODQxNTczMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4478415732",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-18T20:16:39Z"
    },
    {
      "event": "reviewed",
      "id": 615835866,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE1ODM1ODY2",
      "url": null,
      "actor": null,
      "commit_id": "927b918ab229833bbe60e4f87e6cf1723b469f52",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-615835866",
      "submitted_at": "2021-03-18T20:57:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4479176836,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ3OTE3NjgzNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4479176836",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-18T23:33:48Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4479280513,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ3OTI4MDUxMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4479280513",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-19T00:11:02Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4483744894,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ4Mzc0NDg5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4483744894",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-19T18:35:02Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4484150361,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ4NDE1MDM2MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4484150361",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-19T20:25:53Z"
    },
    {
      "event": "commented",
      "id": 803104973,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwMzEwNDk3Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/803104973",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-19T20:27:14Z",
      "updated_at": "2021-03-19T20:27:14Z",
      "author_association": "MEMBER",
      "body": "Rebased for hidden merge conflict with the fuzzer. As such, the versionbits fuzzer is updated for heights and min activation height.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-803104973",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "reviewed",
      "id": 616883132,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE2ODgzMTMy",
      "url": null,
      "actor": null,
      "commit_id": "501e1371a7c122ad8629bc31bfdab7d8195a75fa",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-616883132",
      "submitted_at": "2021-03-20T05:20:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4485257342,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ4NTI1NzM0Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4485257342",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-20T05:38:43Z"
    },
    {
      "event": "reviewed",
      "id": 616888164,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE2ODg4MTY0",
      "url": null,
      "actor": null,
      "commit_id": "80fc57990b4682bad350e1e7aff0ea4db73fec31",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-616888164",
      "submitted_at": "2021-03-20T06:24:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "reviewed",
      "id": 616912138,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE2OTEyMTM4",
      "url": null,
      "actor": null,
      "commit_id": "59833ff7118510de7bd2e89d55e074dc23cef8ef",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 80fc57990b4682bad350e1e7aff0ea4db73fec31\r\n\r\nMaybe wait with merging until BIP 8 is updated with `min_activation_height` support (see https://github.com/bitcoin/bips/pull/1080, https://github.com/bitcoin/bips/pull/1081)",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-616912138",
      "submitted_at": "2021-03-20T14:31:30Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4485836440,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ4NTgzNjQ0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4485836440",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-20T17:35:21Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4485918068,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ4NTkxODA2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4485918068",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-20T19:08:29Z"
    },
    {
      "event": "reviewed",
      "id": 617869698,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE3ODY5Njk4",
      "url": null,
      "actor": null,
      "commit_id": "52990c109349d7510a98070f07f706a60c6e2b75",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-617869698",
      "submitted_at": "2021-03-22T18:44:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4493063001,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ5MzA2MzAwMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4493063001",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-22T23:54:13Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4498690589,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ5ODY5MDU4OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4498690589",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-23T21:41:47Z"
    },
    {
      "event": "reviewed",
      "id": 619140029,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE5MTQwMDI5",
      "url": null,
      "actor": null,
      "commit_id": "9a8334212bfa557b06d300f49962b3a772b63837",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 9a8334212bfa557b06d300f49962b3a772b63837\r\n\r\nOne last bug could be fixed, but it doesn't really matter",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-619140029",
      "submitted_at": "2021-03-23T23:44:30Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4499108896,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ5OTEwODg5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4499108896",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T00:13:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4499174649,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ5OTE3NDY0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4499174649",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T00:40:28Z"
    },
    {
      "event": "reviewed",
      "id": 619240109,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE5MjQwMTA5",
      "url": null,
      "actor": null,
      "commit_id": "aa41d035137c0686ae3488e2f9e774c4edbf5bd7",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK aa41d035137c0686ae3488e2f9e774c4edbf5bd7",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-619240109",
      "submitted_at": "2021-03-24T01:56:00Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "reviewed",
      "id": 619229252,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE5MjI5MjUy",
      "url": null,
      "actor": null,
      "commit_id": "bf4bddaac7db767986d29d22b8d866867bb50220",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-619229252",
      "submitted_at": "2021-03-24T02:36:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4499549836,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ5OTU0OTgzNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4499549836",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T03:25:11Z"
    },
    {
      "event": "reviewed",
      "id": 619322312,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE5MzIyMzEy",
      "url": null,
      "actor": null,
      "commit_id": "2cb41863abe59717a199a66030185e2d23226a23",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 2cb41863abe59717a199a66030185e2d23226a23\r\n\r\nJust a couple nits",
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-619322312",
      "submitted_at": "2021-03-24T05:44:49Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4499913450,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDQ5OTkxMzQ1MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4499913450",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T05:53:10Z"
    },
    {
      "event": "reviewed",
      "id": 619350755,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE5MzUwNzU1",
      "url": null,
      "actor": null,
      "commit_id": "4a37423700f3432b976ada6adbc19e1ce75c7d9a",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-619350755",
      "submitted_at": "2021-03-24T05:58:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyYmU3MzBjMzFkZTVlMTQ5NmQ4OTNkMmZlMTIxYWY3MDg3OWNlYWRm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2be730c31de5e1496d893d2fe121af70879ceadf",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2be730c31de5e1496d893d2fe121af70879ceadf",
      "tree": {
        "sha": "e53632b9d1543bd5adae331e97ab4060aa88725b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e53632b9d1543bd5adae331e97ab4060aa88725b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f95071a3f5d3e968f5c7c4d36397fc08b5849ee9",
          "sha": "f95071a3f5d3e968f5c7c4d36397fc08b5849ee9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f95071a3f5d3e968f5c7c4d36397fc08b5849ee9"
        }
      ],
      "message": "chainparams: make versionbits threshold per-deployment",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-03-24T06:19:40Z"
      },
      "author": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2021-03-09T00:58:40Z"
      },
      "sha": "2be730c31de5e1496d893d2fe121af70879ceadf"
    },
    {
      "event": "reviewed",
      "id": 619364359,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE5MzY0MzU5",
      "url": null,
      "actor": null,
      "commit_id": "4a37423700f3432b976ada6adbc19e1ce75c7d9a",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "reACK 4a37423700f3432b976ada6adbc19e1ce75c7d9a",
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-619364359",
      "submitted_at": "2021-03-24T06:30:10Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "commented",
      "id": 805540245,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwNTU0MDI0NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805540245",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T06:32:08Z",
      "updated_at": "2021-03-24T06:32:08Z",
      "author_association": "MEMBER",
      "body": "Had to rebase due to fuzzer changes",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-805540245",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4500025633,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDUwMDAyNTYzMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4500025633",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T06:32:17Z"
    },
    {
      "event": "commented",
      "id": 805542966,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwNTU0Mjk2Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805542966",
      "actor": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T06:38:03Z",
      "updated_at": "2021-03-24T06:38:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "reACK 2f457ca73ce33557ecff0d45c37c33957b1b0764",
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-805542966",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "unlabeled",
      "id": 4500826228,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDUwMDgyNjIyOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4500826228",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T09:45:22Z",
      "label": {
        "name": "Docs",
        "color": "02d7e1"
      }
    },
    {
      "event": "unlabeled",
      "id": 4500826230,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDUwMDgyNjIzMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4500826230",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T09:45:22Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "unlabeled",
      "id": 4500826232,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDUwMDgyNjIzMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4500826232",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T09:45:22Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "reviewed",
      "id": 619663226,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE5NjYzMjI2",
      "url": null,
      "actor": null,
      "commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Looked at the first commit, I'll review the remaining commits later",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-619663226",
      "submitted_at": "2021-03-24T12:49:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "commented",
      "id": 805910099,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwNTkxMDA5OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805910099",
      "actor": {
        "login": "devrandom",
        "id": 107096,
        "node_id": "MDQ6VXNlcjEwNzA5Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/107096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/devrandom",
        "html_url": "https://github.com/devrandom",
        "followers_url": "https://api.github.com/users/devrandom/followers",
        "following_url": "https://api.github.com/users/devrandom/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/devrandom/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/devrandom/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/devrandom/subscriptions",
        "organizations_url": "https://api.github.com/users/devrandom/orgs",
        "repos_url": "https://api.github.com/users/devrandom/repos",
        "events_url": "https://api.github.com/users/devrandom/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/devrandom/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T15:13:47Z",
      "updated_at": "2021-03-24T15:13:47Z",
      "author_association": "NONE",
      "body": "Tested as follows:\r\n\r\n- made unit tests fail by manually breaking the unit test `versionbits_test` in various ways\r\n- made unit tests fail by introducing off-by-one errors in all the relevant spots in `versionbits.cpp`\r\n- ensure no failure if cache is disabled by removing cache store statements in `versionbits.cpp`\r\n- manually tested with a single local regtest node\r\n- manually tested a reorg with two local regtest nodes going from `STARTED` to `LOCKED_IN` and back to `STARTED` when the reorg removes a single signalling block that brought the deployment just over the threshold\r\n",
      "user": {
        "login": "devrandom",
        "id": 107096,
        "node_id": "MDQ6VXNlcjEwNzA5Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/107096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/devrandom",
        "html_url": "https://github.com/devrandom",
        "followers_url": "https://api.github.com/users/devrandom/followers",
        "following_url": "https://api.github.com/users/devrandom/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/devrandom/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/devrandom/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/devrandom/subscriptions",
        "organizations_url": "https://api.github.com/users/devrandom/orgs",
        "repos_url": "https://api.github.com/users/devrandom/repos",
        "events_url": "https://api.github.com/users/devrandom/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/devrandom/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-805910099",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4503052784,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDUwMzA1Mjc4NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4503052784",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-24T16:36:53Z"
    },
    {
      "event": "reviewed",
      "id": 620285728,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIwMjg1NzI4",
      "url": null,
      "actor": null,
      "commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Had a first parse on it",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-620285728",
      "submitted_at": "2021-03-25T00:28:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "reviewed",
      "id": 620300576,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIwMzAwNTc2",
      "url": null,
      "actor": null,
      "commit_id": "e43c8add3451ac653d306351f50b12942238938e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-620300576",
      "submitted_at": "2021-03-25T00:45:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjOTUyODdlMzc4YTRhNGE3OWI5NjMyZDc2NDcwMTVlOTZkYzNhMjFj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c95287e378a4a4a79b9632d7647015e96dc3a21c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c95287e378a4a4a79b9632d7647015e96dc3a21c",
      "tree": {
        "sha": "4705a5f092650bb5706b032989918ccde0f6e34d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4705a5f092650bb5706b032989918ccde0f6e34d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2be730c31de5e1496d893d2fe121af70879ceadf",
          "sha": "2be730c31de5e1496d893d2fe121af70879ceadf",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2be730c31de5e1496d893d2fe121af70879ceadf"
        }
      ],
      "message": "Migrate versionbits to use height instead of MTP\n\nCo-authored-by: Anthony Towns <aj@erisian.com.au>",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-03-25T01:18:33Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2020-06-25T16:54:06Z"
      },
      "sha": "c95287e378a4a4a79b9632d7647015e96dc3a21c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ZjU1NTczZWQzMjc0MzA2MDllYzJkOGY5NGNiYjc5ZWQwM2U4ZjY0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8f55573ed327430609ec2d8f94cbb79ed03e8f64",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8f55573ed327430609ec2d8f94cbb79ed03e8f64",
      "tree": {
        "sha": "d556dd913d2d2fbe2cdc9ae627f015153bafa0a8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d556dd913d2d2fbe2cdc9ae627f015153bafa0a8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c95287e378a4a4a79b9632d7647015e96dc3a21c",
          "sha": "c95287e378a4a4a79b9632d7647015e96dc3a21c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c95287e378a4a4a79b9632d7647015e96dc3a21c"
        }
      ],
      "message": "Rename user facing mentions of BIP 9 to versionbits and/or BIP 8\n\nCo-authored-by: Anthony Towns <aj@erisian.com.au>",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-03-25T01:20:56Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2020-06-26T20:51:07Z"
      },
      "sha": "8f55573ed327430609ec2d8f94cbb79ed03e8f64"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxZGFjODRiNWRlNmM1YjIyNWY4ZmM3MGUyMTE0MWVjZWQ0MGU4NjE5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1dac84b5de6c5b225f8fc70e21141eced40e8619",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1dac84b5de6c5b225f8fc70e21141eced40e8619",
      "tree": {
        "sha": "2069751cd464b4ee0129d98be9706b1e215cfcd2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2069751cd464b4ee0129d98be9706b1e215cfcd2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8f55573ed327430609ec2d8f94cbb79ed03e8f64",
          "sha": "8f55573ed327430609ec2d8f94cbb79ed03e8f64",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8f55573ed327430609ec2d8f94cbb79ed03e8f64"
        }
      ],
      "message": "Add minimum activation height to BIP9Deployments",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-03-25T01:20:56Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-03-08T20:02:01Z"
      },
      "sha": "1dac84b5de6c5b225f8fc70e21141eced40e8619"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3M2QyNzU2MjQ0NGNhNTcxYjY3ZDQ3MjQ3NWUzZTY0Nzg2MzBlMGRh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/73d27562444ca571b67d472475e3e6478630e0da",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/73d27562444ca571b67d472475e3e6478630e0da",
      "tree": {
        "sha": "9e5e8654255cf21e6ad5b00dc8d9c8f423924f3d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9e5e8654255cf21e6ad5b00dc8d9c8f423924f3d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1dac84b5de6c5b225f8fc70e21141eced40e8619",
          "sha": "1dac84b5de6c5b225f8fc70e21141eced40e8619",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1dac84b5de6c5b225f8fc70e21141eced40e8619"
        }
      ],
      "message": "tests: test versionbits delayed activation",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-03-25T01:20:56Z"
      },
      "author": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2021-03-06T08:38:44Z"
      },
      "sha": "73d27562444ca571b67d472475e3e6478630e0da"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1MGViN2YwYjI4ZmYxYWZiODE2YzQ5ODcwMzQ0ZjBhMjEwYjZiZTZl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/50eb7f0b28ff1afb816c49870344f0a210b6be6e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/50eb7f0b28ff1afb816c49870344f0a210b6be6e",
      "tree": {
        "sha": "2c6ee776d24b1242b407b4c2ce543a1680fa4e4c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2c6ee776d24b1242b407b4c2ce543a1680fa4e4c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/73d27562444ca571b67d472475e3e6478630e0da",
          "sha": "73d27562444ca571b67d472475e3e6478630e0da",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/73d27562444ca571b67d472475e3e6478630e0da"
        }
      ],
      "message": "Clarify and reduce nRuleChangeActivationThreshold\n\nAs thresholds are now parameterized, nRuleChangeActivationThreshold is\nno longer the threshold used for activating new rule changes. Instead it\nis now only used to warn if there is an unkonwn versionbits deployment.\nTo make this clear, rename to m_vbits_min_threshold and update the\ncomment describing it.\n\nAdditionally, because this is just a minimum used for a warning, reduce\nthe threshold to 75% so that future soft forks which may have thresholds\nlower than 95% will still have warnings.",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-03-25T01:20:56Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-03-09T05:48:26Z"
      },
      "sha": "50eb7f0b28ff1afb816c49870344f0a210b6be6e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5MWIyZTRiNGY5YmIzY2Q5OWE2ZDQwMDQ2M2IyMDUyNTUwZTE5YjA1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91b2e4b4f9bb3cd99a6d400463b2052550e19b05",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/91b2e4b4f9bb3cd99a6d400463b2052550e19b05",
      "tree": {
        "sha": "75d876ed2b2ec58420b4d55ecdc04f97dcc0a2b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/75d876ed2b2ec58420b4d55ecdc04f97dcc0a2b6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/50eb7f0b28ff1afb816c49870344f0a210b6be6e",
          "sha": "50eb7f0b28ff1afb816c49870344f0a210b6be6e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/50eb7f0b28ff1afb816c49870344f0a210b6be6e"
        }
      ],
      "message": "test: add min_activation_height to -vbparams",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-03-25T01:22:54Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2021-03-09T14:28:26Z"
      },
      "sha": "91b2e4b4f9bb3cd99a6d400463b2052550e19b05"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZTU1YmNlZGI4ZDczZTQ5NjIwYTU3MzExOTZiZjdlMjNiYjUzY2Nj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "tree": {
        "sha": "6aefb5b559c03bf4daa2999bb720f7d1044ae997",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6aefb5b559c03bf4daa2999bb720f7d1044ae997"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91b2e4b4f9bb3cd99a6d400463b2052550e19b05",
          "sha": "91b2e4b4f9bb3cd99a6d400463b2052550e19b05",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/91b2e4b4f9bb3cd99a6d400463b2052550e19b05"
        }
      ],
      "message": "test: BIP 8 delayed activation functional test",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-03-25T01:26:59Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2021-03-09T15:51:53Z"
      },
      "sha": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4505245730,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDUwNTI0NTczMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4505245730",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-25T01:32:52Z"
    },
    {
      "event": "commented",
      "id": 806315887,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwNjMxNTg4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/806315887",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-25T02:30:39Z",
      "updated_at": "2021-03-25T02:30:39Z",
      "author_association": "MEMBER",
      "body": "Code review ACK for all but the unit and functional tests (which I've only casually looked over). I inferred the finite state machine diagram based on the fuzz test code (making a few suggestions), and compared that with the implemented logic.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-806315887",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 806826159,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwNjgyNjE1OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/806826159",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-25T14:12:16Z",
      "updated_at": "2021-03-25T14:12:16Z",
      "author_association": "MEMBER",
      "body": "re-ACK 2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-806826159",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 807455957,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwNzQ1NTk1Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/807455957",
      "actor": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-25T20:46:20Z",
      "updated_at": "2021-03-25T20:46:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 2e55bcedb8d73e49620a5731196bf7e23bb53ccc\r\n\r\nIdeally a choice on a Speedy Trial PR would have been made by now so I could focus review and testing on one PR and one approach. Spreading review over two competing PRs is doing none of us any favors. I would have liked to have spent more time testing this PR before ACKing it but I think the biggest danger at this point is spreading review too thinly across two PRs. ",
      "user": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-807455957",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "reviewed",
      "id": 621586250,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIxNTg2MjUw",
      "url": null,
      "actor": null,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-621586250",
      "submitted_at": "2021-03-25T21:16:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "reviewed",
      "id": 621511609,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIxNTExNjA5",
      "url": null,
      "actor": null,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-621511609",
      "submitted_at": "2021-03-25T22:42:07Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "commented",
      "id": 807905868,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwNzkwNTg2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/807905868",
      "actor": {
        "login": "harding",
        "id": 61096,
        "node_id": "MDQ6VXNlcjYxMDk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/61096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/harding",
        "html_url": "https://github.com/harding",
        "followers_url": "https://api.github.com/users/harding/followers",
        "following_url": "https://api.github.com/users/harding/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/harding/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/harding/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/harding/subscriptions",
        "organizations_url": "https://api.github.com/users/harding/orgs",
        "repos_url": "https://api.github.com/users/harding/repos",
        "events_url": "https://api.github.com/users/harding/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/harding/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-26T03:16:36Z",
      "updated_at": "2021-03-26T03:16:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "As of commit 2e55bcedb8d73e49620a5731196bf7e23bb53ccc, lightly tested the likely outcomes of ST and confirmed that `getblockchainfo` returned the expected values whether activation was achieved or not, before and after the minimum_activation_period.  I did not check close enough to detect off-by-one errors or other small details.\r\n\r\nTested creating a regtest chain with this branch and `-vbparams=taproot:@144:@576:@1008`, producing enough blocks to lockin and activate taproot, synced them to a taproot-oblivious 0.20.1 node, then upgraded that node to this branch with the same vbparams and confirmed that the upgraded node's `getblockchaininfo` results indicated it would be enforcing taproot.\r\n\r\nI skimmed the code and didn't see any problems, but I don't feel confident enough in my reviewing abilities to say it definitely is fine.",
      "user": {
        "login": "harding",
        "id": 61096,
        "node_id": "MDQ6VXNlcjYxMDk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/61096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/harding",
        "html_url": "https://github.com/harding",
        "followers_url": "https://api.github.com/users/harding/followers",
        "following_url": "https://api.github.com/users/harding/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/harding/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/harding/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/harding/subscriptions",
        "organizations_url": "https://api.github.com/users/harding/orgs",
        "repos_url": "https://api.github.com/users/harding/repos",
        "events_url": "https://api.github.com/users/harding/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/harding/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-807905868",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "reviewed",
      "id": 621891984,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIxODkxOTg0",
      "url": null,
      "actor": null,
      "commit_id": "c95287e378a4a4a79b9632d7647015e96dc3a21c",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "\r\nI looked at 2e55bcedb8d73e49620a5731196bf7e23bb53ccc 🚴\r\n\r\n<details><summary>Show signature and timestamp</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nI looked at 2e55bcedb8d73e49620a5731196bf7e23bb53ccc 🚴\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUg82Av/XqMgcTbyFlMastLZ9AJdjHOHQjwpOkce6XC8ktfvqwbWpRioWiSHf0+C\r\n7bN6kFEJMxXPUAOZ4DeHLoBrsCMqTwPJZ21nNV9p8ZhByBBp5KPEA2PJ3s/RwBCp\r\nYeRpKlLj856117mUv/5oFnABj4xuUMmZ3OkwuvU3RN7TrfKBUkR8ZkmzoSaOkv7s\r\nO/bnZC4qudRl/dGFoa+CouYMWpi49mT+kB59Rs8UZha86KH5Td2siTAbbJBiMAi5\r\n8bFUwGSEsvxJGAr+52PHAcUUymGMZp29neY4Q5f7HIJ28uX5ged/EzSiFeeu4GZn\r\ntH9B7mSqOvjnFIdOCvy8HYy8TzShKGvkiD4PcNvcVWfkQi2WbXtns1AjaZ5Tjeu9\r\nry2OHAzyWSvqbT1DIPD36VTb2c46u/vd9d05rkCjuccHcnXPkV49f68JblA2p9Fj\r\nLUpoCswXIJPZtPxs2ZSwb0LxP54YW1RnguVOy6jg7PcMnecDeu/LFD4MsJtVJE9W\r\nbqp2Q82X\r\n=zjni\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n[Timestamp of file with hash `9fd4467b454c576b05f9c797bd20cd8620ad58c2b63ca8dd4e36f27ec7059a14  -`](https://opentimestamps.org/info/?004f70656e54696d657374616d7073000050726f6f6600bf89e2e884e8929401089fd4467b454c576b05f9c797bd20cd8620ad58c2b63ca8dd4e36f27ec7059a14f0108ff042165174926429b160e1170de99108fff010181b185758ce789074becb639c35141a08f104605db9e8f008d5492509f582efee0083dfe30d2ef90c8e232268747470733a2f2f6274632e63616c656e6461722e636174616c6c6178792e636f6dfff0102167bacd522665f9eca18f7a289ef8bb08f1209c69bb53b915473e27aef5c9b98e92d9e3016d4a97e48329e3d1cb3139462d3f08f104605db9e7f0081578f1c2ee261cf00083dfe30d2ef90c8e2c2b68747470733a2f2f626f622e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267fff0102a752c38f9010d844d40ec87e0945efc08f120e8ba046c0af1a9d5891f26cea4a67e9fb0da321a1982bbf3398e9a8ac652a53708f1209424495065a00647bd33989bdc09615acbb5e1785a25c0e98a29154bf8b546c808f104605dac10f0083a35f7be1fc29ee80083dfe30d2ef90c8e292868747470733a2f2f66696e6e65792e63616c656e6461722e657465726e69747977616c6c2e636f6df0105064ade08e1e6f34c85dab49996b070408f02008dd19a2586e27e080b270b3b32ed0e9a126e04602bf60b0005d16c37714a61d08f1204b7b124a5b9b779bb7419b145138cb957aa8ef16c554fbb7525711b7a8656c2e08f104605db9e6f008ff5c55a3b32230ea0083dfe30d2ef90c8e2e2d68747470733a2f2f616c6963652e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267)\r\n\r\n</details>\r\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-621891984",
      "submitted_at": "2021-03-26T10:43:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "commented",
      "id": 808263580,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwODI2MzU4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/808263580",
      "actor": {
        "login": "devrandom",
        "id": 107096,
        "node_id": "MDQ6VXNlcjEwNzA5Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/107096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/devrandom",
        "html_url": "https://github.com/devrandom",
        "followers_url": "https://api.github.com/users/devrandom/followers",
        "following_url": "https://api.github.com/users/devrandom/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/devrandom/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/devrandom/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/devrandom/subscriptions",
        "organizations_url": "https://api.github.com/users/devrandom/orgs",
        "repos_url": "https://api.github.com/users/devrandom/repos",
        "events_url": "https://api.github.com/users/devrandom/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/devrandom/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-26T14:28:33Z",
      "updated_at": "2021-03-26T14:28:33Z",
      "author_association": "NONE",
      "body": "ACK https://github.com/bitcoin/bitcoin/pull/21392/commits/2e55bcedb8d73e49620a5731196bf7e23bb53ccc\r\n\r\nIn addition to the testing in https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-805910099 I also checked that the fuzzer detects various off-by-one errors I manually introduced into the implementation.\r\n",
      "user": {
        "login": "devrandom",
        "id": 107096,
        "node_id": "MDQ6VXNlcjEwNzA5Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/107096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/devrandom",
        "html_url": "https://github.com/devrandom",
        "followers_url": "https://api.github.com/users/devrandom/followers",
        "following_url": "https://api.github.com/users/devrandom/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/devrandom/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/devrandom/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/devrandom/subscriptions",
        "organizations_url": "https://api.github.com/users/devrandom/orgs",
        "repos_url": "https://api.github.com/users/devrandom/repos",
        "events_url": "https://api.github.com/users/devrandom/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/devrandom/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-808263580",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "reviewed",
      "id": 622289394,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIyMjg5Mzk0",
      "url": null,
      "actor": null,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-622289394",
      "submitted_at": "2021-03-26T15:47:23Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "commented",
      "id": 808329160,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwODMyOTE2MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/808329160",
      "actor": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-26T15:55:54Z",
      "updated_at": "2021-03-26T15:55:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "reACK 2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-808329160",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "reviewed",
      "id": 622605741,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIyNjA1NzQx",
      "url": null,
      "actor": null,
      "commit_id": "c95287e378a4a4a79b9632d7647015e96dc3a21c",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK 2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-622605741",
      "submitted_at": "2021-03-27T02:13:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "commented",
      "id": 808844563,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwODg0NDU2Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/808844563",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T04:56:27Z",
      "updated_at": "2021-03-28T04:56:27Z",
      "author_association": "MEMBER",
      "body": "I think I'm an approach NACK, or at least approach -1, on using heights for activation at this point: they're [incompatible with activating on testnet](https://github.com/bitcoin/bips/pull/1081#pullrequestreview-621934640) due to hash rate inconsistency, and they're incompatible with activation on signet due to custom signets being able to have completely random heights, since anyone can start a new one at any time. They're not especially convenient for activating on mainnet either: we're choosing timeframes and then converting that to expected block heights, but that can have significant errors -- if we want to give people \"3 months\" to review an update before deploying it, and choose block heights to reflect that, we risk both increased hashpower reducing that time substantially, or reduced hashpower introducing unwanted delays.\r\n\r\nThe main arguments I've seen for the height based approach is to avoid the signalling phase being skipped entirely, and to prevent a mandatory signalling phase (UASF/bip148/bip91/etc) from being skipped entirely, even in the event of a substantial loss of hashrate. But those goals can be achieved with the MTP approach as well -- see the top commit on https://github.com/ajtowns/bitcoin/commits/202103-bip9-uasf .\r\n\r\nThere's the additional benefit that it's simpler to explain \"signalling begins at height X and ends at height Y\" than \"signalling begins at the first retarget period after time X, and ends in the last retarget period before time Y\", but that seems like a much lower priority than being able to test activations on testnet and signet prior to activation on mainnet...",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-808844563",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 808886402,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwODg4NjQwMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/808886402",
      "actor": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T11:55:15Z",
      "updated_at": "2021-03-28T11:55:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "For the sake of respecting other reviewers' time, Taproot is already active on the default Signet for testing and experimentation with Taproot transactions. Activating Taproot on testnet seems like a very low priority, certainly a lower priority than ensuring the optimal code is merged for mainnet activation. \r\n\r\nIf you want a summary of the arguments for a consistent use of block height versus using a mix of block height and MTP there is this [SE question](https://bitcoin.stackexchange.com/questions/103854/should-block-height-or-mtp-or-a-mixture-of-both-be-used-in-a-soft-fork-activatio) with two answers, one from harding and one from me summarizing the arguments expressed in the two Speedy Trial PRs. \r\n\r\nThis appears to be the major differentiator between the two PRs. If you would prefer a consistent use of block height I would recommend reviewing this PR. If you would prefer a mix of block height and MTP I would recommend reviewing AJ's alternative Speedy Trial PR.\r\n\r\nAs I've communicated on AJ's PR, spreading review over two competing PRs is doing none of us any favors at this point.\r\n\r\n",
      "user": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-808886402",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 808891024,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwODg5MTAyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/808891024",
      "actor": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:09Z",
      "updated_at": "2021-03-28T12:37:01Z",
      "author_association": "CONTRIBUTOR",
      "body": "Also [this](https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-802336038) shows preferences for a consistent use of block height.\r\n\r\n> I don't have a strong view but it appears that @achow101 in #21392 and just by reading the comments in this PR @luke-jr @benthecarman @JeremyRubin @Sjors @roconnor-blockstream @harding all have a preference for a fully height based approach over any use of MTP.\r\n>\r\n> If that isn't the case please correct me. And if anyone else has a view on entirely block height versus some limited use of MTP can you post it on IRC (##taproot-activation)?\r\n>\r\n> The fuzzing PR looks very cool. On that PR @MarcoFalke also expresses an expectation that activation will be based on block heights.\r\n>\r\n> edit: Some additional comments from today's Core dev meeting\r\n>\r\n> \"it comes down to mtp vs block height\" @achow101\r\n>\r\n> \"the main difference between these two PRs are using block height vs MTP \" @amitiuttarwar\r\n>\r\n> \"with mtp, we run the risk of losing 2 signaling periods. with already few signaling periods, this has the possibility of failing to activate due to bad luck\" @achow101\r\n>\r\n> \"the property that achow101's PR improves is a fixed (number) of signals\" @JeremyRubin\r\n\r\nIn addition @JeremyRubin stated [here](https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-802396191) \"I have a preference for fully height based design, correct.\"\r\n\r\nThis is becoming a farce, pure and simple.\r\n\r\n",
      "user": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-808891024",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "mentioned",
      "id": 4518091590,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDUxODA5MTU5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091590",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:09Z"
    },
    {
      "event": "subscribed",
      "id": 4518091591,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1MTgwOTE1OTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091591",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:09Z"
    },
    {
      "event": "mentioned",
      "id": 4518091592,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDUxODA5MTU5Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091592",
      "actor": {
        "login": "harding",
        "id": 61096,
        "node_id": "MDQ6VXNlcjYxMDk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/61096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/harding",
        "html_url": "https://github.com/harding",
        "followers_url": "https://api.github.com/users/harding/followers",
        "following_url": "https://api.github.com/users/harding/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/harding/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/harding/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/harding/subscriptions",
        "organizations_url": "https://api.github.com/users/harding/orgs",
        "repos_url": "https://api.github.com/users/harding/repos",
        "events_url": "https://api.github.com/users/harding/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/harding/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:09Z"
    },
    {
      "event": "subscribed",
      "id": 4518091593,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1MTgwOTE1OTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091593",
      "actor": {
        "login": "harding",
        "id": 61096,
        "node_id": "MDQ6VXNlcjYxMDk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/61096?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/harding",
        "html_url": "https://github.com/harding",
        "followers_url": "https://api.github.com/users/harding/followers",
        "following_url": "https://api.github.com/users/harding/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/harding/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/harding/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/harding/subscriptions",
        "organizations_url": "https://api.github.com/users/harding/orgs",
        "repos_url": "https://api.github.com/users/harding/repos",
        "events_url": "https://api.github.com/users/harding/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/harding/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:09Z"
    },
    {
      "event": "mentioned",
      "id": 4518091594,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDUxODA5MTU5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091594",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:09Z"
    },
    {
      "event": "subscribed",
      "id": 4518091595,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1MTgwOTE1OTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091595",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:09Z"
    },
    {
      "event": "mentioned",
      "id": 4518091599,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDUxODA5MTU5OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091599",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:09Z"
    },
    {
      "event": "subscribed",
      "id": 4518091600,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1MTgwOTE2MDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091600",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:09Z"
    },
    {
      "event": "mentioned",
      "id": 4518091602,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDUxODA5MTYwMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091602",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:09Z"
    },
    {
      "event": "subscribed",
      "id": 4518091604,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1MTgwOTE2MDQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091604",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:10Z"
    },
    {
      "event": "mentioned",
      "id": 4518091605,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDUxODA5MTYwNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091605",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:10Z"
    },
    {
      "event": "subscribed",
      "id": 4518091606,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1MTgwOTE2MDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091606",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:10Z"
    },
    {
      "event": "mentioned",
      "id": 4518091608,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDUxODA5MTYwOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091608",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:10Z"
    },
    {
      "event": "subscribed",
      "id": 4518091609,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1MTgwOTE2MDk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091609",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:10Z"
    },
    {
      "event": "mentioned",
      "id": 4518091610,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDUxODA5MTYxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091610",
      "actor": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:10Z"
    },
    {
      "event": "subscribed",
      "id": 4518091611,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1MTgwOTE2MTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091611",
      "actor": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:10Z"
    },
    {
      "event": "mentioned",
      "id": 4518091612,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDUxODA5MTYxMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091612",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:10Z"
    },
    {
      "event": "subscribed",
      "id": 4518091613,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1MTgwOTE2MTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4518091613",
      "actor": {
        "login": "roconnor-blockstream",
        "id": 21371712,
        "node_id": "MDQ6VXNlcjIxMzcxNzEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/21371712?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/roconnor-blockstream",
        "html_url": "https://github.com/roconnor-blockstream",
        "followers_url": "https://api.github.com/users/roconnor-blockstream/followers",
        "following_url": "https://api.github.com/users/roconnor-blockstream/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/roconnor-blockstream/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/roconnor-blockstream/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/roconnor-blockstream/subscriptions",
        "organizations_url": "https://api.github.com/users/roconnor-blockstream/orgs",
        "repos_url": "https://api.github.com/users/roconnor-blockstream/repos",
        "events_url": "https://api.github.com/users/roconnor-blockstream/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/roconnor-blockstream/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:35:10Z"
    },
    {
      "event": "commented",
      "id": 808892479,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwODg5MjQ3OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/808892479",
      "actor": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-28T12:48:22Z",
      "updated_at": "2021-03-28T12:48:22Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I think I'm an approach NACK, or at least approach -1, on using heights for activation at this point: they're incompatible with activating on testnet due to hash rate inconsistency, and they're incompatible with activation on signet due to custom signets being able to have completely random heights, since anyone can start a new one at any time\r\n\r\nI don't think test networks should be relevant to mainnet's activation mechanisms / consensus rules",
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-808892479",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "reviewed",
      "id": 622776945,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIyNzc2OTQ1",
      "url": null,
      "actor": null,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-622776945",
      "submitted_at": "2021-03-28T19:46:59Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "reviewed",
      "id": 622777889,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIyNzc3ODg5",
      "url": null,
      "actor": null,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-622777889",
      "submitted_at": "2021-03-28T20:15:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "reviewed",
      "id": 622781126,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIyNzgxMTI2",
      "url": null,
      "actor": null,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#pullrequestreview-622781126",
      "submitted_at": "2021-03-28T20:40:31Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
    },
    {
      "event": "commented",
      "id": 809850058,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgwOTg1MDA1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809850058",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-30T02:07:57Z",
      "updated_at": "2021-03-30T02:07:57Z",
      "author_association": "MEMBER",
      "body": "I believe this is the intended state machine:\r\n\r\n![states](https://user-images.githubusercontent.com/548488/112922812-fe08a780-90c1-11eb-99e2-291522811faf.png)\r\n\r\nTo generate:\r\n\r\n```sh\r\n$ dot -Tpng >states.png\r\ndigraph versionbits {\r\n    defined [shape=box,label=\"DEFINED\"];\r\n    started [shape=box,label=\"STARTED\"];\r\n    failed [shape=box,label=\"FAILED\"];\r\n    locked [shape=box,label=\"LOCKED_IN\"];\r\n    active [shape=box,label=\"ACTIVE\"];\r\n\r\n    defined -> defined [label=\"height < begin\"];\r\n    defined -> started [label=\"height >= begin\"];\r\n    started -> started [label=\"sig < thresh\\nheight < end\"];\r\n    started -> failed [label=\"sig < thresh\\nheight >= end\"];\r\n    started -> locked [label=\"sig >= thresh\\n\"];\r\n    locked -> locked [label=\"height < min_active\"];\r\n    locked -> active [label=\"height >= min_active\"];\r\n    active -> active [label=\"always\"];\r\n    failed -> failed [label=\"always\"];\r\n}\r\n```",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-809850058",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 812686881,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgxMjY4Njg4MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812686881",
      "actor": {
        "login": "Rspigler",
        "id": 24482484,
        "node_id": "MDQ6VXNlcjI0NDgyNDg0",
        "avatar_url": "https://avatars.githubusercontent.com/u/24482484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Rspigler",
        "html_url": "https://github.com/Rspigler",
        "followers_url": "https://api.github.com/users/Rspigler/followers",
        "following_url": "https://api.github.com/users/Rspigler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Rspigler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Rspigler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Rspigler/subscriptions",
        "organizations_url": "https://api.github.com/users/Rspigler/orgs",
        "repos_url": "https://api.github.com/users/Rspigler/repos",
        "events_url": "https://api.github.com/users/Rspigler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Rspigler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-02T19:56:30Z",
      "updated_at": "2021-04-02T19:56:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "Should `STARTED` -> `LOCKED_IN` be defined as \"sig >=  thresh &  height  <= end\" ?",
      "user": {
        "login": "Rspigler",
        "id": 24482484,
        "node_id": "MDQ6VXNlcjI0NDgyNDg0",
        "avatar_url": "https://avatars.githubusercontent.com/u/24482484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Rspigler",
        "html_url": "https://github.com/Rspigler",
        "followers_url": "https://api.github.com/users/Rspigler/followers",
        "following_url": "https://api.github.com/users/Rspigler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Rspigler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Rspigler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Rspigler/subscriptions",
        "organizations_url": "https://api.github.com/users/Rspigler/orgs",
        "repos_url": "https://api.github.com/users/Rspigler/repos",
        "events_url": "https://api.github.com/users/Rspigler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Rspigler/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-812686881",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "commented",
      "id": 814503706,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgxNDUwMzcwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/814503706",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-06T23:47:39Z",
      "updated_at": "2021-04-06T23:47:39Z",
      "author_association": "MEMBER",
      "body": "Closing this for now as #21377 (with some changes) is agreeable to most people.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-814503706",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21392"
    },
    {
      "event": "closed",
      "id": 4559522590,
      "node_id": "MDExOkNsb3NlZEV2ZW50NDU1OTUyMjU5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4559522590",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-06T23:47:39Z"
    },
    {
      "event": "removed_from_project",
      "id": 4570470346,
      "node_id": "MDIzOlJlbW92ZWRGcm9tUHJvamVjdEV2ZW50NDU3MDQ3MDM0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4570470346",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-08T19:05:16Z",
      "project_card": {
        "id": 57222719,
        "url": "https://api.github.com/projects/columns/cards/57222719",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Blockers"
      }
    },
    {
      "event": "referenced",
      "id": 4576744370,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1NzY3NDQzNzA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4576744370",
      "actor": {
        "login": "BitcoinMechanic",
        "id": 45926711,
        "node_id": "MDQ6VXNlcjQ1OTI2NzEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/45926711?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BitcoinMechanic",
        "html_url": "https://github.com/BitcoinMechanic",
        "followers_url": "https://api.github.com/users/BitcoinMechanic/followers",
        "following_url": "https://api.github.com/users/BitcoinMechanic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BitcoinMechanic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BitcoinMechanic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BitcoinMechanic/subscriptions",
        "organizations_url": "https://api.github.com/users/BitcoinMechanic/orgs",
        "repos_url": "https://api.github.com/users/BitcoinMechanic/repos",
        "events_url": "https://api.github.com/users/BitcoinMechanic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BitcoinMechanic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b8f6d1075894553603fda891da608a53bb54cd07",
      "commit_url": "https://api.github.com/repos/BitcoinActivation/bitcoin/commits/b8f6d1075894553603fda891da608a53bb54cd07",
      "created_at": "2021-04-09T23:24:32Z"
    },
    {
      "event": "referenced",
      "id": 4576744371,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1NzY3NDQzNzE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4576744371",
      "actor": {
        "login": "BitcoinMechanic",
        "id": 45926711,
        "node_id": "MDQ6VXNlcjQ1OTI2NzEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/45926711?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BitcoinMechanic",
        "html_url": "https://github.com/BitcoinMechanic",
        "followers_url": "https://api.github.com/users/BitcoinMechanic/followers",
        "following_url": "https://api.github.com/users/BitcoinMechanic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BitcoinMechanic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BitcoinMechanic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BitcoinMechanic/subscriptions",
        "organizations_url": "https://api.github.com/users/BitcoinMechanic/orgs",
        "repos_url": "https://api.github.com/users/BitcoinMechanic/repos",
        "events_url": "https://api.github.com/users/BitcoinMechanic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BitcoinMechanic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d16be281e9954f20f0eb0da3bf99ab036ea0a9ff",
      "commit_url": "https://api.github.com/repos/BitcoinActivation/bitcoin/commits/d16be281e9954f20f0eb0da3bf99ab036ea0a9ff",
      "created_at": "2021-04-09T23:24:33Z"
    },
    {
      "event": "referenced",
      "id": 4576744372,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1NzY3NDQzNzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4576744372",
      "actor": {
        "login": "BitcoinMechanic",
        "id": 45926711,
        "node_id": "MDQ6VXNlcjQ1OTI2NzEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/45926711?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BitcoinMechanic",
        "html_url": "https://github.com/BitcoinMechanic",
        "followers_url": "https://api.github.com/users/BitcoinMechanic/followers",
        "following_url": "https://api.github.com/users/BitcoinMechanic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BitcoinMechanic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BitcoinMechanic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BitcoinMechanic/subscriptions",
        "organizations_url": "https://api.github.com/users/BitcoinMechanic/orgs",
        "repos_url": "https://api.github.com/users/BitcoinMechanic/repos",
        "events_url": "https://api.github.com/users/BitcoinMechanic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BitcoinMechanic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d599c8f1bc376ed13767bcbb241124f40f1e3d3b",
      "commit_url": "https://api.github.com/repos/BitcoinActivation/bitcoin/commits/d599c8f1bc376ed13767bcbb241124f40f1e3d3b",
      "created_at": "2021-04-09T23:24:33Z"
    },
    {
      "event": "referenced",
      "id": 4576744373,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1NzY3NDQzNzM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4576744373",
      "actor": {
        "login": "BitcoinMechanic",
        "id": 45926711,
        "node_id": "MDQ6VXNlcjQ1OTI2NzEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/45926711?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BitcoinMechanic",
        "html_url": "https://github.com/BitcoinMechanic",
        "followers_url": "https://api.github.com/users/BitcoinMechanic/followers",
        "following_url": "https://api.github.com/users/BitcoinMechanic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BitcoinMechanic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BitcoinMechanic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BitcoinMechanic/subscriptions",
        "organizations_url": "https://api.github.com/users/BitcoinMechanic/orgs",
        "repos_url": "https://api.github.com/users/BitcoinMechanic/repos",
        "events_url": "https://api.github.com/users/BitcoinMechanic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BitcoinMechanic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b7e57792736dfa2c3cc394371ab72217a2aa2d69",
      "commit_url": "https://api.github.com/repos/BitcoinActivation/bitcoin/commits/b7e57792736dfa2c3cc394371ab72217a2aa2d69",
      "created_at": "2021-04-09T23:24:33Z"
    },
    {
      "event": "referenced",
      "id": 4576744374,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1NzY3NDQzNzQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4576744374",
      "actor": {
        "login": "BitcoinMechanic",
        "id": 45926711,
        "node_id": "MDQ6VXNlcjQ1OTI2NzEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/45926711?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BitcoinMechanic",
        "html_url": "https://github.com/BitcoinMechanic",
        "followers_url": "https://api.github.com/users/BitcoinMechanic/followers",
        "following_url": "https://api.github.com/users/BitcoinMechanic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BitcoinMechanic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BitcoinMechanic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BitcoinMechanic/subscriptions",
        "organizations_url": "https://api.github.com/users/BitcoinMechanic/orgs",
        "repos_url": "https://api.github.com/users/BitcoinMechanic/repos",
        "events_url": "https://api.github.com/users/BitcoinMechanic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BitcoinMechanic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "49de1d8a8aae97bea32d99a202834d5b14328cba",
      "commit_url": "https://api.github.com/repos/BitcoinActivation/bitcoin/commits/49de1d8a8aae97bea32d99a202834d5b14328cba",
      "created_at": "2021-04-09T23:24:33Z"
    },
    {
      "event": "referenced",
      "id": 4576744376,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1NzY3NDQzNzY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4576744376",
      "actor": {
        "login": "BitcoinMechanic",
        "id": 45926711,
        "node_id": "MDQ6VXNlcjQ1OTI2NzEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/45926711?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BitcoinMechanic",
        "html_url": "https://github.com/BitcoinMechanic",
        "followers_url": "https://api.github.com/users/BitcoinMechanic/followers",
        "following_url": "https://api.github.com/users/BitcoinMechanic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BitcoinMechanic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BitcoinMechanic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BitcoinMechanic/subscriptions",
        "organizations_url": "https://api.github.com/users/BitcoinMechanic/orgs",
        "repos_url": "https://api.github.com/users/BitcoinMechanic/repos",
        "events_url": "https://api.github.com/users/BitcoinMechanic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BitcoinMechanic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6d5454caf879640bb3b35c474a639d44ca02f6d1",
      "commit_url": "https://api.github.com/repos/BitcoinActivation/bitcoin/commits/6d5454caf879640bb3b35c474a639d44ca02f6d1",
      "created_at": "2021-04-09T23:24:33Z"
    },
    {
      "event": "referenced",
      "id": 4576744378,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1NzY3NDQzNzg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4576744378",
      "actor": {
        "login": "BitcoinMechanic",
        "id": 45926711,
        "node_id": "MDQ6VXNlcjQ1OTI2NzEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/45926711?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BitcoinMechanic",
        "html_url": "https://github.com/BitcoinMechanic",
        "followers_url": "https://api.github.com/users/BitcoinMechanic/followers",
        "following_url": "https://api.github.com/users/BitcoinMechanic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BitcoinMechanic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BitcoinMechanic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BitcoinMechanic/subscriptions",
        "organizations_url": "https://api.github.com/users/BitcoinMechanic/orgs",
        "repos_url": "https://api.github.com/users/BitcoinMechanic/repos",
        "events_url": "https://api.github.com/users/BitcoinMechanic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BitcoinMechanic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "718f289e65a52fdbe05b1a40443172b797c579c0",
      "commit_url": "https://api.github.com/repos/BitcoinActivation/bitcoin/commits/718f289e65a52fdbe05b1a40443172b797c579c0",
      "created_at": "2021-04-09T23:24:33Z"
    },
    {
      "event": "referenced",
      "id": 4576744380,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1NzY3NDQzODA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4576744380",
      "actor": {
        "login": "BitcoinMechanic",
        "id": 45926711,
        "node_id": "MDQ6VXNlcjQ1OTI2NzEx",
        "avatar_url": "https://avatars.githubusercontent.com/u/45926711?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BitcoinMechanic",
        "html_url": "https://github.com/BitcoinMechanic",
        "followers_url": "https://api.github.com/users/BitcoinMechanic/followers",
        "following_url": "https://api.github.com/users/BitcoinMechanic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BitcoinMechanic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BitcoinMechanic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BitcoinMechanic/subscriptions",
        "organizations_url": "https://api.github.com/users/BitcoinMechanic/orgs",
        "repos_url": "https://api.github.com/users/BitcoinMechanic/repos",
        "events_url": "https://api.github.com/users/BitcoinMechanic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BitcoinMechanic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "bdafb8d435a335e28cb27bc6d2d1dff2be441a94",
      "commit_url": "https://api.github.com/repos/BitcoinActivation/bitcoin/commits/bdafb8d435a335e28cb27bc6d2d1dff2be441a94",
      "created_at": "2021-04-09T23:24:33Z"
    },
    {
      "event": "locked",
      "id": 7216517162,
      "node_id": "LOE_lADOABII584xLMaBzwAAAAGuI1Aq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7216517162",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-18T18:20:33Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589800403",
      "pull_request_review_id": 606773707,
      "id": 589800403,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTgwMDQwMw==",
      "diff_hunk": "@@ -226,7 +226,6 @@ struct MempoolAcceptResult {\n MempoolAcceptResult AcceptToMemoryPool(CChainState& active_chainstate, CTxMemPool& pool, const CTransactionRef& tx,\n                                        bool bypass_limits, bool test_accept=false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n-",
      "path": "src/validation.h",
      "position": null,
      "original_position": 4,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "b16a75572684865e4a54b7cb56f05c028ac98026",
      "in_reply_to_id": null,
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: unneeded",
      "created_at": "2021-03-08T22:39:29Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589800403",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589800403"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 226,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589804330",
      "pull_request_review_id": 606773707,
      "id": 589804330,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTgwNDMzMA==",
      "diff_hunk": "@@ -23,7 +23,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "path": "src/chainparamsbase.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "b16a75572684865e4a54b7cb56f05c028ac98026",
      "in_reply_to_id": null,
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it'd be worth adding the ability to set the `min_activation_height` for testing as well",
      "created_at": "2021-03-08T22:44:02Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589804330",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589804330"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589808255",
      "pull_request_review_id": 606782162,
      "id": 589808255,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTgwODI1NQ==",
      "diff_hunk": "@@ -23,7 +23,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "path": "src/chainparamsbase.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "b16a75572684865e4a54b7cb56f05c028ac98026",
      "in_reply_to_id": 589804330,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "As it stands, `-vbparams` is only used to disable taproot activation to check soft-fork status, so this would only be useful if it came with an actual test.",
      "created_at": "2021-03-08T22:52:02Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589808255",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589808255"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589810331",
      "pull_request_review_id": 606784846,
      "id": 589810331,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTgxMDMzMQ==",
      "diff_hunk": "@@ -226,7 +226,6 @@ struct MempoolAcceptResult {\n MempoolAcceptResult AcceptToMemoryPool(CChainState& active_chainstate, CTxMemPool& pool, const CTransactionRef& tx,\n                                        bool bypass_limits, bool test_accept=false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n-",
      "path": "src/validation.h",
      "position": null,
      "original_position": 4,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "b16a75572684865e4a54b7cb56f05c028ac98026",
      "in_reply_to_id": 589800403,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Removed",
      "created_at": "2021-03-08T22:56:35Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589810331",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589810331"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 226,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589881249",
      "pull_request_review_id": 606866335,
      "id": 589881249,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg4MTI0OQ==",
      "diff_hunk": "@@ -20,24 +20,37 @@ enum DeploymentPos\n };\n \n /**\n- * Struct for each individual consensus rule change using BIP9.\n+ * Struct for each individual consensus rule change using version bits (BIP 8).\n  */\n-struct BIP9Deployment {\n+struct VBitsDeployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int64_t startheight;",
      "path": "src/consensus/params.h",
      "position": null,
      "original_position": 16,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "3d6fa014f3f122bbcfcdbe39cc2bd043bf2fe915",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should this be set to NEVER_ACTIVE?",
      "created_at": "2021-03-09T01:54:18Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589881249",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589881249"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886135",
      "pull_request_review_id": 606866335,
      "id": 589886135,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg4NjEzNQ==",
      "diff_hunk": "@@ -30,8 +36,8 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n             cache[pindexPrev] = ThresholdState::DEFINED;\n             break;\n         }\n-        if (pindexPrev->GetMedianTimePast() < nTimeStart) {\n-            // Optimization: don't recompute down further, as we know every earlier block will be before the start time\n+        if (pindexPrev->nHeight + 1 < height_start) {\n+            // Optimization: don't recompute down further, as we know every earlier block will be before the start height",
      "path": "src/versionbits.cpp",
      "position": 30,
      "original_position": 35,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c25fe127af4e91da541e6d8c5c47ea733994d529",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "there's not really a great way to rewrite this, but can we comment why it is +1",
      "created_at": "2021-03-09T02:07:55Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589886135",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886135"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 42,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886501",
      "pull_request_review_id": 606866335,
      "id": 589886501,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg4NjUwMQ==",
      "diff_hunk": "@@ -30,8 +36,8 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n             cache[pindexPrev] = ThresholdState::DEFINED;\n             break;\n         }\n-        if (pindexPrev->GetMedianTimePast() < nTimeStart) {\n-            // Optimization: don't recompute down further, as we know every earlier block will be before the start time\n+        if (pindexPrev->nHeight + 1 < height_start) {\n+            // Optimization: don't recompute down further, as we know every earlier block will be before the start height",
      "path": "src/versionbits.cpp",
      "position": 30,
      "original_position": 35,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c25fe127af4e91da541e6d8c5c47ea733994d529",
      "in_reply_to_id": 589886135,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "how it is doc'd below is great",
      "created_at": "2021-03-09T02:08:53Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589886501",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886501"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 42,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886850",
      "pull_request_review_id": 606866335,
      "id": 589886850,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg4Njg1MA==",
      "diff_hunk": "@@ -94,50 +103,54 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n-BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindex, const Consensus::Params& params) const\n+VBitsStats ThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev) const\n {\n-    BIP9Stats stats = {};\n+    VBitsStats stats = {};\n \n-    stats.period = Period(params);\n-    stats.threshold = Threshold(params);\n+    stats.period = m_period;\n+    stats.threshold = m_dep.m_threshold;\n \n-    if (pindex == nullptr)\n+    if (pindexPrev == nullptr || (pindexPrev->nHeight + 1) < stats.period) {",
      "path": "src/versionbits.cpp",
      "position": null,
      "original_position": 105,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c25fe127af4e91da541e6d8c5c47ea733994d529",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ibid -- a temporary makes this clearer",
      "created_at": "2021-03-09T02:09:51Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589886850",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886850"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 113,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891206",
      "pull_request_review_id": 606877525,
      "id": 589891206,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg5MTIwNg==",
      "diff_hunk": "@@ -20,24 +20,37 @@ enum DeploymentPos\n };\n \n /**\n- * Struct for each individual consensus rule change using BIP9.\n+ * Struct for each individual consensus rule change using version bits (BIP 8).\n  */\n-struct BIP9Deployment {\n+struct VBitsDeployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int64_t startheight;",
      "path": "src/consensus/params.h",
      "position": null,
      "original_position": 16,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "3d6fa014f3f122bbcfcdbe39cc2bd043bf2fe915",
      "in_reply_to_id": 589881249,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The potential for uninitialized members here is concerning to me, so I am working on a followup to deal with those. That may be rolled into this PR.",
      "created_at": "2021-03-09T02:21:54Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589891206",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891206"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891266",
      "pull_request_review_id": 606877587,
      "id": 589891266,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg5MTI2Ng==",
      "diff_hunk": "@@ -30,8 +36,8 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n             cache[pindexPrev] = ThresholdState::DEFINED;\n             break;\n         }\n-        if (pindexPrev->GetMedianTimePast() < nTimeStart) {\n-            // Optimization: don't recompute down further, as we know every earlier block will be before the start time\n+        if (pindexPrev->nHeight + 1 < height_start) {\n+            // Optimization: don't recompute down further, as we know every earlier block will be before the start height",
      "path": "src/versionbits.cpp",
      "position": 30,
      "original_position": 35,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c25fe127af4e91da541e6d8c5c47ea733994d529",
      "in_reply_to_id": 589886135,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-09T02:22:00Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589891266",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891266"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 42,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891296",
      "pull_request_review_id": 606877624,
      "id": 589891296,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg5MTI5Ng==",
      "diff_hunk": "@@ -94,50 +103,54 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n-BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindex, const Consensus::Params& params) const\n+VBitsStats ThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev) const\n {\n-    BIP9Stats stats = {};\n+    VBitsStats stats = {};\n \n-    stats.period = Period(params);\n-    stats.threshold = Threshold(params);\n+    stats.period = m_period;\n+    stats.threshold = m_dep.m_threshold;\n \n-    if (pindex == nullptr)\n+    if (pindexPrev == nullptr || (pindexPrev->nHeight + 1) < stats.period) {",
      "path": "src/versionbits.cpp",
      "position": null,
      "original_position": 105,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c25fe127af4e91da541e6d8c5c47ea733994d529",
      "in_reply_to_id": 589886850,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-09T02:22:04Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589891296",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891296"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 113,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590330775",
      "pull_request_review_id": 607356173,
      "id": 590330775,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDMzMDc3NQ==",
      "diff_hunk": "@@ -1,6 +1,7 @@\n BIPs that are implemented by Bitcoin Core (up-to-date up to **v0.21.0**):\n \n-* [`BIP 9`](https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki): The changes allowing multiple soft-forks to be deployed in parallel have been implemented since **v0.12.1**  ([PR #7575](https://github.com/bitcoin/bitcoin/pull/7575))\n+* [`BIP 8`](https://github.com/bitcoin/bips/blob/master/bip-0008.mediawiki): The changes for parallel, rapid deployment based on block height miner activation have been implemented since **v0.21.1** ([PR #21392](https://github.com/bitcoin/bitcoin/pull/21392)). The  with UASF failover is not yet implemented.",
      "path": "doc/bips.md",
      "position": null,
      "original_position": 4,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "3395165dfe6b84e6d04ad134f0135c44e8c8ddc6",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "\"The with UASF\" -> \"The UASF fallback with forced signalling (LOT=true) has not been implemented. The current implementation is the equivalent of LOT=false\"",
      "created_at": "2021-03-09T12:37:42Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590330775",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590330775"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590339596",
      "pull_request_review_id": 607356173,
      "id": 590339596,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDMzOTU5Ng==",
      "diff_hunk": "@@ -1297,24 +1295,24 @@ RPCHelpMan getblockchaininfo()\n                         {\n                             {RPCResult::Type::OBJ, \"xxxx\", \"name of the softfork\",\n                             {\n-                                {RPCResult::Type::STR, \"type\", \"one of \\\"buried\\\", \\\"bip9\\\"\"},\n-                                {RPCResult::Type::OBJ, \"bip9\", \"status of bip9 softforks (only for \\\"bip9\\\" type)\",\n+                                {RPCResult::Type::STR, \"type\", \"one of \\\"buried\\\", \\\"bip8\\\"\"},\n+                                {RPCResult::Type::OBJ, \"bip8\", \"status of BIP 8 softforks (only for \\\"bip8\\\" type)\",",
      "path": "src/rpc/blockchain.cpp",
      "position": 43,
      "original_position": 71,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "3395165dfe6b84e6d04ad134f0135c44e8c8ddc6",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is a breaking RPC change, so needs a release note.",
      "created_at": "2021-03-09T12:49:15Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590339596",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590339596"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1300,
      "original_line": 1300,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590345168",
      "pull_request_review_id": 607356173,
      "id": 590345168,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDM0NTE2OA==",
      "diff_hunk": "@@ -23,7 +23,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "path": "src/chainparamsbase.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "b16a75572684865e4a54b7cb56f05c028ac98026",
      "in_reply_to_id": 589804330,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "7e47c280b7b5597e4a259f4d4b50d661fccd061a : I would be in favor of such a test, but I suggest introducing the `@min_activation_height` param in a later commit, rather than in this refactor. ",
      "created_at": "2021-03-09T12:56:59Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590345168",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590345168"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590347074",
      "pull_request_review_id": 607356173,
      "id": 590347074,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDM0NzA3NA==",
      "diff_hunk": "@@ -1229,7 +1229,7 @@ static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &nam\n     // Deployments (e.g. testdummy) with timeout value before Jan 1, 2009 are hidden.\n     // A timeout value of 0 guarantees a softfork will never be activated.\n     // This is used when merging logic to implement a proposed softfork without a specified deployment schedule.\n-    if (consensusParams.vDeployments[id].nTimeout <= 1230768000) return;\n+    if (consensusParams.vDeployments[id].timeoutheight == Consensus::VBitsDeployment::NEVER_ACTIVE) return;",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "7e47c280b7b5597e4a259f4d4b50d661fccd061a",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Comment needs update.",
      "created_at": "2021-03-09T12:59:29Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590347074",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590347074"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1230,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590349951",
      "pull_request_review_id": 607356173,
      "id": 590349951,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDM0OTk1MQ==",
      "diff_hunk": "@@ -1201,7 +1201,7 @@ def set_test_params(self):\n         self.num_nodes = 2\n         self.setup_clean_chain = True\n         # Node 0 has Taproot inactive, Node 1 active.\n-        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:1:1\"], [\"-par=1\"]]\n+        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:@1:@1\"], [\"-par=1\"]]",
      "path": "test/functional/feature_taproot.py",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "7e47c280b7b5597e4a259f4d4b50d661fccd061a",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "While you're at it, the comment about which node is active is the wrong way around.",
      "created_at": "2021-03-09T13:03:44Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590349951",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590349951"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590580067",
      "pull_request_review_id": 607682944,
      "id": 590580067,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDU4MDA2Nw==",
      "diff_hunk": "@@ -1201,7 +1201,7 @@ def set_test_params(self):\n         self.num_nodes = 2\n         self.setup_clean_chain = True\n         # Node 0 has Taproot inactive, Node 1 active.\n-        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:1:1\"], [\"-par=1\"]]\n+        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:@1:@1\"], [\"-par=1\"]]",
      "path": "test/functional/feature_taproot.py",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "7e47c280b7b5597e4a259f4d4b50d661fccd061a",
      "in_reply_to_id": 590349951,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No? Node 0 has taproot inactive and setting the vbparams in this way (startheight=1, timeoutheight=1) ensures that it cannot activate on regtest.",
      "created_at": "2021-03-09T17:37:03Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590580067",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590580067"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590587972",
      "pull_request_review_id": 607693014,
      "id": 590587972,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDU4Nzk3Mg==",
      "diff_hunk": "@@ -1,6 +1,7 @@\n BIPs that are implemented by Bitcoin Core (up-to-date up to **v0.21.0**):\n \n-* [`BIP 9`](https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki): The changes allowing multiple soft-forks to be deployed in parallel have been implemented since **v0.12.1**  ([PR #7575](https://github.com/bitcoin/bitcoin/pull/7575))\n+* [`BIP 8`](https://github.com/bitcoin/bips/blob/master/bip-0008.mediawiki): The changes for parallel, rapid deployment based on block height miner activation have been implemented since **v0.21.1** ([PR #21392](https://github.com/bitcoin/bitcoin/pull/21392)). The  with UASF failover is not yet implemented.",
      "path": "doc/bips.md",
      "position": null,
      "original_position": 4,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "3395165dfe6b84e6d04ad134f0135c44e8c8ddc6",
      "in_reply_to_id": 590330775,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-09T17:47:39Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590587972",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590587972"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590588073",
      "pull_request_review_id": 607693134,
      "id": 590588073,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDU4ODA3Mw==",
      "diff_hunk": "@@ -1297,24 +1295,24 @@ RPCHelpMan getblockchaininfo()\n                         {\n                             {RPCResult::Type::OBJ, \"xxxx\", \"name of the softfork\",\n                             {\n-                                {RPCResult::Type::STR, \"type\", \"one of \\\"buried\\\", \\\"bip9\\\"\"},\n-                                {RPCResult::Type::OBJ, \"bip9\", \"status of bip9 softforks (only for \\\"bip9\\\" type)\",\n+                                {RPCResult::Type::STR, \"type\", \"one of \\\"buried\\\", \\\"bip8\\\"\"},\n+                                {RPCResult::Type::OBJ, \"bip8\", \"status of BIP 8 softforks (only for \\\"bip8\\\" type)\",",
      "path": "src/rpc/blockchain.cpp",
      "position": 43,
      "original_position": 71,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "3395165dfe6b84e6d04ad134f0135c44e8c8ddc6",
      "in_reply_to_id": 590339596,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-09T17:47:46Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590588073",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590588073"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1300,
      "original_line": 1300,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590588126",
      "pull_request_review_id": 607693202,
      "id": 590588126,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDU4ODEyNg==",
      "diff_hunk": "@@ -1229,7 +1229,7 @@ static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &nam\n     // Deployments (e.g. testdummy) with timeout value before Jan 1, 2009 are hidden.\n     // A timeout value of 0 guarantees a softfork will never be activated.\n     // This is used when merging logic to implement a proposed softfork without a specified deployment schedule.\n-    if (consensusParams.vDeployments[id].nTimeout <= 1230768000) return;\n+    if (consensusParams.vDeployments[id].timeoutheight == Consensus::VBitsDeployment::NEVER_ACTIVE) return;",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "7e47c280b7b5597e4a259f4d4b50d661fccd061a",
      "in_reply_to_id": 590347074,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-09T17:47:51Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590588126",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590588126"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1230,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590674111",
      "pull_request_review_id": 607868995,
      "id": 590674111,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDY3NDExMQ==",
      "diff_hunk": "@@ -0,0 +1,7 @@\n+Low-level changes\n+=================\n+\n+RPC\n+---\n+\n+* BIP 9 has been replaced with a partial implementation of BIP 8. This change is reflected in `getblockchaininfo` where references to BIP 9 have been replaced with references to BIP 8.",
      "path": "doc/release-notes-21392.md",
      "position": 7,
      "original_position": 7,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "968bc1e07b4a8a359876f5b8035fb4c369d04bad",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't think this affects anything other than the docs?",
      "created_at": "2021-03-09T19:54:07Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590674111",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590674111"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590687298",
      "pull_request_review_id": 607911197,
      "id": 590687298,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDY4NzI5OA==",
      "diff_hunk": "@@ -1201,7 +1201,7 @@ def set_test_params(self):\n         self.num_nodes = 2\n         self.setup_clean_chain = True\n         # Node 0 has Taproot inactive, Node 1 active.\n-        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:1:1\"], [\"-par=1\"]]\n+        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:@1:@1\"], [\"-par=1\"]]",
      "path": "test/functional/feature_taproot.py",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "7e47c280b7b5597e4a259f4d4b50d661fccd061a",
      "in_reply_to_id": 590349951,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "~No~ yes, taproot is always active on regtest: https://github.com/bitcoin/bitcoin/blob/968bc1e07b4a8a359876f5b8035fb4c369d04bad/src/chainparams.cpp#L418\r\n\r\nThis had me massively confused ~too~, but you can tell from `testmempoolaccept` if you manually craft a (broken) taproot transaction: https://github.com/BitMEXResearch/forkmonitor/blob/master/spec/models/chaintip_spec.rb#L377 (`mempool_broken_tap` is created by node A, which has no extra_args: https://github.com/BitMEXResearch/forkmonitor/blob/master/spec/models/chaintip_spec.rb#L22)",
      "created_at": "2021-03-09T20:14:55Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590687298",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590687298"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590689363",
      "pull_request_review_id": 607917745,
      "id": 590689363,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDY4OTM2Mw==",
      "diff_hunk": "@@ -1201,7 +1201,7 @@ def set_test_params(self):\n         self.num_nodes = 2\n         self.setup_clean_chain = True\n         # Node 0 has Taproot inactive, Node 1 active.\n-        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:1:1\"], [\"-par=1\"]]\n+        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:@1:@1\"], [\"-par=1\"]]",
      "path": "test/functional/feature_taproot.py",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "7e47c280b7b5597e4a259f4d4b50d661fccd061a",
      "in_reply_to_id": 590349951,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah crap, was reading the brackets wrong. Nvm. This is why I like to indent stuff :-)",
      "created_at": "2021-03-09T20:18:03Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r590689363",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590689363"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591524815",
      "pull_request_review_id": 608728480,
      "id": 591524815,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MTUyNDgxNQ==",
      "diff_hunk": "@@ -178,65 +178,40 @@ BOOST_FIXTURE_TEST_SUITE(versionbits_tests, TestingSetup)\n BOOST_AUTO_TEST_CASE(versionbits_test)\n {\n     for (int i = 0; i < 64; i++) {\n-        // DEFINED -> FAILED",
      "path": "src/test/versionbits_tests.cpp",
      "position": 138,
      "original_position": 41,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "d4c40a52cdc0e07647b6543427e621585028fcdd",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why are you dropping all tests for `DEFINED -> FAILED` and `DEFINED -> STARTED -> FAILED`?",
      "created_at": "2021-03-10T13:47:31Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r591524815",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591524815"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 160,
      "original_line": 160,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591529768",
      "pull_request_review_id": 608728480,
      "id": 591529768,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MTUyOTc2OA==",
      "diff_hunk": "@@ -284,100 +259,67 @@ BOOST_AUTO_TEST_CASE(versionbits_params)\n BOOST_AUTO_TEST_CASE(versionbits_computeblockversion)\n {\n     // Check that ComputeBlockVersion will set the appropriate bit correctly\n-    // on mainnet.\n-    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::MAIN);\n+    const auto period = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST)->GetConsensus().nMinerConfirmationWindow;\n+    gArgs.ForceSetArg(\"-vbparams\", strprintf(\"testdummy:@%s:@%s\", period, period * 2));\n+    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST);",
      "path": "src/test/versionbits_tests.cpp",
      "position": 283,
      "original_position": 147,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "d4c40a52cdc0e07647b6543427e621585028fcdd",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why the switch from mainnet to regtest here?",
      "created_at": "2021-03-10T13:52:11Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r591529768",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591529768"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591731487",
      "pull_request_review_id": 608988516,
      "id": 591731487,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MTczMTQ4Nw==",
      "diff_hunk": "@@ -178,65 +178,40 @@ BOOST_FIXTURE_TEST_SUITE(versionbits_tests, TestingSetup)\n BOOST_AUTO_TEST_CASE(versionbits_test)\n {\n     for (int i = 0; i < 64; i++) {\n-        // DEFINED -> FAILED",
      "path": "src/test/versionbits_tests.cpp",
      "position": 138,
      "original_position": 41,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "d4c40a52cdc0e07647b6543427e621585028fcdd",
      "in_reply_to_id": 591524815,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This change is from #19573. I believe it is dropped because BIP 8 specifies that the timeoutheight falls on a retarget block greater than the startheight, so this scenario is supposed to be impossible to occur. With BIP 9, it was possible because there was no guarantee of the number of blocks between the start time and timeout time, but with height, the number of blocks is guaranteed.\r\n\r\n`DEFINE -> STARTED -> FAILED` is still there though. I suppose you mean `DEFINED -> STARTED -> Failed while threshold reached`? In that case, it's because the timeout height is supposed to fall on a retarget block so if the threshold is reached, it will always move to the locked in state.",
      "created_at": "2021-03-10T17:38:16Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r591731487",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591731487"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 160,
      "original_line": 160,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591734947",
      "pull_request_review_id": 608993233,
      "id": 591734947,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MTczNDk0Nw==",
      "diff_hunk": "@@ -284,100 +259,67 @@ BOOST_AUTO_TEST_CASE(versionbits_params)\n BOOST_AUTO_TEST_CASE(versionbits_computeblockversion)\n {\n     // Check that ComputeBlockVersion will set the appropriate bit correctly\n-    // on mainnet.\n-    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::MAIN);\n+    const auto period = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST)->GetConsensus().nMinerConfirmationWindow;\n+    gArgs.ForceSetArg(\"-vbparams\", strprintf(\"testdummy:@%s:@%s\", period, period * 2));\n+    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST);",
      "path": "src/test/versionbits_tests.cpp",
      "position": 283,
      "original_position": 147,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "d4c40a52cdc0e07647b6543427e621585028fcdd",
      "in_reply_to_id": 591529768,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I believe this change was done so that custom activation parameters could be used. Specifically, since mainnet start and timeout heights are in the hundreds of thousands of blocks, the test would just be wasting time building up a chain to reach that those heights. With regtest, it can use a way lower height so the test runs in a timely fashion.",
      "created_at": "2021-03-10T17:43:09Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r591734947",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591734947"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592231394",
      "pull_request_review_id": 609595315,
      "id": 592231394,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjIzMTM5NA==",
      "diff_hunk": "@@ -284,100 +259,67 @@ BOOST_AUTO_TEST_CASE(versionbits_params)\n BOOST_AUTO_TEST_CASE(versionbits_computeblockversion)\n {\n     // Check that ComputeBlockVersion will set the appropriate bit correctly\n-    // on mainnet.\n-    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::MAIN);\n+    const auto period = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST)->GetConsensus().nMinerConfirmationWindow;\n+    gArgs.ForceSetArg(\"-vbparams\", strprintf(\"testdummy:@%s:@%s\", period, period * 2));\n+    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST);",
      "path": "src/test/versionbits_tests.cpp",
      "position": 283,
      "original_position": 147,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "d4c40a52cdc0e07647b6543427e621585028fcdd",
      "in_reply_to_id": 591529768,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I guess the better question is: why did it use mainnet in the past?",
      "created_at": "2021-03-11T10:13:58Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r592231394",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592231394"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592588076",
      "pull_request_review_id": 610075033,
      "id": 592588076,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MjU4ODA3Ng==",
      "diff_hunk": "@@ -284,100 +259,67 @@ BOOST_AUTO_TEST_CASE(versionbits_params)\n BOOST_AUTO_TEST_CASE(versionbits_computeblockversion)\n {\n     // Check that ComputeBlockVersion will set the appropriate bit correctly\n-    // on mainnet.\n-    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::MAIN);\n+    const auto period = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST)->GetConsensus().nMinerConfirmationWindow;\n+    gArgs.ForceSetArg(\"-vbparams\", strprintf(\"testdummy:@%s:@%s\", period, period * 2));\n+    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST);",
      "path": "src/test/versionbits_tests.cpp",
      "position": 283,
      "original_position": 147,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "d4c40a52cdc0e07647b6543427e621585028fcdd",
      "in_reply_to_id": 591529768,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I guess it was convenient and doesn't really matter when the time can be faked?",
      "created_at": "2021-03-11T18:10:05Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r592588076",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592588076"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592872804",
      "pull_request_review_id": 610409091,
      "id": 592872804,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mjg3MjgwNA==",
      "diff_hunk": "@@ -284,100 +259,67 @@ BOOST_AUTO_TEST_CASE(versionbits_params)\n BOOST_AUTO_TEST_CASE(versionbits_computeblockversion)\n {\n     // Check that ComputeBlockVersion will set the appropriate bit correctly\n-    // on mainnet.\n-    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::MAIN);\n+    const auto period = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST)->GetConsensus().nMinerConfirmationWindow;\n+    gArgs.ForceSetArg(\"-vbparams\", strprintf(\"testdummy:@%s:@%s\", period, period * 2));\n+    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST);",
      "path": "src/test/versionbits_tests.cpp",
      "position": 283,
      "original_position": 147,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "d4c40a52cdc0e07647b6543427e621585028fcdd",
      "in_reply_to_id": 591529768,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I figured the theory was \"if you're going to test anything, test what's going to happen on mainnet\". Since there's no proof of work in the versionbits unit test, it might be reasonable to test with real heights -- it's just building a skiplist with half a million entries to get to the start height, and going from there?",
      "created_at": "2021-03-12T02:46:19Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r592872804",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/592872804"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593823167",
      "pull_request_review_id": 607868995,
      "id": 593823167,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzgyMzE2Nw==",
      "diff_hunk": "@@ -189,22 +193,26 @@ class CTestNetParams : public CChainParams {\n         consensus.BIP66Height = 330776; // 000000002104c8c45e99a8853285a3b592602a3ccde2b832481da85e9e4ba182\n         consensus.CSVHeight = 770112; // 00000000025e930139bac5c6c31a403776da130831ab85be56578f3fa75369bb\n         consensus.SegwitHeight = 834624; // 00000000002b980fcd729daaa248fd9316a5200e9b367f4ff2c42453e84201ca\n-        consensus.MinBIP9WarningHeight = 836640; // segwit activation height + miner confirmation window\n+        consensus.MinVBitsWarningHeight = 836640; // segwit activation height + miner confirmation window",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 38,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "7ff01fb91960b029f67fde68de6a9ea0178c8ab3",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "We had discussed delaying the member/variable renames until after the actual logic changes for better backport/merge/review, and I thought that was a good idea. Are you planning to take that out of the PR? Been waiting to review pending on that...",
      "created_at": "2021-03-14T01:07:16Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593823167",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593823167"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 196,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593824356",
      "pull_request_review_id": 611650708,
      "id": 593824356,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzgyNDM1Ng==",
      "diff_hunk": "@@ -0,0 +1,7 @@\n+Low-level changes\n+=================\n+\n+RPC\n+---\n+\n+* BIP 9 has been replaced with a partial implementation of BIP 8. This change is reflected in `getblockchaininfo` where references to BIP 9 have been replaced with references to BIP 8.",
      "path": "doc/release-notes-21392.md",
      "position": 7,
      "original_position": 7,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "968bc1e07b4a8a359876f5b8035fb4c369d04bad",
      "in_reply_to_id": 590674111,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`getblockchaininfo` has a `bip9` field that is changed to `bip8`. This only effects signet and regtest though since those are the only ones that have taproot show up in `getblockchaininfo`.",
      "created_at": "2021-03-14T01:22:20Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593824356",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593824356"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593824410",
      "pull_request_review_id": 611650741,
      "id": 593824410,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzgyNDQxMA==",
      "diff_hunk": "@@ -189,22 +193,26 @@ class CTestNetParams : public CChainParams {\n         consensus.BIP66Height = 330776; // 000000002104c8c45e99a8853285a3b592602a3ccde2b832481da85e9e4ba182\n         consensus.CSVHeight = 770112; // 00000000025e930139bac5c6c31a403776da130831ab85be56578f3fa75369bb\n         consensus.SegwitHeight = 834624; // 00000000002b980fcd729daaa248fd9316a5200e9b367f4ff2c42453e84201ca\n-        consensus.MinBIP9WarningHeight = 836640; // segwit activation height + miner confirmation window\n+        consensus.MinVBitsWarningHeight = 836640; // segwit activation height + miner confirmation window",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 38,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "7ff01fb91960b029f67fde68de6a9ea0178c8ab3",
      "in_reply_to_id": 593823167,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh yeah, forgot to do that. I've removed the rename commit that I added in this PR, but #21380 also has a rename commit and it's up to @ajtowns to remove that if desired.",
      "created_at": "2021-03-14T01:23:07Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593824410",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593824410"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 196,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593838402",
      "pull_request_review_id": 611657500,
      "id": 593838402,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzgzODQwMg==",
      "diff_hunk": "@@ -492,22 +509,25 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n     for (const std::string& strDeployment : args.GetArgs(\"-vbparams\")) {\n         std::vector<std::string> vDeploymentParams;\n         boost::split(vDeploymentParams, strDeployment, boost::is_any_of(\":\"));\n-        if (vDeploymentParams.size() != 3) {\n-            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:start:end\");\n+        if (vDeploymentParams.size() < 3 || vDeploymentParams.size() > 4) {\n+            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:@start_height:@timeout_height[:@min_activation_height]\");\n         }\n-        int64_t nStartTime, nTimeout;\n-        if (!ParseInt64(vDeploymentParams[1], &nStartTime)) {\n-            throw std::runtime_error(strprintf(\"Invalid nStartTime (%s)\", vDeploymentParams[1]));\n+        int64_t start_height = 0, timeout_height = 0, min_activation_height = 0;\n+        if (vDeploymentParams[1].empty() || vDeploymentParams[1].front() != '@' || !ParseInt64(vDeploymentParams[1].substr(1), &start_height)) {\n+            throw std::runtime_error(strprintf(\"Invalid start_height (%s)\", vDeploymentParams[1]));\n         }\n-        if (!ParseInt64(vDeploymentParams[2], &nTimeout)) {\n-            throw std::runtime_error(strprintf(\"Invalid nTimeout (%s)\", vDeploymentParams[2]));\n+        if (vDeploymentParams[2].empty() || vDeploymentParams[2].front() != '@' || !ParseInt64(vDeploymentParams[2].substr(1), &timeout_height)) {\n+            throw std::runtime_error(strprintf(\"Invalid timeout_height (%s)\", vDeploymentParams[2]));\n+        }\n+        if (vDeploymentParams.size() == 4 && (vDeploymentParams[3].front() != '@' || !ParseInt64(vDeploymentParams[3].substr(1), &min_activation_height))) {\n+            throw std::runtime_error(strprintf(\"Invalid min_activation_height (%s)\", vDeploymentParams[3]));\n         }\n         bool found = false;\n         for (int j=0; j < (int)Consensus::MAX_VERSION_BITS_DEPLOYMENTS; ++j) {\n             if (vDeploymentParams[0] == VersionBitsDeploymentInfo[j].name) {\n-                UpdateVersionBitsParameters(Consensus::DeploymentPos(j), nStartTime, nTimeout);\n+                UpdateVersionBitsParameters(Consensus::DeploymentPos(j), start_height, timeout_height, min_activation_height);\n                 found = true;\n-                LogPrintf(\"Setting version bits activation parameters for %s to start=%ld, timeout=%ld\\n\", vDeploymentParams[0], nStartTime, nTimeout);\n+                LogPrintf(\"Setting version bits activation parameters for %s to start_height=%ld, timeout_height=%ld\\n\", vDeploymentParams[0], start_height, timeout_height);",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 150,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Missing the new `min_activation_height`",
      "created_at": "2021-03-14T04:08:12Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593838402",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593838402"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 530,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593838439",
      "pull_request_review_id": 611657500,
      "id": 593838439,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzgzODQzOQ==",
      "diff_hunk": "@@ -492,22 +509,25 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n     for (const std::string& strDeployment : args.GetArgs(\"-vbparams\")) {\n         std::vector<std::string> vDeploymentParams;\n         boost::split(vDeploymentParams, strDeployment, boost::is_any_of(\":\"));\n-        if (vDeploymentParams.size() != 3) {\n-            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:start:end\");\n+        if (vDeploymentParams.size() < 3 || vDeploymentParams.size() > 4) {\n+            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:@start_height:@timeout_height[:@min_activation_height]\");",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 126,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm not sure it's a good idea to use underscores here when everything else uses `startheight`",
      "created_at": "2021-03-14T04:08:51Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593838439",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593838439"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 513,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593838512",
      "pull_request_review_id": 611657500,
      "id": 593838512,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzgzODUxMg==",
      "diff_hunk": "@@ -22,22 +22,31 @@ enum DeploymentPos\n /**\n  * Struct for each individual consensus rule change using BIP9.\n  */\n-struct BIP9Deployment {\n+struct VBitsDeployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int startheight;\n+    /** Timeout/expiry block height for the deployment attempt. Must be a retarget block. */\n+    int timeoutheight;\n+    /** Threshold for activation */\n+    int threshold;\n+    /**\n+     * If lock in occurs, delay activation until at least this block height. Activations only occur on retargets.\n+     */\n+    int64_t m_min_activation_height;",
      "path": "src/consensus/params.h",
      "position": null,
      "original_position": 21,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`{0}` here can avoid needing to initialise it everywhere it isn't used (and reduce the risk of ever forgetting to do so)",
      "created_at": "2021-03-14T04:09:44Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593838512",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593838512"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 37,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593838593",
      "pull_request_review_id": 611657500,
      "id": 593838593,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzgzODU5Mw==",
      "diff_hunk": "@@ -5,15 +5,21 @@\n #include <versionbits.h>\n #include <consensus/params.h>\n \n-ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const\n+ThresholdState ThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, ThresholdConditionCache& cache) const\n {\n-    int nPeriod = Period(params);\n-    int nThreshold = Threshold(params);\n-    int64_t nTimeStart = BeginTime(params);\n-    int64_t nTimeTimeout = EndTime(params);\n+    int nPeriod = m_period;\n+    int nThreshold = m_dep.threshold;\n+    int64_t height_start = m_dep.startheight;\n+    int64_t height_timeout = m_dep.timeoutheight;\n+    int64_t min_activation_height = m_dep.m_min_activation_height;",
      "path": "src/versionbits.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`height_active_min` might be more consistent with the other variables.",
      "created_at": "2021-03-14T04:10:31Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593838593",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593838593"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 14,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593838630",
      "pull_request_review_id": 611657500,
      "id": 593838630,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzgzODYzMA==",
      "diff_hunk": "@@ -26,35 +26,65 @@ static const std::string StateName(ThresholdState state)\n     return \"\";\n }\n \n-static const Consensus::Params paramsDummy = Consensus::Params();\n-\n-class TestConditionChecker : public AbstractThresholdConditionChecker\n+class TestConditionChecker : public ThresholdConditionChecker\n {\n private:\n     mutable ThresholdConditionCache cache;\n \n+protected:\n+    Consensus::VBitsDeployment m_dep_storage;\n+\n public:\n-    int64_t BeginTime(const Consensus::Params& params) const override { return TestTime(10000); }\n-    int64_t EndTime(const Consensus::Params& params) const override { return TestTime(20000); }\n-    int Period(const Consensus::Params& params) const override { return 1000; }\n-    int Threshold(const Consensus::Params& params) const override { return 900; }\n-    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const override { return (pindex->nVersion & 0x100); }\n-\n-    ThresholdState GetStateFor(const CBlockIndex* pindexPrev) const { return AbstractThresholdConditionChecker::GetStateFor(pindexPrev, paramsDummy, cache); }\n-    int GetStateSinceHeightFor(const CBlockIndex* pindexPrev) const { return AbstractThresholdConditionChecker::GetStateSinceHeightFor(pindexPrev, paramsDummy, cache); }\n+    TestConditionChecker() : ThresholdConditionChecker(m_dep_storage, 10)\n+    {\n+        m_dep_storage.bit = 8;\n+        m_dep_storage.startheight= 100;",
      "path": "src/test/versionbits_tests.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: space",
      "created_at": "2021-03-14T04:11:06Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593838630",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593838630"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593839228",
      "pull_request_review_id": 611657938,
      "id": 593839228,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzgzOTIyOA==",
      "diff_hunk": "@@ -23,7 +23,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "path": "src/chainparamsbase.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`-vbparams` has been extended to accept min activation height, but the doc here isn't updated with it.",
      "created_at": "2021-03-14T04:18:42Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593839228",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593839228"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593839452",
      "pull_request_review_id": 611658059,
      "id": 593839452,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzgzOTQ1Mg==",
      "diff_hunk": "@@ -5,15 +5,21 @@\n #include <versionbits.h>\n #include <consensus/params.h>\n \n-ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const\n+ThresholdState ThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, ThresholdConditionCache& cache) const\n {\n-    int nPeriod = Period(params);\n-    int nThreshold = Threshold(params);\n-    int64_t nTimeStart = BeginTime(params);\n-    int64_t nTimeTimeout = EndTime(params);\n+    int nPeriod = m_period;\n+    int nThreshold = m_dep.threshold;\n+    int64_t height_start = m_dep.startheight;\n+    int64_t height_timeout = m_dep.timeoutheight;\n+    int64_t min_activation_height = m_dep.m_min_activation_height;\n+\n+    // Check if this deployment is never active.\n+    if (height_start == Consensus::VBitsDeployment::NEVER_ACTIVE && height_timeout == Consensus::VBitsDeployment::NEVER_ACTIVE ) {",
      "path": "src/versionbits.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: extra space",
      "created_at": "2021-03-14T04:21:33Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593839452",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593839452"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593887517",
      "pull_request_review_id": 611687104,
      "id": 593887517,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Mzg4NzUxNw==",
      "diff_hunk": "@@ -0,0 +1,126 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 3\n+        self.setup_clean_chain = True\n+        # Node 0 has TestDummy inactive\n+        # Node 1 has a regular activation window\n+        # Node 2 uses speedy trial.\n+        self.extra_args = [\n+            [f'-vbparams=testdummy:@1:@1'],\n+            [f'-vbparams=testdummy:@144:@{144 * 3}'],\n+            [f'-vbparams=testdummy:@144:@{144 * 2}:@{144 * 4}'],\n+        ]\n+\n+    def run_test(self):\n+        self.log.info(\"Test status at genesis...\")\n+        for i, node in enumerate(self.nodes):\n+            self.log.debug(f'Node #{ i }...')\n+            info = node.getblockchaininfo()\n+            assert_equal(info['blocks'], 0)\n+            assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], \"defined\")\n+\n+        # BIP 8 state transitions from \"defined\" to \"started\" or \"failed\" after\n+        # the last block of the retargeting period has been mined. This means\n+        # any new rules apply to transactions currently in the mempool, which\n+        # might be mined in the next block.\n+        #\n+        # The next retarteting period starts at block 144, so nothing should",
      "path": "test/functional/feature_bip8.py",
      "position": null,
      "original_position": 35,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": null,
      "user": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: s/retarteting/retargeting",
      "created_at": "2021-03-14T11:47:49Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593887517",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593887517"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593922180",
      "pull_request_review_id": 611711166,
      "id": 593922180,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzkyMjE4MA==",
      "diff_hunk": "@@ -0,0 +1,126 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 3\n+        self.setup_clean_chain = True\n+        # Node 0 has TestDummy inactive\n+        # Node 1 has a regular activation window\n+        # Node 2 uses speedy trial.\n+        self.extra_args = [\n+            [f'-vbparams=testdummy:@1:@1'],\n+            [f'-vbparams=testdummy:@144:@{144 * 3}'],\n+            [f'-vbparams=testdummy:@144:@{144 * 2}:@{144 * 4}'],",
      "path": "test/functional/feature_bip8.py",
      "position": null,
      "original_position": 19,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "(and below) f''should be avoided to make backport to 0.21 nicer\r\n\r\n",
      "created_at": "2021-03-14T16:01:28Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593922180",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593922180"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": 17,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937167",
      "pull_request_review_id": 611721448,
      "id": 593937167,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzkzNzE2Nw==",
      "diff_hunk": "@@ -492,22 +509,25 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n     for (const std::string& strDeployment : args.GetArgs(\"-vbparams\")) {\n         std::vector<std::string> vDeploymentParams;\n         boost::split(vDeploymentParams, strDeployment, boost::is_any_of(\":\"));\n-        if (vDeploymentParams.size() != 3) {\n-            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:start:end\");\n+        if (vDeploymentParams.size() < 3 || vDeploymentParams.size() > 4) {\n+            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:@start_height:@timeout_height[:@min_activation_height]\");\n         }\n-        int64_t nStartTime, nTimeout;\n-        if (!ParseInt64(vDeploymentParams[1], &nStartTime)) {\n-            throw std::runtime_error(strprintf(\"Invalid nStartTime (%s)\", vDeploymentParams[1]));\n+        int64_t start_height = 0, timeout_height = 0, min_activation_height = 0;\n+        if (vDeploymentParams[1].empty() || vDeploymentParams[1].front() != '@' || !ParseInt64(vDeploymentParams[1].substr(1), &start_height)) {\n+            throw std::runtime_error(strprintf(\"Invalid start_height (%s)\", vDeploymentParams[1]));\n         }\n-        if (!ParseInt64(vDeploymentParams[2], &nTimeout)) {\n-            throw std::runtime_error(strprintf(\"Invalid nTimeout (%s)\", vDeploymentParams[2]));\n+        if (vDeploymentParams[2].empty() || vDeploymentParams[2].front() != '@' || !ParseInt64(vDeploymentParams[2].substr(1), &timeout_height)) {\n+            throw std::runtime_error(strprintf(\"Invalid timeout_height (%s)\", vDeploymentParams[2]));\n+        }\n+        if (vDeploymentParams.size() == 4 && (vDeploymentParams[3].front() != '@' || !ParseInt64(vDeploymentParams[3].substr(1), &min_activation_height))) {\n+            throw std::runtime_error(strprintf(\"Invalid min_activation_height (%s)\", vDeploymentParams[3]));\n         }\n         bool found = false;\n         for (int j=0; j < (int)Consensus::MAX_VERSION_BITS_DEPLOYMENTS; ++j) {\n             if (vDeploymentParams[0] == VersionBitsDeploymentInfo[j].name) {\n-                UpdateVersionBitsParameters(Consensus::DeploymentPos(j), nStartTime, nTimeout);\n+                UpdateVersionBitsParameters(Consensus::DeploymentPos(j), start_height, timeout_height, min_activation_height);\n                 found = true;\n-                LogPrintf(\"Setting version bits activation parameters for %s to start=%ld, timeout=%ld\\n\", vDeploymentParams[0], nStartTime, nTimeout);\n+                LogPrintf(\"Setting version bits activation parameters for %s to start_height=%ld, timeout_height=%ld\\n\", vDeploymentParams[0], start_height, timeout_height);",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 150,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": 593838402,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-14T17:53:15Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593937167",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937167"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 530,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937173",
      "pull_request_review_id": 611721455,
      "id": 593937173,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzkzNzE3Mw==",
      "diff_hunk": "@@ -492,22 +509,25 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n     for (const std::string& strDeployment : args.GetArgs(\"-vbparams\")) {\n         std::vector<std::string> vDeploymentParams;\n         boost::split(vDeploymentParams, strDeployment, boost::is_any_of(\":\"));\n-        if (vDeploymentParams.size() != 3) {\n-            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:start:end\");\n+        if (vDeploymentParams.size() < 3 || vDeploymentParams.size() > 4) {\n+            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:@start_height:@timeout_height[:@min_activation_height]\");",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 126,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": 593838439,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-14T17:53:21Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593937173",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937173"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 513,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937178",
      "pull_request_review_id": 611721460,
      "id": 593937178,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzkzNzE3OA==",
      "diff_hunk": "@@ -22,22 +22,31 @@ enum DeploymentPos\n /**\n  * Struct for each individual consensus rule change using BIP9.\n  */\n-struct BIP9Deployment {\n+struct VBitsDeployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int startheight;\n+    /** Timeout/expiry block height for the deployment attempt. Must be a retarget block. */\n+    int timeoutheight;\n+    /** Threshold for activation */\n+    int threshold;\n+    /**\n+     * If lock in occurs, delay activation until at least this block height. Activations only occur on retargets.\n+     */\n+    int64_t m_min_activation_height;",
      "path": "src/consensus/params.h",
      "position": null,
      "original_position": 21,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": 593838512,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-14T17:53:25Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593937178",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937178"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 37,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937199",
      "pull_request_review_id": 611721469,
      "id": 593937199,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzkzNzE5OQ==",
      "diff_hunk": "@@ -5,15 +5,21 @@\n #include <versionbits.h>\n #include <consensus/params.h>\n \n-ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const\n+ThresholdState ThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, ThresholdConditionCache& cache) const\n {\n-    int nPeriod = Period(params);\n-    int nThreshold = Threshold(params);\n-    int64_t nTimeStart = BeginTime(params);\n-    int64_t nTimeTimeout = EndTime(params);\n+    int nPeriod = m_period;\n+    int nThreshold = m_dep.threshold;\n+    int64_t height_start = m_dep.startheight;\n+    int64_t height_timeout = m_dep.timeoutheight;\n+    int64_t min_activation_height = m_dep.m_min_activation_height;",
      "path": "src/versionbits.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": 593838593,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-14T17:53:28Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593937199",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937199"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 14,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937219",
      "pull_request_review_id": 611721481,
      "id": 593937219,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzkzNzIxOQ==",
      "diff_hunk": "@@ -26,35 +26,65 @@ static const std::string StateName(ThresholdState state)\n     return \"\";\n }\n \n-static const Consensus::Params paramsDummy = Consensus::Params();\n-\n-class TestConditionChecker : public AbstractThresholdConditionChecker\n+class TestConditionChecker : public ThresholdConditionChecker\n {\n private:\n     mutable ThresholdConditionCache cache;\n \n+protected:\n+    Consensus::VBitsDeployment m_dep_storage;\n+\n public:\n-    int64_t BeginTime(const Consensus::Params& params) const override { return TestTime(10000); }\n-    int64_t EndTime(const Consensus::Params& params) const override { return TestTime(20000); }\n-    int Period(const Consensus::Params& params) const override { return 1000; }\n-    int Threshold(const Consensus::Params& params) const override { return 900; }\n-    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const override { return (pindex->nVersion & 0x100); }\n-\n-    ThresholdState GetStateFor(const CBlockIndex* pindexPrev) const { return AbstractThresholdConditionChecker::GetStateFor(pindexPrev, paramsDummy, cache); }\n-    int GetStateSinceHeightFor(const CBlockIndex* pindexPrev) const { return AbstractThresholdConditionChecker::GetStateSinceHeightFor(pindexPrev, paramsDummy, cache); }\n+    TestConditionChecker() : ThresholdConditionChecker(m_dep_storage, 10)\n+    {\n+        m_dep_storage.bit = 8;\n+        m_dep_storage.startheight= 100;",
      "path": "src/test/versionbits_tests.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": 593838630,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-14T17:53:32Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593937219",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937219"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937221",
      "pull_request_review_id": 611721486,
      "id": 593937221,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzkzNzIyMQ==",
      "diff_hunk": "@@ -23,7 +23,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "path": "src/chainparamsbase.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": 593839228,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-14T17:53:36Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593937221",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937221"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937243",
      "pull_request_review_id": 611721496,
      "id": 593937243,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzkzNzI0Mw==",
      "diff_hunk": "@@ -5,15 +5,21 @@\n #include <versionbits.h>\n #include <consensus/params.h>\n \n-ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const\n+ThresholdState ThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, ThresholdConditionCache& cache) const\n {\n-    int nPeriod = Period(params);\n-    int nThreshold = Threshold(params);\n-    int64_t nTimeStart = BeginTime(params);\n-    int64_t nTimeTimeout = EndTime(params);\n+    int nPeriod = m_period;\n+    int nThreshold = m_dep.threshold;\n+    int64_t height_start = m_dep.startheight;\n+    int64_t height_timeout = m_dep.timeoutheight;\n+    int64_t min_activation_height = m_dep.m_min_activation_height;\n+\n+    // Check if this deployment is never active.\n+    if (height_start == Consensus::VBitsDeployment::NEVER_ACTIVE && height_timeout == Consensus::VBitsDeployment::NEVER_ACTIVE ) {",
      "path": "src/versionbits.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": 593839452,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed",
      "created_at": "2021-03-14T17:53:47Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593937243",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937243"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937250",
      "pull_request_review_id": 611721500,
      "id": 593937250,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzkzNzI1MA==",
      "diff_hunk": "@@ -0,0 +1,126 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 3\n+        self.setup_clean_chain = True\n+        # Node 0 has TestDummy inactive\n+        # Node 1 has a regular activation window\n+        # Node 2 uses speedy trial.\n+        self.extra_args = [\n+            [f'-vbparams=testdummy:@1:@1'],\n+            [f'-vbparams=testdummy:@144:@{144 * 3}'],\n+            [f'-vbparams=testdummy:@144:@{144 * 2}:@{144 * 4}'],\n+        ]\n+\n+    def run_test(self):\n+        self.log.info(\"Test status at genesis...\")\n+        for i, node in enumerate(self.nodes):\n+            self.log.debug(f'Node #{ i }...')\n+            info = node.getblockchaininfo()\n+            assert_equal(info['blocks'], 0)\n+            assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], \"defined\")\n+\n+        # BIP 8 state transitions from \"defined\" to \"started\" or \"failed\" after\n+        # the last block of the retargeting period has been mined. This means\n+        # any new rules apply to transactions currently in the mempool, which\n+        # might be mined in the next block.\n+        #\n+        # The next retarteting period starts at block 144, so nothing should",
      "path": "test/functional/feature_bip8.py",
      "position": null,
      "original_position": 35,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": 593887517,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed",
      "created_at": "2021-03-14T17:53:51Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593937250",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937250"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937260",
      "pull_request_review_id": 611721510,
      "id": 593937260,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzkzNzI2MA==",
      "diff_hunk": "@@ -0,0 +1,126 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 3\n+        self.setup_clean_chain = True\n+        # Node 0 has TestDummy inactive\n+        # Node 1 has a regular activation window\n+        # Node 2 uses speedy trial.\n+        self.extra_args = [\n+            [f'-vbparams=testdummy:@1:@1'],\n+            [f'-vbparams=testdummy:@144:@{144 * 3}'],\n+            [f'-vbparams=testdummy:@144:@{144 * 2}:@{144 * 4}'],",
      "path": "test/functional/feature_bip8.py",
      "position": null,
      "original_position": 19,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9f98cf7dfb11a852b1092ead5af4c400ae82e21d",
      "in_reply_to_id": 593922180,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-14T17:54:00Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r593937260",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593937260"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": 17,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597207019",
      "pull_request_review_id": 615828198,
      "id": 597207019,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIwNzAxOQ==",
      "diff_hunk": "@@ -284,100 +259,67 @@ BOOST_AUTO_TEST_CASE(versionbits_params)\n BOOST_AUTO_TEST_CASE(versionbits_computeblockversion)\n {\n     // Check that ComputeBlockVersion will set the appropriate bit correctly\n-    // on mainnet.\n-    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::MAIN);\n+    const auto period = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST)->GetConsensus().nMinerConfirmationWindow;\n+    gArgs.ForceSetArg(\"-vbparams\", strprintf(\"testdummy:@%s:@%s\", period, period * 2));\n+    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST);",
      "path": "src/test/versionbits_tests.cpp",
      "position": 283,
      "original_position": 147,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "d4c40a52cdc0e07647b6543427e621585028fcdd",
      "in_reply_to_id": 591529768,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh, no -- the reason was that it is possible to test \"TESTDUMMY\" activation on mainnet with MTP because you can fake the block time to be prior to the the genesis block's timestamp; but you can't do that with height because you obviously can't have a block height prior to NEVER_ACTIVE ie -2.",
      "created_at": "2021-03-18T20:07:41Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597207019",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597207019"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597210855",
      "pull_request_review_id": 615833221,
      "id": 597210855,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIxMDg1NQ==",
      "diff_hunk": "@@ -157,65 +157,40 @@ BOOST_FIXTURE_TEST_SUITE(versionbits_tests, TestingSetup)\n BOOST_AUTO_TEST_CASE(versionbits_test)\n {\n     for (int i = 0; i < 64; i++) {\n-        // DEFINED -> FAILED\n-        VersionBitsTester().TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1, TestTime(1), 0x100).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(11, TestTime(11), 0x100).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(989, TestTime(989), 0x100).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(999, TestTime(20000), 0x100).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1000, TestTime(20000), 0x100).TestFailed().TestStateSinceHeight(1000)\n-                           .Mine(1999, TestTime(30001), 0x100).TestFailed().TestStateSinceHeight(1000)\n-                           .Mine(2000, TestTime(30002), 0x100).TestFailed().TestStateSinceHeight(1000)\n-                           .Mine(2001, TestTime(30003), 0x100).TestFailed().TestStateSinceHeight(1000)\n-                           .Mine(2999, TestTime(30004), 0x100).TestFailed().TestStateSinceHeight(1000)\n-                           .Mine(3000, TestTime(30005), 0x100).TestFailed().TestStateSinceHeight(1000)\n-\n         // DEFINED -> STARTED -> FAILED\n-                           .Reset().TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1, TestTime(1), 0).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1000, TestTime(10000) - 1, 0x100).TestDefined().TestStateSinceHeight(0) // One second more and it would be defined\n-                           .Mine(2000, TestTime(10000), 0x100).TestStarted().TestStateSinceHeight(2000) // So that's what happens the next period\n-                           .Mine(2051, TestTime(10010), 0).TestStarted().TestStateSinceHeight(2000) // 51 old blocks\n-                           .Mine(2950, TestTime(10020), 0x100).TestStarted().TestStateSinceHeight(2000) // 899 new blocks\n-                           .Mine(3000, TestTime(20000), 0).TestFailed().TestStateSinceHeight(3000) // 50 old blocks (so 899 out of the past 1000)\n-                           .Mine(4000, TestTime(20010), 0x100).TestFailed().TestStateSinceHeight(3000)\n-\n-        // DEFINED -> STARTED -> FAILED while threshold reached\n-                           .Reset().TestDefined().TestStateSinceHeight(0)\n+        VersionBitsTester().TestDefined().TestStateSinceHeight(0)\n                            .Mine(1, TestTime(1), 0).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1000, TestTime(10000) - 1, 0x101).TestDefined().TestStateSinceHeight(0) // One second more and it would be defined\n-                           .Mine(2000, TestTime(10000), 0x101).TestStarted().TestStateSinceHeight(2000) // So that's what happens the next period\n-                           .Mine(2999, TestTime(30000), 0x100).TestStarted().TestStateSinceHeight(2000) // 999 new blocks\n-                           .Mine(3000, TestTime(30000), 0x100).TestFailed().TestStateSinceHeight(3000) // 1 new block (so 1000 out of the past 1000 are new)\n-                           .Mine(3999, TestTime(30001), 0).TestFailed().TestStateSinceHeight(3000)\n-                           .Mine(4000, TestTime(30002), 0).TestFailed().TestStateSinceHeight(3000)\n-                           .Mine(14333, TestTime(30003), 0).TestFailed().TestStateSinceHeight(3000)\n-                           .Mine(24000, TestTime(40000), 0).TestFailed().TestStateSinceHeight(3000)\n+                           .Mine(99, TestTime(10000) - 1, 0x100).TestDefined().TestStateSinceHeight(0) // One block more and it would be defined\n+                           .Mine(100, TestTime(10000), 0x100).TestStarted().TestStateSinceHeight(100) // So that's what happens the next period\n+                           .Mine(101, TestTime(10010), 0).TestStarted().TestStateSinceHeight(100) // 1 old block\n+                           .Mine(109, TestTime(10020), 0x100).TestStarted().TestStateSinceHeight(100) // 8 new blocks\n+                           .Mine(110, TestTime(10020), 0).TestStarted().TestStateSinceHeight(100) // 1 old block (so 8 out of the past 10 are new)\n+                           .Mine(151, TestTime(10020), 0).TestStarted().TestStateSinceHeight(100)\n+                           .Mine(200, TestTime(20000), 0).TestFailed().TestStateSinceHeight(200)\n+                           .Mine(300, TestTime(20010), 0x100).TestFailed().TestStateSinceHeight(200)\n \n         // DEFINED -> STARTED -> LOCKEDIN at the last minute -> ACTIVE\n                            .Reset().TestDefined()\n                            .Mine(1, TestTime(1), 0).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1000, TestTime(10000) - 1, 0x101).TestDefined().TestStateSinceHeight(0) // One second more and it would be defined\n-                           .Mine(2000, TestTime(10000), 0x101).TestStarted().TestStateSinceHeight(2000) // So that's what happens the next period\n-                           .Mine(2050, TestTime(10010), 0x200).TestStarted().TestStateSinceHeight(2000) // 50 old blocks\n-                           .Mine(2950, TestTime(10020), 0x100).TestStarted().TestStateSinceHeight(2000) // 900 new blocks\n-                           .Mine(2999, TestTime(19999), 0x200).TestStarted().TestStateSinceHeight(2000) // 49 old blocks\n-                           .Mine(3000, TestTime(29999), 0x200).TestLockedIn().TestStateSinceHeight(3000) // 1 old block (so 900 out of the past 1000)\n-                           .Mine(3999, TestTime(30001), 0).TestLockedIn().TestStateSinceHeight(3000)\n-                           .Mine(4000, TestTime(30002), 0).TestActive().TestStateSinceHeight(4000)\n-                           .Mine(14333, TestTime(30003), 0).TestActive().TestStateSinceHeight(4000)\n-                           .Mine(24000, TestTime(40000), 0).TestActive().TestStateSinceHeight(4000)\n+                           .Mine(99, TestTime(10000) - 1, 0x101).TestDefined().TestStateSinceHeight(0) // One second more and it would be started\n+                           .Mine(100, TestTime(10000), 0x101).TestStarted().TestStateSinceHeight(100) // So that's what happens the next period",
      "path": "src/test/versionbits_tests.cpp",
      "position": 196,
      "original_position": 95,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2961b34e085787691701fd85b58061c205d489f3",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Comment is wrong",
      "created_at": "2021-03-18T20:13:59Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597210855",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597210855"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 211,
      "original_line": 211,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597212362",
      "pull_request_review_id": 615835078,
      "id": 597212362,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIxMjM2Mg==",
      "diff_hunk": "@@ -157,65 +157,40 @@ BOOST_FIXTURE_TEST_SUITE(versionbits_tests, TestingSetup)\n BOOST_AUTO_TEST_CASE(versionbits_test)\n {\n     for (int i = 0; i < 64; i++) {\n-        // DEFINED -> FAILED\n-        VersionBitsTester().TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1, TestTime(1), 0x100).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(11, TestTime(11), 0x100).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(989, TestTime(989), 0x100).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(999, TestTime(20000), 0x100).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1000, TestTime(20000), 0x100).TestFailed().TestStateSinceHeight(1000)\n-                           .Mine(1999, TestTime(30001), 0x100).TestFailed().TestStateSinceHeight(1000)\n-                           .Mine(2000, TestTime(30002), 0x100).TestFailed().TestStateSinceHeight(1000)\n-                           .Mine(2001, TestTime(30003), 0x100).TestFailed().TestStateSinceHeight(1000)\n-                           .Mine(2999, TestTime(30004), 0x100).TestFailed().TestStateSinceHeight(1000)\n-                           .Mine(3000, TestTime(30005), 0x100).TestFailed().TestStateSinceHeight(1000)\n-\n         // DEFINED -> STARTED -> FAILED\n-                           .Reset().TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1, TestTime(1), 0).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1000, TestTime(10000) - 1, 0x100).TestDefined().TestStateSinceHeight(0) // One second more and it would be defined\n-                           .Mine(2000, TestTime(10000), 0x100).TestStarted().TestStateSinceHeight(2000) // So that's what happens the next period\n-                           .Mine(2051, TestTime(10010), 0).TestStarted().TestStateSinceHeight(2000) // 51 old blocks\n-                           .Mine(2950, TestTime(10020), 0x100).TestStarted().TestStateSinceHeight(2000) // 899 new blocks\n-                           .Mine(3000, TestTime(20000), 0).TestFailed().TestStateSinceHeight(3000) // 50 old blocks (so 899 out of the past 1000)\n-                           .Mine(4000, TestTime(20010), 0x100).TestFailed().TestStateSinceHeight(3000)\n-\n-        // DEFINED -> STARTED -> FAILED while threshold reached\n-                           .Reset().TestDefined().TestStateSinceHeight(0)\n+        VersionBitsTester().TestDefined().TestStateSinceHeight(0)\n                            .Mine(1, TestTime(1), 0).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1000, TestTime(10000) - 1, 0x101).TestDefined().TestStateSinceHeight(0) // One second more and it would be defined\n-                           .Mine(2000, TestTime(10000), 0x101).TestStarted().TestStateSinceHeight(2000) // So that's what happens the next period\n-                           .Mine(2999, TestTime(30000), 0x100).TestStarted().TestStateSinceHeight(2000) // 999 new blocks\n-                           .Mine(3000, TestTime(30000), 0x100).TestFailed().TestStateSinceHeight(3000) // 1 new block (so 1000 out of the past 1000 are new)\n-                           .Mine(3999, TestTime(30001), 0).TestFailed().TestStateSinceHeight(3000)\n-                           .Mine(4000, TestTime(30002), 0).TestFailed().TestStateSinceHeight(3000)\n-                           .Mine(14333, TestTime(30003), 0).TestFailed().TestStateSinceHeight(3000)\n-                           .Mine(24000, TestTime(40000), 0).TestFailed().TestStateSinceHeight(3000)\n+                           .Mine(99, TestTime(10000) - 1, 0x100).TestDefined().TestStateSinceHeight(0) // One block more and it would be defined\n+                           .Mine(100, TestTime(10000), 0x100).TestStarted().TestStateSinceHeight(100) // So that's what happens the next period\n+                           .Mine(101, TestTime(10010), 0).TestStarted().TestStateSinceHeight(100) // 1 old block\n+                           .Mine(109, TestTime(10020), 0x100).TestStarted().TestStateSinceHeight(100) // 8 new blocks\n+                           .Mine(110, TestTime(10020), 0).TestStarted().TestStateSinceHeight(100) // 1 old block (so 8 out of the past 10 are new)\n+                           .Mine(151, TestTime(10020), 0).TestStarted().TestStateSinceHeight(100)\n+                           .Mine(200, TestTime(20000), 0).TestFailed().TestStateSinceHeight(200)\n+                           .Mine(300, TestTime(20010), 0x100).TestFailed().TestStateSinceHeight(200)\n \n         // DEFINED -> STARTED -> LOCKEDIN at the last minute -> ACTIVE\n                            .Reset().TestDefined()\n                            .Mine(1, TestTime(1), 0).TestDefined().TestStateSinceHeight(0)\n-                           .Mine(1000, TestTime(10000) - 1, 0x101).TestDefined().TestStateSinceHeight(0) // One second more and it would be defined\n-                           .Mine(2000, TestTime(10000), 0x101).TestStarted().TestStateSinceHeight(2000) // So that's what happens the next period\n-                           .Mine(2050, TestTime(10010), 0x200).TestStarted().TestStateSinceHeight(2000) // 50 old blocks\n-                           .Mine(2950, TestTime(10020), 0x100).TestStarted().TestStateSinceHeight(2000) // 900 new blocks\n-                           .Mine(2999, TestTime(19999), 0x200).TestStarted().TestStateSinceHeight(2000) // 49 old blocks\n-                           .Mine(3000, TestTime(29999), 0x200).TestLockedIn().TestStateSinceHeight(3000) // 1 old block (so 900 out of the past 1000)\n-                           .Mine(3999, TestTime(30001), 0).TestLockedIn().TestStateSinceHeight(3000)\n-                           .Mine(4000, TestTime(30002), 0).TestActive().TestStateSinceHeight(4000)\n-                           .Mine(14333, TestTime(30003), 0).TestActive().TestStateSinceHeight(4000)\n-                           .Mine(24000, TestTime(40000), 0).TestActive().TestStateSinceHeight(4000)\n+                           .Mine(99, TestTime(10000) - 1, 0x101).TestDefined().TestStateSinceHeight(0) // One second more and it would be started\n+                           .Mine(100, TestTime(10000), 0x101).TestStarted().TestStateSinceHeight(100) // So that's what happens the next period",
      "path": "src/test/versionbits_tests.cpp",
      "position": 196,
      "original_position": 95,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2961b34e085787691701fd85b58061c205d489f3",
      "in_reply_to_id": 597210855,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2021-03-18T20:16:31Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597212362",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597212362"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 211,
      "original_line": 211,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597213684",
      "pull_request_review_id": 615835866,
      "id": 597213684,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIxMzY4NA==",
      "diff_hunk": "@@ -22,7 +22,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight@min_activation_height\", \"Use given start, timeout, and minimum activation heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "path": "src/chainparamsbase.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "06b3b4de75376baee14236f1562db5f64137f8d6",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Missing `[:]` around min_activation_height",
      "created_at": "2021-03-18T20:18:33Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597213684",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597213684"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597231273",
      "pull_request_review_id": 615835866,
      "id": 597231273,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMTI3Mw==",
      "diff_hunk": "@@ -0,0 +1,126 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 3\n+        self.setup_clean_chain = True\n+        # Node 0 has TestDummy inactive\n+        # Node 1 has a regular activation window\n+        # Node 2 uses speedy trial.\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@1:@1'],\n+            ['-vbparams=testdummy:@144:@{}'.format(144 * 3)],\n+            ['-vbparams=testdummy:@144:@{}:@{}'.format(144 * 2, 144 * 4)],\n+        ]\n+\n+    def run_test(self):\n+        self.log.info(\"Test status at genesis...\")\n+        for i, node in enumerate(self.nodes):\n+            self.log.debug('Node #{}...'.format(i))\n+            info = node.getblockchaininfo()\n+            assert_equal(info['blocks'], 0)\n+            assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], \"defined\")",
      "path": "test/functional/feature_bip8.py",
      "position": null,
      "original_position": 28,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c3093dbc11c4db551ec2b0b4bf6f5c24aa4ee542",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This loop structure is repeated a bunch; might be clearer as:\r\n\r\n```python\r\n    def test_height(self, height, *status, mine=None):\r\n        if height > self.height:\r\n            assert mine is not None\r\n            self.log.info(f\"Test status at height {height}...\")\r\n            self.nodes[mine].generate(height - self.height)\r\n            self.sync_blocks()\r\n        elif height < self.height:\r\n            assert mine is None\r\n            self.log.info(f\"Roll back to {height}...\")\r\n            old_block = self.nodes[0].getblockhash(height + 1)\r\n            for node in self.nodes:\r\n                node.invalidateblock(old_block)\r\n        else:\r\n            assert height == 0 and self.height == 0\r\n            self.log.info(f\"Test status at genesis...\")\r\n\r\n        self.height = height\r\n\r\n        for (i, node), st in zip(enumerate(self.nodes), status):\r\n            self.log.debug('Node #{}...'.format(i))\r\n            info = node.getblockchaininfo()\r\n            assert_equal(info['blocks'], height)\r\n            assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], st)\r\n\r\n    def run_test(self):\r\n        self.test_height(0, \"defined\", \"defined\", \"defined\")\r\n\r\n        # BIP 8 state transitions from \"defined\" to \"started\" or \"failed\" after\r\n        # the last block of the retargeting period has been mined. This means\r\n        # any new rules apply to transactions currently in the mempool, which\r\n        # might be mined in the next block.\r\n        #\r\n        # The next retargeting period starts at block 144, so nothing should\r\n        # happen at 142 and the state should change at 143.\r\n\r\n        self.test_height(144-2, \"defined\", \"defined\", \"defined\", mine=0)\r\n        self.test_height(144-1, \"failed\", \"started\", \"started\", mine=0)\r\n\r\n        self.log.info(\"Test status when not signalling...\")\r\n        self.test_height(144*2-1, \"failed\", \"started\", \"failed\", mine=0)\r\n        self.test_height(144*3-1, \"failed\", \"failed\", \"failed\", mine=0)\r\n\r\n\r\n        self.log.info(\"Test status when signalling...\")\r\n        # The new branch has unique block hashes, because of the signalling and\r\n        # because generate uses a deterministic address that depends on the node\r\n        # index.\r\n\r\n        self.test_height(144-1, \"failed\", \"started\", \"started\")\r\n        self.test_height(144*2-1, \"failed\", \"locked_in\", \"locked_in\", mine=2)\r\n        self.test_height(144*3-1, \"failed\", \"active\", \"locked_in\", mine=2)\r\n        self.test_height(144*4-1, \"failed\", \"active\", \"active\", mine=2)\r\n```",
      "created_at": "2021-03-18T20:47:34Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597231273",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597231273"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597232746",
      "pull_request_review_id": 615835866,
      "id": 597232746,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMjc0Ng==",
      "diff_hunk": "@@ -0,0 +1,126 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 3\n+        self.setup_clean_chain = True\n+        # Node 0 has TestDummy inactive\n+        # Node 1 has a regular activation window\n+        # Node 2 uses speedy trial.\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@1:@1'],",
      "path": "test/functional/feature_bip8.py",
      "position": null,
      "original_position": 17,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c3093dbc11c4db551ec2b0b4bf6f5c24aa4ee542",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Note `@1:@1` gets interpreted equivalently to `@144:@144` and transitions from DEFINED to FAILED for the block at height 144.",
      "created_at": "2021-03-18T20:50:09Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597232746",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597232746"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597233603",
      "pull_request_review_id": 615835866,
      "id": 597233603,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMzYwMw==",
      "diff_hunk": "@@ -49,20 +56,19 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n+                if (height >= height_timeout) {\n                     stateNext = ThresholdState::FAILED;",
      "path": "src/versionbits.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "28f82b25ac1dd18bb01e150d14ded687ae264956",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This doesn't match the BIP 8 spec which specifies that DEFINED always transitions to STARTED and never skips directly to FAILED.",
      "created_at": "2021-03-18T20:51:39Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597233603",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597233603"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597236740",
      "pull_request_review_id": 615835866,
      "id": 597236740,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzNjc0MA==",
      "diff_hunk": "@@ -501,21 +501,21 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n         std::vector<std::string> vDeploymentParams;\n         boost::split(vDeploymentParams, strDeployment, boost::is_any_of(\":\"));\n         if (vDeploymentParams.size() != 3) {\n-            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:start:end\");\n+            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:@startheight:@timeoutheight\");\n         }\n-        int64_t nStartTime, nTimeout;\n-        if (!ParseInt64(vDeploymentParams[1], &nStartTime)) {\n-            throw std::runtime_error(strprintf(\"Invalid nStartTime (%s)\", vDeploymentParams[1]));\n+        int64_t startheight = 0, timeoutheight = 0;\n+        if (vDeploymentParams[1].empty() || vDeploymentParams[1].front() != '@' || !ParseInt64(vDeploymentParams[1].substr(1), &startheight)) {\n+            throw std::runtime_error(strprintf(\"Invalid startheight (%s)\", vDeploymentParams[1]));\n         }\n-        if (!ParseInt64(vDeploymentParams[2], &nTimeout)) {\n-            throw std::runtime_error(strprintf(\"Invalid nTimeout (%s)\", vDeploymentParams[2]));\n+        if (vDeploymentParams[2].empty() || vDeploymentParams[2].front() != '@' || !ParseInt64(vDeploymentParams[2].substr(1), &timeoutheight)) {\n+            throw std::runtime_error(strprintf(\"Invalid timeoutheight (%s)\", vDeploymentParams[2]));",
      "path": "src/chainparams.cpp",
      "position": 174,
      "original_position": 105,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "28f82b25ac1dd18bb01e150d14ded687ae264956",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Could consider checking that `startheight` and `timeoutheight` (and `min_activation_height`) are either on retarget boundaries or match `-1, max int` or `-2, -2`. (Values not on retarget boundaries will be rounded up implicitly by the versionbits logic)",
      "created_at": "2021-03-18T20:56:57Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597236740",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597236740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 557,
      "original_line": 557,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597258950",
      "pull_request_review_id": 615894124,
      "id": 597258950,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzI1ODk1MA==",
      "diff_hunk": "@@ -49,20 +56,19 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n+                if (height >= height_timeout) {\n                     stateNext = ThresholdState::FAILED;",
      "path": "src/versionbits.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "28f82b25ac1dd18bb01e150d14ded687ae264956",
      "in_reply_to_id": 597233603,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This condition was actually caught by the fuzzer (back when this PR included it).\r\n\r\nThe scenario is that the timeoutheight is less than one period after the startheight. Without this, such a deployment would transition to the STARTED state, and then potentially to LOCKED_IN. But all of that after the timeoutheight has been passed. That doesn't make any sense and doesn't fit within what we are expecting in any tests.\r\n\r\nI think we need to revisit this case in the BIP.",
      "created_at": "2021-03-18T21:37:01Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597258950",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597258950"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597310511",
      "pull_request_review_id": 615955129,
      "id": 597310511,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzMxMDUxMQ==",
      "diff_hunk": "@@ -22,7 +22,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight@min_activation_height\", \"Use given start, timeout, and minimum activation heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "path": "src/chainparamsbase.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "06b3b4de75376baee14236f1562db5f64137f8d6",
      "in_reply_to_id": 597213684,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-18T23:34:08Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597310511",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597310511"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597310560",
      "pull_request_review_id": 615955178,
      "id": 597310560,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzMxMDU2MA==",
      "diff_hunk": "@@ -0,0 +1,126 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 3\n+        self.setup_clean_chain = True\n+        # Node 0 has TestDummy inactive\n+        # Node 1 has a regular activation window\n+        # Node 2 uses speedy trial.\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@1:@1'],\n+            ['-vbparams=testdummy:@144:@{}'.format(144 * 3)],\n+            ['-vbparams=testdummy:@144:@{}:@{}'.format(144 * 2, 144 * 4)],\n+        ]\n+\n+    def run_test(self):\n+        self.log.info(\"Test status at genesis...\")\n+        for i, node in enumerate(self.nodes):\n+            self.log.debug('Node #{}...'.format(i))\n+            info = node.getblockchaininfo()\n+            assert_equal(info['blocks'], 0)\n+            assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], \"defined\")",
      "path": "test/functional/feature_bip8.py",
      "position": null,
      "original_position": 28,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c3093dbc11c4db551ec2b0b4bf6f5c24aa4ee542",
      "in_reply_to_id": 597231273,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-18T23:34:16Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597310560",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597310560"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597310780",
      "pull_request_review_id": 615955424,
      "id": 597310780,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzMxMDc4MA==",
      "diff_hunk": "@@ -0,0 +1,126 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 3\n+        self.setup_clean_chain = True\n+        # Node 0 has TestDummy inactive\n+        # Node 1 has a regular activation window\n+        # Node 2 uses speedy trial.\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@1:@1'],",
      "path": "test/functional/feature_bip8.py",
      "position": null,
      "original_position": 17,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c3093dbc11c4db551ec2b0b4bf6f5c24aa4ee542",
      "in_reply_to_id": 597232746,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Since this is for a node that has testdummy inactive, I've just changed this to `@-2:@-2`.",
      "created_at": "2021-03-18T23:34:55Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597310780",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597310780"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597311140",
      "pull_request_review_id": 615955773,
      "id": 597311140,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzMxMTE0MA==",
      "diff_hunk": "@@ -49,20 +56,19 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n+                if (height >= height_timeout) {\n                     stateNext = ThresholdState::FAILED;",
      "path": "src/versionbits.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "28f82b25ac1dd18bb01e150d14ded687ae264956",
      "in_reply_to_id": 597233603,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "After discussing this with @luke-jr, I've removed this transition. Since there should never be a deployment that has the timeoutheight less than one period after the startheight, I've also added a sanity check to the unit tests for this case.",
      "created_at": "2021-03-18T23:35:48Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597311140",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597311140"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597311188",
      "pull_request_review_id": 615955823,
      "id": 597311188,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzMxMTE4OA==",
      "diff_hunk": "@@ -501,21 +501,21 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n         std::vector<std::string> vDeploymentParams;\n         boost::split(vDeploymentParams, strDeployment, boost::is_any_of(\":\"));\n         if (vDeploymentParams.size() != 3) {\n-            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:start:end\");\n+            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:@startheight:@timeoutheight\");\n         }\n-        int64_t nStartTime, nTimeout;\n-        if (!ParseInt64(vDeploymentParams[1], &nStartTime)) {\n-            throw std::runtime_error(strprintf(\"Invalid nStartTime (%s)\", vDeploymentParams[1]));\n+        int64_t startheight = 0, timeoutheight = 0;\n+        if (vDeploymentParams[1].empty() || vDeploymentParams[1].front() != '@' || !ParseInt64(vDeploymentParams[1].substr(1), &startheight)) {\n+            throw std::runtime_error(strprintf(\"Invalid startheight (%s)\", vDeploymentParams[1]));\n         }\n-        if (!ParseInt64(vDeploymentParams[2], &nTimeout)) {\n-            throw std::runtime_error(strprintf(\"Invalid nTimeout (%s)\", vDeploymentParams[2]));\n+        if (vDeploymentParams[2].empty() || vDeploymentParams[2].front() != '@' || !ParseInt64(vDeploymentParams[2].substr(1), &timeoutheight)) {\n+            throw std::runtime_error(strprintf(\"Invalid timeoutheight (%s)\", vDeploymentParams[2]));",
      "path": "src/chainparams.cpp",
      "position": 174,
      "original_position": 105,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "28f82b25ac1dd18bb01e150d14ded687ae264956",
      "in_reply_to_id": 597236740,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps for a followup.",
      "created_at": "2021-03-18T23:35:58Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597311188",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597311188"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 557,
      "original_line": 557,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597320691",
      "pull_request_review_id": 615965771,
      "id": 597320691,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzMyMDY5MQ==",
      "diff_hunk": "@@ -0,0 +1,126 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 3\n+        self.setup_clean_chain = True\n+        # Node 0 has TestDummy inactive\n+        # Node 1 has a regular activation window\n+        # Node 2 uses speedy trial.\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@1:@1'],",
      "path": "test/functional/feature_bip8.py",
      "position": null,
      "original_position": 17,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c3093dbc11c4db551ec2b0b4bf6f5c24aa4ee542",
      "in_reply_to_id": 597232746,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't think that works? \"never active\" means the fork won't show up in getblockchaininfo (to avoid testdummy appearing on mainnet).",
      "created_at": "2021-03-19T00:02:25Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597320691",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597320691"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597322885",
      "pull_request_review_id": 615968236,
      "id": 597322885,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzMyMjg4NQ==",
      "diff_hunk": "@@ -0,0 +1,126 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 3\n+        self.setup_clean_chain = True\n+        # Node 0 has TestDummy inactive\n+        # Node 1 has a regular activation window\n+        # Node 2 uses speedy trial.\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@1:@1'],",
      "path": "test/functional/feature_bip8.py",
      "position": null,
      "original_position": 17,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c3093dbc11c4db551ec2b0b4bf6f5c24aa4ee542",
      "in_reply_to_id": 597232746,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I work around that by allowing a status of `None` to indicate that it shouldn't show up in `getblockchaininfo`. The purpose of this node is to generate non-signaling blocks anyways, so the status of testdummy for it doesn't matter that much.",
      "created_at": "2021-03-19T00:08:57Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597322885",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597322885"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597327563",
      "pull_request_review_id": 615973384,
      "id": 597327563,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzMyNzU2Mw==",
      "diff_hunk": "@@ -49,20 +56,19 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n+                if (height >= height_timeout) {\n                     stateNext = ThresholdState::FAILED;",
      "path": "src/versionbits.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "28f82b25ac1dd18bb01e150d14ded687ae264956",
      "in_reply_to_id": 597233603,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, the \"always reach STARTED\" issue was why there's a separate NEVER_ACTIVE setting, I think.\r\n\r\nBIP8 does specify \"timeoutheight must be at least 4096 blocks (2 retarget intervals) after startheight\", so you could treat timeoutheight being reached from DEFINED as an extension to the spec and define it any way you like, similar to the always/never active cases. (The old bip8 code in #19573 didn't do that in order to match the spec in the bip as closely as possible to catch spec/implementation mismatches)\r\n\r\nAs far as the fuzz tester goes, following the bip8 spec exactly should mean something like:\r\n\r\n```c++\r\nswitch (state) {\r\ncase STARTED:\r\n    assert(startheight <= height);\r\n    if (exp_state == STARTED) {\r\n        assert(height <= timeoutheight);\r\n        assert(blocks_sig < threshold);\r\n    } else {\r\n        assert(exp_state == DEFINED);\r\n    }\r\n    break;\r\ncase FAILED:\r\n    assert(exp_state == STARTED || exp_state == FAILED);\r\n    assert(never_active_test || height >= timeoutheight);\r\n} \r\n```   \r\n\r\nor alternatively extending it so you can skip STARTED would probably not change as much but might warrant adding a check along the lines of:\r\n\r\n```c++\r\nstatic int next_boundary(int n, int m) { return (n + m - 1) - ((n - 1) % m); }\r\nif (next_boundary(timeoutheight, period) >= next_boundary(startheight, period)) {\r\n    assert(state == DEFINED || state == FAILED);\r\n    assert(exp_state == DEFINED || exp_state == FAILED);\r\n}\r\n```",
      "created_at": "2021-03-19T00:23:19Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597327563",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597327563"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597897743",
      "pull_request_review_id": 616694142,
      "id": 597897743,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Nzg5Nzc0Mw==",
      "diff_hunk": "@@ -501,21 +501,21 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n         std::vector<std::string> vDeploymentParams;\n         boost::split(vDeploymentParams, strDeployment, boost::is_any_of(\":\"));\n         if (vDeploymentParams.size() != 3) {\n-            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:start:end\");\n+            throw std::runtime_error(\"Version bits parameters malformed, expecting deployment:@startheight:@timeoutheight\");\n         }\n-        int64_t nStartTime, nTimeout;\n-        if (!ParseInt64(vDeploymentParams[1], &nStartTime)) {\n-            throw std::runtime_error(strprintf(\"Invalid nStartTime (%s)\", vDeploymentParams[1]));\n+        int64_t startheight = 0, timeoutheight = 0;\n+        if (vDeploymentParams[1].empty() || vDeploymentParams[1].front() != '@' || !ParseInt64(vDeploymentParams[1].substr(1), &startheight)) {\n+            throw std::runtime_error(strprintf(\"Invalid startheight (%s)\", vDeploymentParams[1]));\n         }\n-        if (!ParseInt64(vDeploymentParams[2], &nTimeout)) {\n-            throw std::runtime_error(strprintf(\"Invalid nTimeout (%s)\", vDeploymentParams[2]));\n+        if (vDeploymentParams[2].empty() || vDeploymentParams[2].front() != '@' || !ParseInt64(vDeploymentParams[2].substr(1), &timeoutheight)) {\n+            throw std::runtime_error(strprintf(\"Invalid timeoutheight (%s)\", vDeploymentParams[2]));",
      "path": "src/chainparams.cpp",
      "position": 174,
      "original_position": 105,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "28f82b25ac1dd18bb01e150d14ded687ae264956",
      "in_reply_to_id": 597236740,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I've decided to add checking for these parameters.",
      "created_at": "2021-03-19T18:35:06Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597897743",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597897743"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 557,
      "original_line": 557,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598061975",
      "pull_request_review_id": 616883132,
      "id": 598061975,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODA2MTk3NQ==",
      "diff_hunk": "@@ -276,47 +261,51 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n+        assert(never_active_test || height < checker.m_end);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 170,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "501e1371a7c122ad8629bc31bfdab7d8195a75fa",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If `height < checker.m_begin` and `m_begin + period <= m_end` then `height < checker.m_end` is guaranteed. Suggest dropping the `m_end` test here, which then allows removing the `assert(m_begin + period <= m_end)` above, which then allows extending the range for both startheight and timeoutheight to `[0, period*(max_periods-2)]`.  (Really the limit for timeouteight is `period*(max_periods-1)`)",
      "created_at": "2021-03-20T04:40:39Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598061975",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598061975"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 277,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598062098",
      "pull_request_review_id": 616883132,
      "id": 598062098,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODA2MjA5OA==",
      "diff_hunk": "@@ -276,47 +261,51 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n+        assert(never_active_test || height < checker.m_end);\n         break;\n     case ThresholdState::STARTED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(height >= checker.m_begin);\n         if (exp_state == ThresholdState::STARTED) {\n+            assert(height < checker.m_end);\n             assert(blocks_sig < threshold);\n         } else {\n             assert(exp_state == ThresholdState::DEFINED);\n         }\n         break;\n     case ThresholdState::LOCKED_IN:\n-        assert(exp_state == ThresholdState::STARTED);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n-        assert(blocks_sig >= threshold);\n+        if (exp_state == ThresholdState::LOCKED_IN) {\n+            assert(height < checker.m_min_activation);\n+        } else {\n+            assert(exp_state == ThresholdState::STARTED);\n+            assert(blocks_sig >= threshold);\n+        }\n         break;\n     case ThresholdState::ACTIVE:\n+        assert(height >= checker.m_min_activation);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 195,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "501e1371a7c122ad8629bc31bfdab7d8195a75fa",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Changing this assertion to `assert(always_active_test || height >= checker.m_min_activation)` allows having m_min_activation be fuzzed unconditionally (ie for always/never active tests as well).",
      "created_at": "2021-03-20T04:42:22Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598062098",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598062098"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 297,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598062187",
      "pull_request_review_id": 616883132,
      "id": 598062187,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODA2MjE4Nw==",
      "diff_hunk": "@@ -334,12 +323,7 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // \"never active\" does too\n     if (never_active_test) {\n-        assert(state == ThresholdState::FAILED);\n-        assert(since == period);\n-        if (exp_since == 0) {\n-            assert(exp_state == ThresholdState::DEFINED);\n-        } else {\n-            assert(exp_state == ThresholdState::FAILED);\n-        }\n+        assert(state == ThresholdState::DEFINED);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": 224,
      "original_position": 223,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "501e1371a7c122ad8629bc31bfdab7d8195a75fa",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm a bit surprised NEVER_ACTIVE is always DEFINED instead of always FAILED (it was this way in #19573 as well). I don't think it makes any observable difference though.",
      "created_at": "2021-03-20T04:43:42Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598062187",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598062187"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 330,
      "original_line": 330,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598066616",
      "pull_request_review_id": 616885613,
      "id": 598066616,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODA2NjYxNg==",
      "diff_hunk": "@@ -276,47 +261,51 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n+        assert(never_active_test || height < checker.m_end);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 170,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "501e1371a7c122ad8629bc31bfdab7d8195a75fa",
      "in_reply_to_id": 598061975,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't quite follow as to why the range for both startheight and timeoutheight should be ` [0, period*(max_periods-2)]`. I had set the range currently used in order to avoid the issue discussed in https://github.com/bitcoin/bitcoin/pull/21392#discussion_r597258950.",
      "created_at": "2021-03-20T05:32:16Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598066616",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598066616"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 277,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598066653",
      "pull_request_review_id": 616885643,
      "id": 598066653,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODA2NjY1Mw==",
      "diff_hunk": "@@ -334,12 +323,7 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // \"never active\" does too\n     if (never_active_test) {\n-        assert(state == ThresholdState::FAILED);\n-        assert(since == period);\n-        if (exp_since == 0) {\n-            assert(exp_state == ThresholdState::DEFINED);\n-        } else {\n-            assert(exp_state == ThresholdState::FAILED);\n-        }\n+        assert(state == ThresholdState::DEFINED);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": 224,
      "original_position": 223,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "501e1371a7c122ad8629bc31bfdab7d8195a75fa",
      "in_reply_to_id": 598062187,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This was surprising to me as well. Since this commit was pulled from #19573, I just left it as it came from there.",
      "created_at": "2021-03-20T05:32:52Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598066653",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598066653"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 330,
      "original_line": 330,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598067201",
      "pull_request_review_id": 616885911,
      "id": 598067201,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODA2NzIwMQ==",
      "diff_hunk": "@@ -276,47 +261,51 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n+        assert(never_active_test || height < checker.m_end);\n         break;\n     case ThresholdState::STARTED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(height >= checker.m_begin);\n         if (exp_state == ThresholdState::STARTED) {\n+            assert(height < checker.m_end);\n             assert(blocks_sig < threshold);\n         } else {\n             assert(exp_state == ThresholdState::DEFINED);\n         }\n         break;\n     case ThresholdState::LOCKED_IN:\n-        assert(exp_state == ThresholdState::STARTED);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n-        assert(blocks_sig >= threshold);\n+        if (exp_state == ThresholdState::LOCKED_IN) {\n+            assert(height < checker.m_min_activation);\n+        } else {\n+            assert(exp_state == ThresholdState::STARTED);\n+            assert(blocks_sig >= threshold);\n+        }\n         break;\n     case ThresholdState::ACTIVE:\n+        assert(height >= checker.m_min_activation);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 195,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "501e1371a7c122ad8629bc31bfdab7d8195a75fa",
      "in_reply_to_id": 598062098,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-20T05:38:22Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598067201",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598067201"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 297,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598068726",
      "pull_request_review_id": 616886782,
      "id": 598068726,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODA2ODcyNg==",
      "diff_hunk": "@@ -276,47 +261,51 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n+        assert(never_active_test || height < checker.m_end);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 170,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "501e1371a7c122ad8629bc31bfdab7d8195a75fa",
      "in_reply_to_id": 598061975,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "For bip9/mtp versionbits the cache lookup loop will say \"oh, we haven't reach start time yet, must still be DEFINED\" which is inconsistent with the \"DEFINED\" check afterwards that says \"if we reached timeout and start time at the same time, we go to FAILED instead of STARTED\". If the fuzzer tracked the mtp for the previous period, you could capture that logic too, but that seemed a bit messy.\r\n\r\nBecause bip8 versionbits always goes DEFINED to STARTED it doesn't have that inconsistency, so checking a broader range of parameters is easy.",
      "created_at": "2021-03-20T05:55:56Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598068726",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598068726"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 277,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598071087",
      "pull_request_review_id": 616888164,
      "id": 598071087,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODA3MTA4Nw==",
      "diff_hunk": "@@ -276,47 +261,51 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n+        assert(never_active_test || height < checker.m_end);\n         break;\n     case ThresholdState::STARTED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(height >= checker.m_begin);\n         if (exp_state == ThresholdState::STARTED) {\n+            assert(height < checker.m_end);\n             assert(blocks_sig < threshold);\n         } else {\n             assert(exp_state == ThresholdState::DEFINED);\n         }\n         break;\n     case ThresholdState::LOCKED_IN:\n-        assert(exp_state == ThresholdState::STARTED);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n-        assert(blocks_sig >= threshold);\n+        if (exp_state == ThresholdState::LOCKED_IN) {\n+            assert(height < checker.m_min_activation);\n+        } else {\n+            assert(exp_state == ThresholdState::STARTED);\n+            assert(blocks_sig >= threshold);\n+        }\n         break;\n     case ThresholdState::ACTIVE:\n+        assert(always_active_test || height >= checker.m_min_activation);\n         assert(exp_state == ThresholdState::ACTIVE || exp_state == ThresholdState::LOCKED_IN);\n         break;\n     case ThresholdState::FAILED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_end);\n+        assert(height >= checker.m_end);\n         assert(exp_state != ThresholdState::LOCKED_IN && exp_state != ThresholdState::ACTIVE);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 201,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "80fc57990b4682bad350e1e7aff0ea4db73fec31",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you should be able to make this:\r\n\r\n```c++\r\n    case ThresholdState::FAILED:\r\n        assert(height >= checker.m_begin);\r\n        assert(height >= checker.m_end);\r\n        assert(exp_state == ThresholdState::FAILED || exp_state == ThresholdState::STARTED);\r\n```",
      "created_at": "2021-03-20T06:24:23Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598071087",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598071087"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 302,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598111231",
      "pull_request_review_id": 616912138,
      "id": 598111231,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODExMTIzMQ==",
      "diff_hunk": "@@ -9,11 +9,16 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n {\n     int nPeriod = Period(params);\n     int nThreshold = Threshold(params);\n-    int64_t nTimeStart = BeginTime(params);\n-    int64_t nTimeTimeout = EndTime(params);\n+    int height_start = StartHeight(params);\n+    int height_timeout = TimeoutHeight(params);\n+\n+    // Check if this deployment is never active.\n+    if (height_start == Consensus::BIP9Deployment::NEVER_ACTIVE && height_timeout == Consensus::BIP9Deployment::NEVER_ACTIVE) {",
      "path": "src/versionbits.cpp",
      "position": 11,
      "original_position": 10,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "59833ff7118510de7bd2e89d55e074dc23cef8ef",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "59833ff7118510de7bd2e89d55e074dc23cef8ef : the second condition seems unnecessary, maybe just `assert` it?",
      "created_at": "2021-03-20T13:21:02Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598111231",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598111231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 17,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598111704",
      "pull_request_review_id": 616912138,
      "id": 598111704,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODExMTcwNA==",
      "diff_hunk": "@@ -22,7 +22,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "path": "src/chainparamsbase.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "59833ff7118510de7bd2e89d55e074dc23cef8ef",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "59833ff7118510de7bd2e89d55e074dc23cef8ef: doc should explain the special values `-1` and `-2`",
      "created_at": "2021-03-20T13:25:47Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598111704",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598111704"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598112205",
      "pull_request_review_id": 616912138,
      "id": 598112205,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODExMjIwNQ==",
      "diff_hunk": "@@ -1201,7 +1201,7 @@ def set_test_params(self):\n         self.num_nodes = 2\n         self.setup_clean_chain = True\n         # Node 0 has Taproot inactive, Node 1 active.\n-        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:1:1\"], [\"-par=1\"]]\n+        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:@-2:@-2\"], [\"-par=1\"]]",
      "path": "test/functional/feature_taproot.py",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "59833ff7118510de7bd2e89d55e074dc23cef8ef",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "59833ff7118510de7bd2e89d55e074dc23cef8ef: maybe use the exact terminology. I also find indentation less confusing:\r\n\r\n```python\r\nself.extra_args = [\r\n    [\"-par=1\", \"-vbparams=taproot:@-2:@-2\"], # Node 0 has Taproot NEVER_ACTIVE\r\n    [\"-par=1\"] # Node 1 has Taproot ALWAYS_ACTIVE\r\n]\r\n```\r\n",
      "created_at": "2021-03-20T13:30:09Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598112205",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598112205"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598112562",
      "pull_request_review_id": 616912138,
      "id": 598112562,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODExMjU2Mg==",
      "diff_hunk": "@@ -0,0 +1,7 @@\n+Low-level changes\n+=================\n+\n+RPC\n+---\n+\n+* BIP 9 has been replaced with a partial implementation of BIP 8. This change is reflected in `getblockchaininfo` where references to BIP 9 have been replaced with references to BIP 8.",
      "path": "doc/release-notes-21392.md",
      "position": 7,
      "original_position": 7,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "968bc1e07b4a8a359876f5b8035fb4c369d04bad",
      "in_reply_to_id": 590674111,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It also impacts mainnet for anyone automatically parsing `getblockchaininfo` for current softfork deployments.",
      "created_at": "2021-03-20T13:34:23Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598112562",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598112562"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598138306",
      "pull_request_review_id": 616930275,
      "id": 598138306,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODEzODMwNg==",
      "diff_hunk": "@@ -9,11 +9,16 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n {\n     int nPeriod = Period(params);\n     int nThreshold = Threshold(params);\n-    int64_t nTimeStart = BeginTime(params);\n-    int64_t nTimeTimeout = EndTime(params);\n+    int height_start = StartHeight(params);\n+    int height_timeout = TimeoutHeight(params);\n+\n+    // Check if this deployment is never active.\n+    if (height_start == Consensus::BIP9Deployment::NEVER_ACTIVE && height_timeout == Consensus::BIP9Deployment::NEVER_ACTIVE) {",
      "path": "src/versionbits.cpp",
      "position": 11,
      "original_position": 10,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "59833ff7118510de7bd2e89d55e074dc23cef8ef",
      "in_reply_to_id": 598111231,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it is fine to leave as is.",
      "created_at": "2021-03-20T17:35:09Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598138306",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598138306"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 17,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598138314",
      "pull_request_review_id": 616930285,
      "id": 598138314,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODEzODMxNA==",
      "diff_hunk": "@@ -276,47 +261,51 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n+        assert(never_active_test || height < checker.m_end);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 170,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "501e1371a7c122ad8629bc31bfdab7d8195a75fa",
      "in_reply_to_id": 598061975,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-20T17:35:17Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598138314",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598138314"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 277,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598138342",
      "pull_request_review_id": 616930296,
      "id": 598138342,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODEzODM0Mg==",
      "diff_hunk": "@@ -276,47 +261,51 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n+        assert(never_active_test || height < checker.m_end);\n         break;\n     case ThresholdState::STARTED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(height >= checker.m_begin);\n         if (exp_state == ThresholdState::STARTED) {\n+            assert(height < checker.m_end);\n             assert(blocks_sig < threshold);\n         } else {\n             assert(exp_state == ThresholdState::DEFINED);\n         }\n         break;\n     case ThresholdState::LOCKED_IN:\n-        assert(exp_state == ThresholdState::STARTED);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n-        assert(blocks_sig >= threshold);\n+        if (exp_state == ThresholdState::LOCKED_IN) {\n+            assert(height < checker.m_min_activation);\n+        } else {\n+            assert(exp_state == ThresholdState::STARTED);\n+            assert(blocks_sig >= threshold);\n+        }\n         break;\n     case ThresholdState::ACTIVE:\n+        assert(always_active_test || height >= checker.m_min_activation);\n         assert(exp_state == ThresholdState::ACTIVE || exp_state == ThresholdState::LOCKED_IN);\n         break;\n     case ThresholdState::FAILED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_end);\n+        assert(height >= checker.m_end);\n         assert(exp_state != ThresholdState::LOCKED_IN && exp_state != ThresholdState::ACTIVE);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 201,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "80fc57990b4682bad350e1e7aff0ea4db73fec31",
      "in_reply_to_id": 598071087,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-20T17:35:22Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598138342",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598138342"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 302,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598138396",
      "pull_request_review_id": 616930315,
      "id": 598138396,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODEzODM5Ng==",
      "diff_hunk": "@@ -22,7 +22,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "path": "src/chainparamsbase.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "59833ff7118510de7bd2e89d55e074dc23cef8ef",
      "in_reply_to_id": 598111704,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added documentation for the always active and never active cases.",
      "created_at": "2021-03-20T17:35:36Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598138396",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598138396"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598138411",
      "pull_request_review_id": 616930318,
      "id": 598138411,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODEzODQxMQ==",
      "diff_hunk": "@@ -1201,7 +1201,7 @@ def set_test_params(self):\n         self.num_nodes = 2\n         self.setup_clean_chain = True\n         # Node 0 has Taproot inactive, Node 1 active.\n-        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:1:1\"], [\"-par=1\"]]\n+        self.extra_args = [[\"-par=1\", \"-vbparams=taproot:@-2:@-2\"], [\"-par=1\"]]",
      "path": "test/functional/feature_taproot.py",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "59833ff7118510de7bd2e89d55e074dc23cef8ef",
      "in_reply_to_id": 598112205,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-20T17:35:40Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598138411",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598138411"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598144381",
      "pull_request_review_id": 616934672,
      "id": 598144381,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODE0NDM4MQ==",
      "diff_hunk": "@@ -22,7 +22,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "path": "src/chainparamsbase.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "59833ff7118510de7bd2e89d55e074dc23cef8ef",
      "in_reply_to_id": 598111704,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Do we really need that level of detail in debug-only options?",
      "created_at": "2021-03-20T18:31:49Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598144381",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598144381"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598145429",
      "pull_request_review_id": 616935441,
      "id": 598145429,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODE0NTQyOQ==",
      "diff_hunk": "@@ -9,11 +9,16 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n {\n     int nPeriod = Period(params);\n     int nThreshold = Threshold(params);\n-    int64_t nTimeStart = BeginTime(params);\n-    int64_t nTimeTimeout = EndTime(params);\n+    int height_start = StartHeight(params);\n+    int height_timeout = TimeoutHeight(params);\n+\n+    // Check if this deployment is never active.\n+    if (height_start == Consensus::BIP9Deployment::NEVER_ACTIVE && height_timeout == Consensus::BIP9Deployment::NEVER_ACTIVE) {",
      "path": "src/versionbits.cpp",
      "position": 11,
      "original_position": 10,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "59833ff7118510de7bd2e89d55e074dc23cef8ef",
      "in_reply_to_id": 598111231,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I could imagine some confusion if some sets `height_start` to `NEVER_ACTIVE` but then sets `height_timeout` to some real date. But hopefully this code gets enough review nobody would actually do that.",
      "created_at": "2021-03-20T18:42:44Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598145429",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598145429"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 17,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598145462",
      "pull_request_review_id": 616935472,
      "id": 598145462,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODE0NTQ2Mg==",
      "diff_hunk": "@@ -22,7 +22,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "path": "src/chainparamsbase.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "59833ff7118510de7bd2e89d55e074dc23cef8ef",
      "in_reply_to_id": 598111704,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's confused me more than zero times.",
      "created_at": "2021-03-20T18:43:11Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598145462",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598145462"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598148207",
      "pull_request_review_id": 616937244,
      "id": 598148207,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODE0ODIwNw==",
      "diff_hunk": "@@ -9,11 +9,16 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n {\n     int nPeriod = Period(params);\n     int nThreshold = Threshold(params);\n-    int64_t nTimeStart = BeginTime(params);\n-    int64_t nTimeTimeout = EndTime(params);\n+    int height_start = StartHeight(params);\n+    int height_timeout = TimeoutHeight(params);\n+\n+    // Check if this deployment is never active.\n+    if (height_start == Consensus::BIP9Deployment::NEVER_ACTIVE && height_timeout == Consensus::BIP9Deployment::NEVER_ACTIVE) {",
      "path": "src/versionbits.cpp",
      "position": 11,
      "original_position": 10,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "59833ff7118510de7bd2e89d55e074dc23cef8ef",
      "in_reply_to_id": 598111231,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I've added an additional check to the sanity check unit test that the `NEVER_ACTIVE` and `ALWAYS_ACTIVE` parameters are set correctly.",
      "created_at": "2021-03-20T19:08:47Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598148207",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598148207"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 17,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598985924",
      "pull_request_review_id": 617869698,
      "id": 598985924,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODk4NTkyNA==",
      "diff_hunk": "@@ -466,14 +474,57 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t start_height, int64_t timeout_height, int64_t min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = start_height;\n+        consensus.vDeployments[d].timeoutheight = timeout_height;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n+    bool CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight, int64_t min_activation_height);\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CRegTestParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight, int64_t min_activation_height)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NO_TIMEOUT)) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+    if (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NO_TIMEOUT) {\n+        error = strprintf(\"When startheight is %d, timeoutheight must be %d\", Consensus::BIP9Deployment::ALWAYS_ACTIVE, Consensus::BIP9Deployment::NO_TIMEOUT);",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 126,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "52990c109349d7510a98070f07f706a60c6e2b75",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This isn't true, and specifying NO_TIMEOUT is kinda annoying...?",
      "created_at": "2021-03-22T18:44:43Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598985924",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598985924"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 500,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599151274",
      "pull_request_review_id": 618071283,
      "id": 599151274,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTE1MTI3NA==",
      "diff_hunk": "@@ -466,14 +474,57 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t start_height, int64_t timeout_height, int64_t min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = start_height;\n+        consensus.vDeployments[d].timeoutheight = timeout_height;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n+    bool CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight, int64_t min_activation_height);\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CRegTestParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight, int64_t min_activation_height)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NO_TIMEOUT)) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+    if (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NO_TIMEOUT) {\n+        error = strprintf(\"When startheight is %d, timeoutheight must be %d\", Consensus::BIP9Deployment::ALWAYS_ACTIVE, Consensus::BIP9Deployment::NO_TIMEOUT);",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 126,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "52990c109349d7510a98070f07f706a60c6e2b75",
      "in_reply_to_id": 598985924,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Removed it.",
      "created_at": "2021-03-22T23:54:05Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r599151274",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599151274"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 500,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600001664",
      "pull_request_review_id": 619140029,
      "id": 600001664,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDAwMTY2NA==",
      "diff_hunk": "@@ -466,14 +474,54 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t start_height, int64_t timeout_height, int64_t min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = start_height;\n+        consensus.vDeployments[d].timeoutheight = timeout_height;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n+    bool CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight, int64_t min_activation_height);\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CRegTestParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight, int64_t min_activation_height)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NO_TIMEOUT)) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+    if (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) return true;\n+\n+    // Actual params must be on retarget block\n+    if (startheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid startheight (%d), must be a multiple of %d\", startheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be a multiple of %d\", timeoutheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (min_activation_height < 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), cannot be negative\", min_activation_height);\n+        return false;\n+    }\n+    if (min_activation_height % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), must be a multiple of %d\", min_activation_height, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight <= startheight) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be greater than the startheight (%d)\", timeoutheight, timeoutheight);",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 145,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9a8334212bfa557b06d300f49962b3a772b63837",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Second var is wrong",
      "created_at": "2021-03-23T22:30:51Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600001664",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600001664"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 519,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600049584",
      "pull_request_review_id": 619192063,
      "id": 600049584,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDA0OTU4NA==",
      "diff_hunk": "@@ -466,14 +474,54 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t start_height, int64_t timeout_height, int64_t min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = start_height;\n+        consensus.vDeployments[d].timeoutheight = timeout_height;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n+    bool CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight, int64_t min_activation_height);\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CRegTestParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight, int64_t min_activation_height)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NO_TIMEOUT)) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+    if (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) return true;\n+\n+    // Actual params must be on retarget block\n+    if (startheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid startheight (%d), must be a multiple of %d\", startheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be a multiple of %d\", timeoutheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (min_activation_height < 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), cannot be negative\", min_activation_height);\n+        return false;\n+    }\n+    if (min_activation_height % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), must be a multiple of %d\", min_activation_height, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight <= startheight) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be greater than the startheight (%d)\", timeoutheight, timeoutheight);",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 145,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "9a8334212bfa557b06d300f49962b3a772b63837",
      "in_reply_to_id": 600001664,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed. Also added tests for `-vbparams`.",
      "created_at": "2021-03-24T00:13:53Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600049584",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600049584"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 519,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600087336",
      "pull_request_review_id": 619229252,
      "id": 600087336,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDA4NzMzNg==",
      "diff_hunk": "@@ -474,14 +474,53 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n+    bool CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight);\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CRegTestParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NO_TIMEOUT)) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+    if (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) return true;",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "bf4bddaac7db767986d29d22b8d866867bb50220",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Migrate versionbits to use height instead of MTP\"\r\n\r\nYou already tested the case start==ALWAYS_ACTIVE && timeout==NO_TIMEOUT above. Would it make sense to enforce timeout==NO_TIMEOUT whenever start==ALWAYS_ACTIVE instead?",
      "created_at": "2021-03-24T01:31:46Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600087336",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600087336"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 498,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600098079",
      "pull_request_review_id": 619229252,
      "id": 600098079,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDA5ODA3OQ==",
      "diff_hunk": "@@ -135,38 +124,25 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     bool always_active_test = false;\n     bool never_active_test = false;\n-    int64_t start_time;\n-    int64_t timeout;\n+    int startheight;\n+    int timeoutheight;\n     if (fuzzed_data_provider.ConsumeBool()) {\n         // pick the timestamp to switch based on a block\n-        // note states will change *after* these blocks because mediantime lags\n-        int start_block = fuzzed_data_provider.ConsumeIntegralInRange<int>(0, period * (max_periods - 3));\n-        int end_block = fuzzed_data_provider.ConsumeIntegralInRange<int>(start_block, period * (max_periods - 3));\n-\n-        start_time = block_start_time + start_block * interval;\n-        timeout = block_start_time + end_block * interval;\n-\n-        assert(start_time <= timeout);\n-\n-        // allow for times to not exactly match a block\n-        if (fuzzed_data_provider.ConsumeBool()) start_time += interval / 2;\n-        if (fuzzed_data_provider.ConsumeBool()) timeout += interval / 2;\n-\n-        // this may make timeout too early; if so, don't run the test\n-        if (start_time > timeout) return;\n+        startheight = fuzzed_data_provider.ConsumeIntegralInRange<int>(0, period * (max_periods - 2));\n+        timeoutheight = fuzzed_data_provider.ConsumeIntegralInRange<int>(0, period * (max_periods - 2));",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": 106,
      "original_position": 101,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "bf4bddaac7db767986d29d22b8d866867bb50220",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Migrate versionbits to use height instead of MTP\"\r\n\r\n`timeoutheight` isn't chosen to be `>= startheight`?",
      "created_at": "2021-03-24T01:54:41Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600098079",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600098079"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 138,
      "original_line": 138,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600111302",
      "pull_request_review_id": 619229252,
      "id": 600111302,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDExMTMwMg==",
      "diff_hunk": "@@ -474,14 +474,53 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n+    bool CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight);\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CRegTestParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight)",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "bf4bddaac7db767986d29d22b8d866867bb50220",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Migrate versionbits to use height instead of MTP\", but more general perhaps.\r\n\r\nThere seems to be some overlap here with `sanity_check_params`. Would it make sense to have them merged, and perhaps make it always performed (also for mainnet/testnet, at startup)?",
      "created_at": "2021-03-24T02:21:39Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600111302",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600111302"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 486,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600121543",
      "pull_request_review_id": 619265068,
      "id": 600121543,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDEyMTU0Mw==",
      "diff_hunk": "@@ -135,38 +124,25 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     bool always_active_test = false;\n     bool never_active_test = false;\n-    int64_t start_time;\n-    int64_t timeout;\n+    int startheight;\n+    int timeoutheight;\n     if (fuzzed_data_provider.ConsumeBool()) {\n         // pick the timestamp to switch based on a block\n-        // note states will change *after* these blocks because mediantime lags\n-        int start_block = fuzzed_data_provider.ConsumeIntegralInRange<int>(0, period * (max_periods - 3));\n-        int end_block = fuzzed_data_provider.ConsumeIntegralInRange<int>(start_block, period * (max_periods - 3));\n-\n-        start_time = block_start_time + start_block * interval;\n-        timeout = block_start_time + end_block * interval;\n-\n-        assert(start_time <= timeout);\n-\n-        // allow for times to not exactly match a block\n-        if (fuzzed_data_provider.ConsumeBool()) start_time += interval / 2;\n-        if (fuzzed_data_provider.ConsumeBool()) timeout += interval / 2;\n-\n-        // this may make timeout too early; if so, don't run the test\n-        if (start_time > timeout) return;\n+        startheight = fuzzed_data_provider.ConsumeIntegralInRange<int>(0, period * (max_periods - 2));\n+        timeoutheight = fuzzed_data_provider.ConsumeIntegralInRange<int>(0, period * (max_periods - 2));",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": 106,
      "original_position": 101,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "bf4bddaac7db767986d29d22b8d866867bb50220",
      "in_reply_to_id": 600098079,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "afaict, the fuzzer is flexible enough to deal with that case. See also: https://github.com/bitcoin/bitcoin/pull/21392#discussion_r598061975",
      "created_at": "2021-03-24T02:49:25Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600121543",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600121543"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 138,
      "original_line": 138,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600123560",
      "pull_request_review_id": 619267592,
      "id": 600123560,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDEyMzU2MA==",
      "diff_hunk": "@@ -474,14 +474,53 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n+    bool CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight);\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CRegTestParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NO_TIMEOUT)) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+    if (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) return true;",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "bf4bddaac7db767986d29d22b8d866867bb50220",
      "in_reply_to_id": 600087336,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That was originally required, but unnecessary and since NO_TIMEOUT is a maxint, seems annoying to require for no reason.",
      "created_at": "2021-03-24T02:54:54Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600123560",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600123560"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 498,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600123747",
      "pull_request_review_id": 619267787,
      "id": 600123747,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDEyMzc0Nw==",
      "diff_hunk": "@@ -474,14 +474,53 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n+    bool CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight);\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CRegTestParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight)",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "bf4bddaac7db767986d29d22b8d866867bb50220",
      "in_reply_to_id": 600111302,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Seems best left for a refactor later IMO.",
      "created_at": "2021-03-24T02:55:28Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600123747",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600123747"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 486,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600133553",
      "pull_request_review_id": 619278328,
      "id": 600133553,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDEzMzU1Mw==",
      "diff_hunk": "@@ -474,14 +474,53 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n+    bool CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight);\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CRegTestParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NO_TIMEOUT)) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+    if (startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) return true;",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "bf4bddaac7db767986d29d22b8d866867bb50220",
      "in_reply_to_id": 600087336,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oops. The requirement was intentionally removed, but I didn't notice I had that earlier check. I've removed this line and dropped `NO_TIMEOUT` from the earlier check.",
      "created_at": "2021-03-24T03:25:36Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600133553",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600133553"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 498,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600133910",
      "pull_request_review_id": 619278738,
      "id": 600133910,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDEzMzkxMA==",
      "diff_hunk": "@@ -474,14 +474,53 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n+    bool CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight);\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CRegTestParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight)",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "bf4bddaac7db767986d29d22b8d866867bb50220",
      "in_reply_to_id": 600111302,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it is reasonable to have the sanity check always performed at startup, but that can be left for a later PR.\r\n\r\nHowever I have removed the overlap with `sanity_check_params` and have that instead call `CheckVBitsHeights` (now part of `CChainParams`) in the test for the height sanity checks.",
      "created_at": "2021-03-24T03:26:48Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600133910",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600133910"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 486,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600170128",
      "pull_request_review_id": 619322312,
      "id": 600170128,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDE3MDEyOA==",
      "diff_hunk": "@@ -25,19 +25,28 @@ enum DeploymentPos\n struct BIP9Deployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int startheight;\n+    /** Timeout/expiry block height for the deployment attempt. Must be a retarget block. */\n+    int timeoutheight;\n+    /** Threshold for activation */\n+    int threshold;\n+    /**\n+     * If lock in occurs, delay activation until at least this block height. Activations only occur on retargets.\n+     */\n+    int64_t m_min_activation_height{0};",
      "path": "src/consensus/params.h",
      "position": null,
      "original_position": 17,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2cb41863abe59717a199a66030185e2d23226a23",
      "in_reply_to_id": null,
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why have `startheight` and `timeoutheight` as `int`s but as a `int64_t` for `m_min_activation_height`. For the vbparams you had them all as `int64_t`",
      "created_at": "2021-03-24T04:53:22Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600170128",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600170128"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": 29,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 37,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600171667",
      "pull_request_review_id": 619322312,
      "id": 600171667,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDE3MTY2Nw==",
      "diff_hunk": "@@ -1243,8 +1242,8 @@ static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &nam\n     {\n         bip9.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n     }\n-    bip9.pushKV(\"start_time\", consensusParams.vDeployments[id].nStartTime);\n-    bip9.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n+    bip9.pushKV(\"startheight\", consensusParams.vDeployments[id].startheight);",
      "path": "src/rpc/blockchain.cpp",
      "position": 19,
      "original_position": 19,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2cb41863abe59717a199a66030185e2d23226a23",
      "in_reply_to_id": null,
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "not a huge deal but this variable should be renamed eventually",
      "created_at": "2021-03-24T04:54:54Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600171667",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600171667"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1245,
      "original_line": 1245,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600192616",
      "pull_request_review_id": 619348678,
      "id": 600192616,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDE5MjYxNg==",
      "diff_hunk": "@@ -25,19 +25,28 @@ enum DeploymentPos\n struct BIP9Deployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int startheight;\n+    /** Timeout/expiry block height for the deployment attempt. Must be a retarget block. */\n+    int timeoutheight;\n+    /** Threshold for activation */\n+    int threshold;\n+    /**\n+     * If lock in occurs, delay activation until at least this block height. Activations only occur on retargets.\n+     */\n+    int64_t m_min_activation_height{0};",
      "path": "src/consensus/params.h",
      "position": null,
      "original_position": 17,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2cb41863abe59717a199a66030185e2d23226a23",
      "in_reply_to_id": 600170128,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It should be `int` here, fixed.\r\n\r\nFor vbparams, the string to int parser returns an int64_t, so that's what I use there.",
      "created_at": "2021-03-24T05:53:31Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600192616",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600192616"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": 29,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 37,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600194376",
      "pull_request_review_id": 619350755,
      "id": 600194376,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDE5NDM3Ng==",
      "diff_hunk": "@@ -49,20 +57,17 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;\n-                } else if (pindexPrev->GetMedianTimePast() >= nTimeStart) {\n+                if (height >= height_start) {\n                     stateNext = ThresholdState::STARTED;\n                 }\n                 break;\n             }\n             case ThresholdState::STARTED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;\n-                    break;\n-                }\n                 // We need to count\n                 const CBlockIndex* pindexCount = pindexPrev;",
      "path": "src/versionbits.cpp",
      "position": 57,
      "original_position": 57,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "4a37423700f3432b976ada6adbc19e1ce75c7d9a",
      "in_reply_to_id": null,
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "By starting here, are we then ignoring if the latest block is signaling?\r\n\r\ncontext:\r\n```\r\n// We track state by previous-block, so the height we should be comparing is +1\r\nconst int64_t height = pindexPrev->nHeight + 1;\r\n```",
      "created_at": "2021-03-24T05:58:37Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600194376",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600194376"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 72,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600194837",
      "pull_request_review_id": 619351300,
      "id": 600194837,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDE5NDgzNw==",
      "diff_hunk": "@@ -49,20 +57,17 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;\n-                } else if (pindexPrev->GetMedianTimePast() >= nTimeStart) {\n+                if (height >= height_start) {\n                     stateNext = ThresholdState::STARTED;\n                 }\n                 break;\n             }\n             case ThresholdState::STARTED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;\n-                    break;\n-                }\n                 // We need to count\n                 const CBlockIndex* pindexCount = pindexPrev;",
      "path": "src/versionbits.cpp",
      "position": 57,
      "original_position": 57,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "4a37423700f3432b976ada6adbc19e1ce75c7d9a",
      "in_reply_to_id": 600194376,
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Also for my sanity, is the reason the height check is moved from the beginning to the end of this case because we are using `pindexPrev->nHeight + 1`",
      "created_at": "2021-03-24T05:59:56Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600194837",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600194837"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 72,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600196720",
      "pull_request_review_id": 619353696,
      "id": 600196720,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDE5NjcyMA==",
      "diff_hunk": "@@ -49,20 +57,17 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;\n-                } else if (pindexPrev->GetMedianTimePast() >= nTimeStart) {\n+                if (height >= height_start) {\n                     stateNext = ThresholdState::STARTED;\n                 }\n                 break;\n             }\n             case ThresholdState::STARTED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;\n-                    break;\n-                }\n                 // We need to count\n                 const CBlockIndex* pindexCount = pindexPrev;",
      "path": "src/versionbits.cpp",
      "position": 57,
      "original_position": 57,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "4a37423700f3432b976ada6adbc19e1ce75c7d9a",
      "in_reply_to_id": 600194376,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes. Determining whether the threshold is reached is done at the beginning of each signaling period, and determines the state for the entire signaling period. This is checking for whether the threshold is reached in the previous signaling period to determine whether the current signaling period (starting at block `height`) is locked_in. The current block (at `height`) is not part of the previous signaling period, so it is not counted.",
      "created_at": "2021-03-24T06:05:56Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600196720",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600196720"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 72,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600197165",
      "pull_request_review_id": 619354216,
      "id": 600197165,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDE5NzE2NQ==",
      "diff_hunk": "@@ -49,20 +57,17 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;\n-                } else if (pindexPrev->GetMedianTimePast() >= nTimeStart) {\n+                if (height >= height_start) {\n                     stateNext = ThresholdState::STARTED;\n                 }\n                 break;\n             }\n             case ThresholdState::STARTED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;\n-                    break;\n-                }\n                 // We need to count\n                 const CBlockIndex* pindexCount = pindexPrev;",
      "path": "src/versionbits.cpp",
      "position": 57,
      "original_position": 57,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "4a37423700f3432b976ada6adbc19e1ce75c7d9a",
      "in_reply_to_id": 600194376,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Consider a block B just after a retarget period boundary, ie `B->nHeight % 2016 == 0`, and `pindexPrev = B->pprev`. `pindexPrev` was in state `STARTED`. What state should `B` be in? It depends on the signalling of the prior 2016 blocks -- so we test `pindexPrev->nVersion`, `pindexPrev->pprev->nVersion`, etc. If enough signal, we switch to `LOCKED_IN`. If they don't, we check `B->nHeight` (which is `B->prev->nHeight + 1` aka `pindexPrev->nHeight + 1`) to see if it's reached the timeout, and if so switch to `FAILED`.\r\n\r\nThe reason the height check is moved to the end is so that every retarget period that begins in `STARTED` is allowed to transition to `LOCKED_IN` -- previously, if the final period passed the timeout MTP midway through, it would be too late and would unconditionally transition to `FAILED`.",
      "created_at": "2021-03-24T06:07:11Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600197165",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600197165"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 72,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600198282",
      "pull_request_review_id": 619355466,
      "id": 600198282,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDE5ODI4Mg==",
      "diff_hunk": "@@ -49,20 +57,17 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;\n-                } else if (pindexPrev->GetMedianTimePast() >= nTimeStart) {\n+                if (height >= height_start) {\n                     stateNext = ThresholdState::STARTED;\n                 }\n                 break;\n             }\n             case ThresholdState::STARTED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;\n-                    break;\n-                }\n                 // We need to count\n                 const CBlockIndex* pindexCount = pindexPrev;",
      "path": "src/versionbits.cpp",
      "position": 57,
      "original_position": 57,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "4a37423700f3432b976ada6adbc19e1ce75c7d9a",
      "in_reply_to_id": 600194376,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Also for my sanity, is the reason the height check is moved from the beginning to the end of this case because we are using `pindexPrev->nHeight + 1`\r\n\r\nNo. The height check is moved because BIP 8 specifies that the threshold being reached takes precedence over the timeoutheight being reached. This is because determining whether the threshold is reached would be done at `timeoutheight`. So if the height check came first, the last signaling period would always fail. Instead, we want to succeed if the threshold is reached in the  last signaling period.",
      "created_at": "2021-03-24T06:10:00Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600198282",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600198282"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 72,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600435983",
      "pull_request_review_id": 619663226,
      "id": 600435983,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDQzNTk4Mw==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {",
      "path": "src/chainparams.cpp",
      "position": 116,
      "original_position": 93,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Any reason to not enforce NO_TIMEOUT here?",
      "created_at": "2021-03-24T12:35:34Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600435983",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600435983"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 490,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600440384",
      "pull_request_review_id": 619663226,
      "id": 600440384,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDQ0MDM4NA==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;",
      "path": "src/chainparams.cpp",
      "position": 106,
      "original_position": 84,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I know this is just regtest, but an integral type of size 64-bit will be truncated if assigned to an integral type of size 32-bit ",
      "created_at": "2021-03-24T12:41:47Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600440384",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600440384"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 480,
      "original_line": 480,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600441865",
      "pull_request_review_id": 619663226,
      "id": 600441865,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDQ0MTg2NQ==",
      "diff_hunk": "@@ -25,13 +25,13 @@ class TestConditionChecker : public AbstractThresholdConditionChecker\n     const Consensus::Params dummy_params{};\n \n public:\n-    const int64_t m_begin;\n-    const int64_t m_end;\n-    const int m_period;\n-    const int m_threshold;\n-    const int m_bit;\n+    const int m_begin = 0;\n+    const int m_end = 0;\n+    const int m_period = 0;\n+    const int m_threshold = 0;\n+    const int m_bit = 0;",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why is this changed?",
      "created_at": "2021-03-24T12:43:53Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600441865",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600441865"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600599585",
      "pull_request_review_id": 619881059,
      "id": 600599585,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDU5OTU4NQ==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {",
      "path": "src/chainparams.cpp",
      "position": 116,
      "original_position": 93,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": 600435983,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not well-defined, not very friendly (it's  a max int value), and ignored anyway. (third time addressing this)",
      "created_at": "2021-03-24T15:34:57Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600599585",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600599585"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 490,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600600405",
      "pull_request_review_id": 619882116,
      "id": 600600405,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDYwMDQwNQ==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;",
      "path": "src/chainparams.cpp",
      "position": 106,
      "original_position": 84,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": 600440384,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe have CheckVBitsHeights check this",
      "created_at": "2021-03-24T15:35:49Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600600405",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600600405"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 480,
      "original_line": 480,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600659716",
      "pull_request_review_id": 619959905,
      "id": 600659716,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDY1OTcxNg==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;",
      "path": "src/chainparams.cpp",
      "position": 106,
      "original_position": 84,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": 600440384,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Change these to `int` and changed the parsing to use `ParseInt32` instead. Also added a test for out of range values.",
      "created_at": "2021-03-24T16:37:06Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600659716",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600659716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 480,
      "original_line": 480,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600659966",
      "pull_request_review_id": 619960207,
      "id": 600659966,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDY1OTk2Ng==",
      "diff_hunk": "@@ -25,13 +25,13 @@ class TestConditionChecker : public AbstractThresholdConditionChecker\n     const Consensus::Params dummy_params{};\n \n public:\n-    const int64_t m_begin;\n-    const int64_t m_end;\n-    const int m_period;\n-    const int m_threshold;\n-    const int m_bit;\n+    const int m_begin = 0;\n+    const int m_end = 0;\n+    const int m_period = 0;\n+    const int m_threshold = 0;\n+    const int m_bit = 0;",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": 600441865,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Bad rebase conflict resolution, reverted.",
      "created_at": "2021-03-24T16:37:22Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600659966",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600659966"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600918273",
      "pull_request_review_id": 620285728,
      "id": 600918273,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDkxODI3Mw==",
      "diff_hunk": "@@ -116,6 +116,9 @@ class CChainParams\n     const MapAssumeutxo& Assumeutxo() const { return m_assumeutxo_data; }\n \n     const ChainTxData& TxData() const { return chainTxData; }\n+\n+    /** Check that the given heights make sense */\n+    bool CheckVBitsHeights(std::string& error, int startheight, int timeoutheight, int min_actvation_height) const;",
      "path": "src/chainparams.h",
      "position": null,
      "original_position": 6,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: `min_activation_height`",
      "created_at": "2021-03-24T22:35:12Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600918273",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600918273"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 121,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600921169",
      "pull_request_review_id": 620285728,
      "id": 600921169,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDkyMTE2OQ==",
      "diff_hunk": "@@ -25,19 +25,28 @@ enum DeploymentPos\n struct BIP9Deployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int startheight;\n+    /** Timeout/expiry block height for the deployment attempt. Must be a retarget block. */\n+    int timeoutheight;\n+    /** Threshold for activation */",
      "path": "src/consensus/params.h",
      "position": null,
      "original_position": 12,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "\"Threshold for lockin. Must be a minimum of block per retarget period\"",
      "created_at": "2021-03-24T22:41:41Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600921169",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600921169"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600931062",
      "pull_request_review_id": 620300576,
      "id": 600931062,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDkzMTA2Mg==",
      "diff_hunk": "@@ -116,6 +116,9 @@ class CChainParams\n     const MapAssumeutxo& Assumeutxo() const { return m_assumeutxo_data; }\n \n     const ChainTxData& TxData() const { return chainTxData; }\n+\n+    /** Check that the given heights make sense */\n+    bool CheckVBitsHeights(std::string& error, int startheight, int timeoutheight) const;",
      "path": "src/chainparams.h",
      "position": null,
      "original_position": 6,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "e43c8add3451ac653d306351f50b12942238938e",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Migrate versionbits to use height instead of MTP\"\r\n\r\nNit: feels a bit strange to have this in CChainParams. Maybe put it in versionbits.{h,cpp}?",
      "created_at": "2021-03-24T23:05:30Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600931062",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600931062"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 121,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600953665",
      "pull_request_review_id": 620285728,
      "id": 600953665,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk1MzY2NQ==",
      "diff_hunk": "@@ -74,12 +79,16 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n                 }\n                 if (count >= nThreshold) {\n                     stateNext = ThresholdState::LOCKED_IN;\n+                } else if (height >= height_timeout) {\n+                    stateNext = ThresholdState::FAILED;",
      "path": "src/versionbits.cpp",
      "position": 64,
      "original_position": 64,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Do you have test coverage for threshold taking precedence over reaching timeout ? This diff doesn't break `feature_bip8.py`\r\n\r\n```\r\n@@ -77,10 +78,11 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\r\n                     }\r\n                     pindexCount = pindexCount->pprev;\r\n                 }\r\n+                if (height >= height_timeout) {\r\n+                    stateNext = ThresholdState::FAILED;\r\n+                }\r\n                 if (count >= nThreshold) {\r\n                     stateNext = ThresholdState::LOCKED_IN;\r\n-                } else if (height >= height_timeout) {\r\n-                    stateNext = ThresholdState::FAILED;\r\n                 }\r\n                 break;\r\n             }\r\n```",
      "created_at": "2021-03-25T00:06:06Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600953665",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600953665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 83,
      "original_line": 83,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600956176",
      "pull_request_review_id": 620285728,
      "id": 600956176,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk1NjE3Ng==",
      "diff_hunk": "@@ -24,10 +24,10 @@ static const int32_t VERSIONBITS_NUM_BITS = 29;\n  */\n enum class ThresholdState {\n     DEFINED,   // First state that each softfork starts out as. The genesis block is by definition in this state for each deployment.\n-    STARTED,   // For blocks past the starttime.\n+    STARTED,   // For blocks past the startheight.\n     LOCKED_IN, // For one retarget period after the first retarget period with STARTED blocks of which at least threshold have the associated bit set in nVersion.\n     ACTIVE,    // For all blocks after the LOCKED_IN retarget period (final state)",
      "path": "src/versionbits.h",
      "position": null,
      "original_position": 7,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you should document \"For all blocks after the LOCKED_IN retarget period, if min activation height has been reached\" ?",
      "created_at": "2021-03-25T00:13:19Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600956176",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600956176"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600958804",
      "pull_request_review_id": 620285728,
      "id": 600958804,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk1ODgwNA==",
      "diff_hunk": "@@ -1296,24 +1295,24 @@ RPCHelpMan getblockchaininfo()\n                         {\n                             {RPCResult::Type::OBJ, \"xxxx\", \"name of the softfork\",\n                             {\n-                                {RPCResult::Type::STR, \"type\", \"one of \\\"buried\\\", \\\"bip9\\\"\"},\n-                                {RPCResult::Type::OBJ, \"bip9\", \"status of bip9 softforks (only for \\\"bip9\\\" type)\",\n+                                {RPCResult::Type::STR, \"type\", \"one of \\\"buried\\\", \\\"bip8\\\"\"},\n+                                {RPCResult::Type::OBJ, \"bip8\", \"status of BIP 8 softforks (only for \\\"bip8\\\" type)\",\n                                 {\n                                     {RPCResult::Type::STR, \"status\", \"one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\"},\n                                     {RPCResult::Type::NUM, \"bit\", \"the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\"},\n-                                    {RPCResult::Type::NUM_TIME, \"start_time\", \"the minimum median time past of a block at which the bit gains its meaning\"},\n-                                    {RPCResult::Type::NUM_TIME, \"timeout\", \"the median time past of a block at which the deployment is considered failed if not yet locked in\"},\n+                                    {RPCResult::Type::NUM, \"startheight\", \"the minimum height of a block at which the bit gains its meaning\"},\n+                                    {RPCResult::Type::NUM, \"timeoutheight\", \"the height of a block at which the deployment is considered failed if not yet locked in\"},",
      "path": "src/rpc/blockchain.cpp",
      "position": 50,
      "original_position": 49,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe display \"min_activation_height\" if relevant (!= 0) ?",
      "created_at": "2021-03-25T00:20:58Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600958804",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600958804"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1305,
      "original_line": 1305,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600959256",
      "pull_request_review_id": 620300576,
      "id": 600959256,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk1OTI1Ng==",
      "diff_hunk": "@@ -281,47 +260,46 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n         break;\n     case ThresholdState::STARTED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(height >= checker.m_begin);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": 173,
      "original_position": 167,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "e43c8add3451ac653d306351f50b12942238938e",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Migrate versionbits to use height instead of MTP\":\r\n\r\nYou could incorporate the later `if (never_active_test) assert(state == ThresholdState::DEFINED);` here as `assert(!never_active_test);`.\r\n\r\n(I found this by drawing the finite state machine based on these tests, and noticed this line was missing before noticing it's done explicitly later)",
      "created_at": "2021-03-25T00:22:34Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600959256",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600959256"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600959896",
      "pull_request_review_id": 620285728,
      "id": 600959896,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk1OTg5Ng==",
      "diff_hunk": "@@ -466,14 +474,60 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int startheight, int timeoutheight, int min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int startheight, int timeoutheight, int min_activation_height) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+\n+    // Actual params must be on retarget block\n+    if (startheight < 0) {\n+        error = strprintf(\"Invalid startheight (%d), cannot be negative (except for never or always active special cases)\", startheight);\n+        return false;\n+    }\n+    if (timeoutheight < 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), cannot be negative (except for never or always active special cases)\", timeoutheight);\n+        return false;\n+    }\n+    if (startheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid startheight (%d), must be a multiple of %d\", startheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight != Consensus::BIP9Deployment::NO_TIMEOUT && timeoutheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be a multiple of %d\", timeoutheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (min_activation_height < 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), cannot be negative\", min_activation_height);\n+        return false;\n+    }\n+    if (min_activation_height % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), must be a multiple of %d\", min_activation_height, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight < startheight + (int)consensus.nMinerConfirmationWindow) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be at least one period greater than the startheight (%d)\", timeoutheight, startheight);",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 151,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "According to BIP 8, \"timeoutheight must be at least 4096 blocks (2 retarget intervals) after startheight\" ?",
      "created_at": "2021-03-25T00:24:49Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600959896",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600959896"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 525,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600959952",
      "pull_request_review_id": 620300576,
      "id": 600959952,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk1OTk1Mg==",
      "diff_hunk": "@@ -281,47 +260,46 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n         break;\n     case ThresholdState::STARTED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(height >= checker.m_begin);\n         if (exp_state == ThresholdState::STARTED) {\n+            assert(height < checker.m_end);\n             assert(blocks_sig < threshold);\n         } else {\n             assert(exp_state == ThresholdState::DEFINED);\n         }\n         break;\n     case ThresholdState::LOCKED_IN:\n         assert(exp_state == ThresholdState::STARTED);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n         assert(blocks_sig >= threshold);\n         break;\n     case ThresholdState::ACTIVE:\n         assert(exp_state == ThresholdState::ACTIVE || exp_state == ThresholdState::LOCKED_IN);\n         break;\n     case ThresholdState::FAILED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_end);\n-        assert(exp_state != ThresholdState::LOCKED_IN && exp_state != ThresholdState::ACTIVE);\n+        assert(height >= checker.m_begin);\n+        assert(height >= checker.m_end);\n+        assert(exp_state == ThresholdState::FAILED || exp_state == ThresholdState::STARTED);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 188,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "e43c8add3451ac653d306351f50b12942238938e",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Migrate versionbits to use height instead of MTP\":\r\n\r\nI believe you should do `assert(exp_state == ThresholdState::FAILED || (exp_state == ThresholdState::STARTED && blocks_sig < threshold));` here instead. As stated, nothing prevents the FSM implementation from going from STARTED->FAILED when the threshold is reached in the last period.",
      "created_at": "2021-03-25T00:25:02Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600959952",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600959952"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 296,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600960472",
      "pull_request_review_id": 620285728,
      "id": 600960472,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk2MDQ3Mg==",
      "diff_hunk": "@@ -466,14 +474,60 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int startheight, int timeoutheight, int min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int startheight, int timeoutheight, int min_activation_height) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+\n+    // Actual params must be on retarget block\n+    if (startheight < 0) {\n+        error = strprintf(\"Invalid startheight (%d), cannot be negative (except for never or always active special cases)\", startheight);\n+        return false;\n+    }\n+    if (timeoutheight < 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), cannot be negative (except for never or always active special cases)\", timeoutheight);\n+        return false;\n+    }\n+    if (startheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid startheight (%d), must be a multiple of %d\", startheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight != Consensus::BIP9Deployment::NO_TIMEOUT && timeoutheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be a multiple of %d\", timeoutheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (min_activation_height < 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), cannot be negative\", min_activation_height);\n+        return false;\n+    }\n+    if (min_activation_height % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), must be a multiple of %d\", min_activation_height, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight < startheight + (int)consensus.nMinerConfirmationWindow) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be at least one period greater than the startheight (%d)\", timeoutheight, startheight);\n+        return false;\n+    }",
      "path": "src/chainparams.cpp",
      "position": 153,
      "original_position": 153,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think BIP 8 implies that if min_activation_height is set, it must be superior to start_height. Though not explicit \"minimum_activation_height should be set to several retarget periods in the future if the startheight is to be very soon after software with parameters is expected to be released.\"",
      "created_at": "2021-03-25T00:26:29Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600960472",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600960472"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 527,
      "original_line": 527,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600966055",
      "pull_request_review_id": 620338978,
      "id": 600966055,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk2NjA1NQ==",
      "diff_hunk": "@@ -466,14 +474,60 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int startheight, int timeoutheight, int min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int startheight, int timeoutheight, int min_activation_height) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+\n+    // Actual params must be on retarget block\n+    if (startheight < 0) {\n+        error = strprintf(\"Invalid startheight (%d), cannot be negative (except for never or always active special cases)\", startheight);\n+        return false;\n+    }\n+    if (timeoutheight < 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), cannot be negative (except for never or always active special cases)\", timeoutheight);\n+        return false;\n+    }\n+    if (startheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid startheight (%d), must be a multiple of %d\", startheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight != Consensus::BIP9Deployment::NO_TIMEOUT && timeoutheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be a multiple of %d\", timeoutheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (min_activation_height < 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), cannot be negative\", min_activation_height);\n+        return false;\n+    }\n+    if (min_activation_height % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), must be a multiple of %d\", min_activation_height, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight < startheight + (int)consensus.nMinerConfirmationWindow) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be at least one period greater than the startheight (%d)\", timeoutheight, startheight);\n+        return false;\n+    }",
      "path": "src/chainparams.cpp",
      "position": 153,
      "original_position": 153,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": 600960472,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The minimum activation height can be any value, it does not need to be greater than the start_height. If it is less than or equal to the start height, it just means that the locked_in period does not become extended. We use `0` to mean \"no minimum activation height\", but any height less than or equal to the start_height achieves the same effect, and in fact, all are handled the same way.",
      "created_at": "2021-03-25T00:43:52Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600966055",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600966055"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 527,
      "original_line": 527,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600981350",
      "pull_request_review_id": 620363077,
      "id": 600981350,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk4MTM1MA==",
      "diff_hunk": "@@ -116,6 +116,9 @@ class CChainParams\n     const MapAssumeutxo& Assumeutxo() const { return m_assumeutxo_data; }\n \n     const ChainTxData& TxData() const { return chainTxData; }\n+\n+    /** Check that the given heights make sense */\n+    bool CheckVBitsHeights(std::string& error, int startheight, int timeoutheight, int min_actvation_height) const;",
      "path": "src/chainparams.h",
      "position": null,
      "original_position": 6,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": 600918273,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed",
      "created_at": "2021-03-25T01:32:50Z",
      "updated_at": "2021-03-25T01:32:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600981350",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600981350"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 121,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600981393",
      "pull_request_review_id": 620363265,
      "id": 600981393,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk4MTM5Mw==",
      "diff_hunk": "@@ -25,19 +25,28 @@ enum DeploymentPos\n struct BIP9Deployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int startheight;\n+    /** Timeout/expiry block height for the deployment attempt. Must be a retarget block. */\n+    int timeoutheight;\n+    /** Threshold for activation */",
      "path": "src/consensus/params.h",
      "position": null,
      "original_position": 12,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": 600921169,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Expanded this comment.",
      "created_at": "2021-03-25T01:32:58Z",
      "updated_at": "2021-03-25T01:32:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600981393",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600981393"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600981966",
      "pull_request_review_id": 620366344,
      "id": 600981966,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk4MTk2Ng==",
      "diff_hunk": "@@ -74,12 +79,16 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n                 }\n                 if (count >= nThreshold) {\n                     stateNext = ThresholdState::LOCKED_IN;\n+                } else if (height >= height_timeout) {\n+                    stateNext = ThresholdState::FAILED;",
      "path": "src/versionbits.cpp",
      "position": 64,
      "original_position": 64,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": 600953665,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "A unit test fails, although not because it explicitly tests this behavior. I've added such a test to feature_bip8.py.\r\n\r\nHowever this particular diff wouldn't fail because it still moves to `LOCKED_IN` when the threshold is reached. You need to use `else if` in order for the `height >= height_timeout` check to take precedence.",
      "created_at": "2021-03-25T01:34:55Z",
      "updated_at": "2021-03-25T01:34:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600981966",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600981966"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 83,
      "original_line": 83,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600981999",
      "pull_request_review_id": 620366588,
      "id": 600981999,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk4MTk5OQ==",
      "diff_hunk": "@@ -24,10 +24,10 @@ static const int32_t VERSIONBITS_NUM_BITS = 29;\n  */\n enum class ThresholdState {\n     DEFINED,   // First state that each softfork starts out as. The genesis block is by definition in this state for each deployment.\n-    STARTED,   // For blocks past the starttime.\n+    STARTED,   // For blocks past the startheight.\n     LOCKED_IN, // For one retarget period after the first retarget period with STARTED blocks of which at least threshold have the associated bit set in nVersion.\n     ACTIVE,    // For all blocks after the LOCKED_IN retarget period (final state)",
      "path": "src/versionbits.h",
      "position": null,
      "original_position": 7,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": 600956176,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-25T01:35:04Z",
      "updated_at": "2021-03-25T01:35:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600981999",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600981999"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600982186",
      "pull_request_review_id": 620367192,
      "id": 600982186,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk4MjE4Ng==",
      "diff_hunk": "@@ -1296,24 +1295,24 @@ RPCHelpMan getblockchaininfo()\n                         {\n                             {RPCResult::Type::OBJ, \"xxxx\", \"name of the softfork\",\n                             {\n-                                {RPCResult::Type::STR, \"type\", \"one of \\\"buried\\\", \\\"bip9\\\"\"},\n-                                {RPCResult::Type::OBJ, \"bip9\", \"status of bip9 softforks (only for \\\"bip9\\\" type)\",\n+                                {RPCResult::Type::STR, \"type\", \"one of \\\"buried\\\", \\\"bip8\\\"\"},\n+                                {RPCResult::Type::OBJ, \"bip8\", \"status of BIP 8 softforks (only for \\\"bip8\\\" type)\",\n                                 {\n                                     {RPCResult::Type::STR, \"status\", \"one of \\\"defined\\\", \\\"started\\\", \\\"locked_in\\\", \\\"active\\\", \\\"failed\\\"\"},\n                                     {RPCResult::Type::NUM, \"bit\", \"the bit (0-28) in the block version field used to signal this softfork (only for \\\"started\\\" status)\"},\n-                                    {RPCResult::Type::NUM_TIME, \"start_time\", \"the minimum median time past of a block at which the bit gains its meaning\"},\n-                                    {RPCResult::Type::NUM_TIME, \"timeout\", \"the median time past of a block at which the deployment is considered failed if not yet locked in\"},\n+                                    {RPCResult::Type::NUM, \"startheight\", \"the minimum height of a block at which the bit gains its meaning\"},\n+                                    {RPCResult::Type::NUM, \"timeoutheight\", \"the height of a block at which the deployment is considered failed if not yet locked in\"},",
      "path": "src/rpc/blockchain.cpp",
      "position": 50,
      "original_position": 49,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": 600958804,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Changed to output it always.",
      "created_at": "2021-03-25T01:35:28Z",
      "updated_at": "2021-03-25T01:35:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600982186",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600982186"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1305,
      "original_line": 1305,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600982212",
      "pull_request_review_id": 620367404,
      "id": 600982212,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk4MjIxMg==",
      "diff_hunk": "@@ -466,14 +474,60 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int startheight, int timeoutheight, int min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int startheight, int timeoutheight, int min_activation_height) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+\n+    // Actual params must be on retarget block\n+    if (startheight < 0) {\n+        error = strprintf(\"Invalid startheight (%d), cannot be negative (except for never or always active special cases)\", startheight);\n+        return false;\n+    }\n+    if (timeoutheight < 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), cannot be negative (except for never or always active special cases)\", timeoutheight);\n+        return false;\n+    }\n+    if (startheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid startheight (%d), must be a multiple of %d\", startheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight != Consensus::BIP9Deployment::NO_TIMEOUT && timeoutheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be a multiple of %d\", timeoutheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (min_activation_height < 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), cannot be negative\", min_activation_height);\n+        return false;\n+    }\n+    if (min_activation_height % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), must be a multiple of %d\", min_activation_height, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight < startheight + (int)consensus.nMinerConfirmationWindow) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be at least one period greater than the startheight (%d)\", timeoutheight, startheight);",
      "path": "src/chainparams.cpp",
      "position": null,
      "original_position": 151,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "dd363edd6578a782fcbddbcc57e1446ed7af4f36",
      "in_reply_to_id": 600959896,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2021-03-25T01:35:37Z",
      "updated_at": "2021-03-25T01:35:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600982212",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600982212"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 525,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600982551",
      "pull_request_review_id": 620369073,
      "id": 600982551,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk4MjU1MQ==",
      "diff_hunk": "@@ -116,6 +116,9 @@ class CChainParams\n     const MapAssumeutxo& Assumeutxo() const { return m_assumeutxo_data; }\n \n     const ChainTxData& TxData() const { return chainTxData; }\n+\n+    /** Check that the given heights make sense */\n+    bool CheckVBitsHeights(std::string& error, int startheight, int timeoutheight) const;",
      "path": "src/chainparams.h",
      "position": null,
      "original_position": 6,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "e43c8add3451ac653d306351f50b12942238938e",
      "in_reply_to_id": 600931062,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Moving it to `versionbits.{h,cpp}` requires adding `versionbits.cpp` to `libbitcoin_common` and this introduces a bunch of other build system issues that I don't want to figure out. I've moved the function out of `CChainParams` though so that it could be moved elsewhere in the future as a move-only.",
      "created_at": "2021-03-25T01:36:44Z",
      "updated_at": "2021-03-25T01:36:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600982551",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600982551"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 121,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600982730",
      "pull_request_review_id": 620369927,
      "id": 600982730,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk4MjczMA==",
      "diff_hunk": "@@ -281,47 +260,46 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n         break;\n     case ThresholdState::STARTED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(height >= checker.m_begin);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": 173,
      "original_position": 167,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "e43c8add3451ac653d306351f50b12942238938e",
      "in_reply_to_id": 600959256,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added the new assert, but I did not remove the later assert as it seems like it is still useful to have that there.",
      "created_at": "2021-03-25T01:37:20Z",
      "updated_at": "2021-03-25T01:37:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600982730",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600982730"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600982858",
      "pull_request_review_id": 620370410,
      "id": 600982858,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDk4Mjg1OA==",
      "diff_hunk": "@@ -281,47 +260,46 @@ FUZZ_TARGET_INIT(versionbits, initialize)\n \n     // since is straightforward:\n     assert(since % period == 0);\n-    assert(0 <= since && since <= current_block->nHeight + 1);\n+    assert(0 <= since && since <= height);\n     if (state == exp_state) {\n         assert(since == exp_since);\n     } else {\n-        assert(since == current_block->nHeight + 1);\n+        assert(since == height);\n     }\n \n     // state is where everything interesting is\n     switch (state) {\n     case ThresholdState::DEFINED:\n         assert(since == 0);\n         assert(exp_state == ThresholdState::DEFINED);\n-        assert(current_block->GetMedianTimePast() < checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(never_active_test || height < checker.m_begin);\n         break;\n     case ThresholdState::STARTED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_begin);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n+        assert(height >= checker.m_begin);\n         if (exp_state == ThresholdState::STARTED) {\n+            assert(height < checker.m_end);\n             assert(blocks_sig < threshold);\n         } else {\n             assert(exp_state == ThresholdState::DEFINED);\n         }\n         break;\n     case ThresholdState::LOCKED_IN:\n         assert(exp_state == ThresholdState::STARTED);\n-        assert(current_block->GetMedianTimePast() < checker.m_end);\n         assert(blocks_sig >= threshold);\n         break;\n     case ThresholdState::ACTIVE:\n         assert(exp_state == ThresholdState::ACTIVE || exp_state == ThresholdState::LOCKED_IN);\n         break;\n     case ThresholdState::FAILED:\n-        assert(current_block->GetMedianTimePast() >= checker.m_end);\n-        assert(exp_state != ThresholdState::LOCKED_IN && exp_state != ThresholdState::ACTIVE);\n+        assert(height >= checker.m_begin);\n+        assert(height >= checker.m_end);\n+        assert(exp_state == ThresholdState::FAILED || exp_state == ThresholdState::STARTED);",
      "path": "src/test/fuzz/versionbits.cpp",
      "position": null,
      "original_position": 188,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "e43c8add3451ac653d306351f50b12942238938e",
      "in_reply_to_id": 600959952,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-03-25T01:37:37Z",
      "updated_at": "2021-03-25T01:37:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r600982858",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600982858"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 296,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601787443",
      "pull_request_review_id": 621511609,
      "id": 601787443,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTc4NzQ0Mw==",
      "diff_hunk": "@@ -466,14 +474,60 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int startheight, int timeoutheight, int min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CheckVBitsHeights(std::string& error, const Consensus::Params& consensus, int startheight, int timeoutheight, int min_activation_height)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+\n+    // Actual params must be on retarget block\n+    if (startheight < 0) {\n+        error = strprintf(\"Invalid startheight (%d), cannot be negative (except for never or always active special cases)\", startheight);\n+        return false;\n+    }\n+    if (timeoutheight < 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), cannot be negative (except for never or always active special cases)\", timeoutheight);\n+        return false;\n+    }\n+    if (startheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid startheight (%d), must be a multiple of %d\", startheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight != Consensus::BIP9Deployment::NO_TIMEOUT && timeoutheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be a multiple of %d\", timeoutheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (min_activation_height < 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), cannot be negative\", min_activation_height);\n+        return false;\n+    }\n+    if (min_activation_height % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), must be a multiple of %d\", min_activation_height, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight < startheight + (2 * (int)consensus.nMinerConfirmationWindow)) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be at least two periods greater than the startheight (%d)\", timeoutheight, startheight);",
      "path": "src/chainparams.cpp",
      "position": 151,
      "original_position": 151,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why? Just one period should be enough...",
      "created_at": "2021-03-25T19:37:55Z",
      "updated_at": "2021-03-25T22:42:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r601787443",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601787443"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 525,
      "original_line": 525,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601844921",
      "pull_request_review_id": 621586250,
      "id": 601844921,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTg0NDkyMQ==",
      "diff_hunk": "@@ -25,19 +25,28 @@ enum DeploymentPos\n struct BIP9Deployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int startheight;\n+    /** Timeout/expiry block height for the deployment attempt. Must be a retarget block. */\n+    int timeoutheight;\n+    /** Threshold for lockin. Must be at least nRuleChangeActivationThreshold for that network. */",
      "path": "src/consensus/params.h",
      "position": 12,
      "original_position": 12,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think this variable name changed.",
      "created_at": "2021-03-25T21:16:16Z",
      "updated_at": "2021-03-25T21:16:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r601844921",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601844921"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601850371",
      "pull_request_review_id": 621593202,
      "id": 601850371,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTg1MDM3MQ==",
      "diff_hunk": "@@ -25,19 +25,28 @@ enum DeploymentPos\n struct BIP9Deployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int startheight;\n+    /** Timeout/expiry block height for the deployment attempt. Must be a retarget block. */\n+    int timeoutheight;\n+    /** Threshold for lockin. Must be at least nRuleChangeActivationThreshold for that network. */",
      "path": "src/consensus/params.h",
      "position": 12,
      "original_position": 12,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 601844921,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Will fix if I retouch.",
      "created_at": "2021-03-25T21:26:25Z",
      "updated_at": "2021-03-25T21:26:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r601850371",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601850371"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601882419",
      "pull_request_review_id": 621511609,
      "id": 601882419,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTg4MjQxOQ==",
      "diff_hunk": "@@ -1243,8 +1242,9 @@ static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &nam\n     {\n         bip9.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n     }\n-    bip9.pushKV(\"start_time\", consensusParams.vDeployments[id].nStartTime);\n-    bip9.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n+    bip9.pushKV(\"startheight\", consensusParams.vDeployments[id].startheight);\n+    bip9.pushKV(\"timeoutheight\", consensusParams.vDeployments[id].timeoutheight);\n+    bip9.pushKV(\"minimum_activation_height\", consensusParams.vDeployments[id].m_min_activation_height);",
      "path": "src/rpc/blockchain.cpp",
      "position": 21,
      "original_position": 21,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Probably should either hide this when 0, or use starttime+2*period",
      "created_at": "2021-03-25T22:35:32Z",
      "updated_at": "2021-03-25T22:42:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r601882419",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601882419"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1247,
      "original_line": 1247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601888435",
      "pull_request_review_id": 621640065,
      "id": 601888435,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTg4ODQzNQ==",
      "diff_hunk": "@@ -466,14 +474,60 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int startheight, int timeoutheight, int min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CheckVBitsHeights(std::string& error, const Consensus::Params& consensus, int startheight, int timeoutheight, int min_activation_height)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+\n+    // Actual params must be on retarget block\n+    if (startheight < 0) {\n+        error = strprintf(\"Invalid startheight (%d), cannot be negative (except for never or always active special cases)\", startheight);\n+        return false;\n+    }\n+    if (timeoutheight < 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), cannot be negative (except for never or always active special cases)\", timeoutheight);\n+        return false;\n+    }\n+    if (startheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid startheight (%d), must be a multiple of %d\", startheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight != Consensus::BIP9Deployment::NO_TIMEOUT && timeoutheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be a multiple of %d\", timeoutheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (min_activation_height < 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), cannot be negative\", min_activation_height);\n+        return false;\n+    }\n+    if (min_activation_height % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), must be a multiple of %d\", min_activation_height, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight < startheight + (2 * (int)consensus.nMinerConfirmationWindow)) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be at least two periods greater than the startheight (%d)\", timeoutheight, startheight);",
      "path": "src/chainparams.cpp",
      "position": 151,
      "original_position": 151,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 601787443,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Enforces this sentence in BIP 8:\r\n\r\n> timeoutheight must be at least 4096 blocks (2 retarget intervals) after startheight. ",
      "created_at": "2021-03-25T22:50:11Z",
      "updated_at": "2021-03-25T22:50:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r601888435",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601888435"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 525,
      "original_line": 525,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601888570",
      "pull_request_review_id": 621640212,
      "id": 601888570,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTg4ODU3MA==",
      "diff_hunk": "@@ -1243,8 +1242,9 @@ static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &nam\n     {\n         bip9.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n     }\n-    bip9.pushKV(\"start_time\", consensusParams.vDeployments[id].nStartTime);\n-    bip9.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n+    bip9.pushKV(\"startheight\", consensusParams.vDeployments[id].startheight);\n+    bip9.pushKV(\"timeoutheight\", consensusParams.vDeployments[id].timeoutheight);\n+    bip9.pushKV(\"minimum_activation_height\", consensusParams.vDeployments[id].m_min_activation_height);",
      "path": "src/rpc/blockchain.cpp",
      "position": 21,
      "original_position": 21,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 601882419,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it's fine to always display.",
      "created_at": "2021-03-25T22:50:29Z",
      "updated_at": "2021-03-25T22:50:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r601888570",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601888570"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1247,
      "original_line": 1247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601913537",
      "pull_request_review_id": 621668975,
      "id": 601913537,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTkxMzUzNw==",
      "diff_hunk": "@@ -466,14 +474,60 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int startheight, int timeoutheight, int min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CheckVBitsHeights(std::string& error, const Consensus::Params& consensus, int startheight, int timeoutheight, int min_activation_height)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+\n+    // Actual params must be on retarget block\n+    if (startheight < 0) {\n+        error = strprintf(\"Invalid startheight (%d), cannot be negative (except for never or always active special cases)\", startheight);\n+        return false;\n+    }\n+    if (timeoutheight < 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), cannot be negative (except for never or always active special cases)\", timeoutheight);\n+        return false;\n+    }\n+    if (startheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid startheight (%d), must be a multiple of %d\", startheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight != Consensus::BIP9Deployment::NO_TIMEOUT && timeoutheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be a multiple of %d\", timeoutheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (min_activation_height < 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), cannot be negative\", min_activation_height);\n+        return false;\n+    }\n+    if (min_activation_height % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), must be a multiple of %d\", min_activation_height, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight < startheight + (2 * (int)consensus.nMinerConfirmationWindow)) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be at least two periods greater than the startheight (%d)\", timeoutheight, startheight);",
      "path": "src/chainparams.cpp",
      "position": 151,
      "original_position": 151,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 601787443,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That's needed for lot=true/MUST_SIGNAL to work consistently with lot=false. Could also be solved by adding a transition directly from DEFINED to MUST_SIGNAL (skipping STARTED) I think.",
      "created_at": "2021-03-26T00:00:54Z",
      "updated_at": "2021-03-26T00:00:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r601913537",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601913537"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 525,
      "original_line": 525,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601986590",
      "pull_request_review_id": 621751220,
      "id": 601986590,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTk4NjU5MA==",
      "diff_hunk": "@@ -466,14 +474,60 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int startheight, int timeoutheight, int min_activation_height)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n+        consensus.vDeployments[d].m_min_activation_height = min_activation_height;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CheckVBitsHeights(std::string& error, const Consensus::Params& consensus, int startheight, int timeoutheight, int min_activation_height)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+\n+    // Actual params must be on retarget block\n+    if (startheight < 0) {\n+        error = strprintf(\"Invalid startheight (%d), cannot be negative (except for never or always active special cases)\", startheight);\n+        return false;\n+    }\n+    if (timeoutheight < 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), cannot be negative (except for never or always active special cases)\", timeoutheight);\n+        return false;\n+    }\n+    if (startheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid startheight (%d), must be a multiple of %d\", startheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight != Consensus::BIP9Deployment::NO_TIMEOUT && timeoutheight % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be a multiple of %d\", timeoutheight, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (min_activation_height < 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), cannot be negative\", min_activation_height);\n+        return false;\n+    }\n+    if (min_activation_height % consensus.nMinerConfirmationWindow != 0) {\n+        error = strprintf(\"Invalid minimum activation height (%d), must be a multiple of %d\", min_activation_height, consensus.nMinerConfirmationWindow);\n+        return false;\n+    }\n+    if (timeoutheight < startheight + (2 * (int)consensus.nMinerConfirmationWindow)) {\n+        error = strprintf(\"Invalid timeoutheight (%d), must be at least two periods greater than the startheight (%d)\", timeoutheight, startheight);",
      "path": "src/chainparams.cpp",
      "position": 151,
      "original_position": 151,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 601787443,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nah, probably not worth changing. One period is probably crazy anyway. And if we ever do need it, we can add the extra logic for it at that time.",
      "created_at": "2021-03-26T03:05:29Z",
      "updated_at": "2021-03-26T03:05:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r601986590",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601986590"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 525,
      "original_line": 525,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602103259",
      "pull_request_review_id": 621891984,
      "id": 602103259,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjEwMzI1OQ==",
      "diff_hunk": "@@ -263,105 +241,72 @@ BOOST_AUTO_TEST_CASE(versionbits_params)\n BOOST_AUTO_TEST_CASE(versionbits_computeblockversion)\n {\n     // Check that ComputeBlockVersion will set the appropriate bit correctly\n-    // on mainnet.\n-    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::MAIN);\n-    const Consensus::Params &mainnetParams = chainParams->GetConsensus();\n+    const auto period = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST)->GetConsensus().nMinerConfirmationWindow;\n+    gArgs.ForceSetArg(\"-vbparams\", strprintf(\"testdummy:@%s:@%s\", period, period * 3));\n+    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST);",
      "path": "src/test/versionbits_tests.cpp",
      "position": 283,
      "original_position": 154,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c95287e378a4a4a79b9632d7647015e96dc3a21c",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Any reason to use gArgs in the previous line, then m_node.args here? Might be better to just use a local symbol to avoid potentially polluting other tests",
      "created_at": "2021-03-26T08:41:35Z",
      "updated_at": "2021-03-26T10:43:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602103259",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602103259"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602103976",
      "pull_request_review_id": 621891984,
      "id": 602103976,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjEwMzk3Ng==",
      "diff_hunk": "@@ -284,100 +259,67 @@ BOOST_AUTO_TEST_CASE(versionbits_params)\n BOOST_AUTO_TEST_CASE(versionbits_computeblockversion)\n {\n     // Check that ComputeBlockVersion will set the appropriate bit correctly\n-    // on mainnet.\n-    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::MAIN);\n+    const auto period = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST)->GetConsensus().nMinerConfirmationWindow;\n+    gArgs.ForceSetArg(\"-vbparams\", strprintf(\"testdummy:@%s:@%s\", period, period * 2));\n+    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST);",
      "path": "src/test/versionbits_tests.cpp",
      "position": 283,
      "original_position": 147,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "d4c40a52cdc0e07647b6543427e621585028fcdd",
      "in_reply_to_id": 591529768,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`ForceSetArg` isn't possible on mainnet? (This discussion thread can be closed?)",
      "created_at": "2021-03-26T08:42:48Z",
      "updated_at": "2021-03-26T10:43:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602103976",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602103976"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602104995",
      "pull_request_review_id": 621891984,
      "id": 602104995,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjEwNDk5NQ==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int startheight, int timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CheckVBitsHeights(std::string& error, const Consensus::Params& consensus, int startheight, int timeoutheight)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+\n+    // Actual params must be on retarget block\n+    if (startheight < 0) {",
      "path": "src/chainparams.cpp",
      "position": 126,
      "original_position": 103,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c95287e378a4a4a79b9632d7647015e96dc3a21c",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Any reason to not enforce `startheight >= nMinerConfirmationWindow`? Otherwise it is possible to violate the \"2 period rule\" by setting `@0:@288`.",
      "created_at": "2021-03-26T08:44:37Z",
      "updated_at": "2021-03-26T10:43:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602104995",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602104995"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 500,
      "original_line": 499,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602109184",
      "pull_request_review_id": 621891984,
      "id": 602109184,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjEwOTE4NA==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {",
      "path": "src/chainparams.cpp",
      "position": 116,
      "original_position": 93,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": 600435983,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Then it could be ignored for NEVER as well or what is the reason to treat ALWAYS different from NEVER?",
      "created_at": "2021-03-26T08:51:28Z",
      "updated_at": "2021-03-26T10:43:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602109184",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602109184"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 490,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602115708",
      "pull_request_review_id": 621891984,
      "id": 602115708,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjExNTcwOA==",
      "diff_hunk": "@@ -49,20 +56,17 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;",
      "path": "src/versionbits.cpp",
      "position": 44,
      "original_position": 43,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c95287e378a4a4a79b9632d7647015e96dc3a21c",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Any reason to not assert this transition can't happen?",
      "created_at": "2021-03-26T09:01:53Z",
      "updated_at": "2021-03-26T10:43:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602115708",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602115708"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 55,
      "original_line": 55,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602434108",
      "pull_request_review_id": 622334185,
      "id": 602434108,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjQzNDEwOA==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {",
      "path": "src/chainparams.cpp",
      "position": 116,
      "original_position": 93,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": 600435983,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In `GetStateFor`, we are checking that both `startheight` and `timeoutheight` are `NEVER_ACTIVE` in order to return the correct state for never active. It only checks `startheight` is `ALWAYS_ACTIVE` when determining always active. This behavior came from #19573 and I didn't change it. Perhaps @luke-jr or @ajtowns could explain why that is.",
      "created_at": "2021-03-26T16:32:05Z",
      "updated_at": "2021-03-26T16:32:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602434108",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602434108"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 490,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602434973",
      "pull_request_review_id": 622335433,
      "id": 602434973,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjQzNDk3Mw==",
      "diff_hunk": "@@ -49,20 +56,17 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;",
      "path": "src/versionbits.cpp",
      "position": 44,
      "original_position": 43,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c95287e378a4a4a79b9632d7647015e96dc3a21c",
      "in_reply_to_id": 602115708,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think that's being checked by the test cases.",
      "created_at": "2021-03-26T16:33:24Z",
      "updated_at": "2021-03-26T16:33:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602434973",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602434973"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 55,
      "original_line": 55,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602435063",
      "pull_request_review_id": 622335574,
      "id": 602435063,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjQzNTA2Mw==",
      "diff_hunk": "@@ -263,105 +241,72 @@ BOOST_AUTO_TEST_CASE(versionbits_params)\n BOOST_AUTO_TEST_CASE(versionbits_computeblockversion)\n {\n     // Check that ComputeBlockVersion will set the appropriate bit correctly\n-    // on mainnet.\n-    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::MAIN);\n-    const Consensus::Params &mainnetParams = chainParams->GetConsensus();\n+    const auto period = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST)->GetConsensus().nMinerConfirmationWindow;\n+    gArgs.ForceSetArg(\"-vbparams\", strprintf(\"testdummy:@%s:@%s\", period, period * 3));\n+    const auto chainParams = CreateChainParams(*m_node.args, CBaseChainParams::REGTEST);",
      "path": "src/test/versionbits_tests.cpp",
      "position": 283,
      "original_position": 154,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c95287e378a4a4a79b9632d7647015e96dc3a21c",
      "in_reply_to_id": 602103259,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If I need to retouch",
      "created_at": "2021-03-26T16:33:33Z",
      "updated_at": "2021-03-26T16:33:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602435063",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602435063"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 282,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602435134",
      "pull_request_review_id": 622335617,
      "id": 602435134,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjQzNTEzNA==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int startheight, int timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CheckVBitsHeights(std::string& error, const Consensus::Params& consensus, int startheight, int timeoutheight)\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {\n+        return true;\n+    }\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight != Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || (startheight != Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)) {\n+        error = strprintf(\"When one of startheight or timeoutheight is %d, both must be %d\", Consensus::BIP9Deployment::NEVER_ACTIVE, Consensus::BIP9Deployment::NEVER_ACTIVE);\n+        return false;\n+    }\n+\n+    // Actual params must be on retarget block\n+    if (startheight < 0) {",
      "path": "src/chainparams.cpp",
      "position": 126,
      "original_position": 103,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c95287e378a4a4a79b9632d7647015e96dc3a21c",
      "in_reply_to_id": 602104995,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If I need to retouch",
      "created_at": "2021-03-26T16:33:37Z",
      "updated_at": "2021-03-26T16:33:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602435134",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602435134"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 500,
      "original_line": 499,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602460624",
      "pull_request_review_id": 622369827,
      "id": 602460624,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjQ2MDYyNA==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {",
      "path": "src/chainparams.cpp",
      "position": 116,
      "original_position": 93,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": 600435983,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's simply a non-change from the original BIP9 code.\r\n\r\nI don't see a reason to change it here.",
      "created_at": "2021-03-26T17:11:21Z",
      "updated_at": "2021-03-26T17:11:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602460624",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602460624"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 490,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602485622",
      "pull_request_review_id": 622402330,
      "id": 602485622,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjQ4NTYyMg==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {",
      "path": "src/chainparams.cpp",
      "position": 116,
      "original_position": 93,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": 600435983,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ALWAYS and NEVER are not specified in any BIP, they are special magic values in our code only (introduced in this pull request). Treating them in the same fashion will be less code, and less code complexity.",
      "created_at": "2021-03-26T17:49:47Z",
      "updated_at": "2021-03-26T17:49:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602485622",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602485622"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 490,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602567588",
      "pull_request_review_id": 622510084,
      "id": 602567588,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjU2NzU4OA==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {",
      "path": "src/chainparams.cpp",
      "position": 116,
      "original_position": 93,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": 600435983,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "NO_TIMEOUT is not introduced in this PR. Feel free to refactor in a followup... or achow can do it here if you care so strongly. I don't see that it matters either way.",
      "created_at": "2021-03-26T20:25:04Z",
      "updated_at": "2021-03-26T20:25:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602567588",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602567588"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 490,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602568868",
      "pull_request_review_id": 622511635,
      "id": 602568868,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjU2ODg2OA==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {",
      "path": "src/chainparams.cpp",
      "position": 116,
      "original_position": 93,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": 600435983,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think we can leave this for a followup.",
      "created_at": "2021-03-26T20:27:31Z",
      "updated_at": "2021-03-26T20:27:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602568868",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602568868"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 490,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602649296",
      "pull_request_review_id": 622605741,
      "id": 602649296,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjY0OTI5Ng==",
      "diff_hunk": "@@ -474,14 +474,51 @@ class CRegTestParams : public CChainParams {\n     /**\n      * Allows modifying the Version Bits regtest parameters.\n      */\n-    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t nStartTime, int64_t nTimeout)\n+    void UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64_t startheight, int64_t timeoutheight)\n     {\n-        consensus.vDeployments[d].nStartTime = nStartTime;\n-        consensus.vDeployments[d].nTimeout = nTimeout;\n+        consensus.vDeployments[d].startheight = startheight;\n+        consensus.vDeployments[d].timeoutheight = timeoutheight;\n     }\n     void UpdateActivationParametersFromArgs(const ArgsManager& args);\n };\n \n+bool CChainParams::CheckVBitsHeights(std::string& error, int64_t startheight, int64_t timeoutheight) const\n+{\n+    // Special always or never active cases\n+    if ((startheight == Consensus::BIP9Deployment::NEVER_ACTIVE && timeoutheight == Consensus::BIP9Deployment::NEVER_ACTIVE)\n+        || startheight == Consensus::BIP9Deployment::ALWAYS_ACTIVE) {",
      "path": "src/chainparams.cpp",
      "position": 116,
      "original_position": 93,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "ce207a8f161ee50986705e33c8fe6676fde9caf0",
      "in_reply_to_id": 600435983,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@MarcoFalke I think that the rationale is that NO_TIMEOUT *isn't* a special value (unlike `ALWAYS_ACTIVE` and `NEVER_ACTIVE`), it's just a timestamp very far in the future.",
      "created_at": "2021-03-27T01:21:47Z",
      "updated_at": "2021-03-27T02:13:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602649296",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602649296"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 490,
      "original_line": 490,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602649377",
      "pull_request_review_id": 622605741,
      "id": 602649377,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjY0OTM3Nw==",
      "diff_hunk": "@@ -1243,8 +1242,8 @@ static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &nam\n     {\n         bip9.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n     }\n-    bip9.pushKV(\"start_time\", consensusParams.vDeployments[id].nStartTime);\n-    bip9.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n+    bip9.pushKV(\"startheight\", consensusParams.vDeployments[id].startheight);",
      "path": "src/rpc/blockchain.cpp",
      "position": 19,
      "original_position": 19,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2cb41863abe59717a199a66030185e2d23226a23",
      "in_reply_to_id": 600171667,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@benthecarman To what?",
      "created_at": "2021-03-27T01:22:41Z",
      "updated_at": "2021-03-27T02:13:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602649377",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602649377"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1245,
      "original_line": 1245,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602655239",
      "pull_request_review_id": 622610198,
      "id": 602655239,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjY1NTIzOQ==",
      "diff_hunk": "@@ -49,20 +56,17 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;\n+\n         switch (state) {\n             case ThresholdState::DEFINED: {\n-                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n-                    stateNext = ThresholdState::FAILED;",
      "path": "src/versionbits.cpp",
      "position": 44,
      "original_position": 43,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "c95287e378a4a4a79b9632d7647015e96dc3a21c",
      "in_reply_to_id": 602115708,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The fuzz test has all transitions of the state machine implemented (in a \"come from\" form rather than a \"go to\" form). I don't think it's possible to make incorrect transitions that it won't detect.",
      "created_at": "2021-03-27T02:15:26Z",
      "updated_at": "2021-03-27T02:15:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602655239",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602655239"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 55,
      "original_line": 55,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602655356",
      "pull_request_review_id": 622610275,
      "id": 602655356,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjY1NTM1Ng==",
      "diff_hunk": "@@ -1243,8 +1242,8 @@ static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &nam\n     {\n         bip9.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n     }\n-    bip9.pushKV(\"start_time\", consensusParams.vDeployments[id].nStartTime);\n-    bip9.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n+    bip9.pushKV(\"startheight\", consensusParams.vDeployments[id].startheight);",
      "path": "src/rpc/blockchain.cpp",
      "position": 19,
      "original_position": 19,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2cb41863abe59717a199a66030185e2d23226a23",
      "in_reply_to_id": 600171667,
      "user": {
        "login": "benthecarman",
        "id": 15256660,
        "node_id": "MDQ6VXNlcjE1MjU2NjYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benthecarman",
        "html_url": "https://github.com/benthecarman",
        "followers_url": "https://api.github.com/users/benthecarman/followers",
        "following_url": "https://api.github.com/users/benthecarman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/benthecarman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/benthecarman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
        "organizations_url": "https://api.github.com/users/benthecarman/orgs",
        "repos_url": "https://api.github.com/users/benthecarman/repos",
        "events_url": "https://api.github.com/users/benthecarman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/benthecarman/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`bip8` or `vbits` since this is no longer a BIP 9 implementation ",
      "created_at": "2021-03-27T02:16:27Z",
      "updated_at": "2021-03-27T02:16:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602655356",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602655356"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1245,
      "original_line": 1245,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602655615",
      "pull_request_review_id": 622610439,
      "id": 602655615,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjY1NTYxNQ==",
      "diff_hunk": "@@ -1243,8 +1242,8 @@ static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &nam\n     {\n         bip9.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n     }\n-    bip9.pushKV(\"start_time\", consensusParams.vDeployments[id].nStartTime);\n-    bip9.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n+    bip9.pushKV(\"startheight\", consensusParams.vDeployments[id].startheight);",
      "path": "src/rpc/blockchain.cpp",
      "position": 19,
      "original_position": 19,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2cb41863abe59717a199a66030185e2d23226a23",
      "in_reply_to_id": 600171667,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh, sure, I thought you were talking about \"startheight\". This commit only touches observable names, not internal ones.",
      "created_at": "2021-03-27T02:18:27Z",
      "updated_at": "2021-03-27T02:18:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602655615",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602655615"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1245,
      "original_line": 1245,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602662943",
      "pull_request_review_id": 622615392,
      "id": 602662943,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjY2Mjk0Mw==",
      "diff_hunk": "@@ -1243,8 +1242,8 @@ static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &nam\n     {\n         bip9.pushKV(\"bit\", consensusParams.vDeployments[id].bit);\n     }\n-    bip9.pushKV(\"start_time\", consensusParams.vDeployments[id].nStartTime);\n-    bip9.pushKV(\"timeout\", consensusParams.vDeployments[id].nTimeout);\n+    bip9.pushKV(\"startheight\", consensusParams.vDeployments[id].startheight);",
      "path": "src/rpc/blockchain.cpp",
      "position": 19,
      "original_position": 19,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2cb41863abe59717a199a66030185e2d23226a23",
      "in_reply_to_id": 600171667,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The mass rename is planned for a followup so that this PR is easier to backport.",
      "created_at": "2021-03-27T03:35:23Z",
      "updated_at": "2021-03-27T03:35:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602662943",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602662943"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1245,
      "original_line": 1245,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602923391",
      "pull_request_review_id": 622776945,
      "id": 602923391,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkyMzM5MQ==",
      "diff_hunk": "@@ -49,20 +57,17 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;",
      "path": "src/versionbits.cpp",
      "position": 39,
      "original_position": 39,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why are you widening height from an `int` (32 bit) to a `int64_t`, and then comparing with `int`s below?",
      "created_at": "2021-03-28T19:46:59Z",
      "updated_at": "2021-03-28T19:46:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602923391",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602923391"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 61,
      "original_line": 61,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602924924",
      "pull_request_review_id": 622777889,
      "id": 602924924,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkyNDkyNA==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks",
      "path": "test/functional/feature_bip8.py",
      "position": 5,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Use docstrings for test description to separate from copyright notice",
      "created_at": "2021-03-28T20:00:02Z",
      "updated_at": "2021-03-28T20:15:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602924924",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602924924"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602924979",
      "pull_request_review_id": 622777889,
      "id": 602924979,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkyNDk3OQ==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from collections import namedtuple\n+from test_framework.test_framework import BitcoinTestFramework",
      "path": "test/functional/feature_bip8.py",
      "position": 7,
      "original_position": 7,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Separate std library imports from local imports",
      "created_at": "2021-03-28T20:00:20Z",
      "updated_at": "2021-03-28T20:15:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602924979",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602924979"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": 6,
      "original_start_line": 6,
      "start_side": "RIGHT",
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602925055",
      "pull_request_review_id": 622777889,
      "id": 602925055,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkyNTA1NQ==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from collections import namedtuple\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+RestartedNodeInfo = namedtuple(\"RestartedNodeInfo\", (\"node\", \"extra_args\", \"status\"))\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 0 has TestDummy inactive\n+            ['-vbparams=testdummy:@144:@{}'.format(144 * 3)], # Node 1 has regular activation window",
      "path": "test/functional/feature_bip8.py",
      "position": 18,
      "original_position": 18,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "f-strings are generally preferred in new tests:\r\n\r\n```suggestion\r\n            [f'-vbparams=testdummy:@144:@{144 * 3}'], # Node 1 has regular activation window\r\n```",
      "created_at": "2021-03-28T20:00:59Z",
      "updated_at": "2021-03-28T20:15:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602925055",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602925055"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 18,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602925256",
      "pull_request_review_id": 622777889,
      "id": 602925256,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkyNTI1Ng==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from collections import namedtuple\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+RestartedNodeInfo = namedtuple(\"RestartedNodeInfo\", (\"node\", \"extra_args\", \"status\"))\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 0 has TestDummy inactive\n+            ['-vbparams=testdummy:@144:@{}'.format(144 * 3)], # Node 1 has regular activation window\n+            ['-vbparams=testdummy:@144:@{}:@{}'.format(144 * 3, 144 * 5)], # Node 2 has minimum activation height\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 3 has TestDummy inactive, but will be restarted with different params\n+        ]\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def test_height(self, height, status, mine_from, restart):\n+        if height > self.height:\n+            self.log.info(\"Test status at height {}...\".format(height))\n+            while self.height < height:\n+                blockhash = self.nodes[mine_from].generate(1)[0]\n+                block = self.nodes[mine_from].getblock(blockhash, 0)\n+                for node in self.nodes:\n+                    node.submitblock(block)\n+                    assert_equal(node.getbestblockhash(), blockhash)\n+                self.height += 1\n+        elif height < self.height:\n+            assert mine_from is None\n+            self.log.info(\"Roll back to height {}...\".format(height))\n+            old_block = self.nodes[0].getblockhash(height + 1)\n+            for node in self.nodes:\n+                node.invalidateblock(old_block)\n+        else:\n+            assert mine_from is None\n+            assert height == 0 and self.height == 0\n+            self.log.info(\"Test status at genesis...\")\n+\n+        self.height = height\n+\n+        for (i, node), st in zip(enumerate(self.nodes), status):\n+            self.log.debug(\"Node #{}...\".format(i))\n+            info = node.getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if st is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], st)\n+\n+        if restart:\n+            # Restart this node and check that the status is what we expect\n+            self.restart_node(restart.node, restart.extra_args)\n+            info = self.nodes[restart.node].getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if restart.status is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], restart.status)\n+\n+            # Now restart again to go back to the original settings\n+            self.restart_node(restart.node, self.extra_args[restart.node])\n+            info = self.nodes[restart.node].getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if status[restart.node] is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], status[restart.node])\n+\n+    def run_test(self):\n+        self.log.info(\"Checking -vbparams\")\n+        self.stop_node(3)\n+        self.nodes[3].assert_start_raises_init_error(extra_args=[\"-vbparams=testdummy:@-2:@1\"], expected_msg=\"Error: When one of startheight or timeoutheight is -2, both must be -2\")",
      "path": "test/functional/feature_bip8.py",
      "position": 80,
      "original_position": 80,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There's a lot of repetition here. You could factor this out into a function.",
      "created_at": "2021-03-28T20:02:54Z",
      "updated_at": "2021-03-28T20:15:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602925256",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602925256"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 80,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602926473",
      "pull_request_review_id": 622777889,
      "id": 602926473,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkyNjQ3Mw==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from collections import namedtuple\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+RestartedNodeInfo = namedtuple(\"RestartedNodeInfo\", (\"node\", \"extra_args\", \"status\"))\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 0 has TestDummy inactive\n+            ['-vbparams=testdummy:@144:@{}'.format(144 * 3)], # Node 1 has regular activation window\n+            ['-vbparams=testdummy:@144:@{}:@{}'.format(144 * 3, 144 * 5)], # Node 2 has minimum activation height\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 3 has TestDummy inactive, but will be restarted with different params\n+        ]\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def test_height(self, height, status, mine_from, restart):\n+        if height > self.height:\n+            self.log.info(\"Test status at height {}...\".format(height))\n+            while self.height < height:\n+                blockhash = self.nodes[mine_from].generate(1)[0]\n+                block = self.nodes[mine_from].getblock(blockhash, 0)\n+                for node in self.nodes:\n+                    node.submitblock(block)\n+                    assert_equal(node.getbestblockhash(), blockhash)\n+                self.height += 1\n+        elif height < self.height:\n+            assert mine_from is None\n+            self.log.info(\"Roll back to height {}...\".format(height))\n+            old_block = self.nodes[0].getblockhash(height + 1)\n+            for node in self.nodes:\n+                node.invalidateblock(old_block)\n+        else:\n+            assert mine_from is None\n+            assert height == 0 and self.height == 0\n+            self.log.info(\"Test status at genesis...\")\n+\n+        self.height = height\n+\n+        for (i, node), st in zip(enumerate(self.nodes), status):\n+            self.log.debug(\"Node #{}...\".format(i))\n+            info = node.getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if st is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], st)\n+\n+        if restart:\n+            # Restart this node and check that the status is what we expect\n+            self.restart_node(restart.node, restart.extra_args)\n+            info = self.nodes[restart.node].getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if restart.status is None:\n+                assert \"testdummy\" not in info[\"softforks\"]",
      "path": "test/functional/feature_bip8.py",
      "position": 64,
      "original_position": 64,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "unused",
      "created_at": "2021-03-28T20:13:41Z",
      "updated_at": "2021-03-28T20:15:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602926473",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602926473"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": 63,
      "original_start_line": 63,
      "start_side": "RIGHT",
      "line": 64,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602926581",
      "pull_request_review_id": 622777889,
      "id": 602926581,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkyNjU4MQ==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from collections import namedtuple\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+RestartedNodeInfo = namedtuple(\"RestartedNodeInfo\", (\"node\", \"extra_args\", \"status\"))\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 0 has TestDummy inactive\n+            ['-vbparams=testdummy:@144:@{}'.format(144 * 3)], # Node 1 has regular activation window\n+            ['-vbparams=testdummy:@144:@{}:@{}'.format(144 * 3, 144 * 5)], # Node 2 has minimum activation height\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 3 has TestDummy inactive, but will be restarted with different params\n+        ]\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def test_height(self, height, status, mine_from, restart):\n+        if height > self.height:\n+            self.log.info(\"Test status at height {}...\".format(height))\n+            while self.height < height:\n+                blockhash = self.nodes[mine_from].generate(1)[0]\n+                block = self.nodes[mine_from].getblock(blockhash, 0)\n+                for node in self.nodes:\n+                    node.submitblock(block)\n+                    assert_equal(node.getbestblockhash(), blockhash)\n+                self.height += 1\n+        elif height < self.height:\n+            assert mine_from is None\n+            self.log.info(\"Roll back to height {}...\".format(height))\n+            old_block = self.nodes[0].getblockhash(height + 1)\n+            for node in self.nodes:\n+                node.invalidateblock(old_block)\n+        else:\n+            assert mine_from is None\n+            assert height == 0 and self.height == 0\n+            self.log.info(\"Test status at genesis...\")\n+\n+        self.height = height\n+\n+        for (i, node), st in zip(enumerate(self.nodes), status):\n+            self.log.debug(\"Node #{}...\".format(i))\n+            info = node.getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if st is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], st)\n+\n+        if restart:\n+            # Restart this node and check that the status is what we expect\n+            self.restart_node(restart.node, restart.extra_args)\n+            info = self.nodes[restart.node].getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if restart.status is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], restart.status)\n+\n+            # Now restart again to go back to the original settings\n+            self.restart_node(restart.node, self.extra_args[restart.node])\n+            info = self.nodes[restart.node].getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if status[restart.node] is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], status[restart.node])",
      "path": "test/functional/feature_bip8.py",
      "position": 75,
      "original_position": 75,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "unused",
      "created_at": "2021-03-28T20:14:50Z",
      "updated_at": "2021-03-28T20:15:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602926581",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602926581"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": 74,
      "original_start_line": 74,
      "start_side": "RIGHT",
      "line": 75,
      "original_line": 75,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602929655",
      "pull_request_review_id": 622781126,
      "id": 602929655,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkyOTY1NQ==",
      "diff_hunk": "@@ -1837,10 +1837,11 @@ class WarningBitsConditionChecker : public AbstractThresholdConditionChecker\n public:\n     explicit WarningBitsConditionChecker(int bitIn) : bit(bitIn) {}\n \n-    int64_t BeginTime(const Consensus::Params& params) const override { return 0; }\n-    int64_t EndTime(const Consensus::Params& params) const override { return std::numeric_limits<int64_t>::max(); }\n+    int StartHeight(const Consensus::Params& params) const override { return 0; }\n+    int TimeoutHeight(const Consensus::Params& params) const override { return std::numeric_limits<int>::max(); }\n     int Period(const Consensus::Params& params) const override { return params.nMinerConfirmationWindow; }\n-    int Threshold(const Consensus::Params& params) const override { return params.nRuleChangeActivationThreshold; }\n+    int Threshold(const Consensus::Params& params) const override { return params.m_vbits_min_threshold; }",
      "path": "src/validation.cpp",
      "position": 10,
      "original_position": 10,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The warning message emitted when this threshold is reached is \"Warning: unknown new rules activated\", whereas now the threshold being reached really means \"Warning: unknown new rules may be activated soon\" (since 75% doesn't actually indicate that any vbits deployment will activate).\r\n\r\nI think it might make sense to remove the `m_vbits_min_threshold` parameter from chain params and set the threshold to 75% of nMinerConfirmationWindow here.",
      "created_at": "2021-03-28T20:40:31Z",
      "updated_at": "2021-03-28T20:40:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602929655",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602929655"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1843,
      "original_line": 1843,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935148",
      "pull_request_review_id": 622784975,
      "id": 602935148,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkzNTE0OA==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from collections import namedtuple\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+RestartedNodeInfo = namedtuple(\"RestartedNodeInfo\", (\"node\", \"extra_args\", \"status\"))\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 0 has TestDummy inactive\n+            ['-vbparams=testdummy:@144:@{}'.format(144 * 3)], # Node 1 has regular activation window",
      "path": "test/functional/feature_bip8.py",
      "position": 18,
      "original_position": 18,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 602925055,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "These use this format so that it is easier to backport. 0.21 is using a version python that doesn't support f-strings.",
      "created_at": "2021-03-28T21:28:54Z",
      "updated_at": "2021-03-28T21:28:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602935148",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935148"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 18,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935314",
      "pull_request_review_id": 622785090,
      "id": 602935314,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkzNTMxNA==",
      "diff_hunk": "@@ -49,20 +57,17 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n         pindexPrev = vToCompute.back();\n         vToCompute.pop_back();\n \n+        // We track state by previous-block, so the height we should be comparing is +1\n+        const int64_t height = pindexPrev->nHeight + 1;",
      "path": "src/versionbits.cpp",
      "position": 39,
      "original_position": 39,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 602923391,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Will fix if I need to retouch.",
      "created_at": "2021-03-28T21:30:17Z",
      "updated_at": "2021-03-28T21:30:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602935314",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935314"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 61,
      "original_line": 61,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935396",
      "pull_request_review_id": 622785128,
      "id": 602935396,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkzNTM5Ng==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks",
      "path": "test/functional/feature_bip8.py",
      "position": 5,
      "original_position": 5,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 602924924,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If I need to retouch",
      "created_at": "2021-03-28T21:30:40Z",
      "updated_at": "2021-03-28T21:30:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602935396",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935396"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935400",
      "pull_request_review_id": 622785131,
      "id": 602935400,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkzNTQwMA==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from collections import namedtuple\n+from test_framework.test_framework import BitcoinTestFramework",
      "path": "test/functional/feature_bip8.py",
      "position": 7,
      "original_position": 7,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 602924979,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If I need to retouch",
      "created_at": "2021-03-28T21:30:44Z",
      "updated_at": "2021-03-28T21:30:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602935400",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935400"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": 6,
      "original_start_line": 6,
      "start_side": "RIGHT",
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935505",
      "pull_request_review_id": 622785228,
      "id": 602935505,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkzNTUwNQ==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from collections import namedtuple\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+RestartedNodeInfo = namedtuple(\"RestartedNodeInfo\", (\"node\", \"extra_args\", \"status\"))\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 0 has TestDummy inactive\n+            ['-vbparams=testdummy:@144:@{}'.format(144 * 3)], # Node 1 has regular activation window\n+            ['-vbparams=testdummy:@144:@{}:@{}'.format(144 * 3, 144 * 5)], # Node 2 has minimum activation height\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 3 has TestDummy inactive, but will be restarted with different params\n+        ]\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def test_height(self, height, status, mine_from, restart):\n+        if height > self.height:\n+            self.log.info(\"Test status at height {}...\".format(height))\n+            while self.height < height:\n+                blockhash = self.nodes[mine_from].generate(1)[0]\n+                block = self.nodes[mine_from].getblock(blockhash, 0)\n+                for node in self.nodes:\n+                    node.submitblock(block)\n+                    assert_equal(node.getbestblockhash(), blockhash)\n+                self.height += 1\n+        elif height < self.height:\n+            assert mine_from is None\n+            self.log.info(\"Roll back to height {}...\".format(height))\n+            old_block = self.nodes[0].getblockhash(height + 1)\n+            for node in self.nodes:\n+                node.invalidateblock(old_block)\n+        else:\n+            assert mine_from is None\n+            assert height == 0 and self.height == 0\n+            self.log.info(\"Test status at genesis...\")\n+\n+        self.height = height\n+\n+        for (i, node), st in zip(enumerate(self.nodes), status):\n+            self.log.debug(\"Node #{}...\".format(i))\n+            info = node.getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if st is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], st)\n+\n+        if restart:\n+            # Restart this node and check that the status is what we expect\n+            self.restart_node(restart.node, restart.extra_args)\n+            info = self.nodes[restart.node].getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if restart.status is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], restart.status)\n+\n+            # Now restart again to go back to the original settings\n+            self.restart_node(restart.node, self.extra_args[restart.node])\n+            info = self.nodes[restart.node].getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if status[restart.node] is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], status[restart.node])\n+\n+    def run_test(self):\n+        self.log.info(\"Checking -vbparams\")\n+        self.stop_node(3)\n+        self.nodes[3].assert_start_raises_init_error(extra_args=[\"-vbparams=testdummy:@-2:@1\"], expected_msg=\"Error: When one of startheight or timeoutheight is -2, both must be -2\")",
      "path": "test/functional/feature_bip8.py",
      "position": 80,
      "original_position": 80,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 602925256,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's about as repetitive if this were a function IMO.",
      "created_at": "2021-03-28T21:32:00Z",
      "updated_at": "2021-03-28T21:32:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602935505",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935505"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 80,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935514",
      "pull_request_review_id": 622785238,
      "id": 602935514,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkzNTUxNA==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from collections import namedtuple\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+RestartedNodeInfo = namedtuple(\"RestartedNodeInfo\", (\"node\", \"extra_args\", \"status\"))\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 0 has TestDummy inactive\n+            ['-vbparams=testdummy:@144:@{}'.format(144 * 3)], # Node 1 has regular activation window\n+            ['-vbparams=testdummy:@144:@{}:@{}'.format(144 * 3, 144 * 5)], # Node 2 has minimum activation height\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 3 has TestDummy inactive, but will be restarted with different params\n+        ]\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def test_height(self, height, status, mine_from, restart):\n+        if height > self.height:\n+            self.log.info(\"Test status at height {}...\".format(height))\n+            while self.height < height:\n+                blockhash = self.nodes[mine_from].generate(1)[0]\n+                block = self.nodes[mine_from].getblock(blockhash, 0)\n+                for node in self.nodes:\n+                    node.submitblock(block)\n+                    assert_equal(node.getbestblockhash(), blockhash)\n+                self.height += 1\n+        elif height < self.height:\n+            assert mine_from is None\n+            self.log.info(\"Roll back to height {}...\".format(height))\n+            old_block = self.nodes[0].getblockhash(height + 1)\n+            for node in self.nodes:\n+                node.invalidateblock(old_block)\n+        else:\n+            assert mine_from is None\n+            assert height == 0 and self.height == 0\n+            self.log.info(\"Test status at genesis...\")\n+\n+        self.height = height\n+\n+        for (i, node), st in zip(enumerate(self.nodes), status):\n+            self.log.debug(\"Node #{}...\".format(i))\n+            info = node.getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if st is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], st)\n+\n+        if restart:\n+            # Restart this node and check that the status is what we expect\n+            self.restart_node(restart.node, restart.extra_args)\n+            info = self.nodes[restart.node].getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if restart.status is None:\n+                assert \"testdummy\" not in info[\"softforks\"]",
      "path": "test/functional/feature_bip8.py",
      "position": 64,
      "original_position": 64,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 602926473,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If I need to retouch",
      "created_at": "2021-03-28T21:32:07Z",
      "updated_at": "2021-03-28T21:32:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602935514",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935514"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": 63,
      "original_start_line": 63,
      "start_side": "RIGHT",
      "line": 64,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935529",
      "pull_request_review_id": 622785244,
      "id": 602935529,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkzNTUyOQ==",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+# Test BIP 8 softforks\n+from collections import namedtuple\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+RestartedNodeInfo = namedtuple(\"RestartedNodeInfo\", (\"node\", \"extra_args\", \"status\"))\n+\n+class Bip8Test(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 4\n+        self.setup_clean_chain = True\n+        self.extra_args = [\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 0 has TestDummy inactive\n+            ['-vbparams=testdummy:@144:@{}'.format(144 * 3)], # Node 1 has regular activation window\n+            ['-vbparams=testdummy:@144:@{}:@{}'.format(144 * 3, 144 * 5)], # Node 2 has minimum activation height\n+            ['-vbparams=testdummy:@-2:@-2'], # Node 3 has TestDummy inactive, but will be restarted with different params\n+        ]\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def test_height(self, height, status, mine_from, restart):\n+        if height > self.height:\n+            self.log.info(\"Test status at height {}...\".format(height))\n+            while self.height < height:\n+                blockhash = self.nodes[mine_from].generate(1)[0]\n+                block = self.nodes[mine_from].getblock(blockhash, 0)\n+                for node in self.nodes:\n+                    node.submitblock(block)\n+                    assert_equal(node.getbestblockhash(), blockhash)\n+                self.height += 1\n+        elif height < self.height:\n+            assert mine_from is None\n+            self.log.info(\"Roll back to height {}...\".format(height))\n+            old_block = self.nodes[0].getblockhash(height + 1)\n+            for node in self.nodes:\n+                node.invalidateblock(old_block)\n+        else:\n+            assert mine_from is None\n+            assert height == 0 and self.height == 0\n+            self.log.info(\"Test status at genesis...\")\n+\n+        self.height = height\n+\n+        for (i, node), st in zip(enumerate(self.nodes), status):\n+            self.log.debug(\"Node #{}...\".format(i))\n+            info = node.getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if st is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], st)\n+\n+        if restart:\n+            # Restart this node and check that the status is what we expect\n+            self.restart_node(restart.node, restart.extra_args)\n+            info = self.nodes[restart.node].getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if restart.status is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], restart.status)\n+\n+            # Now restart again to go back to the original settings\n+            self.restart_node(restart.node, self.extra_args[restart.node])\n+            info = self.nodes[restart.node].getblockchaininfo()\n+            assert_equal(info[\"blocks\"], height)\n+            if status[restart.node] is None:\n+                assert \"testdummy\" not in info[\"softforks\"]\n+            else:\n+                assert_equal(info[\"softforks\"][\"testdummy\"][\"bip8\"][\"status\"], status[restart.node])",
      "path": "test/functional/feature_bip8.py",
      "position": 75,
      "original_position": 75,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 602926581,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If I need to retouch",
      "created_at": "2021-03-28T21:32:10Z",
      "updated_at": "2021-03-28T21:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602935529",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935529"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": 74,
      "original_start_line": 74,
      "start_side": "RIGHT",
      "line": 75,
      "original_line": 75,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935581",
      "pull_request_review_id": 622785277,
      "id": 602935581,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjkzNTU4MQ==",
      "diff_hunk": "@@ -1837,10 +1837,11 @@ class WarningBitsConditionChecker : public AbstractThresholdConditionChecker\n public:\n     explicit WarningBitsConditionChecker(int bitIn) : bit(bitIn) {}\n \n-    int64_t BeginTime(const Consensus::Params& params) const override { return 0; }\n-    int64_t EndTime(const Consensus::Params& params) const override { return std::numeric_limits<int64_t>::max(); }\n+    int StartHeight(const Consensus::Params& params) const override { return 0; }\n+    int TimeoutHeight(const Consensus::Params& params) const override { return std::numeric_limits<int>::max(); }\n     int Period(const Consensus::Params& params) const override { return params.nMinerConfirmationWindow; }\n-    int Threshold(const Consensus::Params& params) const override { return params.nRuleChangeActivationThreshold; }\n+    int Threshold(const Consensus::Params& params) const override { return params.m_vbits_min_threshold; }",
      "path": "src/validation.cpp",
      "position": 10,
      "original_position": 10,
      "commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "original_commit_id": "2e55bcedb8d73e49620a5731196bf7e23bb53ccc",
      "in_reply_to_id": 602929655,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps for a followup, or if I retouch.",
      "created_at": "2021-03-28T21:32:51Z",
      "updated_at": "2021-03-28T21:32:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r602935581",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/602935581"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1843,
      "original_line": 1843,
      "side": "RIGHT"
    }
  ]
}