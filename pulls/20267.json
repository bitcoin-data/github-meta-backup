{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267",
    "id": 512655353,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTEyNjU1MzUz",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20267",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/20267.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/20267.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
    "number": 20267,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Disable and fix tests for when BDB is not compiled",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This PR fixes tests for when BDB is not compiled. Tests which rely on or test legacy wallet behavior are disabled and skipped when BDB is not compiled. For the components of some tests that are for legacy wallet things, those parts of the tests are skipped.\r\n\r\nFor the majority of tests, changes are made so that they can be run with either legacy wallets or descriptor wallets without materially effecting the test. Most tests only need the wallet for balance and transactions, so the type of wallet is not an important part of those tests. Additionally, some tests are wallet agnostic and modified to instead use the test framework's MiniWallet.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2020-10-29T23:56:06Z",
    "updated_at": "2022-08-16T17:03:53Z",
    "closed_at": "2021-02-05T13:26:34Z",
    "mergeable_state": "unknown",
    "merged_at": "2021-02-05T13:26:34Z",
    "merge_commit_sha": "a6b1bf64399fd0f59f4b2bcd328b62dc953552dd",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "achow101:tests-opt-sqlite-bdb",
      "ref": "tests-opt-sqlite-bdb",
      "sha": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 45006379,
        "node_id": "MDEwOlJlcG9zaXRvcnk0NTAwNjM3OQ==",
        "name": "bitcoin",
        "full_name": "achow101/bitcoin",
        "owner": {
          "login": "achow101",
          "id": 3782274,
          "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/achow101",
          "html_url": "https://github.com/achow101",
          "followers_url": "https://api.github.com/users/achow101/followers",
          "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
          "organizations_url": "https://api.github.com/users/achow101/orgs",
          "repos_url": "https://api.github.com/users/achow101/repos",
          "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/achow101/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/achow101/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/achow101/bitcoin",
        "archive_url": "https://api.github.com/repos/achow101/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/achow101/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/achow101/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/achow101/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/achow101/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/achow101/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/achow101/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/achow101/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/achow101/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/achow101/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/achow101/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/achow101/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/achow101/bitcoin/events",
        "forks_url": "https://api.github.com/repos/achow101/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/achow101/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/achow101/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/achow101/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/achow101/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/achow101/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/achow101/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/achow101/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/achow101/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/achow101/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/achow101/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/achow101/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/achow101/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/achow101/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/achow101/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/achow101/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:achow101/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/achow101/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/achow101/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/achow101/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/achow101/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/achow101/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/achow101/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/achow101/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/achow101/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/achow101/bitcoin/hooks",
        "svn_url": "https://github.com/achow101/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 10,
        "stargazers_count": 34,
        "watchers_count": 34,
        "size": 238743,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-02T17:43:24Z",
        "created_at": "2015-10-27T00:20:28Z",
        "updated_at": "2023-05-16T00:18:41Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ea5a50f92a6ff81b1d2dd67cdc3663e0e66733ac",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69818,
        "watchers_count": 69818,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T22:42:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T03:51:27Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 270,
    "deletions": 152,
    "changed_files": 12,
    "commits": 14,
    "review_comments": 59,
    "comments": 18
  },
  "events": [
    {
      "event": "mentioned",
      "id": 3938906883,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzkzODkwNjg4Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3938906883",
      "actor": {
        "login": "20202",
        "id": 15835619,
        "node_id": "MDQ6VXNlcjE1ODM1NjE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/15835619?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/20202",
        "html_url": "https://github.com/20202",
        "followers_url": "https://api.github.com/users/20202/followers",
        "following_url": "https://api.github.com/users/20202/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/20202/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/20202/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/20202/subscriptions",
        "organizations_url": "https://api.github.com/users/20202/orgs",
        "repos_url": "https://api.github.com/users/20202/repos",
        "events_url": "https://api.github.com/users/20202/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/20202/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-29T23:56:06Z"
    },
    {
      "event": "subscribed",
      "id": 3938906889,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM5Mzg5MDY4ODk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3938906889",
      "actor": {
        "login": "20202",
        "id": 15835619,
        "node_id": "MDQ6VXNlcjE1ODM1NjE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/15835619?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/20202",
        "html_url": "https://github.com/20202",
        "followers_url": "https://api.github.com/users/20202/followers",
        "following_url": "https://api.github.com/users/20202/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/20202/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/20202/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/20202/subscriptions",
        "organizations_url": "https://api.github.com/users/20202/orgs",
        "repos_url": "https://api.github.com/users/20202/repos",
        "events_url": "https://api.github.com/users/20202/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/20202/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-29T23:56:06Z"
    },
    {
      "event": "labeled",
      "id": 3938928026,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDM5Mzg5MjgwMjY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3938928026",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-30T00:06:13Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "labeled",
      "id": 3938928027,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDM5Mzg5MjgwMjc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3938928027",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-30T00:06:13Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "commented",
      "id": 719111613,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcxOTExMTYxMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/719111613",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-30T01:15:06Z",
      "updated_at": "2021-01-29T05:05:53Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21008 (test: fix zmq test flakiness, improve speed by theStack)\n* #20892 (tests: Run both descriptor and legacy tests within a single test invocation by achow101)\n* #20833 (rpc/validation: enable packages through testmempoolaccept by glozow)\n* #20591 (wallet, bugfix: fix ComputeTimeSmart function during rescanning process. by BitcoinTsunami)\n* #20362 (test: Implicitly sync after generate* to preempt races and intermittent test failures by MarcoFalke)\n* #20196 (net: fix GetListenPort() to derive the proper port by vasild)\n* #17211 (Allow fundrawtransaction and walletcreatefundedpsbt to take external inputs by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-719111613",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "unsubscribed",
      "id": 3939966591,
      "node_id": "MDE3OlVuc3Vic2NyaWJlZEV2ZW50MzkzOTk2NjU5MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3939966591",
      "actor": {
        "login": "20202",
        "id": 15835619,
        "node_id": "MDQ6VXNlcjE1ODM1NjE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/15835619?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/20202",
        "html_url": "https://github.com/20202",
        "followers_url": "https://api.github.com/users/20202/followers",
        "following_url": "https://api.github.com/users/20202/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/20202/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/20202/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/20202/subscriptions",
        "organizations_url": "https://api.github.com/users/20202/orgs",
        "repos_url": "https://api.github.com/users/20202/repos",
        "events_url": "https://api.github.com/users/20202/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/20202/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-30T08:05:35Z"
    },
    {
      "event": "reviewed",
      "id": 520885524,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwODg1NTI0",
      "url": null,
      "actor": null,
      "commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#pullrequestreview-520885524",
      "submitted_at": "2020-10-30T18:12:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3942636288,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzk0MjYzNjI4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3942636288",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-30T18:42:46Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3945691257,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzk0NTY5MTI1Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3945691257",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-01T22:57:03Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3949377905,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzk0OTM3NzkwNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3949377905",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-02T17:54:20Z"
    },
    {
      "event": "commented",
      "id": 721570837,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTU3MDgzNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/721570837",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-04T07:52:34Z",
      "updated_at": "2020-11-04T07:52:34Z",
      "author_association": "MEMBER",
      "body": "```\r\nlibbitcoin_wallet.lib(wallet_walletutil.obj) : error LNK2001: unresolved external symbol \"bool __cdecl ExistsSQLiteDatabase(class boost::filesystem::path const &)\" (?ExistsSQLiteDatabase@@YA_NAEBVpath@filesystem@boost@@@Z) [C:\\projects\\bitcoin\\build_msvc\\bench_bitcoin\\bench_bitcoin.vcxproj]\r\n```\r\n\r\n```\r\nThe subject line of commit hash 8ea48f202d800895abea798385ac0e67f7f3034d is followed by a non-empty line. Subject lines should always be followed by a blank line.\r\n\r\n^---- failure generated from test/lint/lint-git-commit-check.sh",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-721570837",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3958729329,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzk1ODcyOTMyOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3958729329",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-04T17:36:05Z"
    },
    {
      "event": "commented",
      "id": 721873303,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTg3MzMwMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/721873303",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-04T17:36:08Z",
      "updated_at": "2020-11-04T17:36:08Z",
      "author_association": "MEMBER",
      "body": "Fixed the linter error.\r\n\r\nI'm not sure what is causing the appveyor failure, nor how to fix it.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-721873303",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "commented",
      "id": 721895698,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTg5NTY5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/721895698",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-04T18:21:03Z",
      "updated_at": "2020-11-04T18:21:03Z",
      "author_association": "MEMBER",
      "body": "> I'm not sure what is causing the appveyor failure, nor how to fix it.\r\n\r\nI dug up the old link https://ci.appveyor.com/project/DrahtBot/bitcoin/builds/36097732 and the link errors for unresolved symbols just come from removing wallet/bdb.cpp and wallet/salvage.cpp from original libbitcoin_wallet_a_SOURCES setting in Makefile.am. You might need to add these explicitly to build_msvc/libbitcoin_wallet/libbitcoin_wallet.vcxproj.in. Example of how to do this: 9eaeb7fb8d4ab0d4493849e6c17e314fd75fea9c",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-721895698",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "commented",
      "id": 721897050,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTg5NzA1MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/721897050",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-04T18:23:52Z",
      "updated_at": "2020-11-04T18:23:52Z",
      "author_association": "MEMBER",
      "body": "> Example of how to do this: [9eaeb7f](https://github.com/bitcoin/bitcoin/commit/9eaeb7fb8d4ab0d4493849e6c17e314fd75fea9c)\r\n\r\nBetter simpler example: 0660119ac372c2863d14060ac1bc9bc243771f94",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-721897050",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "commented",
      "id": 721910807,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTkxMDgwNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/721910807",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-04T18:52:19Z",
      "updated_at": "2020-11-04T18:54:11Z",
      "author_association": "MEMBER",
      "body": "> > I'm not sure what is causing the appveyor failure, nor how to fix it.\r\n> \r\n> I dug up the old link https://ci.appveyor.com/project/DrahtBot/bitcoin/builds/36097732 and the link errors for unresolved symbols just come from removing wallet/bdb.cpp and wallet/salvage.cpp from original libbitcoin_wallet_a_SOURCES setting in Makefile.am. You might need to add these explicitly to build_msvc/libbitcoin_wallet/libbitcoin_wallet.vcxproj.in. Example of how to do this: [9eaeb7f](https://github.com/bitcoin/bitcoin/commit/9eaeb7fb8d4ab0d4493849e6c17e314fd75fea9c)\r\n\r\nI think I've fixed it in the upstream PR #20202",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-721910807",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3959020534,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzk1OTAyMDUzNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3959020534",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-04T18:53:44Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3963476719,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzk2MzQ3NjcxOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3963476719",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-05T17:08:13Z"
    },
    {
      "event": "reviewed",
      "id": 524708979,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NzA4OTc5",
      "url": null,
      "actor": null,
      "commit_id": "0cbff9303729dddaad781a4d285c141a86053687",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Started review (will update list below with progress).\r\n\r\nPR title \"Disable and fix tests for when BDB is not compiled\" does not seem accurate. This goes beyond allowing BDB to be disabled and disabling corresponding tests, but also enables enables new tests and makes fixes not connected to BDB (e.g. \"Fix mock SQLiteDatabases\" and \"Fix change detection of imported internal descriptors.\") \r\n\r\n- [X] d4892a3415d8668d6524c2eb843a639c06d317fc Include wallet/bdb.h where it is actually being used (1/20)\r\n- [X] 0cbff9303729dddaad781a4d285c141a86053687 Do not compile BDB things when USE_BDB is defined (2/20)\r\n- [X] cec77056b0945522c0305db8d4754614bfa66009 Enforce salvage is only for BDB wallets (3/20)\r\n- [X] eb2e1680044484833c0e82b133678a77d8660233 RPC: Require descriptors=True for createwallet when BDB is not compiled (4/20)\r\n- [X] 98e8752fa3f8332f73a3e75436523a790364b0ce GUI: Force descriptor wallets when BDB is not compiled (5/20)\r\n- [X] 047d4e3df48f54f1063914cca9e000da33064b01 Allow disabling BDB in configure with --without-bdb (6/20)\r\n- [X] f864402058b4a1a642001bc87d9ef1ce9603f81d Fix mock SQLiteDatabases (7/20)\r\n- [ ] d5157cfa759d2c24c98cda8ae35181c5acbee6b4 Fix change detection of imported internal descriptors (8/20)\r\n- [X] d97e22f5244cb913ef84953309a3eaee07f54c1c Add a helper to determine whether descriptors should be used (9/20)\r\n- [ ] 235bbb7f3f5bba9a72c4e452728ca9ec1b5d5eec Add skip_if_no_bdb and is_bdb_compiled helpers (10/20)\r\n- [ ] 8a0f9fa368236e51b3722ee8f39ba4aca3b78449 Skip legacy wallet reliant tests if BDB is not compiled (11/20)\r\n- [ ] 99f8ffac9c4c16677a9ee39351ba5b5ec299edbb tests: Don't make any wallets unless wallet is required (12/20)\r\n- [ ] 49e9ee040bb4fdb51c0b5ce10d2e5d4cdf1a5c77 Disable wallet_descriptor.py bdb format check if BDB is not compiled (13/20)\r\n- [ ] d53208cf7db7a3d92f4b701cdcdf7c9df0fbee42 Disable upgrades tests that require BDB if BDB is not compiled (14/20)\r\n- [ ] 5fcf045e3299c3e0c6fd7a5d780bf4106c71b334 Have feature_filelock.py test both bdb and sqlite, depending on compiled (15/20)\r\n- [ ] cb126d43dfe3eb324405d9dccf2e5288af7592c7 Setup wallets with descriptors for feature_notifications (16/20)\r\nI- [ ] bd9d5a844ba4150f5d4988104decc46803fe78ad Setup wallets for interface_bitcoin_cli.py (17/20)\r\n- [ ] 02b0ee670a3b4ce450ab1479a2fa56f6080c9c91 Handle when bdb is disabled in rpc_deprecated (18/20)\r\n- [ ] 482ec906b266973d76bd70385621c26136c213eb Use MiniWallet in rpc_net.py (19/20)\r\n- [ ] cb3d26b317556737f3d2652494b4604b22a82ed0 Setup wallets for interface_zmq.py (20/20)\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#pullrequestreview-524708979",
      "submitted_at": "2020-11-06T17:29:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3968983976,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzk2ODk4Mzk3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3968983976",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-06T21:28:53Z"
    },
    {
      "event": "commented",
      "id": 723308687,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzMwODY4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/723308687",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-06T21:30:41Z",
      "updated_at": "2020-11-06T21:31:26Z",
      "author_association": "MEMBER",
      "body": "Changed to automatically switch to using descriptor wallets if BDB is not compiled and `--legacy-wallet` is not compiled. This requires that several tests have `--legacy-wallet` be added in `test_runner.py`. Additionally, this broke `wallet_send.py` so those tests have to be updated to work with descriptor wallets. `wallet_upgradewallet.py` also had to be restricted to just a legacy wallet test.\r\n\r\nDoing this switching means that we won't skip a bunch of tests when BDB is not compiled. It also makes it possible to test all of our tests with both wallet types.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-723308687",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "reviewed",
      "id": 530137014,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMTM3MDE0",
      "url": null,
      "actor": null,
      "commit_id": "caf3062e6275d3a2c941e0e002fb6581c277f65b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#pullrequestreview-530137014",
      "submitted_at": "2020-11-13T15:04:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
    },
    {
      "event": "reviewed",
      "id": 530146739,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMTQ2NzM5",
      "url": null,
      "actor": null,
      "commit_id": "caf3062e6275d3a2c941e0e002fb6581c277f65b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#pullrequestreview-530146739",
      "submitted_at": "2020-11-13T15:15:52Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
    },
    {
      "event": "reviewed",
      "id": 530434202,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNDM0MjAy",
      "url": null,
      "actor": null,
      "commit_id": "caf3062e6275d3a2c941e0e002fb6581c277f65b",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "ysangkok",
        "id": 284023,
        "node_id": "MDQ6VXNlcjI4NDAyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/284023?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ysangkok",
        "html_url": "https://github.com/ysangkok",
        "followers_url": "https://api.github.com/users/ysangkok/followers",
        "following_url": "https://api.github.com/users/ysangkok/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ysangkok/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ysangkok/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ysangkok/subscriptions",
        "organizations_url": "https://api.github.com/users/ysangkok/orgs",
        "repos_url": "https://api.github.com/users/ysangkok/repos",
        "events_url": "https://api.github.com/users/ysangkok/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ysangkok/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#pullrequestreview-530434202",
      "submitted_at": "2020-11-13T21:42:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
    },
    {
      "event": "labeled",
      "id": 4005611165,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQwMDU2MTExNjU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4005611165",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-17T14:02:33Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4006893696,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDAwNjg5MzY5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4006893696",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-17T18:20:51Z"
    },
    {
      "event": "unlabeled",
      "id": 4007355895,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDAwNzM1NTg5NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4007355895",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-17T20:19:50Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 4010058650,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQwMTAwNTg2NTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4010058650",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-18T10:59:17Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4011766186,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDAxMTc2NjE4Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4011766186",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-18T17:05:43Z"
    },
    {
      "event": "unlabeled",
      "id": 4011845382,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDAxMTg0NTM4Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4011845382",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-18T17:22:40Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 4028110170,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQwMjgxMTAxNzA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4028110170",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-23T15:02:06Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4028756479,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDAyODc1NjQ3OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4028756479",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-23T17:12:19Z"
    },
    {
      "event": "unlabeled",
      "id": 4029240653,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDAyOTI0MDY1Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4029240653",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-23T19:13:15Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 737317034,
      "node_id": "MDEyOklzc3VlQ29tbWVudDczNzMxNzAzNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737317034",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-02T15:49:48Z",
      "updated_at": "2020-12-02T15:49:48Z",
      "author_association": "MEMBER",
      "body": "re: https://github.com/bitcoin/bitcoin/pull/20267#issue-512655353\r\n\r\n> Fixes the tests for #20202. When BDB is not compiled, the wallet tests that rely on the legacy wallet will be disabled. Other tests not necessarily requiring the wallet, but can optionally test behavior with the wallet, are updated to handle the different wallet types. One test, `rpc_net.py`, which only uses the wallet to setup a few things, is changed to use the test framework's MiniWallet instead.\r\n> \r\n> This PR is separate from and based on #20202 because it needs a few other PRs to make the tests work: #18788, #20262, and #20266\r\n\r\nStarting to look at this but can the description be updated to maybe strip out the references to old PRs and say what behavior change this PR is implementing? What happens with test runner currently, and what happens after this PR? What happens running individual BDB tests currently, and what happens after?\r\n\r\nI'm used to test runner showing a table of all tests `Passed` or `Failed` or `Skipped`. Here, it seems like in the absence of BDB some tests are partially skipped so I would expect to see some new `Passed (partial)` status instead of plain `Passed`. Or to avoid this, I'd expect these tests to be split and run twice with `--legacy-wallet` and `--descriptors`, so there is never any partially passed test only fully passed or fully skipped.\r\n\r\nI guess I'm just confused about what the exact goal is for this PR, so it would be good to spell out  the new behavior.\r\n\r\nI'm also confused about why some code is looking at self.options.descriptors, and other code is calling `self.get_use_descriptors()`. And `self.get_use_descriptors()` is using `self.options.descriptors` internally but there is also `self.options.descriptors = self.get_use_descriptors()` so some kind of caching or recursive dependency? This might be worth simplifying or explaining some place.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-737317034",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4063578646,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDA2MzU3ODY0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4063578646",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-02T17:34:35Z"
    },
    {
      "event": "commented",
      "id": 737384240,
      "node_id": "MDEyOklzc3VlQ29tbWVudDczNzM4NDI0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737384240",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-02T17:37:00Z",
      "updated_at": "2020-12-02T17:37:00Z",
      "author_association": "MEMBER",
      "body": "> Starting to look at this but can the description be updated to maybe strip out the references to old PRs and say what behavior change this PR is implementing? What happens with test runner currently, and what happens after this PR? What happens running individual BDB tests currently, and what happens after?\r\n\r\nUpdated the OP.\r\n\r\n> I'm used to test runner showing a table of all tests `Passed` or `Failed` or `Skipped`. Here, it seems like in the absence of BDB some tests are partially skipped so I would expect to see some new `Passed (partial)` status instead of plain `Passed`. Or to avoid this, I'd expect these tests to be split and run twice with `--legacy-wallet` and `--descriptors`, so there is never any partially passed test only fully passed or fully skipped.\r\n\r\nWe already have tests which are \"partial\" as some parts are not tested if the wallet is not compiled. If we do want to have a \"partial\" indicator for tests where we disable components based on compiled support, then I think it should be done in a followup.\r\n\r\n> I'm also confused about why some code is looking at self.options.descriptors, and other code is calling `self.get_use_descriptors()`. And `self.get_use_descriptors()` is using `self.options.descriptors` internally but there is also `self.options.descriptors = self.get_use_descriptors()` so some kind of caching or recursive dependency? This might be worth simplifying or explaining some place.\r\n\r\nThis is a holdover from a previous iteration. I've removed the extra uses of `self.get_use_descriptors()` and just use `self.options.descriptors`. The purpose and behavior of `self.get_use_descriptors` is described in the OP.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-737384240",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "commented",
      "id": 742525058,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc0MjUyNTA1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742525058",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-10T13:36:14Z",
      "updated_at": "2020-12-10T13:36:14Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-742525058",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "commented",
      "id": 745698726,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc0NTY5ODcyNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/745698726",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-16T01:13:28Z",
      "updated_at": "2020-12-16T01:13:28Z",
      "author_association": "MEMBER",
      "body": "Thanks for updates. Init sequence still seems too complicated. I don't see a reason options can't be set once simply in the constructor. In the current implementation cf5de8ec59ac6e2a49c728b886eb5d46d9705d1e:\r\n\r\n- self.options.descriptors value changes over time and is set to the return value of a function which circularly reads self.options.descriptors\r\n- default_wallet_name can't be read/written from setup_params and is a dynamic property executing code and confusingly depending on the changing self.options.descriptors value\r\n\r\nThe following cleanups seem to work all right:\r\n\r\n```diff\r\ndiff --git a/test/functional/test_framework/test_framework.py b/test/functional/test_framework/test_framework.py\r\nindex c0289bf491e..76b3815d25b 100755\r\n--- a/test/functional/test_framework/test_framework.py\r\n+++ b/test/functional/test_framework/test_framework.py\r\n@@ -102,6 +102,7 @@ class BitcoinTestFramework(metaclass=BitcoinTestMetaClass):\r\n         self.supports_cli = True\r\n         self.bind_to_localhost_only = True\r\n         self.parse_args()\r\n+        self.default_wallet_name = \"default_wallet\" if self.options.descriptors else \"\"\r\n         self.wallet_data_filename = \"wallet.dat\"\r\n         # Optional list of wallet names that can be set in set_test_params to\r\n         # create and import keys to. If unset, default is len(nodes) *\r\n@@ -118,10 +119,6 @@ class BitcoinTestFramework(metaclass=BitcoinTestMetaClass):\r\n             self.options.timeout_factor = 99999\r\n         self.rpc_timeout = int(self.rpc_timeout * self.options.timeout_factor) # optionally, increase timeout by a factor\r\n \r\n-    @property\r\n-    def default_wallet_name(self):\r\n-        return \"default_wallet\" if self.options.descriptors else \"\"\r\n-\r\n     def main(self):\r\n         \"\"\"Main function. This should not be overridden by the subclass test scripts.\"\"\"\r\n \r\n@@ -201,6 +198,18 @@ class BitcoinTestFramework(metaclass=BitcoinTestMetaClass):\r\n         self.options = parser.parse_args()\r\n         self.options.previous_releases_path = previous_releases_path\r\n \r\n+        config = configparser.ConfigParser()\r\n+        config.read_file(open(self.options.configfile))\r\n+        self.config = config\r\n+\r\n+        if self.options.descriptors is None:\r\n+            # Prefer BDB unless it isn't available\r\n+            if self.is_bdb_compiled():\r\n+                self.options.descriptors = False\r\n+            elif self.is_sqlite_compiled():\r\n+                self.options.descriptors = True\r\n+            # If neither are compiled, tests requiring a wallet will be skipped and the value of self.options.descriptors won't matter\r\n+\r\n     def setup(self):\r\n         \"\"\"Call this method to start up the test framework object with options set.\"\"\"\r\n \r\n@@ -210,9 +219,8 @@ class BitcoinTestFramework(metaclass=BitcoinTestMetaClass):\r\n \r\n         self.options.cachedir = os.path.abspath(self.options.cachedir)\r\n \r\n-        config = configparser.ConfigParser()\r\n-        config.read_file(open(self.options.configfile))\r\n-        self.config = config\r\n+        config = self.config\r\n+\r\n         fname_bitcoind = os.path.join(\r\n             config[\"environment\"][\"BUILDDIR\"],\r\n             \"src\",\r\n@@ -231,9 +239,6 @@ class BitcoinTestFramework(metaclass=BitcoinTestMetaClass):\r\n             os.path.join(config['environment']['BUILDDIR'], 'src', 'qt'), os.environ['PATH']\r\n         ])\r\n \r\n-        # Determine descriptors default\r\n-        self.options.descriptors = self.get_use_descriptors()\r\n-\r\n         # Set up temp directory and start logging\r\n         if self.options.tmpdir:\r\n             self.options.tmpdir = os.path.abspath(self.options.tmpdir)\r\n@@ -847,14 +852,3 @@ class BitcoinTestFramework(metaclass=BitcoinTestMetaClass):\r\n     def is_bdb_compiled(self):\r\n         \"\"\"Checks whether the wallet module was compiled with BDB support.\"\"\"\r\n         return self.config[\"components\"].getboolean(\"USE_BDB\")\r\n-\r\n-    def get_use_descriptors(self):\r\n-        descriptors = self.options.descriptors\r\n-        if descriptors is None:\r\n-            # Prefer BDB unless it isn't available\r\n-            if self.is_bdb_compiled():\r\n-                descriptors = False\r\n-            elif self.is_sqlite_compiled():\r\n-                descriptors = True\r\n-            # If neither are compiled, tests requiring a wallet will be skipped and the value of self.options.descriptors won't matter\r\n-        return descriptors\r\n```\r\n\r\nWould be great to see these changes backported so this PR is easy to understand and review without  @<!-- -->property and get_use_descriptors complications\r\n\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-745698726",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4186521927,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDE4NjUyMTkyNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4186521927",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-09T00:33:02Z"
    },
    {
      "event": "commented",
      "id": 757062331,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzA2MjMzMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757062331",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-09T00:33:07Z",
      "updated_at": "2021-01-09T00:33:07Z",
      "author_association": "MEMBER",
      "body": "Included @ryanofsky's suggestions. Also rebased to fix two silent merge conflicts.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-757062331",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "mentioned",
      "id": 4186522011,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDE4NjUyMjAxMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4186522011",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-09T00:33:07Z"
    },
    {
      "event": "subscribed",
      "id": 4186522012,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQxODY1MjIwMTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4186522012",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-09T00:33:07Z"
    },
    {
      "event": "reviewed",
      "id": 567604526,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NjA0NTI2",
      "url": null,
      "actor": null,
      "commit_id": "86b3c3d84bd57dffb3b5e47cd1a076bec62c7e92",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK 5a985cd6656afe976f73b3276017e22055a8050c. I think this PR is a nice improvement, getting tests less tied to the legacy wallet and also making test init order more rational and making behavior more explicit. I did leave a lot of suggestions for improvement and think it would be great if you could look into them.\r\n\r\n---\r\n\r\nre: Summary https://github.com/bitcoin/bitcoin/pull/20267#issue-512655353\r\n\r\n> Fixes the tests for #20202.\r\n\r\nIdeally the PR would have a summary that doesn't require digging into other issues, and indicate up front why would reviewers might be interested in this PR. Would change this to something like: \"This PR fixes tests that currently fail when bitcoin is configured with the `--without-bdb` option, which was recently added in #20202.\"\r\n\r\n> When BDB is not compiled, the wallet tests that rely on the legacy wallet will be disabled. Other tests not necessarily requiring the wallet, but can optionally test behavior with the wallet, are updated to handle the different wallet types. One test, `rpc_net.py`, which only uses the wallet to setup a few things, is changed to use the test framework's MiniWallet instead.\r\n>\r\n> For the majority of tests, changes are made so that they can be run with either legacy wallets or descriptor wallets without materially effecting the test. Most tests only need the wallet for balance and transactions, so the type of wallet is not an important part of those tests.\r\n>\r\n> The tests which rely on or test specific legacy wallet behavior are disabled or skipped if BDB is not compiled. Since these tests can be testing for general wallet things as well, the test file itself may not always be outright skipped, but rather some components of the tests skipped.\r\n\r\nThis is very jumbled. It talks about disabled tests two places (at the beginning and end) and buries the most helpful section about the majority of tests in the middle. It also oddly describes the majority of tests strategy after describing one special case of it.\r\n\r\nI think a better way to structure this would be. \"For the most part, this PR tries to update tests which depend on legacy behavior, to work with both legacy and descriptor wallets. In one case, rpc_net.py this was done by [...]. In cases where tests are more tied to legacy features, whole tests or portions of tests are skipped.\"\r\n\r\n> Lastly a helper function `get_use_descriptors()` is added which determines whether descriptors should be used. It returns whatever was given in the command line. If no command line option was given, it will default to BDB if it as compiled, otherwise it will use SQLite (descriptors). If neither are compiled, then the wallet should be disabled and the option won't be used. `get_use_descriptors` is used to set the value for `self.options.descriptors` when neither `--legacy-wallet` nor `--descriptors` is given.\r\n\r\nThis would be a helpful comment to have in the code on the `get_use_descriptors` function but I think it is out of place here and better to drop from the PR description.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#pullrequestreview-567604526",
      "submitted_at": "2021-01-14T01:28:11Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
    },
    {
      "event": "labeled",
      "id": 4223958192,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQyMjM5NTgxOTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4223958192",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-19T18:15:47Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4248408638,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDI0ODQwODYzOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4248408638",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-26T01:09:06Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4248416667,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDI0ODQxNjY2Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4248416667",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-26T01:12:25Z"
    },
    {
      "event": "commented",
      "id": 767216062,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc2NzIxNjA2Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767216062",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-26T01:15:21Z",
      "updated_at": "2021-01-26T01:15:21Z",
      "author_association": "MEMBER",
      "body": "Rebased. I think there are improvements that can be done in followup PRs. For example, #20892 implements running a test twice. But for now, I would like for this to be merged so that we can get more test coverage of descriptor wallets.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-767216062",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "unlabeled",
      "id": 4248677274,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDI0ODY3NzI3NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4248677274",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-26T02:51:12Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 768278128,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc2ODI3ODEyOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768278128",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-27T13:16:11Z",
      "updated_at": "2021-01-27T13:16:11Z",
      "author_association": "MEMBER",
      "body": "CI fail looks like an actual issue:\r\n```\r\n.........Traceback (most recent call last):\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/create_cache.py\", line 27, in <module>\r\n    CreateCache().main()\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/test_framework.py\", line 105, in __init__\r\n    self.default_wallet_name = \"default_wallet\" if self.options.descriptors else \"\"\r\nAttributeError: 'Namespace' object has no attribute 'descriptors'\r\n```",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-768278128",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZjM2MjQyMzg5YmQzZTdlYWNmNTk0Y2U5MDQ5MWU4Y2NjYTcwZjNh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6f36242389bd3e7eacf594ce90491e8ccca70f3a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6f36242389bd3e7eacf594ce90491e8ccca70f3a",
      "tree": {
        "sha": "acb01f8f8bf313861aa0f37d0b75b8cc2db84aa5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/acb01f8f8bf313861aa0f37d0b75b8cc2db84aa5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d0852f39a7a3bfbb36437ef20bf94c263cad632a",
          "sha": "d0852f39a7a3bfbb36437ef20bf94c263cad632a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d0852f39a7a3bfbb36437ef20bf94c263cad632a"
        }
      ],
      "message": "tests: Set descriptors default based on compilation\n\nDetermines whether descriptors should be used based on whether the\n--descriptor or --legacy-wallet option is set,\nand the compiled support. If no option is set and both BDB and SQLite\nare available, it defaults to legacy.\n\nThis is used to switch descriptor agnostic tests between descriptors and\nlegacy wallet.",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-29T21:17:10Z"
      },
      "sha": "6f36242389bd3e7eacf594ce90491e8ccca70f3a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiOWI4OGY1N2E5YjlhMjhlMGYwNjE0YzEyYWUzMDEyY2Y1MDUwYjEw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b9b88f57a9b9a28e0f0614c12ae3012cf5050b10",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b9b88f57a9b9a28e0f0614c12ae3012cf5050b10",
      "tree": {
        "sha": "6d17877cfcf75a849471c9f4b9e16a0937d45cf1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6d17877cfcf75a849471c9f4b9e16a0937d45cf1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6f36242389bd3e7eacf594ce90491e8ccca70f3a",
          "sha": "6f36242389bd3e7eacf594ce90491e8ccca70f3a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6f36242389bd3e7eacf594ce90491e8ccca70f3a"
        }
      ],
      "message": "Skip legacy wallet reliant tests if BDB is not compiled",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-29T23:41:05Z"
      },
      "sha": "b9b88f57a9b9a28e0f0614c12ae3012cf5050b10"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzozNjQxNTk3ZDdlZjZmNTA5N2E5ZTkzY2FiM2VmN2UwZjljODIwMjk2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3641597d7ef6f5097a9e93cab3ef7e0f9c820296",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3641597d7ef6f5097a9e93cab3ef7e0f9c820296",
      "tree": {
        "sha": "7fd21582372b3f2eb1df8495361dcaba3acbc31d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7fd21582372b3f2eb1df8495361dcaba3acbc31d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b9b88f57a9b9a28e0f0614c12ae3012cf5050b10",
          "sha": "b9b88f57a9b9a28e0f0614c12ae3012cf5050b10",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b9b88f57a9b9a28e0f0614c12ae3012cf5050b10"
        }
      ],
      "message": "tests: Don't make any wallets unless wallet is required",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-29T17:51:41Z"
      },
      "sha": "3641597d7ef6f5097a9e93cab3ef7e0f9c820296"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxZjIwY2FjOWQ0MWU1MDc5MDFhMjgxMWQ2ZGI3MTQ3ZDdhYjAzMjFi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1f20cac9d41e507901a2811d6db7147d7ab0321b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1f20cac9d41e507901a2811d6db7147d7ab0321b",
      "tree": {
        "sha": "fc88aa91a293fe94099c15a78daa726a09ffe279",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fc88aa91a293fe94099c15a78daa726a09ffe279"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3641597d7ef6f5097a9e93cab3ef7e0f9c820296",
          "sha": "3641597d7ef6f5097a9e93cab3ef7e0f9c820296",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3641597d7ef6f5097a9e93cab3ef7e0f9c820296"
        }
      ],
      "message": "Disable wallet_descriptor.py bdb format check if BDB is not compiled",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-29T19:19:45Z"
      },
      "sha": "1f20cac9d41e507901a2811d6db7147d7ab0321b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjNzc5NzVhYmMwMTIzYjI5YjBlYjM0ODFiODkxNmU3YzAyNWI3YzRj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c77975abc0123b29b0eb3481b8916e7c025b7c4c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c77975abc0123b29b0eb3481b8916e7c025b7c4c",
      "tree": {
        "sha": "ee37d7e2f2dd0af6eb41accecbef176a5a933dbe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ee37d7e2f2dd0af6eb41accecbef176a5a933dbe"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1f20cac9d41e507901a2811d6db7147d7ab0321b",
          "sha": "1f20cac9d41e507901a2811d6db7147d7ab0321b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1f20cac9d41e507901a2811d6db7147d7ab0321b"
        }
      ],
      "message": "Disable upgrades tests that require BDB if BDB is not compiled",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-29T19:50:40Z"
      },
      "sha": "c77975abc0123b29b0eb3481b8916e7c025b7c4c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxZjFiZWY4ZGJhYjcyMjU4ODRkNzY5YTQ1NDc3ZWUxMWQwZWJmNjU0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1f1bef8dbab7225884d769a45477ee11d0ebf654",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1f1bef8dbab7225884d769a45477ee11d0ebf654",
      "tree": {
        "sha": "43979419aab174c0885080b5acc6d459f9cbdd1c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/43979419aab174c0885080b5acc6d459f9cbdd1c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c77975abc0123b29b0eb3481b8916e7c025b7c4c",
          "sha": "c77975abc0123b29b0eb3481b8916e7c025b7c4c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c77975abc0123b29b0eb3481b8916e7c025b7c4c"
        }
      ],
      "message": "Have feature_filelock.py test both bdb and sqlite, depending on compiled",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-29T19:55:37Z"
      },
      "sha": "1f1bef8dbab7225884d769a45477ee11d0ebf654"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3YzcxYzYyN2QyOGYwY2RkYWYyMzQ5YTU1MzM2Mjc4YTY4MWMyN2My",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7c71c627d28f0cddaf2349a55336278a681c27c2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7c71c627d28f0cddaf2349a55336278a681c27c2",
      "tree": {
        "sha": "dadf9a7023a85d253279b1652c027dedd017b96d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dadf9a7023a85d253279b1652c027dedd017b96d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1f1bef8dbab7225884d769a45477ee11d0ebf654",
          "sha": "1f1bef8dbab7225884d769a45477ee11d0ebf654",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1f1bef8dbab7225884d769a45477ee11d0ebf654"
        }
      ],
      "message": "Setup wallets with descriptors for feature_notifications",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-29T20:37:05Z"
      },
      "sha": "7c71c627d28f0cddaf2349a55336278a681c27c2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0ZGUyMzgyNGIwYzcxMWVjZTY4ZjlmYzAwN2ZmYWMxMjEyNjcxMGFh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4de23824b0c711ece68f9fc007ffac12126710aa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4de23824b0c711ece68f9fc007ffac12126710aa",
      "tree": {
        "sha": "88263a3fa6ab290b2a032e46160c56b78598437f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/88263a3fa6ab290b2a032e46160c56b78598437f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7c71c627d28f0cddaf2349a55336278a681c27c2",
          "sha": "7c71c627d28f0cddaf2349a55336278a681c27c2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7c71c627d28f0cddaf2349a55336278a681c27c2"
        }
      ],
      "message": "Setup wallets for interface_bitcoin_cli.py",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-29T20:42:14Z"
      },
      "sha": "4de23824b0c711ece68f9fc007ffac12126710aa"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0ZDAzZWY5YTczY2ViNWVmNGU5ZDE4NGExMzViY2E2YmRlYjhjMzEx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4d03ef9a73ceb5ef4e9d184a135bca6bdeb8c311",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4d03ef9a73ceb5ef4e9d184a135bca6bdeb8c311",
      "tree": {
        "sha": "acef9a1a93d806fe21dd2fee7a0ba26947275467",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/acef9a1a93d806fe21dd2fee7a0ba26947275467"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4de23824b0c711ece68f9fc007ffac12126710aa",
          "sha": "4de23824b0c711ece68f9fc007ffac12126710aa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4de23824b0c711ece68f9fc007ffac12126710aa"
        }
      ],
      "message": "Use MiniWallet in rpc_net.py",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-29T22:00:44Z"
      },
      "sha": "4d03ef9a73ceb5ef4e9d184a135bca6bdeb8c311"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzowOTUxNGUxYmVmNDY0NDRhNjdjZGU5ZmYxM2U3NmJkNGI5ZjhjN2Fj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/09514e1bef46444a67cde9ff13e76bd4b9f8c7ac",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/09514e1bef46444a67cde9ff13e76bd4b9f8c7ac",
      "tree": {
        "sha": "8b6874db7dfe8b7e1a7c81e47eed9b8e2f52e3e7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8b6874db7dfe8b7e1a7c81e47eed9b8e2f52e3e7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4d03ef9a73ceb5ef4e9d184a135bca6bdeb8c311",
          "sha": "4d03ef9a73ceb5ef4e9d184a135bca6bdeb8c311",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4d03ef9a73ceb5ef4e9d184a135bca6bdeb8c311"
        }
      ],
      "message": "Setup wallets for interface_zmq.py",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-10-29T22:07:09Z"
      },
      "sha": "09514e1bef46444a67cde9ff13e76bd4b9f8c7ac"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiMWI2NzllMGFiN2E5OTgxZTNlNzg0MjRmZTg4MzZlZGQ1OWFiZjZm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b1b679e0ab7a9981e3e78424fe8836edd59abf6f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b1b679e0ab7a9981e3e78424fe8836edd59abf6f",
      "tree": {
        "sha": "aad9ad557f99b27a8392f42141652b99cd6e584f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/aad9ad557f99b27a8392f42141652b99cd6e584f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/09514e1bef46444a67cde9ff13e76bd4b9f8c7ac",
          "sha": "09514e1bef46444a67cde9ff13e76bd4b9f8c7ac",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/09514e1bef46444a67cde9ff13e76bd4b9f8c7ac"
        }
      ],
      "message": "Explicitly mark legacy wallet tests as such\n\nSome tests are intended to test only legacy wallet behavior. With\nautomatic switching of wallet type, we need to make them explicit",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-11-06T19:22:05Z"
      },
      "sha": "b1b679e0ab7a9981e3e78424fe8836edd59abf6f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYmFlYTdiZmU0NDgyMjcxMGEzNjYwMWM2YjBmZWJiZDVlMzNkZmJk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fbaea7bfe44822710a36601c6b0febbd5e33dfbd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fbaea7bfe44822710a36601c6b0febbd5e33dfbd",
      "tree": {
        "sha": "3f73564a1ed79c98d4b2a3f78d0916082381a9ce",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f73564a1ed79c98d4b2a3f78d0916082381a9ce"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b1b679e0ab7a9981e3e78424fe8836edd59abf6f",
          "sha": "b1b679e0ab7a9981e3e78424fe8836edd59abf6f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b1b679e0ab7a9981e3e78424fe8836edd59abf6f"
        }
      ],
      "message": "Require legacy wallet for wallet_upgradewallet.py",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-11-06T20:34:06Z"
      },
      "sha": "fbaea7bfe44822710a36601c6b0febbd5e33dfbd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxMTk0Y2Y5MjY5ZTZjNGJmNjdiMDljNDc2NmY0MmJmMTczZDEyYzBh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1194cf9269e6c4bf67b09c4766f42bf173d12c0a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1194cf9269e6c4bf67b09c4766f42bf173d12c0a",
      "tree": {
        "sha": "eb6978c5404df129b746ef94d696790e46f4124c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/eb6978c5404df129b746ef94d696790e46f4124c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fbaea7bfe44822710a36601c6b0febbd5e33dfbd",
          "sha": "fbaea7bfe44822710a36601c6b0febbd5e33dfbd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fbaea7bfe44822710a36601c6b0febbd5e33dfbd"
        }
      ],
      "message": "Fix wallet_send.py wallet setup to work with descriptors\n\nFixes the wallet setup so this test works with descriptor wallets. Also\nenabled explicit descriptor and legacy wallet testing in the test\nrunner.",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-11-06T20:34:41Z"
      },
      "sha": "1194cf9269e6c4bf67b09c4766f42bf173d12c0a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0OTc5N2MzY2NmYmI5ZjdhYzljMWZiYjU3NGQzNWIzMTVjMTAzODA1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "tree": {
        "sha": "297808e112ee03f31ed1af462dcf87f81266ce4f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/297808e112ee03f31ed1af462dcf87f81266ce4f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1194cf9269e6c4bf67b09c4766f42bf173d12c0a",
          "sha": "1194cf9269e6c4bf67b09c4766f42bf173d12c0a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1194cf9269e6c4bf67b09c4766f42bf173d12c0a"
        }
      ],
      "message": "tests: Disable bdb dump test when no bdb",
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-27T17:52:46Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2021-01-09T00:31:18Z"
      },
      "sha": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805"
    },
    {
      "event": "commented",
      "id": 768462368,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc2ODQ2MjM2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768462368",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-27T17:53:39Z",
      "updated_at": "2021-01-27T17:53:39Z",
      "author_association": "MEMBER",
      "body": "> CI fail looks like an actual issue:\r\n\r\nShould be resolved now.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-768462368",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4257198855,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDI1NzE5ODg1NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4257198855",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-27T17:53:41Z"
    },
    {
      "event": "reviewed",
      "id": 581508843,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgxNTA4ODQz",
      "url": null,
      "actor": null,
      "commit_id": "a831ba6014827d5afc9b423773361350359c94d5",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK a831ba6014827d5afc9b423773361350359c94d5. Changes since last review: implementing many review suggestions (thanks!) adding comments, tweaking logic in small ways, and simplifying the PR description. Also dropped rpc_deprecated.py commit 42b627a3a3ab8ee30db5fa3f6b14be5869c2fcfe no longer needed after #20891\r\n\r\nWould encourage others to review this. There are a lot of commits but almost all the commits are trivial (make sure to tick the ignore whitespace option).\r\n\r\nTwo things it would be good to clean up later:\r\n\r\n1. It would be good to remove duplicate code added to wallet_send and feature_notifications tests (https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556927365 and https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556977983) that creates different descriptor wallets with the same seeds. From comments it sounds like when more descriptor import stuff is implemented this code can be simplified by reusing existing seeds instead of hardcoding new seeds, but it seems like the tests could be more readable and maintainable even before this if they were refactored to call a common helper function to set up the wallets, instead of adding extra setup to already complicated tests.\r\n2. IMO, handling of sqlite/bdb test variants is moving in a bad direction here and in followup #20892. I think individual test invocations should be as small and fast as possible, and broken up much as possible. I think invoking a test should run one single variant and test runner should responsible for iterating over variants. Advantages of this approach:\r\n   * Faster debug cycles. Tests that fail faster can be debugged faster. Broken up tests can also be parallelized more.\r\n   * More accurate reporting. There's an increasing number of tests that are skipping checks based on compile options and misleadingly reporting skipped checks as passing. We could fix this by expanding test result status from Passing / Failed / Skipped to include a new _Passing but partially skipped_ status. But it would be clearer to avoid this and to break these tests up so \"Passing\" can go back to meaning fully passing with no checks skipped.\r\n   * More straightforward usage. A few tests are ignoring descriptor/legacy options which is inconsistent and confusing.\r\n   * More readable code. Smaller tests are easier to understand and debug, and some tests are doing things like repeating code or defining unnecessary functions and calling them twice to cover multiple variants. Tests would be simpler if test_runner managed all the variations, and tests could just obey options instead of listing variants.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#pullrequestreview-581508843",
      "submitted_at": "2021-02-02T16:07:44Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
    },
    {
      "event": "reviewed",
      "id": 583222857,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgzMjIyODU3",
      "url": null,
      "actor": null,
      "commit_id": "a831ba6014827d5afc9b423773361350359c94d5",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#pullrequestreview-583222857",
      "submitted_at": "2021-02-04T10:03:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
    },
    {
      "event": "commented",
      "id": 773187283,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzE4NzI4Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/773187283",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-04T10:04:08Z",
      "updated_at": "2021-02-04T10:04:08Z",
      "author_association": "MEMBER",
      "body": "Started doing review. Have only one small question, but I'll get back with more detailed feedback later",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-773187283",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4292186223,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDI5MjE4NjIyMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4292186223",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-04T17:39:50Z"
    },
    {
      "event": "reviewed",
      "id": 584260361,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg0MjYwMzYx",
      "url": null,
      "actor": null,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK 49797c3ccfbb9f7ac9c1fbb574d35b315c103805. Only change since last review is dropping last commit. Previous review w/ suggestions for future followup is https://github.com/bitcoin/bitcoin/pull/20267#pullrequestreview-581508843",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#pullrequestreview-584260361",
      "submitted_at": "2021-02-05T11:40:27Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
    },
    {
      "event": "commented",
      "id": 774029261,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc3NDAyOTI2MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/774029261",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-05T13:21:12Z",
      "updated_at": "2021-02-05T13:21:12Z",
      "author_association": "MEMBER",
      "body": "> IMO, handling of sqlite/bdb test variants is moving in a bad direction here and in followup #20892. I think individual test invocations should be as small and fast as possible, \r\n\r\nYes, I think so too. And agree it's good if skipping tests is reported explicitly. However I don't think this PR makes this much worse. But yes it does add some `if self.is_wallet_compiled():`.\r\n\r\nACK 49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-774029261",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "commented",
      "id": 774030686,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc3NDAzMDY4Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/774030686",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-05T13:23:58Z",
      "updated_at": "2021-02-05T13:25:05Z",
      "author_association": "MEMBER",
      "body": "UBsan error in the CI (https://github.com/bitcoin/bitcoin/pull/20267/checks?check_run_id=1832884065) is:\r\n```\r\ntest/fuzz/system.cpp:57:159: runtime error: implicit conversion from type 'int' of value -2049 (32-bit, signed) to type 'unsigned int' changed the value to 4294965247 (32-bit, unsigned)\r\n```\r\nduring the fuzz tests. As these are not touched here, I don't think it needs to block merge.",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#issuecomment-774030686",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20267"
    },
    {
      "event": "merged",
      "id": 4296086914,
      "node_id": "MDExOk1lcmdlZEV2ZW50NDI5NjA4NjkxNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4296086914",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a6b1bf64399fd0f59f4b2bcd328b62dc953552dd",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a6b1bf64399fd0f59f4b2bcd328b62dc953552dd",
      "created_at": "2021-02-05T13:26:34Z"
    },
    {
      "event": "closed",
      "id": 4296086927,
      "node_id": "MDExOkNsb3NlZEV2ZW50NDI5NjA4NjkyNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4296086927",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-05T13:26:34Z"
    },
    {
      "event": "referenced",
      "id": 4298362499,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQyOTgzNjI0OTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4298362499",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4a94c21ec4838ef6eea05fab2b992fd02129eeb1",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/4a94c21ec4838ef6eea05fab2b992fd02129eeb1",
      "created_at": "2021-02-05T23:11:46Z"
    },
    {
      "event": "referenced",
      "id": 4944268893,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ5NDQyNjg4OTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4944268893",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ec84c743444203a9b9bb63b30ab63cec28bc69b9",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/ec84c743444203a9b9bb63b30ab63cec28bc69b9",
      "created_at": "2021-06-27T19:59:27Z"
    },
    {
      "event": "referenced",
      "id": 4944268894,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ5NDQyNjg4OTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4944268894",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f03cb65bfff08e47a8c6bde2ba0cb39ac1d2cd36",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/f03cb65bfff08e47a8c6bde2ba0cb39ac1d2cd36",
      "created_at": "2021-06-27T19:59:27Z"
    },
    {
      "event": "referenced",
      "id": 4944268897,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ5NDQyNjg4OTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4944268897",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "76414422181ffd518bdbad7aa9e64ab863dce360",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/76414422181ffd518bdbad7aa9e64ab863dce360",
      "created_at": "2021-06-27T19:59:27Z"
    },
    {
      "event": "referenced",
      "id": 4944268898,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ5NDQyNjg4OTg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4944268898",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2dd010de2b62527e07c16c6fbec54e8caa1936c0",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/2dd010de2b62527e07c16c6fbec54e8caa1936c0",
      "created_at": "2021-06-27T19:59:27Z"
    },
    {
      "event": "referenced",
      "id": 4944268899,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ5NDQyNjg4OTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4944268899",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5152df21a84069062e7b4fef040bc8cc9f7665f7",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/5152df21a84069062e7b4fef040bc8cc9f7665f7",
      "created_at": "2021-06-27T19:59:27Z"
    },
    {
      "event": "referenced",
      "id": 4944268900,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ5NDQyNjg5MDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4944268900",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b012aad418ded3c2e581eb6eba4b1990f702a69e",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/b012aad418ded3c2e581eb6eba4b1990f702a69e",
      "created_at": "2021-06-27T19:59:27Z"
    },
    {
      "event": "referenced",
      "id": 4944268901,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ5NDQyNjg5MDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4944268901",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4c89b104ca984761c55e62332729dc645e631e86",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/4c89b104ca984761c55e62332729dc645e631e86",
      "created_at": "2021-06-27T19:59:27Z"
    },
    {
      "event": "referenced",
      "id": 4944268902,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ5NDQyNjg5MDI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4944268902",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "7a58d3bb58ade36191e38812bf65b6ba942e0de1",
      "commit_url": "https://api.github.com/repos/bitcoinknots/bitcoin/commits/7a58d3bb58ade36191e38812bf65b6ba942e0de1",
      "created_at": "2021-06-27T19:59:27Z"
    },
    {
      "event": "referenced",
      "id": 5023262046,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwMjMyNjIwNDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5023262046",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "fdf9b3eba3bc4264e77e8670d2506a5015a296ed",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fdf9b3eba3bc4264e77e8670d2506a5015a296ed",
      "created_at": "2021-07-15T05:37:30Z"
    },
    {
      "event": "referenced",
      "id": 5058786302,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUwNTg3ODYzMDI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5058786302",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3b3cf6768105b8f98bb21ce76f63d6f0e19bf20d",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/3b3cf6768105b8f98bb21ce76f63d6f0e19bf20d",
      "created_at": "2021-07-23T01:26:59Z"
    },
    {
      "event": "locked",
      "id": 7199014390,
      "node_id": "LOE_lADOABII584rrQvvzwAAAAGtGD32",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7199014390",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-16T17:03:53Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515261141",
      "pull_request_review_id": 520885524,
      "id": 515261141,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI2MTE0MQ==",
      "diff_hunk": "@@ -808,3 +833,23 @@ def is_wallet_tool_compiled(self):\n     def is_zmq_compiled(self):\n         \"\"\"Checks whether the zmq module was compiled.\"\"\"\n         return self.config[\"components\"].getboolean(\"ENABLE_ZMQ\")\n+\n+    def is_sqlite_compiled(self):\n+        \"\"\"Checks whether the wallet module was compiled.\"\"\"\n+        return self.config[\"components\"].getboolean(\"USE_SQLITE\")\n+\n+    def is_bdb_compiled(self):\n+        \"\"\"Checks whether the wallet module was compiled.\"\"\"\n+        return self.config[\"components\"].getboolean(\"USE_BDB\")\n+\n+    def get_use_descriptors(self):\n+        \"\"\"\n+        Determine whether descriptors should be used based on compilation support and option\n+        Should only be used for tests that explicitly check self.is_wallet_compiled()\n+        \"\"\"\n+        descriptors = self.options.descriptors\n+        if not self.is_bdb_compiled() and self.is_sqlite_compiled() and not descriptors:\n+            descriptors = True\n+        elif self.is_bdb_compiled() and not self.is_sqlite_compiled() and descriptors:\n+            descriptors = False\n+        return descriptors",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 83,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": null,
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm having trouble figuring out the logic here. Is there a more clear and concise way to determine `descriptors`?",
      "created_at": "2020-10-30T17:28:54Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515261141",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515261141"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 850,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 860,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515262567",
      "pull_request_review_id": 520885524,
      "id": 515262567,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI2MjU2Nw==",
      "diff_hunk": "@@ -767,8 +777,23 @@ def skip_if_no_bitcoind_zmq(self):\n \n     def skip_if_no_wallet(self):\n         \"\"\"Skip the running test if wallet has not been compiled.\"\"\"\n+        self.requires_wallet = True\n         if not self.is_wallet_compiled():\n             raise SkipTest(\"wallet has not been compiled.\")\n+        if self.options.descriptors:\n+            self.skip_if_no_sqlite()\n+        else:\n+            self.skip_if_no_bdb()",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 46,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": null,
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Are you able to use `self. get_use_descriptors()` here? To me it seems like logic might be getting duplicated",
      "created_at": "2020-10-30T17:30:44Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515262567",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515262567"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 783,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 797,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515268074",
      "pull_request_review_id": 520885524,
      "id": 515268074,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI2ODA3NA==",
      "diff_hunk": "@@ -101,20 +101,31 @@ def wallet_file(name):\n         #   sub/w5     - to verify relative wallet path is created correctly\n         #   extern/w6  - to verify absolute wallet path is created correctly\n         #   w7_symlink - to verify symlinked wallet path is initialized correctly\n-        #   w8         - to verify existing wallet file is loaded correctly\n+        #   w8         - to verify existing wallet file is loaded correctly. Not tested for SQLite wallets as this is a deprecated BDB behavior.\n         #   ''         - to verify default wallet file is created correctly\n-        wallet_names = ['w1', 'w2', 'w3', 'w', 'sub/w5', os.path.join(self.options.tmpdir, 'extern/w6'), 'w7_symlink', 'w8', self.default_wallet_name]\n+        to_create = ['w1', 'w2', 'w3', 'w', 'sub/w5', 'w7_symlink']\n+        in_wallet_dir = to_create.copy() # Wallets in the wallet dir\n+        in_wallet_dir.append('w7') # w7 is not loaded or created, but will be listed by listwalletdir because w7_symlink\n+        to_create.append(os.path.join(self.options.tmpdir, 'extern/w6')) # External, not in the wallet dir, so we need to avoid adding it to in_wallet_dir\n+        to_load = [self.default_wallet_name]\n+        if not self.options.descriptors:\n+            to_load.append('w8')\n+        wallet_names = to_create + to_load # Wallet names loaded in the wallet\n+        in_wallet_dir += to_load # The loaded wallets are also in the wallet dir\n         self.start_node(0)\n-        for wallet_name in wallet_names[:-2]:\n-            self.nodes[0].createwallet(wallet_name, descriptors=False)\n-        for wallet_name in wallet_names[-2:]:\n+        for wallet_name in to_create:\n+            self.nodes[0].createwallet(wallet_name)\n+        for wallet_name in to_load:\n             self.nodes[0].loadwallet(wallet_name)\n-        assert_equal(sorted(map(lambda w: w['name'], self.nodes[0].listwalletdir()['wallets'])), [self.default_wallet_name, os.path.join('sub', 'w5'), 'w', 'w1', 'w2', 'w3', 'w7', 'w7_symlink', 'w8'])\n+        assert_equal(sorted(map(lambda w: w['name'], self.nodes[0].listwalletdir()['wallets'])), sorted(in_wallet_dir))\n \n         assert_equal(set(node.listwallets()), set(wallet_names))\n \n         # should raise rpc error if wallet path can't be created\n-        assert_raises_rpc_error(-1, \"boost::filesystem::create_directory:\", self.nodes[0].createwallet, \"w8/bad\", descriptors=False)\n+        err_code = -1\n+        if self.options.descriptors:\n+            err_code = -4",
      "path": "test/functional/wallet_multiwallet.py",
      "position": null,
      "original_position": 45,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": null,
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: in places like these would  `err_code = -4 if self.options.descriptors else -1` be easier to follow?",
      "created_at": "2020-10-30T17:35:11Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515268074",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515268074"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 125,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 127,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515274175",
      "pull_request_review_id": 520885524,
      "id": 515274175,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3NDE3NQ==",
      "diff_hunk": "@@ -1011,9 +1013,11 @@ std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const Databas\n \n     Optional<DatabaseFormat> format;\n     if (exists) {\n+#ifdef USE_BDB\n         if (ExistsBerkeleyDatabase(path)) {\n             format = DatabaseFormat::BERKELEY;\n         }\n+#endif\n #ifdef USE_SQLITE",
      "path": "src/wallet/walletdb.cpp",
      "position": null,
      "original_position": 19,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": null,
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It seems like usually you're doing: `#ifdef USE_BDB ... #elif USE_SQLITE`, but here you're doing  `#ifdef USE_BDB ... #ifdef USE_SQLITE`\r\n\r\nShould this be consistent, or does it matter? I'm guessing `USE_BDB` and `USE_SQLITE` can never both be set?",
      "created_at": "2020-10-30T17:44:14Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515274175",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515274175"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 1016,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1021,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515275934",
      "pull_request_review_id": 520885524,
      "id": 515275934,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3NTkzNA==",
      "diff_hunk": "@@ -14,7 +14,9 @@\n #include <util/system.h>\n #include <util/time.h>\n #include <util/translation.h>\n+#ifdef USE_BDB\n #include <wallet/bdb.h>\n+#endif\n #ifdef USE_SQLITE",
      "path": "src/wallet/walletdb.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": null,
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "same, should it be `#elif USE_SQLITE` here?",
      "created_at": "2020-10-30T17:46:52Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515275934",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515275934"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515277183",
      "pull_request_review_id": 520885524,
      "id": 515277183,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3NzE4Mw==",
      "diff_hunk": "@@ -27,11 +27,20 @@ def run_test(self):\n         self.nodes[1].assert_start_raises_init_error(extra_args=['-datadir={}'.format(self.nodes[0].datadir), '-noserver'], expected_msg=expected_msg)\n \n         if self.is_wallet_compiled():\n-            self.nodes[0].createwallet(self.default_wallet_name)\n-            wallet_dir = os.path.join(datadir, 'wallets')\n-            self.log.info(\"Check that we can't start a second bitcoind instance using the same wallet\")\n-            expected_msg = \"Error: Error initializing wallet database environment\"\n-            self.nodes[1].assert_start_raises_init_error(extra_args=['-walletdir={}'.format(wallet_dir), '-wallet=' + self.default_wallet_name, '-noserver'], expected_msg=expected_msg, match=ErrorMatch.PARTIAL_REGEX)\n+            def check_wallet_filelock(descriptors):\n+                self.nodes[0].createwallet(wallet_name=self.default_wallet_name, descriptors=descriptors)\n+                wallet_dir = os.path.join(datadir, 'wallets')\n+                self.log.info(\"Check that we can't start a second bitcoind instance using the same wallet\")\n+                if descriptors:\n+                    expected_msg = \"Error: SQLiteDatabase: Unable to obtain an exclusive lock on the database, is it being used by another bitcoind?\"\n+                else:\n+                    expected_msg = \"Error: Error initializing wallet database environment\"\n+                self.nodes[1].assert_start_raises_init_error(extra_args=['-walletdir={}'.format(wallet_dir), '-wallet=' + self.default_wallet_name, '-noserver'], expected_msg=expected_msg, match=ErrorMatch.PARTIAL_REGEX)\n+\n+            if self.is_bdb_compiled():\n+                check_wallet_filelock(False)\n+            if self.is_sqlite_compiled():\n+                check_wallet_filelock(True)",
      "path": "test/functional/feature_filelock.py",
      "position": 32,
      "original_position": 22,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": null,
      "user": {
        "login": "mjdietzx",
        "id": 7217256,
        "node_id": "MDQ6VXNlcjcyMTcyNTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mjdietzx",
        "html_url": "https://github.com/mjdietzx",
        "followers_url": "https://api.github.com/users/mjdietzx/followers",
        "following_url": "https://api.github.com/users/mjdietzx/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mjdietzx/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mjdietzx/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
        "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
        "repos_url": "https://api.github.com/users/mjdietzx/repos",
        "events_url": "https://api.github.com/users/mjdietzx/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can this be condensed to a one-liner: `check_wallet_filelock(self.is_sqlite_compiled())`",
      "created_at": "2020-10-30T17:49:07Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515277183",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515277183"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": 43,
      "original_start_line": 40,
      "start_side": "RIGHT",
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515303197",
      "pull_request_review_id": 520937226,
      "id": 515303197,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwMzE5Nw==",
      "diff_hunk": "@@ -767,8 +777,23 @@ def skip_if_no_bitcoind_zmq(self):\n \n     def skip_if_no_wallet(self):\n         \"\"\"Skip the running test if wallet has not been compiled.\"\"\"\n+        self.requires_wallet = True\n         if not self.is_wallet_compiled():\n             raise SkipTest(\"wallet has not been compiled.\")\n+        if self.options.descriptors:\n+            self.skip_if_no_sqlite()\n+        else:\n+            self.skip_if_no_bdb()",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 46,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": 515262567,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No, `get_use_descriptors()` is used to switch between legacy and descriptors for the tests where the type is not explicitly being set. This is different from the wallet tests (that will call this `skip_if_no_wallet()`) which are testing specific descriptor and legacy behavior.",
      "created_at": "2020-10-30T18:34:47Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515303197",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515303197"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 783,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 797,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515303762",
      "pull_request_review_id": 520937940,
      "id": 515303762,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwMzc2Mg==",
      "diff_hunk": "@@ -808,3 +833,23 @@ def is_wallet_tool_compiled(self):\n     def is_zmq_compiled(self):\n         \"\"\"Checks whether the zmq module was compiled.\"\"\"\n         return self.config[\"components\"].getboolean(\"ENABLE_ZMQ\")\n+\n+    def is_sqlite_compiled(self):\n+        \"\"\"Checks whether the wallet module was compiled.\"\"\"\n+        return self.config[\"components\"].getboolean(\"USE_SQLITE\")\n+\n+    def is_bdb_compiled(self):\n+        \"\"\"Checks whether the wallet module was compiled.\"\"\"\n+        return self.config[\"components\"].getboolean(\"USE_BDB\")\n+\n+    def get_use_descriptors(self):\n+        \"\"\"\n+        Determine whether descriptors should be used based on compilation support and option\n+        Should only be used for tests that explicitly check self.is_wallet_compiled()\n+        \"\"\"\n+        descriptors = self.options.descriptors\n+        if not self.is_bdb_compiled() and self.is_sqlite_compiled() and not descriptors:\n+            descriptors = True\n+        elif self.is_bdb_compiled() and not self.is_sqlite_compiled() and descriptors:\n+            descriptors = False\n+        return descriptors",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 83,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": 515261141,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not really.\r\n\r\nThe purpose of this function is to enable or disable features depending on whether support is compiled and the current settings, for those tests where the descriptors setting is not important to the test and only need to just work.",
      "created_at": "2020-10-30T18:35:49Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515303762",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515303762"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 850,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 860,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515305897",
      "pull_request_review_id": 520940887,
      "id": 515305897,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwNTg5Nw==",
      "diff_hunk": "@@ -1011,9 +1013,11 @@ std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const Databas\n \n     Optional<DatabaseFormat> format;\n     if (exists) {\n+#ifdef USE_BDB\n         if (ExistsBerkeleyDatabase(path)) {\n             format = DatabaseFormat::BERKELEY;\n         }\n+#endif\n #ifdef USE_SQLITE",
      "path": "src/wallet/walletdb.cpp",
      "position": null,
      "original_position": 19,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": 515274175,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No, it's supposed to `#ifdef ... #ifdef` because both `USE_BDB` and `USE_SQLITE` can both be set, and in fact, is the default.\r\n\r\nThe instances where `#ifdef...#elif` is used is only because one wallet type must be defaulted to, and for now, we default to BDB.",
      "created_at": "2020-10-30T18:40:16Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515305897",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515305897"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 1016,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1021,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515306142",
      "pull_request_review_id": 520941204,
      "id": 515306142,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwNjE0Mg==",
      "diff_hunk": "@@ -27,11 +27,20 @@ def run_test(self):\n         self.nodes[1].assert_start_raises_init_error(extra_args=['-datadir={}'.format(self.nodes[0].datadir), '-noserver'], expected_msg=expected_msg)\n \n         if self.is_wallet_compiled():\n-            self.nodes[0].createwallet(self.default_wallet_name)\n-            wallet_dir = os.path.join(datadir, 'wallets')\n-            self.log.info(\"Check that we can't start a second bitcoind instance using the same wallet\")\n-            expected_msg = \"Error: Error initializing wallet database environment\"\n-            self.nodes[1].assert_start_raises_init_error(extra_args=['-walletdir={}'.format(wallet_dir), '-wallet=' + self.default_wallet_name, '-noserver'], expected_msg=expected_msg, match=ErrorMatch.PARTIAL_REGEX)\n+            def check_wallet_filelock(descriptors):\n+                self.nodes[0].createwallet(wallet_name=self.default_wallet_name, descriptors=descriptors)\n+                wallet_dir = os.path.join(datadir, 'wallets')\n+                self.log.info(\"Check that we can't start a second bitcoind instance using the same wallet\")\n+                if descriptors:\n+                    expected_msg = \"Error: SQLiteDatabase: Unable to obtain an exclusive lock on the database, is it being used by another bitcoind?\"\n+                else:\n+                    expected_msg = \"Error: Error initializing wallet database environment\"\n+                self.nodes[1].assert_start_raises_init_error(extra_args=['-walletdir={}'.format(wallet_dir), '-wallet=' + self.default_wallet_name, '-noserver'], expected_msg=expected_msg, match=ErrorMatch.PARTIAL_REGEX)\n+\n+            if self.is_bdb_compiled():\n+                check_wallet_filelock(False)\n+            if self.is_sqlite_compiled():\n+                check_wallet_filelock(True)",
      "path": "test/functional/feature_filelock.py",
      "position": 32,
      "original_position": 22,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": 515277183,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "When both are compiled, we want to test both cases.",
      "created_at": "2020-10-30T18:40:49Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515306142",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515306142"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": 43,
      "original_start_line": 40,
      "start_side": "RIGHT",
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515306249",
      "pull_request_review_id": 520941356,
      "id": 515306249,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwNjI0OQ==",
      "diff_hunk": "@@ -14,7 +14,9 @@\n #include <util/system.h>\n #include <util/time.h>\n #include <util/translation.h>\n+#ifdef USE_BDB\n #include <wallet/bdb.h>\n+#endif\n #ifdef USE_SQLITE",
      "path": "src/wallet/walletdb.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": 515275934,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No, if both are compiled, then we need both headers.",
      "created_at": "2020-10-30T18:41:04Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515306249",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515306249"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515306633",
      "pull_request_review_id": 520941797,
      "id": 515306633,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwNjYzMw==",
      "diff_hunk": "@@ -101,20 +101,31 @@ def wallet_file(name):\n         #   sub/w5     - to verify relative wallet path is created correctly\n         #   extern/w6  - to verify absolute wallet path is created correctly\n         #   w7_symlink - to verify symlinked wallet path is initialized correctly\n-        #   w8         - to verify existing wallet file is loaded correctly\n+        #   w8         - to verify existing wallet file is loaded correctly. Not tested for SQLite wallets as this is a deprecated BDB behavior.\n         #   ''         - to verify default wallet file is created correctly\n-        wallet_names = ['w1', 'w2', 'w3', 'w', 'sub/w5', os.path.join(self.options.tmpdir, 'extern/w6'), 'w7_symlink', 'w8', self.default_wallet_name]\n+        to_create = ['w1', 'w2', 'w3', 'w', 'sub/w5', 'w7_symlink']\n+        in_wallet_dir = to_create.copy() # Wallets in the wallet dir\n+        in_wallet_dir.append('w7') # w7 is not loaded or created, but will be listed by listwalletdir because w7_symlink\n+        to_create.append(os.path.join(self.options.tmpdir, 'extern/w6')) # External, not in the wallet dir, so we need to avoid adding it to in_wallet_dir\n+        to_load = [self.default_wallet_name]\n+        if not self.options.descriptors:\n+            to_load.append('w8')\n+        wallet_names = to_create + to_load # Wallet names loaded in the wallet\n+        in_wallet_dir += to_load # The loaded wallets are also in the wallet dir\n         self.start_node(0)\n-        for wallet_name in wallet_names[:-2]:\n-            self.nodes[0].createwallet(wallet_name, descriptors=False)\n-        for wallet_name in wallet_names[-2:]:\n+        for wallet_name in to_create:\n+            self.nodes[0].createwallet(wallet_name)\n+        for wallet_name in to_load:\n             self.nodes[0].loadwallet(wallet_name)\n-        assert_equal(sorted(map(lambda w: w['name'], self.nodes[0].listwalletdir()['wallets'])), [self.default_wallet_name, os.path.join('sub', 'w5'), 'w', 'w1', 'w2', 'w3', 'w7', 'w7_symlink', 'w8'])\n+        assert_equal(sorted(map(lambda w: w['name'], self.nodes[0].listwalletdir()['wallets'])), sorted(in_wallet_dir))\n \n         assert_equal(set(node.listwallets()), set(wallet_names))\n \n         # should raise rpc error if wallet path can't be created\n-        assert_raises_rpc_error(-1, \"boost::filesystem::create_directory:\", self.nodes[0].createwallet, \"w8/bad\", descriptors=False)\n+        err_code = -1\n+        if self.options.descriptors:\n+            err_code = -4",
      "path": "test/functional/wallet_multiwallet.py",
      "position": null,
      "original_position": 45,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": 515268074,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done in upstream PR #18788",
      "created_at": "2020-10-30T18:41:49Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r515306633",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515306633"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 125,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 127,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518397745",
      "pull_request_review_id": 524708979,
      "id": 518397745,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM5Nzc0NQ==",
      "diff_hunk": "@@ -69,9 +71,12 @@ void WalletInit::AddWalletOptions(ArgsManager& argsman) const\n #endif\n     argsman.AddArg(\"-walletrbf\", strprintf(\"Send transactions with full-RBF opt-in enabled (RPC only, default: %u)\", DEFAULT_WALLET_RBF), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n \n+#ifdef USE_BDB",
      "path": "src/wallet/init.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "0cbff9303729dddaad781a4d285c141a86053687",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Do not compile BDB things when USE_BDB is defined\" (0cbff9303729dddaad781a4d285c141a86053687)\r\n\r\nI doubt it matters, but for consistency with the enable wallet option, it might make sense to add these arguments `argsman.AddHiddenArgs` when use_bdb is disabled, so configuation files specifying these options aren't rejected",
      "created_at": "2020-11-05T22:04:46Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r518397745",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518397745"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518413477",
      "pull_request_review_id": 524708979,
      "id": 518413477,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQxMzQ3Nw==",
      "diff_hunk": "@@ -1059,8 +1063,11 @@ std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const Databas\n #else\n     assert(format != DatabaseFormat::SQLITE);\n #endif\n-\n+#ifdef USE_BDB\n     return MakeBerkeleyDatabase(path, options, status, error);\n+#else\n+    return nullptr;",
      "path": "src/wallet/walletdb.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "0cbff9303729dddaad781a4d285c141a86053687",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Do not compile BDB things when USE_BDB is defined\" (0cbff9303729dddaad781a4d285c141a86053687)\r\n\r\nIn `MakeDatabase`:\r\n\r\n- It doesn't seem ideal to return null with success status and no error message if bdb isn't available.\r\n- It also doesn't seem ideal to assert false above if sqlite isn't available.\r\n- It also puts an unnecessary burden on callers that don't care which database backend is used to have to write code figuring out on their own what backends are available before calling this function. (Code added above in wallet_tests.cpp is an example).\r\n\r\nAll of this seems easy to fix. Would suggest:\r\n\r\n```c++\r\n    // If format not specified or detected, choose default format based on what\r\n    // is available, and prefer BDB over SQLite.\r\n    if (!format) {\r\n#ifdef USE_SQLITE\r\n        format = DatabaseFormat::SQLITE;\r\n#endif\r\n#ifdef USE_BDB\r\n        format = DatabaseFormat::BDB;\r\n#endif\r\n    }\r\n\r\n    if (format == DatabaseFormat::SQLITE) {\r\n#ifdef USE_SQLITE\r\n        return MakeSQLiteDatabase(path, options, status, error);\r\n#endif\r\n        error = Untranslated(strprintf(\"Failed to open database path '%s'. Build does not support SQLite database format.\", path.string()));\r\n        status = DatabaseStatus::FAILED_BAD_FORMAT;\r\n        return nullptr;\r\n    }\r\n\r\n#ifdef USE_BDB\r\n    return MakeBerkeleyDatabase(path, options, status, error);\r\n#endif\r\n    error = Untranslated(strprintf(\"Failed to open database path '%s'. Build does not support Berkeley DB database format.\", path.string()));\r\n    status = DatabaseStatus::FAILED_BAD_FORMAT;\r\n    return nullptr;\r\n```",
      "created_at": "2020-11-05T22:39:41Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r518413477",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518413477"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1069,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518415945",
      "pull_request_review_id": 524708979,
      "id": 518415945,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQxNTk0NQ==",
      "diff_hunk": "@@ -41,6 +41,11 @@ static std::shared_ptr<CWallet> TestLoadWallet(interfaces::Chain& chain)\n     DatabaseStatus status;\n     bilingual_str error;\n     std::vector<bilingual_str> warnings;\n+#ifdef USE_BDB",
      "path": "src/wallet/test/wallet_tests.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "0cbff9303729dddaad781a4d285c141a86053687",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Do not compile BDB things when USE_BDB is defined\" (0cbff9303729dddaad781a4d285c141a86053687)\r\n\r\nThis new code can be deleted with the suggested change to `MakeDatabase` above. The `MakeDatabase` function can figure out what formats are available without putting the burden on callers.",
      "created_at": "2020-11-05T22:45:23Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r518415945",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518415945"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518420893",
      "pull_request_review_id": 524708979,
      "id": 518420893,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQyMDg5Mw==",
      "diff_hunk": "@@ -824,3 +824,15 @@ def is_zmq_compiled(self):\n     def is_sqlite_compiled(self):\n         \"\"\"Checks whether the wallet module was compiled.\"\"\"\n         return self.config[\"components\"].getboolean(\"USE_SQLITE\")\n+\n+    def get_use_descriptors(self):\n+        \"\"\"\n+        Determine whether descriptors should be used based on compilation support and option\n+        Should only be used for tests that explicitly check self.is_wallet_compiled()\n+        \"\"\"\n+        descriptors = self.options.descriptors\n+        if not self.is_bdb_compiled() and self.is_sqlite_compiled() and not descriptors:",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 11,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "d97e22f5244cb913ef84953309a3eaee07f54c1c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add a helper to determine whether descriptors should be used\" (d97e22f5244cb913ef84953309a3eaee07f54c1c)\r\n\r\nI haven't looked yet at how this function is used, but it seem dangerous if it will be used to silently override `--descriptors` or `--legacy-wallet` options that were specified. This would be bad because it would give the impression that requested tests passed when in reality they were never run, and different tests were done instead. A safer alternative would set `self.option.descriptors` to `None` when no option is passed, `True` when `--descriptors` is passed, and `False` when `--legacy` is passed. Then logic like the following would be used to determine how to run tests:\r\n\r\n```python\r\ndescriptors = self.option.descriptors\r\nif descriptor is None:\r\n    # Current default is to use legacy instead of descriptor wallets unless bdb is unavailable\r\n    descriptors = not self.is_bdb_compiled()\r\nif descriptors and not self.is_sqlite_compiled():\r\n    raise SkipTest(\"sqlite has not been compiled.\")\r\nif not descriptors and not self.is_bdb_compiled():\r\n    raise SkipTest(\"bdb has not been compiled.\")\r\nreturn descriptors\r\n```",
      "created_at": "2020-11-05T22:57:58Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r518420893",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518420893"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 834,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518934010",
      "pull_request_review_id": 525400863,
      "id": 518934010,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODkzNDAxMA==",
      "diff_hunk": "@@ -69,9 +71,12 @@ void WalletInit::AddWalletOptions(ArgsManager& argsman) const\n #endif\n     argsman.AddArg(\"-walletrbf\", strprintf(\"Send transactions with full-RBF opt-in enabled (RPC only, default: %u)\", DEFAULT_WALLET_RBF), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n \n+#ifdef USE_BDB",
      "path": "src/wallet/init.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "0cbff9303729dddaad781a4d285c141a86053687",
      "in_reply_to_id": 518397745,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done in upstream #20202 ",
      "created_at": "2020-11-06T18:37:18Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r518934010",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518934010"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518934067",
      "pull_request_review_id": 525400910,
      "id": 518934067,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODkzNDA2Nw==",
      "diff_hunk": "@@ -1059,8 +1063,11 @@ std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const Databas\n #else\n     assert(format != DatabaseFormat::SQLITE);\n #endif\n-\n+#ifdef USE_BDB\n     return MakeBerkeleyDatabase(path, options, status, error);\n+#else\n+    return nullptr;",
      "path": "src/wallet/walletdb.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "0cbff9303729dddaad781a4d285c141a86053687",
      "in_reply_to_id": 518413477,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done in upstream #20202 ",
      "created_at": "2020-11-06T18:37:22Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r518934067",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518934067"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1069,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518934105",
      "pull_request_review_id": 525400962,
      "id": 518934105,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODkzNDEwNQ==",
      "diff_hunk": "@@ -41,6 +41,11 @@ static std::shared_ptr<CWallet> TestLoadWallet(interfaces::Chain& chain)\n     DatabaseStatus status;\n     bilingual_str error;\n     std::vector<bilingual_str> warnings;\n+#ifdef USE_BDB",
      "path": "src/wallet/test/wallet_tests.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "0cbff9303729dddaad781a4d285c141a86053687",
      "in_reply_to_id": 518415945,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done in upstream #20202 ",
      "created_at": "2020-11-06T18:37:27Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r518934105",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/518934105"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519014238",
      "pull_request_review_id": 525506046,
      "id": 519014238,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAxNDIzOA==",
      "diff_hunk": "@@ -824,3 +824,15 @@ def is_zmq_compiled(self):\n     def is_sqlite_compiled(self):\n         \"\"\"Checks whether the wallet module was compiled.\"\"\"\n         return self.config[\"components\"].getboolean(\"USE_SQLITE\")\n+\n+    def get_use_descriptors(self):\n+        \"\"\"\n+        Determine whether descriptors should be used based on compilation support and option\n+        Should only be used for tests that explicitly check self.is_wallet_compiled()\n+        \"\"\"\n+        descriptors = self.options.descriptors\n+        if not self.is_bdb_compiled() and self.is_sqlite_compiled() and not descriptors:",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 11,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "d97e22f5244cb913ef84953309a3eaee07f54c1c",
      "in_reply_to_id": 518420893,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This isn't used to skip tests.\r\n\r\nI've made a change that somewhat incorporates what you suggest.",
      "created_at": "2020-11-06T21:29:03Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r519014238",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519014238"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 834,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523007716",
      "pull_request_review_id": 530137014,
      "id": 523007716,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzAwNzcxNg==",
      "diff_hunk": "@@ -38,6 +38,12 @@\n /* Define to 1 to enable wallet functions */\n #define ENABLE_WALLET 1\n \n+/* Define to 1 to enable BDB wallet */\n+#define USE_BDB 1\n+\n+/* Define to 1 to enable SQLite wallet */\n+#define USE_SQLITE 1",
      "path": "build_msvc/bitcoin_config.h",
      "position": null,
      "original_position": 8,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "caf3062e6275d3a2c941e0e002fb6581c277f65b",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should we be adding this for 0.21?",
      "created_at": "2020-11-13T15:04:35Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r523007716",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523007716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523014805",
      "pull_request_review_id": 530146324,
      "id": 523014805,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzAxNDgwNQ==",
      "diff_hunk": "@@ -38,6 +38,12 @@\n /* Define to 1 to enable wallet functions */\n #define ENABLE_WALLET 1\n \n+/* Define to 1 to enable BDB wallet */\n+#define USE_BDB 1\n+\n+/* Define to 1 to enable SQLite wallet */\n+#define USE_SQLITE 1",
      "path": "build_msvc/bitcoin_config.h",
      "position": null,
      "original_position": 8,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "caf3062e6275d3a2c941e0e002fb6581c277f65b",
      "in_reply_to_id": 523007716,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Should we be adding this for 0.21?\r\n\r\nNo opinion (seems fine, not necessary), but `#define USE_SQLITE 1` is part of base PR #20202. @achow101, PR description could be clearer and say ***This is based on #20202.*** or something along those lines since it seems like I'm not the only person to not realize this PR contains changes from another PR",
      "created_at": "2020-11-13T15:15:21Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r523014805",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523014805"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523015180",
      "pull_request_review_id": 530146739,
      "id": 523015180,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzAxNTE4MA==",
      "diff_hunk": "@@ -27,6 +28,7 @@ bool RecoverDatabaseFile(const fs::path& file_path, bilingual_str& error, std::v\n     DatabaseStatus status;\n     options.require_existing = true;\n     options.verify = false;\n+    options.require_format = DatabaseFormat::BERKELEY;",
      "path": "src/wallet/salvage.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "caf3062e6275d3a2c941e0e002fb6581c277f65b",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is this another bugfix we should put in 0.21?",
      "created_at": "2020-11-13T15:15:52Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r523015180",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523015180"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523079050",
      "pull_request_review_id": 530230316,
      "id": 523079050,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzA3OTA1MA==",
      "diff_hunk": "@@ -27,6 +28,7 @@ bool RecoverDatabaseFile(const fs::path& file_path, bilingual_str& error, std::v\n     DatabaseStatus status;\n     options.require_existing = true;\n     options.verify = false;\n+    options.require_format = DatabaseFormat::BERKELEY;",
      "path": "src/wallet/salvage.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "caf3062e6275d3a2c941e0e002fb6581c277f65b",
      "in_reply_to_id": 523015180,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's not strictly necessary. Other stuff later like trying to actually open the wallet file if it isn't BDB will still fail and we won't do anything to the file. It will just have a slightly worse error message.",
      "created_at": "2020-11-13T16:55:22Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r523079050",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523079050"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523229115",
      "pull_request_review_id": 530411447,
      "id": 523229115,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIyOTExNQ==",
      "diff_hunk": "@@ -808,3 +833,23 @@ def is_wallet_tool_compiled(self):\n     def is_zmq_compiled(self):\n         \"\"\"Checks whether the zmq module was compiled.\"\"\"\n         return self.config[\"components\"].getboolean(\"ENABLE_ZMQ\")\n+\n+    def is_sqlite_compiled(self):\n+        \"\"\"Checks whether the wallet module was compiled.\"\"\"\n+        return self.config[\"components\"].getboolean(\"USE_SQLITE\")\n+\n+    def is_bdb_compiled(self):\n+        \"\"\"Checks whether the wallet module was compiled.\"\"\"\n+        return self.config[\"components\"].getboolean(\"USE_BDB\")\n+\n+    def get_use_descriptors(self):\n+        \"\"\"\n+        Determine whether descriptors should be used based on compilation support and option\n+        Should only be used for tests that explicitly check self.is_wallet_compiled()\n+        \"\"\"\n+        descriptors = self.options.descriptors\n+        if not self.is_bdb_compiled() and self.is_sqlite_compiled() and not descriptors:\n+            descriptors = True\n+        elif self.is_bdb_compiled() and not self.is_sqlite_compiled() and descriptors:\n+            descriptors = False\n+        return descriptors",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 83,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "846ba62cb939f65745902d3daa6cdda447130410",
      "in_reply_to_id": 515261141,
      "user": {
        "login": "ysangkok",
        "id": 284023,
        "node_id": "MDQ6VXNlcjI4NDAyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/284023?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ysangkok",
        "html_url": "https://github.com/ysangkok",
        "followers_url": "https://api.github.com/users/ysangkok/followers",
        "following_url": "https://api.github.com/users/ysangkok/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ysangkok/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ysangkok/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ysangkok/subscriptions",
        "organizations_url": "https://api.github.com/users/ysangkok/orgs",
        "repos_url": "https://api.github.com/users/ysangkok/repos",
        "events_url": "https://api.github.com/users/ysangkok/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ysangkok/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@mjdietzx , you can use [Quine-McCluskey](https://github.com/ysangkok/py-kmap/blob/master/newqm.py) to derive a minimal function:\r\n\r\n```\r\n>>> from newqm import QM\r\n>>> qm = QM(['A','B','C'])\r\n>>> def aj(a,b,c): # a is self.options.descriptors, b is bdb, c is sqlite compilation\r\n...      descriptors = a\r\n...      if not b and c and not a:\r\n...          descriptors = True\r\n...      elif b and not c and a:\r\n...          descriptors = False\r\n...      return descriptors\r\n... \r\n>>> from itertools import product\r\n>>> values = [idx for (idx,x) in enumerate(product([False,True], repeat=3)) if aj(*x)]\r\n>>> qm.get_function(qm.solve(values,[])[1])\r\n'(((NOT B) AND C) OR (A AND (NOT B)) OR (A AND C))'\r\n```\r\n\r\nIf we color each conjunctive element separately, you can see which elements of the truth table it covers: https://imgur.com/vOVyQP8\r\n\r\nExpanded out using the original bindings:\r\n\r\n```\r\noption_set = self.options.descriptors\r\nbdb = self.is_bdb_compiled()\r\nsqlite = self.is_sqlite_compiled()\r\n\r\nreturn ((NOT bdb) AND sqlite) \\\r\n  OR (option_set AND (NOT bdb)) \\\r\n  OR (option_set AND sqlite)\r\n```\r\n\r\n",
      "created_at": "2020-11-13T20:59:00Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r523229115",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523229115"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 850,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 860,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523247602",
      "pull_request_review_id": 530434202,
      "id": 523247602,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0NzYwMg==",
      "diff_hunk": "@@ -41,7 +41,7 @@ Optional dependencies:\n  Library     | Purpose          | Description\n  ------------|------------------|----------------------\n  miniupnpc   | UPnP Support     | Firewall-jumping support\n- libdb4.8    | Berkeley DB      | Wallet storage (only needed when wallet enabled)\n+ libdb4.8    | Berkeley DB      | Optional, wallet storage (only needed when wallet enabled)",
      "path": "doc/build-unix.md",
      "position": null,
      "original_position": 5,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "caf3062e6275d3a2c941e0e002fb6581c277f65b",
      "in_reply_to_id": null,
      "user": {
        "login": "ysangkok",
        "id": 284023,
        "node_id": "MDQ6VXNlcjI4NDAyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/284023?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ysangkok",
        "html_url": "https://github.com/ysangkok",
        "followers_url": "https://api.github.com/users/ysangkok/followers",
        "following_url": "https://api.github.com/users/ysangkok/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ysangkok/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ysangkok/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ysangkok/subscriptions",
        "organizations_url": "https://api.github.com/users/ysangkok/orgs",
        "repos_url": "https://api.github.com/users/ysangkok/repos",
        "events_url": "https://api.github.com/users/ysangkok/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ysangkok/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "the sentence makes it sound like it is optional because the wallet can be disabled. wouldn't it be better to say \"Optional. Needed to open legacy wallets.\"",
      "created_at": "2020-11-13T21:42:47Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r523247602",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523247602"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523269815",
      "pull_request_review_id": 530461938,
      "id": 523269815,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI2OTgxNQ==",
      "diff_hunk": "@@ -41,7 +41,7 @@ Optional dependencies:\n  Library     | Purpose          | Description\n  ------------|------------------|----------------------\n  miniupnpc   | UPnP Support     | Firewall-jumping support\n- libdb4.8    | Berkeley DB      | Wallet storage (only needed when wallet enabled)\n+ libdb4.8    | Berkeley DB      | Optional, wallet storage (only needed when wallet enabled)",
      "path": "doc/build-unix.md",
      "position": null,
      "original_position": 5,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "caf3062e6275d3a2c941e0e002fb6581c277f65b",
      "in_reply_to_id": 523247602,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Probably shouldn't use the word \"legacy\" (at least user-facing) while it isn't actually legacy yet.",
      "created_at": "2020-11-13T22:39:59Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r523269815",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/523269815"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556817748",
      "pull_request_review_id": 567604526,
      "id": 556817748,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjgxNzc0OA==",
      "diff_hunk": "@@ -186,15 +186,27 @@ def parse_args(self):\n         parser.add_argument('--timeout-factor', dest=\"timeout_factor\", type=float, default=1.0, help='adjust test timeouts by a factor. Setting it to 0 disables all timeouts')\n \n         group = parser.add_mutually_exclusive_group()\n-        group.add_argument(\"--descriptors\", default=False, action=\"store_true\",\n+        group.add_argument(\"--descriptors\", action='store_const', const=True,\n                             help=\"Run test using a descriptor wallet\", dest='descriptors')\n-        group.add_argument(\"--legacy-wallet\", default=False, action=\"store_false\",\n+        group.add_argument(\"--legacy-wallet\", action='store_const', const=False,\n                             help=\"Run test using legacy wallets\", dest='descriptors')\n \n         self.add_options(parser)\n         self.options = parser.parse_args()\n         self.options.previous_releases_path = previous_releases_path\n \n+        config = configparser.ConfigParser()\n+        config.read_file(open(self.options.configfile))\n+        self.config = config",
      "path": "test/functional/test_framework/test_framework.py",
      "position": 27,
      "original_position": 17,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "86b3c3d84bd57dffb3b5e47cd1a076bec62c7e92",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"tests: Set descriptors default based on compilation\" (86b3c3d84bd57dffb3b5e47cd1a076bec62c7e92)\r\n\r\nWould be good to move this to the bottom of the function so it is better organized. Set self.options then self.config instead of options then config then options again",
      "created_at": "2021-01-13T20:46:46Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556817748",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556817748"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": 201,
      "original_start_line": 198,
      "start_side": "RIGHT",
      "line": 203,
      "original_line": 203,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556818716",
      "pull_request_review_id": 567604526,
      "id": 556818716,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjgxODcxNg==",
      "diff_hunk": "@@ -186,15 +186,27 @@ def parse_args(self):\n         parser.add_argument('--timeout-factor', dest=\"timeout_factor\", type=float, default=1.0, help='adjust test timeouts by a factor. Setting it to 0 disables all timeouts')\n \n         group = parser.add_mutually_exclusive_group()\n-        group.add_argument(\"--descriptors\", default=False, action=\"store_true\",\n+        group.add_argument(\"--descriptors\", action='store_const', const=True,\n                             help=\"Run test using a descriptor wallet\", dest='descriptors')\n-        group.add_argument(\"--legacy-wallet\", default=False, action=\"store_false\",\n+        group.add_argument(\"--legacy-wallet\", action='store_const', const=False,\n                             help=\"Run test using legacy wallets\", dest='descriptors')\n \n         self.add_options(parser)\n         self.options = parser.parse_args()\n         self.options.previous_releases_path = previous_releases_path\n \n+        config = configparser.ConfigParser()\n+        config.read_file(open(self.options.configfile))\n+        self.config = config\n+\n+        if self.options.descriptors is None:\n+            # Prefer BDB unless it isn't available\n+            if self.is_bdb_compiled():\n+                self.options.descriptors = False\n+            elif self.is_sqlite_compiled():\n+                self.options.descriptors = True\n+            # If neither are compiled, tests requiring a wallet will be skipped and the value of self.options.descriptors won't matter",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 25,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "86b3c3d84bd57dffb3b5e47cd1a076bec62c7e92",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"tests: Set descriptors default based on compilation\" (86b3c3d84bd57dffb3b5e47cd1a076bec62c7e92)\r\n\r\nIf this comment is true, could maybe write:\r\n\r\n```python\r\nelse:\r\n   del self.options.descriptors\r\n```\r\n\r\nTo be sure the value is not used",
      "created_at": "2021-01-13T20:48:29Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556818716",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556818716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 208,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556823298",
      "pull_request_review_id": 567604526,
      "id": 556823298,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjgyMzI5OA==",
      "diff_hunk": "@@ -411,6 +414,8 @@ def import_deterministic_coinbase_privkeys(self):\n             self.init_wallet(i)\n \n     def init_wallet(self, i):\n+        if not self.requires_wallet:",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 14,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "972c9cf8a4e2e27bd28a33630690404a1d3078d4",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"tests: Don't make any wallets unless wallet is required\" (972c9cf8a4e2e27bd28a33630690404a1d3078d4)\r\n\r\nIf possible, it would seem clearer to just not call `init_wallet()` when `requires_wallet` is false than to call it and have it succeed without doing anything",
      "created_at": "2021-01-13T20:57:20Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556823298",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556823298"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 417,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556831353",
      "pull_request_review_id": 567604526,
      "id": 556831353,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjgzMTM1Mw==",
      "diff_hunk": "@@ -23,11 +23,12 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_sqlite()\n \n     def run_test(self):\n-        # Make a legacy wallet and check it is BDB\n-        self.nodes[0].createwallet(wallet_name=\"legacy1\", descriptors=False)\n-        wallet_info = self.nodes[0].getwalletinfo()\n-        assert_equal(wallet_info['format'], 'bdb')\n-        self.nodes[0].unloadwallet(\"legacy1\")\n+        if self.is_bdb_compiled():",
      "path": "test/functional/wallet_descriptor.py",
      "position": 9,
      "original_position": 9,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "297ab0e699b26f9742dc6ebf75be1dd857d1e531",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Disable wallet_descriptor.py bdb format check if BDB is not compiled\" (297ab0e699b26f9742dc6ebf75be1dd857d1e531)\r\n\r\nWhat is the long term plan for these skipped checks? Personally I think it is bad to report that tests pass when parts of them are just being skipped. Do you disagree? I can think of two different ways we might address this in future PRs:\r\n\r\n1. Add a \"partially skipped\" test result in test runner, extending the current \"passed\" / \"failed\" / \"skipped\" possibilities.\r\n\r\n2. Move these skipped sections into separate tests, so each individual python test either passes, fails, or is skipped and there are no partially skipped tests.\r\n\r\nI'd be curious if other reviewers have opinions, or think this is not a big deal.\r\n\r\nAs a short-term suggestion for this PR, I think it would be nice to at least add `log.info` or `log.warning(\"Skipping BDB test\")` so running the tests individually at least gives better status information.\r\n\r\nFor this particular test, it might make sense to move this section to a `wallet_legacy.py` test mirroring `wallet_descriptor.py` and calling `skip_if_no_bdb` instead of `skip_if_no_sqlite`\r\n\r\n\r\n\r\n\r\n",
      "created_at": "2021-01-13T21:12:29Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556831353",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556831353"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 26,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556885832",
      "pull_request_review_id": 567604526,
      "id": 556885832,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njg4NTgzMg==",
      "diff_hunk": "@@ -27,11 +29,21 @@ def run_test(self):\n         self.nodes[1].assert_start_raises_init_error(extra_args=['-datadir={}'.format(self.nodes[0].datadir), '-noserver'], expected_msg=expected_msg)\n \n         if self.is_wallet_compiled():\n-            self.nodes[0].createwallet(self.default_wallet_name)\n-            wallet_dir = os.path.join(datadir, 'wallets')\n-            self.log.info(\"Check that we can't start a second bitcoind instance using the same wallet\")\n-            expected_msg = \"Error: Error initializing wallet database environment\"\n-            self.nodes[1].assert_start_raises_init_error(extra_args=['-walletdir={}'.format(wallet_dir), '-wallet=' + self.default_wallet_name, '-noserver'], expected_msg=expected_msg, match=ErrorMatch.PARTIAL_REGEX)\n+            def check_wallet_filelock(descriptors):\n+                wallet_name = ''.join([random.choice(string.ascii_lowercase) for _ in range(6)])\n+                self.nodes[0].createwallet(wallet_name=wallet_name, descriptors=descriptors)\n+                wallet_dir = os.path.join(datadir, 'wallets')\n+                self.log.info(\"Check that we can't start a second bitcoind instance using the same wallet\")\n+                if descriptors:\n+                    expected_msg = \"Error: SQLiteDatabase: Unable to obtain an exclusive lock on the database, is it being used by another bitcoind?\"\n+                else:\n+                    expected_msg = \"Error: Error initializing wallet database environment\"\n+                self.nodes[1].assert_start_raises_init_error(extra_args=['-walletdir={}'.format(wallet_dir), '-wallet=' + wallet_name, '-noserver'], expected_msg=expected_msg, match=ErrorMatch.PARTIAL_REGEX)\n+\n+            if self.is_bdb_compiled():\n+                check_wallet_filelock(False)\n+            if self.is_sqlite_compiled():\n+                check_wallet_filelock(True)",
      "path": "test/functional/feature_filelock.py",
      "position": 32,
      "original_position": 32,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "49500debf06842ad0ee1499003c232c9a1c16597",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Have feature_filelock.py test both bdb and sqlite, depending on compiled\" (49500debf06842ad0ee1499003c232c9a1c16597)\r\n\r\nIt seems like this is adding an unnecessary level of complexity. We already have a mechanism for running the same test without and without descriptors: we make the test respect the `--descriptors` option, and list the test twice in `test_runner` with and without the descriptors option.\r\n\r\nI don't know if this is the best mechanism, but it is one we already have, and it seems like it could work as just as well here as it does other places. If it's not sufficient, it would be good to figure out some other another way of running tests twice that could be used consistently.\r\n\r\nAnother related problem with the test after this change is the way it treats `--descriptors`/`--legacy-wallet` options differently than other tests (It effectively ignores them).\r\n\r\n",
      "created_at": "2021-01-13T22:05:39Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556885832",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556885832"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": 43,
      "original_start_line": 43,
      "start_side": "RIGHT",
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556908988",
      "pull_request_review_id": 567604526,
      "id": 556908988,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjkwODk4OA==",
      "diff_hunk": "@@ -49,6 +49,30 @@ def setup_network(self):\n         super().setup_network()\n \n     def run_test(self):\n+        if self.is_wallet_compiled():\n+            # Setup the descriptors to be imported to the wallet",
      "path": "test/functional/feature_notifications.py",
      "position": 19,
      "original_position": 19,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "7c60f35da3117af7d6a0b8a1e4756c5df907bd1c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Setup wallets with descriptors for feature_notifications\" (7c60f35da3117af7d6a0b8a1e4756c5df907bd1c)\r\n\r\nComment below \"Give node 0 same wallet seed as node 1\" should be moved here to reflect what this code is doing (and what the previous code is no longer doing)",
      "created_at": "2021-01-13T22:27:14Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556908988",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556908988"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 53,
      "original_line": 53,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556927365",
      "pull_request_review_id": 567604526,
      "id": 556927365,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjkyNzM2NQ==",
      "diff_hunk": "@@ -49,6 +49,30 @@ def setup_network(self):\n         super().setup_network()\n \n     def run_test(self):\n+        if self.is_wallet_compiled():\n+            # Setup the descriptors to be imported to the wallet\n+            seed = \"cTdGmKFWpbvpKQ7ejrdzqYT2hhjyb3GPHnLAK7wdi5Em67YLwSm9\"\n+            xpriv = \"tprv8ZgxMBicQKsPfHCsTwkiM1KT56RXbGGTqvc2hgqzycpwbHqqpcajQeMRZoBD35kW4RtyCemu6j34Ku5DEspmgjKdt2qe4SvRch5Kk8B8A2v\"",
      "path": "test/functional/feature_notifications.py",
      "position": 21,
      "original_position": 21,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "7c60f35da3117af7d6a0b8a1e4756c5df907bd1c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Setup wallets with descriptors for feature_notifications\" (7c60f35da3117af7d6a0b8a1e4756c5df907bd1c)\r\n\r\nIs there any way this test setup can be simplified, or do we have any ideas about how this might be simplified in the future if it is not worth simplifying now? The old setup was trivial: there were two wallets and one wallet had a `sethdseed` call to use the same seed as the other wallet.\r\n\r\nNow we need hardcoded private keys, base64 strings, descriptor strings, hd paths, and checksums, wallet names, create calls, load_on_startup and timestamps options and internal/external chains just to get two wallets to use the same seed.\r\n\r\nMaybe it belongs in a helper function, but it seems like it should be more straightforward to take a seed from one wallet and put it in another wallet.\r\n\r\n",
      "created_at": "2021-01-13T22:45:04Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556927365",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556927365"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": 54,
      "original_start_line": 54,
      "start_side": "RIGHT",
      "line": 55,
      "original_line": 55,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556948674",
      "pull_request_review_id": 567604526,
      "id": 556948674,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njk0ODY3NA==",
      "diff_hunk": "@@ -63,6 +63,8 @@ def run_test(self):\n \n         self.log.info(\"Test -getinfo returns expected network and blockchain info\")\n         if self.is_wallet_compiled():\n+            self.nodes[0].createwallet(wallet_name=self.default_wallet_name, descriptors=self.options.descriptors)\n+            self.nodes[0].importprivkey(privkey=self.nodes[0].get_deterministic_priv_key().key, label='coinbase')",
      "path": "test/functional/interface_bitcoin_cli.py",
      "position": null,
      "original_position": 5,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "02b69ded2f8d2fe8276b63a9faa134623fc82ed5",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Setup wallets for interface_bitcoin_cli.py\" (02b69ded2f8d2fe8276b63a9faa134623fc82ed5)\r\n\r\nCorrect if I'm wrong, but this seems like a workaround to deal with  `init_wallet` setup now being skipped because this test does not call `skip_if_no_wallet()`.\r\n\r\nI think ideally it would be better to split this test up so wallet and non-wallet parts are in separate tests and skipped checks are clearly reported skipped. But in meantime, would something the following work in `set_test_params` instead of duplicating `init_wallet` code?\r\n\r\n\r\n```python\r\nif self.is_wallet_compiled():\r\n    self.requires_wallet = True\r\n```",
      "created_at": "2021-01-13T23:39:13Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556948674",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556948674"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 66,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 67,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556957641",
      "pull_request_review_id": 567604526,
      "id": 556957641,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njk1NzY0MQ==",
      "diff_hunk": "@@ -48,6 +49,8 @@ def set_test_params(self):\n         self.supports_cli = False\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])",
      "path": "test/functional/rpc_net.py",
      "position": 13,
      "original_position": 12,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "55c71320b655cb11589f5ed6d4d66166816324a5",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Have feature_filelock.py test both bdb and sqlite, depending on compiled\" (49500debf06842ad0ee1499003c232c9a1c16597)\r\n\r\nThis is great! Hope to see more of usage of MiniWallet. But it would be good to have a comment below where the miniwallet is used, saying what it is testing. I can't figure it out. If the test never required a wallet and would pass whether or not `sendtoaddress` was called previously, what is the `send_self_transfer` call doing now and is it actually testing something?",
      "created_at": "2021-01-14T00:05:20Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556957641",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556957641"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 53,
      "original_line": 53,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556961263",
      "pull_request_review_id": 567604526,
      "id": 556961263,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njk2MTI2Mw==",
      "diff_hunk": "@@ -68,6 +68,12 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_bitcoind_zmq()\n \n     def run_test(self):\n+        if self.is_wallet_compiled():\n+            self.nodes[0].createwallet(wallet_name=self.default_wallet_name, descriptors=self.options.descriptors, load_on_startup=True)\n+            self.nodes[0].importprivkey(privkey=self.nodes[0].get_deterministic_priv_key().key, label='coinbase')\n+            self.nodes[1].createwallet(wallet_name=self.default_wallet_name, descriptors=self.options.descriptors, load_on_startup=True)\n+            self.nodes[1].importprivkey(privkey=self.nodes[1].get_deterministic_priv_key().key, label='coinbase')",
      "path": "test/functional/interface_zmq.py",
      "position": null,
      "original_position": 8,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "c8a809bd3bc22707d336b16dc883ae7f35ab8fd3",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Setup wallets for interface_zmq.py\" (c8a809bd3bc22707d336b16dc883ae7f35ab8fd3)\r\n\r\nIs this another workaround for `init_wallet` setup now being skipped? Could this simply do `if self.is_wallet_compiled(): self.requires_wallet = True` in `set_test_params` as suggested previously? (Or divided into wallet/nonwallet tests using `skip_if_no_wallet`)",
      "created_at": "2021-01-14T00:16:02Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556961263",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556961263"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 71,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 75,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556963654",
      "pull_request_review_id": 567604526,
      "id": 556963654,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njk2MzY1NA==",
      "diff_hunk": "@@ -348,7 +348,8 @@ def test_dump_createfromdump(self):\n \n         self.log.info('Checking createfromdump')\n         self.do_tool_createfromdump(\"load\", \"wallet.dump\")\n-        self.do_tool_createfromdump(\"load-bdb\", \"wallet.dump\", \"bdb\")\n+        if self.is_bdb_compiled():\n+            self.do_tool_createfromdump(\"load-bdb\", \"wallet.dump\", \"bdb\")\n         if self.is_sqlite_compiled():\n             self.do_tool_createfromdump(\"load-sqlite\", \"wallet.dump\", \"sqlite\")",
      "path": "test/functional/tool_wallet.py",
      "position": 8,
      "original_position": 8,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "c191614587f138c00277c99a9709dedaf8bbcfd7",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"tests: Disable bdb dump test when no bdb\" (c191614587f138c00277c99a9709dedaf8bbcfd7)\r\n\r\nI guess this is another place where future test splitting or test runner improvements could provide feedback that test didn't fully pass and checks were skipped.",
      "created_at": "2021-01-14T00:22:37Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556963654",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556963654"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": 351,
      "original_start_line": 351,
      "start_side": "RIGHT",
      "line": 354,
      "original_line": 354,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556968003",
      "pull_request_review_id": 567604526,
      "id": 556968003,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njk2ODAwMw==",
      "diff_hunk": "@@ -23,6 +23,7 @@ class MempoolCompatibilityTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 2\n         self.wallet_names = [None]\n+        self.requires_wallet = True",
      "path": "test/functional/mempool_compatibility.py",
      "position": null,
      "original_position": 4,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "5a985cd6656afe976f73b3276017e22055a8050c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"tests: mempool_compatibility needs requires_wallet set\" (5a985cd6656afe976f73b3276017e22055a8050c)\r\n\r\nMaybe it would be good to rename `requires_wallet` to something like `init_default_wallet` to more accurately reflect what the variable does. Also, `requires_wallet = False` seems basically equivalent to `default_wallet_name = False` and maybe the two variables should be combined at some point (though it seems like a bigger setup change that would be better in some cleanup PR)",
      "created_at": "2021-01-14T00:35:35Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556968003",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556968003"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556972270",
      "pull_request_review_id": 567604526,
      "id": 556972270,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njk3MjI3MA==",
      "diff_hunk": "@@ -241,11 +284,13 @@ def run_test(self):\n         res = w2.walletprocesspsbt(res[\"psbt\"])\n         assert res[\"complete\"]\n \n-        self.log.info(\"Create PSBT from wallet w4 with watch-only keys, sign with w2...\")\n-        self.test_send(from_wallet=w4, to_wallet=w1, amount=1, expect_error=(-4, \"Insufficient funds\"))\n-        res = self.test_send(from_wallet=w4, to_wallet=w1, amount=1, include_watching=True, add_to_wallet=False)\n-        res = w2.walletprocesspsbt(res[\"psbt\"])\n-        assert res[\"complete\"]\n+        if not self.options.descriptors:\n+            # This tests legacy watch-only behavior only.",
      "path": "test/functional/wallet_send.py",
      "position": null,
      "original_position": 132,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "1fa9bbdb4076944272d5246d1140d29ba3ecb3a3",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Fix wallet_send.py wallet setup to work with descriptors\" (1fa9bbdb4076944272d5246d1140d29ba3ecb3a3)\r\n\r\nCan comment be expanded to say why? My understanding is something like \"Unlike legacy wallets, descriptor wallets don't allow watch-only keys and spendable keys in the same wallet.\" If this is the case, it'd be helpful to say explicitly. It would also be good to say whether or not it would be useful to be test the watch-only behavior here in the descriptor case (presumably just using 2 wallets instead of 1). If this would not be useful to test because there is already other coverage or watch-only descriptor stuff, that would be good to know.",
      "created_at": "2021-01-14T00:47:55Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556972270",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556972270"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 288,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556974169",
      "pull_request_review_id": 567604526,
      "id": 556974169,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njk3NDE2OQ==",
      "diff_hunk": "@@ -168,49 +169,91 @@ def run_test(self):\n         self.nodes[1].createwallet(wallet_name=\"w1\")\n         w1 = self.nodes[1].get_wallet_rpc(\"w1\")\n         # w2 contains the private keys for w3\n-        self.nodes[1].createwallet(wallet_name=\"w2\")\n+        self.nodes[1].createwallet(wallet_name=\"w2\", blank=True)\n         w2 = self.nodes[1].get_wallet_rpc(\"w2\")\n+        xpriv = \"tprv8ZgxMBicQKsPfHCsTwkiM1KT56RXbGGTqvc2hgqzycpwbHqqpcajQeMRZoBD35kW4RtyCemu6j34Ku5DEspmgjKdt2qe4SvRch5Kk8B8A2v\"\n+        xpub = \"tpubD6NzVbkrYhZ4YkEfMbRJkQyZe7wTkbTNRECozCtJPtdLRn6cT1QKb8yHjwAPcAr26eHBFYs5iLiFFnCbwPRsncCKUKCfubHDMGKzMVcN1Jg\"\n+        if self.options.descriptors:\n+            w2.importdescriptors([{\n+                \"desc\": descsum_create(\"wpkh(\" + xpriv + \"/0/0/*)\"),\n+                \"timestamp\": \"now\",\n+                \"range\": [0, 100],\n+                \"active\": True\n+            },{\n+                \"desc\": descsum_create(\"wpkh(\" + xpriv + \"/0/1/*)\"),\n+                \"timestamp\": \"now\",\n+                \"range\": [0, 100],\n+                \"active\": True,\n+                \"internal\": True\n+            }])\n+        else:\n+            w2.sethdseed(True)\n+\n         # w3 is a watch-only wallet, based on w2\n         self.nodes[1].createwallet(wallet_name=\"w3\", disable_private_keys=True)\n         w3 = self.nodes[1].get_wallet_rpc(\"w3\")\n-        for _ in range(3):\n-            a2_receive = w2.getnewaddress()\n-            a2_change = w2.getrawchangeaddress() # doesn't actually use change derivation\n-            res = w3.importmulti([{\n-                \"desc\": w2.getaddressinfo(a2_receive)[\"desc\"],\n+        if self.options.descriptors:\n+            # Match the privkeys in w2 for descriptors\n+            res = w3.importdescriptors([{\n+                \"desc\": descsum_create(\"wpkh(\" + xpub + \"/0/0/*)\"),\n                 \"timestamp\": \"now\",\n+                \"range\": [0, 100],\n                 \"keypool\": True,\n+                \"active\": True,\n                 \"watchonly\": True\n             },{\n-                \"desc\": w2.getaddressinfo(a2_change)[\"desc\"],\n+                \"desc\": descsum_create(\"wpkh(\" + xpub + \"/0/1/*)\"),\n                 \"timestamp\": \"now\",\n+                \"range\": [0, 100],\n                 \"keypool\": True,\n+                \"active\": True,\n                 \"internal\": True,\n                 \"watchonly\": True\n             }])\n             assert_equal(res, [{\"success\": True}, {\"success\": True}])\n \n-        w0.sendtoaddress(a2_receive, 10) # fund w3\n-        self.nodes[0].generate(1)\n-        self.sync_blocks()\n-\n-        # w4 has private keys enabled, but only contains watch-only keys (from w2)\n-        self.nodes[1].createwallet(wallet_name=\"w4\", disable_private_keys=False)\n-        w4 = self.nodes[1].get_wallet_rpc(\"w4\")\n         for _ in range(3):\n             a2_receive = w2.getnewaddress()\n-            res = w4.importmulti([{\n-                \"desc\": w2.getaddressinfo(a2_receive)[\"desc\"],\n-                \"timestamp\": \"now\",\n-                \"keypool\": False,\n-                \"watchonly\": True\n-            }])\n-            assert_equal(res, [{\"success\": True}])\n+            if not self.options.descriptors:\n+                # Because legacy wallets use exclusively hardened derivation, we can't do a ranged import like we do for descriptors\n+                a2_change = w2.getrawchangeaddress() # doesn't actually use change derivation\n+                res = w3.importmulti([{\n+                    \"desc\": w2.getaddressinfo(a2_receive)[\"desc\"],\n+                    \"timestamp\": \"now\",\n+                    \"keypool\": True,\n+                    \"watchonly\": True\n+                },{\n+                    \"desc\": w2.getaddressinfo(a2_change)[\"desc\"],\n+                    \"timestamp\": \"now\",\n+                    \"keypool\": True,\n+                    \"internal\": True,\n+                    \"watchonly\": True\n+                }])\n+                assert_equal(res, [{\"success\": True}, {\"success\": True}])\n \n-        w0.sendtoaddress(a2_receive, 10) # fund w4\n+        w0.sendtoaddress(a2_receive, 10) # fund w3\n         self.nodes[0].generate(1)\n         self.sync_blocks()\n \n+        if not self.options.descriptors:\n+            # w4 has private keys enabled, but only contains watch-only keys (from w2)\n+            # This is legacy wallet behavior only",
      "path": "test/functional/wallet_send.py",
      "position": null,
      "original_position": 102,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "1fa9bbdb4076944272d5246d1140d29ba3ecb3a3",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Fix wallet_send.py wallet setup to work with descriptors\" (1fa9bbdb4076944272d5246d1140d29ba3ecb3a3)\r\n\r\nWould be good to clarify with a reason like \"Descriptor wallets do not allow spendable keys and watch only keys in the same wallet\" (if this is the case).",
      "created_at": "2021-01-14T00:53:31Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556974169",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556974169"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 240,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556977983",
      "pull_request_review_id": 567604526,
      "id": 556977983,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njk3Nzk4Mw==",
      "diff_hunk": "@@ -168,49 +169,91 @@ def run_test(self):\n         self.nodes[1].createwallet(wallet_name=\"w1\")\n         w1 = self.nodes[1].get_wallet_rpc(\"w1\")\n         # w2 contains the private keys for w3\n-        self.nodes[1].createwallet(wallet_name=\"w2\")\n+        self.nodes[1].createwallet(wallet_name=\"w2\", blank=True)\n         w2 = self.nodes[1].get_wallet_rpc(\"w2\")\n+        xpriv = \"tprv8ZgxMBicQKsPfHCsTwkiM1KT56RXbGGTqvc2hgqzycpwbHqqpcajQeMRZoBD35kW4RtyCemu6j34Ku5DEspmgjKdt2qe4SvRch5Kk8B8A2v\"",
      "path": "test/functional/wallet_send.py",
      "position": 15,
      "original_position": 15,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "1fa9bbdb4076944272d5246d1140d29ba3ecb3a3",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Fix wallet_send.py wallet setup to work with descriptors\" (1fa9bbdb4076944272d5246d1140d29ba3ecb3a3)\r\n\r\nThis seems like the same code earlier copied from the feature_notifications test. You can see earlier comment, but I think it would be better to have a framework or util function that can easily create wallets with the same seed. (It would also seem better not to hard code that seed, but the hardcoding is less a problem than the complexity and boilerplate these changes add to the tests)",
      "created_at": "2021-01-14T01:05:15Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r556977983",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/556977983"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 174,
      "original_line": 174,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564123336",
      "pull_request_review_id": 575904255,
      "id": 564123336,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDEyMzMzNg==",
      "diff_hunk": "@@ -23,11 +23,12 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_sqlite()\n \n     def run_test(self):\n-        # Make a legacy wallet and check it is BDB\n-        self.nodes[0].createwallet(wallet_name=\"legacy1\", descriptors=False)\n-        wallet_info = self.nodes[0].getwalletinfo()\n-        assert_equal(wallet_info['format'], 'bdb')\n-        self.nodes[0].unloadwallet(\"legacy1\")\n+        if self.is_bdb_compiled():",
      "path": "test/functional/wallet_descriptor.py",
      "position": 9,
      "original_position": 9,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "297ab0e699b26f9742dc6ebf75be1dd857d1e531",
      "in_reply_to_id": 556831353,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think that the optimal solution for these is to split them into separate tests for wallet and non-wallet components.\r\n\r\nThere are some other tests, notable `feature_notifications.py` and `interface_zmq.py` which have a significant portion of tests specifically for the wallet.",
      "created_at": "2021-01-25T23:57:55Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564123336",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564123336"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 26,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564124955",
      "pull_request_review_id": 575906208,
      "id": 564124955,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDEyNDk1NQ==",
      "diff_hunk": "@@ -27,11 +29,21 @@ def run_test(self):\n         self.nodes[1].assert_start_raises_init_error(extra_args=['-datadir={}'.format(self.nodes[0].datadir), '-noserver'], expected_msg=expected_msg)\n \n         if self.is_wallet_compiled():\n-            self.nodes[0].createwallet(self.default_wallet_name)\n-            wallet_dir = os.path.join(datadir, 'wallets')\n-            self.log.info(\"Check that we can't start a second bitcoind instance using the same wallet\")\n-            expected_msg = \"Error: Error initializing wallet database environment\"\n-            self.nodes[1].assert_start_raises_init_error(extra_args=['-walletdir={}'.format(wallet_dir), '-wallet=' + self.default_wallet_name, '-noserver'], expected_msg=expected_msg, match=ErrorMatch.PARTIAL_REGEX)\n+            def check_wallet_filelock(descriptors):\n+                wallet_name = ''.join([random.choice(string.ascii_lowercase) for _ in range(6)])\n+                self.nodes[0].createwallet(wallet_name=wallet_name, descriptors=descriptors)\n+                wallet_dir = os.path.join(datadir, 'wallets')\n+                self.log.info(\"Check that we can't start a second bitcoind instance using the same wallet\")\n+                if descriptors:\n+                    expected_msg = \"Error: SQLiteDatabase: Unable to obtain an exclusive lock on the database, is it being used by another bitcoind?\"\n+                else:\n+                    expected_msg = \"Error: Error initializing wallet database environment\"\n+                self.nodes[1].assert_start_raises_init_error(extra_args=['-walletdir={}'.format(wallet_dir), '-wallet=' + wallet_name, '-noserver'], expected_msg=expected_msg, match=ErrorMatch.PARTIAL_REGEX)\n+\n+            if self.is_bdb_compiled():\n+                check_wallet_filelock(False)\n+            if self.is_sqlite_compiled():\n+                check_wallet_filelock(True)",
      "path": "test/functional/feature_filelock.py",
      "position": 32,
      "original_position": 32,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "49500debf06842ad0ee1499003c232c9a1c16597",
      "in_reply_to_id": 556885832,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "#20892 runs such tests twice. It also seems like this should be one of those tests that the wallet portion is split into a separate test.",
      "created_at": "2021-01-26T00:02:40Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564124955",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564124955"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": 43,
      "original_start_line": 43,
      "start_side": "RIGHT",
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564134115",
      "pull_request_review_id": 575916676,
      "id": 564134115,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDEzNDExNQ==",
      "diff_hunk": "@@ -49,6 +49,30 @@ def setup_network(self):\n         super().setup_network()\n \n     def run_test(self):\n+        if self.is_wallet_compiled():\n+            # Setup the descriptors to be imported to the wallet\n+            seed = \"cTdGmKFWpbvpKQ7ejrdzqYT2hhjyb3GPHnLAK7wdi5Em67YLwSm9\"\n+            xpriv = \"tprv8ZgxMBicQKsPfHCsTwkiM1KT56RXbGGTqvc2hgqzycpwbHqqpcajQeMRZoBD35kW4RtyCemu6j34Ku5DEspmgjKdt2qe4SvRch5Kk8B8A2v\"",
      "path": "test/functional/feature_notifications.py",
      "position": 21,
      "original_position": 21,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "7c60f35da3117af7d6a0b8a1e4756c5df907bd1c",
      "in_reply_to_id": 556927365,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Until we implement private descriptor export, that won't be possible.",
      "created_at": "2021-01-26T00:30:18Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564134115",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564134115"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": 54,
      "original_start_line": 54,
      "start_side": "RIGHT",
      "line": 55,
      "original_line": 55,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146582",
      "pull_request_review_id": 575930635,
      "id": 564146582,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDE0NjU4Mg==",
      "diff_hunk": "@@ -186,15 +186,27 @@ def parse_args(self):\n         parser.add_argument('--timeout-factor', dest=\"timeout_factor\", type=float, default=1.0, help='adjust test timeouts by a factor. Setting it to 0 disables all timeouts')\n \n         group = parser.add_mutually_exclusive_group()\n-        group.add_argument(\"--descriptors\", default=False, action=\"store_true\",\n+        group.add_argument(\"--descriptors\", action='store_const', const=True,\n                             help=\"Run test using a descriptor wallet\", dest='descriptors')\n-        group.add_argument(\"--legacy-wallet\", default=False, action=\"store_false\",\n+        group.add_argument(\"--legacy-wallet\", action='store_const', const=False,\n                             help=\"Run test using legacy wallets\", dest='descriptors')\n \n         self.add_options(parser)\n         self.options = parser.parse_args()\n         self.options.previous_releases_path = previous_releases_path\n \n+        config = configparser.ConfigParser()\n+        config.read_file(open(self.options.configfile))\n+        self.config = config",
      "path": "test/functional/test_framework/test_framework.py",
      "position": 27,
      "original_position": 17,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "86b3c3d84bd57dffb3b5e47cd1a076bec62c7e92",
      "in_reply_to_id": 556817748,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The `is_*_compiled` checks require self.config to already exist, so it must come before them and can't be at the bottom of the function.",
      "created_at": "2021-01-26T01:09:33Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564146582",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146582"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": 201,
      "original_start_line": 198,
      "start_side": "RIGHT",
      "line": 203,
      "original_line": 203,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146615",
      "pull_request_review_id": 575930673,
      "id": 564146615,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDE0NjYxNQ==",
      "diff_hunk": "@@ -186,15 +186,27 @@ def parse_args(self):\n         parser.add_argument('--timeout-factor', dest=\"timeout_factor\", type=float, default=1.0, help='adjust test timeouts by a factor. Setting it to 0 disables all timeouts')\n \n         group = parser.add_mutually_exclusive_group()\n-        group.add_argument(\"--descriptors\", default=False, action=\"store_true\",\n+        group.add_argument(\"--descriptors\", action='store_const', const=True,\n                             help=\"Run test using a descriptor wallet\", dest='descriptors')\n-        group.add_argument(\"--legacy-wallet\", default=False, action=\"store_false\",\n+        group.add_argument(\"--legacy-wallet\", action='store_const', const=False,\n                             help=\"Run test using legacy wallets\", dest='descriptors')\n \n         self.add_options(parser)\n         self.options = parser.parse_args()\n         self.options.previous_releases_path = previous_releases_path\n \n+        config = configparser.ConfigParser()\n+        config.read_file(open(self.options.configfile))\n+        self.config = config\n+\n+        if self.options.descriptors is None:\n+            # Prefer BDB unless it isn't available\n+            if self.is_bdb_compiled():\n+                self.options.descriptors = False\n+            elif self.is_sqlite_compiled():\n+                self.options.descriptors = True\n+            # If neither are compiled, tests requiring a wallet will be skipped and the value of self.options.descriptors won't matter",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 25,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "86b3c3d84bd57dffb3b5e47cd1a076bec62c7e92",
      "in_reply_to_id": 556818716,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-01-26T01:09:38Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564146615",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146615"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 208,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146729",
      "pull_request_review_id": 575930795,
      "id": 564146729,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDE0NjcyOQ==",
      "diff_hunk": "@@ -411,6 +414,8 @@ def import_deterministic_coinbase_privkeys(self):\n             self.init_wallet(i)\n \n     def init_wallet(self, i):\n+        if not self.requires_wallet:",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 14,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "972c9cf8a4e2e27bd28a33630690404a1d3078d4",
      "in_reply_to_id": 556823298,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2021-01-26T01:09:56Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564146729",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146729"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 417,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146786",
      "pull_request_review_id": 575930845,
      "id": 564146786,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDE0Njc4Ng==",
      "diff_hunk": "@@ -49,6 +49,30 @@ def setup_network(self):\n         super().setup_network()\n \n     def run_test(self):\n+        if self.is_wallet_compiled():\n+            # Setup the descriptors to be imported to the wallet",
      "path": "test/functional/feature_notifications.py",
      "position": 19,
      "original_position": 19,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "7c60f35da3117af7d6a0b8a1e4756c5df907bd1c",
      "in_reply_to_id": 556908988,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-01-26T01:10:07Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564146786",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146786"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 53,
      "original_line": 53,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146843",
      "pull_request_review_id": 575930889,
      "id": 564146843,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDE0Njg0Mw==",
      "diff_hunk": "@@ -63,6 +63,8 @@ def run_test(self):\n \n         self.log.info(\"Test -getinfo returns expected network and blockchain info\")\n         if self.is_wallet_compiled():\n+            self.nodes[0].createwallet(wallet_name=self.default_wallet_name, descriptors=self.options.descriptors)\n+            self.nodes[0].importprivkey(privkey=self.nodes[0].get_deterministic_priv_key().key, label='coinbase')",
      "path": "test/functional/interface_bitcoin_cli.py",
      "position": null,
      "original_position": 5,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "02b69ded2f8d2fe8276b63a9faa134623fc82ed5",
      "in_reply_to_id": 556948674,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-01-26T01:10:14Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564146843",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146843"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 66,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 67,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146964",
      "pull_request_review_id": 575931045,
      "id": 564146964,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDE0Njk2NA==",
      "diff_hunk": "@@ -48,6 +49,8 @@ def set_test_params(self):\n         self.supports_cli = False\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])",
      "path": "test/functional/rpc_net.py",
      "position": 13,
      "original_position": 12,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "55c71320b655cb11589f5ed6d4d66166816324a5",
      "in_reply_to_id": 556957641,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added a comment. It is only used to generate a transaction so that `last_transaction` in `getpeerinfo` can be checked.",
      "created_at": "2021-01-26T01:10:40Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564146964",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564146964"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 53,
      "original_line": 53,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564147031",
      "pull_request_review_id": 575931118,
      "id": 564147031,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDE0NzAzMQ==",
      "diff_hunk": "@@ -68,6 +68,12 @@ def skip_test_if_missing_module(self):\n         self.skip_if_no_bitcoind_zmq()\n \n     def run_test(self):\n+        if self.is_wallet_compiled():\n+            self.nodes[0].createwallet(wallet_name=self.default_wallet_name, descriptors=self.options.descriptors, load_on_startup=True)\n+            self.nodes[0].importprivkey(privkey=self.nodes[0].get_deterministic_priv_key().key, label='coinbase')\n+            self.nodes[1].createwallet(wallet_name=self.default_wallet_name, descriptors=self.options.descriptors, load_on_startup=True)\n+            self.nodes[1].importprivkey(privkey=self.nodes[1].get_deterministic_priv_key().key, label='coinbase')",
      "path": "test/functional/interface_zmq.py",
      "position": null,
      "original_position": 8,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "c8a809bd3bc22707d336b16dc883ae7f35ab8fd3",
      "in_reply_to_id": 556961263,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes. Done",
      "created_at": "2021-01-26T01:10:50Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564147031",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564147031"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": 71,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 75,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564147547",
      "pull_request_review_id": 575931747,
      "id": 564147547,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDE0NzU0Nw==",
      "diff_hunk": "@@ -23,6 +23,7 @@ class MempoolCompatibilityTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 2\n         self.wallet_names = [None]\n+        self.requires_wallet = True",
      "path": "test/functional/mempool_compatibility.py",
      "position": null,
      "original_position": 4,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "5a985cd6656afe976f73b3276017e22055a8050c",
      "in_reply_to_id": 556968003,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps, but that's a bit more complicated.",
      "created_at": "2021-01-26T01:12:38Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564147547",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564147547"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564147580",
      "pull_request_review_id": 575931789,
      "id": 564147580,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDE0NzU4MA==",
      "diff_hunk": "@@ -241,11 +284,13 @@ def run_test(self):\n         res = w2.walletprocesspsbt(res[\"psbt\"])\n         assert res[\"complete\"]\n \n-        self.log.info(\"Create PSBT from wallet w4 with watch-only keys, sign with w2...\")\n-        self.test_send(from_wallet=w4, to_wallet=w1, amount=1, expect_error=(-4, \"Insufficient funds\"))\n-        res = self.test_send(from_wallet=w4, to_wallet=w1, amount=1, include_watching=True, add_to_wallet=False)\n-        res = w2.walletprocesspsbt(res[\"psbt\"])\n-        assert res[\"complete\"]\n+        if not self.options.descriptors:\n+            # This tests legacy watch-only behavior only.",
      "path": "test/functional/wallet_send.py",
      "position": null,
      "original_position": 132,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "1fa9bbdb4076944272d5246d1140d29ba3ecb3a3",
      "in_reply_to_id": 556972270,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added a comment.",
      "created_at": "2021-01-26T01:12:46Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564147580",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564147580"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 288,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564147612",
      "pull_request_review_id": 575931828,
      "id": 564147612,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDE0NzYxMg==",
      "diff_hunk": "@@ -168,49 +169,91 @@ def run_test(self):\n         self.nodes[1].createwallet(wallet_name=\"w1\")\n         w1 = self.nodes[1].get_wallet_rpc(\"w1\")\n         # w2 contains the private keys for w3\n-        self.nodes[1].createwallet(wallet_name=\"w2\")\n+        self.nodes[1].createwallet(wallet_name=\"w2\", blank=True)\n         w2 = self.nodes[1].get_wallet_rpc(\"w2\")\n+        xpriv = \"tprv8ZgxMBicQKsPfHCsTwkiM1KT56RXbGGTqvc2hgqzycpwbHqqpcajQeMRZoBD35kW4RtyCemu6j34Ku5DEspmgjKdt2qe4SvRch5Kk8B8A2v\"\n+        xpub = \"tpubD6NzVbkrYhZ4YkEfMbRJkQyZe7wTkbTNRECozCtJPtdLRn6cT1QKb8yHjwAPcAr26eHBFYs5iLiFFnCbwPRsncCKUKCfubHDMGKzMVcN1Jg\"\n+        if self.options.descriptors:\n+            w2.importdescriptors([{\n+                \"desc\": descsum_create(\"wpkh(\" + xpriv + \"/0/0/*)\"),\n+                \"timestamp\": \"now\",\n+                \"range\": [0, 100],\n+                \"active\": True\n+            },{\n+                \"desc\": descsum_create(\"wpkh(\" + xpriv + \"/0/1/*)\"),\n+                \"timestamp\": \"now\",\n+                \"range\": [0, 100],\n+                \"active\": True,\n+                \"internal\": True\n+            }])\n+        else:\n+            w2.sethdseed(True)\n+\n         # w3 is a watch-only wallet, based on w2\n         self.nodes[1].createwallet(wallet_name=\"w3\", disable_private_keys=True)\n         w3 = self.nodes[1].get_wallet_rpc(\"w3\")\n-        for _ in range(3):\n-            a2_receive = w2.getnewaddress()\n-            a2_change = w2.getrawchangeaddress() # doesn't actually use change derivation\n-            res = w3.importmulti([{\n-                \"desc\": w2.getaddressinfo(a2_receive)[\"desc\"],\n+        if self.options.descriptors:\n+            # Match the privkeys in w2 for descriptors\n+            res = w3.importdescriptors([{\n+                \"desc\": descsum_create(\"wpkh(\" + xpub + \"/0/0/*)\"),\n                 \"timestamp\": \"now\",\n+                \"range\": [0, 100],\n                 \"keypool\": True,\n+                \"active\": True,\n                 \"watchonly\": True\n             },{\n-                \"desc\": w2.getaddressinfo(a2_change)[\"desc\"],\n+                \"desc\": descsum_create(\"wpkh(\" + xpub + \"/0/1/*)\"),\n                 \"timestamp\": \"now\",\n+                \"range\": [0, 100],\n                 \"keypool\": True,\n+                \"active\": True,\n                 \"internal\": True,\n                 \"watchonly\": True\n             }])\n             assert_equal(res, [{\"success\": True}, {\"success\": True}])\n \n-        w0.sendtoaddress(a2_receive, 10) # fund w3\n-        self.nodes[0].generate(1)\n-        self.sync_blocks()\n-\n-        # w4 has private keys enabled, but only contains watch-only keys (from w2)\n-        self.nodes[1].createwallet(wallet_name=\"w4\", disable_private_keys=False)\n-        w4 = self.nodes[1].get_wallet_rpc(\"w4\")\n         for _ in range(3):\n             a2_receive = w2.getnewaddress()\n-            res = w4.importmulti([{\n-                \"desc\": w2.getaddressinfo(a2_receive)[\"desc\"],\n-                \"timestamp\": \"now\",\n-                \"keypool\": False,\n-                \"watchonly\": True\n-            }])\n-            assert_equal(res, [{\"success\": True}])\n+            if not self.options.descriptors:\n+                # Because legacy wallets use exclusively hardened derivation, we can't do a ranged import like we do for descriptors\n+                a2_change = w2.getrawchangeaddress() # doesn't actually use change derivation\n+                res = w3.importmulti([{\n+                    \"desc\": w2.getaddressinfo(a2_receive)[\"desc\"],\n+                    \"timestamp\": \"now\",\n+                    \"keypool\": True,\n+                    \"watchonly\": True\n+                },{\n+                    \"desc\": w2.getaddressinfo(a2_change)[\"desc\"],\n+                    \"timestamp\": \"now\",\n+                    \"keypool\": True,\n+                    \"internal\": True,\n+                    \"watchonly\": True\n+                }])\n+                assert_equal(res, [{\"success\": True}, {\"success\": True}])\n \n-        w0.sendtoaddress(a2_receive, 10) # fund w4\n+        w0.sendtoaddress(a2_receive, 10) # fund w3\n         self.nodes[0].generate(1)\n         self.sync_blocks()\n \n+        if not self.options.descriptors:\n+            # w4 has private keys enabled, but only contains watch-only keys (from w2)\n+            # This is legacy wallet behavior only",
      "path": "test/functional/wallet_send.py",
      "position": null,
      "original_position": 102,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "1fa9bbdb4076944272d5246d1140d29ba3ecb3a3",
      "in_reply_to_id": 556974169,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-01-26T01:12:53Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564147612",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564147612"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 240,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564147634",
      "pull_request_review_id": 575931848,
      "id": 564147634,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDE0NzYzNA==",
      "diff_hunk": "@@ -168,49 +169,91 @@ def run_test(self):\n         self.nodes[1].createwallet(wallet_name=\"w1\")\n         w1 = self.nodes[1].get_wallet_rpc(\"w1\")\n         # w2 contains the private keys for w3\n-        self.nodes[1].createwallet(wallet_name=\"w2\")\n+        self.nodes[1].createwallet(wallet_name=\"w2\", blank=True)\n         w2 = self.nodes[1].get_wallet_rpc(\"w2\")\n+        xpriv = \"tprv8ZgxMBicQKsPfHCsTwkiM1KT56RXbGGTqvc2hgqzycpwbHqqpcajQeMRZoBD35kW4RtyCemu6j34Ku5DEspmgjKdt2qe4SvRch5Kk8B8A2v\"",
      "path": "test/functional/wallet_send.py",
      "position": 15,
      "original_position": 15,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "1fa9bbdb4076944272d5246d1140d29ba3ecb3a3",
      "in_reply_to_id": 556977983,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2021-01-26T01:12:56Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r564147634",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/564147634"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 174,
      "original_line": 174,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565514302",
      "pull_request_review_id": 577607083,
      "id": 565514302,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTUxNDMwMg==",
      "diff_hunk": "@@ -186,15 +186,27 @@ def parse_args(self):\n         parser.add_argument('--timeout-factor', dest=\"timeout_factor\", type=float, default=1.0, help='adjust test timeouts by a factor. Setting it to 0 disables all timeouts')\n \n         group = parser.add_mutually_exclusive_group()\n-        group.add_argument(\"--descriptors\", default=False, action=\"store_true\",\n+        group.add_argument(\"--descriptors\", action='store_const', const=True,\n                             help=\"Run test using a descriptor wallet\", dest='descriptors')\n-        group.add_argument(\"--legacy-wallet\", default=False, action=\"store_false\",\n+        group.add_argument(\"--legacy-wallet\", action='store_const', const=False,\n                             help=\"Run test using legacy wallets\", dest='descriptors')\n \n         self.add_options(parser)\n         self.options = parser.parse_args()\n         self.options.previous_releases_path = previous_releases_path\n \n+        config = configparser.ConfigParser()\n+        config.read_file(open(self.options.configfile))\n+        self.config = config\n+\n+        if self.options.descriptors is None:\n+            # Prefer BDB unless it isn't available\n+            if self.is_bdb_compiled():\n+                self.options.descriptors = False\n+            elif self.is_sqlite_compiled():\n+                self.options.descriptors = True\n+            # If neither are compiled, tests requiring a wallet will be skipped and the value of self.options.descriptors won't matter",
      "path": "test/functional/test_framework/test_framework.py",
      "position": null,
      "original_position": 25,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "86b3c3d84bd57dffb3b5e47cd1a076bec62c7e92",
      "in_reply_to_id": 556818716,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Reverted this since it is causing problems when configured with `--disable-wallet`",
      "created_at": "2021-01-27T17:53:21Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r565514302",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565514302"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 208,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/570095626",
      "pull_request_review_id": 583222857,
      "id": 570095626,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MDA5NTYyNg==",
      "diff_hunk": "@@ -23,6 +23,7 @@ class MempoolCompatibilityTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 2\n         self.wallet_names = [None]\n+        self.requires_wallet = True",
      "path": "test/functional/mempool_compatibility.py",
      "position": null,
      "original_position": 4,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "a831ba6014827d5afc9b423773361350359c94d5",
      "in_reply_to_id": null,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I can't understand why do we need \"the old versions have their wallets' setup\". I've tried to run this test with the flag set to False and it makes no difference",
      "created_at": "2021-02-04T10:03:25Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r570095626",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/570095626"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/570417408",
      "pull_request_review_id": 583650368,
      "id": 570417408,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MDQxNzQwOA==",
      "diff_hunk": "@@ -23,6 +23,7 @@ class MempoolCompatibilityTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 2\n         self.wallet_names = [None]\n+        self.requires_wallet = True",
      "path": "test/functional/mempool_compatibility.py",
      "position": null,
      "original_position": 4,
      "commit_id": "49797c3ccfbb9f7ac9c1fbb574d35b315c103805",
      "original_commit_id": "a831ba6014827d5afc9b423773361350359c94d5",
      "in_reply_to_id": 570095626,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's redundant now. Previously this variable was checked inside of `init_wallet()` which was called by `import_deterministic_coinbase_privkeys()` so we needed to set it to `True` to allow our call of that to work. But since checking `requires_wallet` is moved outside of that, it is no longer needed.\r\n\r\nRemoved and dropped the commit.",
      "created_at": "2021-02-04T17:39:49Z",
      "updated_at": "2021-02-04T17:39:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/20267#discussion_r570417408",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/570417408"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20267"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    }
  ]
}