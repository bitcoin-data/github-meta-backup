{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367",
    "id": 767137735,
    "node_id": "PR_kwDOABII584tuZfH",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23367",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/23367.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/23367.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23367",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23367/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/2dc0471378037f4084dda345ac27b71ddb82b42d",
    "number": 23367,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "Optimize coin selection by dropping BnB upper limit",
    "user": {
      "login": "S3RK",
      "id": 1466284,
      "node_id": "MDQ6VXNlcjE0NjYyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/S3RK",
      "html_url": "https://github.com/S3RK",
      "followers_url": "https://api.github.com/users/S3RK/followers",
      "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
      "organizations_url": "https://api.github.com/users/S3RK/orgs",
      "repos_url": "https://api.github.com/users/S3RK/repos",
      "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/S3RK/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Requires #22019 and #22949\r\n\r\nRemoving upper bound allows to find more changeless solutions. Most of them would be terrible due to huge excess and hence waste, so another solution would be chosen. But in some cases excess higher than upper bound would be\r\neconomically optimal based on waste metric.\r\n\r\nThis change also makes transaction building and waste calculation consistent. Specifically it eliminates two sources of discrepancy: \r\n\r\n1. for knapsack we used to always calculate waste as if they produce change (that's not always true)\r\n2. change could be dropped to fees during tx building after waste is calculated \r\n\r\nAs a result we should see more changeless solutions which is good for: privacy, utxo set, total fees paid. ",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 955867938,
        "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
        "name": "Needs rebase",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2021-10-27T07:49:51Z",
    "updated_at": "2022-06-12T17:16:08Z",
    "closed_at": "2022-03-30T07:36:38Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merge_commit_sha": "dd4bb2d0b11c725c9ca9578e20ed2c627bdef588",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "S3RK:bnb_drop_upper_limit",
      "ref": "bnb_drop_upper_limit",
      "sha": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 268426115,
        "node_id": "MDEwOlJlcG9zaXRvcnkyNjg0MjYxMTU=",
        "name": "bitcoin",
        "full_name": "S3RK/bitcoin",
        "owner": {
          "login": "S3RK",
          "id": 1466284,
          "node_id": "MDQ6VXNlcjE0NjYyODQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/S3RK",
          "html_url": "https://github.com/S3RK",
          "followers_url": "https://api.github.com/users/S3RK/followers",
          "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
          "organizations_url": "https://api.github.com/users/S3RK/orgs",
          "repos_url": "https://api.github.com/users/S3RK/repos",
          "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/S3RK/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/S3RK/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/S3RK/bitcoin",
        "archive_url": "https://api.github.com/repos/S3RK/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/S3RK/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/S3RK/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/S3RK/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/S3RK/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/S3RK/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/S3RK/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/S3RK/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/S3RK/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/S3RK/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/S3RK/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/S3RK/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/S3RK/bitcoin/events",
        "forks_url": "https://api.github.com/repos/S3RK/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/S3RK/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/S3RK/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/S3RK/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/S3RK/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/S3RK/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/S3RK/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/S3RK/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/S3RK/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/S3RK/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/S3RK/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/S3RK/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/S3RK/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/S3RK/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/S3RK/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/S3RK/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:S3RK/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/S3RK/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/S3RK/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/S3RK/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/S3RK/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/S3RK/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/S3RK/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/S3RK/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/S3RK/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/S3RK/bitcoin/hooks",
        "svn_url": "https://github.com/S3RK/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 213012,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-02-15T08:37:12Z",
        "created_at": "2020-06-01T04:37:33Z",
        "updated_at": "2022-11-28T07:47:20Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "df6e961c417bc6e733f2fcefd2d712178a3da4b6",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69819,
        "watchers_count": 69819,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-07T05:35:10Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T04:47:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
      }
    },
    "author_association": "MEMBER",
    "draft": true,
    "additions": 234,
    "deletions": 146,
    "changed_files": 8,
    "commits": 10,
    "review_comments": 11,
    "comments": 7
  },
  "events": [
    {
      "event": "commented",
      "id": 952634736,
      "node_id": "IC_kwDOABII5844yA1w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952634736",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-27T07:52:56Z",
      "updated_at": "2021-10-27T07:52:56Z",
      "author_association": "MEMBER",
      "body": "Thanks @Xekyo for the feedback on the original idea. cc @achow101 ",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#issuecomment-952634736",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23367"
    },
    {
      "event": "mentioned",
      "id": 5525505308,
      "node_id": "MEE_lADOABII58490LcCzwAAAAFJWIUc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5525505308",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-27T07:52:56Z"
    },
    {
      "event": "subscribed",
      "id": 5525505312,
      "node_id": "SE_lADOABII58490LcCzwAAAAFJWIUg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5525505312",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-27T07:52:56Z"
    },
    {
      "event": "mentioned",
      "id": 5525505325,
      "node_id": "MEE_lADOABII58490LcCzwAAAAFJWIUt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5525505325",
      "actor": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-27T07:52:56Z"
    },
    {
      "event": "subscribed",
      "id": 5525505331,
      "node_id": "SE_lADOABII58490LcCzwAAAAFJWIUz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5525505331",
      "actor": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-27T07:52:56Z"
    },
    {
      "event": "labeled",
      "id": 5525550201,
      "node_id": "LE_lADOABII58490LcCzwAAAAFJWTR5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5525550201",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-27T08:00:41Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "commented",
      "id": 952997298,
      "node_id": "IC_kwDOABII5844zZWy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952997298",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-27T14:39:10Z",
      "updated_at": "2022-01-10T09:11:48Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23810](https://github.com/bitcoin/bitcoin/pull/23810) (refactor: destroy all C-style casts; use modern C++ casts, enforce via `-Wold-style-cast` by PastaPastaPasta)\n* [#23545](https://github.com/bitcoin/bitcoin/pull/23545) (scripted-diff: Use clang-tidy syntax for C++ named arguments by MarcoFalke)\n* [#23534](https://github.com/bitcoin/bitcoin/pull/23534) (wallet: Allow negative effective value inputs when subtracting fee from outputs by achow101)\n* [#23497](https://github.com/bitcoin/bitcoin/pull/23497) (Add `src/node/` and `src/wallet/` code to `node::` and `wallet::` namespaces by ryanofsky)\n* [#23475](https://github.com/bitcoin/bitcoin/pull/23475) (wallet: add config to prioritize a solution that doesn't create change in coin selection by brunoerg)\n* [#23202](https://github.com/bitcoin/bitcoin/pull/23202) (wallet: allow psbtbumpfee to work with txs with external inputs by achow101)\n* [#23201](https://github.com/bitcoin/bitcoin/pull/23201) (wallet: Allow users to specify input weights when funding a transaction by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#issuecomment-952997298",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23367"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5532109904,
      "node_id": "HRFPE_lADOABII58490LcCzwAAAAFJvUxQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5532109904",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-28T07:43:03Z"
    },
    {
      "event": "commented",
      "id": 953899056,
      "node_id": "IC_kwDOABII584421gw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/953899056",
      "actor": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-28T14:24:14Z",
      "updated_at": "2021-10-28T14:43:12Z",
      "author_association": "MEMBER",
      "body": "As discussed, @achow101 ran his simulation with this modification. It did find 10% more changeless solutions and an overall decrease in fee expenditure, but there were a few outcomes where the final input set that was used to fund transactions caused change output to be created that just exceeded the dust limit. \r\n\r\nEdit: I see that you appear to always drop everything below `min_change` to fees, so we'd have to see how that changes the overall fee, and whether we might still need a limit for the overshoot of BnB inputs. Or perhaps whether we have to weight the excess differently than other types of costs that are less avoidable.",
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#issuecomment-953899056",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23367"
    },
    {
      "event": "mentioned",
      "id": 5534558508,
      "node_id": "MEE_lADOABII58490LcCzwAAAAFJ4qks",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5534558508",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-28T14:24:14Z"
    },
    {
      "event": "subscribed",
      "id": 5534558518,
      "node_id": "SE_lADOABII58490LcCzwAAAAFJ4qk2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5534558518",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-28T14:24:15Z"
    },
    {
      "event": "commented",
      "id": 954480452,
      "node_id": "IC_kwDOABII58445DdE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954480452",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-29T07:00:33Z",
      "updated_at": "2021-10-29T07:00:33Z",
      "author_association": "MEMBER",
      "body": "> Edit: I see that you appear to always drop everything below `min_change` to fees, so we'd have to see how that changes the overall fee, and whether we might still need a limit for the overshoot of BnB inputs. \r\n\r\nJust to clarify, dropping to fees behaviour is not changed. I just moved it higher and passed the threshold to coin selection so waste calculation is based on the same tx structure as transaction building. What's new is that in case of BnB we will never created change now. \r\n\r\nWe already limit max absolute fee by `DEFAULT_TRANSACTION_MAXFEE = COIN / 10`. Maybe we can just lower the default?\r\n\r\nI tend to think that whenever we have a solution with huge excess from BnB, we should get the same solution but with change instead of excess found by other selection algorithms. The problem is that SRD has min change of COIN/100/2, and knapsack is not deterministic AFAIK. Maybe need to try to prove this more formally? Or consider adding another algo in the mix that will deterministically produce a solution with change\r\n",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#issuecomment-954480452",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23367"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5697461383,
      "node_id": "HRFPE_lADOABII58490LcCzwAAAAFTmFyH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5697461383",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-01T09:08:49Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5703927788,
      "node_id": "HRFPE_lADOABII58490LcCzwAAAAFT-wfs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5703927788",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-02T07:51:59Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5732258865,
      "node_id": "HRFPE_lADOABII58490LcCzwAAAAFVq1Qx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5732258865",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-08T08:34:35Z"
    },
    {
      "event": "labeled",
      "id": 5760406920,
      "node_id": "LE_lADOABII58490LcCzwAAAAFXWNWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5760406920",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-13T23:17:38Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVmMDM1ZWZjZWYwNTk5MjJhZmIzMmJkMmY3NWYzMmY2Y2Q5NTM5ODQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f035efcef059922afb32bd2f75f32f6cd953984",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5f035efcef059922afb32bd2f75f32f6cd953984",
      "tree": {
        "sha": "a8c9fd91b12d026f155aa4ad733b9ced2bf86b25",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a8c9fd91b12d026f155aa4ad733b9ced2bf86b25"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9015d118425df4a5b34455da15334901ece85ed3",
          "sha": "9015d118425df4a5b34455da15334901ece85ed3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9015d118425df4a5b34455da15334901ece85ed3"
        }
      ],
      "message": "wallet: do not count wallet utxos as external",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-15T08:58:08Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-01T07:40:25Z"
      },
      "sha": "5f035efcef059922afb32bd2f75f32f6cd953984"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5769869714,
      "node_id": "HRFPE_lADOABII58490LcCzwAAAAFX6TmS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5769869714",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-15T09:18:38Z"
    },
    {
      "event": "unlabeled",
      "id": 5770257933,
      "node_id": "UNLE_lADOABII58490LcCzwAAAAFX7yYN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5770257933",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-15T10:19:24Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 995094431,
      "node_id": "IC_kwDOABII5847T--f",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/995094431",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-15T19:02:16Z",
      "updated_at": "2021-12-15T19:02:16Z",
      "author_association": "MEMBER",
      "body": "ISTM what this is really showing is that our calculation for the upper bound is incorrect. It's a bit overkill to remove the upper bound entirely; rather we should fix the calculation such that it finds the correct upper bound for what we are willing to throw away.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#issuecomment-995094431",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23367"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc3ZGY3MzkxMTAzYTNhMTE5MjdlZWU0YTM0Zjc0MWJkNDk5OGRhYTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/77df7391103a3a11927eee4a34f741bd4998daa5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/77df7391103a3a11927eee4a34f741bd4998daa5",
      "tree": {
        "sha": "520e8be794d05360ef4d2da9e71a76c2df42968d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/520e8be794d05360ef4d2da9e71a76c2df42968d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f035efcef059922afb32bd2f75f32f6cd953984",
          "sha": "5f035efcef059922afb32bd2f75f32f6cd953984",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5f035efcef059922afb32bd2f75f32f6cd953984"
        }
      ],
      "message": "wallet: don't add change_fee for knapsack target if subsctracting fee from output",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-16T08:01:06Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-15T08:59:05Z"
      },
      "sha": "77df7391103a3a11927eee4a34f741bd4998daa5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVhNzA1NmJmNTExZjRiNjFmNjkzZGJhNGZjNzY5MTM3OWVhMjFmMzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ea7056bf511f4b61f693dba4fc7691379ea21f36",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ea7056bf511f4b61f693dba4fc7691379ea21f36",
      "tree": {
        "sha": "3f7ee004882b87338b558c08a761dde9b0cd3250",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f7ee004882b87338b558c08a761dde9b0cd3250"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/77df7391103a3a11927eee4a34f741bd4998daa5",
          "sha": "77df7391103a3a11927eee4a34f741bd4998daa5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/77df7391103a3a11927eee4a34f741bd4998daa5"
        }
      ],
      "message": "test: verify waste for coinselection",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-16T08:01:13Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-01T07:50:12Z"
      },
      "sha": "ea7056bf511f4b61f693dba4fc7691379ea21f36"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgwM2FlNmU2NWE5NDQ5NWI4MTE1ODE0N2E3MTVmMDNmMTE3ZGM3MDA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/803ae6e65a94495b81158147a715f03f117dc700",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/803ae6e65a94495b81158147a715f03f117dc700",
      "tree": {
        "sha": "afa2951f71c6ae2530ad1ee0b847b7af793ace2e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/afa2951f71c6ae2530ad1ee0b847b7af793ace2e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ea7056bf511f4b61f693dba4fc7691379ea21f36",
          "sha": "ea7056bf511f4b61f693dba4fc7691379ea21f36",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ea7056bf511f4b61f693dba4fc7691379ea21f36"
        }
      ],
      "message": "wallet: unify max signature logic",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-16T08:01:13Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-15T09:03:13Z"
      },
      "sha": "803ae6e65a94495b81158147a715f03f117dc700"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI3MTU4MTcxZmViMTE4NmE2YThiM2M4NzI4YjY2YzI2MzJlNmFlMDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/27158171feb1186a6a8b3c8728b66c2632e6ae08",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/27158171feb1186a6a8b3c8728b66c2632e6ae08",
      "tree": {
        "sha": "fdb8ebef1b63d6f71c23f650b16e8e22a239dd1c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fdb8ebef1b63d6f71c23f650b16e8e22a239dd1c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/803ae6e65a94495b81158147a715f03f117dc700",
          "sha": "803ae6e65a94495b81158147a715f03f117dc700",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/803ae6e65a94495b81158147a715f03f117dc700"
        }
      ],
      "message": "wallet: fix SelectionResult target SRD",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-16T08:01:14Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-13T07:37:50Z"
      },
      "sha": "27158171feb1186a6a8b3c8728b66c2632e6ae08"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdkODM5ZWIxM2Y1NzllNjFiMTA0OGI3NTZmODRiMDdhYWRkMDVlNzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7d839eb13f579e61b1048b756f84b07aadd05e75",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7d839eb13f579e61b1048b756f84b07aadd05e75",
      "tree": {
        "sha": "52444a7ea304545a720cac1805d3f347456e387f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/52444a7ea304545a720cac1805d3f347456e387f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/27158171feb1186a6a8b3c8728b66c2632e6ae08",
          "sha": "27158171feb1186a6a8b3c8728b66c2632e6ae08",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/27158171feb1186a6a8b3c8728b66c2632e6ae08"
        }
      ],
      "message": "wallet: CInputCoin store weight",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-16T08:01:14Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-15T09:06:46Z"
      },
      "sha": "7d839eb13f579e61b1048b756f84b07aadd05e75"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5776520739,
      "node_id": "HRFPE_lADOABII58490LcCzwAAAAFYTrYj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5776520739",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-16T08:09:07Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNiN2QyZDdlY2Q3OGY2YzMyYzczMTI5MzA0OWEwNTlmMWRhN2NkYzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3b7d2d7ecd78f6c32c731293049a059f1da7cdc6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3b7d2d7ecd78f6c32c731293049a059f1da7cdc6",
      "tree": {
        "sha": "4a89efd543a2a8834a4df2e8120802daccb792b8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4a89efd543a2a8834a4df2e8120802daccb792b8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7d839eb13f579e61b1048b756f84b07aadd05e75",
          "sha": "7d839eb13f579e61b1048b756f84b07aadd05e75",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7d839eb13f579e61b1048b756f84b07aadd05e75"
        }
      ],
      "message": "WIP. Add CInputCoint::m_isSegwit",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-16T09:46:01Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-15T08:53:14Z"
      },
      "sha": "3b7d2d7ecd78f6c32c731293049a059f1da7cdc6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFlYTQ2Yjc3Y2NmOWZkM2U0MjVkYzMzMGU3ZTJlM2NkZmM0MThhYjY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1ea46b77ccf9fd3e425dc330e7e2e3cdfc418ab6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1ea46b77ccf9fd3e425dc330e7e2e3cdfc418ab6",
      "tree": {
        "sha": "d3b95446d8863114842844b942b2950a59ff86b8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d3b95446d8863114842844b942b2950a59ff86b8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3b7d2d7ecd78f6c32c731293049a059f1da7cdc6",
          "sha": "3b7d2d7ecd78f6c32c731293049a059f1da7cdc6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3b7d2d7ecd78f6c32c731293049a059f1da7cdc6"
        }
      ],
      "message": "wallet: force no change for BnB.",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-16T09:46:01Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-15T09:07:52Z"
      },
      "sha": "1ea46b77ccf9fd3e425dc330e7e2e3cdfc418ab6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY0MjM5OTg0MDk3MzZiZTU3MjhiYjU4MjZjZmE4OWUxMDMzZWQ4MTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6423998409736be5728bb5826cfa89e1033ed816",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6423998409736be5728bb5826cfa89e1033ed816",
      "tree": {
        "sha": "28e7069b2193729f9e1a10dbb4f92c474cb2eadc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/28e7069b2193729f9e1a10dbb4f92c474cb2eadc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1ea46b77ccf9fd3e425dc330e7e2e3cdfc418ab6",
          "sha": "1ea46b77ccf9fd3e425dc330e7e2e3cdfc418ab6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1ea46b77ccf9fd3e425dc330e7e2e3cdfc418ab6"
        }
      ],
      "message": "WIP. Return change from SelectionResult",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-16T09:46:01Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-13T07:28:52Z"
      },
      "sha": "6423998409736be5728bb5826cfa89e1033ed816"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJkYzA0NzEzNzgwMzdmNDA4NGRkYTM0NWFjMjdiNzFkZGI4MmI0MmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2dc0471378037f4084dda345ac27b71ddb82b42d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2dc0471378037f4084dda345ac27b71ddb82b42d",
      "tree": {
        "sha": "229b6af6ca5f47b77221e738dbac12c1b6daddae",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/229b6af6ca5f47b77221e738dbac12c1b6daddae"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6423998409736be5728bb5826cfa89e1033ed816",
          "sha": "6423998409736be5728bb5826cfa89e1033ed816",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6423998409736be5728bb5826cfa89e1033ed816"
        }
      ],
      "message": "wallet: remove upper bound for BnB\n\nRemoving upper bound allows to find more changeless solutions. Most of them\nwould be terrible due to huge excess and hence waste, so another solution would\nbe chosen. But in some cases excess higher than upper bound would be\neconomically optimal based on waste metric.",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-16T09:46:02Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2021-12-13T07:34:08Z"
      },
      "sha": "2dc0471378037f4084dda345ac27b71ddb82b42d"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5777068827,
      "node_id": "HRFPE_lADOABII58490LcCzwAAAAFYVxMb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5777068827",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-16T09:46:10Z"
    },
    {
      "event": "reviewed",
      "id": 836783624,
      "node_id": "PRR_kwDOABII584x4E4I",
      "url": null,
      "actor": null,
      "commit_id": "5f035efcef059922afb32bd2f75f32f6cd953984",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "IMO this PR should be broken up into multiple. There are a few commits which could stand alone and it would be nice to have them first. I think that the main \"Return change from SelectionResult\" commit (and some of the things that lead up to it) should be in its own PR, with this one building on top of that.\r\n\r\nI have a few issues with the approach taken for `GetChange` - there is an inline comment for discussing that.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#pullrequestreview-836783624",
      "submitted_at": "2021-12-20T21:21:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
    },
    {
      "event": "labeled",
      "id": 5872083998,
      "node_id": "LE_lADOABII58490LcCzwAAAAFeAOQe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5872083998",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-11T10:36:56Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1009830877,
      "node_id": "IC_kwDOABII5848MMvd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1009830877",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-11T10:36:57Z",
      "updated_at": "2022-01-11T10:36:57Z",
      "author_association": "MEMBER",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n🐙 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#issuecomment-1009830877",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23367"
    },
    {
      "event": "commented",
      "id": 1082732678,
      "node_id": "IC_kwDOABII585AiTCG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1082732678",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-30T07:36:38Z",
      "updated_at": "2022-03-30T07:36:38Z",
      "author_association": "MEMBER",
      "body": "This approach drops huge amounts to fees in the cases introduced in #24580. In the short-term I'll work on just increasing the boundary for BnB search to improve efficiency of coin selection.",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#issuecomment-1082732678",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23367"
    },
    {
      "event": "closed",
      "id": 6332638616,
      "node_id": "CE_lADOABII58490LcCzwAAAAF5dGWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6332638616",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-30T07:36:38Z"
    },
    {
      "event": "referenced",
      "id": 6972322036,
      "node_id": "REFE_lADOABII58490LcCzwAAAAGflTD0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6972322036",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9fef32c78f7e61ccdd227d0cde5a00cb658831ab",
      "commit_url": "https://api.github.com/repos/S3RK/bitcoin/commits/9fef32c78f7e61ccdd227d0cde5a00cb658831ab",
      "created_at": "2022-07-11T19:54:39Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772646102",
      "pull_request_review_id": 836783624,
      "id": 772646102,
      "node_id": "PRRC_kwDOABII584uDaTW",
      "diff_hunk": "@@ -992,14 +992,28 @@ bool FundTransaction(CWallet& wallet, CMutableTransaction& tx, CAmount& nFeeRet,\n \n     coinControl.fAllowOtherInputs = true;\n \n-    for (const CTxIn& txin : tx.vin) {\n-        coinControl.Select(txin.prevout);\n-    }\n-\n     // Acquire the locks to prevent races to the new locked unspents between the\n     // CreateTransaction call and LockCoin calls (when lockUnspents is true).\n     LOCK(wallet.cs_wallet);\n \n+    // Fetch specified UTXOs from the UTXO set to get the scriptPubKeys and values of the outputs being selected\n+    // and to match with the given solving_data. Only used for non-wallet outputs.\n+    std::map<COutPoint, Coin> coins;\n+    for (const CTxIn& txin : tx.vin) {\n+        coins[txin.prevout]; // Create empty map entry keyed by prevout.\n+    }\n+    wallet.chain().findCoins(coins);\n+\n+    for (const CTxIn& txin : tx.vin) {\n+        // if it's not in the wallet and corresponding UTXO is found than select as external output\n+        const auto& outPoint = txin.prevout;",
      "path": "src/wallet/spend.cpp",
      "position": 22,
      "original_position": 22,
      "commit_id": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "original_commit_id": "5f035efcef059922afb32bd2f75f32f6cd953984",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 5f035efcef059922afb32bd2f75f32f6cd953984 \"wallet: do not count wallet utxos as external\"\r\n\r\nnit: don't use camelCase",
      "created_at": "2021-12-20T20:22:47Z",
      "updated_at": "2021-12-20T21:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#discussion_r772646102",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772646102"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1015,
      "original_line": 1009,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772649929",
      "pull_request_review_id": 836783624,
      "id": 772649929,
      "node_id": "PRRC_kwDOABII584uDbPJ",
      "diff_hunk": "@@ -343,8 +343,10 @@ BOOST_AUTO_TEST_CASE(bnb_search_test)\n         coin_control.fAllowOtherInputs = true;\n         coin_control.Select(COutPoint(coins.at(0).tx->GetHash(), coins.at(0).i));\n         coin_selection_params_bnb.m_effective_feerate = CFeeRate(0);\n-        const auto result10 = SelectCoins(*wallet, coins, 10 * CENT, coin_control, coin_selection_params_bnb);\n+        auto result10 = SelectCoins(*wallet, coins, 10 * CENT, coin_control, coin_selection_params_bnb);\n         BOOST_CHECK(result10);\n+        result10->ComputeAndSetWaste(coin_selection_params_bnb);",
      "path": "src/wallet/test/coinselector_tests.cpp",
      "position": 7,
      "original_position": 7,
      "commit_id": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "original_commit_id": "ea7056bf511f4b61f693dba4fc7691379ea21f36",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In ea7056bf511f4b61f693dba4fc7691379ea21f36 \"test: verify waste for coinselection\"\r\n\r\nThis doesn't compile\r\n\r\n```suggestion\r\n        result10->ComputeAndSetWaste(coin_selection_params_bnb.m_cost_of_change);\r\n```",
      "created_at": "2021-12-20T20:30:20Z",
      "updated_at": "2021-12-20T21:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#discussion_r772649929",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772649929"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 342,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772653438",
      "pull_request_review_id": 836783624,
      "id": 772653438,
      "node_id": "PRRC_kwDOABII584uDcF-",
      "diff_hunk": "@@ -343,8 +343,10 @@ BOOST_AUTO_TEST_CASE(bnb_search_test)\n         coin_control.fAllowOtherInputs = true;\n         coin_control.Select(COutPoint(coins.at(0).tx->GetHash(), coins.at(0).i));\n         coin_selection_params_bnb.m_effective_feerate = CFeeRate(0);\n-        const auto result10 = SelectCoins(*wallet, coins, 10 * CENT, coin_control, coin_selection_params_bnb);\n+        auto result10 = SelectCoins(*wallet, coins, 10 * CENT, coin_control, coin_selection_params_bnb);\n         BOOST_CHECK(result10);\n+        result10->ComputeAndSetWaste(coin_selection_params_bnb);\n+        BOOST_CHECK(result10->GetWaste() == -68 * 3); // - (long_term_fee * input) * 3coins",
      "path": "src/wallet/test/coinselector_tests.cpp",
      "position": 8,
      "original_position": 8,
      "commit_id": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "original_commit_id": "ea7056bf511f4b61f693dba4fc7691379ea21f36",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In ea7056bf511f4b61f693dba4fc7691379ea21f36 \"test: verify waste for coinselection\"\r\n\r\nThis fails.",
      "created_at": "2021-12-20T20:37:25Z",
      "updated_at": "2021-12-20T21:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#discussion_r772653438",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772653438"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 343,
      "original_line": 349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772654819",
      "pull_request_review_id": 836783624,
      "id": 772654819,
      "node_id": "PRRC_kwDOABII584uDcbj",
      "diff_hunk": "@@ -66,14 +63,13 @@ class COutput\n };\n \n //Get the marginal bytes of spending the specified output\n-int CalculateMaximumSignedInputSize(const CTxOut& txout, const CWallet* pwallet, bool use_max_sig = false);\n-int CalculateMaximumSignedInputSize(const CTxOut& txout, const SigningProvider* pwallet, bool use_max_sig = false);\n-\n struct TxSize {\n     int64_t vsize{-1};\n     int64_t weight{-1};\n };\n \n+int CalculateMaximumSignedInputSize(const CTxOut& txout, const CWallet* pwallet, const CCoinControl* coin_control = nullptr);\n+int CalculateMaximumSignedInputSize(const CTxOut& txout, const COutPoint outpoint, const SigningProvider* pwallet, const CCoinControl* coin_control = nullptr);",
      "path": "src/wallet/spend.h",
      "position": 50,
      "original_position": 50,
      "commit_id": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "original_commit_id": "803ae6e65a94495b81158147a715f03f117dc700",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 803ae6e65a94495b81158147a715f03f117dc700 \"wallet: unify max signature logic\"\r\n\r\nnit: Did these have to move?",
      "created_at": "2021-12-20T20:40:08Z",
      "updated_at": "2021-12-20T21:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#discussion_r772654819",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772654819"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772658059",
      "pull_request_review_id": 836783624,
      "id": 772658059,
      "node_id": "PRRC_kwDOABII584uDdOL",
      "diff_hunk": "@@ -32,9 +32,10 @@ class CInputCoin {\n         effective_value = txout.nValue;\n     }\n \n-    CInputCoin(const CTransactionRef& tx, unsigned int i, int input_bytes) : CInputCoin(tx, i)\n+    CInputCoin(const CTransactionRef& tx, unsigned int i, int input_bytes, int input_weight) : CInputCoin(tx, i)",
      "path": "src/wallet/coinselection.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "original_commit_id": "7d839eb13f579e61b1048b756f84b07aadd05e75",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 7d839eb13f579e61b1048b756f84b07aadd05e75 \"wallet: CInputCoin store weight\"\r\n\r\nSince the callers have to be changed to use `TxSize` anyways, why not just take a `TxSize` here rather than the two components individually?",
      "created_at": "2021-12-20T20:46:22Z",
      "updated_at": "2021-12-20T21:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#discussion_r772658059",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772658059"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772658314",
      "pull_request_review_id": 836783624,
      "id": 772658314,
      "node_id": "PRRC_kwDOABII584uDdSK",
      "diff_hunk": "@@ -32,9 +32,10 @@ class CInputCoin {\n         effective_value = txout.nValue;\n     }\n \n-    CInputCoin(const CTransactionRef& tx, unsigned int i, int input_bytes) : CInputCoin(tx, i)\n+    CInputCoin(const CTransactionRef& tx, unsigned int i, int input_bytes, int input_weight) : CInputCoin(tx, i)\n     {\n         m_input_bytes = input_bytes;\n+        m_input_weight = input_weight;",
      "path": "src/wallet/coinselection.h",
      "position": 8,
      "original_position": 8,
      "commit_id": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "original_commit_id": "7d839eb13f579e61b1048b756f84b07aadd05e75",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 7d839eb13f579e61b1048b756f84b07aadd05e75 \"wallet: CInputCoin store weight\"\r\n\r\nPerhaps store a `TxSize` instead of the two components?",
      "created_at": "2021-12-20T20:46:54Z",
      "updated_at": "2021-12-20T21:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#discussion_r772658314",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772658314"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 38,
      "original_line": 38,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772659439",
      "pull_request_review_id": 836783624,
      "id": 772659439,
      "node_id": "PRRC_kwDOABII584uDdjv",
      "diff_hunk": "@@ -32,10 +32,11 @@ class CInputCoin {\n         effective_value = txout.nValue;\n     }\n \n-    CInputCoin(const CTransactionRef& tx, unsigned int i, int input_bytes, int input_weight) : CInputCoin(tx, i)\n+    CInputCoin(const CTransactionRef& tx, unsigned int i, int input_bytes, int input_weight, bool isSegwit) : CInputCoin(tx, i)\n     {\n         m_input_bytes = input_bytes;\n         m_input_weight = input_weight;\n+        m_isSegwit = isSegwit;",
      "path": "src/wallet/coinselection.h",
      "position": 9,
      "original_position": 9,
      "commit_id": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "original_commit_id": "3b7d2d7ecd78f6c32c731293049a059f1da7cdc6",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 3b7d2d7ecd78f6c32c731293049a059f1da7cdc6 \"WIP. Add CInputCoint::m_isSegwit\"\r\n\r\nnit: snake_case is preferred.",
      "created_at": "2021-12-20T20:49:16Z",
      "updated_at": "2021-12-20T21:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#discussion_r772659439",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772659439"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 39,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772662729",
      "pull_request_review_id": 836783624,
      "id": 772662729,
      "node_id": "PRRC_kwDOABII584uDeXJ",
      "diff_hunk": "@@ -432,3 +448,52 @@ bool SelectionResult::operator<(SelectionResult other) const\n     // As this operator is only used in std::min_element, we want the result that has more inputs when waste are equal.\n     return *m_waste < *other.m_waste || (*m_waste == *other.m_waste && m_selected_inputs.size() > other.m_selected_inputs.size());\n }\n+\n+CAmount SelectionResult::GetInputsWeight() const\n+{\n+    // WU required to store input counter\n+    // 1 vbyte for the default case already counted in non_input_size\n+    int weight = (GetSizeOfCompactSize(m_selected_inputs.size()) - 1)*4;\n+    bool hasWitnessInputs = false;",
      "path": "src/wallet/coinselection.cpp",
      "position": 52,
      "original_position": 52,
      "commit_id": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "original_commit_id": "6423998409736be5728bb5826cfa89e1033ed816",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 6423998409736be5728bb5826cfa89e1033ed816 \"WIP. Return change from SelectionResult\"\r\n\r\nnit: snake_case is preferred",
      "created_at": "2021-12-20T20:55:35Z",
      "updated_at": "2021-12-20T21:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#discussion_r772662729",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772662729"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 456,
      "original_line": 457,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772667838",
      "pull_request_review_id": 836783624,
      "id": 772667838,
      "node_id": "PRRC_kwDOABII584uDfm-",
      "diff_hunk": "@@ -492,6 +499,7 @@ std::optional<SelectionResult> SelectCoins(const CWallet& wallet, const std::vec\n          */\n         preset_inputs.Insert(coin, 0, false, 0, 0, false);\n     }\n+    // TODO: value_to_select -= preset_inputs.GetSelectionAmount();",
      "path": "src/wallet/spend.cpp",
      "position": 48,
      "original_position": 48,
      "commit_id": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "original_commit_id": "6423998409736be5728bb5826cfa89e1033ed816",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 6423998409736be5728bb5826cfa89e1033ed816 \"WIP. Return change from SelectionResult\"\r\n\r\nThis is currently unnecessary because in the loop above, the values of preset inputs are subtracted from `value_to_select`.",
      "created_at": "2021-12-20T21:05:13Z",
      "updated_at": "2021-12-20T21:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#discussion_r772667838",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772667838"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 502,
      "original_line": 502,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772668947",
      "pull_request_review_id": 836783624,
      "id": 772668947,
      "node_id": "PRRC_kwDOABII584uDf4T",
      "diff_hunk": "@@ -744,9 +756,17 @@ static bool CreateTransactionInternal(\n     coin_selection_params.m_change_fee = coin_selection_params.m_effective_feerate.GetFee(coin_selection_params.change_output_size);\n     coin_selection_params.m_cost_of_change = coin_selection_params.m_discard_feerate.GetFee(coin_selection_params.change_spend_size) + coin_selection_params.m_change_fee;\n \n+    // We want to drop the change to fees if:\n+    // 1. The change output would be dust\n+    // 2. The change is within the (almost) exact match window, i.e. it is less than or equal to the cost of the change output (cost_of_change)\n+    const auto dust = GetDustThreshold(change_prototype_txout, coin_selection_params.m_discard_feerate);\n+    // TODO: disambiguate between min_change and m_cost_of_change\n+    if (dust > coin_selection_params.m_cost_of_change) coin_selection_params.m_cost_of_change = dust;",
      "path": "src/wallet/spend.cpp",
      "position": 88,
      "original_position": 88,
      "commit_id": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "original_commit_id": "6423998409736be5728bb5826cfa89e1033ed816",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 6423998409736be5728bb5826cfa89e1033ed816 \"WIP. Return change from SelectionResult\"\r\n\r\n```suggestion\r\n    coin_selection_params.m_cost_of_change = std::max(GetDustThreshold(change_prototype_txout, coin_selection_params.m_discard_feerate), coin_selection_params.m_cost_of_change);\r\n```",
      "created_at": "2021-12-20T21:07:38Z",
      "updated_at": "2021-12-20T21:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#discussion_r772668947",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772668947"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
        }
      },
      "start_line": 762,
      "original_start_line": 762,
      "start_side": "RIGHT",
      "line": 764,
      "original_line": 764,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772672988",
      "pull_request_review_id": 836783624,
      "id": 772672988,
      "node_id": "PRRC_kwDOABII584uDg3c",
      "diff_hunk": "@@ -432,3 +448,52 @@ bool SelectionResult::operator<(SelectionResult other) const\n     // As this operator is only used in std::min_element, we want the result that has more inputs when waste are equal.\n     return *m_waste < *other.m_waste || (*m_waste == *other.m_waste && m_selected_inputs.size() > other.m_selected_inputs.size());\n }\n+\n+CAmount SelectionResult::GetInputsWeight() const\n+{\n+    // WU required to store input counter\n+    // 1 vbyte for the default case already counted in non_input_size\n+    int weight = (GetSizeOfCompactSize(m_selected_inputs.size()) - 1)*4;\n+    bool hasWitnessInputs = false;\n+\n+    for (const auto& coin : m_selected_inputs) {\n+        weight += coin.m_input_weight;\n+        hasWitnessInputs |= coin.m_isSegwit;\n+    }\n+\n+    // non_input_size counted witness marker and flag as 1vbyte, correcting this now for correct final fee\n+    if (hasWitnessInputs) {\n+        weight -= 2;\n+    } else {\n+        weight -= 4;\n+\n+        // correct for witness stack size counted but not serialized when there is not witness inputs\n+        weight -= m_selected_inputs.size();\n+    }\n+\n+    return weight;\n+}\n+\n+CAmount SelectionResult::GetChange(const CoinSelectionParams& coin_selection_params) const\n+{\n+    if (m_force_no_change) return 0;\n+\n+    CAmount change = GetSelectedValue() - m_target;\n+    // TODO: rename var maybe?\n+    if (!m_use_effective) { // opposite of m_subtract_fee_outputs\n+        // m_target already includes not_input_fees\n+        // but as they are payed by recipients we can add them back to our change\n+        const CAmount not_input_fees = coin_selection_params.m_effective_feerate.GetFee(coin_selection_params.tx_noinputs_size);\n+        change += not_input_fees;\n+    } else {\n+        const auto size = GetVirtualTransactionSize(GetInputsWeight(), 0, 0);\n+        change -= coin_selection_params.m_effective_feerate.GetFee(size);\n+    }\n+    assert(change >= 0);\n+\n+    if (change <= coin_selection_params.m_cost_of_change) { // TODO: less or less_or_equal\n+        change = 0;\n+    }\n+\n+    return change;\n+}",
      "path": "src/wallet/coinselection.cpp",
      "position": 94,
      "original_position": 94,
      "commit_id": "2dc0471378037f4084dda345ac27b71ddb82b42d",
      "original_commit_id": "6423998409736be5728bb5826cfa89e1033ed816",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 6423998409736be5728bb5826cfa89e1033ed816 \"WIP. Return change from SelectionResult\"\r\n\r\nI feel like all of the size calculation stuff in this function is unnecessary. We don't need `GetChange` to be exact down to the satoshi. Rather it just needs to be close enough to the real change (and essentially be whether there is going to be a change output) and its exact value can be adjusted later in `CreateTransaction` once we know the real size of the transaction. That adjustment doesn't need to account for dust because that should be taken care of here.\r\n\r\nIt also seems like it is not necessary to calculate the change on the fly like this. Rather the coin selection algorithms should already know what the change is based on their parameters when they selected. While we don't know the fees exactly due to rolling them into the target, we do know how much was selected and what the input fees should be, so we can calculate the change in the `SelectCoins*` functions and just set it in `SelectionResult`.",
      "created_at": "2021-12-20T21:15:58Z",
      "updated_at": "2021-12-20T21:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23367#discussion_r772672988",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772672988"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23367"
        }
      },
      "start_line": 476,
      "original_start_line": 477,
      "start_side": "RIGHT",
      "line": 498,
      "original_line": 499,
      "side": "RIGHT"
    }
  ]
}