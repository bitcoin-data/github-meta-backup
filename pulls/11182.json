{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182",
    "id": 138005879,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTM4MDA1ODc5",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11182",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/11182.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/11182.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/32ae82f5c3d51a66ad4deb84819809b890664245",
    "number": 11182,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "[tests] Add P2P interface to TestNode",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Final two steps of #10082 : Adding the \"mininode\" P2P interface to `TestNode`\r\n\r\nThis PR adds the mininode P2P interface to `TestNode`. It simplifies the process for opening a P2P connection to the node-under-test from this:\r\n\r\n```python\r\nnode0 = NodeConnCB()\r\nconnections = []\r\nconnections.append(NodeConn('127.0.0.1', p2p_port(0), self.nodes[0], node0))\r\nnode0.add_connection(connections[0])\r\n```\r\n\r\nto this:\r\n\r\n```python\r\nself.nodes[0].add_p2p_connection(p2p_conn_type=NodeConnCB)\r\n```\r\n\r\nThe first commit adds the infrastructure to `test_node.py`. The second updates the individual test cases to use it. Can be separated if this is too much review for one PR.",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/30",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/30",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/30/labels",
      "id": 2626187,
      "node_id": "MDk6TWlsZXN0b25lMjYyNjE4Nw==",
      "number": 30,
      "state": "closed",
      "title": "0.16.0",
      "description": "This will be the release of segwit wallet. ðŸŽ‰ ",
      "creator": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 0,
      "closed_issues": 70,
      "created_at": "2017-07-06T19:58:41Z",
      "updated_at": "2018-03-07T16:28:13Z",
      "closed_at": "2018-03-07T16:28:13Z"
    },
    "active_lock_reason": "resolved",
    "created_at": "2017-08-28T18:20:04Z",
    "updated_at": "2021-09-08T11:30:29Z",
    "closed_at": "2017-11-08T18:15:01Z",
    "mergeable_state": "unknown",
    "merged_at": "2017-11-08T18:15:01Z",
    "merge_commit_sha": "32ae82f5c3d51a66ad4deb84819809b890664245",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "jnewbery:test_node_p2p",
      "ref": "test_node_p2p",
      "sha": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 68248485,
        "node_id": "MDEwOlJlcG9zaXRvcnk2ODI0ODQ4NQ==",
        "name": "bitcoin",
        "full_name": "jnewbery/bitcoin",
        "owner": {
          "login": "jnewbery",
          "id": 1063656,
          "node_id": "MDQ6VXNlcjEwNjM2NTY=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jnewbery",
          "html_url": "https://github.com/jnewbery",
          "followers_url": "https://api.github.com/users/jnewbery/followers",
          "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
          "organizations_url": "https://api.github.com/users/jnewbery/orgs",
          "repos_url": "https://api.github.com/users/jnewbery/repos",
          "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/jnewbery/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/jnewbery/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/jnewbery/bitcoin",
        "archive_url": "https://api.github.com/repos/jnewbery/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/jnewbery/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/jnewbery/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/jnewbery/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/jnewbery/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/jnewbery/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/jnewbery/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/jnewbery/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/jnewbery/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/jnewbery/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/jnewbery/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/jnewbery/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/jnewbery/bitcoin/events",
        "forks_url": "https://api.github.com/repos/jnewbery/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/jnewbery/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/jnewbery/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/jnewbery/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/jnewbery/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/jnewbery/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/jnewbery/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/jnewbery/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/jnewbery/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/jnewbery/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/jnewbery/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/jnewbery/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/jnewbery/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/jnewbery/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/jnewbery/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/jnewbery/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:jnewbery/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/jnewbery/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/jnewbery/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/jnewbery/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/jnewbery/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/jnewbery/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/jnewbery/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/jnewbery/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/jnewbery/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/jnewbery/bitcoin/hooks",
        "svn_url": "https://github.com/jnewbery/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 219109,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-04-21T11:07:55Z",
        "created_at": "2016-09-14T22:29:05Z",
        "updated_at": "2021-07-06T16:23:27Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "77546a3182e5df622aa99446fc4ba8118db58351",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69818,
        "watchers_count": 69818,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T22:42:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-06T22:16:48Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 212,
    "deletions": 269,
    "changed_files": 16,
    "commits": 3,
    "review_comments": 29,
    "comments": 13
  },
  "events": [
    {
      "event": "reviewed",
      "id": 59039098,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTkwMzkwOTg=",
      "url": null,
      "actor": null,
      "commit_id": "ba30027a70c328e45bfa7ce4afc100c847da5d2c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "This is so much cleaner. I love the work you have done on this testing infra. Writing my first P2P test was super easy.",
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#pullrequestreview-59039098",
      "submitted_at": "2017-08-28T19:24:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
    },
    {
      "event": "labeled",
      "id": 1224640211,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDEyMjQ2NDAyMTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1224640211",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-28T22:50:18Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1225858256,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTIyNTg1ODI1Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1225858256",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-29T15:06:43Z"
    },
    {
      "event": "commented",
      "id": 325694720,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTY5NDcyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325694720",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-29T15:08:38Z",
      "updated_at": "2017-08-29T15:08:38Z",
      "author_association": "MEMBER",
      "body": "@jimpo - thanks for the review. I'm glad you like the new framework. My aim was to make test-writing easier and quicker for contributors, so I appreciate the feedback.\r\n\r\nI think I've addressed your review comments.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-325694720",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "mentioned",
      "id": 1225862488,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTIyNTg2MjQ4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1225862488",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-29T15:08:38Z"
    },
    {
      "event": "subscribed",
      "id": 1225862491,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEyMjU4NjI0OTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1225862491",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-29T15:08:38Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1231707965,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTIzMTcwNzk2NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1231707965",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-01T17:01:53Z"
    },
    {
      "event": "commented",
      "id": 326633134,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjYzMzEzNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/326633134",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-01T17:01:58Z",
      "updated_at": "2017-09-01T17:01:58Z",
      "author_association": "MEMBER",
      "body": "rebased",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-326633134",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1249384149,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI0OTM4NDE0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1249384149",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-14T14:53:02Z"
    },
    {
      "event": "commented",
      "id": 329507649,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTUwNzY0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329507649",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-14T14:53:11Z",
      "updated_at": "2017-09-14T14:53:11Z",
      "author_association": "MEMBER",
      "body": "rebased",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-329507649",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1249717148,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI0OTcxNzE0OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1249717148",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-14T17:52:32Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1257472584,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI1NzQ3MjU4NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1257472584",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-20T13:49:41Z"
    },
    {
      "event": "commented",
      "id": 330857445,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDg1NzQ0NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330857445",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-20T13:49:46Z",
      "updated_at": "2017-09-20T13:49:46Z",
      "author_association": "MEMBER",
      "body": "rebased",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-330857445",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "commented",
      "id": 331283336,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTI4MzMzNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/331283336",
      "actor": {
        "login": "mess110",
        "id": 226170,
        "node_id": "MDQ6VXNlcjIyNjE3MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/226170?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mess110",
        "html_url": "https://github.com/mess110",
        "followers_url": "https://api.github.com/users/mess110/followers",
        "following_url": "https://api.github.com/users/mess110/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mess110/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mess110/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mess110/subscriptions",
        "organizations_url": "https://api.github.com/users/mess110/orgs",
        "repos_url": "https://api.github.com/users/mess110/repos",
        "events_url": "https://api.github.com/users/mess110/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mess110/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-21T21:12:15Z",
      "updated_at": "2017-09-21T21:12:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "## p2p vs p2ps\r\n\r\nI am not 100% sure about the `p2p` and `p2ps` magic. What would somebody expect in a case where two p2p connections are made, we disconnect the first peer and call `send_message`?\r\n\r\nWhen we disconnect a peer should the `p2p` variable be updated? Maybe `p2p` should be a method which returns the first connection in the `p2ps` array.\r\n\r\nImo the behavior is not really predictable and a cleaner way would be to always call `p2ps[0]` or whatever index is needed, despite less syntax sugar.\r\n\r\n## import *\r\n\r\nSince you modified the files in this patch, do you think it would be a good idea to replace `import *` with specific imports? (exceptions could be `p2p-segwit` and `p2p-compactblocks` since the imports would be quite big).\r\n\r\n## ACK\r\n\r\nI think this patch is really helpful, way cleaner peer connection initialization.\r\n\r\nIf the above mentioned points are not relevant, ACK https://github.com/bitcoin/bitcoin/pull/11182/commits/5f9294759df348eca9a6361f7e98360fc07cd3f4",
      "user": {
        "login": "mess110",
        "id": 226170,
        "node_id": "MDQ6VXNlcjIyNjE3MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/226170?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mess110",
        "html_url": "https://github.com/mess110",
        "followers_url": "https://api.github.com/users/mess110/followers",
        "following_url": "https://api.github.com/users/mess110/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mess110/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mess110/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mess110/subscriptions",
        "organizations_url": "https://api.github.com/users/mess110/orgs",
        "repos_url": "https://api.github.com/users/mess110/repos",
        "events_url": "https://api.github.com/users/mess110/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mess110/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-331283336",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1261368217,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI2MTM2ODIxNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1261368217",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-22T14:38:01Z"
    },
    {
      "event": "commented",
      "id": 331467540,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTQ2NzU0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/331467540",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-22T14:45:26Z",
      "updated_at": "2017-09-22T14:45:26Z",
      "author_association": "MEMBER",
      "body": "Thanks for the review @mess110 . Responses:\r\n\r\n**p2p vs p2ps**: You're right that this is syntactic sugar, but I think being able to use `node.p2p` in place of `node.p2ps[0]` is useful. Most tests that use the p2p interface will only have a single p2p connection to the node, so writing `node.p2ps[0]` many times is redundant and distracts from the intent of the test. However, your feedback has convinced me to remove some of the syntactic sugar and simplify the implementation:\r\n\r\n- I've removed the `ever_connected` latch and automatic connecting on first `send_message`. Test cases should explicitly create a p2p connection if they wish to use it.\r\n- I've turned `self.p2p` into a property which returns the `p2ps[0]`\r\n- I've removed the redundant `connected` variable, which should always be equivalent to `p2ps is []`\r\n\r\n**wildcard imports**: yes, I'd love to clean this up, but I meet resistance whenever I try to do that! I've left it out of this PR so this only focuses on adding the p2p interface.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-331467540",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "mentioned",
      "id": 1261382474,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTI2MTM4MjQ3NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1261382474",
      "actor": {
        "login": "mess110",
        "id": 226170,
        "node_id": "MDQ6VXNlcjIyNjE3MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/226170?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mess110",
        "html_url": "https://github.com/mess110",
        "followers_url": "https://api.github.com/users/mess110/followers",
        "following_url": "https://api.github.com/users/mess110/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mess110/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mess110/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mess110/subscriptions",
        "organizations_url": "https://api.github.com/users/mess110/orgs",
        "repos_url": "https://api.github.com/users/mess110/repos",
        "events_url": "https://api.github.com/users/mess110/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mess110/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-22T14:45:26Z"
    },
    {
      "event": "subscribed",
      "id": 1261382476,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEyNjEzODI0NzY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1261382476",
      "actor": {
        "login": "mess110",
        "id": 226170,
        "node_id": "MDQ6VXNlcjIyNjE3MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/226170?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mess110",
        "html_url": "https://github.com/mess110",
        "followers_url": "https://api.github.com/users/mess110/followers",
        "following_url": "https://api.github.com/users/mess110/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mess110/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mess110/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mess110/subscriptions",
        "organizations_url": "https://api.github.com/users/mess110/orgs",
        "repos_url": "https://api.github.com/users/mess110/repos",
        "events_url": "https://api.github.com/users/mess110/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mess110/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-22T14:45:26Z"
    },
    {
      "event": "commented",
      "id": 331732032,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTczMjAzMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/331732032",
      "actor": {
        "login": "mess110",
        "id": 226170,
        "node_id": "MDQ6VXNlcjIyNjE3MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/226170?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mess110",
        "html_url": "https://github.com/mess110",
        "followers_url": "https://api.github.com/users/mess110/followers",
        "following_url": "https://api.github.com/users/mess110/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mess110/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mess110/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mess110/subscriptions",
        "organizations_url": "https://api.github.com/users/mess110/orgs",
        "repos_url": "https://api.github.com/users/mess110/repos",
        "events_url": "https://api.github.com/users/mess110/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mess110/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-24T19:07:50Z",
      "updated_at": "2017-09-24T19:07:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK https://github.com/bitcoin/bitcoin/pull/11182/commits/0cb3474b664fc04a23640614e2e8b0deae6c2d50",
      "user": {
        "login": "mess110",
        "id": 226170,
        "node_id": "MDQ6VXNlcjIyNjE3MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/226170?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mess110",
        "html_url": "https://github.com/mess110",
        "followers_url": "https://api.github.com/users/mess110/followers",
        "following_url": "https://api.github.com/users/mess110/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mess110/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mess110/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mess110/subscriptions",
        "organizations_url": "https://api.github.com/users/mess110/orgs",
        "repos_url": "https://api.github.com/users/mess110/repos",
        "events_url": "https://api.github.com/users/mess110/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mess110/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-331732032",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "milestoned",
      "id": 1276284419,
      "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDEyNzYyODQ0MTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1276284419",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-03T16:02:30Z",
      "milestone": {
        "title": "0.16.0"
      }
    },
    {
      "event": "commented",
      "id": 337668657,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzY2ODY1Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/337668657",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-18T17:36:05Z",
      "updated_at": "2017-10-18T17:36:05Z",
      "author_association": "MEMBER",
      "body": "utACK 0cb3474b664fc04a23640614e2e8b0deae6c2d50",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-337668657",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "reviewed",
      "id": 70574386,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzA1NzQzODY=",
      "url": null,
      "actor": null,
      "commit_id": "2d5ca2e6459236915fa7bf5b85cf50629266129c",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 0cb3474b664fc04a23640614e2e8b0deae6c2d50. Changes to tests seem good. Growth of TestNode class seems less good, because now it's bigger, more coupled to other parts of framework and importing functionality that many tests won't use. Probably you could make the same test simplifications by improving NodeConn directly (defaulting to '127.0.0.1', combining NodeConn constructor and add_connection method) instead of wrapping it up in a new interface. But this seems like an improvement overall regardless.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#pullrequestreview-70574386",
      "submitted_at": "2017-10-19T16:01:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1303050596,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTMwMzA1MDU5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1303050596",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-20T13:53:05Z"
    },
    {
      "event": "commented",
      "id": 338215228,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzODIxNTIyOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338215228",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-20T14:00:58Z",
      "updated_at": "2017-10-20T14:00:58Z",
      "author_association": "MEMBER",
      "body": "Thanks for the review @ryanofsky . I think I've addressed all your comments.\r\n\r\nPrevious branch: https://github.com/jnewbery/bitcoin/tree/pr11182.2\r\nRebased on master: https://github.com/jnewbery/bitcoin/tree/pr11182.3\r\nComments addressed: https://github.com/jnewbery/bitcoin/tree/pr11182.4\r\n\r\n> Growth of TestNode class seems less good, because now it's bigger, more coupled to other parts of framework and importing functionality that many tests won't use\r\n\r\nCan you expand a bit on what you think the concrete problems are? My hope for `TestNode` is that it can be a unified interface to a node under test with all batteries included. If an individual test doesn't need to use the p2p interface, that's fine - just don't add one. I'd rather that `TestNode` be more coupled to the mininode implementation than have all the individual test scripts coupled to that implementation, since it makes refactoring mininode and changing the implementation more straightforward (see #11518 for example).",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-338215228",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "mentioned",
      "id": 1303066139,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTMwMzA2NjEzOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1303066139",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-20T14:00:58Z"
    },
    {
      "event": "subscribed",
      "id": 1303066140,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzMDMwNjYxNDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1303066140",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-20T14:00:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1305628835,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTMwNTYyODgzNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1305628835",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-23T13:32:32Z"
    },
    {
      "event": "commented",
      "id": 338659758,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzODY1OTc1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338659758",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-23T13:32:40Z",
      "updated_at": "2017-10-23T13:32:40Z",
      "author_association": "MEMBER",
      "body": "rebased",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-338659758",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1306057807,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTMwNjA1NzgwNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1306057807",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-23T16:46:01Z"
    },
    {
      "event": "reviewed",
      "id": 72886758,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzI4ODY3NTg=",
      "url": null,
      "actor": null,
      "commit_id": "cb882d0d4cfeeb91492965ed0678c9c8de340c80",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#pullrequestreview-72886758",
      "submitted_at": "2017-10-30T15:57:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
    },
    {
      "event": "commented",
      "id": 341114135,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTExNDEzNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/341114135",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-01T14:00:42Z",
      "updated_at": "2017-11-01T14:00:42Z",
      "author_association": "MEMBER",
      "body": "Sorry for letting this sit in rebase hell. You might want to wait until #11389 is merged and then ping me after rebase.",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-341114135",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "reviewed",
      "id": 74158677,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzQxNTg2Nzc=",
      "url": null,
      "actor": null,
      "commit_id": "9054fc17e6b279e20d5d11820634a12fe545cd97",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "> Can you expand a bit on what you think the concrete problems are?\r\n\r\nThe concrete problems I'm concerned about are:\r\n\r\n- Code duplicated between mininode & testnode getting out of sync\r\n- Confusing and inconsistent test code, with some parts of tests calling mininode functions directly and others calling testnode wrappers around mininode functions. Even if you can avoid this for now it seems likely to happen in the future unless a clear separation is made.\r\n- Complicated control flow. A control flow where test code just calls mininode code is more straightforward than a control flow where test code calls testnode, which calls back into test code via a callback, which calls mininode constructors via inheritance, and then returns to testnode, which stores mininode objects in an array, and provides methods for test code to call back into testnode to get access to the array, and then call other mininode functions.\r\n\r\nThe first problem above was addressed by your change to add_p2p_connection in the last push. The second and third problems will be substantially mitigated if you implement suggestions in my code review comments below.\r\n\r\nIf you take all my suggestions, the TestNode will only have 3 mininode related members: `add_p2p_connection`, `p2ps`, and `p2p` will which be pretty self contained and straightforward. I would still probably prefer 0 members to 3, and just having a nice standalone helper method to wire up testnode&peernode objects together where necessary. But if you want TestNode to be a big batteries included class that does a collection of marginally related things, then I think you can mostly address my concerns and still have that.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#pullrequestreview-74158677",
      "submitted_at": "2017-11-03T19:29:28Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1328491527,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTMyODQ5MTUyNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1328491527",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-06T21:24:16Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiODZjMWNkMjA4MzdhZTQ1OWI3YzExYzFkZWZiNTMzNmU0MTUwOWQy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b86c1cd20837ae459b7c11c1defb5336e41509d2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b86c1cd20837ae459b7c11c1defb5336e41509d2",
      "tree": {
        "sha": "9bdd69be172427f23aebe864362550db497eb64f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9bdd69be172427f23aebe864362550db497eb64f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/77546a3182e5df622aa99446fc4ba8118db58351",
          "sha": "77546a3182e5df622aa99446fc4ba8118db58351",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/77546a3182e5df622aa99446fc4ba8118db58351"
        }
      ],
      "message": "[tests] fix TestNode.__getattr__() method",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-11-08T14:04:02Z"
      },
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-10-20T13:27:55Z"
      },
      "sha": "b86c1cd20837ae459b7c11c1defb5336e41509d2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZTU3MjVjYzJiNTZkNjY1MTBmZDg1ZDdlZTM4MjJlNmRmNDNjZDI0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5e5725cc2b56d66510fd85d7ee3822e6df43cd24",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5e5725cc2b56d66510fd85d7ee3822e6df43cd24",
      "tree": {
        "sha": "7db35ff6d7149484cbe738c164ce47d7c78dbf95",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7db35ff6d7149484cbe738c164ce47d7c78dbf95"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b86c1cd20837ae459b7c11c1defb5336e41509d2",
          "sha": "b86c1cd20837ae459b7c11c1defb5336e41509d2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b86c1cd20837ae459b7c11c1defb5336e41509d2"
        }
      ],
      "message": "[tests] Add p2p connection to TestNode\n\np2p connections can now be added to TestNode instances.\n\nThis commit also updates the example test to use the new\np2p interface in TestNode to demonstrate usage.\n\nA future commit will update the existing tests to use p2p through the\nTestNode.",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-11-08T14:04:02Z"
      },
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-03-27T13:42:17Z"
      },
      "sha": "5e5725cc2b56d66510fd85d7ee3822e6df43cd24"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzozMmFlODJmNWMzZDUxYTY2YWQ0ZGViODQ4MTk4MDliODkwNjY0MjQ1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/32ae82f5c3d51a66ad4deb84819809b890664245",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/32ae82f5c3d51a66ad4deb84819809b890664245",
      "tree": {
        "sha": "23e83cfed1f974a3a21df022ec1f207eeb645dae",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/23e83cfed1f974a3a21df022ec1f207eeb645dae"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5e5725cc2b56d66510fd85d7ee3822e6df43cd24",
          "sha": "5e5725cc2b56d66510fd85d7ee3822e6df43cd24",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5e5725cc2b56d66510fd85d7ee3822e6df43cd24"
        }
      ],
      "message": "[tests] use TestNode p2p connection in tests",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-11-08T14:32:04Z"
      },
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-08-24T19:36:02Z"
      },
      "sha": "32ae82f5c3d51a66ad4deb84819809b890664245"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1331957249,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTMzMTk1NzI0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1331957249",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-08T14:32:13Z"
    },
    {
      "event": "commented",
      "id": 342837449,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0MjgzNzQ0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/342837449",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-08T14:41:27Z",
      "updated_at": "2017-11-08T14:41:27Z",
      "author_association": "MEMBER",
      "body": "rebased on master now that #11389 is merged",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-342837449",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "commented",
      "id": 342902274,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0MjkwMjI3NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/342902274",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-08T18:01:10Z",
      "updated_at": "2017-11-08T18:01:10Z",
      "author_association": "MEMBER",
      "body": "utACK 32ae82f5c3d51a66ad4deb84819809b890664245",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-342902274",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11182"
    },
    {
      "event": "merged",
      "id": 1332423997,
      "node_id": "MDExOk1lcmdlZEV2ZW50MTMzMjQyMzk5Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1332423997",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/32ae82f5c3d51a66ad4deb84819809b890664245",
      "created_at": "2017-11-08T18:15:01Z"
    },
    {
      "event": "closed",
      "id": 1332424000,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTMzMjQyNDAwMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1332424000",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-08T18:15:01Z"
    },
    {
      "event": "referenced",
      "id": 1332424368,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEzMzI0MjQzNjg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1332424368",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f7388e93d3dd91a90239aedac4ec58404f103a2e",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f7388e93d3dd91a90239aedac4ec58404f103a2e",
      "created_at": "2017-11-08T18:15:10Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 1332655561,
      "node_id": "MDE5OkhlYWRSZWZEZWxldGVkRXZlbnQxMzMyNjU1NTYx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1332655561",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-08T20:20:11Z"
    },
    {
      "event": "referenced",
      "id": 1364457848,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEzNjQ0NTc4NDg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1364457848",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9f2c2dba21855b8cb9b193b1819be73fa4a23a99",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9f2c2dba21855b8cb9b193b1819be73fa4a23a99",
      "created_at": "2017-11-29T21:31:48Z"
    },
    {
      "event": "referenced",
      "id": 2673873517,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI2NzM4NzM1MTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2673873517",
      "actor": {
        "login": "codablock",
        "id": 1884269,
        "node_id": "MDQ6VXNlcjE4ODQyNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1884269?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/codablock",
        "html_url": "https://github.com/codablock",
        "followers_url": "https://api.github.com/users/codablock/followers",
        "following_url": "https://api.github.com/users/codablock/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/codablock/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/codablock/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/codablock/subscriptions",
        "organizations_url": "https://api.github.com/users/codablock/orgs",
        "repos_url": "https://api.github.com/users/codablock/repos",
        "events_url": "https://api.github.com/users/codablock/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/codablock/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "65487ade38dc5f9289de56fc1cd65d32f7bfdcf2",
      "commit_url": "https://api.github.com/repos/codablock/dash/commits/65487ade38dc5f9289de56fc1cd65d32f7bfdcf2",
      "created_at": "2019-09-30T16:07:24Z"
    },
    {
      "event": "referenced",
      "id": 2674066504,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI2NzQwNjY1MDQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2674066504",
      "actor": {
        "login": "codablock",
        "id": 1884269,
        "node_id": "MDQ6VXNlcjE4ODQyNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1884269?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/codablock",
        "html_url": "https://github.com/codablock",
        "followers_url": "https://api.github.com/users/codablock/followers",
        "following_url": "https://api.github.com/users/codablock/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/codablock/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/codablock/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/codablock/subscriptions",
        "organizations_url": "https://api.github.com/users/codablock/orgs",
        "repos_url": "https://api.github.com/users/codablock/repos",
        "events_url": "https://api.github.com/users/codablock/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/codablock/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0f17abaa29af31d80c4df92c6f5a0ee7b38d6c09",
      "commit_url": "https://api.github.com/repos/codablock/dash/commits/0f17abaa29af31d80c4df92c6f5a0ee7b38d6c09",
      "created_at": "2019-09-30T17:08:37Z"
    },
    {
      "event": "referenced",
      "id": 2679891697,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI2Nzk4OTE2OTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2679891697",
      "actor": {
        "login": "codablock",
        "id": 1884269,
        "node_id": "MDQ6VXNlcjE4ODQyNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1884269?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/codablock",
        "html_url": "https://github.com/codablock",
        "followers_url": "https://api.github.com/users/codablock/followers",
        "following_url": "https://api.github.com/users/codablock/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/codablock/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/codablock/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/codablock/subscriptions",
        "organizations_url": "https://api.github.com/users/codablock/orgs",
        "repos_url": "https://api.github.com/users/codablock/repos",
        "events_url": "https://api.github.com/users/codablock/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/codablock/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ec1d2b6722ef8f4ee48dcc8bc70b961471887821",
      "commit_url": "https://api.github.com/repos/codablock/dash/commits/ec1d2b6722ef8f4ee48dcc8bc70b961471887821",
      "created_at": "2019-10-02T09:20:59Z"
    },
    {
      "event": "referenced",
      "id": 2680575347,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI2ODA1NzUzNDc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2680575347",
      "actor": {
        "login": "codablock",
        "id": 1884269,
        "node_id": "MDQ6VXNlcjE4ODQyNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1884269?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/codablock",
        "html_url": "https://github.com/codablock",
        "followers_url": "https://api.github.com/users/codablock/followers",
        "following_url": "https://api.github.com/users/codablock/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/codablock/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/codablock/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/codablock/subscriptions",
        "organizations_url": "https://api.github.com/users/codablock/orgs",
        "repos_url": "https://api.github.com/users/codablock/repos",
        "events_url": "https://api.github.com/users/codablock/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/codablock/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "7b9dd03e270afcfb723b0c364e64a8e5f74b54ef",
      "commit_url": "https://api.github.com/repos/codablock/dash/commits/7b9dd03e270afcfb723b0c364e64a8e5f74b54ef",
      "created_at": "2019-10-02T13:26:31Z"
    },
    {
      "event": "referenced",
      "id": 2683608788,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI2ODM2MDg3ODg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2683608788",
      "actor": {
        "login": "UdjinM6",
        "id": 1935069,
        "node_id": "MDQ6VXNlcjE5MzUwNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1935069?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/UdjinM6",
        "html_url": "https://github.com/UdjinM6",
        "followers_url": "https://api.github.com/users/UdjinM6/followers",
        "following_url": "https://api.github.com/users/UdjinM6/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/UdjinM6/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/UdjinM6/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/UdjinM6/subscriptions",
        "organizations_url": "https://api.github.com/users/UdjinM6/orgs",
        "repos_url": "https://api.github.com/users/UdjinM6/repos",
        "events_url": "https://api.github.com/users/UdjinM6/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/UdjinM6/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "c9a8bac49753cd410e2d502578735c18d72226d4",
      "commit_url": "https://api.github.com/repos/UdjinM6/dash/commits/c9a8bac49753cd410e2d502578735c18d72226d4",
      "created_at": "2019-10-03T10:48:32Z"
    },
    {
      "event": "referenced",
      "id": 2683815076,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI2ODM4MTUwNzY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2683815076",
      "actor": {
        "login": "codablock",
        "id": 1884269,
        "node_id": "MDQ6VXNlcjE4ODQyNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1884269?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/codablock",
        "html_url": "https://github.com/codablock",
        "followers_url": "https://api.github.com/users/codablock/followers",
        "following_url": "https://api.github.com/users/codablock/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/codablock/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/codablock/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/codablock/subscriptions",
        "organizations_url": "https://api.github.com/users/codablock/orgs",
        "repos_url": "https://api.github.com/users/codablock/repos",
        "events_url": "https://api.github.com/users/codablock/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/codablock/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "7c163b1ffd366b7aa6616f1476150d68f1afac8d",
      "commit_url": "https://api.github.com/repos/codablock/dash/commits/7c163b1ffd366b7aa6616f1476150d68f1afac8d",
      "created_at": "2019-10-03T12:10:01Z"
    },
    {
      "event": "referenced",
      "id": 2971477753,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI5NzE0Nzc3NTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2971477753",
      "actor": {
        "login": "barrystyle",
        "id": 14147070,
        "node_id": "MDQ6VXNlcjE0MTQ3MDcw",
        "avatar_url": "https://avatars.githubusercontent.com/u/14147070?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/barrystyle",
        "html_url": "https://github.com/barrystyle",
        "followers_url": "https://api.github.com/users/barrystyle/followers",
        "following_url": "https://api.github.com/users/barrystyle/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/barrystyle/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/barrystyle/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/barrystyle/subscriptions",
        "organizations_url": "https://api.github.com/users/barrystyle/orgs",
        "repos_url": "https://api.github.com/users/barrystyle/repos",
        "events_url": "https://api.github.com/users/barrystyle/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/barrystyle/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "fca03b56eee2fd1907eaec202685129e2ab8612c",
      "commit_url": "https://api.github.com/repos/PACGlobalOfficial/PAC/commits/fca03b56eee2fd1907eaec202685129e2ab8612c",
      "created_at": "2020-01-22T20:22:35Z"
    },
    {
      "event": "locked",
      "id": 5271690080,
      "node_id": "LOE_lADOABII584PGsNszwAAAAE6N5tg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271690080",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T11:30:29Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135608494",
      "pull_request_review_id": 59039098,
      "id": 135608494,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNTYwODQ5NA==",
      "diff_hunk": "@@ -195,28 +190,26 @@ def run_test(self):\n         connect_nodes(self.nodes[1], 2)\n \n         self.log.info(\"Add P2P connection to node2\")\n-        node2 = BaseNode()\n-        connections.append(NodeConn('127.0.0.1', p2p_port(2), self.nodes[2], node2))\n-        node2.add_connection(connections[1])\n-        node2.wait_for_verack()\n+        self.nodes[2].add_p2p_connection(p2p_conn_type=BaseNode)\n+        self.nodes[2].p2p.wait_for_verack()\n \n         self.log.info(\"Wait for node2 reach current tip. Test that it has propagated all the blocks to us\")\n \n         getdata_request = msg_getdata()\n         for block in blocks:\n             getdata_request.inv.append(CInv(2, block))\n-        node2.send_message(getdata_request)\n+        self.nodes[2].send_message(getdata_request)\n \n         # wait_until() will loop until a predicate condition is met. Use it to test properties of the\n         # NodeConnCB objects.\n-        wait_until(lambda: sorted(blocks) == sorted(list(node2.block_receive_map.keys())), timeout=5, lock=mininode_lock)\n+        wait_until(lambda: sorted(blocks) == sorted(list(self.nodes[2].block_receive_map.keys())), timeout=5, lock=mininode_lock)",
      "path": "test/functional/example_test.py",
      "position": null,
      "original_position": 66,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "ba30027a70c328e45bfa7ce4afc100c847da5d2c",
      "in_reply_to_id": null,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`self.nodes[2].p2p.block_receive_map`, right?",
      "created_at": "2017-08-28T19:14:56Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135608494",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135608494"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 205,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135609557",
      "pull_request_review_id": 59039098,
      "id": 135609557,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNTYwOTU1Nw==",
      "diff_hunk": "@@ -141,6 +160,33 @@ def node_encrypt_wallet(self, passphrase):\n         self.rpc = None\n         self.rpc_connected = False\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+        \"\"\"Add a p2p connection to the node.\"\"\"\n+        if dstport is None:\n+            dstport = p2p_port(self.index)\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        p2p_conn.add_connection(NodeConn(dstaddr, dstport, self.rpc, p2p_conn, services=services, send_version=send_version))\n+        if self.p2p is None:\n+            self.p2p = self.p2ps[0]\n+        self.p2p_connected = True\n+        self.p2p_ever_connected = True\n+\n+    def send_message(self, message):\n+        \"\"\"Send a p2p message to the node.\"\"\"\n+        if not self.p2p_ever_connected:\n+            self.add_p2p_connections()",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 81,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "ba30027a70c328e45bfa7ce4afc100c847da5d2c",
      "in_reply_to_id": null,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Where is `add_p2p_connections` defined? Is it virtual?",
      "created_at": "2017-08-28T19:19:41Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135609557",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135609557"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 178,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135610294",
      "pull_request_review_id": 59039098,
      "id": 135610294,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNTYxMDI5NA==",
      "diff_hunk": "@@ -141,6 +160,33 @@ def node_encrypt_wallet(self, passphrase):\n         self.rpc = None\n         self.rpc_connected = False\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 66,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "c3730eff46b498df59cd0b80632dceb9de35fcd3",
      "in_reply_to_id": null,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It seems very common to refer to `self.nodes[i].p2p`. Maybe this method should return the new connection so the client code can assign to a local variable.",
      "created_at": "2017-08-28T19:23:04Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135610294",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135610294"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 167,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647278",
      "pull_request_review_id": 59082154,
      "id": 135647278,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNTY0NzI3OA==",
      "diff_hunk": "@@ -195,28 +190,26 @@ def run_test(self):\n         connect_nodes(self.nodes[1], 2)\n \n         self.log.info(\"Add P2P connection to node2\")\n-        node2 = BaseNode()\n-        connections.append(NodeConn('127.0.0.1', p2p_port(2), self.nodes[2], node2))\n-        node2.add_connection(connections[1])\n-        node2.wait_for_verack()\n+        self.nodes[2].add_p2p_connection(p2p_conn_type=BaseNode)\n+        self.nodes[2].p2p.wait_for_verack()\n \n         self.log.info(\"Wait for node2 reach current tip. Test that it has propagated all the blocks to us\")\n \n         getdata_request = msg_getdata()\n         for block in blocks:\n             getdata_request.inv.append(CInv(2, block))\n-        node2.send_message(getdata_request)\n+        self.nodes[2].send_message(getdata_request)\n \n         # wait_until() will loop until a predicate condition is met. Use it to test properties of the\n         # NodeConnCB objects.\n-        wait_until(lambda: sorted(blocks) == sorted(list(node2.block_receive_map.keys())), timeout=5, lock=mininode_lock)\n+        wait_until(lambda: sorted(blocks) == sorted(list(self.nodes[2].block_receive_map.keys())), timeout=5, lock=mininode_lock)",
      "path": "test/functional/example_test.py",
      "position": null,
      "original_position": 66,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "ba30027a70c328e45bfa7ce4afc100c847da5d2c",
      "in_reply_to_id": 135608494,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "yes. Thank you!",
      "created_at": "2017-08-28T22:03:20Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135647278",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647278"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 205,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647329",
      "pull_request_review_id": 59082206,
      "id": 135647329,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNTY0NzMyOQ==",
      "diff_hunk": "@@ -141,6 +160,33 @@ def node_encrypt_wallet(self, passphrase):\n         self.rpc = None\n         self.rpc_connected = False\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 66,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "c3730eff46b498df59cd0b80632dceb9de35fcd3",
      "in_reply_to_id": 135610294,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good idea. I'll add that",
      "created_at": "2017-08-28T22:03:36Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135647329",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647329"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 167,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647541",
      "pull_request_review_id": 59082441,
      "id": 135647541,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzNTY0NzU0MQ==",
      "diff_hunk": "@@ -141,6 +160,33 @@ def node_encrypt_wallet(self, passphrase):\n         self.rpc = None\n         self.rpc_connected = False\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+        \"\"\"Add a p2p connection to the node.\"\"\"\n+        if dstport is None:\n+            dstport = p2p_port(self.index)\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        p2p_conn.add_connection(NodeConn(dstaddr, dstport, self.rpc, p2p_conn, services=services, send_version=send_version))\n+        if self.p2p is None:\n+            self.p2p = self.p2ps[0]\n+        self.p2p_connected = True\n+        self.p2p_ever_connected = True\n+\n+    def send_message(self, message):\n+        \"\"\"Send a p2p message to the node.\"\"\"\n+        if not self.p2p_ever_connected:\n+            self.add_p2p_connections()",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 81,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "ba30027a70c328e45bfa7ce4afc100c847da5d2c",
      "in_reply_to_id": 135609557,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "oops. This is vestigial. I previously had an `add_p2p_connections()`, but it turned out to not be very useful. I'll fix this up. Thanks for pointing this out.",
      "created_at": "2017-08-28T22:04:45Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135647541",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647541"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 178,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145731251",
      "pull_request_review_id": 70574386,
      "id": 145731251,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NTczMTI1MQ==",
      "diff_hunk": "@@ -151,6 +164,39 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+        \"\"\"Add a p2p connection to the node.\n+\n+        This method adds the p2p connection to the self.p2ps list and also\n+        returns the connection to the caller.\"\"\"\n+        if dstport is None:\n+            dstport = p2p_port(self.index)\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        p2p_conn.add_connection(NodeConn(dstaddr, dstport, self.rpc, p2p_conn, services=services, send_version=send_version))\n+\n+        return p2p_conn\n+\n+    @property\n+    def p2p(self):\n+        \"\"\"Return the first p2p connection\n+\n+        Convenience property - most tests only use a single p2p connection to each\n+        node, so this saves having to write node.p2ps[0] many times.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        return self.p2ps[0]\n+\n+    def send_message(self, message):\n+        \"\"\"Send a p2p message to the node.\"\"\"\n+        assert self.p2ps != [], \"No p2p connection\"",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 88,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "2d5ca2e6459236915fa7bf5b85cf50629266129c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Probably should drop != to be pythonic and consistent with previous assert.",
      "created_at": "2017-10-19T15:13:14Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r145731251",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145731251"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145733426",
      "pull_request_review_id": 70574386,
      "id": 145733426,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NTczMzQyNg==",
      "diff_hunk": "@@ -63,10 +73,12 @@ def __init__(self, i, dirname, extra_args, rpchost, timewait, binary, stderr, mo\n         self.url = None\n         self.log = logging.getLogger('TestFramework.node%d' % i)\n \n-    def __getattr__(self, *args, **kwargs):\n+        self.p2ps = []\n+\n+    def __getattr__(self, name):\n         \"\"\"Dispatches any unrecognised messages to the RPC connection.\"\"\"\n         assert self.rpc_connected and self.rpc is not None, \"Error: no RPC connection\"\n-        return self.rpc.__getattr__(*args, **kwargs)\n+        return self.rpc.__getattr__(name)\n ",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 49,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "2d5ca2e6459236915fa7bf5b85cf50629266129c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This change seems to be unrelated, so maybe revert or move to another commit.\r\n\r\nAlso, it would be better `return getattr(self.rpc, name)` here to avoid making assumptions about python rpc class (like that it even has a \\_\\_getattr__ method), and so any exceptions thrown will be properly reported.",
      "created_at": "2017-10-19T15:20:05Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r145733426",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145733426"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145734889",
      "pull_request_review_id": 70574386,
      "id": 145734889,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NTczNDg4OQ==",
      "diff_hunk": "@@ -119,6 +131,7 @@ def stop_node(self):\n             self.stop()\n         except http.client.CannotSendRequest:\n             self.log.exception(\"Unable to stop node.\")\n+        self.p2ps = []",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 56,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "2d5ca2e6459236915fa7bf5b85cf50629266129c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Probably better to do `del self.p2ps[:]` to make sure connections are freed if there are other references to the list. Also would make it clearer that p2ps is an existing member.",
      "created_at": "2017-10-19T15:24:52Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r145734889",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145734889"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 134,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145736593",
      "pull_request_review_id": 70574386,
      "id": 145736593,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NTczNjU5Mw==",
      "diff_hunk": "@@ -151,6 +164,39 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 64,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "2d5ca2e6459236915fa7bf5b85cf50629266129c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Seem to be missing net argument. Maybe just take **kwargs here to simplify this function, avoid the need to update it if NodeConn gets new options, and avoid repeating default values for services and send_version options that might get out of sync.",
      "created_at": "2017-10-19T15:30:39Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r145736593",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145736593"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 167,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145737496",
      "pull_request_review_id": 70574386,
      "id": 145737496,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NTczNzQ5Ng==",
      "diff_hunk": "@@ -151,6 +164,39 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+        \"\"\"Add a p2p connection to the node.\n+\n+        This method adds the p2p connection to the self.p2ps list and also\n+        returns the connection to the caller.\"\"\"\n+        if dstport is None:\n+            dstport = p2p_port(self.index)\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        p2p_conn.add_connection(NodeConn(dstaddr, dstport, self.rpc, p2p_conn, services=services, send_version=send_version))\n+\n+        return p2p_conn\n+\n+    @property\n+    def p2p(self):\n+        \"\"\"Return the first p2p connection\n+\n+        Convenience property - most tests only use a single p2p connection to each\n+        node, so this saves having to write node.p2ps[0] many times.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        return self.p2ps[0]\n+\n+    def send_message(self, message):\n+        \"\"\"Send a p2p message to the node.\"\"\"\n+        assert self.p2ps != [], \"No p2p connection\"\n+        self.p2ps[0].send_message(message)\n+\n+    def disconnect_p2p(self, index=0):\n+        \"\"\"Close the p2p connection to the node.\"\"\"\n+        if self.p2ps[index].connection is not None:",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 93,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "2d5ca2e6459236915fa7bf5b85cf50629266129c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe add comment saying why it isn't an error for connection to be none. Saying e.g. when this condition is expected.",
      "created_at": "2017-10-19T15:33:00Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r145737496",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145737496"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145737845",
      "pull_request_review_id": 70574386,
      "id": 145737845,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NTczNzg0NQ==",
      "diff_hunk": "@@ -151,6 +164,39 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+        \"\"\"Add a p2p connection to the node.\n+\n+        This method adds the p2p connection to the self.p2ps list and also\n+        returns the connection to the caller.\"\"\"\n+        if dstport is None:\n+            dstport = p2p_port(self.index)\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        p2p_conn.add_connection(NodeConn(dstaddr, dstport, self.rpc, p2p_conn, services=services, send_version=send_version))\n+\n+        return p2p_conn\n+\n+    @property\n+    def p2p(self):\n+        \"\"\"Return the first p2p connection\n+\n+        Convenience property - most tests only use a single p2p connection to each\n+        node, so this saves having to write node.p2ps[0] many times.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        return self.p2ps[0]\n+\n+    def send_message(self, message):\n+        \"\"\"Send a p2p message to the node.\"\"\"\n+        assert self.p2ps != [], \"No p2p connection\"\n+        self.p2ps[0].send_message(message)\n+\n+    def disconnect_p2p(self, index=0):\n+        \"\"\"Close the p2p connection to the node.\"\"\"\n+        if self.p2ps[index].connection is not None:\n+            self.p2ps[index].connection.disconnect_node()\n+        self.p2ps.pop(index)",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 95,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "2d5ca2e6459236915fa7bf5b85cf50629266129c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Probably should write `del self.p2ps[index]` since not using the return value.",
      "created_at": "2017-10-19T15:34:06Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r145737845",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145737845"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 198,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145738456",
      "pull_request_review_id": 70574386,
      "id": 145738456,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NTczODQ1Ng==",
      "diff_hunk": "@@ -13,13 +13,19 @@\n import subprocess\n import time\n \n+from .authproxy import JSONRPCException\n+from .mininode import (\n+    NodeConn,\n+    NodeConnCB,",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 7,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "2d5ca2e6459236915fa7bf5b85cf50629266129c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Don't see NodeConnCB being used here. NODE_NETWORK import could also go away if using **kwargs as suggested below.",
      "created_at": "2017-10-19T15:36:06Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r145738456",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145738456"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145738978",
      "pull_request_review_id": 70574386,
      "id": 145738978,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NTczODk3OA==",
      "diff_hunk": "@@ -151,6 +164,39 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+        \"\"\"Add a p2p connection to the node.\n+\n+        This method adds the p2p connection to the self.p2ps list and also\n+        returns the connection to the caller.\"\"\"\n+        if dstport is None:\n+            dstport = p2p_port(self.index)\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        p2p_conn.add_connection(NodeConn(dstaddr, dstport, self.rpc, p2p_conn, services=services, send_version=send_version))\n+\n+        return p2p_conn\n+\n+    @property\n+    def p2p(self):\n+        \"\"\"Return the first p2p connection\n+\n+        Convenience property - most tests only use a single p2p connection to each\n+        node, so this saves having to write node.p2ps[0] many times.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        return self.p2ps[0]\n+\n+    def send_message(self, message):",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 86,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "2d5ca2e6459236915fa7bf5b85cf50629266129c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe call it `send_p2p_message` to be clearer and consistent with `add_p2p_connection`. This class has a lot of functionality already so it would be nice if all the new p2p attributes mentioned p2p.\r\n\r\nAnother alternative would be to drop this since `node.send_p2p_message()` hardly seems better than `node.p2p.send_message()`",
      "created_at": "2017-10-19T15:37:49Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r145738978",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145738978"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145741411",
      "pull_request_review_id": 70574386,
      "id": 145741411,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NTc0MTQxMQ==",
      "diff_hunk": "@@ -165,37 +161,33 @@ def run_test(self):\n \n         # Start node1 and node2 with assumevalid so they accept a block with a bad signature.\n         self.start_node(1, extra_args=[\"-assumevalid=\" + hex(block102.sha256)])\n-        node1 = BaseNode()  # connects to node1\n-        connections.append(NodeConn('127.0.0.1', p2p_port(1), self.nodes[1], node1))\n-        node1.add_connection(connections[1])\n-        node1.wait_for_verack()\n+        p2p1 = self.nodes[1].add_p2p_connection(p2p_conn_type=BaseNode)\n+        p2p1.wait_for_verack()\n \n         self.start_node(2, extra_args=[\"-assumevalid=\" + hex(block102.sha256)])\n-        node2 = BaseNode()  # connects to node2\n-        connections.append(NodeConn('127.0.0.1', p2p_port(2), self.nodes[2], node2))\n-        node2.add_connection(connections[2])\n-        node2.wait_for_verack()\n+        p2p2 =self.nodes[2].add_p2p_connection(p2p_conn_type=BaseNode)",
      "path": "test/functional/assumevalid.py",
      "position": null,
      "original_position": 64,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "0cb3474b664fc04a23640614e2e8b0deae6c2d50",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Weird spacing",
      "created_at": "2017-10-19T15:45:22Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r145741411",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145741411"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 168,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/147747540",
      "pull_request_review_id": 72886758,
      "id": 147747540,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Nzc0NzU0MA==",
      "diff_hunk": "@@ -151,6 +160,45 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    # def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+    def add_p2p_connection(self, p2p_conn_type, **kwargs):\n+        \"\"\"Add a p2p connection to the node.\n+\n+        This method adds the p2p connection to the self.p2ps list and also\n+        returns the connection to the caller.\"\"\"\n+        if 'dstport' not in kwargs:\n+            kwargs['dstport'] = p2p_port(self.index)\n+        if 'dstaddr' not in kwargs:\n+            kwargs['dstaddr'] = '127.0.0.1'\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        kwargs.update({'rpc': self.rpc, 'callback': p2p_conn})\n+        p2p_conn.add_connection(NodeConn(**kwargs))\n+\n+        return p2p_conn\n+\n+    @property\n+    def p2p(self):\n+        \"\"\"Return the first p2p connection\n+\n+        Convenience property - most tests only use a single p2p connection to each\n+        node, so this saves having to write node.p2ps[0] many times.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        return self.p2ps[0]\n+\n+    def send_p2p_message(self, message):\n+        \"\"\"Send a p2p message to the node.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        self.p2ps[0].send_message(message)",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 89,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "cb882d0d4cfeeb91492965ed0678c9c8de340c80",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "self.p2p.send_message and remove assert above?",
      "created_at": "2017-10-30T15:54:28Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r147747540",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/147747540"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 192,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/147748935",
      "pull_request_review_id": 72888436,
      "id": 147748935,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Nzc0ODkzNQ==",
      "diff_hunk": "@@ -151,6 +160,45 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    # def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+    def add_p2p_connection(self, p2p_conn_type, **kwargs):\n+        \"\"\"Add a p2p connection to the node.\n+\n+        This method adds the p2p connection to the self.p2ps list and also\n+        returns the connection to the caller.\"\"\"\n+        if 'dstport' not in kwargs:\n+            kwargs['dstport'] = p2p_port(self.index)\n+        if 'dstaddr' not in kwargs:\n+            kwargs['dstaddr'] = '127.0.0.1'\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        kwargs.update({'rpc': self.rpc, 'callback': p2p_conn})\n+        p2p_conn.add_connection(NodeConn(**kwargs))\n+\n+        return p2p_conn\n+\n+    @property\n+    def p2p(self):\n+        \"\"\"Return the first p2p connection\n+\n+        Convenience property - most tests only use a single p2p connection to each\n+        node, so this saves having to write node.p2ps[0] many times.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        return self.p2ps[0]\n+\n+    def send_p2p_message(self, message):\n+        \"\"\"Send a p2p message to the node.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        self.p2ps[0].send_message(message)",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 89,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "cb882d0d4cfeeb91492965ed0678c9c8de340c80",
      "in_reply_to_id": 147747540,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "And why not remove this function? It doesn't save a lot.",
      "created_at": "2017-10-30T15:58:55Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r147748935",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/147748935"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 192,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148848225",
      "pull_request_review_id": 74158677,
      "id": 148848225,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0ODg0ODIyNQ==",
      "diff_hunk": "@@ -180,7 +175,7 @@ def run_test(self):\n             block.solve()\n             block_message = msg_block(block)\n             # Send message is used to send a P2P message to the node over our NodeConn connection\n-            node0.send_message(block_message)\n+            self.nodes[0].send_message(block_message)",
      "path": "test/functional/example_test.py",
      "position": null,
      "original_position": 40,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "9054fc17e6b279e20d5d11820634a12fe545cd97",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"[tests] Add p2p connection to TestNode\"\r\n\r\nsend_message function is now send_p2p_message and these lines are changing in the next commit. I would move all these example_test.py changes out of here and into the next \"use TestNode p2p connection in tests\" commit because they would fit better there and avoid being a distraction from the more substantive changes here.",
      "created_at": "2017-11-03T17:35:50Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r148848225",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148848225"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 178,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148851171",
      "pull_request_review_id": 74158677,
      "id": 148851171,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0ODg1MTE3MQ==",
      "diff_hunk": "@@ -31,9 +33,13 @@ class TestNode():\n     - state about the node (whether it's running, etc)\n     - a Python subprocess.Popen object representing the running process\n     - an RPC connection to the node\n+    - one or more P2P connections to the node\n+\n \n-    To make things easier for the test writer, a bit of magic is happening under the covers.\n-    Any unrecognised messages will be dispatched to the RPC connection.\"\"\"\n+    To make things easier for the test writer, this class will try to dispatch\n+    messages over the correct interface:\n+    - send_message is dispatched to the first P2P connection.",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 28,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "9054fc17e6b279e20d5d11820634a12fe545cd97",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"[tests] Add p2p connection to TestNode\"\r\n\r\nThis is now send_p2p_message. But I agree with JoÃ£o that this should be dropped. `node.send_p2p_message()` is not any more convenient than `node.p2p.send_message()`, and now tests can wind up with a confusing mix of the two calls. It's also weird that we would arbitrarily provide a wrapper for this one single NodeConnCB method, but not any of the other methods.",
      "created_at": "2017-11-03T17:47:20Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r148851171",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148851171"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148851396",
      "pull_request_review_id": 74158677,
      "id": 148851396,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0ODg1MTM5Ng==",
      "diff_hunk": "@@ -151,6 +160,45 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    # def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 56,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "9054fc17e6b279e20d5d11820634a12fe545cd97",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"[tests] Add p2p connection to TestNode\"\r\n\r\nDead code, should delete",
      "created_at": "2017-11-03T17:48:15Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r148851396",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148851396"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148859555",
      "pull_request_review_id": 74158677,
      "id": 148859555,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0ODg1OTU1NQ==",
      "diff_hunk": "@@ -151,6 +160,45 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    # def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+    def add_p2p_connection(self, p2p_conn_type, **kwargs):\n+        \"\"\"Add a p2p connection to the node.\n+\n+        This method adds the p2p connection to the self.p2ps list and also\n+        returns the connection to the caller.\"\"\"\n+        if 'dstport' not in kwargs:\n+            kwargs['dstport'] = p2p_port(self.index)\n+        if 'dstaddr' not in kwargs:\n+            kwargs['dstaddr'] = '127.0.0.1'\n+        p2p_conn = p2p_conn_type()",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 66,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "9054fc17e6b279e20d5d11820634a12fe545cd97",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"[tests] Add p2p connection to TestNode\"\r\n\r\nShould drop `p2p_conn_type` and just take `p2p_conn` as an argument.\r\n\r\nHere there is two much coupling in the other direction (Tests<->TestNode rather than TestNode<->MiniNode), and the control flow is unnecessarily convoluted. Test calls add_p2p_connection, add_p2p_connection calls back into test using p2p_conn_type callback to construct the test's custom NodeConnCB object, wires it up, and then passes it back to test.\r\n\r\nWould be cleaner and simpler for tests to construct their own NodeConnCB objects and just pass them here to be wired up.\r\n\r\n(I see in #11518 you are using this flow to indirectly pass dstport to the P2PConnection constructor up through the p2p_conn_type callback and inherited contructors. But I think a direct approach would be better there, too: instead of connecting in the P2PConnection constructor, you should just add a P2PConnection connect method and have this code call it.)\r\n\r\nTests should be largely unaffected by this change. Instead of saying `add_p2p_connection(CustomHandler)` they would say `add_p2p_connection(CustomHandler())` which would be better because it will allow them to more easily pass options to their own handlers, and would be more straightforward because it will be obvious just looking at the test code how and when the handler classes that it defines are getting instantiated.",
      "created_at": "2017-11-03T18:20:02Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r148859555",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148859555"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148862392",
      "pull_request_review_id": 74158677,
      "id": 148862392,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0ODg2MjM5Mg==",
      "diff_hunk": "@@ -66,7 +66,7 @@ def __init__(self, i, dirname, extra_args, rpchost, timewait, binary, stderr, mo\n     def __getattr__(self, *args, **kwargs):",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 1,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "efbe3de9773df14380844d3e4b5d5dc262d158a7",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"[tests] fix TestNode.\\_\\_getattr\\_\\_() method\"\r\n\r\nNeed to change args/kwargs to name in this commit (it is done in a later commit but broken here).",
      "created_at": "2017-11-03T18:32:01Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r148862392",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148862392"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148870138",
      "pull_request_review_id": 74158677,
      "id": 148870138,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0ODg3MDEzOA==",
      "diff_hunk": "@@ -151,6 +160,45 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    # def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+    def add_p2p_connection(self, p2p_conn_type, **kwargs):\n+        \"\"\"Add a p2p connection to the node.\n+\n+        This method adds the p2p connection to the self.p2ps list and also\n+        returns the connection to the caller.\"\"\"\n+        if 'dstport' not in kwargs:\n+            kwargs['dstport'] = p2p_port(self.index)\n+        if 'dstaddr' not in kwargs:\n+            kwargs['dstaddr'] = '127.0.0.1'\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        kwargs.update({'rpc': self.rpc, 'callback': p2p_conn})\n+        p2p_conn.add_connection(NodeConn(**kwargs))\n+\n+        return p2p_conn\n+\n+    @property\n+    def p2p(self):\n+        \"\"\"Return the first p2p connection\n+\n+        Convenience property - most tests only use a single p2p connection to each\n+        node, so this saves having to write node.p2ps[0] many times.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        return self.p2ps[0]\n+\n+    def send_p2p_message(self, message):\n+        \"\"\"Send a p2p message to the node.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        self.p2ps[0].send_message(message)\n+\n+    def disconnect_p2p(self, index=0):\n+        \"\"\"Close the p2p connection to the node.\"\"\"\n+        # Connection could have already been closed by other end. Calling disconnect_p2p()\n+        # on an already disconnected p2p connection is not an error.\n+        if self.p2ps[index].connection is not None:",
      "path": "test/functional/test_framework/test_node.py",
      "position": 86,
      "original_position": 95,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "cb882d0d4cfeeb91492965ed0678c9c8de340c80",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"[tests] Add p2p connection to TestNode\"\r\n\r\nThis is an internal implementation detail of NodeConnCB and you should add a NodeConnCB.disconnect() method to take care of it. This disconnect_p2p method can then be removed and tests call `node.p2p.disconnect()` instead of `node.disconnect_p2p()`.\r\n\r\nIf for some tests need to clear the `p2ps` array (I don't see any that do) they should just do it directly. This would be nicer than the way the two current disconnect_p2p callers are effectively doing `del p2ps[0]` in a loop to clear the array, for no apparent reason.",
      "created_at": "2017-11-03T19:05:55Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r148870138",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/148870138"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 189,
      "original_line": 189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149162022",
      "pull_request_review_id": 74513586,
      "id": 149162022,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTE2MjAyMg==",
      "diff_hunk": "@@ -31,9 +33,13 @@ class TestNode():\n     - state about the node (whether it's running, etc)\n     - a Python subprocess.Popen object representing the running process\n     - an RPC connection to the node\n+    - one or more P2P connections to the node\n+\n \n-    To make things easier for the test writer, a bit of magic is happening under the covers.\n-    Any unrecognised messages will be dispatched to the RPC connection.\"\"\"\n+    To make things easier for the test writer, this class will try to dispatch\n+    messages over the correct interface:\n+    - send_message is dispatched to the first P2P connection.",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 28,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "9054fc17e6b279e20d5d11820634a12fe545cd97",
      "in_reply_to_id": 148851171,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ok, I've removed the `send_p2p_message()` method",
      "created_at": "2017-11-06T18:28:15Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r149162022",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149162022"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149162048",
      "pull_request_review_id": 74513616,
      "id": 149162048,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTE2MjA0OA==",
      "diff_hunk": "@@ -66,7 +66,7 @@ def __init__(self, i, dirname, extra_args, rpchost, timewait, binary, stderr, mo\n     def __getattr__(self, *args, **kwargs):",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 1,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "efbe3de9773df14380844d3e4b5d5dc262d158a7",
      "in_reply_to_id": 148862392,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2017-11-06T18:28:23Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r149162048",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149162048"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149163323",
      "pull_request_review_id": 74515053,
      "id": 149163323,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTE2MzMyMw==",
      "diff_hunk": "@@ -180,7 +175,7 @@ def run_test(self):\n             block.solve()\n             block_message = msg_block(block)\n             # Send message is used to send a P2P message to the node over our NodeConn connection\n-            node0.send_message(block_message)\n+            self.nodes[0].send_message(block_message)",
      "path": "test/functional/example_test.py",
      "position": null,
      "original_position": 40,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "9054fc17e6b279e20d5d11820634a12fe545cd97",
      "in_reply_to_id": 148848225,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I've left the changes to example_test.py in the first commit, since I think it's good to demonstrate the usage of the new functionality in the same commit as the functionality being added.\r\n\r\nHowever, I have changed these calls to be `node.p2p.send_message()` as suggested below.",
      "created_at": "2017-11-06T18:33:18Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r149163323",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149163323"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 178,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149163350",
      "pull_request_review_id": 74515084,
      "id": 149163350,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTE2MzM1MA==",
      "diff_hunk": "@@ -151,6 +160,45 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    # def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 56,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "9054fc17e6b279e20d5d11820634a12fe545cd97",
      "in_reply_to_id": 148851396,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2017-11-06T18:33:25Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r149163350",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149163350"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149182081",
      "pull_request_review_id": 74536909,
      "id": 149182081,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTE4MjA4MQ==",
      "diff_hunk": "@@ -151,6 +160,45 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    # def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+    def add_p2p_connection(self, p2p_conn_type, **kwargs):\n+        \"\"\"Add a p2p connection to the node.\n+\n+        This method adds the p2p connection to the self.p2ps list and also\n+        returns the connection to the caller.\"\"\"\n+        if 'dstport' not in kwargs:\n+            kwargs['dstport'] = p2p_port(self.index)\n+        if 'dstaddr' not in kwargs:\n+            kwargs['dstaddr'] = '127.0.0.1'\n+        p2p_conn = p2p_conn_type()",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 66,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "9054fc17e6b279e20d5d11820634a12fe545cd97",
      "in_reply_to_id": 148859555,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "yes, I agree this is better. Changed",
      "created_at": "2017-11-06T19:42:42Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r149182081",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149182081"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149200254",
      "pull_request_review_id": 74557928,
      "id": 149200254,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0OTIwMDI1NA==",
      "diff_hunk": "@@ -151,6 +160,45 @@ def node_encrypt_wallet(self, passphrase):\n         self.encryptwallet(passphrase)\n         self.wait_until_stopped()\n \n+    # def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+    def add_p2p_connection(self, p2p_conn_type, **kwargs):\n+        \"\"\"Add a p2p connection to the node.\n+\n+        This method adds the p2p connection to the self.p2ps list and also\n+        returns the connection to the caller.\"\"\"\n+        if 'dstport' not in kwargs:\n+            kwargs['dstport'] = p2p_port(self.index)\n+        if 'dstaddr' not in kwargs:\n+            kwargs['dstaddr'] = '127.0.0.1'\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        kwargs.update({'rpc': self.rpc, 'callback': p2p_conn})\n+        p2p_conn.add_connection(NodeConn(**kwargs))\n+\n+        return p2p_conn\n+\n+    @property\n+    def p2p(self):\n+        \"\"\"Return the first p2p connection\n+\n+        Convenience property - most tests only use a single p2p connection to each\n+        node, so this saves having to write node.p2ps[0] many times.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        return self.p2ps[0]\n+\n+    def send_p2p_message(self, message):\n+        \"\"\"Send a p2p message to the node.\"\"\"\n+        assert self.p2ps, \"No p2p connection\"\n+        self.p2ps[0].send_message(message)\n+\n+    def disconnect_p2p(self, index=0):\n+        \"\"\"Close the p2p connection to the node.\"\"\"\n+        # Connection could have already been closed by other end. Calling disconnect_p2p()\n+        # on an already disconnected p2p connection is not an error.\n+        if self.p2ps[index].connection is not None:",
      "path": "test/functional/test_framework/test_node.py",
      "position": 86,
      "original_position": 95,
      "commit_id": "32ae82f5c3d51a66ad4deb84819809b890664245",
      "original_commit_id": "cb882d0d4cfeeb91492965ed0678c9c8de340c80",
      "in_reply_to_id": 148870138,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I like this as it is. TestNode is responsible for appending new `NodeConnCB`s to the `self.p2ps` array. I think it should also be responsible for removing them.",
      "created_at": "2017-11-06T20:54:21Z",
      "updated_at": "2017-11-08T14:32:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r149200254",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149200254"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 189,
      "original_line": 189,
      "side": "RIGHT"
    }
  ]
}