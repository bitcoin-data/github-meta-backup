{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752",
    "id": 898687664,
    "node_id": "PR_kwDOABII5841kOKw",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/24752",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/24752.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/24752.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24752",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24752/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/b009a99839dd062709e0c0be1972ef62cd96b1c2",
    "number": 24752,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "wallet: increase BnB upper limit",
    "user": {
      "login": "S3RK",
      "id": 1466284,
      "node_id": "MDQ6VXNlcjE0NjYyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/S3RK",
      "html_url": "https://github.com/S3RK",
      "followers_url": "https://api.github.com/users/S3RK/followers",
      "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
      "organizations_url": "https://api.github.com/users/S3RK/orgs",
      "repos_url": "https://api.github.com/users/S3RK/repos",
      "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/S3RK/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Successor of #23367\r\n\r\nIncreasing upper bound helps to find more changeless solutions.\r\nThis improves coin selection in the cases introduced in #24580.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 955867938,
        "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
        "name": "Needs rebase",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2022-04-04T07:58:11Z",
    "updated_at": "2022-06-22T06:54:47Z",
    "closed_at": "2022-06-22T06:54:47Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merge_commit_sha": "1481cab34bb1e410a56c65c8163bf27d525d8713",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "S3RK:bnb_increase_upper_limit",
      "ref": "bnb_increase_upper_limit",
      "sha": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 268426115,
        "node_id": "MDEwOlJlcG9zaXRvcnkyNjg0MjYxMTU=",
        "name": "bitcoin",
        "full_name": "S3RK/bitcoin",
        "owner": {
          "login": "S3RK",
          "id": 1466284,
          "node_id": "MDQ6VXNlcjE0NjYyODQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/S3RK",
          "html_url": "https://github.com/S3RK",
          "followers_url": "https://api.github.com/users/S3RK/followers",
          "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
          "organizations_url": "https://api.github.com/users/S3RK/orgs",
          "repos_url": "https://api.github.com/users/S3RK/repos",
          "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/S3RK/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/S3RK/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/S3RK/bitcoin",
        "archive_url": "https://api.github.com/repos/S3RK/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/S3RK/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/S3RK/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/S3RK/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/S3RK/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/S3RK/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/S3RK/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/S3RK/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/S3RK/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/S3RK/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/S3RK/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/S3RK/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/S3RK/bitcoin/events",
        "forks_url": "https://api.github.com/repos/S3RK/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/S3RK/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/S3RK/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/S3RK/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/S3RK/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/S3RK/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/S3RK/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/S3RK/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/S3RK/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/S3RK/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/S3RK/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/S3RK/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/S3RK/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/S3RK/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/S3RK/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/S3RK/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:S3RK/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/S3RK/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/S3RK/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/S3RK/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/S3RK/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/S3RK/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/S3RK/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/S3RK/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/S3RK/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/S3RK/bitcoin/hooks",
        "svn_url": "https://github.com/S3RK/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 213012,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-02-15T08:37:12Z",
        "created_at": "2020-06-01T04:37:33Z",
        "updated_at": "2022-11-28T07:47:20Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "e389c4d30881db4d115aeb700d0a22c2859ba9fe",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69819,
        "watchers_count": 69819,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-07T05:35:10Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T04:47:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 157,
    "deletions": 97,
    "changed_files": 6,
    "commits": 7,
    "review_comments": 35,
    "comments": 5
  },
  "events": [
    {
      "event": "head_ref_force_pushed",
      "id": 6360708946,
      "node_id": "HRFPE_lADOABII585HA1lszwAAAAF7ILdS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6360708946",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-04T07:59:43Z"
    },
    {
      "event": "labeled",
      "id": 6360738113,
      "node_id": "LE_lADOABII585HA1lszwAAAAF7ISlB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6360738113",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-04T08:03:52Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6360775624,
      "node_id": "HRFPE_lADOABII585HA1lszwAAAAF7IbvI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6360775624",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-04T08:08:58Z"
    },
    {
      "event": "commented",
      "id": 1088165344,
      "node_id": "IC_kwDOABII585A3BXg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1088165344",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-05T00:56:03Z",
      "updated_at": "2022-05-17T05:59:44Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25005](https://github.com/bitcoin/bitcoin/pull/25005) (wallet: remove extra wtx lookup in 'AvailableCoins' + several code cleanups. by furszy)\n* [#24845](https://github.com/bitcoin/bitcoin/pull/24845) (wallet: createTransaction, return proper error description for  \"too-long-mempool-chain\" + introduce generic Result classes by furszy)\n* [#24699](https://github.com/bitcoin/bitcoin/pull/24699) (wallet: Improve AvailableCoins performance by reducing duplicated operations by achow101)\n* [#23475](https://github.com/bitcoin/bitcoin/pull/23475) (wallet: add config to prioritize a solution that doesn't create change in coin selection by brunoerg)\n* [#20640](https://github.com/bitcoin/bitcoin/pull/20640) (wallet, refactor: return out-params of CreateTransaction() as optional struct by theStack)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#issuecomment-1088165344",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24752"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6368310466,
      "node_id": "HRFPE_lADOABII585HA1lszwAAAAF7lLTC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6368310466",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-05T06:24:18Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6385554607,
      "node_id": "HRFPE_lADOABII585HA1lszwAAAAF8m9Sv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6385554607",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-07T06:38:59Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6385655756,
      "node_id": "HRFPE_lADOABII585HA1lszwAAAAF8nV_M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6385655756",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-07T06:58:50Z"
    },
    {
      "event": "reviewed",
      "id": 934837861,
      "node_id": "PRR_kwDOABII5843uH5l",
      "url": null,
      "actor": null,
      "commit_id": "3c106cc578eb2682fb5eab6b03fe3f5e108034b9",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#pullrequestreview-934837861",
      "submitted_at": "2022-04-07T10:26:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
    },
    {
      "event": "commented",
      "id": 1091981193,
      "node_id": "IC_kwDOABII585BFk-J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1091981193",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-07T16:55:08Z",
      "updated_at": "2022-04-07T16:55:08Z",
      "author_association": "MEMBER",
      "body": "@achow101 take a look. I reworked my BnB optimization and all the tests pass now. I think the next step would be to do simulations and see how this affects coin selection at large (but locally it fixes some of the edge cases found in #24580)",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#issuecomment-1091981193",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24752"
    },
    {
      "event": "mentioned",
      "id": 6390270253,
      "node_id": "MEE_lADOABII585HA1lszwAAAAF848kt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6390270253",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-07T16:55:08Z"
    },
    {
      "event": "subscribed",
      "id": 6390270261,
      "node_id": "SE_lADOABII585HA1lszwAAAAF848k1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6390270261",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-07T16:55:08Z"
    },
    {
      "event": "ready_for_review",
      "id": 6452487823,
      "node_id": "RFRE_lADOABII585HA1lszwAAAAGAmSaP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6452487823",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-19T07:00:12Z"
    },
    {
      "event": "labeled",
      "id": 6501194918,
      "node_id": "LE_lADOABII585HA1lszwAAAAGDgFym",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6501194918",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-26T18:42:54Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI3NDQxYzcyNTNkMGQwYTc5Zjk1YTUwZWZlYmJkMTdhNGMzNTUzZTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/27441c7253d0d0a79f95a50efebbd17a4c3553e2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/27441c7253d0d0a79f95a50efebbd17a4c3553e2",
      "tree": {
        "sha": "fd735d7487ad8b98f47e954c47d425ce0e450430",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fd735d7487ad8b98f47e954c47d425ce0e450430"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4381681e554d9bf10ef1ac43cede9cfa10bfb439",
          "sha": "4381681e554d9bf10ef1ac43cede9cfa10bfb439",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4381681e554d9bf10ef1ac43cede9cfa10bfb439"
        }
      ],
      "message": "wallet: more accurate tx_noinputs_size",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-28T07:10:53Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-04T07:47:58Z"
      },
      "sha": "27441c7253d0d0a79f95a50efebbd17a4c3553e2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU0Y2ZiZTVlN2I4YjkxYzVmMDg5ZTE2OTUzOWRjMzcyM2Y5YTI4OTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e4cfbe5e7b8b91c5f089e169539dc3723f9a2897",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e4cfbe5e7b8b91c5f089e169539dc3723f9a2897",
      "tree": {
        "sha": "350ec2a60d682e2eac2973bf5b9483b245f1b50f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/350ec2a60d682e2eac2973bf5b9483b245f1b50f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/27441c7253d0d0a79f95a50efebbd17a4c3553e2",
          "sha": "27441c7253d0d0a79f95a50efebbd17a4c3553e2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/27441c7253d0d0a79f95a50efebbd17a4c3553e2"
        }
      ],
      "message": "wallet: unify max signature logic",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-28T07:10:53Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-07T06:41:38Z"
      },
      "sha": "e4cfbe5e7b8b91c5f089e169539dc3723f9a2897"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDliZTI0Mzc3OWViMDJmZDM2ZTFjOWE0YWU2ZmE4YjU0YjFlYTUwYjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9be243779eb02fd36e1c9a4ae6fa8b54b1ea50b1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9be243779eb02fd36e1c9a4ae6fa8b54b1ea50b1",
      "tree": {
        "sha": "5a0522ca8d15cf0fdf702275c9cca6a03cb4c168",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5a0522ca8d15cf0fdf702275c9cca6a03cb4c168"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e4cfbe5e7b8b91c5f089e169539dc3723f9a2897",
          "sha": "e4cfbe5e7b8b91c5f089e169539dc3723f9a2897",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e4cfbe5e7b8b91c5f089e169539dc3723f9a2897"
        }
      ],
      "message": "wallet: fix SelectionResult target SRD",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-28T07:10:53Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-04T08:05:13Z"
      },
      "sha": "9be243779eb02fd36e1c9a4ae6fa8b54b1ea50b1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRjYjlhMGU1M2FlNWI4YjYwZjkwZTA2Njk3NzFhNDgzOTMzYzg2MDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dcb9a0e53ae5b8b60f90e0669771a483933c8603",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/dcb9a0e53ae5b8b60f90e0669771a483933c8603",
      "tree": {
        "sha": "0fb965e31fb87fa732efbd7a44a6ccc611b11676",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0fb965e31fb87fa732efbd7a44a6ccc611b11676"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9be243779eb02fd36e1c9a4ae6fa8b54b1ea50b1",
          "sha": "9be243779eb02fd36e1c9a4ae6fa8b54b1ea50b1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9be243779eb02fd36e1c9a4ae6fa8b54b1ea50b1"
        }
      ],
      "message": "wallet: don't add change_fee to target if subsctracting fee from output",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-28T07:10:53Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-05T06:23:49Z"
      },
      "sha": "dcb9a0e53ae5b8b60f90e0669771a483933c8603"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU0YzA4Mzg0NzkyMDU2MzJmNWI4Zjc5M2ZlYjMwYjM2OGFkZTM4NDU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e4c0838479205632f5b8f793feb30b368ade3845",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e4c0838479205632f5b8f793feb30b368ade3845",
      "tree": {
        "sha": "d52b5f2be8ee24575229825936e1d743694cb91f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d52b5f2be8ee24575229825936e1d743694cb91f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dcb9a0e53ae5b8b60f90e0669771a483933c8603",
          "sha": "dcb9a0e53ae5b8b60f90e0669771a483933c8603",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/dcb9a0e53ae5b8b60f90e0669771a483933c8603"
        }
      ],
      "message": "wallet: force no change for BnB.",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-28T07:13:33Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-28T07:13:33Z"
      },
      "sha": "e4c0838479205632f5b8f793feb30b368ade3845"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6512680806,
      "node_id": "HRFPE_lADOABII585HA1lszwAAAAGEL59m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6512680806",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-28T07:28:38Z"
    },
    {
      "event": "unlabeled",
      "id": 6513185929,
      "node_id": "UNLE_lADOABII585HA1lszwAAAAGEN1SJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6513185929",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-28T08:43:27Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6531235197,
      "node_id": "HRFPE_lADOABII585HA1lszwAAAAGFSr19",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6531235197",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-02T06:08:14Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVlZThmNmMyM2U4NDg1ODY5NjA0ZDMzYTAzYThiMzUyYTBmYzQzYmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "tree": {
        "sha": "3f7efcd2c3e80cba5a5de883a16d5538fa98c3fb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f7efcd2c3e80cba5a5de883a16d5538fa98c3fb"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e4c0838479205632f5b8f793feb30b368ade3845",
          "sha": "e4c0838479205632f5b8f793feb30b368ade3845",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e4c0838479205632f5b8f793feb30b368ade3845"
        }
      ],
      "message": "WIP. Return change from SelectionResult",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-05-02T06:21:31Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-28T07:28:13Z"
      },
      "sha": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIwMDlhOTk4MzlkZDA2MjcwOWUwYzBiZTE5NzJlZjYyY2Q5NmIxYzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "tree": {
        "sha": "63496baef2411e1379628dec1243e9281adbac56",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/63496baef2411e1379628dec1243e9281adbac56"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
          "sha": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5ee8f6c23e8485869604d33a03a8b352a0fc43ba"
        }
      ],
      "message": "wallet: increase BnB upper bound",
      "committer": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-05-02T06:21:35Z"
      },
      "author": {
        "name": "S3RK",
        "email": "1466284+S3RK@users.noreply.github.com",
        "date": "2022-04-04T08:08:42Z"
      },
      "sha": "b009a99839dd062709e0c0be1972ef62cd96b1c2"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6531290107,
      "node_id": "HRFPE_lADOABII585HA1lszwAAAAGFS5P7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6531290107",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-02T06:21:53Z"
    },
    {
      "event": "reviewed",
      "id": 966693630,
      "node_id": "PRR_kwDOABII5845npL-",
      "url": null,
      "actor": null,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Very exciting changes in this PR. It feels like there are still some moving parts, see my comments on the various sections.",
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#pullrequestreview-966693630",
      "submitted_at": "2022-05-09T20:24:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
    },
    {
      "event": "commented",
      "id": 1128786137,
      "node_id": "IC_kwDOABII585DR-jZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128786137",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-17T12:06:21Z",
      "updated_at": "2022-05-17T12:06:21Z",
      "author_association": "MEMBER",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n🐙 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#issuecomment-1128786137",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24752"
    },
    {
      "event": "labeled",
      "id": 6623886657,
      "node_id": "LE_lADOABII585HA1lszwAAAAGK0H1B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6623886657",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-17T12:06:21Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1140029982,
      "node_id": "IC_kwDOABII585D83oe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140029982",
      "actor": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-27T20:53:49Z",
      "updated_at": "2022-05-27T20:53:57Z",
      "author_association": "MEMBER",
      "body": "Update:\r\n[I did some simulations](https://github.com/achow101/coin-selection-simulation/pull/10/commits/cbe0346dcbe70dfa862da3abb13875e7ae3b1c0a) for this branch.\r\nThe results were that\r\n \r\n -  the cost increased when the BnB window was relaxed\r\n - the number of changeless solutions was reduced\r\n \r\n FWIU, @S3RK had a similar result with his simulations so far. There was a bug discovered in how the waste is calculated for Knapsack in some instances, but I don't expect this bug to impact the overall trend.\r\n \r\nMore experiments to follow, and it may be interesting to explore the opposite, i.e. see  whether reducing the window size in which BnB produces solutions improves results instead.",
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#issuecomment-1140029982",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24752"
    },
    {
      "event": "mentioned",
      "id": 6695400963,
      "node_id": "MEE_lADOABII585HA1lszwAAAAGPE7YD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6695400963",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-27T20:53:50Z"
    },
    {
      "event": "subscribed",
      "id": 6695400966,
      "node_id": "SE_lADOABII585HA1lszwAAAAGPE7YG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6695400966",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-27T20:53:50Z"
    },
    {
      "event": "commented",
      "id": 1162715336,
      "node_id": "IC_kwDOABII585FTaDI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1162715336",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-22T06:50:38Z",
      "updated_at": "2022-06-22T06:50:38Z",
      "author_association": "MEMBER",
      "body": "> The results were that\r\n> \r\n> * the cost increased when the BnB window was relaxed\r\n> * the number of changeless solutions was reduced\r\n\r\nI don't think this is the correct interpretation of the data. e.g. for `bustabit-tiny-hot-wallet_2019-2020-per-day`\r\n* total cost remained the same.\r\n   * average balance: baseline - 14.6401 vs branch - 14.6396\r\n   * average total fees: baseline - 0.4950 vs branch - 0.4954\r\n   * average total cost: baseline - 0.4958 vs branch - 0.4963\r\n* the number of changeless solutions very slightly increased (~ +3% but we see more knapsack solutions and it's not clear if the difference is significant or due to randomness)\r\n   * average for baseline - 1668.2 vs branch - 1721.6\r\n\r\nI see similar picture for `bustabit-tiny-hot-wallet_peak-and-tail` and for my own simulations.\r\n\r\nOverall it's not clear whether increasing the upper limit is beneficial. I'm closing this now and will send refactoring PRs separately.",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#issuecomment-1162715336",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24752"
    },
    {
      "event": "closed",
      "id": 6853485845,
      "node_id": "CE_lADOABII585HA1lszwAAAAGYf-UV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6853485845",
      "actor": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-22T06:54:47Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/844973896",
      "pull_request_review_id": 934837861,
      "id": 844973896,
      "node_id": "PRRC_kwDOABII584yXUdI",
      "diff_hunk": "@@ -62,9 +62,9 @@ struct {\n \n static const size_t TOTAL_TRIES = 100000;\n \n-std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& cost_of_change)\n+std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& upper_bound)\n {\n-    SelectionResult result(selection_target);\n+    SelectionResult result(selection_target, /* force_no_change=*/ true);",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "3c106cc578eb2682fb5eab6b03fe3f5e108034b9",
      "in_reply_to_id": null,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n    SelectionResult result(selection_target, /*force_no_change=*/true);\r\n```\r\nAnywhere you are adding/touching named args, please use the [style from the developer docs](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#coding-style-c-named-arguments).",
      "created_at": "2022-04-07T10:26:18Z",
      "updated_at": "2022-04-07T10:26:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r844973896",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/844973896"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 67,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/845368222",
      "pull_request_review_id": 935395728,
      "id": 845368222,
      "node_id": "PRRC_kwDOABII584yY0ue",
      "diff_hunk": "@@ -62,9 +62,9 @@ struct {\n \n static const size_t TOTAL_TRIES = 100000;\n \n-std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& cost_of_change)\n+std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& upper_bound)\n {\n-    SelectionResult result(selection_target);\n+    SelectionResult result(selection_target, /* force_no_change=*/ true);",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "3c106cc578eb2682fb5eab6b03fe3f5e108034b9",
      "in_reply_to_id": 844973896,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sure, will fix that",
      "created_at": "2022-04-07T16:51:52Z",
      "updated_at": "2022-04-07T16:51:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r845368222",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/845368222"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 67,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860571366",
      "pull_request_review_id": 955980506,
      "id": 860571366,
      "node_id": "PRRC_kwDOABII584zS0bm",
      "diff_hunk": "@@ -62,9 +62,9 @@ struct {\n \n static const size_t TOTAL_TRIES = 100000;\n \n-std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& cost_of_change)\n+std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& upper_bound)\n {\n-    SelectionResult result(selection_target);\n+    SelectionResult result(selection_target, /* force_no_change=*/ true);",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "3c106cc578eb2682fb5eab6b03fe3f5e108034b9",
      "in_reply_to_id": 844973896,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed",
      "created_at": "2022-04-28T07:29:41Z",
      "updated_at": "2022-04-28T07:29:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r860571366",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860571366"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 67,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868328003",
      "pull_request_review_id": 966693630,
      "id": 868328003,
      "node_id": "PRRC_kwDOABII584zwaJD",
      "diff_hunk": "@@ -760,7 +760,8 @@ static bool CreateTransactionInternal(\n \n     // vouts to the payees\n     if (!coin_selection_params.m_subtract_fee_outputs) {\n-        coin_selection_params.tx_noinputs_size = 11; // Static vsize overhead + outputs vsize. 4 nVersion, 4 nLocktime, 1 input count, 1 output count, 1 witness overhead (dummy, flag, stack size)\n+        coin_selection_params.tx_noinputs_size = 10; // Static vsize overhead + outputs vsize. 4 nVersion, 4 nLocktime, 1 input count, 1 witness overhead (dummy, flag, stack size)",
      "path": "src/wallet/spend.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "27441c7253d0d0a79f95a50efebbd17a4c3553e2",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Note for reviewers/myself: It should be 10 vB for non-segwit transactions, and 42 WU for segwit transactions (as the witness adds the two fields `marker` and `flag` that don't scale with the count of inputs. So, this is correct for non-segwit transactions, but would be short for a segwit transaction.",
      "created_at": "2022-05-09T18:54:41Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868328003",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868328003"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 782,
      "original_line": 763,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868347706",
      "pull_request_review_id": 966693630,
      "id": 868347706,
      "node_id": "PRRC_kwDOABII584zwe86",
      "diff_hunk": "@@ -27,25 +27,25 @@ using interfaces::FoundBlock;\n namespace wallet {\n static constexpr size_t OUTPUT_GROUP_MAX_ENTRIES{100};\n \n-int GetTxSpendSize(const CWallet& wallet, const CWalletTx& wtx, unsigned int out, bool use_max_sig)\n+int GetTxSpendSize(const CWallet& wallet, const CWalletTx& wtx, unsigned int out, const CCoinControl* coin_control)",
      "path": "src/wallet/spend.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "e4cfbe5e7b8b91c5f089e169539dc3723f9a2897",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Note to other reviewers: it wasn't obvious to me at first why this replacement is possible, but I found that `use_max_sig` is directly calculated from `CCoinControl` values. Perhaps this could be mentioned in the commit message.\r\n\r\n> ./src/wallet/wallet.cpp:        const bool use_max_sig = coin_control && (coin_control->fAllowWatchOnly || coin_control->IsExternalSelected(txin.prevout));\r\n",
      "created_at": "2022-05-09T19:14:48Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868347706",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868347706"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868361193",
      "pull_request_review_id": 966693630,
      "id": 868361193,
      "node_id": "PRRC_kwDOABII584zwiPp",
      "diff_hunk": "@@ -398,11 +398,8 @@ std::optional<SelectionResult> AttemptSelection(const CWallet& wallet, const CAm\n         results.push_back(*knapsack_result);\n     }\n \n-    // Include change for SRD as we want to avoid making really small change if the selection just\n-    // barely meets the target. Just use the lower bound change target instead of the randomly\n-    // generated one, since SRD will result in a random change amount anyway; avoid making the\n-    // target needlessly large.\n-    const CAmount srd_target = nTargetValue + coin_selection_params.m_change_fee + CHANGE_LOWER;",
      "path": "src/wallet/spend.cpp",
      "position": 8,
      "original_position": 8,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "9be243779eb02fd36e1c9a4ae6fa8b54b1ea50b1",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I see how this is just a refactor, and doesn't change the result, but it's not clear to me why it's being done. Could you add a sentence of motivation to the commit message?",
      "created_at": "2022-05-09T19:26:53Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868361193",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868361193"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 405,
      "original_line": 405,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868369284",
      "pull_request_review_id": 966693630,
      "id": 868369284,
      "node_id": "PRRC_kwDOABII584zwkOE",
      "diff_hunk": "@@ -390,17 +390,18 @@ std::optional<SelectionResult> AttemptSelection(const CWallet& wallet, const CAm\n \n     // The knapsack solver has some legacy behavior where it will spend dust outputs. We retain this behavior, so don't filter for positive only here.\n     std::vector<OutputGroup> all_groups = GroupOutputs(wallet, coins, coin_selection_params, eligibility_filter, false /* positive_only */);\n+    CAmount target_with_change = nTargetValue;\n     // While nTargetValue includes the transaction fees for non-input things, it does not include the fee for creating a change output.\n-    // So we need to include that for KnapsackSolver as well, as we are expecting to create a change output.\n-    if (auto knapsack_result{KnapsackSolver(all_groups, nTargetValue + coin_selection_params.m_change_fee,\n-                                            coin_selection_params.m_min_change_target, coin_selection_params.rng_fast)}) {\n+    // So we need to include that for KnapsackSolver and SRD as well, as we are expecting to create a change output.\n+    if (!coin_selection_params.m_subtract_fee_outputs) {\n+        target_with_change += coin_selection_params.m_change_fee;\n+    }\n+    if (auto knapsack_result{KnapsackSolver(all_groups, target_with_change, coin_selection_params.m_min_change_target, coin_selection_params.rng_fast)}) {",
      "path": "src/wallet/spend.cpp",
      "position": 13,
      "original_position": 13,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "dcb9a0e53ae5b8b60f90e0669771a483933c8603",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nice catch!",
      "created_at": "2022-05-09T19:34:45Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868369284",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868369284"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": 397,
      "original_start_line": 396,
      "start_side": "RIGHT",
      "line": 400,
      "original_line": 399,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868374271",
      "pull_request_review_id": 966693630,
      "id": 868374271,
      "node_id": "PRRC_kwDOABII584zwlb_",
      "diff_hunk": "@@ -258,15 +258,17 @@ struct SelectionResult\n     bool m_use_effective{false};\n     /** The computed waste */\n     std::optional<CAmount> m_waste;\n+    /** Force no change even if more than enough inputs are selected */\n+    bool m_force_no_change{false};",
      "path": "src/wallet/coinselection.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "e4c0838479205632f5b8f793feb30b368ade3845",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`force_no_change = false` feels like a potential brain twister. Perhaps it would be better to call this `allow_change` and invert the boolean values.\r\n\r\n```suggestion\r\n    /** Do not allow change even if more than enough inputs are selected */\r\n    bool m_allow_change{true};\r\n```",
      "created_at": "2022-05-09T19:39:55Z",
      "updated_at": "2022-05-10T13:38:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868374271",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868374271"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": 265,
      "original_start_line": 261,
      "start_side": "RIGHT",
      "line": 266,
      "original_line": 262,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868376362",
      "pull_request_review_id": 966693630,
      "id": 868376362,
      "node_id": "PRRC_kwDOABII584zwl8q",
      "diff_hunk": "@@ -64,7 +64,7 @@ static const size_t TOTAL_TRIES = 100000;\n \n std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& cost_of_change)\n {\n-    SelectionResult result(selection_target, SelectionAlgorithm::BNB);\n+    SelectionResult result(selection_target, SelectionAlgorithm::BNB, /*force_no_change=*/true);",
      "path": "src/wallet/coinselection.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "e4c0838479205632f5b8f793feb30b368ade3845",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "See below\r\n```suggestion\r\n    SelectionResult result(selection_target, SelectionAlgorithm::BNB, /*allow_change=*/false);\r\n```",
      "created_at": "2022-05-09T19:41:56Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868376362",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868376362"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 67,
      "original_line": 67,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868377710",
      "pull_request_review_id": 966693630,
      "id": 868377710,
      "node_id": "PRRC_kwDOABII584zwmRu",
      "diff_hunk": "@@ -258,15 +258,17 @@ struct SelectionResult\n     bool m_use_effective{false};\n     /** The computed waste */\n     std::optional<CAmount> m_waste;\n+    /** Force no change even if more than enough inputs are selected */\n+    bool m_force_no_change{false};\n \n public:\n     /** The target the algorithm selected for. Note that this may not be equal to the recipient amount as it can include non-input fees */\n     const CAmount m_target;\n     /** The algorithm used to produce this result */\n     const SelectionAlgorithm m_algo;\n \n-    explicit SelectionResult(const CAmount target, SelectionAlgorithm algo)\n-        : m_target(target), m_algo(algo) {}\n+    explicit SelectionResult(const CAmount target, SelectionAlgorithm algo, const bool force_no_change = false)\n+        : m_target(target), m_algo(algo), m_force_no_change(force_no_change) {}",
      "path": "src/wallet/coinselection.h",
      "position": 16,
      "original_position": 16,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "e4c0838479205632f5b8f793feb30b368ade3845",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "see above\r\n```suggestion\r\n    explicit SelectionResult(const CAmount target, SelectionAlgorithm algo, const bool allow_change = true)\r\n        : m_target(target), m_algo(algo), m_allow_change(allow_change) {}\r\n```",
      "created_at": "2022-05-09T19:43:19Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868377710",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868377710"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": 269,
      "original_start_line": 270,
      "start_side": "RIGHT",
      "line": 270,
      "original_line": 271,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868383563",
      "pull_request_review_id": 966693630,
      "id": 868383563,
      "node_id": "PRRC_kwDOABII584zwntL",
      "diff_hunk": "@@ -439,7 +450,18 @@ void SelectionResult::Clear()\n void SelectionResult::AddInput(const OutputGroup& group)\n {\n     util::insert(m_selected_inputs, group.m_outputs);\n-    m_use_effective = !group.m_subtract_fee_outputs;\n+    m_use_effective = m_use_effective || !group.m_subtract_fee_outputs;",
      "path": "src/wallet/coinselection.cpp",
      "position": 35,
      "original_position": 35,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't understand what's going on here. I'm actually now wondering why we need `m_use_effective` in the first place if it's just the negation of `m_subtract_fee_outputs` on the group.",
      "created_at": "2022-05-09T19:49:08Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868383563",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868383563"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 453,
      "original_line": 453,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868388727",
      "pull_request_review_id": 966693630,
      "id": 868388727,
      "node_id": "PRRC_kwDOABII584zwo93",
      "diff_hunk": "@@ -439,7 +450,18 @@ void SelectionResult::Clear()\n void SelectionResult::AddInput(const OutputGroup& group)\n {\n     util::insert(m_selected_inputs, group.m_outputs);\n-    m_use_effective = !group.m_subtract_fee_outputs;\n+    m_use_effective = m_use_effective || !group.m_subtract_fee_outputs;\n+}\n+\n+void SelectionResult::Merge(const SelectionResult& other)\n+{\n+    m_target += other.m_target;\n+    m_use_effective |= other.m_use_effective;\n+    m_force_no_change |= other.m_force_no_change;\n+    if (m_algo == SelectionAlgorithm::MANUAL) {\n+        m_algo = other.m_algo;\n+    }\n+    util::insert(m_selected_inputs, other.m_selected_inputs);\n }",
      "path": "src/wallet/coinselection.cpp",
      "position": 47,
      "original_position": 47,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This feels like it should be mentioned in the commit message and should perhaps be a separate commit than \"Return change from SelectionResult\". I see that this might be useful to construct input sets with a specific UTXO included, but I have a hard time following how it fits into the bigger picture.",
      "created_at": "2022-05-09T19:54:01Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868388727",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868388727"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": 456,
      "original_start_line": 456,
      "start_side": "RIGHT",
      "line": 465,
      "original_line": 465,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868394832",
      "pull_request_review_id": 966693630,
      "id": 868394832,
      "node_id": "PRRC_kwDOABII584zwqdQ",
      "diff_hunk": "@@ -479,4 +502,21 @@ std::string GetAlgorithmName(const SelectionAlgorithm algo)\n     }\n     assert(false);\n }\n+\n+CAmount SelectionResult::GetChange(const CAmount min_change) const\n+{\n+    if (m_force_no_change) return 0;\n+\n+    CAmount change = m_use_effective\n+                     ? GetSelectedEffectiveValue() - m_target\n+                     : GetSelectedValue() - m_target;\n+    assert(change >= 0);\n+\n+    if (change <= min_change) { // TODO: less or less_or_equal\n+        change = 0;\n+    }\n+\n+    return change;\n+}",
      "path": "src/wallet/coinselection.cpp",
      "position": 77,
      "original_position": 77,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nice! :heart:\r\nI was also thinking about us returning the change value in the `SelectionResult` in the context of automatic CPFP for unconfirmed inputs when the parent transaction has a lower feerate and we need to add fees for that. This is great!",
      "created_at": "2022-05-09T19:59:20Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868394832",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868394832"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": 506,
      "original_start_line": 506,
      "start_side": "RIGHT",
      "line": 520,
      "original_line": 520,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868400777",
      "pull_request_review_id": 966693630,
      "id": 868400777,
      "node_id": "PRRC_kwDOABII584zwr6J",
      "diff_hunk": "@@ -254,6 +254,10 @@ struct SelectionResult\n private:\n     /** Set of inputs selected by the algorithm to use in the transaction */\n     std::set<COutput> m_selected_inputs;\n+    /** The target the algorithm selected for. Note that this may not be equal to the recipient amount as it can include non-input fees */\n+    CAmount m_target;",
      "path": "src/wallet/coinselection.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I wish we had canonical terms to consistently disambiguate the selection target and the recipient output total, especially because it additionally sometimes includes cost of change and a minimum change.\r\n\r\nWhat do you all think about something along the lines of:\r\n- `recipients_total`: sum of recipient output values (excluding change)\r\n- `selection_target`: the value the coin selection needs to raise to pay for the payload including change for algorithms that allow change\r\n\r\nDo we need another term for `selection_target` without change?",
      "created_at": "2022-05-09T20:05:32Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868400777",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868400777"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": 257,
      "original_start_line": 257,
      "start_side": "RIGHT",
      "line": 258,
      "original_line": 258,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868403748",
      "pull_request_review_id": 966693630,
      "id": 868403748,
      "node_id": "PRRC_kwDOABII584zwsok",
      "diff_hunk": "@@ -254,6 +254,10 @@ struct SelectionResult\n private:\n     /** Set of inputs selected by the algorithm to use in the transaction */\n     std::set<COutput> m_selected_inputs;\n+    /** The target the algorithm selected for. Note that this may not be equal to the recipient amount as it can include non-input fees */\n+    CAmount m_target;\n+    /** The algorithm used to produce this result */\n+    SelectionAlgorithm m_algo;",
      "path": "src/wallet/coinselection.h",
      "position": 7,
      "original_position": 7,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think we got something like this via #24644 now.",
      "created_at": "2022-05-09T20:08:28Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868403748",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868403748"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 260,
      "original_line": 260,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868406613",
      "pull_request_review_id": 966693630,
      "id": 868406613,
      "node_id": "PRRC_kwDOABII584zwtVV",
      "diff_hunk": "@@ -434,9 +434,17 @@ std::optional<SelectionResult> SelectCoins(const CWallet& wallet, const std::vec\n              */\n             preset_inputs.Insert(out, /*ancestors=*/ 0, /*descendants=*/ 0, /*positive_only=*/ false);\n         }\n+        if (preset_inputs.GetSelectionAmount() < nTargetValue) return std::nullopt;",
      "path": "src/wallet/spend.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Wasn't this what we introduced `SelectionResult.Merge(…)` above for?",
      "created_at": "2022-05-09T20:11:31Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868406613",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868406613"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 438,
      "original_line": 437,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868408331",
      "pull_request_review_id": 966693630,
      "id": 868408331,
      "node_id": "PRRC_kwDOABII584zwtwL",
      "diff_hunk": "@@ -434,9 +434,17 @@ std::optional<SelectionResult> SelectCoins(const CWallet& wallet, const std::vec\n              */\n             preset_inputs.Insert(out, /*ancestors=*/ 0, /*descendants=*/ 0, /*positive_only=*/ false);\n         }\n+        if (preset_inputs.GetSelectionAmount() < nTargetValue) return std::nullopt;\n+\n+        if (preset_inputs.GetSelectionAmount() > nTargetValue + coin_selection_params.m_cost_of_change) {",
      "path": "src/wallet/spend.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Would this perhaps still need to check whether the remainder is greater than the dust threshold?",
      "created_at": "2022-05-09T20:13:22Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868408331",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868408331"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 440,
      "original_line": 439,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868413078",
      "pull_request_review_id": 966693630,
      "id": 868413078,
      "node_id": "PRRC_kwDOABII584zwu6W",
      "diff_hunk": "@@ -572,8 +585,8 @@ std::optional<SelectionResult> SelectCoins(const CWallet& wallet, const std::vec\n     if (!res) return std::nullopt;\n \n     // Add preset inputs to result\n-    res->AddInput(preset_inputs);\n-    if (res->m_algo == SelectionAlgorithm::MANUAL) {\n+    res->Merge(preselected);",
      "path": "src/wallet/spend.cpp",
      "position": 51,
      "original_position": 51,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I have the impression that this commit makes changes to how coin selection works with preselected inputs and in addition introduces that SelectionResult returns change. While both changes look worthwhile to me, it would be easier to follow if they were separate commits if not separate PRs. Am I missing some special reason why doing all of this at once is advantageous?",
      "created_at": "2022-05-09T20:18:11Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868413078",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868413078"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 589,
      "original_line": 588,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868417805",
      "pull_request_review_id": 966693630,
      "id": 868417805,
      "node_id": "PRRC_kwDOABII584zwwEN",
      "diff_hunk": "@@ -382,9 +382,10 @@ std::optional<SelectionResult> AttemptSelection(const CWallet& wallet, const CAm\n     // Vector of results. We will choose the best one based on waste.\n     std::vector<SelectionResult> results;\n \n+    const auto cost_of_extra_input = coin_selection_params.m_effective_feerate.GetFee(DUMMY_NESTED_P2WPKH_INPUT_SIZE);\n     // Note that unlike KnapsackSolver, we do not include the fee for creating a change output as BnB will not create a change output.\n     std::vector<OutputGroup> positive_groups = GroupOutputs(wallet, coins, coin_selection_params, eligibility_filter, true /* positive_only */);\n-    if (auto bnb_result{SelectCoinsBnB(positive_groups, nTargetValue, coin_selection_params.m_cost_of_change)}) {\n+    if (auto bnb_result{SelectCoinsBnB(positive_groups, nTargetValue, coin_selection_params.m_cost_of_change + cost_of_extra_input)}) {",
      "path": "src/wallet/spend.cpp",
      "position": 8,
      "original_position": 8,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "in_reply_to_id": null,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That's an interesting upper bound. Much better than just completely unbounded, but definitely gives some room for bigger `excess` amounts than before. Is this still a WIP-value to give you more wiggle room or is this what you finally identified as the appropriate upper bound? Curious about your thought process here.",
      "created_at": "2022-05-09T20:23:01Z",
      "updated_at": "2022-05-09T20:24:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868417805",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868417805"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 388,
      "original_line": 388,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868858918",
      "pull_request_review_id": 967231776,
      "id": 868858918,
      "node_id": "PRRC_kwDOABII584zybwm",
      "diff_hunk": "@@ -760,7 +760,8 @@ static bool CreateTransactionInternal(\n \n     // vouts to the payees\n     if (!coin_selection_params.m_subtract_fee_outputs) {\n-        coin_selection_params.tx_noinputs_size = 11; // Static vsize overhead + outputs vsize. 4 nVersion, 4 nLocktime, 1 input count, 1 output count, 1 witness overhead (dummy, flag, stack size)\n+        coin_selection_params.tx_noinputs_size = 10; // Static vsize overhead + outputs vsize. 4 nVersion, 4 nLocktime, 1 input count, 1 witness overhead (dummy, flag, stack size)",
      "path": "src/wallet/spend.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "27441c7253d0d0a79f95a50efebbd17a4c3553e2",
      "in_reply_to_id": 868328003,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "For clarity. The size required to store output counter added below. So in case of <253 outputs `tx_noinputs_size` will be 11vB for both segwit and non-segwit txs. This overshoots the target a bit for non-segwit, but this is much better than selecting not enough coins.",
      "created_at": "2022-05-10T06:25:52Z",
      "updated_at": "2022-05-10T06:25:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868858918",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868858918"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 782,
      "original_line": 763,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868861407",
      "pull_request_review_id": 967235259,
      "id": 868861407,
      "node_id": "PRRC_kwDOABII584zycXf",
      "diff_hunk": "@@ -254,6 +254,10 @@ struct SelectionResult\n private:\n     /** Set of inputs selected by the algorithm to use in the transaction */\n     std::set<COutput> m_selected_inputs;\n+    /** The target the algorithm selected for. Note that this may not be equal to the recipient amount as it can include non-input fees */\n+    CAmount m_target;\n+    /** The algorithm used to produce this result */\n+    SelectionAlgorithm m_algo;",
      "path": "src/wallet/coinselection.h",
      "position": 7,
      "original_position": 7,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": 868403748,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, I just made it non const to allow merging two `SelectionResult`s",
      "created_at": "2022-05-10T06:29:49Z",
      "updated_at": "2022-05-10T06:29:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868861407",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868861407"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 260,
      "original_line": 260,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868880476",
      "pull_request_review_id": 967262403,
      "id": 868880476,
      "node_id": "PRRC_kwDOABII584zyhBc",
      "diff_hunk": "@@ -382,9 +382,10 @@ std::optional<SelectionResult> AttemptSelection(const CWallet& wallet, const CAm\n     // Vector of results. We will choose the best one based on waste.\n     std::vector<SelectionResult> results;\n \n+    const auto cost_of_extra_input = coin_selection_params.m_effective_feerate.GetFee(DUMMY_NESTED_P2WPKH_INPUT_SIZE);\n     // Note that unlike KnapsackSolver, we do not include the fee for creating a change output as BnB will not create a change output.\n     std::vector<OutputGroup> positive_groups = GroupOutputs(wallet, coins, coin_selection_params, eligibility_filter, true /* positive_only */);\n-    if (auto bnb_result{SelectCoinsBnB(positive_groups, nTargetValue, coin_selection_params.m_cost_of_change)}) {\n+    if (auto bnb_result{SelectCoinsBnB(positive_groups, nTargetValue, coin_selection_params.m_cost_of_change + cost_of_extra_input)}) {",
      "path": "src/wallet/spend.cpp",
      "position": 8,
      "original_position": 8,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "in_reply_to_id": 868417805,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "To fix inefficiencies identified #24580 we need to increase upper limit by the opportunity cost of spending one extra input. We don't know what type that one extra input would be.\r\n\r\nThe range of possible values is from the cost of p2tr (57.5vb) to the cost of p2pkh (148vb). The chosen value is in the middle of that range. \r\n\r\n- If you have only p2pkh inputs in your wallet: the new upper bound is lower than optimal, but still better than current bound as it extends the set of possible BnB solutions.\r\n- If you have only p2tr inputs: the new bound is higher than optimal, but also better than current bound. Same reasoning applies here as for the BnB without upper limit. We produce more BnB solutions and later choose what solution is economically more efficient. But unlike BnB without upper limit we don't risk dropping ridiculous amounts to fees.\r\n\r\nAn alternative way to pick the value would be to examine available UTXOs and take an average input size or something like this. This is more complicated and I'm not sure if it makes a meaningful difference. ",
      "created_at": "2022-05-10T06:56:29Z",
      "updated_at": "2022-05-10T06:56:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868880476",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868880476"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 388,
      "original_line": 388,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868884647",
      "pull_request_review_id": 967268077,
      "id": 868884647,
      "node_id": "PRRC_kwDOABII584zyiCn",
      "diff_hunk": "@@ -434,9 +434,17 @@ std::optional<SelectionResult> SelectCoins(const CWallet& wallet, const std::vec\n              */\n             preset_inputs.Insert(out, /*ancestors=*/ 0, /*descendants=*/ 0, /*positive_only=*/ false);\n         }\n+        if (preset_inputs.GetSelectionAmount() < nTargetValue) return std::nullopt;\n+\n+        if (preset_inputs.GetSelectionAmount() > nTargetValue + coin_selection_params.m_cost_of_change) {",
      "path": "src/wallet/spend.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": 868408331,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't think so, because `m_cost_of_change` is higher than dust",
      "created_at": "2022-05-10T07:01:52Z",
      "updated_at": "2022-05-10T07:01:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868884647",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868884647"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 440,
      "original_line": 439,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868885595",
      "pull_request_review_id": 967269434,
      "id": 868885595,
      "node_id": "PRRC_kwDOABII584zyiRb",
      "diff_hunk": "@@ -398,11 +398,8 @@ std::optional<SelectionResult> AttemptSelection(const CWallet& wallet, const CAm\n         results.push_back(*knapsack_result);\n     }\n \n-    // Include change for SRD as we want to avoid making really small change if the selection just\n-    // barely meets the target. Just use the lower bound change target instead of the randomly\n-    // generated one, since SRD will result in a random change amount anyway; avoid making the\n-    // target needlessly large.\n-    const CAmount srd_target = nTargetValue + coin_selection_params.m_change_fee + CHANGE_LOWER;",
      "path": "src/wallet/spend.cpp",
      "position": 8,
      "original_position": 8,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "9be243779eb02fd36e1c9a4ae6fa8b54b1ea50b1",
      "in_reply_to_id": 868361193,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Will do. The reason is to have the correct value (without CHANGE_LOWER) for `SelectionResult.m_target`",
      "created_at": "2022-05-10T07:03:12Z",
      "updated_at": "2022-05-10T07:03:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868885595",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868885595"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 405,
      "original_line": 405,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868885737",
      "pull_request_review_id": 967269652,
      "id": 868885737,
      "node_id": "PRRC_kwDOABII584zyiTp",
      "diff_hunk": "@@ -27,25 +27,25 @@ using interfaces::FoundBlock;\n namespace wallet {\n static constexpr size_t OUTPUT_GROUP_MAX_ENTRIES{100};\n \n-int GetTxSpendSize(const CWallet& wallet, const CWalletTx& wtx, unsigned int out, bool use_max_sig)\n+int GetTxSpendSize(const CWallet& wallet, const CWalletTx& wtx, unsigned int out, const CCoinControl* coin_control)",
      "path": "src/wallet/spend.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "e4cfbe5e7b8b91c5f089e169539dc3723f9a2897",
      "in_reply_to_id": 868347706,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Will do",
      "created_at": "2022-05-10T07:03:25Z",
      "updated_at": "2022-05-10T07:03:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868885737",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868885737"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868887333",
      "pull_request_review_id": 967271858,
      "id": 868887333,
      "node_id": "PRRC_kwDOABII584zyisl",
      "diff_hunk": "@@ -258,15 +258,17 @@ struct SelectionResult\n     bool m_use_effective{false};\n     /** The computed waste */\n     std::optional<CAmount> m_waste;\n+    /** Force no change even if more than enough inputs are selected */\n+    bool m_force_no_change{false};",
      "path": "src/wallet/coinselection.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "e4c0838479205632f5b8f793feb30b368ade3845",
      "in_reply_to_id": 868374271,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "meh.. I'm ambivalent about this. What do others think?",
      "created_at": "2022-05-10T07:05:27Z",
      "updated_at": "2022-05-10T07:05:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868887333",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868887333"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": 265,
      "original_start_line": 261,
      "start_side": "RIGHT",
      "line": 266,
      "original_line": 262,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868888591",
      "pull_request_review_id": 967273572,
      "id": 868888591,
      "node_id": "PRRC_kwDOABII584zyjAP",
      "diff_hunk": "@@ -439,7 +450,18 @@ void SelectionResult::Clear()\n void SelectionResult::AddInput(const OutputGroup& group)\n {\n     util::insert(m_selected_inputs, group.m_outputs);\n-    m_use_effective = !group.m_subtract_fee_outputs;\n+    m_use_effective = m_use_effective || !group.m_subtract_fee_outputs;\n+}\n+\n+void SelectionResult::Merge(const SelectionResult& other)\n+{\n+    m_target += other.m_target;\n+    m_use_effective |= other.m_use_effective;\n+    m_force_no_change |= other.m_force_no_change;\n+    if (m_algo == SelectionAlgorithm::MANUAL) {\n+        m_algo = other.m_algo;\n+    }\n+    util::insert(m_selected_inputs, other.m_selected_inputs);\n }",
      "path": "src/wallet/coinselection.cpp",
      "position": 47,
      "original_position": 47,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": 868388727,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'll work on splitting this into a separate commit",
      "created_at": "2022-05-10T07:07:05Z",
      "updated_at": "2022-05-10T07:07:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868888591",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868888591"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": 456,
      "original_start_line": 456,
      "start_side": "RIGHT",
      "line": 465,
      "original_line": 465,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868890021",
      "pull_request_review_id": 967275526,
      "id": 868890021,
      "node_id": "PRRC_kwDOABII584zyjWl",
      "diff_hunk": "@@ -254,6 +254,10 @@ struct SelectionResult\n private:\n     /** Set of inputs selected by the algorithm to use in the transaction */\n     std::set<COutput> m_selected_inputs;\n+    /** The target the algorithm selected for. Note that this may not be equal to the recipient amount as it can include non-input fees */\n+    CAmount m_target;",
      "path": "src/wallet/coinselection.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": 868400777,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "+1 to the terms. I don't think we need another one for `selection_target` without change. Currently we know in most cases whether we need change or not. BnB - always no change, Knapsack and SRD always change, unless sffo.",
      "created_at": "2022-05-10T07:08:51Z",
      "updated_at": "2022-05-10T07:08:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868890021",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868890021"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": 257,
      "original_start_line": 257,
      "start_side": "RIGHT",
      "line": 258,
      "original_line": 258,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868891698",
      "pull_request_review_id": 967277725,
      "id": 868891698,
      "node_id": "PRRC_kwDOABII584zyjwy",
      "diff_hunk": "@@ -434,9 +434,17 @@ std::optional<SelectionResult> SelectCoins(const CWallet& wallet, const std::vec\n              */\n             preset_inputs.Insert(out, /*ancestors=*/ 0, /*descendants=*/ 0, /*positive_only=*/ false);\n         }\n+        if (preset_inputs.GetSelectionAmount() < nTargetValue) return std::nullopt;",
      "path": "src/wallet/spend.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": 868406613,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not sure what did you mean by this. This is the case when the selected inputs are not enough and we just return null value. There's no merging going on.",
      "created_at": "2022-05-10T07:10:50Z",
      "updated_at": "2022-05-10T07:10:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868891698",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868891698"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 438,
      "original_line": 437,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868893882",
      "pull_request_review_id": 967281011,
      "id": 868893882,
      "node_id": "PRRC_kwDOABII584zykS6",
      "diff_hunk": "@@ -572,8 +585,8 @@ std::optional<SelectionResult> SelectCoins(const CWallet& wallet, const std::vec\n     if (!res) return std::nullopt;\n \n     // Add preset inputs to result\n-    res->AddInput(preset_inputs);\n-    if (res->m_algo == SelectionAlgorithm::MANUAL) {\n+    res->Merge(preselected);",
      "path": "src/wallet/spend.cpp",
      "position": 51,
      "original_position": 51,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": 868413078,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I intended this to not change the behavior. The reason why we need `Merge` is to correctly track `SelectionResult::m_target`. Right now in case with preselected inputs `m_target` will be reduced by the amount of preselected inputs and this leads to incorrect result in `SelectionResult::GetChange`\r\n\r\nI'll split the commits and try to explain better why this is needed",
      "created_at": "2022-05-10T07:13:36Z",
      "updated_at": "2022-05-10T07:13:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868893882",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868893882"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 589,
      "original_line": 588,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868896848",
      "pull_request_review_id": 967284951,
      "id": 868896848,
      "node_id": "PRRC_kwDOABII584zylBQ",
      "diff_hunk": "@@ -382,9 +382,10 @@ std::optional<SelectionResult> AttemptSelection(const CWallet& wallet, const CAm\n     // Vector of results. We will choose the best one based on waste.\n     std::vector<SelectionResult> results;\n \n+    const auto cost_of_extra_input = coin_selection_params.m_effective_feerate.GetFee(DUMMY_NESTED_P2WPKH_INPUT_SIZE);\n     // Note that unlike KnapsackSolver, we do not include the fee for creating a change output as BnB will not create a change output.\n     std::vector<OutputGroup> positive_groups = GroupOutputs(wallet, coins, coin_selection_params, eligibility_filter, true /* positive_only */);\n-    if (auto bnb_result{SelectCoinsBnB(positive_groups, nTargetValue, coin_selection_params.m_cost_of_change)}) {\n+    if (auto bnb_result{SelectCoinsBnB(positive_groups, nTargetValue, coin_selection_params.m_cost_of_change + cost_of_extra_input)}) {",
      "path": "src/wallet/spend.cpp",
      "position": 8,
      "original_position": 8,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "in_reply_to_id": 868417805,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I should probably add a comment to the code once we agree on the value",
      "created_at": "2022-05-10T07:17:15Z",
      "updated_at": "2022-05-10T07:17:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r868896848",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/868896848"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 388,
      "original_line": 388,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/869250868",
      "pull_request_review_id": 967795297,
      "id": 869250868,
      "node_id": "PRRC_kwDOABII584zz7c0",
      "diff_hunk": "@@ -254,6 +254,10 @@ struct SelectionResult\n private:\n     /** Set of inputs selected by the algorithm to use in the transaction */\n     std::set<COutput> m_selected_inputs;\n+    /** The target the algorithm selected for. Note that this may not be equal to the recipient amount as it can include non-input fees */\n+    CAmount m_target;",
      "path": "src/wallet/coinselection.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": 868400777,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good, although Knapsack can actually produce results without change, but it takes care of the change amount internally.",
      "created_at": "2022-05-10T13:40:07Z",
      "updated_at": "2022-05-10T13:40:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r869250868",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/869250868"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": 257,
      "original_start_line": 257,
      "start_side": "RIGHT",
      "line": 258,
      "original_line": 258,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/869252615",
      "pull_request_review_id": 967799027,
      "id": 869252615,
      "node_id": "PRRC_kwDOABII584zz74H",
      "diff_hunk": "@@ -434,9 +434,17 @@ std::optional<SelectionResult> SelectCoins(const CWallet& wallet, const std::vec\n              */\n             preset_inputs.Insert(out, /*ancestors=*/ 0, /*descendants=*/ 0, /*positive_only=*/ false);\n         }\n+        if (preset_inputs.GetSelectionAmount() < nTargetValue) return std::nullopt;",
      "path": "src/wallet/spend.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": 868406613,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Right, but if the preset inputs are less than the target, wouldn't we be supposed to select additional inputs and build a transaction? I thought that's what you introduced the merge for.",
      "created_at": "2022-05-10T13:41:38Z",
      "updated_at": "2022-05-10T13:41:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r869252615",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/869252615"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 438,
      "original_line": 437,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/869256103",
      "pull_request_review_id": 967807047,
      "id": 869256103,
      "node_id": "PRRC_kwDOABII584zz8un",
      "diff_hunk": "@@ -434,9 +434,17 @@ std::optional<SelectionResult> SelectCoins(const CWallet& wallet, const std::vec\n              */\n             preset_inputs.Insert(out, /*ancestors=*/ 0, /*descendants=*/ 0, /*positive_only=*/ false);\n         }\n+        if (preset_inputs.GetSelectionAmount() < nTargetValue) return std::nullopt;\n+\n+        if (preset_inputs.GetSelectionAmount() > nTargetValue + coin_selection_params.m_cost_of_change) {",
      "path": "src/wallet/spend.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "5ee8f6c23e8485869604d33a03a8b352a0fc43ba",
      "in_reply_to_id": 868408331,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah right, because it includes the cost of future spending.",
      "created_at": "2022-05-10T13:43:37Z",
      "updated_at": "2022-05-10T13:43:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r869256103",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/869256103"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 440,
      "original_line": 439,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/869264474",
      "pull_request_review_id": 967819031,
      "id": 869264474,
      "node_id": "PRRC_kwDOABII584zz-xa",
      "diff_hunk": "@@ -382,9 +382,10 @@ std::optional<SelectionResult> AttemptSelection(const CWallet& wallet, const CAm\n     // Vector of results. We will choose the best one based on waste.\n     std::vector<SelectionResult> results;\n \n+    const auto cost_of_extra_input = coin_selection_params.m_effective_feerate.GetFee(DUMMY_NESTED_P2WPKH_INPUT_SIZE);\n     // Note that unlike KnapsackSolver, we do not include the fee for creating a change output as BnB will not create a change output.\n     std::vector<OutputGroup> positive_groups = GroupOutputs(wallet, coins, coin_selection_params, eligibility_filter, true /* positive_only */);\n-    if (auto bnb_result{SelectCoinsBnB(positive_groups, nTargetValue, coin_selection_params.m_cost_of_change)}) {\n+    if (auto bnb_result{SelectCoinsBnB(positive_groups, nTargetValue, coin_selection_params.m_cost_of_change + cost_of_extra_input)}) {",
      "path": "src/wallet/spend.cpp",
      "position": 8,
      "original_position": 8,
      "commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "original_commit_id": "b009a99839dd062709e0c0be1972ef62cd96b1c2",
      "in_reply_to_id": 868417805,
      "user": {
        "login": "Xekyo",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Xekyo",
        "html_url": "https://github.com/Xekyo",
        "followers_url": "https://api.github.com/users/Xekyo/followers",
        "following_url": "https://api.github.com/users/Xekyo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Xekyo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Xekyo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Xekyo/subscriptions",
        "organizations_url": "https://api.github.com/users/Xekyo/orgs",
        "repos_url": "https://api.github.com/users/Xekyo/repos",
        "events_url": "https://api.github.com/users/Xekyo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Xekyo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps it should just use the default output type, that way it will automatically upgrade as wallets progress to P2TR eventually. The current default seems like a reasonable choice at this time.\r\n\r\n:thinking: Having the bound definitely feels a lot better than unbounded. A whole input's fee still feels like a lot of additional fees. It's obviously only the worst case, but I'm curious to see how that fares in simulations. Do you need to make more logic changes or do you think I could take it for a spin on a few different scenarios?",
      "created_at": "2022-05-10T13:49:13Z",
      "updated_at": "2022-05-10T13:53:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24752#discussion_r869264474",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/869264474"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24752"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 388,
      "original_line": 388,
      "side": "RIGHT"
    }
  ]
}