{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281",
    "id": 139927659,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTM5OTI3NjU5",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11281",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/11281.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/11281.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/7f812502b78b76653bbef19169e8a05873ee3b8d",
    "number": 11281,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Avoid permanent cs_main/cs_wallet lock during RescanFromTime",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Right now, we are holding `cs_main`/`cs_wallet` during the whole rescan process (which can take a couple of hours).\r\nThis was probably only done because of laziness and it is an important show-stopper for #11200 (GUI rescan abort).",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      },
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/30",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/30",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/30/labels",
      "id": 2626187,
      "node_id": "MDk6TWlsZXN0b25lMjYyNjE4Nw==",
      "number": 30,
      "state": "closed",
      "title": "0.16.0",
      "description": "This will be the release of segwit wallet. 🎉 ",
      "creator": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 0,
      "closed_issues": 70,
      "created_at": "2017-07-06T19:58:41Z",
      "updated_at": "2018-03-07T16:28:13Z",
      "closed_at": "2018-03-07T16:28:13Z"
    },
    "active_lock_reason": "resolved",
    "created_at": "2017-09-07T23:40:12Z",
    "updated_at": "2021-09-08T11:32:13Z",
    "closed_at": "2018-01-24T11:57:21Z",
    "mergeable_state": "unknown",
    "merged_at": "2018-01-24T11:57:21Z",
    "merge_commit_sha": "7f812502b78b76653bbef19169e8a05873ee3b8d",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "jonasschnelli:2017/09/rescan_locks",
      "ref": "2017/09/rescan_locks",
      "sha": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 9264454,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjY0NDU0",
        "name": "bitcoin",
        "full_name": "jonasschnelli/bitcoin",
        "owner": {
          "login": "jonasschnelli",
          "id": 178464,
          "node_id": "MDQ6VXNlcjE3ODQ2NA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jonasschnelli",
          "html_url": "https://github.com/jonasschnelli",
          "followers_url": "https://api.github.com/users/jonasschnelli/followers",
          "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
          "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
          "repos_url": "https://api.github.com/users/jonasschnelli/repos",
          "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/jonasschnelli/bitcoin",
        "fork": true,
        "url": "https://api.github.com/repos/jonasschnelli/bitcoin",
        "archive_url": "https://api.github.com/repos/jonasschnelli/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/jonasschnelli/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/jonasschnelli/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/jonasschnelli/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/jonasschnelli/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/jonasschnelli/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/jonasschnelli/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/jonasschnelli/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/jonasschnelli/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/jonasschnelli/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/jonasschnelli/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/jonasschnelli/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/jonasschnelli/bitcoin/events",
        "forks_url": "https://api.github.com/repos/jonasschnelli/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/jonasschnelli/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/jonasschnelli/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/jonasschnelli/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/jonasschnelli/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/jonasschnelli/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/jonasschnelli/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/jonasschnelli/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/jonasschnelli/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/jonasschnelli/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/jonasschnelli/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/jonasschnelli/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/jonasschnelli/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/jonasschnelli/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/jonasschnelli/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/jonasschnelli/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:jonasschnelli/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/jonasschnelli/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/jonasschnelli/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/jonasschnelli/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/jonasschnelli/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/jonasschnelli/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/jonasschnelli/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/jonasschnelli/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/jonasschnelli/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/jonasschnelli/bitcoin/hooks",
        "svn_url": "https://github.com/jonasschnelli/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "C++",
        "forks_count": 5,
        "stargazers_count": 10,
        "watchers_count": 10,
        "size": 194164,
        "default_branch": "master",
        "open_issues_count": 5,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2022-08-07T18:33:53Z",
        "created_at": "2013-04-06T18:21:51Z",
        "updated_at": "2023-05-19T06:34:35Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "b5e4b9b5100ec15217d43edb5f4149439f4b20a5",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69817,
        "watchers_count": 69817,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T22:42:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T00:11:53Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 349,
    "deletions": 215,
    "changed_files": 7,
    "commits": 5,
    "review_comments": 93,
    "comments": 39
  },
  "events": [
    {
      "event": "labeled",
      "id": 1239924214,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDEyMzk5MjQyMTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1239924214",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-07T23:40:12Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "commented",
      "id": 327957949,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMyNzk1Nzk0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/327957949",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-07T23:40:46Z",
      "updated_at": "2017-09-07T23:40:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "Best reviewed with `?w=1` (https://github.com/bitcoin/bitcoin/pull/11281/files?w=1)",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-327957949",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "labeled",
      "id": 1239929951,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDEyMzk5Mjk5NTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1239929951",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-07T23:46:32Z",
      "label": {
        "name": "Wallet",
        "color": "02d7e1"
      }
    },
    {
      "event": "commented",
      "id": 328023287,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMyODAyMzI4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328023287",
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-08T07:26:09Z",
      "updated_at": "2017-09-08T07:26:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "@jonasschnelli Which variables are guarded by `cs_main` and `cs_wallet` in these specific cases?\r\n\r\nI'll double-check against my lock annotations to make sure they are in sync.",
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-328023287",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1240279071,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTI0MDI3OTA3MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1240279071",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-08T07:26:09Z"
    },
    {
      "event": "subscribed",
      "id": 1240279072,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEyNDAyNzkwNzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1240279072",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-08T07:26:09Z"
    },
    {
      "event": "commented",
      "id": 328530818,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMyODUzMDgxOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328530818",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-11T13:35:22Z",
      "updated_at": "2017-09-11T13:35:22Z",
      "author_association": "MEMBER",
      "body": "Awesome, will review.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-328530818",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "reviewed",
      "id": 61989731,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE5ODk3MzE=",
      "url": null,
      "actor": null,
      "commit_id": "4c1f082b991d872ee7b5507e15ee19eb328ab1d9",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-61989731",
      "submitted_at": "2017-09-12T00:12:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1252049323,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI1MjA0OTMyMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1252049323",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-16T03:48:38Z"
    },
    {
      "event": "commented",
      "id": 329943121,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTk0MzEyMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329943121",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-16T03:53:43Z",
      "updated_at": "2017-09-16T03:53:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated and reduced locks after @sipa's mentioning.",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-329943121",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1252050175,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTI1MjA1MDE3NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1252050175",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-16T03:53:43Z"
    },
    {
      "event": "subscribed",
      "id": 1252050176,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEyNTIwNTAxNzY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1252050176",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-16T03:53:43Z"
    },
    {
      "event": "commented",
      "id": 330266408,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDI2NjQwOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330266408",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-18T15:49:43Z",
      "updated_at": "2017-09-18T15:49:43Z",
      "author_association": "MEMBER",
      "body": "utACK 1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-330266408",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "reviewed",
      "id": 63497928,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjM0OTc5Mjg=",
      "url": null,
      "actor": null,
      "commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-63497928",
      "submitted_at": "2017-09-18T21:56:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "reviewed",
      "id": 63816742,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjM4MTY3NDI=",
      "url": null,
      "actor": null,
      "commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-63816742",
      "submitted_at": "2017-09-19T22:00:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "commented",
      "id": 330705883,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDcwNTg4Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330705883",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-19T23:54:05Z",
      "updated_at": "2017-09-19T23:54:05Z",
      "author_association": "MEMBER",
      "body": "Sorry for the bad reference ☝️ ...",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-330705883",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1260558583,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI2MDU1ODU4Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1260558583",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-22T03:47:38Z"
    },
    {
      "event": "commented",
      "id": 331343028,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTM0MzAyOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/331343028",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-22T03:49:26Z",
      "updated_at": "2017-09-22T03:49:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "Fixed @promag's code folding/style issue",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-331343028",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1260559640,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTI2MDU1OTY0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1260559640",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-22T03:49:26Z"
    },
    {
      "event": "subscribed",
      "id": 1260559641,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEyNjA1NTk2NDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1260559641",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-22T03:49:26Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1293284931,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI5MzI4NDkzMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1293284931",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-14T05:25:27Z"
    },
    {
      "event": "commented",
      "id": 344724982,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDcyNDk4Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/344724982",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-15T20:53:58Z",
      "updated_at": "2017-11-15T20:53:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "Reviewers welcome (to make progress with GUI rescan abort #11200), best reviewed with ?w=1",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-344724982",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "commented",
      "id": 344897211,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDg5NzIxMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/344897211",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-16T11:35:11Z",
      "updated_at": "2017-11-16T11:52:44Z",
      "author_association": "MEMBER",
      "body": "~~utACK 726fe69~~. There might be a slight overhead to locking for every block, likely only relevant for the first blocks of the chain which have few transactions. In any case this is preferable to the current situation.\r\n\r\n(removed my utACK for now, this does not get reorgs right in case the order in which blocks are scanned matters, which I'm not sure about)",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-344897211",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "renamed",
      "id": 1344920706,
      "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTM0NDkyMDcwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1344920706",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-16T11:36:54Z",
      "rename": {
        "from": "Avoid pemanent cs_main/cs_wallet lock during RescanFromTime",
        "to": "Avoid permanent cs_main/cs_wallet lock during RescanFromTime"
      }
    },
    {
      "event": "mentioned",
      "id": 1344928556,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM0NDkyODU1Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1344928556",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-16T11:42:22Z"
    },
    {
      "event": "subscribed",
      "id": 1344928558,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzNDQ5Mjg1NTg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1344928558",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-16T11:42:22Z"
    },
    {
      "event": "reviewed",
      "id": 79194980,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzkxOTQ5ODA=",
      "url": null,
      "actor": null,
      "commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "LGTM, will play a bit.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-79194980",
      "submitted_at": "2017-11-27T15:05:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "commented",
      "id": 347211606,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzIxMTYwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347211606",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-27T15:12:02Z",
      "updated_at": "2017-11-27T15:12:02Z",
      "author_association": "MEMBER",
      "body": "BTW, see question https://github.com/bitcoin/bitcoin/pull/11281#discussion_r139549593.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-347211606",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "commented",
      "id": 347218612,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzIxODYxMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347218612",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-27T15:33:31Z",
      "updated_at": "2017-11-27T15:33:31Z",
      "author_association": "MEMBER",
      "body": "This also allows concurrent rescans correct? It will mess up the progress dialog no?",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-347218612",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "added_to_project",
      "id": 1360035938,
      "node_id": "MDE5OkFkZGVkVG9Qcm9qZWN0RXZlbnQxMzYwMDM1OTM4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1360035938",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-27T20:11:29Z",
      "project_card": {
        "id": 5877308,
        "url": "https://api.github.com/projects/columns/cards/5877308",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Blockers"
      }
    },
    {
      "event": "commented",
      "id": 347454431,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzQ1NDQzMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347454431",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-28T08:51:19Z",
      "updated_at": "2017-11-28T09:06:01Z",
      "author_association": "MEMBER",
      "body": "> This also allows concurrent rescans correct? It will mess up the progress dialog no?\r\n\r\nConcurrent rescans on multiple wallets would be nice, multiple concurrent rescans on one wallet would be dangerous or at least counter-productive (so we might want to track that?).\r\nProgress dialog issues can be fixed later.",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-347454431",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1364308294,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM2NDMwODI5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1364308294",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-29T20:06:21Z"
    },
    {
      "event": "commented",
      "id": 347980858,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzk4MDg1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347980858",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-29T20:08:43Z",
      "updated_at": "2017-11-29T20:08:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased the PR.\r\n\r\n* Added checks to make sure only one rescan per time and per wallet can be executed (with appropriate error responses)\r\n\r\n* Extended the lock reduction to the new `rescanblockchain` call",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-347980858",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1364315739,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM2NDMxNTczOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1364315739",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-29T20:10:15Z"
    },
    {
      "event": "commented",
      "id": 347981907,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzk4MTkwNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347981907",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-29T20:12:05Z",
      "updated_at": "2017-11-29T20:12:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "Best reviewed with [w=1](https://github.com/bitcoin/bitcoin/pull/11281/files?w=1).\r\nEasy way to test multiple parallel rescans by adding a sleep within the inner rescan loop.",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-347981907",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "reviewed",
      "id": 80868458,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3ODA4Njg0NTg=",
      "url": null,
      "actor": null,
      "commit_id": "fbca42a021342580fa8f4de12c55f941ba521ad6",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-80868458",
      "submitted_at": "2017-12-04T15:41:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "commented",
      "id": 349173234,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTE3MzIzNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349173234",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-05T02:16:58Z",
      "updated_at": "2017-12-05T02:16:58Z",
      "author_association": "MEMBER",
      "body": "> > This also allows concurrent rescans correct? It will mess up the progress dialog no?\r\n>\r\n> Concurrent rescans on multiple wallets would be nice, multiple concurrent rescans on one wallet would be dangerous or at least counter-productive (so we might want to track that?).\r\n> Progress dialog issues can be fixed later.\r\n\r\nPlease see #11826.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-349173234",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "commented",
      "id": 349729510,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTcyOTUxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349729510",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-06T18:21:48Z",
      "updated_at": "2017-12-06T18:21:48Z",
      "author_association": "MEMBER",
      "body": "Seems like this PR still has some races described above that need to be fixed.\r\n\r\nAlso, it is unclear to me what the \"important show-stopper for #11200\" mentioned in the PR description is. The comments in #11200 seems to indicate that there is some existing deadlock that this fixes and #11200 would worsen without this PR. But there's no explanation of how or when the deadlock happens. It's be good to have some clarification about this. (I also asked about it in https://github.com/bitcoin/bitcoin/pull/11200#issuecomment-340865856).",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-349729510",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "commented",
      "id": 349760376,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTc2MDM3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349760376",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-06T20:12:26Z",
      "updated_at": "2017-12-06T20:12:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "@ryanofsky: #11200 won't currently work because the rescan locks `cs_main` over a longer period. The GUI also tries to lock `cs_main` via graphical updates on the transaction table as well as the balances.... == unresponsiveness (not actually a deadlock) == you won't be able to abort the rescan because the whole GUI is locked.",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-349760376",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1375570799,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM3NTU3MDc5OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1375570799",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-06T20:12:27Z"
    },
    {
      "event": "subscribed",
      "id": 1375570800,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzNzU1NzA4MDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1375570800",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-06T20:12:27Z"
    },
    {
      "event": "commented",
      "id": 349879125,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTg3OTEyNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349879125",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-07T06:50:06Z",
      "updated_at": "2017-12-07T06:50:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "Added two commits.\r\n* Addressed the race issue found by @promag and @TheBlueMatt (d7f3836b74b790887793997562216885840df7a2)\r\n* Update the progress max if the tip has changed (as found by @promag, 9b59847ddca46d30404ca574cba32b6de214844f)",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-349879125",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1376299757,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM3NjI5OTc1Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1376299757",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-07T06:50:06Z"
    },
    {
      "event": "subscribed",
      "id": 1376299758,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzNzYyOTk3NTg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1376299758",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-07T06:50:06Z"
    },
    {
      "event": "mentioned",
      "id": 1376299759,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM3NjI5OTc1OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1376299759",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-07T06:50:06Z"
    },
    {
      "event": "subscribed",
      "id": 1376299760,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzNzYyOTk3NjA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1376299760",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-07T06:50:06Z"
    },
    {
      "event": "commented",
      "id": 349886775,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTg4Njc3NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349886775",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-07T07:35:11Z",
      "updated_at": "2017-12-07T07:35:11Z",
      "author_association": "MEMBER",
      "body": "Is this still WIP? I don't see changes or responses for 3 other races: [IsScanning](https://github.com/bitcoin/bitcoin/pull/11281#discussion_r154683955), [GuessVerificationProcess](https://github.com/bitcoin/bitcoin/pull/11281#discussion_r154672170), [ReadBlockFromDisk](https://github.com/bitcoin/bitcoin/pull/11281#discussion_r154675029)",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-349886775",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "commented",
      "id": 349890421,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTg5MDQyMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349890421",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-07T07:55:14Z",
      "updated_at": "2017-12-07T07:55:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "Added a commit that fixes the remaining missing locks mentioned by @TheBlueMatt, expect the racy `IsScanning()`. Would it make sense to read and set (protected by a internal lock) the scanning flag right after checking (something like `checkAndEventuallySetScanning()`)? Other ideas?",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-349890421",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1376370063,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM3NjM3MDA2Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1376370063",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-07T07:55:14Z"
    },
    {
      "event": "subscribed",
      "id": 1376370064,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzNzYzNzAwNjQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1376370064",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-07T07:55:14Z"
    },
    {
      "event": "commented",
      "id": 350294897,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDI5NDg5Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/350294897",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-08T15:43:10Z",
      "updated_at": "2017-12-08T15:43:10Z",
      "author_association": "MEMBER",
      "body": "re: race: I certainly appreciate the RPC exception before importing in case of an existing scan. It might be nice to get some RAII-like lock on the ability to scan, ie like your suggestion but you create a class instance which gives you the right to rescan instead of having to make sure you set some boolean to false if you decide you don't want to rescan.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-350294897",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "commented",
      "id": 350372374,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDM3MjM3NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/350372374",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-08T21:09:25Z",
      "updated_at": "2017-12-08T21:09:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "Added an RAII object to preserve wallet rescan races.",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-350372374",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1379564309,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM3OTU2NDMwOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1379564309",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-08T21:19:26Z"
    },
    {
      "event": "commented",
      "id": 350496195,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDQ5NjE5NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/350496195",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-09T18:28:35Z",
      "updated_at": "2017-12-09T18:28:35Z",
      "author_association": "MEMBER",
      "body": "It appears test_bitcoin.exe hung. Not sure if PR-related or some other issue, but I'm not aware of any issues with such hangs on master atm?",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-350496195",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "commented",
      "id": 350527625,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDUyNzYyNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/350527625",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-10T06:11:30Z",
      "updated_at": "2017-12-10T06:11:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "@TheBlueMatt: where did it hung? Travis seems to be happy?",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-350527625",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1380259829,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM4MDI1OTgyOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1380259829",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-10T06:11:30Z"
    },
    {
      "event": "subscribed",
      "id": 1380259830,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzODAyNTk4MzA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1380259830",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-10T06:11:30Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1382188731,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM4MjE4ODczMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1382188731",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-11T19:54:22Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1382191671,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM4MjE5MTY3MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1382191671",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-11T19:55:56Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1384253874,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM4NDI1Mzg3NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1384253874",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-12T19:25:41Z"
    },
    {
      "event": "commented",
      "id": 351165171,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTE2NTE3MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/351165171",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-12T19:26:15Z",
      "updated_at": "2017-12-12T19:26:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased and cleaned up commit history.",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-351165171",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "commented",
      "id": 351181137,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTE4MTEzNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/351181137",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-12T20:17:43Z",
      "updated_at": "2017-12-12T20:17:43Z",
      "author_association": "MEMBER",
      "body": "It may be nice to make a WalletRescanReserver a required argument to ScanForWalletTransactions/RescanFromTime to enforce correctness.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-351181137",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "reviewed",
      "id": 82968766,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3ODI5Njg3NjY=",
      "url": null,
      "actor": null,
      "commit_id": "8f0e976df202a81f2ba37b6276f75e279c3e65ed",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-82968766",
      "submitted_at": "2017-12-12T20:18:59Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1384594350,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM4NDU5NDM1MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1384594350",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-12T22:50:00Z"
    },
    {
      "event": "commented",
      "id": 351226949,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTIyNjk0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/351226949",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-12T23:15:56Z",
      "updated_at": "2017-12-12T23:15:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "Followed @TheBlueMatt advice and made the `WalletRescanReserver` an argument of `ScanForWalletTransactions` and `RescanFromTime` to ensure on code level that the wallet rescan is reserved before scanning.",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-351226949",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1384628446,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM4NDYyODQ0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1384628446",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-12T23:15:56Z"
    },
    {
      "event": "subscribed",
      "id": 1384628447,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzODQ2Mjg0NDc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1384628447",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-12T23:15:56Z"
    },
    {
      "event": "commented",
      "id": 351456105,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTQ1NjEwNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/351456105",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-13T17:05:20Z",
      "updated_at": "2017-12-13T17:05:20Z",
      "author_association": "MEMBER",
      "body": "See comment github is hiding at https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156484165. Also, could you squash \"Make sure we rescan only blocks in the main chain\" into the first commit? Otherwise the first commit is \"wrong\", which is annoying in review.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-351456105",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1386439880,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM4NjQzOTg4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1386439880",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-13T20:41:21Z"
    },
    {
      "event": "commented",
      "id": 351525517,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTUyNTUxNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/351525517",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-13T21:08:55Z",
      "updated_at": "2017-12-13T21:08:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "Added a commit ff54709 to allow to call `ReadBlockFromDisk()` without holding `cs_main` (push the lock down for `CDiskBlockPos::GetBlockPos()`).",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-351525517",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "reviewed",
      "id": 83346623,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3ODMzNDY2MjM=",
      "url": null,
      "actor": null,
      "commit_id": "ff547097b369fbd3aceb7216d6325df194af4a97",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-83346623",
      "submitted_at": "2017-12-13T23:02:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1386724882,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM4NjcyNDg4Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1386724882",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-13T23:43:51Z"
    },
    {
      "event": "reviewed",
      "id": 83551405,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3ODM1NTE0MDU=",
      "url": null,
      "actor": null,
      "commit_id": "61315d1455063641cf998abcd30145a35367e3b1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-83551405",
      "submitted_at": "2017-12-14T15:59:08Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1389089304,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM4OTA4OTMwNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1389089304",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-15T07:06:32Z"
    },
    {
      "event": "reviewed",
      "id": 83905785,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3ODM5MDU3ODU=",
      "url": null,
      "actor": null,
      "commit_id": "eba53080666402bba2efe4a430bde2b824edef9d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK eba53080666402bba2efe4a430bde2b824edef9d except the one minor missing lock.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-83905785",
      "submitted_at": "2017-12-15T20:07:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "reviewed",
      "id": 83928058,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3ODM5MjgwNTg=",
      "url": null,
      "actor": null,
      "commit_id": "22510c9a82b4b16f449cca7bf2b2197ad91dae52",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-83928058",
      "submitted_at": "2017-12-15T21:19:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1390403011,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM5MDQwMzAxMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1390403011",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-15T22:01:50Z"
    },
    {
      "event": "commented",
      "id": 352123819,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjEyMzgxOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/352123819",
      "actor": {
        "login": "heri99",
        "id": 20781722,
        "node_id": "MDQ6VXNlcjIwNzgxNzIy",
        "avatar_url": "https://avatars.githubusercontent.com/u/20781722?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/heri99",
        "html_url": "https://github.com/heri99",
        "followers_url": "https://api.github.com/users/heri99/followers",
        "following_url": "https://api.github.com/users/heri99/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/heri99/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/heri99/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/heri99/subscriptions",
        "organizations_url": "https://api.github.com/users/heri99/orgs",
        "repos_url": "https://api.github.com/users/heri99/repos",
        "events_url": "https://api.github.com/users/heri99/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/heri99/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-15T22:05:53Z",
      "updated_at": "2017-12-15T22:05:53Z",
      "author_association": "NONE",
      "body": "Sory for that\n\nOn 16 Dec 2017 5:24 am, \"Matt Corallo\" <notifications@github.com> wrote:\n\n> *@TheBlueMatt* commented on this pull request.\n> ------------------------------\n>\n> In src/wallet/rpcdump.cpp\n> <https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157302011>:\n>\n> >          }\n>      }\n> +    if (fRescan) {\n>\n> I wouldnt think so directly. What may be of larger concern may be that you\n> could get a bogus balance due to having found old transactions but not\n> newer ones. Its probably still fine, but we should note it in the help doc\n> for the rescanning functions. Alternatively we could block other wallet RPC\n> calls until rescan finishes.\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157302011>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AT0amrJB8ZTspbPKK86FyFNuKI74wYBeks5tAuN3gaJpZM4PQhYL>\n> .\n>\n",
      "user": {
        "login": "heri99",
        "id": 20781722,
        "node_id": "MDQ6VXNlcjIwNzgxNzIy",
        "avatar_url": "https://avatars.githubusercontent.com/u/20781722?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/heri99",
        "html_url": "https://github.com/heri99",
        "followers_url": "https://api.github.com/users/heri99/followers",
        "following_url": "https://api.github.com/users/heri99/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/heri99/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/heri99/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/heri99/subscriptions",
        "organizations_url": "https://api.github.com/users/heri99/orgs",
        "repos_url": "https://api.github.com/users/heri99/repos",
        "events_url": "https://api.github.com/users/heri99/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/heri99/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-352123819",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1390407956,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM5MDQwNzk1Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1390407956",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-15T22:05:54Z"
    },
    {
      "event": "subscribed",
      "id": 1390407957,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzOTA0MDc5NTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1390407957",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-15T22:05:54Z"
    },
    {
      "event": "reviewed",
      "id": 83988701,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3ODM5ODg3MDE=",
      "url": null,
      "actor": null,
      "commit_id": "e56aa6ce6b25becf1005d219b056d34c86347372",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-83988701",
      "submitted_at": "2017-12-17T02:47:03Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "milestoned",
      "id": 1391903915,
      "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDEzOTE5MDM5MTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1391903915",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-18T11:25:12Z",
      "milestone": {
        "title": "0.16.0"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1395172474,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTM5NTE3MjQ3NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1395172474",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-19T23:30:17Z"
    },
    {
      "event": "commented",
      "id": 352918517,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjkxODUxNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/352918517",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-19T23:30:43Z",
      "updated_at": "2017-12-19T23:30:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "Fixed @promag's nits",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-352918517",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1395172938,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM5NTE3MjkzOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1395172938",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-19T23:30:43Z"
    },
    {
      "event": "subscribed",
      "id": 1395172939,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzOTUxNzI5Mzk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1395172939",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-19T23:30:43Z"
    },
    {
      "event": "mentioned",
      "id": 1395194198,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM5NTE5NDE5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1395194198",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-19T23:51:23Z"
    },
    {
      "event": "subscribed",
      "id": 1395194199,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzOTUxOTQxOTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1395194199",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-19T23:51:23Z"
    },
    {
      "event": "commented",
      "id": 352923698,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjkyMzY5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/352923698",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-20T00:01:25Z",
      "updated_at": "2017-12-20T00:01:48Z",
      "author_association": "MEMBER",
      "body": "Squash *Make sure WalletRescanReserver has successfully reserved the rescan*  into *Add RAII wallet rescan reserver*?",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-352923698",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1395206932,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM5NTIwNjkzMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1395206932",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-20T00:03:42Z"
    },
    {
      "event": "subscribed",
      "id": 1395206934,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzOTUyMDY5MzQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1395206934",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-20T00:03:42Z"
    },
    {
      "event": "commented",
      "id": 353707688,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzcwNzY4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/353707688",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-23T05:11:27Z",
      "updated_at": "2017-12-23T05:11:27Z",
      "author_association": "MEMBER",
      "body": "Needs rebase. Also I believe still needs (at least) doc fixes to address @sipa's comments at https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157300953",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-353707688",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1400308362,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTQwMDMwODM2Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1400308362",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-23T05:11:27Z"
    },
    {
      "event": "subscribed",
      "id": 1400308363,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE0MDAzMDgzNjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1400308363",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-23T05:11:27Z"
    },
    {
      "event": "reviewed",
      "id": 84631656,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3ODQ2MzE2NTY=",
      "url": null,
      "actor": null,
      "commit_id": "22510c9a82b4b16f449cca7bf2b2197ad91dae52",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Needs rebase.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-84631656",
      "submitted_at": "2018-01-02T16:25:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1411950907,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTQxMTk1MDkwNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1411950907",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-05T20:44:28Z"
    },
    {
      "event": "commented",
      "id": 355660996,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTY2MDk5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355660996",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-05T20:46:00Z",
      "updated_at": "2018-01-05T20:46:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased and added a commit that adds mentioning of the concern reported by @sipa (https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157300953, other RPC calls may report keys as imported but related transactions are still not there because of the ongoing rescan)",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-355660996",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1411952890,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTQxMTk1Mjg5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1411952890",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-05T20:46:00Z"
    },
    {
      "event": "subscribed",
      "id": 1411952892,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE0MTE5NTI4OTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1411952892",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-05T20:46:00Z"
    },
    {
      "event": "reviewed",
      "id": 87495542,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3ODc0OTU1NDI=",
      "url": null,
      "actor": null,
      "commit_id": "b2cc7020956cfd36925e4957493cd28d1d6f672e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-87495542",
      "submitted_at": "2018-01-09T12:27:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "commented",
      "id": 357003325,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzAwMzMyNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/357003325",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-11T17:37:00Z",
      "updated_at": "2018-01-11T17:37:00Z",
      "author_association": "MEMBER",
      "body": "Needs rebase and to address @sipa's note. Personally I think just documenting the case is sufficient.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-357003325",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "mentioned",
      "id": 1420245739,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTQyMDI0NTczOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1420245739",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-11T17:37:00Z"
    },
    {
      "event": "subscribed",
      "id": 1420245741,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE0MjAyNDU3NDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1420245741",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-11T17:37:00Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1420444680,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTQyMDQ0NDY4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1420444680",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-11T19:29:13Z"
    },
    {
      "event": "commented",
      "id": 357035491,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzAzNTQ5MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/357035491",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-11T19:29:55Z",
      "updated_at": "2018-01-11T19:29:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased (non trivial).\r\nAnother review would help. Thanks",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-357035491",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "reviewed",
      "id": 88313390,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3ODgzMTMzOTA=",
      "url": null,
      "actor": null,
      "commit_id": "b5aaefb2d52ff0f81619147e949f5472501c8db9",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-88313390",
      "submitted_at": "2018-01-11T21:33:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1421161053,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTQyMTE2MTA1Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1421161053",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-12T06:21:41Z"
    },
    {
      "event": "reviewed",
      "id": 88691465,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3ODg2OTE0NjU=",
      "url": null,
      "actor": null,
      "commit_id": "e43105c17a7bc1ee31027722a093fcfbcb8833a9",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Aside from needing to add a similar warning message to rescanblockchain, utACK 0dad810adeb3bbb6a60b722240ee2b90136e8384. There are a bunch of comments here, but most of them can be addressed in a follow-up just fine.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-88691465",
      "submitted_at": "2018-01-14T19:23:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1424961323,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTQyNDk2MTMyMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1424961323",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-15T19:52:52Z"
    },
    {
      "event": "mentioned",
      "id": 1424968753,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTQyNDk2ODc1Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1424968753",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-15T19:58:35Z"
    },
    {
      "event": "subscribed",
      "id": 1424968754,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE0MjQ5Njg3NTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1424968754",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-15T19:58:35Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1424981038,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTQyNDk4MTAzOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1424981038",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-15T20:08:11Z"
    },
    {
      "event": "commented",
      "id": 359010967,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTAxMDk2Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/359010967",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-19T16:08:54Z",
      "updated_at": "2018-01-19T16:08:54Z",
      "author_association": "MEMBER",
      "body": "Not sure what exactly to test here, but at least I can confirm `bitcoin-cli abortrescan` still works and there's no noticeable difference in QT (I assume that's good).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-359010967",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "reviewed",
      "id": 90617498,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3OTA2MTc0OTg=",
      "url": null,
      "actor": null,
      "commit_id": "48a57eba3447f79672b2c12f1605b3a10becff33",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 7aeeb11a2e6fe2671973ef18f556dbaf32ad5f81. Would be nice to see this merged.\r\n\r\nI left various comments, and I think some of them are important enough that they should be followed up on, but this can happen in future PRs.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-90617498",
      "submitted_at": "2018-01-22T21:51:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ZDBiNjEwZmU4ZDA5MTY0MDRhYTkxNThjNTI1YjgwYjFjNTgxYzBl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8d0b610fe8d0916404aa9158c525b80b1c581c0e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8d0b610fe8d0916404aa9158c525b80b1c581c0e",
      "tree": {
        "sha": "7a6c2475b238cd1ee809bb2bf6fd98a52088adc7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7a6c2475b238cd1ee809bb2bf6fd98a52088adc7"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7a6c2475b238cd1ee809bb2bf6fd98a52088adc7\nparent 0910cbe4ef31eb95fd76c7c2f820419fe64a3150\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1504826999 -0700\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1516774953 -1000\n\nAvoid pemanent cs_main/cs_wallet lock during wallet rescans\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlpoJioACgkQHrd2uwPH\nki3mrRAAs/bpKjefR7BwFFXCUEQQW8eKjzmgSAOfvJnbuiVNhJEgs2D3wqo+iIR5\nRBxLiF/QD+Rg8FskAs8joPsvimshpLQjucnkNYTTtddbL3w9mVtx/IDG/8KxysXe\nqZ/xD3vegrxEt/BCncr9B4ZQugvbZolNG9Yq45WikGXpw1BFUwm97NcRVe0hOIZk\nyy9zOXnnQeUL/q9d0VHmsUShGHubUn6suy7/Zgz/dpj7EGaynCiO7/13FDboqnFu\n5Ddr7pwm8MmQthjZiDdaSKeCBAGl67aW9dlMqmyyIWIhA9JAmcJuiB3rU8S2R0Yc\nfhclCf4mBLKbEiajz+aRslgjYXVIB3Hs7Jt0A40F07Ej/aH3o0gk9mI5kVL9qMIK\nirCO8+TqCYoFaoA2UNeFgpUcpd5X8aTbol1g6Jaug+Rn7/uIvvaMc7vmefZzfHX+\nhxUIpiJVDmP9Iz1TgM9Neewifr4xTsvHSFrKuocWiO0T93PL3L3Jszhjubu25hiK\n5WphK7EtgL/uLm7KlGckALY6JYvcs+Guqg26kZAFjAdyAglgvnFBaD8XiuVDIux/\nTShmpEQh5EEc1Q9hhZVAly+VyAlJ3AzMJgbQ4lFTiefY2+E1JuYdITZ6yVZhVd50\nxndoNLjZRyKSacIZRSoLszFbYD9knF0Y5BdBA7B/LdXzLpj/Ong=\n=HOaz\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0910cbe4ef31eb95fd76c7c2f820419fe64a3150",
          "sha": "0910cbe4ef31eb95fd76c7c2f820419fe64a3150",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0910cbe4ef31eb95fd76c7c2f820419fe64a3150"
        }
      ],
      "message": "Avoid pemanent cs_main/cs_wallet lock during wallet rescans",
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2018-01-24T06:22:33Z"
      },
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-09-07T23:29:59Z"
      },
      "sha": "8d0b610fe8d0916404aa9158c525b80b1c581c0e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkYmY4NTU2YjRkNmEyNDg0YWQ0YzAzZDBiNGU0MWMxZGIwMTMzOTk3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dbf8556b4d6a2484ad4c03d0b4e41c1db0133997",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/dbf8556b4d6a2484ad4c03d0b4e41c1db0133997",
      "tree": {
        "sha": "c955e1bea937c2901267cdbc191bde93db725e22",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c955e1bea937c2901267cdbc191bde93db725e22"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c955e1bea937c2901267cdbc191bde93db725e22\nparent 8d0b610fe8d0916404aa9158c525b80b1c581c0e\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1512767257 -1000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1516775037 -1000\n\nAdd RAII wallet rescan reserver\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlpoJn0ACgkQHrd2uwPH\nki2fIw//V9J9XWWC2bhCNzT0KvrIZEUd/skK1kAteZO71WUjl4POK5fDqlLtqO7A\njNHPNS/wqM+ojkt5JxwV/Di1oMYrCUveSAEDSkCDtzF8YbyIqOgvyssrXuN2WCUE\norulMb2RnpOIF1pRNvUo5YSWKocGhDkWhua1Kig/bIlOfUFYTt4TRF5ef6pWZx5j\nlE9cVYPheJwvg+LATbqbq3eCoAHlxAkRj+si+6udzvRqVUsBoICWaKQENusVtgaK\n1nNcSUunqQzBXLoMdMrS4/8p7izb9B7dciXkyDHM8ktf6g44tYr5+otsUZN5y5FE\nNYJbTy14xg8CuXR1lNiwnTik3tW7J4Od8C1n7fgdzq2DvjBx8m30I/rYafCn+1TN\n76rn2NUCdUumvRgGtUAiN3w9oXGTdaBUv8zLwAmmPWW5UwLZvsROV+5P2/c3HFlY\n0d6BNT5BMQCM33IeiKVy+4NRb0aTVTD2HhjOFAsqEjFqnY6m2LJ95aSsczU0eNMB\nKW0yw5EQI2Ly1OgIytyHJVIIZPqArrwduOuUPTXx82nbNnaapNS3axAGTeUEFEju\n8JJVLuhWdSOaRQEUFUVFX2ntkIhvIv5P6LlNAl1Ur4sa3e+dCDG/7uaYHSQ2dMIk\nYtd82FtMtCwCKE2HDRBp7MP3PQgIFXzlEc1INJRhtWD/SnLx8R8=\n=418/\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8d0b610fe8d0916404aa9158c525b80b1c581c0e",
          "sha": "8d0b610fe8d0916404aa9158c525b80b1c581c0e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8d0b610fe8d0916404aa9158c525b80b1c581c0e"
        }
      ],
      "message": "Add RAII wallet rescan reserver",
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2018-01-24T06:23:57Z"
      },
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-12-08T21:07:37Z"
      },
      "sha": "dbf8556b4d6a2484ad4c03d0b4e41c1db0133997"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiYzM1NmI0MjY4ZTIyMmFjNTdkOWU5Mjk3ZDJhOTg2YmI2ZTA5ZGU4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bc356b4268e222ac57d9e9297d2a986bb6e09de8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bc356b4268e222ac57d9e9297d2a986bb6e09de8",
      "tree": {
        "sha": "994c99623c3b7aa10e367d5d3e02451da2025d38",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/994c99623c3b7aa10e367d5d3e02451da2025d38"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 994c99623c3b7aa10e367d5d3e02451da2025d38\nparent dbf8556b4d6a2484ad4c03d0b4e41c1db0133997\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1513120438 -1000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1516775058 -1000\n\nMake sure WalletRescanReserver has successfully reserved the rescan\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlpoJpMACgkQHrd2uwPH\nki3zBQ/+KCo6hXjrQz9FaxDeH8brDJDQNADy1eh6mCRIPY+EvXFJwRZ7dLl0ivVG\nszcmJ8B1gcE3mnb3LKt9VgHsfWT+bWidPzZX331xda6uVLmr2Z5Xkvdikr/XL8/B\n+wX7t1h+K9pudtQmMNko3cI8Dc8hVs03YL37wc+yNhyefUSmnPPwkdAs8CBg1DcW\nGh4VPO91ilCERhsmYkRQo2pXw0AxZmVwzXHiOAQ4QdSxRZ6SjmlhRPoVRAuLHiT4\n9IxCcp7Ui0gbV+jMCouGSSkED5d3e4jadliR2aZ9XBPa1WnAeYstVzcan+ZHgBdb\nztTZWKCpzJzkHvUgVWtRTuN36KWTgETlNWbsU84OKBFbG1ZL2d+wbYNQGe9D+BuM\nAiJ/fuqx5RNnENy3KU4RB8Abi2yjZhtbcPPfGYyH346Wo6wley1f9zKijSoYoKov\nayV6ZgV4YZhaciZf9twccSdinCcaF7x6cVeQ63DJpWJsi+12k65j55Mem1QP31iE\nb1suhQmKQc8O7BCtv8n39cMiOWNtt0jiZ0/EGxla0Bt2ea8aaWrLl3gw1steko4L\nWyULcVJRAJJym5AmKQQ1FlOLTGkGFLn7NyDl3ujWXDxAOQEuX6jUAEcCNsJKpGdP\nyTuMc0vfNrKiq8udAKixRlxV4QUR/75Pjl+Qjwj6JZIN6ivQT5s=\n=msFB\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dbf8556b4d6a2484ad4c03d0b4e41c1db0133997",
          "sha": "dbf8556b4d6a2484ad4c03d0b4e41c1db0133997",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/dbf8556b4d6a2484ad4c03d0b4e41c1db0133997"
        }
      ],
      "message": "Make sure WalletRescanReserver has successfully reserved the rescan",
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2018-01-24T06:24:18Z"
      },
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-12-12T23:13:58Z"
      },
      "sha": "bc356b4268e222ac57d9e9297d2a986bb6e09de8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjY2Q4ZWY2NWY5M2VkODJhODdjZWU2MzQ2NjBiZWQzYWMxN2Q5ZWI1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ccd8ef65f93ed82a87cee634660bed3ac17d9eb5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ccd8ef65f93ed82a87cee634660bed3ac17d9eb5",
      "tree": {
        "sha": "41ec340b182e8711b7b47a76e126f4a003396fc1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/41ec340b182e8711b7b47a76e126f4a003396fc1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 41ec340b182e8711b7b47a76e126f4a003396fc1\nparent bc356b4268e222ac57d9e9297d2a986bb6e09de8\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1513199211 -1000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1516775093 -1000\n\nReduce cs_main lock in ReadBlockFromDisk, only read GetBlockPos under the lock\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlpoJrUACgkQHrd2uwPH\nki0sQw/8D3qQ3vuJhNFCf3Q0EdCCzvoHFzjnC2DldwCUFsN/PuuAPhIPvQTvLr87\nXoUd7sVtC6C0x26Pmlxe8NLnd1BYiTVuscBMdqlGeNN4K4MmtF2AQGnQJwfDxfMC\ntZPviGs0vn94o5L5sm5ocEqvCBRGHjMqq09wFIWZRrOUiYiTi+IE5X1LQSZYJQeq\nS9wo5ieIWa7+iF9ItBQjQd7wal25cbNxHfGe8hsle0uV/+F3imNRs7IeqN+SzLcE\nF9N+x7t07ozXhiTKiflTLnakrMI+EGXJic+EyYXN68jyDTboUEu9102fyuzty1jL\nnvl2NDsSz1IWQagVVwgL6M8gbz6AsLwPW/KFFMKFcWcJbcWaso7KVPm3PUHphqBb\nUJqTL8AnuRCWULEZdSze0EWBg5q6LqVKJIqrpLduMHBDBq25vwpAq87bL38UfGfV\n8hnbyk7Q3MgyGQCyIn7Hx0S6/uxYSkLjmwg9jdKeLvLopGamlzPHxEeD4bSLQQoV\n7o4C47EhbvCvZvh824atKzMD80rbzlXvzkCbi+2YFdn3CfWuSMuKzz4XbOgzytiA\noqGhWeQWe2KGGAcwjPbyD+68D9iF63WM2lpcKgxXIZduClMSnqwrWSy8UY0MWALo\nJg4VYF39otC+A9BBYzV9T7Xu0vWMuUEWr5ZT8/jdmZ+W0tGJYvk=\n=/gfG\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bc356b4268e222ac57d9e9297d2a986bb6e09de8",
          "sha": "bc356b4268e222ac57d9e9297d2a986bb6e09de8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bc356b4268e222ac57d9e9297d2a986bb6e09de8"
        }
      ],
      "message": "Reduce cs_main lock in ReadBlockFromDisk, only read GetBlockPos under the lock",
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2018-01-24T06:24:53Z"
      },
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-12-13T21:06:51Z"
      },
      "sha": "ccd8ef65f93ed82a87cee634660bed3ac17d9eb5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3ZjgxMjUwMmI3OGI3NjY1M2JiZWYxOTE2OWU4YTA1ODczZWUzYjhk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7f812502b78b76653bbef19169e8a05873ee3b8d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7f812502b78b76653bbef19169e8a05873ee3b8d",
      "tree": {
        "sha": "1b981cf38d17087cbf496e6b6c99519250552e0d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1b981cf38d17087cbf496e6b6c99519250552e0d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1b981cf38d17087cbf496e6b6c99519250552e0d\nparent ccd8ef65f93ed82a87cee634660bed3ac17d9eb5\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1515185011 -1000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1516775093 -1000\n\nMention that other RPC calls report keys as \"imported\" while txns are still missing\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlpoJrUACgkQHrd2uwPH\nki2FkBAAkz/bVnKmJQdgu4MgBwxOPfOhuEEgtk4LquCjbyaJaBSWn2/Z8K4xV0cm\nBBrP7QNozEvx4ucas+2EF7hlBOpxOxNLmvv72uRRy0Gx2jqxrpjistxymBc6kUVm\ncPoFVlGoy4jp/ICrbJkuqBHtwu7R+rUUh0MKlDgx0DHSf+VdwdjAf+dZRjpMUu8X\n4Xbgyr6kkPV69n1iNAO/1GEuTV6Pw83QXPq99Gh7hatny1B4ANADEHNlr6oWj0Bh\ngjpnrfmEA6GVHwD+D6RMcSLjzxYXIMgSeMIcnmQhcDT7/3y3b8WneVlXWZBYxYf9\nBvImGXJ1q+g9zCa0k9Z9iQIThKGNbE9LTAMQvwKRFx5JLyWU/TxsgGW2n4E8r2EH\n2U5oCtd4m0lI3LJSW1JeXqx2zpqPkL/WoIZ2kCTelkuD4XRUV5UWrfPTCK2yhfdG\ncs/7GUMjHiaQN7IxyI7EeqpcN9SNLFoJcvGZpp8VcDpNDF/0+n/L3KFR8QrwsYk8\nXQmFEUnHNly0xZZU4bgBgHy7a6XbweSpAqRgQVgsljr6mOxeV7yFCSbxB0CZ5CIi\nMNw3L0Ec2xxM9YNLXCZTcKFVVFDKs3m6vblva3QR1y4feUolu5aDcNzPwM+9fxZT\n45fbuzjWhkTwsL2hLUKtBryAma01lNYqlLzy9We3irXmNEeloek=\n=72/a\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ccd8ef65f93ed82a87cee634660bed3ac17d9eb5",
          "sha": "ccd8ef65f93ed82a87cee634660bed3ac17d9eb5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ccd8ef65f93ed82a87cee634660bed3ac17d9eb5"
        }
      ],
      "message": "Mention that other RPC calls report keys as \"imported\" while txns are still missing",
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2018-01-24T06:24:53Z"
      },
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2018-01-05T20:43:31Z"
      },
      "sha": "7f812502b78b76653bbef19169e8a05873ee3b8d"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1438844689,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTQzODg0NDY4OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1438844689",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-24T06:25:05Z"
    },
    {
      "event": "mentioned",
      "id": 1438845705,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTQzODg0NTcwNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1438845705",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-24T06:26:08Z"
    },
    {
      "event": "subscribed",
      "id": 1438845706,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE0Mzg4NDU3MDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1438845706",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-24T06:26:08Z"
    },
    {
      "event": "mentioned",
      "id": 1439164278,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTQzOTE2NDI3OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1439164278",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-24T10:13:28Z"
    },
    {
      "event": "subscribed",
      "id": 1439164279,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE0MzkxNjQyNzk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1439164279",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-24T10:13:28Z"
    },
    {
      "event": "reviewed",
      "id": 91113017,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3OTExMTMwMTc=",
      "url": null,
      "actor": null,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Tested ACK 7f81250, some minor comments though.\r\n\r\nAgree with @ryanofsky, for 0.16 it should be merged rather sooner than later.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-91113017",
      "submitted_at": "2018-01-24T11:06:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "commented",
      "id": 360097489,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDA5NzQ4OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/360097489",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-24T11:07:31Z",
      "updated_at": "2018-01-24T11:07:31Z",
      "author_association": "MEMBER",
      "body": "Forgot to mention, it is still not possible to abort the rescan at initialisation time, I guess the goal is to not change that.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-360097489",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "commented",
      "id": 360106438,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDEwNjQzOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/360106438",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-24T11:47:19Z",
      "updated_at": "2018-01-24T11:54:33Z",
      "author_association": "MEMBER",
      "body": "> Forgot to mention, it is still not possible to abort the rescan at initialisation time, I guess the goal is to not change that.\r\n\r\nI don't think that's a goal here? Let's not extend the scope beyond what is in the OP.\r\n\r\nutACK 7f81250",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#issuecomment-360106438",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11281"
    },
    {
      "event": "merged",
      "id": 1439338606,
      "node_id": "MDExOk1lcmdlZEV2ZW50MTQzOTMzODYwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1439338606",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7f812502b78b76653bbef19169e8a05873ee3b8d",
      "created_at": "2018-01-24T11:57:21Z"
    },
    {
      "event": "closed",
      "id": 1439338608,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTQzOTMzODYwOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1439338608",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-24T11:57:21Z"
    },
    {
      "event": "referenced",
      "id": 1439339624,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0MzkzMzk2MjQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1439339624",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8470e64724cb4a668079e7516dc61ec230346618",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8470e64724cb4a668079e7516dc61ec230346618",
      "created_at": "2018-01-24T11:57:57Z"
    },
    {
      "event": "mentioned",
      "id": 1442289051,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTQ0MjI4OTA1MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1442289051",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-25T19:01:52Z"
    },
    {
      "event": "subscribed",
      "id": 1442289052,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE0NDIyODkwNTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1442289052",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-25T19:01:52Z"
    },
    {
      "event": "reviewed",
      "id": 91634643,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3OTE2MzQ2NDM=",
      "url": null,
      "actor": null,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-91634643",
      "submitted_at": "2018-01-25T19:01:52Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "mentioned",
      "id": 1442364213,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTQ0MjM2NDIxMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1442364213",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-25T19:43:39Z"
    },
    {
      "event": "subscribed",
      "id": 1442364214,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE0NDIzNjQyMTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1442364214",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-25T19:43:39Z"
    },
    {
      "event": "reviewed",
      "id": 91647861,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3OTE2NDc4NjE=",
      "url": null,
      "actor": null,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#pullrequestreview-91647861",
      "submitted_at": "2018-01-25T19:44:54Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
    },
    {
      "event": "referenced",
      "id": 1443735060,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NDM3MzUwNjA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1443735060",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d3b58f0cfb853aae3640bae7a833bbd58384cb7d",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/d3b58f0cfb853aae3640bae7a833bbd58384cb7d",
      "created_at": "2018-01-26T15:03:52Z"
    },
    {
      "event": "referenced",
      "id": 1443739344,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NDM3MzkzNDQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1443739344",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8add443be1c4b82f75d0eca4763fc928b8dbcf08",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/8add443be1c4b82f75d0eca4763fc928b8dbcf08",
      "created_at": "2018-01-26T15:05:56Z"
    },
    {
      "event": "removed_from_project",
      "id": 1446014181,
      "node_id": "MDIzOlJlbW92ZWRGcm9tUHJvamVjdEV2ZW50MTQ0NjAxNDE4MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1446014181",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-01-29T10:34:48Z",
      "project_card": {
        "id": 5877308,
        "url": "https://api.github.com/projects/columns/cards/5877308",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Blockers"
      }
    },
    {
      "event": "referenced",
      "id": 1471597242,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzE1OTcyNDI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1471597242",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f50e675e9ea37358478ec991115d99354c03c511",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/f50e675e9ea37358478ec991115d99354c03c511",
      "created_at": "2018-02-13T13:11:25Z"
    },
    {
      "event": "referenced",
      "id": 1471599518,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzE1OTk1MTg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1471599518",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5c910f31f7f737c21480277332c199be54bb6728",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/5c910f31f7f737c21480277332c199be54bb6728",
      "created_at": "2018-02-13T13:12:54Z"
    },
    {
      "event": "referenced",
      "id": 1471609001,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzE2MDkwMDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1471609001",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "34dd7b6edeb5388349340f8d6bf34da5f9ef4eaa",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/34dd7b6edeb5388349340f8d6bf34da5f9ef4eaa",
      "created_at": "2018-02-13T13:18:49Z"
    },
    {
      "event": "referenced",
      "id": 1471641314,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzE2NDEzMTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1471641314",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9c3ce7aed8de54e60b6d76b45c68910718a8e68c",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/9c3ce7aed8de54e60b6d76b45c68910718a8e68c",
      "created_at": "2018-02-13T13:37:32Z"
    },
    {
      "event": "referenced",
      "id": 1473229813,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzMyMjk4MTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1473229813",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "52f8a11978f5e9564c01ca0a9592bb0f8a4f71b1",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/52f8a11978f5e9564c01ca0a9592bb0f8a4f71b1",
      "created_at": "2018-02-14T07:47:41Z"
    },
    {
      "event": "referenced",
      "id": 1476104992,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzYxMDQ5OTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1476104992",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "1d4cbd26e4220982f7f2f60e447199d6f62ae254",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/1d4cbd26e4220982f7f2f60e447199d6f62ae254",
      "created_at": "2018-02-15T15:27:41Z"
    },
    {
      "event": "referenced",
      "id": 1476858150,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzY4NTgxNTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1476858150",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4d54e7ad413b0113402a4d9546eb510d21ba2ecd",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4d54e7ad413b0113402a4d9546eb510d21ba2ecd",
      "created_at": "2018-02-15T21:55:01Z"
    },
    {
      "event": "referenced",
      "id": 1488607398,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0ODg2MDczOTg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1488607398",
      "actor": {
        "login": "Willtech",
        "id": 1173622,
        "node_id": "MDQ6VXNlcjExNzM2MjI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1173622?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Willtech",
        "html_url": "https://github.com/Willtech",
        "followers_url": "https://api.github.com/users/Willtech/followers",
        "following_url": "https://api.github.com/users/Willtech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Willtech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Willtech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Willtech/subscriptions",
        "organizations_url": "https://api.github.com/users/Willtech/orgs",
        "repos_url": "https://api.github.com/users/Willtech/repos",
        "events_url": "https://api.github.com/users/Willtech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Willtech/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0a4ec00af812d7f96052e0e166a31275a2037341",
      "commit_url": "https://api.github.com/repos/Willtech/bitcoin/commits/0a4ec00af812d7f96052e0e166a31275a2037341",
      "created_at": "2018-02-23T08:19:11Z"
    },
    {
      "event": "referenced",
      "id": 1490645159,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0OTA2NDUxNTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1490645159",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "bf3353de90598f08a68d966c50b57ceaeb5b5d96",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bf3353de90598f08a68d966c50b57ceaeb5b5d96",
      "created_at": "2018-02-25T01:15:00Z"
    },
    {
      "event": "referenced",
      "id": 1525253132,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE1MjUyNTMxMzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1525253132",
      "actor": {
        "login": "HashUnlimited",
        "id": 26601261,
        "node_id": "MDQ6VXNlcjI2NjAxMjYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/26601261?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/HashUnlimited",
        "html_url": "https://github.com/HashUnlimited",
        "followers_url": "https://api.github.com/users/HashUnlimited/followers",
        "following_url": "https://api.github.com/users/HashUnlimited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/HashUnlimited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/HashUnlimited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/HashUnlimited/subscriptions",
        "organizations_url": "https://api.github.com/users/HashUnlimited/orgs",
        "repos_url": "https://api.github.com/users/HashUnlimited/repos",
        "events_url": "https://api.github.com/users/HashUnlimited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/HashUnlimited/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "deb02e491bc973ecd496356b2d3bca78b5396ab1",
      "commit_url": "https://api.github.com/repos/chaincoin/chaincoin/commits/deb02e491bc973ecd496356b2d3bca78b5396ab1",
      "created_at": "2018-03-16T10:50:53Z"
    },
    {
      "event": "referenced",
      "id": 1568958734,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE1Njg5NTg3MzQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1568958734",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "77a03151b56a56ddd09b886a8184bad594b317f1",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/77a03151b56a56ddd09b886a8184bad594b317f1",
      "created_at": "2018-04-11T15:58:12Z"
    },
    {
      "event": "referenced",
      "id": 1845874097,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE4NDU4NzQwOTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1845874097",
      "actor": {
        "login": "ccebrecos",
        "id": 19707527,
        "node_id": "MDQ6VXNlcjE5NzA3NTI3",
        "avatar_url": "https://avatars.githubusercontent.com/u/19707527?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ccebrecos",
        "html_url": "https://github.com/ccebrecos",
        "followers_url": "https://api.github.com/users/ccebrecos/followers",
        "following_url": "https://api.github.com/users/ccebrecos/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ccebrecos/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ccebrecos/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ccebrecos/subscriptions",
        "organizations_url": "https://api.github.com/users/ccebrecos/orgs",
        "repos_url": "https://api.github.com/users/ccebrecos/repos",
        "events_url": "https://api.github.com/users/ccebrecos/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ccebrecos/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2ecd9297ddcbc52ba8bab59c3b3ea6d1767a085d",
      "commit_url": "https://api.github.com/repos/BTCAssessors/bitcoin/commits/2ecd9297ddcbc52ba8bab59c3b3ea6d1767a085d",
      "created_at": "2018-09-14T11:23:14Z"
    },
    {
      "event": "referenced",
      "id": 1950512560,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE5NTA1MTI1NjA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1950512560",
      "actor": {
        "login": "lionello",
        "id": 591860,
        "node_id": "MDQ6VXNlcjU5MTg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/591860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lionello",
        "html_url": "https://github.com/lionello",
        "followers_url": "https://api.github.com/users/lionello/followers",
        "following_url": "https://api.github.com/users/lionello/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lionello/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lionello/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lionello/subscriptions",
        "organizations_url": "https://api.github.com/users/lionello/orgs",
        "repos_url": "https://api.github.com/users/lionello/repos",
        "events_url": "https://api.github.com/users/lionello/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lionello/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3b40394c9d570e020743531da07bdede09641243",
      "commit_url": "https://api.github.com/repos/enumatech/bitcoin/commits/3b40394c9d570e020743531da07bdede09641243",
      "created_at": "2018-11-07T01:10:58Z"
    },
    {
      "event": "referenced",
      "id": 3225708551,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMyMjU3MDg1NTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3225708551",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ea808be82d8af97a71a994cc20b2d149b0acb1cf",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/ea808be82d8af97a71a994cc20b2d149b0acb1cf",
      "created_at": "2020-04-13T02:06:25Z"
    },
    {
      "event": "referenced",
      "id": 3230399196,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMyMzAzOTkxOTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3230399196",
      "actor": {
        "login": "UdjinM6",
        "id": 1935069,
        "node_id": "MDQ6VXNlcjE5MzUwNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1935069?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/UdjinM6",
        "html_url": "https://github.com/UdjinM6",
        "followers_url": "https://api.github.com/users/UdjinM6/followers",
        "following_url": "https://api.github.com/users/UdjinM6/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/UdjinM6/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/UdjinM6/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/UdjinM6/subscriptions",
        "organizations_url": "https://api.github.com/users/UdjinM6/orgs",
        "repos_url": "https://api.github.com/users/UdjinM6/repos",
        "events_url": "https://api.github.com/users/UdjinM6/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/UdjinM6/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8ade2f79579df5d31daac582046d313c5e64f8b2",
      "commit_url": "https://api.github.com/repos/dashpay/dash/commits/8ade2f79579df5d31daac582046d313c5e64f8b2",
      "created_at": "2020-04-14T10:01:11Z"
    },
    {
      "event": "referenced",
      "id": 3422918413,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0MjI5MTg0MTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3422918413",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6b43c67c05cebda3353ae45edc18093538d9d6e0",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/6b43c67c05cebda3353ae45edc18093538d9d6e0",
      "created_at": "2020-06-09T04:02:33Z"
    },
    {
      "event": "referenced",
      "id": 3422918882,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0MjI5MTg4ODI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3422918882",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0ad89acaeebb6eef4d5f7753c8aedd7896174049",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/0ad89acaeebb6eef4d5f7753c8aedd7896174049",
      "created_at": "2020-06-09T04:02:48Z"
    },
    {
      "event": "referenced",
      "id": 3431586790,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0MzE1ODY3OTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3431586790",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3773cad14d769e7179d285c6e9f440d54a855595",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/3773cad14d769e7179d285c6e9f440d54a855595",
      "created_at": "2020-06-10T21:46:52Z"
    },
    {
      "event": "referenced",
      "id": 3431617213,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0MzE2MTcyMTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3431617213",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "31a01211c16730cf91750161043c67f329dc5c0f",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/31a01211c16730cf91750161043c67f329dc5c0f",
      "created_at": "2020-06-10T21:58:06Z"
    },
    {
      "event": "referenced",
      "id": 3431958787,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0MzE5NTg3ODc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3431958787",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "fe6b44d22871423a703374473b8c06c82a103f93",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/fe6b44d22871423a703374473b8c06c82a103f93",
      "created_at": "2020-06-11T00:42:10Z"
    },
    {
      "event": "referenced",
      "id": 3434828044,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0MzQ4MjgwNDQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3434828044",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f1ccbca7e3543cd56f143cc540f64feec5bddc49",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/f1ccbca7e3543cd56f143cc540f64feec5bddc49",
      "created_at": "2020-06-11T15:56:29Z"
    },
    {
      "event": "referenced",
      "id": 4247174516,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQyNDcxNzQ1MTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4247174516",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "62f1a5b115f043a1583849a313b195f05ec602cd",
      "commit_url": "https://api.github.com/repos/martinus/bitcoin/commits/62f1a5b115f043a1583849a313b195f05ec602cd",
      "created_at": "2021-01-25T18:48:11Z"
    },
    {
      "event": "referenced",
      "id": 4249182119,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQyNDkxODIxMTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4249182119",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ab79038ef9ba44a563de8db53ab375d5e1905804",
      "commit_url": "https://api.github.com/repos/martinus/bitcoin/commits/ab79038ef9ba44a563de8db53ab375d5e1905804",
      "created_at": "2021-01-26T06:56:31Z"
    },
    {
      "event": "referenced",
      "id": 4268915682,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQyNjg5MTU2ODI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4268915682",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5fece5bdb6557c67c642c6f33f24e5edfdb5438b",
      "commit_url": "https://api.github.com/repos/martinus/bitcoin/commits/5fece5bdb6557c67c642c6f33f24e5edfdb5438b",
      "created_at": "2021-01-30T08:41:47Z"
    },
    {
      "event": "referenced",
      "id": 4327596700,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQzMjc1OTY3MDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4327596700",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "95dccd1ad90777082c6111278cafb653e34c9036",
      "commit_url": "https://api.github.com/repos/martinus/bitcoin/commits/95dccd1ad90777082c6111278cafb653e34c9036",
      "created_at": "2021-02-13T09:05:03Z"
    },
    {
      "event": "referenced",
      "id": 4329031326,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQzMjkwMzEzMjY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4329031326",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4723c0c45a524ca079c5ab8e3d39cac30d8c39a8",
      "commit_url": "https://api.github.com/repos/martinus/bitcoin/commits/4723c0c45a524ca079c5ab8e3d39cac30d8c39a8",
      "created_at": "2021-02-14T19:18:24Z"
    },
    {
      "event": "referenced",
      "id": 4329032779,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQzMjkwMzI3Nzk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4329032779",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d440918214b2bde664cd0ca1230a082559fc0296",
      "commit_url": "https://api.github.com/repos/martinus/bitcoin/commits/d440918214b2bde664cd0ca1230a082559fc0296",
      "created_at": "2021-02-14T19:20:19Z"
    },
    {
      "event": "referenced",
      "id": 4517982335,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1MTc5ODIzMzU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4517982335",
      "actor": {
        "login": "ckti",
        "id": 7046769,
        "node_id": "MDQ6VXNlcjcwNDY3Njk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7046769?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ckti",
        "html_url": "https://github.com/ckti",
        "followers_url": "https://api.github.com/users/ckti/followers",
        "following_url": "https://api.github.com/users/ckti/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ckti/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ckti/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ckti/subscriptions",
        "organizations_url": "https://api.github.com/users/ckti/orgs",
        "repos_url": "https://api.github.com/users/ckti/repos",
        "events_url": "https://api.github.com/users/ckti/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ckti/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "448bc956f65f6b7d4115b2d0dd4df22fd559df65",
      "commit_url": "https://api.github.com/repos/ckti-ioncore-current/ion/commits/448bc956f65f6b7d4115b2d0dd4df22fd559df65",
      "created_at": "2021-03-28T10:03:21Z"
    },
    {
      "event": "referenced",
      "id": 4588748480,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1ODg3NDg0ODA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4588748480",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "169260c6aa51b37ded1a3767ce23eb77780244d9",
      "commit_url": "https://api.github.com/repos/PIVX-Project/PIVX/commits/169260c6aa51b37ded1a3767ce23eb77780244d9",
      "created_at": "2021-04-13T15:21:37Z"
    },
    {
      "event": "referenced",
      "id": 4962428299,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ5NjI0MjgyOTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4962428299",
      "actor": {
        "login": "gades",
        "id": 4200730,
        "node_id": "MDQ6VXNlcjQyMDA3MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4200730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gades",
        "html_url": "https://github.com/gades",
        "followers_url": "https://api.github.com/users/gades/followers",
        "following_url": "https://api.github.com/users/gades/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gades/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gades/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gades/subscriptions",
        "organizations_url": "https://api.github.com/users/gades/orgs",
        "repos_url": "https://api.github.com/users/gades/repos",
        "events_url": "https://api.github.com/users/gades/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gades/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d0be641481da0b36af310191db8255c2f07dc727",
      "commit_url": "https://api.github.com/repos/cosanta/cosanta-core/commits/d0be641481da0b36af310191db8255c2f07dc727",
      "created_at": "2021-06-30T22:39:52Z"
    },
    {
      "event": "locked",
      "id": 5271698849,
      "node_id": "LOE_lADOABII584PQ8tAzwAAAAE6N72h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271698849",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T11:32:13Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/138222877",
      "pull_request_review_id": 61989731,
      "id": 138222877,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzODIyMjg3Nw==",
      "diff_hunk": "@@ -1529,14 +1529,15 @@ void CWalletTx::GetAmounts(std::list<COutputEntry>& listReceived,\n  */\n int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n {\n-    AssertLockHeld(cs_main);\n-    AssertLockHeld(cs_wallet);\n-\n     // Find starting block. May be null if nCreateTime is greater than the\n     // highest blockchain timestamp, in which case there is nothing that needs\n     // to be scanned.\n-    CBlockIndex* const startBlock = chainActive.FindEarliestAtLeast(startTime - TIMESTAMP_WINDOW);\n-    LogPrintf(\"%s: Rescanning last %i blocks\\n\", __func__, startBlock ? chainActive.Height() - startBlock->nHeight + 1 : 0);\n+    CBlockIndex* startBlock = nullptr;\n+    {\n+        LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "4c1f082b991d872ee7b5507e15ee19eb328ab1d9",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What needs cs_wallet here?",
      "created_at": "2017-09-12T00:01:47Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r138222877",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/138222877"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1537,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/138223641",
      "pull_request_review_id": 61989731,
      "id": 138223641,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzODIyMzY0MQ==",
      "diff_hunk": "@@ -1564,13 +1565,18 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        double dProgressStart = 0;\n+        double dProgressTip = 0;\n+        {\n+            LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "4c1f082b991d872ee7b5507e15ee19eb328ab1d9",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What needs cs_wallet here?",
      "created_at": "2017-09-12T00:07:36Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r138223641",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/138223641"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1575,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/138224114",
      "pull_request_review_id": 61989731,
      "id": 138224114,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzODIyNDExNA==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": 87,
      "original_position": 47,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "4c1f082b991d872ee7b5507e15ee19eb328ab1d9",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What needs cs_main here?",
      "created_at": "2017-09-12T00:11:31Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r138224114",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/138224114"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1694,
      "original_line": 1694,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/138224151",
      "pull_request_review_id": 61989731,
      "id": 138224151,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzODIyNDE1MQ==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK2(cs_main, cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 56,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "4c1f082b991d872ee7b5507e15ee19eb328ab1d9",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What needs cs_wallet here?",
      "created_at": "2017-09-12T00:11:43Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r138224151",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/138224151"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1704,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139549239",
      "pull_request_review_id": 63497928,
      "id": 139549239,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzOTU0OTIzOQ==",
      "diff_hunk": "@@ -1564,13 +1565,18 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        double dProgressStart = 0;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Only `chainActive.Tip()` needs the lock? So keep old code and:\r\n```cpp\r\nCBlockIndex* tip = nullptr;\r\n{\r\n    LOCK(cs_main);\r\n    tip = chainActive.Tip();\r\n}\r\n\r\ndouble dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\r\ndouble dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);\r\n```",
      "created_at": "2017-09-18T21:46:42Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r139549239",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139549239"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1572,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139549593",
      "pull_request_review_id": 63497928,
      "id": 139549593,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzOTU0OTU5Mw==",
      "diff_hunk": "@@ -1564,13 +1565,18 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        double dProgressStart = 0;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139549239,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "BTW, this patch allows the tip to be update so `dProgressTip` should be inside the loop?",
      "created_at": "2017-09-18T21:48:30Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r139549593",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139549593"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1572,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139829712",
      "pull_request_review_id": 63816742,
      "id": 139829712,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzOTgyOTcxMg==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What if there's a reorg between iterations?\r\n\r\nDoes anything weird happen if we (for ex): begin scanning, receive a new best block with our tx from p2p, then re-scan here?\r\n\r\nSeems to me that we should take a copy of ChainActive, traverse, compare to progress to chainActive.Tip(), and repeat until they match. Something like (just a quick sketch, probably broken):\r\n```c++\r\nCBlockIndex* pindex = pindexStart;\r\nCChain chain;\r\nwhile (!fAbortRescan) {\r\n    {\r\n        LOCK(cs_main);\r\n        if (pindex == chainActive.Tip()) {\r\n            break;\r\n        }\r\n        chain.SetTip(chainActive.Tip());\r\n    }\r\n    if (pindex) {\r\n        // start where we left off.\r\n        const CBlockIndex* fork = chain.FindFork(pindex);\r\n        if (fork != pindex) {\r\n            // Need to undo the orphans.\r\n        }\r\n        pindex = chain.Next(fork);\r\n    }\r\n    while(!fAbortRescan && pindex) {\r\n        /*\r\n        do stuff\r\n        ...\r\n        pindex = chain.Next(pindex);\r\n        */\r\n    }\r\n    pindex = chain.Tip();\r\n}\r\n```\r\nThat almost entirely avoids locking cs_main, while ensuring that we're never jumping chains.\r\n\r\nIt could also be done with just the pindex and GetAncestor(), to skip the memory overhead of the second chain copy.",
      "created_at": "2017-09-19T22:00:18Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r139829712",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139829712"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140407028",
      "pull_request_review_id": 64476586,
      "id": 140407028,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MDQwNzAyOA==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139829712,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm not sure if this is really a problem. During rescans, IMO it won't hurt to scan an orphaned block nor does it hurt if you do not scan up to the tip in case you have connected new blocks during the time of re-scanning. This, because those new blocks must also have been scanned by the wallet logic (outside of `ScanForWalletTransactions`).",
      "created_at": "2017-09-22T03:44:53Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r140407028",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140407028"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151390218",
      "pull_request_review_id": 77087996,
      "id": 151390218,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MTM5MDIxOA==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139829712,
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If a reorg happens during rescan, we want to continue rescanning using the current chain, not the outdated one.\r\n\r\n> This, because those new blocks must also have been scanned by the wallet logic (outside of ScanForWalletTransactions).\r\n\r\nIndeed.\r\n... I think it works out like this. Though @theuni does put a good point.\r\n",
      "created_at": "2017-11-16T11:39:30Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r151390218",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151390218"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153220818",
      "pull_request_review_id": 79194980,
      "id": 153220818,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MzIyMDgxOA==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139829712,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe break the rescan as soon as possible if the above tip is not in the current chain? Then add here:\r\n```cpp\r\nif (!chainActive.Contains(tip)) break;\r\n```",
      "created_at": "2017-11-27T15:03:26Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r153220818",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153220818"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153601338",
      "pull_request_review_id": 79631510,
      "id": 153601338,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MzYwMTMzOA==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139829712,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In case of a reorg, wouldn't `chainActive.Next(pindex);` return a `nullptr` leading to stop the scan, which should be totally fine. During the reorg, the blocks of the new chain must have been scanned by the wallet via ConnectBlock.",
      "created_at": "2017-11-28T19:40:48Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r153601338",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153601338"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153603479",
      "pull_request_review_id": 79634026,
      "id": 153603479,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MzYwMzQ3OQ==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139829712,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes that's true when pindex is not in the chain. But if any later block is not in the chain, why keep rescanning?",
      "created_at": "2017-11-28T19:48:40Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r153603479",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153603479"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153608512",
      "pull_request_review_id": 79639661,
      "id": 153608512,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MzYwODUxMg==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139829712,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It should be detected during the next `chainActive.Next(pindex);` which, in case we had a fork between the last `chainActive.Next(pindex);` we would only scan max 1 block... also very unlikely IMO.",
      "created_at": "2017-11-28T20:07:02Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r153608512",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153608512"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153662484",
      "pull_request_review_id": 79701730,
      "id": 153662484,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MzY2MjQ4NA==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139829712,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Suppose the following:\r\n - `A B C D E F G H I J` - chain to rescan, tip = J\r\n - `(A) B C D E F G H I J` - scanning block A\r\n - `A (B) C D E F G H I J` - scanning block B\r\n - `A (B) C D E F G H K L M` - scanning block B, reorg after H\r\n\r\nShould only rescan to H inclusive? Agree it's an edge case.\r\n\r\nBTW, if the tip changes `dProgressTip` could be updated?",
      "created_at": "2017-11-29T00:17:23Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r153662484",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153662484"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154672170",
      "pull_request_review_id": 80868458,
      "id": 154672170,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NDY3MjE3MA==",
      "diff_hunk": "@@ -1651,13 +1652,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n+        CBlockIndex* tip = nullptr;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+        }\n         double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 37,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "fbca42a021342580fa8f4de12c55f941ba521ad6",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "GuessVerificationProcess needs cs_main (probably best to lock cs_main in GuessVerificationProcess).",
      "created_at": "2017-12-04T15:01:54Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r154672170",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154672170"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1665,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154675029",
      "pull_request_review_id": 80868458,
      "id": 154675029,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NDY3NTAyOQ==",
      "diff_hunk": "@@ -1669,6 +1674,7 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "fbca42a021342580fa8f4de12c55f941ba521ad6",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "(one line up) ReadBlockFromDisk in CBlockIndex* form requires cs_main.",
      "created_at": "2017-12-04T15:11:32Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r154675029",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154675029"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1693,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154681446",
      "pull_request_review_id": 80868458,
      "id": 154681446,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NDY4MTQ0Ng==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139829712,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yea, I think there is a real issue here. I (believe) it could be fixed by doing the AddToWalletIfInvolvingMe inside a cs_main (which is going to be at least mostly required since ReadBlockFromDisk requires cs_main) with a chainActive.Contains() check before doing the AddToWalletIfInvolvingMe. That should put us back to the original state of anything we add to the wallet is on the main chain and, thus, will either be Disconnected then Connected in the callbacks, only Connected, or not included in a callback at all.",
      "created_at": "2017-12-04T15:32:23Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r154681446",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154681446"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154683955",
      "pull_request_review_id": 80868458,
      "id": 154683955,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NDY4Mzk1NQ==",
      "diff_hunk": "@@ -428,6 +432,10 @@ UniValue importpubkey(const JSONRPCRequest& request)\n     if (fRescan && fPruneMode)\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n+    if (fRescan && pwallet->IsScanning()) {",
      "path": "src/wallet/rpcdump.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "d859779cd012571709ea364ba2480129bea8f399",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is very race-y. You could check check this, have another thread call rescan, and then end up with two parallell rescans.",
      "created_at": "2017-12-04T15:40:38Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r154683955",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154683955"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 435,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155161367",
      "pull_request_review_id": 81433007,
      "id": 155161367,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NTE2MTM2Nw==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139829712,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I still don't fully understand the concerns (please help me).\r\n\r\n* If there is a reorg, all blocks of the new chain will be scanned by the wallet via ConnectBlock (no need to rescan again, we only need to rescan the stuff that doesn't come in via Connect/Disconnect block).\r\n* If we scan blocks that are no longer in the main-chain, and we could find a transaction in those blocks that is relevant to our wallet, so be it. The wallet does display such transactions as unconfirmed... same as we would have a reorg outside of the rescan process.",
      "created_at": "2017-12-06T07:22:05Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r155161367",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155161367"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155326447",
      "pull_request_review_id": 81628083,
      "id": 155326447,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NTMyNjQ0Nw==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139829712,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Heh, sorry, I didnt fully specify my concern because I thought the above discussion did, but I dont think the above comments are correct. As you point out, I do not believe there is a race where you simply miss transactions. However, there is a race where you may end up marking a transaction as in the wrong block:\r\n\r\nA -> B -> ....\r\n    -> C -> ...\r\n\r\nBoth B and C have the transaction you're interested in.\r\n\r\nYou go to load block B from a rescan, but it has already been reorg'd and the notificatitons for disconnect(B) and connect(C) have already fired. Thus, you have the transaction marked as in block C, which is correct, but then you finish rescanning and mark the transaction as in block B, which now makes you think the transaction has been conflicted and has negative GetDepthInMainChain.\r\n\r\nAs I mentioned, this is most simply fixed by adding a \"LOCK(cs_main); if (!chainActive.Contains(pindex)) break;\" outside the AddToWalletIfInvolvingMe loop.",
      "created_at": "2017-12-06T18:50:33Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r155326447",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155326447"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156484165",
      "pull_request_review_id": 82968766,
      "id": 156484165,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NjQ4NDE2NQ==",
      "diff_hunk": "@@ -1703,6 +1703,7 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n             {\n                 LOCK(cs_main);\n                 pindex = chainActive.Next(pindex);\n+                if (pindex && !chainActive.Contains(pindex)) break;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "8f0e976df202a81f2ba37b6276f75e279c3e65ed",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This check needs to be inside a LOCK2(cs_main, cs_wallet) in the same block as AddToWalletIfInvolvingMe.",
      "created_at": "2017-12-12T20:18:59Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156484165",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156484165"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1708,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156518016",
      "pull_request_review_id": 83009402,
      "id": 156518016,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NjUxODAxNg==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK(cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 57,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "1d367effa8e7a19303ae46a6b871084cbaaf5a0a",
      "in_reply_to_id": 139829712,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed",
      "created_at": "2017-12-12T22:45:12Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156518016",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156518016"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156776358",
      "pull_request_review_id": 83310456,
      "id": 156776358,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1Njc3NjM1OA==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK2(cs_main, cs_wallet);\n                 for (size_t posInBlock = 0; posInBlock < block.vtx.size(); ++posInBlock) {\n                     AddToWalletIfInvolvingMe(block.vtx[posInBlock], pindex, posInBlock, fUpdate);\n                 }\n             } else {\n                 ret = pindex;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 56,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "4c1f082b991d872ee7b5507e15ee19eb328ab1d9",
      "in_reply_to_id": 138224151,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed",
      "created_at": "2017-12-13T20:41:29Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156776358",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156776358"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1704,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156776403",
      "pull_request_review_id": 83310507,
      "id": 156776403,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1Njc3NjQwMw==",
      "diff_hunk": "@@ -1703,6 +1703,7 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n             {\n                 LOCK(cs_main);\n                 pindex = chainActive.Next(pindex);\n+                if (pindex && !chainActive.Contains(pindex)) break;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "8f0e976df202a81f2ba37b6276f75e279c3e65ed",
      "in_reply_to_id": 156484165,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2017-12-13T20:41:39Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156776403",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156776403"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1708,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156808534",
      "pull_request_review_id": 83346623,
      "id": 156808534,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NjgwODUzNA==",
      "diff_hunk": "@@ -1684,7 +1697,15 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n             if (pindex == pindexStop) {\n                 break;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);\n+                if (pindex && !chainActive.Contains(pindex)) break;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "ff547097b369fbd3aceb7216d6325df194af4a97",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This line is a noop - chainActive.Next() is never going to return something non-nullptr that isn't on the best chain.",
      "created_at": "2017-12-13T22:47:32Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156808534",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156808534"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1703,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156810727",
      "pull_request_review_id": 83346623,
      "id": 156810727,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NjgxMDcyNw==",
      "diff_hunk": "@@ -1645,36 +1646,48 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n  */\n-CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, bool fUpdate)\n+CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, const WalletRescanReserver &reserver, bool fUpdate)\n {\n     int64_t nNow = GetTime();\n     const CChainParams& chainParams = Params();\n \n+    assert(reserver.isReserved());\n     if (pindexStop) {\n         assert(pindexStop->nHeight >= pindexStart->nHeight);\n     }\n \n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);\n+        }\n         while (pindex && !fAbortRescan)\n         {\n-            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0)\n+            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0) {\n+                LOCK(cs_main);\n                 ShowProgress(_(\"Rescanning...\"), std::max(1, std::min(99, (int)((GuessVerificationProgress(chainParams.TxData(), pindex) - dProgressStart) / (dProgressTip - dProgressStart) * 100))));\n+            }\n             if (GetTime() >= nNow + 60) {\n                 nNow = GetTime();\n+                LOCK(cs_main);\n                 LogPrintf(\"Still rescanning. At block %d. Progress=%f\\n\", pindex->nHeight, GuessVerificationProgress(chainParams.TxData(), pindex));\n             }\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK2(cs_main, cs_wallet);\n+                if (pindex && !chainActive.Contains(pindex)) break;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 78,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "ff547097b369fbd3aceb7216d6325df194af4a97",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There is a weird case here that I think should be documented - something in the description of ScanForWalletTransactions should mention that, in order to ensure scan is \"successful\", pindex *must* have been/be on the main chain at some point after the addition of any keys which we want to rescan for.",
      "created_at": "2017-12-13T22:58:12Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156810727",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156810727"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1691,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156811137",
      "pull_request_review_id": 83346623,
      "id": 156811137,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NjgxMTEzNw==",
      "diff_hunk": "@@ -3376,30 +3376,39 @@ UniValue rescanblockchain(const JSONRPCRequest& request)\n             );\n     }\n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    WalletRescanReserver reserver(pwallet);\n+    if (!reserver.reserve()) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet is currently rescanning. Abort existing rescan or wait.\");\n+    }\n \n-    CBlockIndex *pindexStart = chainActive.Genesis();\n+    CBlockIndex *pindexStart = nullptr;\n     CBlockIndex *pindexStop = nullptr;\n-    if (!request.params[0].isNull()) {\n-        pindexStart = chainActive[request.params[0].get_int()];\n-        if (!pindexStart) {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid start_height\");\n-        }\n-    }\n+    CBlockIndex *pChainTip = nullptr;\n+    {",
      "path": "src/wallet/rpcwallet.cpp",
      "position": 20,
      "original_position": 20,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "ff547097b369fbd3aceb7216d6325df194af4a97",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you meant to put a LOCK(cs_main) at the top of this scope?",
      "created_at": "2017-12-13T23:00:07Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156811137",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156811137"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3409,
      "original_line": 3409,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156811507",
      "pull_request_review_id": 83346623,
      "id": 156811507,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NjgxMTUwNw==",
      "diff_hunk": "@@ -1684,7 +1697,15 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n             if (pindex == pindexStop) {\n                 break;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);\n+                if (pindex && !chainActive.Contains(pindex)) break;\n+                if (tip != chainActive.Tip()) {\n+                    // in case the tip has changed, update progress max\n+                    dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "ff547097b369fbd3aceb7216d6325df194af4a97",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "err, didnt you mean to set tip to chainActive.Tip() first?",
      "created_at": "2017-12-13T23:02:00Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156811507",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156811507"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1716,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156814899",
      "pull_request_review_id": 83354105,
      "id": 156814899,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NjgxNDg5OQ==",
      "diff_hunk": "@@ -1684,7 +1697,15 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n             if (pindex == pindexStop) {\n                 break;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);\n+                if (pindex && !chainActive.Contains(pindex)) break;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "ff547097b369fbd3aceb7216d6325df194af4a97",
      "in_reply_to_id": 156808534,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oops. This is a rebase issue, ... removing this line now.",
      "created_at": "2017-12-13T23:20:51Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156814899",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156814899"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1703,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156818774",
      "pull_request_review_id": 83358521,
      "id": 156818774,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NjgxODc3NA==",
      "diff_hunk": "@@ -1684,7 +1697,15 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n             if (pindex == pindexStop) {\n                 break;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);\n+                if (pindex && !chainActive.Contains(pindex)) break;\n+                if (tip != chainActive.Tip()) {\n+                    // in case the tip has changed, update progress max\n+                    dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "ff547097b369fbd3aceb7216d6325df194af4a97",
      "in_reply_to_id": 156811507,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Argh. Thanks. Fixed.",
      "created_at": "2017-12-13T23:44:00Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156818774",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156818774"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1716,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156818904",
      "pull_request_review_id": 83358635,
      "id": 156818904,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NjgxODkwNA==",
      "diff_hunk": "@@ -3376,30 +3376,39 @@ UniValue rescanblockchain(const JSONRPCRequest& request)\n             );\n     }\n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    WalletRescanReserver reserver(pwallet);\n+    if (!reserver.reserve()) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet is currently rescanning. Abort existing rescan or wait.\");\n+    }\n \n-    CBlockIndex *pindexStart = chainActive.Genesis();\n+    CBlockIndex *pindexStart = nullptr;\n     CBlockIndex *pindexStop = nullptr;\n-    if (!request.params[0].isNull()) {\n-        pindexStart = chainActive[request.params[0].get_int()];\n-        if (!pindexStart) {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid start_height\");\n-        }\n-    }\n+    CBlockIndex *pChainTip = nullptr;\n+    {",
      "path": "src/wallet/rpcwallet.cpp",
      "position": 20,
      "original_position": 20,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "ff547097b369fbd3aceb7216d6325df194af4a97",
      "in_reply_to_id": 156811137,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh. Indeed! Added. Fixed.",
      "created_at": "2017-12-13T23:44:42Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156818904",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156818904"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3409,
      "original_line": 3409,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156819018",
      "pull_request_review_id": 83358777,
      "id": 156819018,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NjgxOTAxOA==",
      "diff_hunk": "@@ -1645,36 +1646,48 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n  */\n-CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, bool fUpdate)\n+CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, const WalletRescanReserver &reserver, bool fUpdate)\n {\n     int64_t nNow = GetTime();\n     const CChainParams& chainParams = Params();\n \n+    assert(reserver.isReserved());\n     if (pindexStop) {\n         assert(pindexStop->nHeight >= pindexStart->nHeight);\n     }\n \n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);\n+        }\n         while (pindex && !fAbortRescan)\n         {\n-            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0)\n+            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0) {\n+                LOCK(cs_main);\n                 ShowProgress(_(\"Rescanning...\"), std::max(1, std::min(99, (int)((GuessVerificationProgress(chainParams.TxData(), pindex) - dProgressStart) / (dProgressTip - dProgressStart) * 100))));\n+            }\n             if (GetTime() >= nNow + 60) {\n                 nNow = GetTime();\n+                LOCK(cs_main);\n                 LogPrintf(\"Still rescanning. At block %d. Progress=%f\\n\", pindex->nHeight, GuessVerificationProgress(chainParams.TxData(), pindex));\n             }\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK2(cs_main, cs_wallet);\n+                if (pindex && !chainActive.Contains(pindex)) break;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 78,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "ff547097b369fbd3aceb7216d6325df194af4a97",
      "in_reply_to_id": 156810727,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes. That case is a bit wired. We should probably return a custom state object instead a single CBlockIndex in the long run.\r\nMentioned that behaviour now in the `ScanForWalletTransactions` comment.",
      "created_at": "2017-12-13T23:45:33Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156819018",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156819018"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1691,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156984022",
      "pull_request_review_id": 83551405,
      "id": 156984022,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1Njk4NDAyMg==",
      "diff_hunk": "@@ -1644,37 +1645,52 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  *\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n+ *\n+ * An additional check if the returned CBlockIndex* is/was on the main chain",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 33,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "61315d1455063641cf998abcd30145a35367e3b1",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I dont think that fully captures the requirement here. Its actually rather loose, y ou just need to make sure pindexStop (and pindexStart) are on the main chain *after* to the addition of any new keys you want to detect transactions for. What is returned actually doesnt matter because if pindexStart and pindexStop were on the main chain at some point when all the neccessary keys were in the wallet, any missed blocks during rescan were also caught in the validationinterface callbacks.",
      "created_at": "2017-12-14T15:59:08Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156984022",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/156984022"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1649,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157135059",
      "pull_request_review_id": 83729413,
      "id": 157135059,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzEzNTA1OQ==",
      "diff_hunk": "@@ -1644,37 +1645,52 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  *\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n+ *\n+ * An additional check if the returned CBlockIndex* is/was on the main chain",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 33,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "61315d1455063641cf998abcd30145a35367e3b1",
      "in_reply_to_id": 156984022,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Updated the comment.",
      "created_at": "2017-12-15T07:06:40Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157135059",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157135059"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1649,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157283067",
      "pull_request_review_id": 83905785,
      "id": 157283067,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzI4MzA2Nw==",
      "diff_hunk": "@@ -3376,30 +3376,40 @@ UniValue rescanblockchain(const JSONRPCRequest& request)\n             );\n     }\n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    WalletRescanReserver reserver(pwallet);\n+    if (!reserver.reserve()) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet is currently rescanning. Abort existing rescan or wait.\");\n+    }\n \n-    CBlockIndex *pindexStart = chainActive.Genesis();\n+    CBlockIndex *pindexStart = nullptr;\n     CBlockIndex *pindexStop = nullptr;\n-    if (!request.params[0].isNull()) {\n-        pindexStart = chainActive[request.params[0].get_int()];\n-        if (!pindexStart) {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid start_height\");\n-        }\n-    }\n+    CBlockIndex *pChainTip = nullptr;\n+    {\n+        LOCK(cs_main);\n+        pindexStart = chainActive.Genesis();\n+        pChainTip = chainActive.Tip();\n \n-    if (!request.params[1].isNull()) {\n-        pindexStop = chainActive[request.params[1].get_int()];\n-        if (!pindexStop) {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid stop_height\");\n+        if (!request.params[0].isNull()) {\n+            pindexStart = chainActive[request.params[0].get_int()];\n+            if (!pindexStart) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid start_height\");\n+            }\n         }\n-        else if (pindexStop->nHeight < pindexStart->nHeight) {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, \"stop_height must be greater then start_height\");\n+\n+        if (!request.params[1].isNull()) {\n+            pindexStop = chainActive[request.params[1].get_int()];\n+            if (!pindexStop) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid stop_height\");\n+            }\n+            else if (pindexStop->nHeight < pindexStart->nHeight) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"stop_height must be greater then start_height\");\n+            }\n         }\n     }\n \n     // We can't rescan beyond non-pruned blocks, stop and throw an error\n     if (fPruneMode) {\n-        CBlockIndex *block = pindexStop ? pindexStop : chainActive.Tip();\n+        CBlockIndex *block = pindexStop ? pindexStop : pChainTip;",
      "path": "src/wallet/rpcwallet.cpp",
      "position": null,
      "original_position": 52,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "eba53080666402bba2efe4a430bde2b824edef9d",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The nStatus check two lines down still needs cs_main.",
      "created_at": "2017-12-15T19:37:10Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157283067",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157283067"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3435,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157300953",
      "pull_request_review_id": 83928058,
      "id": 157300953,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzMwMDk1Mw==",
      "diff_hunk": "@@ -101,56 +101,59 @@ UniValue importprivkey(const JSONRPCRequest& request)\n         );\n \n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    bool fRescan = true;\n+    {\n+        LOCK2(cs_main, pwallet->cs_wallet);\n \n-    EnsureWalletIsUnlocked(pwallet);\n+        EnsureWalletIsUnlocked(pwallet);\n \n-    std::string strSecret = request.params[0].get_str();\n-    std::string strLabel = \"\";\n-    if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        std::string strSecret = request.params[0].get_str();\n+        std::string strLabel = \"\";\n+        if (!request.params[1].isNull())\n+            strLabel = request.params[1].get_str();\n \n-    // Whether to perform rescan after import\n-    bool fRescan = true;\n-    if (!request.params[2].isNull())\n-        fRescan = request.params[2].get_bool();\n+        // Whether to perform rescan after import\n+        if (!request.params[2].isNull())\n+            fRescan = request.params[2].get_bool();\n \n-    if (fRescan && fPruneMode)\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+        if (fRescan && fPruneMode)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n-    CBitcoinSecret vchSecret;\n-    bool fGood = vchSecret.SetString(strSecret);\n+        CBitcoinSecret vchSecret;\n+        bool fGood = vchSecret.SetString(strSecret);\n \n-    if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n+        if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n \n-    CKey key = vchSecret.GetKey();\n-    if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n+        CKey key = vchSecret.GetKey();\n+        if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n \n-    CPubKey pubkey = key.GetPubKey();\n-    assert(key.VerifyPubKey(pubkey));\n-    CKeyID vchAddress = pubkey.GetID();\n-    {\n-        pwallet->MarkDirty();\n-        pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n+        CPubKey pubkey = key.GetPubKey();\n+        assert(key.VerifyPubKey(pubkey));\n+        CKeyID vchAddress = pubkey.GetID();\n+        {\n+            pwallet->MarkDirty();\n+            pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n \n-        // Don't throw error in case a key is already there\n-        if (pwallet->HaveKey(vchAddress)) {\n-            return NullUniValue;\n-        }\n+            // Don't throw error in case a key is already there\n+            if (pwallet->HaveKey(vchAddress)) {\n+                return NullUniValue;\n+            }\n \n-        pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n+            pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n \n-        if (!pwallet->AddKeyPubKey(key, pubkey)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n-        }\n+            if (!pwallet->AddKeyPubKey(key, pubkey)) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n+            }\n+\n+            // whenever a key is imported, we need to scan the whole chain\n+            pwallet->UpdateTimeFirstKey(1);\n \n-        // whenever a key is imported, we need to scan the whole chain\n-        pwallet->UpdateTimeFirstKey(1);\n \n-        if (fRescan) {\n-            pwallet->RescanFromTime(TIMESTAMP_MIN, true /* update */);\n         }\n     }\n+    if (fRescan) {",
      "path": "src/wallet/rpcdump.cpp",
      "position": null,
      "original_position": 89,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "22510c9a82b4b16f449cca7bf2b2197ad91dae52",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Releasing cs_wallet here means another RPC could occur in between which observes the key being present, but not the relevant transactions. Is that a concern?",
      "created_at": "2017-12-15T21:18:32Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157300953",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157300953"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157302011",
      "pull_request_review_id": 83929304,
      "id": 157302011,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzMwMjAxMQ==",
      "diff_hunk": "@@ -101,56 +101,59 @@ UniValue importprivkey(const JSONRPCRequest& request)\n         );\n \n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    bool fRescan = true;\n+    {\n+        LOCK2(cs_main, pwallet->cs_wallet);\n \n-    EnsureWalletIsUnlocked(pwallet);\n+        EnsureWalletIsUnlocked(pwallet);\n \n-    std::string strSecret = request.params[0].get_str();\n-    std::string strLabel = \"\";\n-    if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        std::string strSecret = request.params[0].get_str();\n+        std::string strLabel = \"\";\n+        if (!request.params[1].isNull())\n+            strLabel = request.params[1].get_str();\n \n-    // Whether to perform rescan after import\n-    bool fRescan = true;\n-    if (!request.params[2].isNull())\n-        fRescan = request.params[2].get_bool();\n+        // Whether to perform rescan after import\n+        if (!request.params[2].isNull())\n+            fRescan = request.params[2].get_bool();\n \n-    if (fRescan && fPruneMode)\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+        if (fRescan && fPruneMode)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n-    CBitcoinSecret vchSecret;\n-    bool fGood = vchSecret.SetString(strSecret);\n+        CBitcoinSecret vchSecret;\n+        bool fGood = vchSecret.SetString(strSecret);\n \n-    if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n+        if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n \n-    CKey key = vchSecret.GetKey();\n-    if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n+        CKey key = vchSecret.GetKey();\n+        if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n \n-    CPubKey pubkey = key.GetPubKey();\n-    assert(key.VerifyPubKey(pubkey));\n-    CKeyID vchAddress = pubkey.GetID();\n-    {\n-        pwallet->MarkDirty();\n-        pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n+        CPubKey pubkey = key.GetPubKey();\n+        assert(key.VerifyPubKey(pubkey));\n+        CKeyID vchAddress = pubkey.GetID();\n+        {\n+            pwallet->MarkDirty();\n+            pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n \n-        // Don't throw error in case a key is already there\n-        if (pwallet->HaveKey(vchAddress)) {\n-            return NullUniValue;\n-        }\n+            // Don't throw error in case a key is already there\n+            if (pwallet->HaveKey(vchAddress)) {\n+                return NullUniValue;\n+            }\n \n-        pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n+            pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n \n-        if (!pwallet->AddKeyPubKey(key, pubkey)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n-        }\n+            if (!pwallet->AddKeyPubKey(key, pubkey)) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n+            }\n+\n+            // whenever a key is imported, we need to scan the whole chain\n+            pwallet->UpdateTimeFirstKey(1);\n \n-        // whenever a key is imported, we need to scan the whole chain\n-        pwallet->UpdateTimeFirstKey(1);\n \n-        if (fRescan) {\n-            pwallet->RescanFromTime(TIMESTAMP_MIN, true /* update */);\n         }\n     }\n+    if (fRescan) {",
      "path": "src/wallet/rpcdump.cpp",
      "position": null,
      "original_position": 89,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "22510c9a82b4b16f449cca7bf2b2197ad91dae52",
      "in_reply_to_id": 157300953,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I wouldnt think so directly. What may be of larger concern may be that you could get a bogus balance due to having found old transactions but not newer ones. Its probably still fine, but we should note it in the help doc for the rescanning functions. Alternatively we could block other wallet RPC calls until rescan finishes.",
      "created_at": "2017-12-15T21:23:07Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157302011",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157302011"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157308303",
      "pull_request_review_id": 83936860,
      "id": 157308303,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzMwODMwMw==",
      "diff_hunk": "@@ -101,56 +101,59 @@ UniValue importprivkey(const JSONRPCRequest& request)\n         );\n \n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    bool fRescan = true;\n+    {\n+        LOCK2(cs_main, pwallet->cs_wallet);\n \n-    EnsureWalletIsUnlocked(pwallet);\n+        EnsureWalletIsUnlocked(pwallet);\n \n-    std::string strSecret = request.params[0].get_str();\n-    std::string strLabel = \"\";\n-    if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        std::string strSecret = request.params[0].get_str();\n+        std::string strLabel = \"\";\n+        if (!request.params[1].isNull())\n+            strLabel = request.params[1].get_str();\n \n-    // Whether to perform rescan after import\n-    bool fRescan = true;\n-    if (!request.params[2].isNull())\n-        fRescan = request.params[2].get_bool();\n+        // Whether to perform rescan after import\n+        if (!request.params[2].isNull())\n+            fRescan = request.params[2].get_bool();\n \n-    if (fRescan && fPruneMode)\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+        if (fRescan && fPruneMode)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n-    CBitcoinSecret vchSecret;\n-    bool fGood = vchSecret.SetString(strSecret);\n+        CBitcoinSecret vchSecret;\n+        bool fGood = vchSecret.SetString(strSecret);\n \n-    if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n+        if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n \n-    CKey key = vchSecret.GetKey();\n-    if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n+        CKey key = vchSecret.GetKey();\n+        if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n \n-    CPubKey pubkey = key.GetPubKey();\n-    assert(key.VerifyPubKey(pubkey));\n-    CKeyID vchAddress = pubkey.GetID();\n-    {\n-        pwallet->MarkDirty();\n-        pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n+        CPubKey pubkey = key.GetPubKey();\n+        assert(key.VerifyPubKey(pubkey));\n+        CKeyID vchAddress = pubkey.GetID();\n+        {\n+            pwallet->MarkDirty();\n+            pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n \n-        // Don't throw error in case a key is already there\n-        if (pwallet->HaveKey(vchAddress)) {\n-            return NullUniValue;\n-        }\n+            // Don't throw error in case a key is already there\n+            if (pwallet->HaveKey(vchAddress)) {\n+                return NullUniValue;\n+            }\n \n-        pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n+            pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n \n-        if (!pwallet->AddKeyPubKey(key, pubkey)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n-        }\n+            if (!pwallet->AddKeyPubKey(key, pubkey)) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n+            }\n+\n+            // whenever a key is imported, we need to scan the whole chain\n+            pwallet->UpdateTimeFirstKey(1);\n \n-        // whenever a key is imported, we need to scan the whole chain\n-        pwallet->UpdateTimeFirstKey(1);\n \n-        if (fRescan) {\n-            pwallet->RescanFromTime(TIMESTAMP_MIN, true /* update */);\n         }\n     }\n+    if (fRescan) {",
      "path": "src/wallet/rpcdump.cpp",
      "position": null,
      "original_position": 89,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "22510c9a82b4b16f449cca7bf2b2197ad91dae52",
      "in_reply_to_id": 157300953,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Possible solutions:\r\n1.) User must take care: report the rescan status in `getwalletinfo()`\r\n2.) Block relevant RPC calls during an active rescan...\r\n\r\nI think 1) is more flexible but my introduce some pitfalls...",
      "created_at": "2017-12-15T22:00:23Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157308303",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157308303"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157308663",
      "pull_request_review_id": 83937262,
      "id": 157308663,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzMwODY2Mw==",
      "diff_hunk": "@@ -3376,30 +3376,40 @@ UniValue rescanblockchain(const JSONRPCRequest& request)\n             );\n     }\n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    WalletRescanReserver reserver(pwallet);\n+    if (!reserver.reserve()) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet is currently rescanning. Abort existing rescan or wait.\");\n+    }\n \n-    CBlockIndex *pindexStart = chainActive.Genesis();\n+    CBlockIndex *pindexStart = nullptr;\n     CBlockIndex *pindexStop = nullptr;\n-    if (!request.params[0].isNull()) {\n-        pindexStart = chainActive[request.params[0].get_int()];\n-        if (!pindexStart) {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid start_height\");\n-        }\n-    }\n+    CBlockIndex *pChainTip = nullptr;\n+    {\n+        LOCK(cs_main);\n+        pindexStart = chainActive.Genesis();\n+        pChainTip = chainActive.Tip();\n \n-    if (!request.params[1].isNull()) {\n-        pindexStop = chainActive[request.params[1].get_int()];\n-        if (!pindexStop) {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid stop_height\");\n+        if (!request.params[0].isNull()) {\n+            pindexStart = chainActive[request.params[0].get_int()];\n+            if (!pindexStart) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid start_height\");\n+            }\n         }\n-        else if (pindexStop->nHeight < pindexStart->nHeight) {\n-            throw JSONRPCError(RPC_INVALID_PARAMETER, \"stop_height must be greater then start_height\");\n+\n+        if (!request.params[1].isNull()) {\n+            pindexStop = chainActive[request.params[1].get_int()];\n+            if (!pindexStop) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid stop_height\");\n+            }\n+            else if (pindexStop->nHeight < pindexStart->nHeight) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"stop_height must be greater then start_height\");\n+            }\n         }\n     }\n \n     // We can't rescan beyond non-pruned blocks, stop and throw an error\n     if (fPruneMode) {\n-        CBlockIndex *block = pindexStop ? pindexStop : chainActive.Tip();\n+        CBlockIndex *block = pindexStop ? pindexStop : pChainTip;",
      "path": "src/wallet/rpcwallet.cpp",
      "position": null,
      "original_position": 52,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "eba53080666402bba2efe4a430bde2b824edef9d",
      "in_reply_to_id": 157283067,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Right!\r\nFixed by adding a `cs_main` lock for this block (only occurs for pruned peers).",
      "created_at": "2017-12-15T22:02:27Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157308663",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157308663"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3435,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157356351",
      "pull_request_review_id": 83988701,
      "id": 157356351,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzM1NjM1MQ==",
      "diff_hunk": "@@ -1218,4 +1221,31 @@ bool CWallet::DummySignTx(CMutableTransaction &txNew, const ContainerType &coins\n     return true;\n }\n \n+/** RAII object to check and reserve a wallet rescan */\n+class WalletRescanReserver\n+{\n+public:\n+    CWalletRef m_wallet;\n+    bool m_could_reserve;\n+    explicit WalletRescanReserver(CWalletRef w): m_wallet(w), m_could_reserve(false) {}\n+\n+    bool reserve() {",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 22,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e56aa6ce6b25becf1005d219b056d34c86347372",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit, `{` in new line.",
      "created_at": "2017-12-17T02:36:50Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157356351",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157356351"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1232,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157356354",
      "pull_request_review_id": 83988701,
      "id": 157356354,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzM1NjM1NA==",
      "diff_hunk": "@@ -1218,4 +1221,31 @@ bool CWallet::DummySignTx(CMutableTransaction &txNew, const ContainerType &coins\n     return true;\n }\n \n+/** RAII object to check and reserve a wallet rescan */\n+class WalletRescanReserver\n+{\n+public:\n+    CWalletRef m_wallet;\n+    bool m_could_reserve;\n+    explicit WalletRescanReserver(CWalletRef w): m_wallet(w), m_could_reserve(false) {}",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 20,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e56aa6ce6b25becf1005d219b056d34c86347372",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit, missing space before `:`.",
      "created_at": "2017-12-17T02:37:06Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157356354",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157356354"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1230,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157356359",
      "pull_request_review_id": 83988701,
      "id": 157356359,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzM1NjM1OQ==",
      "diff_hunk": "@@ -1218,4 +1221,31 @@ bool CWallet::DummySignTx(CMutableTransaction &txNew, const ContainerType &coins\n     return true;\n }\n \n+/** RAII object to check and reserve a wallet rescan */\n+class WalletRescanReserver\n+{\n+public:\n+    CWalletRef m_wallet;",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 18,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e56aa6ce6b25becf1005d219b056d34c86347372",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Make these private?",
      "created_at": "2017-12-17T02:37:27Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157356359",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157356359"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1274,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157356413",
      "pull_request_review_id": 83988701,
      "id": 157356413,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzM1NjQxMw==",
      "diff_hunk": "@@ -656,6 +656,9 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n     static std::atomic<bool> fFlushScheduled;\n     std::atomic<bool> fAbortRescan;\n     std::atomic<bool> fScanningWallet;\n+    std::mutex mutexScanning;",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 4,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e56aa6ce6b25becf1005d219b056d34c86347372",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why the mutex when `fScanningWallet` is `std::atomic`? Could use `std::atomic<bool>::compare_exchange_strong`?",
      "created_at": "2017-12-17T02:42:46Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157356413",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157356413"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 673,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157903189",
      "pull_request_review_id": 84624142,
      "id": 157903189,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzkwMzE4OQ==",
      "diff_hunk": "@@ -656,6 +656,9 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n     static std::atomic<bool> fFlushScheduled;\n     std::atomic<bool> fAbortRescan;\n     std::atomic<bool> fScanningWallet;\n+    std::mutex mutexScanning;",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 4,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e56aa6ce6b25becf1005d219b056d34c86347372",
      "in_reply_to_id": 157356413,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes. Maybe. But lets keep this for now.",
      "created_at": "2017-12-19T23:26:54Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157903189",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157903189"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 673,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157906537",
      "pull_request_review_id": 84628059,
      "id": 157906537,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzkwNjUzNw==",
      "diff_hunk": "@@ -101,56 +101,59 @@ UniValue importprivkey(const JSONRPCRequest& request)\n         );\n \n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    bool fRescan = true;\n+    {\n+        LOCK2(cs_main, pwallet->cs_wallet);\n \n-    EnsureWalletIsUnlocked(pwallet);\n+        EnsureWalletIsUnlocked(pwallet);\n \n-    std::string strSecret = request.params[0].get_str();\n-    std::string strLabel = \"\";\n-    if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        std::string strSecret = request.params[0].get_str();\n+        std::string strLabel = \"\";\n+        if (!request.params[1].isNull())\n+            strLabel = request.params[1].get_str();\n \n-    // Whether to perform rescan after import\n-    bool fRescan = true;\n-    if (!request.params[2].isNull())\n-        fRescan = request.params[2].get_bool();\n+        // Whether to perform rescan after import\n+        if (!request.params[2].isNull())\n+            fRescan = request.params[2].get_bool();\n \n-    if (fRescan && fPruneMode)\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+        if (fRescan && fPruneMode)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n-    CBitcoinSecret vchSecret;\n-    bool fGood = vchSecret.SetString(strSecret);\n+        CBitcoinSecret vchSecret;\n+        bool fGood = vchSecret.SetString(strSecret);\n \n-    if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n+        if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n \n-    CKey key = vchSecret.GetKey();\n-    if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n+        CKey key = vchSecret.GetKey();\n+        if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n \n-    CPubKey pubkey = key.GetPubKey();\n-    assert(key.VerifyPubKey(pubkey));\n-    CKeyID vchAddress = pubkey.GetID();\n-    {\n-        pwallet->MarkDirty();\n-        pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n+        CPubKey pubkey = key.GetPubKey();\n+        assert(key.VerifyPubKey(pubkey));\n+        CKeyID vchAddress = pubkey.GetID();\n+        {\n+            pwallet->MarkDirty();\n+            pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n \n-        // Don't throw error in case a key is already there\n-        if (pwallet->HaveKey(vchAddress)) {\n-            return NullUniValue;\n-        }\n+            // Don't throw error in case a key is already there\n+            if (pwallet->HaveKey(vchAddress)) {\n+                return NullUniValue;\n+            }\n \n-        pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n+            pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n \n-        if (!pwallet->AddKeyPubKey(key, pubkey)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n-        }\n+            if (!pwallet->AddKeyPubKey(key, pubkey)) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n+            }\n+\n+            // whenever a key is imported, we need to scan the whole chain\n+            pwallet->UpdateTimeFirstKey(1);\n \n-        // whenever a key is imported, we need to scan the whole chain\n-        pwallet->UpdateTimeFirstKey(1);\n \n-        if (fRescan) {\n-            pwallet->RescanFromTime(TIMESTAMP_MIN, true /* update */);\n         }\n     }\n+    if (fRescan) {",
      "path": "src/wallet/rpcdump.cpp",
      "position": null,
      "original_position": 89,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "22510c9a82b4b16f449cca7bf2b2197ad91dae52",
      "in_reply_to_id": 157300953,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@sipa that is already possible: `importprivkey rescan=false` followed by `rescanblockchain`.",
      "created_at": "2017-12-19T23:51:23Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157906537",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157906537"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157906752",
      "pull_request_review_id": 84628321,
      "id": 157906752,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzkwNjc1Mg==",
      "diff_hunk": "@@ -1582,13 +1588,17 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n \n             CBlock block;\n             if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+                LOCK2(cs_main, cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": 87,
      "original_position": 47,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "4c1f082b991d872ee7b5507e15ee19eb328ab1d9",
      "in_reply_to_id": 138224114,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "chainActive.",
      "created_at": "2017-12-19T23:53:04Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157906752",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157906752"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1694,
      "original_line": 1694,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157908101",
      "pull_request_review_id": 84629976,
      "id": 157908101,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzkwODEwMQ==",
      "diff_hunk": "@@ -101,56 +101,59 @@ UniValue importprivkey(const JSONRPCRequest& request)\n         );\n \n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    bool fRescan = true;\n+    {\n+        LOCK2(cs_main, pwallet->cs_wallet);\n \n-    EnsureWalletIsUnlocked(pwallet);\n+        EnsureWalletIsUnlocked(pwallet);\n \n-    std::string strSecret = request.params[0].get_str();\n-    std::string strLabel = \"\";\n-    if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        std::string strSecret = request.params[0].get_str();\n+        std::string strLabel = \"\";\n+        if (!request.params[1].isNull())\n+            strLabel = request.params[1].get_str();\n \n-    // Whether to perform rescan after import\n-    bool fRescan = true;\n-    if (!request.params[2].isNull())\n-        fRescan = request.params[2].get_bool();\n+        // Whether to perform rescan after import\n+        if (!request.params[2].isNull())\n+            fRescan = request.params[2].get_bool();\n \n-    if (fRescan && fPruneMode)\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+        if (fRescan && fPruneMode)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n-    CBitcoinSecret vchSecret;\n-    bool fGood = vchSecret.SetString(strSecret);\n+        CBitcoinSecret vchSecret;\n+        bool fGood = vchSecret.SetString(strSecret);\n \n-    if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n+        if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n \n-    CKey key = vchSecret.GetKey();\n-    if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n+        CKey key = vchSecret.GetKey();\n+        if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n \n-    CPubKey pubkey = key.GetPubKey();\n-    assert(key.VerifyPubKey(pubkey));\n-    CKeyID vchAddress = pubkey.GetID();\n-    {\n-        pwallet->MarkDirty();\n-        pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n+        CPubKey pubkey = key.GetPubKey();\n+        assert(key.VerifyPubKey(pubkey));\n+        CKeyID vchAddress = pubkey.GetID();\n+        {\n+            pwallet->MarkDirty();\n+            pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n \n-        // Don't throw error in case a key is already there\n-        if (pwallet->HaveKey(vchAddress)) {\n-            return NullUniValue;\n-        }\n+            // Don't throw error in case a key is already there\n+            if (pwallet->HaveKey(vchAddress)) {\n+                return NullUniValue;\n+            }\n \n-        pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n+            pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n \n-        if (!pwallet->AddKeyPubKey(key, pubkey)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n-        }\n+            if (!pwallet->AddKeyPubKey(key, pubkey)) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n+            }\n+\n+            // whenever a key is imported, we need to scan the whole chain\n+            pwallet->UpdateTimeFirstKey(1);\n \n-        // whenever a key is imported, we need to scan the whole chain\n-        pwallet->UpdateTimeFirstKey(1);\n \n-        if (fRescan) {\n-            pwallet->RescanFromTime(TIMESTAMP_MIN, true /* update */);\n         }\n     }\n+    if (fRescan) {",
      "path": "src/wallet/rpcdump.cpp",
      "position": null,
      "original_position": 89,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "22510c9a82b4b16f449cca7bf2b2197ad91dae52",
      "in_reply_to_id": 157300953,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@promag If you sent rescan to false you're taking that risk yourself obviously. My point is that if you do request a rescan, there is a reasonable expectation to not see inconsistent results.",
      "created_at": "2017-12-20T00:03:42Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157908101",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157908101"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157908983",
      "pull_request_review_id": 84631077,
      "id": 157908983,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzkwODk4Mw==",
      "diff_hunk": "@@ -101,56 +101,59 @@ UniValue importprivkey(const JSONRPCRequest& request)\n         );\n \n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    bool fRescan = true;\n+    {\n+        LOCK2(cs_main, pwallet->cs_wallet);\n \n-    EnsureWalletIsUnlocked(pwallet);\n+        EnsureWalletIsUnlocked(pwallet);\n \n-    std::string strSecret = request.params[0].get_str();\n-    std::string strLabel = \"\";\n-    if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        std::string strSecret = request.params[0].get_str();\n+        std::string strLabel = \"\";\n+        if (!request.params[1].isNull())\n+            strLabel = request.params[1].get_str();\n \n-    // Whether to perform rescan after import\n-    bool fRescan = true;\n-    if (!request.params[2].isNull())\n-        fRescan = request.params[2].get_bool();\n+        // Whether to perform rescan after import\n+        if (!request.params[2].isNull())\n+            fRescan = request.params[2].get_bool();\n \n-    if (fRescan && fPruneMode)\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+        if (fRescan && fPruneMode)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n-    CBitcoinSecret vchSecret;\n-    bool fGood = vchSecret.SetString(strSecret);\n+        CBitcoinSecret vchSecret;\n+        bool fGood = vchSecret.SetString(strSecret);\n \n-    if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n+        if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n \n-    CKey key = vchSecret.GetKey();\n-    if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n+        CKey key = vchSecret.GetKey();\n+        if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n \n-    CPubKey pubkey = key.GetPubKey();\n-    assert(key.VerifyPubKey(pubkey));\n-    CKeyID vchAddress = pubkey.GetID();\n-    {\n-        pwallet->MarkDirty();\n-        pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n+        CPubKey pubkey = key.GetPubKey();\n+        assert(key.VerifyPubKey(pubkey));\n+        CKeyID vchAddress = pubkey.GetID();\n+        {\n+            pwallet->MarkDirty();\n+            pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n \n-        // Don't throw error in case a key is already there\n-        if (pwallet->HaveKey(vchAddress)) {\n-            return NullUniValue;\n-        }\n+            // Don't throw error in case a key is already there\n+            if (pwallet->HaveKey(vchAddress)) {\n+                return NullUniValue;\n+            }\n \n-        pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n+            pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n \n-        if (!pwallet->AddKeyPubKey(key, pubkey)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n-        }\n+            if (!pwallet->AddKeyPubKey(key, pubkey)) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n+            }\n+\n+            // whenever a key is imported, we need to scan the whole chain\n+            pwallet->UpdateTimeFirstKey(1);\n \n-        // whenever a key is imported, we need to scan the whole chain\n-        pwallet->UpdateTimeFirstKey(1);\n \n-        if (fRescan) {\n-            pwallet->RescanFromTime(TIMESTAMP_MIN, true /* update */);\n         }\n     }\n+    if (fRescan) {",
      "path": "src/wallet/rpcdump.cpp",
      "position": null,
      "original_position": 89,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "22510c9a82b4b16f449cca7bf2b2197ad91dae52",
      "in_reply_to_id": 157300953,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah I know, there is also reasonable expectation to have the RPC responsive 😄 ",
      "created_at": "2017-12-20T00:10:06Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157908983",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157908983"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157909476",
      "pull_request_review_id": 84631656,
      "id": 157909476,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzkwOTQ3Ng==",
      "diff_hunk": "@@ -101,56 +101,59 @@ UniValue importprivkey(const JSONRPCRequest& request)\n         );\n \n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    bool fRescan = true;\n+    {\n+        LOCK2(cs_main, pwallet->cs_wallet);\n \n-    EnsureWalletIsUnlocked(pwallet);\n+        EnsureWalletIsUnlocked(pwallet);\n \n-    std::string strSecret = request.params[0].get_str();\n-    std::string strLabel = \"\";\n-    if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        std::string strSecret = request.params[0].get_str();\n+        std::string strLabel = \"\";\n+        if (!request.params[1].isNull())\n+            strLabel = request.params[1].get_str();\n \n-    // Whether to perform rescan after import\n-    bool fRescan = true;\n-    if (!request.params[2].isNull())\n-        fRescan = request.params[2].get_bool();\n+        // Whether to perform rescan after import\n+        if (!request.params[2].isNull())\n+            fRescan = request.params[2].get_bool();\n \n-    if (fRescan && fPruneMode)\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+        if (fRescan && fPruneMode)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n-    CBitcoinSecret vchSecret;\n-    bool fGood = vchSecret.SetString(strSecret);\n+        CBitcoinSecret vchSecret;\n+        bool fGood = vchSecret.SetString(strSecret);\n \n-    if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n+        if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n \n-    CKey key = vchSecret.GetKey();\n-    if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n+        CKey key = vchSecret.GetKey();\n+        if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n \n-    CPubKey pubkey = key.GetPubKey();\n-    assert(key.VerifyPubKey(pubkey));\n-    CKeyID vchAddress = pubkey.GetID();\n-    {\n-        pwallet->MarkDirty();\n-        pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n+        CPubKey pubkey = key.GetPubKey();\n+        assert(key.VerifyPubKey(pubkey));\n+        CKeyID vchAddress = pubkey.GetID();\n+        {\n+            pwallet->MarkDirty();\n+            pwallet->SetAddressBook(vchAddress, strLabel, \"receive\");\n \n-        // Don't throw error in case a key is already there\n-        if (pwallet->HaveKey(vchAddress)) {\n-            return NullUniValue;\n-        }\n+            // Don't throw error in case a key is already there\n+            if (pwallet->HaveKey(vchAddress)) {\n+                return NullUniValue;\n+            }\n \n-        pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n+            pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n \n-        if (!pwallet->AddKeyPubKey(key, pubkey)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n-        }\n+            if (!pwallet->AddKeyPubKey(key, pubkey)) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n+            }\n+\n+            // whenever a key is imported, we need to scan the whole chain\n+            pwallet->UpdateTimeFirstKey(1);\n \n-        // whenever a key is imported, we need to scan the whole chain\n-        pwallet->UpdateTimeFirstKey(1);\n \n-        if (fRescan) {\n-            pwallet->RescanFromTime(TIMESTAMP_MIN, true /* update */);\n         }\n     }\n+    if (fRescan) {",
      "path": "src/wallet/rpcdump.cpp",
      "position": null,
      "original_position": 89,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "22510c9a82b4b16f449cca7bf2b2197ad91dae52",
      "in_reply_to_id": 157300953,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The same happens in `importmulti`, where the locks are held only when importing the keys.",
      "created_at": "2017-12-20T00:14:03Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r157909476",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157909476"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158206569",
      "pull_request_review_id": 84978600,
      "id": 158206569,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1ODIwNjU2OQ==",
      "diff_hunk": "@@ -1218,4 +1221,31 @@ bool CWallet::DummySignTx(CMutableTransaction &txNew, const ContainerType &coins\n     return true;\n }\n \n+/** RAII object to check and reserve a wallet rescan */\n+class WalletRescanReserver\n+{\n+public:\n+    CWalletRef m_wallet;",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 18,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e56aa6ce6b25becf1005d219b056d34c86347372",
      "in_reply_to_id": 157356359,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2017-12-21T06:47:10Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r158206569",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158206569"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1274,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160389155",
      "pull_request_review_id": 87495542,
      "id": 160389155,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MDM4OTE1NQ==",
      "diff_hunk": "@@ -1218,4 +1222,37 @@ bool CWallet::DummySignTx(CMutableTransaction &txNew, const ContainerType &coins\n     return true;\n }\n \n+/** RAII object to check and reserve a wallet rescan */\n+class WalletRescanReserver\n+{\n+private:\n+    CWalletRef m_wallet;\n+    bool m_could_reserve;\n+public:\n+    explicit WalletRescanReserver(CWalletRef w) : m_wallet(w), m_could_reserve(false) {}\n+\n+    bool reserve()\n+    {\n+        std::lock_guard<std::mutex> lock(m_wallet->mutexScanning);\n+        if (m_wallet->fScanningWallet) {\n+            return false;\n+        }\n+        m_wallet->fScanningWallet = true;\n+        m_could_reserve = true;\n+        return true;\n+    }\n+\n+    bool isReserved() const {\n+        return (m_could_reserve && m_wallet->fScanningWallet);",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 54,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b2cc7020956cfd36925e4957493cd28d1d6f672e",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`return m_could_reserve` is enough? `WalletRescanReserver` is the \"owner.",
      "created_at": "2018-01-09T12:06:31Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r160389155",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160389155"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1293,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160389240",
      "pull_request_review_id": 87495542,
      "id": 160389240,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MDM4OTI0MA==",
      "diff_hunk": "@@ -1218,4 +1222,37 @@ bool CWallet::DummySignTx(CMutableTransaction &txNew, const ContainerType &coins\n     return true;\n }\n \n+/** RAII object to check and reserve a wallet rescan */\n+class WalletRescanReserver\n+{\n+private:\n+    CWalletRef m_wallet;\n+    bool m_could_reserve;\n+public:\n+    explicit WalletRescanReserver(CWalletRef w) : m_wallet(w), m_could_reserve(false) {}\n+\n+    bool reserve()\n+    {\n+        std::lock_guard<std::mutex> lock(m_wallet->mutexScanning);",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 44,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b2cc7020956cfd36925e4957493cd28d1d6f672e",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Add `assert(!m_could_reserve);`.",
      "created_at": "2018-01-09T12:06:59Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r160389240",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160389240"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160391530",
      "pull_request_review_id": 87495542,
      "id": 160391530,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MDM5MTUzMA==",
      "diff_hunk": "@@ -1639,37 +1640,53 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  *\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n+ *\n+ * Caller needs to make sure pindexStop (and the optional pindexStart) are on\n+ * the main chain after to the addition of any new keys you want to detect\n+ * transactions for.\n  */\n-CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, bool fUpdate)\n+CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, const WalletRescanReserver &reserver, bool fUpdate)\n {\n     int64_t nNow = GetTime();\n     const CChainParams& chainParams = Params();\n \n+    assert(reserver.isReserved());\n     if (pindexStop) {\n         assert(pindexStop->nHeight >= pindexStart->nHeight);\n     }\n \n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 53,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b2cc7020956cfd36925e4957493cd28d1d6f672e",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Remove, since reserver already set `fScanningWallet` to true.\r\n  ",
      "created_at": "2018-01-09T12:19:32Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r160391530",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160391530"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1666,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160391901",
      "pull_request_review_id": 87495542,
      "id": 160391901,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MDM5MTkwMQ==",
      "diff_hunk": "@@ -1639,37 +1640,53 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  *\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n+ *\n+ * Caller needs to make sure pindexStop (and the optional pindexStart) are on\n+ * the main chain after to the addition of any new keys you want to detect\n+ * transactions for.\n  */\n-CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, bool fUpdate)\n+CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, const WalletRescanReserver &reserver, bool fUpdate)\n {\n     int64_t nNow = GetTime();\n     const CChainParams& chainParams = Params();\n \n+    assert(reserver.isReserved());\n     if (pindexStop) {\n         assert(pindexStop->nHeight >= pindexStart->nHeight);\n     }\n \n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 53,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b2cc7020956cfd36925e4957493cd28d1d6f672e",
      "in_reply_to_id": 160391530,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should also remove `fScanningWallet = false` at the end?",
      "created_at": "2018-01-09T12:21:26Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r160391901",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160391901"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1666,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160392235",
      "pull_request_review_id": 87495542,
      "id": 160392235,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MDM5MjIzNQ==",
      "diff_hunk": "@@ -656,6 +657,9 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n     static std::atomic<bool> fFlushScheduled;\n     std::atomic<bool> fAbortRescan;\n     std::atomic<bool> fScanningWallet;",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 11,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b2cc7020956cfd36925e4957493cd28d1d6f672e",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Add a comment saying this is controlled by `WalletRescanReserver`.",
      "created_at": "2018-01-09T12:23:10Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r160392235",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160392235"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161081512",
      "pull_request_review_id": 88313390,
      "id": 161081512,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTA4MTUxMg==",
      "diff_hunk": "@@ -101,61 +102,63 @@ UniValue importprivkey(const JSONRPCRequest& request)\n         );\n \n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n-\n-    EnsureWalletIsUnlocked(pwallet);\n-\n-    std::string strSecret = request.params[0].get_str();\n-    std::string strLabel = \"\";\n-    if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n-\n-    // Whether to perform rescan after import\n+    WalletRescanReserver reserver(pwallet);\n     bool fRescan = true;\n-    if (!request.params[2].isNull())\n-        fRescan = request.params[2].get_bool();\n-\n-    if (fRescan && fPruneMode)\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+    {\n+        LOCK2(cs_main, pwallet->cs_wallet);\n \n-    CBitcoinSecret vchSecret;\n-    bool fGood = vchSecret.SetString(strSecret);\n+        EnsureWalletIsUnlocked(pwallet);\n \n-    if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n+        std::string strSecret = request.params[0].get_str();\n+        std::string strLabel = \"\";\n+        if (!request.params[1].isNull())\n+            strLabel = request.params[1].get_str();\n \n-    CKey key = vchSecret.GetKey();\n-    if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n+        // Whether to perform rescan after import\n+        if (!request.params[2].isNull())\n+            fRescan = request.params[2].get_bool();\n \n-    CPubKey pubkey = key.GetPubKey();\n-    assert(key.VerifyPubKey(pubkey));\n-    CKeyID vchAddress = pubkey.GetID();\n-    {\n-        pwallet->MarkDirty();\n+        if (fRescan && fPruneMode)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n-        // We don't know which corresponding address will be used; label them all\n-        for (const auto& dest : GetAllDestinationsForKey(pubkey)) {\n-            pwallet->SetAddressBook(dest, strLabel, \"receive\");\n+        if (fRescan && !reserver.reserve()) {\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet is currently rescanning. Abort existing rescan or wait.\");\n         }\n \n-        // Don't throw error in case a key is already there\n-        if (pwallet->HaveKey(vchAddress)) {\n-            return NullUniValue;\n-        }\n+        CBitcoinSecret vchSecret;\n+        bool fGood = vchSecret.SetString(strSecret);\n \n-        pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n+        if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n \n-        if (!pwallet->AddKeyPubKey(key, pubkey)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n-        }\n-        pwallet->LearnAllRelatedScripts(pubkey);\n+        CKey key = vchSecret.GetKey();\n+        if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n \n-        // whenever a key is imported, we need to scan the whole chain\n-        pwallet->UpdateTimeFirstKey(1);",
      "path": "src/wallet/rpcdump.cpp",
      "position": 83,
      "original_position": 83,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b5aaefb2d52ff0f81619147e949f5472501c8db9",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This line didn't make it into the new rebase, I believe.",
      "created_at": "2018-01-11T21:33:17Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161081512",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161081512"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 153,
      "original_line": 153,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161105331",
      "pull_request_review_id": 88341191,
      "id": 161105331,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTEwNTMzMQ==",
      "diff_hunk": "@@ -101,61 +102,63 @@ UniValue importprivkey(const JSONRPCRequest& request)\n         );\n \n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n-\n-    EnsureWalletIsUnlocked(pwallet);\n-\n-    std::string strSecret = request.params[0].get_str();\n-    std::string strLabel = \"\";\n-    if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n-\n-    // Whether to perform rescan after import\n+    WalletRescanReserver reserver(pwallet);\n     bool fRescan = true;\n-    if (!request.params[2].isNull())\n-        fRescan = request.params[2].get_bool();\n-\n-    if (fRescan && fPruneMode)\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+    {\n+        LOCK2(cs_main, pwallet->cs_wallet);\n \n-    CBitcoinSecret vchSecret;\n-    bool fGood = vchSecret.SetString(strSecret);\n+        EnsureWalletIsUnlocked(pwallet);\n \n-    if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n+        std::string strSecret = request.params[0].get_str();\n+        std::string strLabel = \"\";\n+        if (!request.params[1].isNull())\n+            strLabel = request.params[1].get_str();\n \n-    CKey key = vchSecret.GetKey();\n-    if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n+        // Whether to perform rescan after import\n+        if (!request.params[2].isNull())\n+            fRescan = request.params[2].get_bool();\n \n-    CPubKey pubkey = key.GetPubKey();\n-    assert(key.VerifyPubKey(pubkey));\n-    CKeyID vchAddress = pubkey.GetID();\n-    {\n-        pwallet->MarkDirty();\n+        if (fRescan && fPruneMode)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n-        // We don't know which corresponding address will be used; label them all\n-        for (const auto& dest : GetAllDestinationsForKey(pubkey)) {\n-            pwallet->SetAddressBook(dest, strLabel, \"receive\");\n+        if (fRescan && !reserver.reserve()) {\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet is currently rescanning. Abort existing rescan or wait.\");\n         }\n \n-        // Don't throw error in case a key is already there\n-        if (pwallet->HaveKey(vchAddress)) {\n-            return NullUniValue;\n-        }\n+        CBitcoinSecret vchSecret;\n+        bool fGood = vchSecret.SetString(strSecret);\n \n-        pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n+        if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n \n-        if (!pwallet->AddKeyPubKey(key, pubkey)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n-        }\n-        pwallet->LearnAllRelatedScripts(pubkey);\n+        CKey key = vchSecret.GetKey();\n+        if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n \n-        // whenever a key is imported, we need to scan the whole chain\n-        pwallet->UpdateTimeFirstKey(1);",
      "path": "src/wallet/rpcdump.cpp",
      "position": 83,
      "original_position": 83,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b5aaefb2d52ff0f81619147e949f5472501c8db9",
      "in_reply_to_id": 161081512,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh. Yes. Thanks Will fix",
      "created_at": "2018-01-11T23:30:38Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161105331",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161105331"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 153,
      "original_line": 153,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161147840",
      "pull_request_review_id": 88388297,
      "id": 161147840,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTE0Nzg0MA==",
      "diff_hunk": "@@ -101,61 +102,63 @@ UniValue importprivkey(const JSONRPCRequest& request)\n         );\n \n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n-\n-    EnsureWalletIsUnlocked(pwallet);\n-\n-    std::string strSecret = request.params[0].get_str();\n-    std::string strLabel = \"\";\n-    if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n-\n-    // Whether to perform rescan after import\n+    WalletRescanReserver reserver(pwallet);\n     bool fRescan = true;\n-    if (!request.params[2].isNull())\n-        fRescan = request.params[2].get_bool();\n-\n-    if (fRescan && fPruneMode)\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+    {\n+        LOCK2(cs_main, pwallet->cs_wallet);\n \n-    CBitcoinSecret vchSecret;\n-    bool fGood = vchSecret.SetString(strSecret);\n+        EnsureWalletIsUnlocked(pwallet);\n \n-    if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n+        std::string strSecret = request.params[0].get_str();\n+        std::string strLabel = \"\";\n+        if (!request.params[1].isNull())\n+            strLabel = request.params[1].get_str();\n \n-    CKey key = vchSecret.GetKey();\n-    if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n+        // Whether to perform rescan after import\n+        if (!request.params[2].isNull())\n+            fRescan = request.params[2].get_bool();\n \n-    CPubKey pubkey = key.GetPubKey();\n-    assert(key.VerifyPubKey(pubkey));\n-    CKeyID vchAddress = pubkey.GetID();\n-    {\n-        pwallet->MarkDirty();\n+        if (fRescan && fPruneMode)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n-        // We don't know which corresponding address will be used; label them all\n-        for (const auto& dest : GetAllDestinationsForKey(pubkey)) {\n-            pwallet->SetAddressBook(dest, strLabel, \"receive\");\n+        if (fRescan && !reserver.reserve()) {\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet is currently rescanning. Abort existing rescan or wait.\");\n         }\n \n-        // Don't throw error in case a key is already there\n-        if (pwallet->HaveKey(vchAddress)) {\n-            return NullUniValue;\n-        }\n+        CBitcoinSecret vchSecret;\n+        bool fGood = vchSecret.SetString(strSecret);\n \n-        pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n+        if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n \n-        if (!pwallet->AddKeyPubKey(key, pubkey)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n-        }\n-        pwallet->LearnAllRelatedScripts(pubkey);\n+        CKey key = vchSecret.GetKey();\n+        if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n \n-        // whenever a key is imported, we need to scan the whole chain\n-        pwallet->UpdateTimeFirstKey(1);",
      "path": "src/wallet/rpcdump.cpp",
      "position": 83,
      "original_position": 83,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b5aaefb2d52ff0f81619147e949f5472501c8db9",
      "in_reply_to_id": 161081512,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2018-01-12T06:21:55Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161147840",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161147840"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 153,
      "original_line": 153,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161406332",
      "pull_request_review_id": 88690948,
      "id": 161406332,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTQwNjMzMg==",
      "diff_hunk": "@@ -101,61 +102,63 @@ UniValue importprivkey(const JSONRPCRequest& request)\n         );\n \n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n-\n-    EnsureWalletIsUnlocked(pwallet);\n-\n-    std::string strSecret = request.params[0].get_str();\n-    std::string strLabel = \"\";\n-    if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n-\n-    // Whether to perform rescan after import\n+    WalletRescanReserver reserver(pwallet);\n     bool fRescan = true;\n-    if (!request.params[2].isNull())\n-        fRescan = request.params[2].get_bool();\n-\n-    if (fRescan && fPruneMode)\n-        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+    {\n+        LOCK2(cs_main, pwallet->cs_wallet);\n \n-    CBitcoinSecret vchSecret;\n-    bool fGood = vchSecret.SetString(strSecret);\n+        EnsureWalletIsUnlocked(pwallet);\n \n-    if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n+        std::string strSecret = request.params[0].get_str();\n+        std::string strLabel = \"\";\n+        if (!request.params[1].isNull())\n+            strLabel = request.params[1].get_str();\n \n-    CKey key = vchSecret.GetKey();\n-    if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n+        // Whether to perform rescan after import\n+        if (!request.params[2].isNull())\n+            fRescan = request.params[2].get_bool();\n \n-    CPubKey pubkey = key.GetPubKey();\n-    assert(key.VerifyPubKey(pubkey));\n-    CKeyID vchAddress = pubkey.GetID();\n-    {\n-        pwallet->MarkDirty();\n+        if (fRescan && fPruneMode)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n \n-        // We don't know which corresponding address will be used; label them all\n-        for (const auto& dest : GetAllDestinationsForKey(pubkey)) {\n-            pwallet->SetAddressBook(dest, strLabel, \"receive\");\n+        if (fRescan && !reserver.reserve()) {\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet is currently rescanning. Abort existing rescan or wait.\");\n         }\n \n-        // Don't throw error in case a key is already there\n-        if (pwallet->HaveKey(vchAddress)) {\n-            return NullUniValue;\n-        }\n+        CBitcoinSecret vchSecret;\n+        bool fGood = vchSecret.SetString(strSecret);\n \n-        pwallet->mapKeyMetadata[vchAddress].nCreateTime = 1;\n+        if (!fGood) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key encoding\");\n \n-        if (!pwallet->AddKeyPubKey(key, pubkey)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Error adding key to wallet\");\n-        }\n-        pwallet->LearnAllRelatedScripts(pubkey);\n+        CKey key = vchSecret.GetKey();\n+        if (!key.IsValid()) throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Private key outside allowed range\");\n \n-        // whenever a key is imported, we need to scan the whole chain\n-        pwallet->UpdateTimeFirstKey(1);",
      "path": "src/wallet/rpcdump.cpp",
      "position": 83,
      "original_position": 83,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b5aaefb2d52ff0f81619147e949f5472501c8db9",
      "in_reply_to_id": 161081512,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Why'd you move it up in the function instead of keeping its position?",
      "created_at": "2018-01-14T18:45:29Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161406332",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161406332"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 153,
      "original_line": 153,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161406849",
      "pull_request_review_id": 88691465,
      "id": 161406849,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTQwNjg0OQ==",
      "diff_hunk": "@@ -3430,21 +3440,23 @@ UniValue rescanblockchain(const JSONRPCRequest& request)\n         }\n     }\n \n-    CBlockIndex *stopBlock = pwallet->ScanForWalletTransactions(pindexStart, pindexStop, true);\n-    if (!stopBlock) {\n-        if (pwallet->IsAbortingRescan()) {\n-            throw JSONRPCError(RPC_MISC_ERROR, \"Rescan aborted.\");\n+    CBlockIndex *stopBlock = nullptr;\n+    {",
      "path": "src/wallet/rpcwallet.cpp",
      "position": null,
      "original_position": 65,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e43105c17a7bc1ee31027722a093fcfbcb8833a9",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: why scope this? There's no lock to scope, could you not just leave this as-is and only change the chainActive.Tip() call?",
      "created_at": "2018-01-14T19:05:29Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161406849",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161406849"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3444,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161406956",
      "pull_request_review_id": 88691465,
      "id": 161406956,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTQwNjk1Ng==",
      "diff_hunk": "@@ -1656,24 +1661,40 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);",
      "path": "src/wallet/wallet.cpp",
      "position": 65,
      "original_position": 50,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e43105c17a7bc1ee31027722a093fcfbcb8833a9",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not changed in this PR, but it may be nice (here or in a follow-up before we start showing rescan as a progress bar in more places) to not use the tip here and instead use pindexStop. It makes sense to always give progress towards tip if there are (potentially) API clients which are calling with a stop a ways back from our tip.",
      "created_at": "2018-01-14T19:10:44Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161406956",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161406956"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1674,
      "original_line": 1674,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161407018",
      "pull_request_review_id": 88691465,
      "id": 161407018,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTQwNzAxOA==",
      "diff_hunk": "@@ -1683,7 +1704,15 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n             if (pindex == pindexStop) {\n                 break;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);\n+                if (tip != chainActive.Tip()) {\n+                    tip = chainActive.Tip();",
      "path": "src/wallet/wallet.cpp",
      "position": 106,
      "original_position": 87,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e43105c17a7bc1ee31027722a093fcfbcb8833a9",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Same goes for here - while this check makes the behavior not change, I'm not sure the current behavior is exactly optimal...we scan until pindexStop, *not* chainActive.Tip().",
      "created_at": "2018-01-14T19:13:52Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161407018",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161407018"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1714,
      "original_line": 1714,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161407220",
      "pull_request_review_id": 88691465,
      "id": 161407220,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTQwNzIyMA==",
      "diff_hunk": "@@ -86,7 +86,8 @@ UniValue importprivkey(const JSONRPCRequest& request)\n             \"1. \\\"privkey\\\"          (string, required) The private key (see dumpprivkey)\\n\"\n             \"2. \\\"label\\\"            (string, optional, default=\\\"\\\") An optional label\\n\"\n             \"3. rescan               (boolean, optional, default=true) Rescan the wallet for transactions\\n\"\n-            \"\\nNote: This call can take minutes to complete if rescan is true.\\n\"\n+            \"\\nNote: This call can take minutes to complete if rescan is true, during that time, other rpc calls\\n\"\n+            \"may report that the imported key exists but related transactions are still missing.\\n\"",
      "path": "src/wallet/rpcdump.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "0dad810adeb3bbb6a60b722240ee2b90136e8384",
      "in_reply_to_id": null,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You should probably add a \", leading to temporarily incorrect/bogus balances and unspent outputs until rescan completes\" to the warning message.",
      "created_at": "2018-01-14T19:22:34Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161407220",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161407220"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 90,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161602498",
      "pull_request_review_id": 88918188,
      "id": 161602498,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTYwMjQ5OA==",
      "diff_hunk": "@@ -3430,21 +3440,23 @@ UniValue rescanblockchain(const JSONRPCRequest& request)\n         }\n     }\n \n-    CBlockIndex *stopBlock = pwallet->ScanForWalletTransactions(pindexStart, pindexStop, true);\n-    if (!stopBlock) {\n-        if (pwallet->IsAbortingRescan()) {\n-            throw JSONRPCError(RPC_MISC_ERROR, \"Rescan aborted.\");\n+    CBlockIndex *stopBlock = nullptr;\n+    {",
      "path": "src/wallet/rpcwallet.cpp",
      "position": null,
      "original_position": 65,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e43105c17a7bc1ee31027722a093fcfbcb8833a9",
      "in_reply_to_id": 161406849,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Right... fixing.",
      "created_at": "2018-01-15T19:46:02Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161602498",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161602498"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3444,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161602585",
      "pull_request_review_id": 88918284,
      "id": 161602585,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTYwMjU4NQ==",
      "diff_hunk": "@@ -1656,24 +1661,40 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);",
      "path": "src/wallet/wallet.cpp",
      "position": 65,
      "original_position": 50,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e43105c17a7bc1ee31027722a093fcfbcb8833a9",
      "in_reply_to_id": 161406956,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Lets leave this open for a possible followup PR (out of scope here)",
      "created_at": "2018-01-15T19:46:27Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161602585",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161602585"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1674,
      "original_line": 1674,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161604900",
      "pull_request_review_id": 88920866,
      "id": 161604900,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTYwNDkwMA==",
      "diff_hunk": "@@ -86,7 +86,8 @@ UniValue importprivkey(const JSONRPCRequest& request)\n             \"1. \\\"privkey\\\"          (string, required) The private key (see dumpprivkey)\\n\"\n             \"2. \\\"label\\\"            (string, optional, default=\\\"\\\") An optional label\\n\"\n             \"3. rescan               (boolean, optional, default=true) Rescan the wallet for transactions\\n\"\n-            \"\\nNote: This call can take minutes to complete if rescan is true.\\n\"\n+            \"\\nNote: This call can take minutes to complete if rescan is true, during that time, other rpc calls\\n\"\n+            \"may report that the imported key exists but related transactions are still missing.\\n\"",
      "path": "src/wallet/rpcdump.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "0dad810adeb3bbb6a60b722240ee2b90136e8384",
      "in_reply_to_id": 161407220,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed by adding @TheBlueMatt's proposed sentence-part.",
      "created_at": "2018-01-15T19:58:35Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161604900",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161604900"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 90,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161605450",
      "pull_request_review_id": 88921536,
      "id": 161605450,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTYwNTQ1MA==",
      "diff_hunk": "@@ -1218,4 +1222,37 @@ bool CWallet::DummySignTx(CMutableTransaction &txNew, const ContainerType &coins\n     return true;\n }\n \n+/** RAII object to check and reserve a wallet rescan */\n+class WalletRescanReserver\n+{\n+private:\n+    CWalletRef m_wallet;\n+    bool m_could_reserve;\n+public:\n+    explicit WalletRescanReserver(CWalletRef w) : m_wallet(w), m_could_reserve(false) {}\n+\n+    bool reserve()\n+    {\n+        std::lock_guard<std::mutex> lock(m_wallet->mutexScanning);\n+        if (m_wallet->fScanningWallet) {\n+            return false;\n+        }\n+        m_wallet->fScanningWallet = true;\n+        m_could_reserve = true;\n+        return true;\n+    }\n+\n+    bool isReserved() const {\n+        return (m_could_reserve && m_wallet->fScanningWallet);",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 54,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b2cc7020956cfd36925e4957493cd28d1d6f672e",
      "in_reply_to_id": 160389155,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it's better for future changes to keep the check here... don't hurt but may protect from a future mistake.",
      "created_at": "2018-01-15T20:02:06Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161605450",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161605450"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1293,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161605453",
      "pull_request_review_id": 88921541,
      "id": 161605453,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTYwNTQ1Mw==",
      "diff_hunk": "@@ -1218,4 +1222,37 @@ bool CWallet::DummySignTx(CMutableTransaction &txNew, const ContainerType &coins\n     return true;\n }\n \n+/** RAII object to check and reserve a wallet rescan */\n+class WalletRescanReserver\n+{\n+private:\n+    CWalletRef m_wallet;\n+    bool m_could_reserve;\n+public:\n+    explicit WalletRescanReserver(CWalletRef w) : m_wallet(w), m_could_reserve(false) {}\n+\n+    bool reserve()\n+    {\n+        std::lock_guard<std::mutex> lock(m_wallet->mutexScanning);",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 44,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b2cc7020956cfd36925e4957493cd28d1d6f672e",
      "in_reply_to_id": 160389240,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added",
      "created_at": "2018-01-15T20:02:09Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161605453",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161605453"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1282,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161605590",
      "pull_request_review_id": 88921691,
      "id": 161605590,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTYwNTU5MA==",
      "diff_hunk": "@@ -656,6 +657,9 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n     static std::atomic<bool> fFlushScheduled;\n     std::atomic<bool> fAbortRescan;\n     std::atomic<bool> fScanningWallet;",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 11,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b2cc7020956cfd36925e4957493cd28d1d6f672e",
      "in_reply_to_id": 160392235,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's not really controlled by `WalletRescanReserver`. This was added before and `ScanForWalletTransactions` sets it to `true`.",
      "created_at": "2018-01-15T20:02:56Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161605590",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161605590"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161606282",
      "pull_request_review_id": 88922469,
      "id": 161606282,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTYwNjI4Mg==",
      "diff_hunk": "@@ -3430,21 +3440,23 @@ UniValue rescanblockchain(const JSONRPCRequest& request)\n         }\n     }\n \n-    CBlockIndex *stopBlock = pwallet->ScanForWalletTransactions(pindexStart, pindexStop, true);\n-    if (!stopBlock) {\n-        if (pwallet->IsAbortingRescan()) {\n-            throw JSONRPCError(RPC_MISC_ERROR, \"Rescan aborted.\");\n+    CBlockIndex *stopBlock = nullptr;\n+    {",
      "path": "src/wallet/rpcwallet.cpp",
      "position": null,
      "original_position": 65,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e43105c17a7bc1ee31027722a093fcfbcb8833a9",
      "in_reply_to_id": 161406849,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Your right,.. removed the unnecessary scope.",
      "created_at": "2018-01-15T20:07:13Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161606282",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161606282"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3444,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161606416",
      "pull_request_review_id": 88922628,
      "id": 161606416,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTYwNjQxNg==",
      "diff_hunk": "@@ -1639,37 +1640,53 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  *\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n+ *\n+ * Caller needs to make sure pindexStop (and the optional pindexStart) are on\n+ * the main chain after to the addition of any new keys you want to detect\n+ * transactions for.\n  */\n-CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, bool fUpdate)\n+CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, const WalletRescanReserver &reserver, bool fUpdate)\n {\n     int64_t nNow = GetTime();\n     const CChainParams& chainParams = Params();\n \n+    assert(reserver.isReserved());\n     if (pindexStop) {\n         assert(pindexStop->nHeight >= pindexStart->nHeight);\n     }\n \n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 53,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b2cc7020956cfd36925e4957493cd28d1d6f672e",
      "in_reply_to_id": 160391530,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah. I see your point. Removed those sets and mentioned that `fScanningWallet` is controlled by `WalletRescanReserver`.",
      "created_at": "2018-01-15T20:07:58Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r161606416",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161606416"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1666,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163061186",
      "pull_request_review_id": 90617498,
      "id": 163061186,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzA2MTE4Ng==",
      "diff_hunk": "@@ -3436,15 +3446,14 @@ UniValue rescanblockchain(const JSONRPCRequest& request)\n             throw JSONRPCError(RPC_MISC_ERROR, \"Rescan aborted.\");\n         }\n         // if we got a nullptr returned, ScanForWalletTransactions did rescan up to the requested stopindex\n-        stopBlock = pindexStop ? pindexStop : chainActive.Tip();\n+        stopBlock = pindexStop ? pindexStop : pChainTip;\n     }\n     else {\n         throw JSONRPCError(RPC_MISC_ERROR, \"Rescan failed. Potentially corrupted data files.\");\n     }\n-\n     UniValue response(UniValue::VOBJ);\n     response.pushKV(\"start_height\", pindexStart->nHeight);\n-    response.pushKV(\"stop_height\", stopBlock->nHeight);\n+    response.pushKV(\"stop_height\", stopBlock ? stopBlock->nHeight : 0);",
      "path": "src/wallet/rpcwallet.cpp",
      "position": null,
      "original_position": 70,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "48a57eba3447f79672b2c12f1605b3a10becff33",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Avoid permanent cs_main\"\r\n\r\nStrange that this line is changing while the line above isn't. Seems impossible for pindexStart or stopBlock to be null, and odd to be adding a check now only for stopBlock.",
      "created_at": "2018-01-22T20:37:47Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163061186",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163061186"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3456,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163061343",
      "pull_request_review_id": 90617498,
      "id": 163061343,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzA2MTM0Mw==",
      "diff_hunk": "@@ -1614,14 +1614,15 @@ void CWalletTx::GetAmounts(std::list<COutputEntry>& listReceived,\n  */\n int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n {\n-    AssertLockHeld(cs_main);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "48a57eba3447f79672b2c12f1605b3a10becff33",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Avoid permanent cs_main\"\r\n\r\nCould this now assert lock not held, instead of not asserting at all?",
      "created_at": "2018-01-22T20:38:31Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163061343",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163061343"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1617,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163063324",
      "pull_request_review_id": 90617498,
      "id": 163063324,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzA2MzMyNA==",
      "diff_hunk": "@@ -1643,6 +1644,10 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  *\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n+ *\n+ * Caller needs to make sure pindexStop (and the optional pindexStart) are on\n+ * the main chain after to the addition of any new keys you want to detect\n+ * transactions for.",
      "path": "src/wallet/wallet.cpp",
      "position": 35,
      "original_position": 28,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "48a57eba3447f79672b2c12f1605b3a10becff33",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Avoid permanent cs_main\"\r\n\r\nI guess this sentence is added in response to: https://github.com/bitcoin/bitcoin/pull/11281#discussion_r156810727, but I don't understand what it is saying. Since the lock is released, how is the caller supposed to \"make sure\" pindexStop is on the main chain when it may not be? Also, I think part of the comment \"after to the addition of any new keys you want to detect transactions for\" should be be removed, it doesn't seem to be adding any information, and not every caller is even adding keys (e.g. bestblock startup code).\r\n\r\nProbably this should just say that the rescan will abort if there is a reorg and scanning proceeded past the fork point on the wrong chain. Alternately, I don't think it would be hard to clean up this behavior by doing something like Cory suggested: https://github.com/bitcoin/bitcoin/pull/11281#discussion_r139829712, but this could be saved for another PR.",
      "created_at": "2018-01-22T20:47:55Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163063324",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163063324"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1650,
      "original_line": 1650,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163065916",
      "pull_request_review_id": 90617498,
      "id": 163065916,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzA2NTkxNg==",
      "diff_hunk": "@@ -1656,24 +1661,40 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);\n+        }\n         while (pindex && !fAbortRescan)\n         {\n-            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0)\n+            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0) {\n+                LOCK(cs_main);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 56,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "48a57eba3447f79672b2c12f1605b3a10becff33",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Avoid permanent cs_main\"\r\n\r\nSeems like cs_main only needs to be held for GuessVerificationProgress but not ShowProgress? Might be good to reduce lock scope more, or have comment if it can't be reduced.",
      "created_at": "2018-01-22T20:57:33Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163065916",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163065916"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1680,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163070403",
      "pull_request_review_id": 90617498,
      "id": 163070403,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzA3MDQwMw==",
      "diff_hunk": "@@ -1656,24 +1661,40 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);\n+        }\n         while (pindex && !fAbortRescan)\n         {\n-            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0)\n+            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0) {\n+                LOCK(cs_main);\n                 ShowProgress(_(\"Rescanning...\"), std::max(1, std::min(99, (int)((GuessVerificationProgress(chainParams.TxData(), pindex) - dProgressStart) / (dProgressTip - dProgressStart) * 100))));\n+            }\n             if (GetTime() >= nNow + 60) {\n                 nNow = GetTime();\n+                LOCK(cs_main);\n                 LogPrintf(\"Still rescanning. At block %d. Progress=%f\\n\", pindex->nHeight, GuessVerificationProgress(chainParams.TxData(), pindex));\n             }\n \n+            bool readRet = false;\n             CBlock block;\n-            if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+            {\n+                LOCK(cs_main);\n+                readRet = ReadBlockFromDisk(block, pindex, Params().GetConsensus());\n+            }\n+            if (readRet) {\n+                LOCK2(cs_main, cs_wallet);\n+                if (pindex && !chainActive.Contains(pindex)) break;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 74,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "48a57eba3447f79672b2c12f1605b3a10becff33",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Avoid permanent cs_main\"\r\n\r\nBecause of the break here, the \"Returns null if scan was successful\" documentation is no longer correct. Would suggest changing so it's still easily possible to distinguish success from failure:\r\n\r\n```c++\r\nif (pindex && !chainActive.Contains(pindex)) {\r\n    ret = pIndex;\r\n    break;\r\n}\r\n \r\n```\r\n\r\nAlso, the reason for this check is obscure enough (https://github.com/bitcoin/bitcoin/pull/11281#discussion_r155326447) that it I think it deserves some kind of comment. I would suggest something like \"Abort scan if current block is no longer active, to prevent marking transactions as coming from the wrong block.\"\r\n",
      "created_at": "2018-01-22T21:15:56Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163070403",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163070403"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1697,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163078419",
      "pull_request_review_id": 90617498,
      "id": 163078419,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzA3ODQxOQ==",
      "diff_hunk": "@@ -1218,4 +1222,37 @@ bool CWallet::DummySignTx(CMutableTransaction &txNew, const ContainerType &coins\n     return true;\n }\n \n+/** RAII object to check and reserve a wallet rescan */\n+class WalletRescanReserver\n+{\n+private:\n+    CWalletRef m_wallet;\n+    bool m_could_reserve;\n+public:\n+    explicit WalletRescanReserver(CWalletRef w) : m_wallet(w), m_could_reserve(false) {}\n+\n+    bool reserve()\n+    {\n+        std::lock_guard<std::mutex> lock(m_wallet->mutexScanning);\n+        if (m_wallet->fScanningWallet) {\n+            return false;\n+        }\n+        m_wallet->fScanningWallet = true;\n+        m_could_reserve = true;\n+        return true;\n+    }\n+\n+    bool isReserved() const {\n+        return (m_could_reserve && m_wallet->fScanningWallet);",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 54,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "b2cc7020956cfd36925e4957493cd28d1d6f672e",
      "in_reply_to_id": 160389155,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Make sure WalletRescanReserver has successfully reserved\".\r\n\r\nAlternative could be to just `return m_could_reserve` and assert `!m_could_reserve || fScanningWallet`, so if there is a future mistake, it can be detected instead of papered over.\r\n\r\nAlso formatting here is inconsistent, opening brace for function goes on new line.\r\n\r\n",
      "created_at": "2018-01-22T21:48:11Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163078419",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163078419"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1293,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163461397",
      "pull_request_review_id": 91073738,
      "id": 163461397,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzQ2MTM5Nw==",
      "diff_hunk": "@@ -1614,14 +1614,15 @@ void CWalletTx::GetAmounts(std::list<COutputEntry>& listReceived,\n  */\n int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n {\n-    AssertLockHeld(cs_main);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "48a57eba3447f79672b2c12f1605b3a10becff33",
      "in_reply_to_id": 163061343,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't think we should enforce *not* locking cs_main at this point.",
      "created_at": "2018-01-24T06:17:48Z",
      "updated_at": "2018-01-24T06:25:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163461397",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163461397"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1617,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163462196",
      "pull_request_review_id": 91074627,
      "id": 163462196,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzQ2MjE5Ng==",
      "diff_hunk": "@@ -3436,15 +3446,14 @@ UniValue rescanblockchain(const JSONRPCRequest& request)\n             throw JSONRPCError(RPC_MISC_ERROR, \"Rescan aborted.\");\n         }\n         // if we got a nullptr returned, ScanForWalletTransactions did rescan up to the requested stopindex\n-        stopBlock = pindexStop ? pindexStop : chainActive.Tip();\n+        stopBlock = pindexStop ? pindexStop : pChainTip;\n     }\n     else {\n         throw JSONRPCError(RPC_MISC_ERROR, \"Rescan failed. Potentially corrupted data files.\");\n     }\n-\n     UniValue response(UniValue::VOBJ);\n     response.pushKV(\"start_height\", pindexStart->nHeight);\n-    response.pushKV(\"stop_height\", stopBlock->nHeight);\n+    response.pushKV(\"stop_height\", stopBlock ? stopBlock->nHeight : 0);",
      "path": "src/wallet/rpcwallet.cpp",
      "position": null,
      "original_position": 70,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "48a57eba3447f79672b2c12f1605b3a10becff33",
      "in_reply_to_id": 163061186,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes. Your right. Fixed (removed the extra nullptr check).",
      "created_at": "2018-01-24T06:25:23Z",
      "updated_at": "2018-01-24T06:25:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163462196",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163462196"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3456,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163462299",
      "pull_request_review_id": 91074731,
      "id": 163462299,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzQ2MjI5OQ==",
      "diff_hunk": "@@ -1643,6 +1644,10 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  *\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n+ *\n+ * Caller needs to make sure pindexStop (and the optional pindexStart) are on\n+ * the main chain after to the addition of any new keys you want to detect\n+ * transactions for.",
      "path": "src/wallet/wallet.cpp",
      "position": 35,
      "original_position": 28,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "48a57eba3447f79672b2c12f1605b3a10becff33",
      "in_reply_to_id": 163063324,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I keep that comment for now and leave it open for another PR. The comment was directly proposed (word by word) by @TheBlueMatt.",
      "created_at": "2018-01-24T06:26:08Z",
      "updated_at": "2018-01-24T06:26:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163462299",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163462299"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1650,
      "original_line": 1650,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163462322",
      "pull_request_review_id": 91074753,
      "id": 163462322,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzQ2MjMyMg==",
      "diff_hunk": "@@ -1656,24 +1661,40 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);\n+        }\n         while (pindex && !fAbortRescan)\n         {\n-            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0)\n+            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0) {\n+                LOCK(cs_main);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 56,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "48a57eba3447f79672b2c12f1605b3a10becff33",
      "in_reply_to_id": 163065916,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good pont. Fixed.",
      "created_at": "2018-01-24T06:26:18Z",
      "updated_at": "2018-01-24T06:26:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163462322",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163462322"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1680,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163462541",
      "pull_request_review_id": 91075014,
      "id": 163462541,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzQ2MjU0MQ==",
      "diff_hunk": "@@ -1656,24 +1661,40 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);\n+        }\n         while (pindex && !fAbortRescan)\n         {\n-            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0)\n+            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0) {\n+                LOCK(cs_main);\n                 ShowProgress(_(\"Rescanning...\"), std::max(1, std::min(99, (int)((GuessVerificationProgress(chainParams.TxData(), pindex) - dProgressStart) / (dProgressTip - dProgressStart) * 100))));\n+            }\n             if (GetTime() >= nNow + 60) {\n                 nNow = GetTime();\n+                LOCK(cs_main);\n                 LogPrintf(\"Still rescanning. At block %d. Progress=%f\\n\", pindex->nHeight, GuessVerificationProgress(chainParams.TxData(), pindex));\n             }\n \n+            bool readRet = false;\n             CBlock block;\n-            if (ReadBlockFromDisk(block, pindex, Params().GetConsensus())) {\n+            {\n+                LOCK(cs_main);\n+                readRet = ReadBlockFromDisk(block, pindex, Params().GetConsensus());\n+            }\n+            if (readRet) {\n+                LOCK2(cs_main, cs_wallet);\n+                if (pindex && !chainActive.Contains(pindex)) break;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 74,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "48a57eba3447f79672b2c12f1605b3a10becff33",
      "in_reply_to_id": 163070403,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nice catch! Thanks. Fixed.",
      "created_at": "2018-01-24T06:28:26Z",
      "updated_at": "2018-01-24T06:28:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163462541",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163462541"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1697,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163494846",
      "pull_request_review_id": 91113017,
      "id": 163494846,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzQ5NDg0Ng==",
      "diff_hunk": "@@ -1263,4 +1267,39 @@ CTxDestination GetDestinationForKey(const CPubKey& key, OutputType);\n /** Get all destinations (potentially) supported by the wallet for the given key. */\n std::vector<CTxDestination> GetAllDestinationsForKey(const CPubKey& key);\n \n+/** RAII object to check and reserve a wallet rescan */\n+class WalletRescanReserver\n+{\n+private:\n+    CWalletRef m_wallet;\n+    bool m_could_reserve;\n+public:\n+    explicit WalletRescanReserver(CWalletRef w) : m_wallet(w), m_could_reserve(false) {}\n+\n+    bool reserve()\n+    {\n+        assert(!m_could_reserve);\n+        std::lock_guard<std::mutex> lock(m_wallet->mutexScanning);\n+        if (m_wallet->fScanningWallet) {\n+            return false;\n+        }\n+        m_wallet->fScanningWallet = true;\n+        m_could_reserve = true;\n+        return true;\n+    }\n+\n+    bool isReserved() const\n+    {\n+        return (m_could_reserve && m_wallet->fScanningWallet);\n+    }\n+\n+    ~WalletRescanReserver()\n+    {\n+        std::lock_guard<std::mutex> lock(m_wallet->mutexScanning);",
      "path": "src/wallet/wallet.h",
      "position": 63,
      "original_position": 63,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Lock inside `if`.",
      "created_at": "2018-01-24T09:38:26Z",
      "updated_at": "2018-01-24T11:06:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163494846",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163494846"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1298,
      "original_line": 1298,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163496905",
      "pull_request_review_id": 91113017,
      "id": 163496905,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzQ5NjkwNQ==",
      "diff_hunk": "@@ -1263,4 +1267,39 @@ CTxDestination GetDestinationForKey(const CPubKey& key, OutputType);\n /** Get all destinations (potentially) supported by the wallet for the given key. */\n std::vector<CTxDestination> GetAllDestinationsForKey(const CPubKey& key);\n \n+/** RAII object to check and reserve a wallet rescan */\n+class WalletRescanReserver\n+{\n+private:\n+    CWalletRef m_wallet;\n+    bool m_could_reserve;\n+public:\n+    explicit WalletRescanReserver(CWalletRef w) : m_wallet(w), m_could_reserve(false) {}\n+\n+    bool reserve()\n+    {\n+        assert(!m_could_reserve);\n+        std::lock_guard<std::mutex> lock(m_wallet->mutexScanning);\n+        if (m_wallet->fScanningWallet) {\n+            return false;\n+        }\n+        m_wallet->fScanningWallet = true;\n+        m_could_reserve = true;\n+        return true;\n+    }\n+\n+    bool isReserved() const\n+    {\n+        return (m_could_reserve && m_wallet->fScanningWallet);",
      "path": "src/wallet/wallet.h",
      "position": 58,
      "original_position": 58,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Just `return m_could_reserve;`?",
      "created_at": "2018-01-24T09:46:50Z",
      "updated_at": "2018-01-24T11:06:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163496905",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163496905"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1293,
      "original_line": 1293,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163497435",
      "pull_request_review_id": 91113017,
      "id": 163497435,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzQ5NzQzNQ==",
      "diff_hunk": "@@ -668,7 +669,10 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n private:\n     static std::atomic<bool> fFlushScheduled;\n     std::atomic<bool> fAbortRescan;\n-    std::atomic<bool> fScanningWallet;\n+    std::atomic<bool> fScanningWallet; //controlled by WalletRescanReserver",
      "path": "src/wallet/wallet.h",
      "position": 13,
      "original_position": 13,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Since it's guarded by `mutexScanning`, drop `std::atomic`?",
      "created_at": "2018-01-24T09:48:59Z",
      "updated_at": "2018-01-24T11:06:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163497435",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163497435"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 672,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163501235",
      "pull_request_review_id": 91113017,
      "id": 163501235,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzUwMTIzNQ==",
      "diff_hunk": "@@ -1643,37 +1644,60 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  *\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n+ *\n+ * Caller needs to make sure pindexStop (and the optional pindexStart) are on\n+ * the main chain after to the addition of any new keys you want to detect\n+ * transactions for.\n  */\n-CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, bool fUpdate)\n+CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, const WalletRescanReserver &reserver, bool fUpdate)",
      "path": "src/wallet/wallet.cpp",
      "position": 38,
      "original_position": 38,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit, space `WalletRescanReserver& reserver`.",
      "created_at": "2018-01-24T10:02:51Z",
      "updated_at": "2018-01-24T11:06:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163501235",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163501235"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1652,
      "original_line": 1652,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163503788",
      "pull_request_review_id": 91113017,
      "id": 163503788,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzUwMzc4OA==",
      "diff_hunk": "@@ -1656,24 +1661,40 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n         fScanningWallet = true;\n \n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);",
      "path": "src/wallet/wallet.cpp",
      "position": 65,
      "original_position": 50,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "e43105c17a7bc1ee31027722a093fcfbcb8833a9",
      "in_reply_to_id": 161406956,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Agree with @TheBlueMatt, the *follow the tip thing* could be elsewhere (another PR).\r\n\r\n@TheBlueMatt do you suggest to rescan up to pIndexStop even if at some point a block is no longer in the active chain?",
      "created_at": "2018-01-24T10:13:28Z",
      "updated_at": "2018-01-24T11:06:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163503788",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163503788"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1674,
      "original_line": 1674,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163937257",
      "pull_request_review_id": 91634643,
      "id": 163937257,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzkzNzI1Nw==",
      "diff_hunk": "@@ -1643,37 +1644,60 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  *\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n+ *\n+ * Caller needs to make sure pindexStop (and the optional pindexStart) are on\n+ * the main chain after to the addition of any new keys you want to detect\n+ * transactions for.\n  */\n-CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, bool fUpdate)\n+CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, const WalletRescanReserver &reserver, bool fUpdate)\n {\n     int64_t nNow = GetTime();\n     const CChainParams& chainParams = Params();\n \n+    assert(reserver.isReserved());\n     if (pindexStop) {\n         assert(pindexStop->nHeight >= pindexStart->nHeight);\n     }\n \n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n-        fScanningWallet = true;\n-\n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);\n+        }\n         while (pindex && !fAbortRescan)\n         {\n-            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0)\n-                ShowProgress(_(\"Rescanning...\"), std::max(1, std::min(99, (int)((GuessVerificationProgress(chainParams.TxData(), pindex) - dProgressStart) / (dProgressTip - dProgressStart) * 100))));\n+            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0) {\n+                double gvp = 0;\n+                {\n+                    LOCK(cs_main);",
      "path": "src/wallet/wallet.cpp",
      "position": 74,
      "original_position": 74,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@jonasschnelli, is this lock necessary? It seems like either this should be removed, or else a lock needs to be added below at line 1721 (https://github.com/bitcoin/bitcoin/pull/11281/files#diff-b2bb174788c7409b671c46ccc86034bdR1721) if cs_main is required to call GuessVerificationProgress.",
      "created_at": "2018-01-25T19:01:52Z",
      "updated_at": "2018-01-25T19:01:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163937257",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163937257"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1681,
      "original_line": 1681,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163947997",
      "pull_request_review_id": 91647472,
      "id": 163947997,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2Mzk0Nzk5Nw==",
      "diff_hunk": "@@ -1643,37 +1644,60 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  *\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n+ *\n+ * Caller needs to make sure pindexStop (and the optional pindexStart) are on\n+ * the main chain after to the addition of any new keys you want to detect\n+ * transactions for.\n  */\n-CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, bool fUpdate)\n+CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, const WalletRescanReserver &reserver, bool fUpdate)\n {\n     int64_t nNow = GetTime();\n     const CChainParams& chainParams = Params();\n \n+    assert(reserver.isReserved());\n     if (pindexStop) {\n         assert(pindexStop->nHeight >= pindexStart->nHeight);\n     }\n \n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n-        fScanningWallet = true;\n-\n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);\n+        }\n         while (pindex && !fAbortRescan)\n         {\n-            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0)\n-                ShowProgress(_(\"Rescanning...\"), std::max(1, std::min(99, (int)((GuessVerificationProgress(chainParams.TxData(), pindex) - dProgressStart) / (dProgressTip - dProgressStart) * 100))));\n+            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0) {\n+                double gvp = 0;\n+                {\n+                    LOCK(cs_main);",
      "path": "src/wallet/wallet.cpp",
      "position": 74,
      "original_position": 74,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "in_reply_to_id": 163937257,
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think GVP needs cs_main (@TheBlueMatt?), so, yes, your right, L1721 should also have one... working on a fixup.",
      "created_at": "2018-01-25T19:43:39Z",
      "updated_at": "2018-01-25T19:43:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163947997",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163947997"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1681,
      "original_line": 1681,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163948323",
      "pull_request_review_id": 91647861,
      "id": 163948323,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2Mzk0ODMyMw==",
      "diff_hunk": "@@ -1683,14 +1707,20 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n             if (pindex == pindexStop) {\n                 break;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 104,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think there is still a bug here where scan will return success (`nullptr`) if it gets aborted due to a reorg.\r\n\r\nMaybe this line:\r\n\r\n```c++\r\npindex = chainActive.Next(pindex);\r\n```\r\n\r\nshould be changed to something like:\r\n\r\n```c++\r\nif (CBlockIndex* new_index = chainActive.Next(pindex)) {\r\n    pindex = new_index;\r\n} else {\r\n    /* aborting, reorg */\r\n    ret = pindex;\r\n    break;\r\n}\r\n```\r\n\r\nAnother alternative could be to resume instead of aborting on reorgs.",
      "created_at": "2018-01-25T19:44:54Z",
      "updated_at": "2018-01-25T19:44:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163948323",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163948323"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163949348",
      "pull_request_review_id": 91649090,
      "id": 163949348,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2Mzk0OTM0OA==",
      "diff_hunk": "@@ -1643,37 +1644,60 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  *\n  * If pindexStop is not a nullptr, the scan will stop at the block-index\n  * defined by pindexStop\n+ *\n+ * Caller needs to make sure pindexStop (and the optional pindexStart) are on\n+ * the main chain after to the addition of any new keys you want to detect\n+ * transactions for.\n  */\n-CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, bool fUpdate)\n+CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, const WalletRescanReserver &reserver, bool fUpdate)\n {\n     int64_t nNow = GetTime();\n     const CChainParams& chainParams = Params();\n \n+    assert(reserver.isReserved());\n     if (pindexStop) {\n         assert(pindexStop->nHeight >= pindexStart->nHeight);\n     }\n \n     CBlockIndex* pindex = pindexStart;\n     CBlockIndex* ret = nullptr;\n     {\n-        LOCK2(cs_main, cs_wallet);\n         fAbortRescan = false;\n-        fScanningWallet = true;\n-\n         ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n-        double dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n-        double dProgressTip = GuessVerificationProgress(chainParams.TxData(), chainActive.Tip());\n+        CBlockIndex* tip = nullptr;\n+        double dProgressStart;\n+        double dProgressTip;\n+        {\n+            LOCK(cs_main);\n+            tip = chainActive.Tip();\n+            dProgressStart = GuessVerificationProgress(chainParams.TxData(), pindex);\n+            dProgressTip = GuessVerificationProgress(chainParams.TxData(), tip);\n+        }\n         while (pindex && !fAbortRescan)\n         {\n-            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0)\n-                ShowProgress(_(\"Rescanning...\"), std::max(1, std::min(99, (int)((GuessVerificationProgress(chainParams.TxData(), pindex) - dProgressStart) / (dProgressTip - dProgressStart) * 100))));\n+            if (pindex->nHeight % 100 == 0 && dProgressTip - dProgressStart > 0.0) {\n+                double gvp = 0;\n+                {\n+                    LOCK(cs_main);",
      "path": "src/wallet/wallet.cpp",
      "position": 74,
      "original_position": 74,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "in_reply_to_id": 163937257,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Great, thanks for addressing this.\r\n\r\n> I think GVP needs cs_main\r\n\r\nI was curious about this. It would be good for GuessVerificationProgress comment to mention that it needs cs_main, since it isn't really obvious one way or the other.",
      "created_at": "2018-01-25T19:48:51Z",
      "updated_at": "2018-01-25T19:48:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163949348",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163949348"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1681,
      "original_line": 1681,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163954610",
      "pull_request_review_id": 91655215,
      "id": 163954610,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2Mzk1NDYxMA==",
      "diff_hunk": "@@ -1683,14 +1707,20 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n             if (pindex == pindexStop) {\n                 break;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 104,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "in_reply_to_id": 163948323,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> should be changed to something like:\r\n\r\nI think my suggestion above won't work because it will return an error when pindex points to the the tip. Maybe simplest fix would be to restructure the code a little to just acquire cs_main once after ReadBlockFromDisk instead of acquiring, releasing, then immediately re-acquiring. That way there is would be no chance of reorg between the `chainActive.Contains` check above and this `chainActive.Next` call.\r\n",
      "created_at": "2018-01-25T20:09:22Z",
      "updated_at": "2018-01-25T20:09:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r163954610",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/163954610"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164138244",
      "pull_request_review_id": 91869644,
      "id": 164138244,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2NDEzODI0NA==",
      "diff_hunk": "@@ -1683,14 +1707,20 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock\n             if (pindex == pindexStop) {\n                 break;\n             }\n-            pindex = chainActive.Next(pindex);\n+            {\n+                LOCK(cs_main);\n+                pindex = chainActive.Next(pindex);",
      "path": "src/wallet/wallet.cpp",
      "position": 104,
      "original_position": 104,
      "commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "original_commit_id": "7f812502b78b76653bbef19169e8a05873ee3b8d",
      "in_reply_to_id": 163948323,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> I think there is still a bug here where scan will return success\r\n\r\nSorry for the churn, but I no longer think there's a bug here. Opened #12275 to try to clarify the return value.",
      "created_at": "2018-01-26T15:22:48Z",
      "updated_at": "2018-01-26T15:22:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/11281#discussion_r164138244",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/164138244"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11281"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    }
  ]
}