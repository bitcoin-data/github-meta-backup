{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622",
    "id": 1346100303,
    "node_id": "PR_kwDOABII585QO9xP",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/27622",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/27622.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/27622.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27622",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27622/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
    "number": 27622,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Fee estimation: avoid serving stale fee estimate",
    "user": {
      "login": "ismaelsadeeq",
      "id": 48946461,
      "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ismaelsadeeq",
      "html_url": "https://github.com/ismaelsadeeq",
      "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
      "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
      "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
      "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
      "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixes #27555\r\n\r\nThe issue arises when an old `fee_estimates.dat` file is sometimes read during initialization.\r\nOr after an unclean shutdown, the latest fee estimates are not flushed to `fee_estimates.dat`.\r\nIf the fee estimates in the old file are old, they can cause transactions to become stuck in the mempool. \r\nThis  PR ensures that nodes do not use stale estimates from the old file during initialization. If  `fee_estimates.dat` \r\nhas not been updated for 60 hours or more, it is considered stale and will not be read during initialization. To avoid \r\nhaving old estimates, the `fee_estimates.dat` file will be flushed periodically every hour. As mentioned #27555\r\n\r\n> \"The immediate improvement would be to store fee estimates to disk once an hour or so to reduce the chance of having an old file. From there, this case could probably be detected, and refuse to serve estimates until we sync.\"\r\n\r\nIn addition, I will follow-up PR to persist the `mempoolminfee` across restarts.",
    "labels": [
      {
        "id": 82428251,
        "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
        "name": "TX fees and policy",
        "color": "5319e7",
        "default": false
      }
    ],
    "created_at": "2023-05-10T22:16:59Z",
    "updated_at": "2023-06-06T16:42:41Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "171b671783e25a69136905dc330f58c2709fa72c",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ismaelsadeeq:05-2023-avoid-serving-stale-fee-estimate",
      "ref": "05-2023-avoid-serving-stale-fee-estimate",
      "sha": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 577730599,
        "node_id": "R_kgDOIm94Jw",
        "name": "bitcoin",
        "full_name": "ismaelsadeeq/bitcoin",
        "owner": {
          "login": "ismaelsadeeq",
          "id": 48946461,
          "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
          "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ismaelsadeeq",
          "html_url": "https://github.com/ismaelsadeeq",
          "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
          "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
          "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
          "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
          "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/ismaelsadeeq/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ismaelsadeeq/bitcoin",
        "archive_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ismaelsadeeq/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ismaelsadeeq/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ismaelsadeeq/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/hooks",
        "svn_url": "https://github.com/ismaelsadeeq/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 230763,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T12:50:04Z",
        "created_at": "2022-12-13T11:54:34Z",
        "updated_at": "2023-03-10T09:46:26Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "8cc65f093c0cf7a27b3bfc6da90fd7a6ac8f5e48",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34325,
        "stargazers_count": 69819,
        "watchers_count": 69819,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 626,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-07T07:29:24Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T07:34:31Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 133,
    "deletions": 3,
    "changed_files": 4,
    "commits": 3,
    "review_comments": 43,
    "comments": 4
  },
  "events": [
    {
      "event": "commented",
      "id": 1542881490,
      "node_id": "IC_kwDOABII585b9oDS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1542881490",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-10T22:17:01Z",
      "updated_at": "2023-06-06T13:04:19Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [instagibbs](https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1465157911) |\n| Concept ACK | [pinheadmz](https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1433103480) |\n| Approach ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1434616046) |\n| Stale ACK | [willcl-ark](https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1464599043) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25380](https://github.com/bitcoin/bitcoin/pull/25380) (Detect and ignore transactions that were CPFP'd in the fee estimator by darosior)\n* [#10443](https://github.com/bitcoin/bitcoin/pull/10443) (Add fee_est tool for debugging fee estimation code by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#issuecomment-1542881490",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27622"
    },
    {
      "event": "commented",
      "id": 1543653619,
      "node_id": "IC_kwDOABII585cAkjz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1543653619",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-11T09:27:25Z",
      "updated_at": "2023-05-11T09:27:25Z",
      "author_association": "MEMBER",
      "body": "cc @instagibbs @TheBlueMatt ",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#issuecomment-1543653619",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27622"
    },
    {
      "event": "mentioned",
      "id": 9220101282,
      "node_id": "MEE_lADOABII585lm6OPzwAAAAIlj5Si",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9220101282",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-11T09:27:25Z"
    },
    {
      "event": "subscribed",
      "id": 9220101293,
      "node_id": "SE_lADOABII585lm6OPzwAAAAIlj5St",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9220101293",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-11T09:27:25Z"
    },
    {
      "event": "mentioned",
      "id": 9220101310,
      "node_id": "MEE_lADOABII585lm6OPzwAAAAIlj5S-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9220101310",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-11T09:27:25Z"
    },
    {
      "event": "subscribed",
      "id": 9220101319,
      "node_id": "SE_lADOABII585lm6OPzwAAAAIlj5TH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9220101319",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-11T09:27:25Z"
    },
    {
      "event": "reviewed",
      "id": 1422800079,
      "node_id": "PRR_kwDOABII585UzjTP",
      "url": null,
      "actor": null,
      "commit_id": "a2ad5e475f318552c50bcc8bb966c4841d7ef8b4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1422800079",
      "submitted_at": "2023-05-11T14:52:03Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
    },
    {
      "event": "labeled",
      "id": 9223412542,
      "node_id": "LE_lADOABII585lm6OPzwAAAAIlwhs-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9223412542",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-11T14:52:12Z",
      "label": {
        "name": "TX fees and policy",
        "color": "5319e7"
      }
    },
    {
      "event": "reviewed",
      "id": 1422877741,
      "node_id": "PRR_kwDOABII585Uz2Qt",
      "url": null,
      "actor": null,
      "commit_id": "a2ad5e475f318552c50bcc8bb966c4841d7ef8b4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "lgtm. Left some nits",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1422877741",
      "submitted_at": "2023-05-11T15:32:37Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9225665790,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIl5Hz-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9225665790",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-11T18:43:05Z"
    },
    {
      "event": "reviewed",
      "id": 1423253142,
      "node_id": "PRR_kwDOABII585U1R6W",
      "url": null,
      "actor": null,
      "commit_id": "0d2329aecaa39f328fec84f63f0bebf31e49b070",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1423253142",
      "submitted_at": "2023-05-11T18:59:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9227030424,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIl-U-Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9227030424",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-11T21:39:12Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9227573416,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAImAZio",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9227573416",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-11T23:09:18Z"
    },
    {
      "event": "reviewed",
      "id": 1431475355,
      "node_id": "PRR_kwDOABII585VUpSb",
      "url": null,
      "actor": null,
      "commit_id": "aecd92e8e1ca8be8c76cc9621058614c893c47fc",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1431475355",
      "submitted_at": "2023-05-17T20:00:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9278517721,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIpCvHZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9278517721",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T11:01:31Z"
    },
    {
      "event": "labeled",
      "id": 9279122680,
      "node_id": "LE_lADOABII585lm6OPzwAAAAIpFCz4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9279122680",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T12:10:43Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9279696004,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIpHOyE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9279696004",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T13:14:43Z"
    },
    {
      "event": "unlabeled",
      "id": 9280377093,
      "node_id": "UNLE_lADOABII585lm6OPzwAAAAIpJ1EF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9280377093",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T14:19:18Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1433103480,
      "node_id": "PRR_kwDOABII585Va2x4",
      "url": null,
      "actor": null,
      "commit_id": "b02e3fc91f4214c486da0ff46e187fab017e11bb",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "concept ACK\r\n\r\nThis should solve the stale fee issue, the test is clever and effective. I ensured the test fails without the patch and also checked the test failed when the mtime was set < 12 hours. Reviewed code and left some notes / questions",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1433103480",
      "submitted_at": "2023-05-18T18:15:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
    },
    {
      "event": "unsubscribed",
      "id": 9282796922,
      "node_id": "UE_lADOABII585lm6OPzwAAAAIpTD16",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9282796922",
      "actor": {
        "login": "joostjager",
        "id": 4638168,
        "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joostjager",
        "html_url": "https://github.com/joostjager",
        "followers_url": "https://api.github.com/users/joostjager/followers",
        "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
        "organizations_url": "https://api.github.com/users/joostjager/orgs",
        "repos_url": "https://api.github.com/users/joostjager/repos",
        "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/joostjager/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T18:46:45Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9284167239,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIpYSZH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9284167239",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T22:13:14Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9284375800,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIpZFT4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9284375800",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T23:02:14Z"
    },
    {
      "event": "labeled",
      "id": 9284376175,
      "node_id": "LE_lADOABII585lm6OPzwAAAAIpZFZv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9284376175",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T23:02:19Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9284622376,
      "node_id": "UNLE_lADOABII585lm6OPzwAAAAIpaBgo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9284622376",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-19T00:02:36Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1434616046,
      "node_id": "PRR_kwDOABII585VgoDu",
      "url": null,
      "actor": null,
      "commit_id": "473946b05e911fca96a1ec077db19910819e8aed",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Approach ACK",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1434616046",
      "submitted_at": "2023-05-19T15:20:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9291094305,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIpytkh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9291094305",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-19T16:49:34Z"
    },
    {
      "event": "labeled",
      "id": 9291169269,
      "node_id": "LE_lADOABII585lm6OPzwAAAAIpy_31",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9291169269",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-19T17:00:19Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9291173679,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIpzA8v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9291173679",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-19T17:00:59Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9291536835,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIp0ZnD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9291536835",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-19T17:48:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9294105715,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIp-Mxz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9294105715",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-20T08:54:35Z"
    },
    {
      "event": "unlabeled",
      "id": 9294252811,
      "node_id": "UNLE_lADOABII585lm6OPzwAAAAIp-wsL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9294252811",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-20T10:04:00Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9350968533,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAItXHTV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9350968533",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T13:38:35Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9351028623,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAItXV-P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9351028623",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-26T13:44:36Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9408404100,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIwyNqE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9408404100",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-01T22:08:41Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9408514721,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIwyoqh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9408514721",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-01T22:27:55Z"
    },
    {
      "event": "labeled",
      "id": 9408515120,
      "node_id": "LE_lADOABII585lm6OPzwAAAAIwyoww",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9408515120",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-01T22:28:00Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9408840458,
      "node_id": "UNLE_lADOABII585lm6OPzwAAAAIwz4MK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9408840458",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-01T23:40:00Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1457521354,
      "node_id": "PRR_kwDOABII585W4ALK",
      "url": null,
      "actor": null,
      "commit_id": "8c51cd00fb08143638f6f94b2e05b43f737bc072",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Looking good, just a couple of test suggestions.\r\n\r\nAlso wondering if we should include a hidden argument to allow older files for testing reasons, re: https://github.com/bitcoin/bitcoin/issues/27415 \r\n\r\nI've used it for systems I've built for integration testing, and not having to touch a file during testing to refresh it would be a simplification.\r\n\r\n> For testing, they could mock the time right?\r\n\r\nDepends on your test setup, really. It might interfere during integration tests which require a realistic clock?",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1457521354",
      "submitted_at": "2023-06-02T13:58:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
    },
    {
      "event": "commented",
      "id": 1573845849,
      "node_id": "IC_kwDOABII585dzvtZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1573845849",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-02T14:38:03Z",
      "updated_at": "2023-06-02T14:38:03Z",
      "author_association": "MEMBER",
      "body": "> Also wondering if we should include a hidden argument to allow older files for testing reasons, re: #27415\r\n> \r\n> I've used it for systems I've built for integration testing, and not having to touch a file during testing to refresh it would be a simplification.\r\n> \r\n> > For testing, they could mock the time right?\r\n> \r\n> Depends on your test setup, really. It might interfere during integration tests which require a realistic clock?\r\n\r\nMakes sense, seems fine as a regtest-only option for testing.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#issuecomment-1573845849",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27622"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9418672836,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIxZYrE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9418672836",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-02T22:59:36Z"
    },
    {
      "event": "commented",
      "id": 1574425436,
      "node_id": "IC_kwDOABII585d19Nc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1574425436",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-02T23:12:59Z",
      "updated_at": "2023-06-02T23:30:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Also wondering if we should include a hidden argument to allow older files for testing reasons, re: #27415\r\n> I've used it for systems I've built for integration testing, and not having to touch a file during testing to refresh it would be a simplification.\r\n> \r\n> > For testing, they could mock the time right?\r\n> \r\n> Depends on your test setup, really. It might interfere during integration tests which require a realistic clock?\r\n>\r\n> Makes sense, seems fine as a regtest-only option for testing.\r\n\r\nSure I will follow up on that.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#issuecomment-1574425436",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27622"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9418864422,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIxaHcm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9418864422",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-02T23:55:26Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRlZDk5MWRiZDE1OTZhYzMxMTk3MjZiMmU5ZDM2NGU2YTRmNDFmYjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4ed991dbd1596ac3119726b2e9d364e6a4f41fb8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4ed991dbd1596ac3119726b2e9d364e6a4f41fb8",
      "tree": {
        "sha": "869d34221d699f8a6f119532af4e05d63ceb2a37",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/869d34221d699f8a6f119532af4e05d63ceb2a37"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7f2019755d147e7e17c54f0bb61296211bb45262",
          "sha": "7f2019755d147e7e17c54f0bb61296211bb45262",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7f2019755d147e7e17c54f0bb61296211bb45262"
        }
      ],
      "message": "tx fees, policy: periodically flush fee estimates to fee_estimates.dat\n\nThis reduces chances of having old estimates in fee_estimates.dat.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2023-06-02T23:55:34Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2023-06-01T22:06:24Z"
      },
      "sha": "4ed991dbd1596ac3119726b2e9d364e6a4f41fb8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGViNGYyOTEyMWVhYzFkNzYwYTYzZmUwN2ZiODI2ZTMyMTE5NDkwNmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eb4f29121eac1d760a63fe07fb826e321194906f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/eb4f29121eac1d760a63fe07fb826e321194906f",
      "tree": {
        "sha": "ada8df7b3eeb1f555d97ddf7b797ee5164e51777",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ada8df7b3eeb1f555d97ddf7b797ee5164e51777"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4ed991dbd1596ac3119726b2e9d364e6a4f41fb8",
          "sha": "4ed991dbd1596ac3119726b2e9d364e6a4f41fb8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4ed991dbd1596ac3119726b2e9d364e6a4f41fb8"
        }
      ],
      "message": "tx fees, policy: do not read estimates of old fee_estimates.dat\n\nOld fee estimates could cause transactions to become stuck in the\nmempool. This commit prevents the node from using stale estimates\nfrom an old file.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2023-06-02T23:55:34Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2023-06-01T22:07:39Z"
      },
      "sha": "eb4f29121eac1d760a63fe07fb826e321194906f"
    },
    {
      "event": "reviewed",
      "id": 1464599043,
      "node_id": "PRR_kwDOABII585XTAID",
      "url": null,
      "actor": null,
      "commit_id": "451ab8b513f88f2bf21a96ff1cf98d17fa82362f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 451ab8b513\r\n\r\nLeft a few comments on the test in case you touch that file again, but nothing blocking.\r\n\r\nNot loading very old fee estimates makes good sense to me to further avoid creating stuck transactions.",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1464599043",
      "submitted_at": "2023-06-06T08:39:54Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9445904096,
      "node_id": "HRFPE_lADOABII585lm6OPzwAAAAIzBQ7g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9445904096",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-06T12:50:10Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZkMzZmM2VkYmU3NTQ5Y2ZhYWRjNDhiNDNjMDlkZDNlNTgxZTkyZmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "tree": {
        "sha": "a781181ca92d8c62efe5deb803ed2a36297df0f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a781181ca92d8c62efe5deb803ed2a36297df0f2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eb4f29121eac1d760a63fe07fb826e321194906f",
          "sha": "eb4f29121eac1d760a63fe07fb826e321194906f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/eb4f29121eac1d760a63fe07fb826e321194906f"
        }
      ],
      "message": "test: ensure old fee_estimate.dat not read on restart and flushed\n\nThis commit adds tests to ensure that old fee_estimates.dat files\nare not read and that fee_estimates are periodically flushed to the\nfee_estimates.dat file.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2023-06-06T12:50:19Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2023-06-06T12:50:19Z"
      },
      "sha": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff"
    },
    {
      "event": "reviewed",
      "id": 1465157911,
      "node_id": "PRR_kwDOABII585XVIkX",
      "url": null,
      "actor": null,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "code review ACK 6d36f3edbe7549cfaadc48b43c09dd3e581e92ff\r\n\r\nI'd really prefer we have a regtest-only option to skip the check to impact integration tests the least.",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#pullrequestreview-1465157911",
      "submitted_at": "2023-06-06T13:04:15Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
    },
    {
      "event": "review_requested",
      "id": 9446063268,
      "node_id": "RRE_lADOABII585lm6OPzwAAAAIzB3yk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9446063268",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-06T13:04:20Z",
      "requested_reviewer": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "labeled",
      "id": 9446800052,
      "node_id": "LE_lADOABII585lm6OPzwAAAAIzErq0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9446800052",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-06T14:03:16Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9448555473,
      "node_id": "UNLE_lADOABII585lm6OPzwAAAAIzLYPR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9448555473",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-06T16:42:41Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191301314",
      "pull_request_review_id": 1422800079,
      "id": 1191301314,
      "node_id": "PRRC_kwDOABII585HAdDC",
      "diff_hunk": "@@ -12,6 +12,7 @@\n #include <policy/feerate.h>\n #include <primitives/transaction.h>\n #include <random.h>\n+#include <scheduler.h>",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "a2ad5e475f318552c50bcc8bb966c4841d7ef8b4",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think it's a bit strange for policy/fees to have a dependency on scheduler. Maybe register `FlushFeeEstimates()` with the scheduler within `AppInitMain()` instead?",
      "created_at": "2023-05-11T14:51:02Z",
      "updated_at": "2023-05-11T14:52:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1191301314",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191301314"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 15,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191350003",
      "pull_request_review_id": 1422877741,
      "id": 1191350003,
      "node_id": "PRRC_kwDOABII585HAo7z",
      "diff_hunk": "@@ -53,6 +53,7 @@ constexpr auto TicksSinceEpoch(Timepoint t)\n {\n     return Ticks<Duration>(t.time_since_epoch());\n }\n+constexpr int64_t count_hours(std::chrono::hours t) { return t.count(); }",
      "path": "src/util/time.h",
      "position": null,
      "original_position": 4,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "a2ad5e475f318552c50bcc8bb966c4841d7ef8b4",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit (feel free to ignore): An alternative to adding a function here would be to call the already existing `Ticks<std::chrono::hours>(a)` over `count_hours(a)`, but either seems fine.",
      "created_at": "2023-05-11T15:24:51Z",
      "updated_at": "2023-05-11T15:32:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1191350003",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191350003"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191352778",
      "pull_request_review_id": 1422877741,
      "id": 1191352778,
      "node_id": "PRRC_kwDOABII585HApnK",
      "diff_hunk": "@@ -290,6 +291,38 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.stop_node(0)\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = os.path.join(self.nodes[0].datadir, self.chain, \"fee_estimates.dat\")",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 21,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "a2ad5e475f318552c50bcc8bb966c4841d7ef8b4",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: \r\n\r\n```suggestion\r\n        fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\r\n```",
      "created_at": "2023-05-11T15:26:52Z",
      "updated_at": "2023-05-11T15:32:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1191352778",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191352778"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 303,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191357213",
      "pull_request_review_id": 1422877741,
      "id": 1191357213,
      "node_id": "PRRC_kwDOABII585HAqsd",
      "diff_hunk": "@@ -290,6 +291,38 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.stop_node(0)\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = os.path.join(self.nodes[0].datadir, self.chain, \"fee_estimates.dat\")\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 13 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 13 * hour\n+        os.utime(fee_dat, (last_modified_time, last_modified_time))\n+\n+        # Start node and ensure the fee_estimates.dat file was not read\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"errors\"], [\"Insufficient data or no feerate found\"])\n+\n+\n+    def test_estimate_dat_is_flushed_periodically(self):\n+            # Check if the string \"Flushed fee estimates to fee_estimates.dat.\" is present in the debug log file.\n+            # If it is, it indicates that fee estimates have been successfully flushed to disk.\n+            with self.nodes[0].assert_debug_log(expected_msgs=[\"Flushed fee estimates to fee_estimates.dat.\"]):\n+                # Mock the scheduler for an hour, sleep for a short period to allow the flush to finish\n+                hour = 3600\n+                self.nodes[0].mockscheduler(hour)\n+                time.sleep(1)",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 41,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "a2ad5e475f318552c50bcc8bb966c4841d7ef8b4",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: I am not a fan of uninterruptible sleep in tests. `assert_debug_log` can be used to wait, if you supply a timeout argument (or rely on the default timeout)",
      "created_at": "2023-05-11T15:30:12Z",
      "updated_at": "2023-05-11T15:32:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1191357213",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191357213"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 323,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191566131",
      "pull_request_review_id": 1423228771,
      "id": 1191566131,
      "node_id": "PRRC_kwDOABII585HBdsz",
      "diff_hunk": "@@ -290,6 +291,38 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.stop_node(0)\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = os.path.join(self.nodes[0].datadir, self.chain, \"fee_estimates.dat\")\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 13 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 13 * hour\n+        os.utime(fee_dat, (last_modified_time, last_modified_time))\n+\n+        # Start node and ensure the fee_estimates.dat file was not read\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"errors\"], [\"Insufficient data or no feerate found\"])\n+\n+\n+    def test_estimate_dat_is_flushed_periodically(self):\n+            # Check if the string \"Flushed fee estimates to fee_estimates.dat.\" is present in the debug log file.\n+            # If it is, it indicates that fee estimates have been successfully flushed to disk.\n+            with self.nodes[0].assert_debug_log(expected_msgs=[\"Flushed fee estimates to fee_estimates.dat.\"]):\n+                # Mock the scheduler for an hour, sleep for a short period to allow the flush to finish\n+                hour = 3600\n+                self.nodes[0].mockscheduler(hour)\n+                time.sleep(1)",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 41,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "a2ad5e475f318552c50bcc8bb966c4841d7ef8b4",
      "in_reply_to_id": 1191357213,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you forgot to remove the sleep?",
      "created_at": "2023-05-11T18:48:12Z",
      "updated_at": "2023-05-11T18:48:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1191566131",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191566131"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 323,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191573164",
      "pull_request_review_id": 1423241416,
      "id": 1191573164,
      "node_id": "PRRC_kwDOABII585HBfas",
      "diff_hunk": "@@ -290,6 +291,38 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.stop_node(0)\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = os.path.join(self.nodes[0].datadir, self.chain, \"fee_estimates.dat\")\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 13 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 13 * hour\n+        os.utime(fee_dat, (last_modified_time, last_modified_time))\n+\n+        # Start node and ensure the fee_estimates.dat file was not read\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"errors\"], [\"Insufficient data or no feerate found\"])\n+\n+\n+    def test_estimate_dat_is_flushed_periodically(self):\n+            # Check if the string \"Flushed fee estimates to fee_estimates.dat.\" is present in the debug log file.\n+            # If it is, it indicates that fee estimates have been successfully flushed to disk.\n+            with self.nodes[0].assert_debug_log(expected_msgs=[\"Flushed fee estimates to fee_estimates.dat.\"]):\n+                # Mock the scheduler for an hour, sleep for a short period to allow the flush to finish\n+                hour = 3600\n+                self.nodes[0].mockscheduler(hour)\n+                time.sleep(1)",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 41,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "a2ad5e475f318552c50bcc8bb966c4841d7ef8b4",
      "in_reply_to_id": 1191357213,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "My bad, thanks.",
      "created_at": "2023-05-11T18:53:27Z",
      "updated_at": "2023-05-11T18:53:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1191573164",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191573164"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 323,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191578999",
      "pull_request_review_id": 1423253142,
      "id": 1191578999,
      "node_id": "PRRC_kwDOABII585HBg13",
      "diff_hunk": "@@ -14,12 +14,17 @@\n #include <util/fs.h>\n \n #include <array>\n+#include <chrono>\n #include <map>\n #include <memory>\n #include <set>\n #include <string>\n #include <vector>\n \n+\n+// How often to flush fee estimates to fee_estimates.dat.\n+static constexpr std::chrono::milliseconds FLUSH_INTERVAL{std::chrono::hours{1}};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 13,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "0d2329aecaa39f328fec84f63f0bebf31e49b070",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "s/FLUSH_INTERVAL/FEE_FLUSH_INTERVAL/ ?",
      "created_at": "2023-05-11T18:59:16Z",
      "updated_at": "2023-05-11T18:59:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1191578999",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191578999"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191584552",
      "pull_request_review_id": 1423262115,
      "id": 1191584552,
      "node_id": "PRRC_kwDOABII585HBiMo",
      "diff_hunk": "@@ -14,12 +14,17 @@\n #include <util/fs.h>\n \n #include <array>\n+#include <chrono>\n #include <map>\n #include <memory>\n #include <set>\n #include <string>\n #include <vector>\n \n+\n+// How often to flush fee estimates to fee_estimates.dat.\n+static constexpr std::chrono::milliseconds FLUSH_INTERVAL{std::chrono::hours{1}};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 13,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "0d2329aecaa39f328fec84f63f0bebf31e49b070",
      "in_reply_to_id": 1191578999,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "FEE_FLUSH_INTERVAL is better.\r\nI think.\r\n",
      "created_at": "2023-05-11T19:05:37Z",
      "updated_at": "2023-05-11T19:05:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1191584552",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191584552"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191715247",
      "pull_request_review_id": 1423475651,
      "id": 1191715247,
      "node_id": "PRRC_kwDOABII585HCCGv",
      "diff_hunk": "@@ -12,6 +12,7 @@\n #include <policy/feerate.h>\n #include <primitives/transaction.h>\n #include <random.h>\n+#include <scheduler.h>",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "a2ad5e475f318552c50bcc8bb966c4841d7ef8b4",
      "in_reply_to_id": 1191301314,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sure :+1: , fixed. ",
      "created_at": "2023-05-11T21:42:02Z",
      "updated_at": "2023-05-11T21:42:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1191715247",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191715247"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 15,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196990851",
      "pull_request_review_id": 1431475355,
      "id": 1196990851,
      "node_id": "PRRC_kwDOABII585HWKGD",
      "diff_hunk": "@@ -903,11 +904,15 @@ CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, FeeCalculation\n \n void CBlockPolicyEstimator::Flush() {\n     FlushUnconfirmed();\n+    FlushFeeEstimates();\n+}\n \n+void CBlockPolicyEstimator::FlushFeeEstimates() {\n     AutoFile est_file{fsbridge::fopen(m_estimation_filepath, \"wb\")};\n     if (est_file.IsNull() || !Write(est_file)) {\n         LogPrintf(\"Failed to write fee estimates to %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));\n     }\n+    LogPrintf(\"Flushed fee estimates to fee_estimates.dat.\\n\");",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "bbb0750bd8bd9dcc8f169f0df7e1351c9da698c9",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "this log line fires even if it actually failed?",
      "created_at": "2023-05-17T19:55:26Z",
      "updated_at": "2023-05-17T20:00:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1196990851",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196990851"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 929,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196993686",
      "pull_request_review_id": 1431475355,
      "id": 1196993686,
      "node_id": "PRRC_kwDOABII585HWKyW",
      "diff_hunk": "@@ -186,6 +186,10 @@ class CBlockPolicyEstimator\n     static constexpr double FEE_SPACING = 1.05;\n \n     const fs::path m_estimation_filepath;\n+\n+    /** Fee estimate.dat must not be more than 12 hours old. */\n+    static constexpr std::chrono::hours MAX_FILE_AGE{12};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 6,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "5a41661a118dc526780c006bdf09abcce92e24e5",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Seems ok, but would have to think about this more. I'd be ok with longer too, to start.",
      "created_at": "2023-05-17T19:58:40Z",
      "updated_at": "2023-05-17T20:00:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1196993686",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196993686"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196995104",
      "pull_request_review_id": 1431475355,
      "id": 1196995104,
      "node_id": "PRRC_kwDOABII585HWLIg",
      "diff_hunk": "@@ -290,6 +291,37 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.stop_node(0)\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 13 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 13 * hour\n+        os.utime(fee_dat, (last_modified_time, last_modified_time))\n+\n+        # Start node and ensure the fee_estimates.dat file was not read\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"errors\"], [\"Insufficient data or no feerate found\"])\n+\n+\n+    def test_estimate_dat_is_flushed_periodically(self):\n+            # Check if the string \"Flushed fee estimates to fee_estimates.dat.\" is present in the debug log file.\n+            # If it is, it indicates that fee estimates have been successfully flushed to disk.\n+            with self.nodes[0].assert_debug_log(expected_msgs=[\"Flushed fee estimates to fee_estimates.dat.\"], timeout=1):",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 37,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "aecd92e8e1ca8be8c76cc9621058614c893c47fc",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "checking for log is good, but checking it was actually written is better in case there's a bug in the logging logic",
      "created_at": "2023-05-17T20:00:19Z",
      "updated_at": "2023-05-17T20:00:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1196995104",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1196995104"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 323,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197686957",
      "pull_request_review_id": 1432491514,
      "id": 1197686957,
      "node_id": "PRRC_kwDOABII585HY0Ct",
      "diff_hunk": "@@ -903,11 +904,15 @@ CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, FeeCalculation\n \n void CBlockPolicyEstimator::Flush() {\n     FlushUnconfirmed();\n+    FlushFeeEstimates();\n+}\n \n+void CBlockPolicyEstimator::FlushFeeEstimates() {\n     AutoFile est_file{fsbridge::fopen(m_estimation_filepath, \"wb\")};\n     if (est_file.IsNull() || !Write(est_file)) {\n         LogPrintf(\"Failed to write fee estimates to %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));\n     }\n+    LogPrintf(\"Flushed fee estimates to fee_estimates.dat.\\n\");",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "bbb0750bd8bd9dcc8f169f0df7e1351c9da698c9",
      "in_reply_to_id": 1196990851,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, fixed thank you.",
      "created_at": "2023-05-18T11:02:44Z",
      "updated_at": "2023-05-18T11:10:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1197686957",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197686957"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 929,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197688535",
      "pull_request_review_id": 1432491514,
      "id": 1197688535,
      "node_id": "PRRC_kwDOABII585HY0bX",
      "diff_hunk": "@@ -290,6 +291,37 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.stop_node(0)\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 13 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 13 * hour\n+        os.utime(fee_dat, (last_modified_time, last_modified_time))\n+\n+        # Start node and ensure the fee_estimates.dat file was not read\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"errors\"], [\"Insufficient data or no feerate found\"])\n+\n+\n+    def test_estimate_dat_is_flushed_periodically(self):\n+            # Check if the string \"Flushed fee estimates to fee_estimates.dat.\" is present in the debug log file.\n+            # If it is, it indicates that fee estimates have been successfully flushed to disk.\n+            with self.nodes[0].assert_debug_log(expected_msgs=[\"Flushed fee estimates to fee_estimates.dat.\"], timeout=1):",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 37,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "aecd92e8e1ca8be8c76cc9621058614c893c47fc",
      "in_reply_to_id": 1196995104,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes thanks for pointing this out, I added the check.",
      "created_at": "2023-05-18T11:04:48Z",
      "updated_at": "2023-05-18T13:16:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1197688535",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197688535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 323,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197693333",
      "pull_request_review_id": 1432491514,
      "id": 1197693333,
      "node_id": "PRRC_kwDOABII585HY1mV",
      "diff_hunk": "@@ -186,6 +186,10 @@ class CBlockPolicyEstimator\n     static constexpr double FEE_SPACING = 1.05;\n \n     const fs::path m_estimation_filepath;\n+\n+    /** Fee estimate.dat must not be more than 12 hours old. */\n+    static constexpr std::chrono::hours MAX_FILE_AGE{12};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 6,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "5a41661a118dc526780c006bdf09abcce92e24e5",
      "in_reply_to_id": 1196993686,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah, to enhance flexibility, I can create a follow-up PR to introduce a configuration variable for MAX_FILE_AGE,  This way users can specify the maximum age of estimates they do not want to accept?",
      "created_at": "2023-05-18T11:10:33Z",
      "updated_at": "2023-05-18T11:10:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1197693333",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1197693333"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198071636",
      "pull_request_review_id": 1433103480,
      "id": 1198071636,
      "node_id": "PRRC_kwDOABII585HaR9U",
      "diff_hunk": "@@ -903,11 +904,15 @@ CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, FeeCalculation\n \n void CBlockPolicyEstimator::Flush() {\n     FlushUnconfirmed();\n+    FlushFeeEstimates();\n+}\n \n+void CBlockPolicyEstimator::FlushFeeEstimates() {\n     AutoFile est_file{fsbridge::fopen(m_estimation_filepath, \"wb\")};\n     if (est_file.IsNull() || !Write(est_file)) {\n         LogPrintf(\"Failed to write fee estimates to %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));\n     }\n+    LogPrintf(\"Flushed fee estimates to fee_estimates.dat.\\n\");",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "bbb0750bd8bd9dcc8f169f0df7e1351c9da698c9",
      "in_reply_to_id": 1196990851,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Mine as well use this constant here for the filename?\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/6cc136bbd36f859a16e469bb5c016d06c19bcd50/src/policy/fees_args.cpp#L10",
      "created_at": "2023-05-18T17:09:37Z",
      "updated_at": "2023-05-18T18:15:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1198071636",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198071636"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 929,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198122182",
      "pull_request_review_id": 1433103480,
      "id": 1198122182,
      "node_id": "PRRC_kwDOABII585HaeTG",
      "diff_hunk": "@@ -903,11 +904,16 @@ CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, FeeCalculation\n \n void CBlockPolicyEstimator::Flush() {\n     FlushUnconfirmed();\n+    FlushFeeEstimates();\n+}\n \n+void CBlockPolicyEstimator::FlushFeeEstimates() {\n     AutoFile est_file{fsbridge::fopen(m_estimation_filepath, \"wb\")};\n     if (est_file.IsNull() || !Write(est_file)) {\n         LogPrintf(\"Failed to write fee estimates to %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));\n+        return;",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 19,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "4614a64bbffd5333cfd9fb78c6530d81c3856901",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "could also simplify a bit:\r\n\r\n```cpp\r\n    if (est_file.IsNull() || !Write(est_file))\r\n        LogPrintf(\"Failed to write fee estimates to %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));\r\n    else\r\n        LogPrintf(\"Flushed fee estimates to fee_estimates.dat.\\n\");\r\n```",
      "created_at": "2023-05-18T17:59:26Z",
      "updated_at": "2023-05-18T18:15:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1198122182",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198122182"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 914,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198123417",
      "pull_request_review_id": 1433103480,
      "id": 1198123417,
      "node_id": "PRRC_kwDOABII585HaemZ",
      "diff_hunk": "@@ -14,12 +14,17 @@\n #include <util/fs.h>\n \n #include <array>\n+#include <chrono>\n #include <map>\n #include <memory>\n #include <set>\n #include <string>\n #include <vector>\n \n+\n+// How often to flush fee estimates to fee_estimates.dat.\n+static constexpr std::chrono::milliseconds FEE_FLUSH_INTERVAL{std::chrono::hours{1}};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 13,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "4614a64bbffd5333cfd9fb78c6530d81c3856901",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't actually know for sure but couldn't this just be ...?\r\n\r\n```cpp\r\nstatic constexpr std::chrono::hours FEE_FLUSH_INTERVAL{1};\r\n```",
      "created_at": "2023-05-18T18:00:48Z",
      "updated_at": "2023-05-18T18:15:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1198123417",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198123417"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198131760",
      "pull_request_review_id": 1433103480,
      "id": 1198131760,
      "node_id": "PRRC_kwDOABII585Hagow",
      "diff_hunk": "@@ -290,6 +291,45 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.stop_node(0)\n+        self.start_node(0)",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 18,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "b02e3fc91f4214c486da0ff46e187fab017e11bb",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you can use `self.restart_node(0)` here",
      "created_at": "2023-05-18T18:09:46Z",
      "updated_at": "2023-05-18T18:15:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1198131760",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198131760"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": 299,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 300,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198150716",
      "pull_request_review_id": 1433238480,
      "id": 1198150716,
      "node_id": "PRRC_kwDOABII585HalQ8",
      "diff_hunk": "@@ -14,12 +14,17 @@\n #include <util/fs.h>\n \n #include <array>\n+#include <chrono>\n #include <map>\n #include <memory>\n #include <set>\n #include <string>\n #include <vector>\n \n+\n+// How often to flush fee estimates to fee_estimates.dat.\n+static constexpr std::chrono::milliseconds FEE_FLUSH_INTERVAL{std::chrono::hours{1}};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 13,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "4614a64bbffd5333cfd9fb78c6530d81c3856901",
      "in_reply_to_id": 1198123417,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It could also be `constexpr auto FEE_FLUSH_INTERVAL{1h};`",
      "created_at": "2023-05-18T18:26:07Z",
      "updated_at": "2023-05-18T18:26:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1198150716",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198150716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198355535",
      "pull_request_review_id": 1433525905,
      "id": 1198355535,
      "node_id": "PRRC_kwDOABII585HbXRP",
      "diff_hunk": "@@ -903,11 +904,16 @@ CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, FeeCalculation\n \n void CBlockPolicyEstimator::Flush() {\n     FlushUnconfirmed();\n+    FlushFeeEstimates();\n+}\n \n+void CBlockPolicyEstimator::FlushFeeEstimates() {\n     AutoFile est_file{fsbridge::fopen(m_estimation_filepath, \"wb\")};\n     if (est_file.IsNull() || !Write(est_file)) {\n         LogPrintf(\"Failed to write fee estimates to %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));\n+        return;",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 19,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "4614a64bbffd5333cfd9fb78c6530d81c3856901",
      "in_reply_to_id": 1198122182,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks for your review, I have fixed it.",
      "created_at": "2023-05-18T22:16:00Z",
      "updated_at": "2023-05-18T22:16:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1198355535",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198355535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 914,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198379250",
      "pull_request_review_id": 1433560975,
      "id": 1198379250,
      "node_id": "PRRC_kwDOABII585HbdDy",
      "diff_hunk": "@@ -14,12 +14,17 @@\n #include <util/fs.h>\n \n #include <array>\n+#include <chrono>\n #include <map>\n #include <memory>\n #include <set>\n #include <string>\n #include <vector>\n \n+\n+// How often to flush fee estimates to fee_estimates.dat.\n+static constexpr std::chrono::milliseconds FEE_FLUSH_INTERVAL{std::chrono::hours{1}};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 13,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "4614a64bbffd5333cfd9fb78c6530d81c3856901",
      "in_reply_to_id": 1198123417,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Still a nub on cpp,\r\n `constexpr auto FEE_FLUSH_INTERVAL{1h};`  does not compile\r\nI added instead `static constexpr std::chrono::hours FEE_FLUSH_INTERVAL{1};`",
      "created_at": "2023-05-18T23:02:36Z",
      "updated_at": "2023-05-18T23:02:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1198379250",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198379250"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198379499",
      "pull_request_review_id": 1433561764,
      "id": 1198379499,
      "node_id": "PRRC_kwDOABII585HbdHr",
      "diff_hunk": "@@ -290,6 +291,45 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.stop_node(0)\n+        self.start_node(0)",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 18,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "b02e3fc91f4214c486da0ff46e187fab017e11bb",
      "in_reply_to_id": 1198131760,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks fixed",
      "created_at": "2023-05-18T23:03:07Z",
      "updated_at": "2023-05-18T23:03:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1198379499",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198379499"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": 299,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 300,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198388360",
      "pull_request_review_id": 1433575587,
      "id": 1198388360,
      "node_id": "PRRC_kwDOABII585HbfSI",
      "diff_hunk": "@@ -903,11 +904,16 @@ CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, FeeCalculation\n \n void CBlockPolicyEstimator::Flush() {\n     FlushUnconfirmed();\n+    FlushFeeEstimates();\n+}\n \n+void CBlockPolicyEstimator::FlushFeeEstimates() {\n     AutoFile est_file{fsbridge::fopen(m_estimation_filepath, \"wb\")};\n     if (est_file.IsNull() || !Write(est_file)) {\n         LogPrintf(\"Failed to write fee estimates to %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));\n+        return;",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 19,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "4614a64bbffd5333cfd9fb78c6530d81c3856901",
      "in_reply_to_id": 1198122182,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": ">Mine as well use this constant here for the filename?\r\n\r\n:thinking: it is an anon namespace, not defined in policy/fees_args.h, \r\nI think it is okay as is,  or else\r\n\r\npolicy/fees_args.h\r\n ```\r\nconst char* GetFeeEstimatesFilename();\r\n```\r\npolicy/fees.args.cpp\r\n```\r\nconst char* GetFeeEstimatesFilename() {\r\n    return FEE_ESTIMATES_FILENAME;\r\n}\r\n```\r\npolicy/fees.cpp\r\n```\r\nLogPrintf(\"Flushed fee estimates to %s.\\n\", GetFeeEstimatesFilename());\r\n```\r\nbut if it's possible another way I will be glad to learn how.",
      "created_at": "2023-05-18T23:22:05Z",
      "updated_at": "2023-05-18T23:22:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1198388360",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198388360"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 914,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199014871",
      "pull_request_review_id": 1434514052,
      "id": 1199014871,
      "node_id": "PRRC_kwDOABII585Hd4PX",
      "diff_hunk": "@@ -903,11 +904,16 @@ CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, FeeCalculation\n \n void CBlockPolicyEstimator::Flush() {\n     FlushUnconfirmed();\n+    FlushFeeEstimates();\n+}\n \n+void CBlockPolicyEstimator::FlushFeeEstimates() {\n     AutoFile est_file{fsbridge::fopen(m_estimation_filepath, \"wb\")};\n     if (est_file.IsNull() || !Write(est_file)) {\n         LogPrintf(\"Failed to write fee estimates to %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));\n+        return;",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 19,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "4614a64bbffd5333cfd9fb78c6530d81c3856901",
      "in_reply_to_id": 1198122182,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok good point I see, well maybe just then...\r\n\r\n\r\n```diff\r\ndiff --git a/src/policy/fees.cpp b/src/policy/fees.cpp\r\nindex 085f938f80..adb0ebc383 100644\r\n--- a/src/policy/fees.cpp\r\n+++ b/src/policy/fees.cpp\r\n@@ -925,7 +925,7 @@ void CBlockPolicyEstimator::FlushFeeEstimates() {\r\n     if (est_file.IsNull() || !Write(est_file)) {\r\n         LogPrintf(\"Failed to write fee estimates to %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));\r\n     } else {\r\n-        LogPrintf(\"Flushed fee estimates to fee_estimates.dat.\\n\");\r\n+        LogPrintf(\"Flushed fee estimates to %s.\", fs::PathToString(m_estimation_filepath));\r\n     }\r\n }\r\n \r\n\r\n```",
      "created_at": "2023-05-19T14:15:18Z",
      "updated_at": "2023-05-19T14:15:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1199014871",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199014871"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 914,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199078486",
      "pull_request_review_id": 1434616046,
      "id": 1199078486,
      "node_id": "PRRC_kwDOABII585HeHxW",
      "diff_hunk": "@@ -546,9 +546,22 @@ CBlockPolicyEstimator::CBlockPolicyEstimator(const fs::path& estimation_filepath\n     shortStats = std::unique_ptr<TxConfirmStats>(new TxConfirmStats(buckets, bucketMap, SHORT_BLOCK_PERIODS, SHORT_DECAY, SHORT_SCALE));\n     longStats = std::unique_ptr<TxConfirmStats>(new TxConfirmStats(buckets, bucketMap, LONG_BLOCK_PERIODS, LONG_DECAY, LONG_SCALE));\n \n-    // If the fee estimation file is present, read recorded estimations\n     AutoFile est_file{fsbridge::fopen(m_estimation_filepath, \"rb\")};\n-    if (est_file.IsNull() || !Read(est_file)) {\n+\n+    // Whenever the fee estimation file is not present return early\n+    if (est_file.IsNull()) {\n+        LogPrintf(\"Failed to read fee estimates from %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "accf995cf095d7ff3d10c0403e70bdbc1273e852",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "in accf995cf095d7ff3d10c0403e70bdbc1273e852\r\n\r\nSeems like the error message here should be something like \"there is no fee estimates file\" instead of \"failed to read\" ?",
      "created_at": "2023-05-19T15:11:58Z",
      "updated_at": "2023-05-19T15:20:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1199078486",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199078486"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 553,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199085331",
      "pull_request_review_id": 1434616046,
      "id": 1199085331,
      "node_id": "PRRC_kwDOABII585HeJcT",
      "diff_hunk": "@@ -186,6 +186,10 @@ class CBlockPolicyEstimator\n     static constexpr double FEE_SPACING = 1.05;\n \n     const fs::path m_estimation_filepath;\n+\n+    /** Fee estimate.dat must not be more than 12 hours old. */\n+    static constexpr std::chrono::hours MAX_FILE_AGE{12};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 6,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "5a41661a118dc526780c006bdf09abcce92e24e5",
      "in_reply_to_id": 1196993686,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What is the use case for being able to configure the maximum file age?",
      "created_at": "2023-05-19T15:18:38Z",
      "updated_at": "2023-05-19T15:20:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1199085331",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199085331"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199176025",
      "pull_request_review_id": 1434774754,
      "id": 1199176025,
      "node_id": "PRRC_kwDOABII585HeflZ",
      "diff_hunk": "@@ -903,11 +904,16 @@ CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, FeeCalculation\n \n void CBlockPolicyEstimator::Flush() {\n     FlushUnconfirmed();\n+    FlushFeeEstimates();\n+}\n \n+void CBlockPolicyEstimator::FlushFeeEstimates() {\n     AutoFile est_file{fsbridge::fopen(m_estimation_filepath, \"wb\")};\n     if (est_file.IsNull() || !Write(est_file)) {\n         LogPrintf(\"Failed to write fee estimates to %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));\n+        return;",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 19,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "4614a64bbffd5333cfd9fb78c6530d81c3856901",
      "in_reply_to_id": 1198122182,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "thanks fixed with\r\n ```\r\nLogPrintf(\"Flushed fee estimates to %s.\", fs::PathToString(m_estimation_filepath.filename()));\r\n```\r\nso as to get the filename only not the dir",
      "created_at": "2023-05-19T16:52:48Z",
      "updated_at": "2023-05-19T16:52:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1199176025",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199176025"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 914,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199183106",
      "pull_request_review_id": 1434785724,
      "id": 1199183106,
      "node_id": "PRRC_kwDOABII585HehUC",
      "diff_hunk": "@@ -546,9 +546,22 @@ CBlockPolicyEstimator::CBlockPolicyEstimator(const fs::path& estimation_filepath\n     shortStats = std::unique_ptr<TxConfirmStats>(new TxConfirmStats(buckets, bucketMap, SHORT_BLOCK_PERIODS, SHORT_DECAY, SHORT_SCALE));\n     longStats = std::unique_ptr<TxConfirmStats>(new TxConfirmStats(buckets, bucketMap, LONG_BLOCK_PERIODS, LONG_DECAY, LONG_SCALE));\n \n-    // If the fee estimation file is present, read recorded estimations\n     AutoFile est_file{fsbridge::fopen(m_estimation_filepath, \"rb\")};\n-    if (est_file.IsNull() || !Read(est_file)) {\n+\n+    // Whenever the fee estimation file is not present return early\n+    if (est_file.IsNull()) {\n+        LogPrintf(\"Failed to read fee estimates from %s. Continue anyway.\\n\", fs::PathToString(m_estimation_filepath));",
      "path": "src/policy/fees.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "accf995cf095d7ff3d10c0403e70bdbc1273e852",
      "in_reply_to_id": 1199078486,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks fixed",
      "created_at": "2023-05-19T17:01:46Z",
      "updated_at": "2023-05-19T17:01:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1199183106",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199183106"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 553,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199199343",
      "pull_request_review_id": 1434810895,
      "id": 1199199343,
      "node_id": "PRRC_kwDOABII585HelRv",
      "diff_hunk": "@@ -186,6 +186,10 @@ class CBlockPolicyEstimator\n     static constexpr double FEE_SPACING = 1.05;\n \n     const fs::path m_estimation_filepath;\n+\n+    /** Fee estimate.dat must not be more than 12 hours old. */\n+    static constexpr std::chrono::hours MAX_FILE_AGE{12};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 6,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "5a41661a118dc526780c006bdf09abcce92e24e5",
      "in_reply_to_id": 1196993686,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I was thinking that introducing flexibility would enable users to define their preferred threshold for considering fee estimates as stale. As @instagibbs suggested extending the default 12 hours further. what is your view on it?",
      "created_at": "2023-05-19T17:19:51Z",
      "updated_at": "2023-05-19T17:19:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1199199343",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1199199343"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1210099908",
      "pull_request_review_id": 1450663037,
      "id": 1210099908,
      "node_id": "PRRC_kwDOABII585IIKjE",
      "diff_hunk": "@@ -186,6 +186,10 @@ class CBlockPolicyEstimator\n     static constexpr double FEE_SPACING = 1.05;\n \n     const fs::path m_estimation_filepath;\n+\n+    /** Fee estimate.dat must not be more than 12 hours old. */\n+    static constexpr std::chrono::hours MAX_FILE_AGE{12};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 6,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "5a41661a118dc526780c006bdf09abcce92e24e5",
      "in_reply_to_id": 1196993686,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Another use case could be so that testers can purposefully load (very) old fee estimate files to populate `estimatesmartfee`? https://github.com/bitcoin/bitcoin/issues/27415#issuecomment-1531711091",
      "created_at": "2023-05-30T10:56:12Z",
      "updated_at": "2023-05-30T10:56:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1210099908",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1210099908"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1213443871",
      "pull_request_review_id": 1455935701,
      "id": 1213443871,
      "node_id": "PRRC_kwDOABII585IU68f",
      "diff_hunk": "@@ -186,6 +186,10 @@ class CBlockPolicyEstimator\n     static constexpr double FEE_SPACING = 1.05;\n \n     const fs::path m_estimation_filepath;\n+\n+    /** Fee estimate.dat must not be more than 12 hours old. */\n+    static constexpr std::chrono::hours MAX_FILE_AGE{12};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 6,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "5a41661a118dc526780c006bdf09abcce92e24e5",
      "in_reply_to_id": 1196993686,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not sure if we should load old (i.e. potentially bad) data as it can skew the fee estimates both at startup and after more data has been collected. For testing, they could mock the time right? Just worried about adding a config option that's a bit footgunny.",
      "created_at": "2023-06-01T17:03:41Z",
      "updated_at": "2023-06-01T17:03:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1213443871",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1213443871"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1213739677",
      "pull_request_review_id": 1456398245,
      "id": 1213739677,
      "node_id": "PRRC_kwDOABII585IWDKd",
      "diff_hunk": "@@ -186,6 +186,10 @@ class CBlockPolicyEstimator\n     static constexpr double FEE_SPACING = 1.05;\n \n     const fs::path m_estimation_filepath;\n+\n+    /** Fee estimate.dat must not be more than 12 hours old. */\n+    static constexpr std::chrono::hours MAX_FILE_AGE{12};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 6,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "5a41661a118dc526780c006bdf09abcce92e24e5",
      "in_reply_to_id": 1196993686,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, I agree with you. stale estimates should not be read. I have updated the MAX_FILE_AGE to 60 hours, 2.5 days, as @instagibbs suggested that longer would be okay",
      "created_at": "2023-06-01T22:24:35Z",
      "updated_at": "2023-06-01T22:28:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1213739677",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1213739677"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214180938",
      "pull_request_review_id": 1457049916,
      "id": 1214180938,
      "node_id": "PRRC_kwDOABII585IXu5K",
      "diff_hunk": "@@ -186,6 +186,10 @@ class CBlockPolicyEstimator\n     static constexpr double FEE_SPACING = 1.05;\n \n     const fs::path m_estimation_filepath;\n+\n+    /** Fee estimate.dat must not be more than 12 hours old. */\n+    static constexpr std::chrono::hours MAX_FILE_AGE{12};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 6,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "5a41661a118dc526780c006bdf09abcce92e24e5",
      "in_reply_to_id": 1196993686,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can you explain the rationale behind the 60 hours chosen? Also perhaps you can update OP as it still mentions 12 hours :)",
      "created_at": "2023-06-02T10:05:54Z",
      "updated_at": "2023-06-02T10:05:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1214180938",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214180938"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214368208",
      "pull_request_review_id": 1457431731,
      "id": 1214368208,
      "node_id": "PRRC_kwDOABII585IYcnQ",
      "diff_hunk": "@@ -186,6 +186,10 @@ class CBlockPolicyEstimator\n     static constexpr double FEE_SPACING = 1.05;\n \n     const fs::path m_estimation_filepath;\n+\n+    /** Fee estimate.dat must not be more than 12 hours old. */\n+    static constexpr std::chrono::hours MAX_FILE_AGE{12};",
      "path": "src/policy/fees.h",
      "position": null,
      "original_position": 6,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "5a41661a118dc526780c006bdf09abcce92e24e5",
      "in_reply_to_id": 1196993686,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Estimates that are 2.5 days old have nearly half the decay weight of the most recent block.\r\nThank you I updated the PR description.",
      "created_at": "2023-06-02T13:21:54Z",
      "updated_at": "2023-06-02T13:22:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1214368208",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214368208"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 191,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214407758",
      "pull_request_review_id": 1457521354,
      "id": 1214407758,
      "node_id": "PRRC_kwDOABII585IYmRO",
      "diff_hunk": "@@ -290,6 +291,44 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.restart_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 61 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 61 * hour\n+        os.utime(fee_dat, (last_modified_time, last_modified_time))\n+\n+        # Start node and ensure the fee_estimates.dat file was not read\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"errors\"], [\"Insufficient data or no feerate found\"])\n+\n+\n+    def test_estimate_dat_is_flushed_periodically(self):\n+            fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+            # Verify that fee_estimates.dat does not exist\n+            assert_equal(os.path.isfile(fee_dat), False)",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 37,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "8c51cd00fb08143638f6f94b2e05b43f737bc072",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "to make this test less order-dependent, you can attempt to delete the file, then run the test",
      "created_at": "2023-06-02T13:49:46Z",
      "updated_at": "2023-06-02T13:58:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1214407758",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214407758"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 319,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214415612",
      "pull_request_review_id": 1457521354,
      "id": 1214415612,
      "node_id": "PRRC_kwDOABII585IYoL8",
      "diff_hunk": "@@ -290,6 +291,44 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.restart_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 61 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 61 * hour\n+        os.utime(fee_dat, (last_modified_time, last_modified_time))\n+\n+        # Start node and ensure the fee_estimates.dat file was not read\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"errors\"], [\"Insufficient data or no feerate found\"])\n+\n+\n+    def test_estimate_dat_is_flushed_periodically(self):\n+            fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+            # Verify that fee_estimates.dat does not exist\n+            assert_equal(os.path.isfile(fee_dat), False)\n+\n+            # Check if the string \"Flushed fee estimates to fee_estimates.dat.\" is present in the debug log file.\n+            # If it is, it indicates that fee estimates have been successfully flushed to disk.\n+            with self.nodes[0].assert_debug_log(expected_msgs=[\"Flushed fee estimates to fee_estimates.dat.\"], timeout=1):\n+                # Mock the scheduler for an hour, fee estimates will be flushed to fee_estimate.dat\n+                hour = 3600\n+                self.nodes[0].mockscheduler(hour)\n+\n+            # Verify that fee estimates were flushed and fee_estimates.dat file is created\n+            assert_equal(os.path.isfile(fee_dat), True)",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 47,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "8c51cd00fb08143638f6f94b2e05b43f737bc072",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "might be good to test that it does it *every hour*, and that the output files should be matching provided we don't see blocks in the interim, also, check that what is written on node shutdown also matches?\r\n\r\nThat way we can have higher assurance on the timing of the flushing and the contents matching what we already do.",
      "created_at": "2023-06-02T13:56:09Z",
      "updated_at": "2023-06-02T13:58:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1214415612",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214415612"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 329,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214935160",
      "pull_request_review_id": 1458574145,
      "id": 1214935160,
      "node_id": "PRRC_kwDOABII585IanB4",
      "diff_hunk": "@@ -290,6 +291,44 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.restart_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 61 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 61 * hour\n+        os.utime(fee_dat, (last_modified_time, last_modified_time))\n+\n+        # Start node and ensure the fee_estimates.dat file was not read\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"errors\"], [\"Insufficient data or no feerate found\"])\n+\n+\n+    def test_estimate_dat_is_flushed_periodically(self):\n+            fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+            # Verify that fee_estimates.dat does not exist\n+            assert_equal(os.path.isfile(fee_dat), False)",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 37,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "8c51cd00fb08143638f6f94b2e05b43f737bc072",
      "in_reply_to_id": 1214407758,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thank you, I added the delete attempt",
      "created_at": "2023-06-02T23:02:53Z",
      "updated_at": "2023-06-02T23:02:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1214935160",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214935160"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 319,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214936512",
      "pull_request_review_id": 1458575525,
      "id": 1214936512,
      "node_id": "PRRC_kwDOABII585IanXA",
      "diff_hunk": "@@ -290,6 +291,44 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.restart_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 61 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 61 * hour\n+        os.utime(fee_dat, (last_modified_time, last_modified_time))\n+\n+        # Start node and ensure the fee_estimates.dat file was not read\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"errors\"], [\"Insufficient data or no feerate found\"])\n+\n+\n+    def test_estimate_dat_is_flushed_periodically(self):\n+            fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+            # Verify that fee_estimates.dat does not exist\n+            assert_equal(os.path.isfile(fee_dat), False)\n+\n+            # Check if the string \"Flushed fee estimates to fee_estimates.dat.\" is present in the debug log file.\n+            # If it is, it indicates that fee estimates have been successfully flushed to disk.\n+            with self.nodes[0].assert_debug_log(expected_msgs=[\"Flushed fee estimates to fee_estimates.dat.\"], timeout=1):\n+                # Mock the scheduler for an hour, fee estimates will be flushed to fee_estimate.dat\n+                hour = 3600\n+                self.nodes[0].mockscheduler(hour)\n+\n+            # Verify that fee estimates were flushed and fee_estimates.dat file is created\n+            assert_equal(os.path.isfile(fee_dat), True)",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 47,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "8c51cd00fb08143638f6f94b2e05b43f737bc072",
      "in_reply_to_id": 1214415612,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sure, thank you, I updated the test.",
      "created_at": "2023-06-02T23:03:40Z",
      "updated_at": "2023-06-02T23:03:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1214936512",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1214936512"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 329,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1219177648",
      "pull_request_review_id": 1464599043,
      "id": 1219177648,
      "node_id": "PRRC_kwDOABII585Iqyyw",
      "diff_hunk": "@@ -290,6 +291,77 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.restart_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 61 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 61 * hour",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 25,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "451ab8b513f88f2bf21a96ff1cf98d17fa82362f",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I know we only use it once in the test, but if you re-touch this file it could be nice to use a named variable for the 60 hours, to make it clear where it comes from? (e.g. `MAX_FILE_AGE` would shadow the name used in _fees.h_)",
      "created_at": "2023-06-06T08:33:06Z",
      "updated_at": "2023-06-06T08:39:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1219177648",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1219177648"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 307,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1219184270",
      "pull_request_review_id": 1464599043,
      "id": 1219184270,
      "node_id": "PRRC_kwDOABII585Iq0aO",
      "diff_hunk": "@@ -290,6 +291,77 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.restart_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 61 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 61 * hour\n+        os.utime(fee_dat, (last_modified_time, last_modified_time))\n+\n+        # Start node and ensure the fee_estimates.dat file was not read\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"errors\"], [\"Insufficient data or no feerate found\"])\n+\n+\n+    def test_estimate_dat_is_flushed_periodically(self):\n+        fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+        hour = 3600\n+\n+        os.remove(fee_dat) if os.path.exists(fee_dat) else None\n+\n+        # Verify that fee_estimates.dat does not exist\n+        assert_equal(os.path.isfile(fee_dat), False)\n+\n+        # Verify if the string \"Flushed fee estimates to fee_estimates.dat.\" is present in the debug log file.\n+        # If present, it indicates that fee estimates have been successfully flushed to disk.\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\"Flushed fee estimates to fee_estimates.dat.\"], timeout=1):\n+            # Mock the scheduler for an hour to flush fee estimates to fee_estimates.dat\n+            self.nodes[0].mockscheduler(hour)\n+\n+        # Verify that fee estimates were flushed and fee_estimates.dat file is created\n+        assert_equal(os.path.isfile(fee_dat), True)\n+\n+        # Verify that the estimates remain the same if there are no blocks in the flush interval\n+        fee_dat_initial_content = open(fee_dat, \"rb\").read()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\"Flushed fee estimates to fee_estimates.dat.\"], timeout=1):\n+            # Mock the scheduler for an hour to flush fee estimates to fee_estimates.dat\n+            self.nodes[0].mockscheduler(hour)\n+\n+        fee_dat_current_content = open(fee_dat, \"rb\").read()\n+        assert_equal(fee_dat_current_content, fee_dat_initial_content)\n+\n+        # Verify that the estimates remain the same after shutdown with no blocks before shutdown\n+        self.restart_node(0)\n+        fee_dat_current_content = open(fee_dat, \"rb\").read()\n+        assert_equal(fee_dat_current_content, fee_dat_initial_content)\n+\n+        # Verify that the estimates are not the same if there are no blocks in the flush interval",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 65,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "451ab8b513f88f2bf21a96ff1cf98d17fa82362f",
      "in_reply_to_id": null,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        # Verify that the estimates are not the same if new blocks were produced in the flush interval\r\n```",
      "created_at": "2023-06-06T08:37:50Z",
      "updated_at": "2023-06-06T08:39:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1219184270",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1219184270"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 347,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1219595571",
      "pull_request_review_id": 1465135361,
      "id": 1219595571,
      "node_id": "PRRC_kwDOABII585IsY0z",
      "diff_hunk": "@@ -290,6 +291,77 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.restart_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 61 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 61 * hour",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 25,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "451ab8b513f88f2bf21a96ff1cf98d17fa82362f",
      "in_reply_to_id": 1219177648,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I agree it's better than the magic number, I have updated it.",
      "created_at": "2023-06-06T12:53:33Z",
      "updated_at": "2023-06-06T12:53:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1219595571",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1219595571"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 307,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1219596235",
      "pull_request_review_id": 1465136578,
      "id": 1219596235,
      "node_id": "PRRC_kwDOABII585IsY_L",
      "diff_hunk": "@@ -290,6 +291,77 @@ def sanity_check_rbf_estimates(self, utxos):\n         est_feerate = node.estimatesmartfee(2)[\"feerate\"]\n         assert_equal(est_feerate, high_feerate_kvb)\n \n+    def test_old_fee_estimate_file(self):\n+        # Get the initial fee rate while node is running\n+        fee_rate = self.nodes[0].estimatesmartfee(1)[\"feerate\"]\n+\n+        # Restart node to ensure fee_estimate.dat file is read\n+        self.restart_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"feerate\"], fee_rate)\n+\n+        fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+\n+        # Stop the node and backdate the fee_estimates.dat file for 61 hours\n+        self.stop_node(0)\n+        hour = 60 * 60\n+        last_modified_time = time.time() - 61 * hour\n+        os.utime(fee_dat, (last_modified_time, last_modified_time))\n+\n+        # Start node and ensure the fee_estimates.dat file was not read\n+        self.start_node(0)\n+        assert_equal(self.nodes[0].estimatesmartfee(1)[\"errors\"], [\"Insufficient data or no feerate found\"])\n+\n+\n+    def test_estimate_dat_is_flushed_periodically(self):\n+        fee_dat = self.nodes[0].chain_path / \"fee_estimates.dat\"\n+        hour = 3600\n+\n+        os.remove(fee_dat) if os.path.exists(fee_dat) else None\n+\n+        # Verify that fee_estimates.dat does not exist\n+        assert_equal(os.path.isfile(fee_dat), False)\n+\n+        # Verify if the string \"Flushed fee estimates to fee_estimates.dat.\" is present in the debug log file.\n+        # If present, it indicates that fee estimates have been successfully flushed to disk.\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\"Flushed fee estimates to fee_estimates.dat.\"], timeout=1):\n+            # Mock the scheduler for an hour to flush fee estimates to fee_estimates.dat\n+            self.nodes[0].mockscheduler(hour)\n+\n+        # Verify that fee estimates were flushed and fee_estimates.dat file is created\n+        assert_equal(os.path.isfile(fee_dat), True)\n+\n+        # Verify that the estimates remain the same if there are no blocks in the flush interval\n+        fee_dat_initial_content = open(fee_dat, \"rb\").read()\n+        with self.nodes[0].assert_debug_log(expected_msgs=[\"Flushed fee estimates to fee_estimates.dat.\"], timeout=1):\n+            # Mock the scheduler for an hour to flush fee estimates to fee_estimates.dat\n+            self.nodes[0].mockscheduler(hour)\n+\n+        fee_dat_current_content = open(fee_dat, \"rb\").read()\n+        assert_equal(fee_dat_current_content, fee_dat_initial_content)\n+\n+        # Verify that the estimates remain the same after shutdown with no blocks before shutdown\n+        self.restart_node(0)\n+        fee_dat_current_content = open(fee_dat, \"rb\").read()\n+        assert_equal(fee_dat_current_content, fee_dat_initial_content)\n+\n+        # Verify that the estimates are not the same if there are no blocks in the flush interval",
      "path": "test/functional/feature_fee_estimation.py",
      "position": null,
      "original_position": 65,
      "commit_id": "6d36f3edbe7549cfaadc48b43c09dd3e581e92ff",
      "original_commit_id": "451ab8b513f88f2bf21a96ff1cf98d17fa82362f",
      "in_reply_to_id": 1219184270,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed Thank you.",
      "created_at": "2023-06-06T12:54:00Z",
      "updated_at": "2023-06-06T12:54:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27622#discussion_r1219596235",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1219596235"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 347,
      "side": "RIGHT"
    }
  ]
}