{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22660",
    "id": 705933676,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NzA1OTMzNjc2",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22660",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/22660.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/22660.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22660",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22660/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22660/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22660/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/42dbd9025adc200012c103d2c091cf026f1d50b1",
    "number": 22660,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "contrib: catch bitcoin-cli RPC call errors in getcoins.py",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This PR is based on #22565 (\"[script] signet's getcoins.py improvements\"), which should be reviewed first.\r\n\r\nThe signet faucet script `contrib/signet/getcoins.py` currently issues bitcoin-cli RPC calls without catching errors -- the only case tackled is if there is no `bitcoin-cli` file found. Instead of crashing with a stack-trace on a failed RPC call, the changes in this PR aim to produce a more user-friendly output (see also https://github.com/bitcoin/bitcoin/pull/22565#discussion_r683754875). Additionally, in case of any error, a non-zero status is now returned (instead of 0, indicating success), which could be useful for other scripts taking use of signet faucet script.\r\n\r\nThe most straight-forward way to test this is invoking the script without a `bitcoind` running on signet:\r\n\r\nPR22565 branch:\r\n```\r\n$ ./contrib/signet/getcoins.py\r\nerror: Could not connect to the server 127.0.0.1:8332\r\n\r\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\r\nTraceback (most recent call last):\r\n  File \"./contrib/signet/getcoins.py\", line 26, in <module>\r\n    curr_signet_hash = subprocess.check_output([args.cmd] + args.bitcoin_cli_args + ['getblockhash', '1']).strip().decode()\r\n  File \"/usr/local/lib/python3.8/subprocess.py\", line 415, in check_output\r\n    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,\r\n  File \"/usr/local/lib/python3.8/subprocess.py\", line 516, in run\r\n    raise CalledProcessError(retcode, process.args,\r\nsubprocess.CalledProcessError: Command '['bitcoin-cli', 'getblockhash', '1']' returned non-zero exit status 1.\r\n```\r\n\r\nthis PR branch:\r\n```\r\n$ ./contrib/signet/getcoins.py\r\nerror: Could not connect to the server 127.0.0.1:38332\r\n\r\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\r\n-----\r\nError while calling \"bitcoin-cli -signet getblockhash 1\" (see output above).\r\n```",
    "labels": [
      {
        "id": 231994551,
        "node_id": "MDU6TGFiZWwyMzE5OTQ1NTE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Scripts%20and%20tools",
        "name": "Scripts and tools",
        "color": "ffffee",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2021-08-07T19:11:36Z",
    "updated_at": "2022-08-26T08:42:32Z",
    "closed_at": "2021-08-26T08:05:57Z",
    "mergeable_state": "unknown",
    "merged_at": "2021-08-26T08:05:57Z",
    "merge_commit_sha": "718d9f2f77270303b2f95dc275cbf416dfd4567b",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "theStack:202107-script-signet_getcoins_catch_rpc_errors",
      "ref": "202107-script-signet_getcoins_catch_rpc_errors",
      "sha": "42dbd9025adc200012c103d2c091cf026f1d50b1",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 204970720,
        "node_id": "MDEwOlJlcG9zaXRvcnkyMDQ5NzA3MjA=",
        "name": "bitcoin",
        "full_name": "theStack/bitcoin",
        "owner": {
          "login": "theStack",
          "id": 91535,
          "node_id": "MDQ6VXNlcjkxNTM1",
          "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/theStack",
          "html_url": "https://github.com/theStack",
          "followers_url": "https://api.github.com/users/theStack/followers",
          "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
          "organizations_url": "https://api.github.com/users/theStack/orgs",
          "repos_url": "https://api.github.com/users/theStack/repos",
          "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/theStack/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/theStack/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/theStack/bitcoin",
        "archive_url": "https://api.github.com/repos/theStack/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/theStack/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/theStack/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/theStack/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/theStack/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/theStack/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/theStack/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/theStack/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/theStack/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/theStack/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/theStack/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/theStack/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/theStack/bitcoin/events",
        "forks_url": "https://api.github.com/repos/theStack/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/theStack/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/theStack/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/theStack/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/theStack/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/theStack/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/theStack/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/theStack/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/theStack/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/theStack/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/theStack/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/theStack/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/theStack/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/theStack/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/theStack/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/theStack/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:theStack/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/theStack/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/theStack/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/theStack/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/theStack/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/theStack/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/theStack/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/theStack/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/theStack/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/theStack/bitcoin/hooks",
        "svn_url": "https://github.com/theStack/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 217436,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T22:15:21Z",
        "created_at": "2019-08-28T15:59:29Z",
        "updated_at": "2022-12-07T18:05:55Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "e08770bed187bfa66f525d42e484579bcea78bba",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69819,
        "watchers_count": 69819,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T22:42:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T04:47:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22660"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 17,
    "deletions": 11,
    "changed_files": 1,
    "commits": 3,
    "review_comments": 1,
    "comments": 1
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzowZWNhNWViYWNlZDI2NGQwNDFkZTgxNTMxNmVhY2E4Y2Y2ZmVmOTJm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0eca5ebaced264d041de815316eaca8cf6fef92f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0eca5ebaced264d041de815316eaca8cf6fef92f",
      "tree": {
        "sha": "565f62023c639fa2d349235dbbae74a02957e23f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/565f62023c639fa2d349235dbbae74a02957e23f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b0c8246cac97b7792a50afc22ef1fe39c5028e00",
          "sha": "b0c8246cac97b7792a50afc22ef1fe39c5028e00",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b0c8246cac97b7792a50afc22ef1fe39c5028e00"
        }
      ],
      "message": "contrib: refactor: introduce bitcoin-cli RPC call helper in getcoins.py",
      "committer": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2021-08-07T18:50:14Z"
      },
      "author": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2021-08-06T20:33:48Z"
      },
      "sha": "0eca5ebaced264d041de815316eaca8cf6fef92f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4YzIwM2NmMGUxYjk1NThiNTQwMzBjMjg0ZGRmNzcwNmQ2NGNkZGUy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8c203cf0e1b9558b54030c284ddf7706d64cdde2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8c203cf0e1b9558b54030c284ddf7706d64cdde2",
      "tree": {
        "sha": "143674d10b9cd76e6062ebcb9799e72a1efed328",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/143674d10b9cd76e6062ebcb9799e72a1efed328"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0eca5ebaced264d041de815316eaca8cf6fef92f",
          "sha": "0eca5ebaced264d041de815316eaca8cf6fef92f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0eca5ebaced264d041de815316eaca8cf6fef92f"
        }
      ],
      "message": "contrib: catch bitcoin-cli RPC call errors in getcoins.py",
      "committer": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2021-08-07T18:50:18Z"
      },
      "author": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2021-08-07T11:47:57Z"
      },
      "sha": "8c203cf0e1b9558b54030c284ddf7706d64cdde2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0MmRiZDkwMjVhZGMyMDAwMTJjMTAzZDJjMDkxY2YwMjZmMWQ1MGIx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/42dbd9025adc200012c103d2c091cf026f1d50b1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/42dbd9025adc200012c103d2c091cf026f1d50b1",
      "tree": {
        "sha": "0de840da4f896c250f542508feca1f2289f59206",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0de840da4f896c250f542508feca1f2289f59206"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8c203cf0e1b9558b54030c284ddf7706d64cdde2",
          "sha": "8c203cf0e1b9558b54030c284ddf7706d64cdde2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8c203cf0e1b9558b54030c284ddf7706d64cdde2"
        }
      ],
      "message": "contrib: return non-zero status if getcoins.py errors",
      "committer": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2021-08-07T18:50:19Z"
      },
      "author": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2021-08-07T18:48:15Z"
      },
      "sha": "42dbd9025adc200012c103d2c091cf026f1d50b1"
    },
    {
      "event": "commented",
      "id": 894703199,
      "node_id": "IC_kwDOABII5841VBZf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894703199",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-07T20:23:46Z",
      "updated_at": "2021-08-07T20:23:46Z",
      "author_association": "MEMBER",
      "body": "Concept ACK, thanks for further improving this :)",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22660#issuecomment-894703199",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22660"
    },
    {
      "event": "reviewed",
      "id": 724844847,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzI0ODQ0ODQ3",
      "url": null,
      "actor": null,
      "commit_id": "42dbd9025adc200012c103d2c091cf026f1d50b1",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK. Thanks, better error handling and less repetitive code now! :)",
      "user": {
        "login": "NikhilBartwal",
        "id": 42388668,
        "node_id": "MDQ6VXNlcjQyMzg4NjY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/42388668?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NikhilBartwal",
        "html_url": "https://github.com/NikhilBartwal",
        "followers_url": "https://api.github.com/users/NikhilBartwal/followers",
        "following_url": "https://api.github.com/users/NikhilBartwal/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NikhilBartwal/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NikhilBartwal/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NikhilBartwal/subscriptions",
        "organizations_url": "https://api.github.com/users/NikhilBartwal/orgs",
        "repos_url": "https://api.github.com/users/NikhilBartwal/repos",
        "events_url": "https://api.github.com/users/NikhilBartwal/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NikhilBartwal/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22660#pullrequestreview-724844847",
      "submitted_at": "2021-08-07T20:43:50Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22660"
    },
    {
      "event": "labeled",
      "id": 5126063947,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDUxMjYwNjM5NDc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5126063947",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-07T20:45:12Z",
      "label": {
        "name": "Scripts and tools",
        "color": "ffffee"
      }
    },
    {
      "event": "comment_deleted",
      "id": 5126257820,
      "node_id": "MDE5OkNvbW1lbnREZWxldGVkRXZlbnQ1MTI2MjU3ODIw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5126257820",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-08T03:35:09Z"
    },
    {
      "event": "reviewed",
      "id": 731410190,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzMxNDEwMTkw",
      "url": null,
      "actor": null,
      "commit_id": "42dbd9025adc200012c103d2c091cf026f1d50b1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code ACK 42dbd9025adc200012c103d2c091cf026f1d50b1",
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22660#pullrequestreview-731410190",
      "submitted_at": "2021-08-17T07:12:38Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22660"
    },
    {
      "event": "reviewed",
      "id": 735485691,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzM1NDg1Njkx",
      "url": null,
      "actor": null,
      "commit_id": "42dbd9025adc200012c103d2c091cf026f1d50b1",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "Zero-1729",
        "id": 23586626,
        "node_id": "MDQ6VXNlcjIzNTg2NjI2",
        "avatar_url": "https://avatars.githubusercontent.com/u/23586626?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Zero-1729",
        "html_url": "https://github.com/Zero-1729",
        "followers_url": "https://api.github.com/users/Zero-1729/followers",
        "following_url": "https://api.github.com/users/Zero-1729/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Zero-1729/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Zero-1729/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Zero-1729/subscriptions",
        "organizations_url": "https://api.github.com/users/Zero-1729/orgs",
        "repos_url": "https://api.github.com/users/Zero-1729/repos",
        "events_url": "https://api.github.com/users/Zero-1729/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Zero-1729/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22660#pullrequestreview-735485691",
      "submitted_at": "2021-08-21T10:21:01Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22660"
    },
    {
      "event": "reviewed",
      "id": 735485920,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzM1NDg1OTIw",
      "url": null,
      "actor": null,
      "commit_id": "42dbd9025adc200012c103d2c091cf026f1d50b1",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "tACK 42dbd90 🧪\r\n\r\nTested on macOS v11.5.2\r\n\r\nNice addition! Tested the errors for the case when ran without `bitcoind` running, `signet` wallet not loaded, rate limit reached, and faucet does not exist (output below). \r\n\r\n> **Note**: Left a non-blocking minor nit as well.\r\n\r\n#### Bitcoind not running \r\n\r\n```sh\r\n$ contrib/signet/getcoins.py \r\nerror: timeout on transient error: Could not connect to the server 127.0.0.1:38332\r\n\r\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\r\n-----\r\nError while calling \"bitcoin-cli -signet getblockhash 1\" (see output above).\r\n```\r\n\r\n#### With no `-signet` wallet loaded\r\n\r\n```sh\r\n$ contrib/signet/getcoins.py\r\nerror code: -18\r\nerror message:\r\nNo wallet is loaded. Load a wallet using loadwallet or create a new one with createwallet. (Note: A default wallet is no longer automatically created)\r\n-----\r\nError while calling \"bitcoin-cli -signet getnewaddress faucet bech32\" (see output above).\r\n```\r\n\r\n#### Attempting to exceed 1 day per IP payout\r\n\r\n```sh\r\n$ ./contrib/signet/getcoins.py\r\nThe script does not allow for repeated transactions as the global faucet is rate-limitied to 1 request/IP/day. You can access the faucet website to get more coins manually\r\n\r\n```\r\n\r\n#### Faucet does not exist (i.e. E404)\r\n\r\n```sh\r\n$ ./contrib/signet/getcoins.py --faucet=\"https://bitcoincore.org/nothing\"\r\nThe specified faucet URL does not exist. Please check for any server issues/typo.\r\n```",
      "user": {
        "login": "Zero-1729",
        "id": 23586626,
        "node_id": "MDQ6VXNlcjIzNTg2NjI2",
        "avatar_url": "https://avatars.githubusercontent.com/u/23586626?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Zero-1729",
        "html_url": "https://github.com/Zero-1729",
        "followers_url": "https://api.github.com/users/Zero-1729/followers",
        "following_url": "https://api.github.com/users/Zero-1729/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Zero-1729/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Zero-1729/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Zero-1729/subscriptions",
        "organizations_url": "https://api.github.com/users/Zero-1729/orgs",
        "repos_url": "https://api.github.com/users/Zero-1729/repos",
        "events_url": "https://api.github.com/users/Zero-1729/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Zero-1729/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22660#pullrequestreview-735485920",
      "submitted_at": "2021-08-21T10:25:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22660"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5209946707,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NTIwOTk0NjcwNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5209946707",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-26T00:41:09Z"
    },
    {
      "event": "merged",
      "id": 5211266862,
      "node_id": "MDExOk1lcmdlZEV2ZW50NTIxMTI2Njg2Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5211266862",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "718d9f2f77270303b2f95dc275cbf416dfd4567b",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/718d9f2f77270303b2f95dc275cbf416dfd4567b",
      "created_at": "2021-08-26T08:05:57Z"
    },
    {
      "event": "closed",
      "id": 5211266888,
      "node_id": "MDExOkNsb3NlZEV2ZW50NTIxMTI2Njg4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5211266888",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-08-26T08:05:57Z"
    },
    {
      "event": "referenced",
      "id": 5221867588,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUyMjE4Njc1ODg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5221867588",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a3c57b8052b2e0a583ab2163000adbe555eaad29",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/a3c57b8052b2e0a583ab2163000adbe555eaad29",
      "created_at": "2021-08-28T16:10:21Z"
    },
    {
      "event": "locked",
      "id": 7265785284,
      "node_id": "LOE_lADOABII5845apmdzwAAAAGxExXE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7265785284",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-26T08:42:32Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693336444",
      "pull_request_review_id": 735485691,
      "id": 693336444,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzMzNjQ0NA==",
      "diff_hunk": "@@ -5,32 +5,64 @@\n \n import argparse\n import subprocess\n-import requests\n import sys\n+import requests\n+\n+DEFAULT_GLOBAL_FAUCET = 'https://signetfaucet.com/claim'\n+GLOBAL_FIRST_BLOCK_HASH = '00000086d6b2636cb2a392d45edc4ec544a10024d30141c9adf4bfd9de533b53'\n \n parser = argparse.ArgumentParser(description='Script to get coins from a faucet.', epilog='You may need to start with double-dash (--) when providing bitcoin-cli arguments.')\n parser.add_argument('-c', '--cmd', dest='cmd', default='bitcoin-cli', help='bitcoin-cli command to use')\n-parser.add_argument('-f', '--faucet', dest='faucet', default='https://signetfaucet.com/claim', help='URL of the faucet')\n+parser.add_argument('-f', '--faucet', dest='faucet', default=DEFAULT_GLOBAL_FAUCET, help='URL of the faucet')\n parser.add_argument('-a', '--addr', dest='addr', default='', help='Bitcoin address to which the faucet should send')\n parser.add_argument('-p', '--password', dest='password', default='', help='Faucet password, if any')\n parser.add_argument('bitcoin_cli_args', nargs='*', help='Arguments to pass on to bitcoin-cli (default: -signet)')\n \n args = parser.parse_args()\n \n-if args.addr == '':\n-    if args.bitcoin_cli_args == []:\n-        args.bitcoin_cli_args = ['-signet']\n-    # get address for receiving coins\n+if args.bitcoin_cli_args == []:\n+    args.bitcoin_cli_args = ['-signet']\n+\n+\n+def bitcoin_cli(rpc_command_and_params):\n+    argv = [args.cmd] + args.bitcoin_cli_args + rpc_command_and_params\n     try:\n-        args.addr = subprocess.check_output([args.cmd] + args.bitcoin_cli_args + ['getnewaddress', 'faucet', 'bech32']).strip()\n+        return subprocess.check_output(argv).strip().decode()\n     except FileNotFoundError:\n         print('The binary', args.cmd, 'could not be found.')\n-        exit()\n+        exit(1)\n+    except subprocess.CalledProcessError:\n+        cmdline = ' '.join(argv)\n+        print(f'-----\\nError while calling \"{cmdline}\" (see output above).')\n+        exit(1)\n+\n+\n+if args.faucet.lower() == DEFAULT_GLOBAL_FAUCET:\n+    # Get the hash of the block at height 1 of the currently active signet chain\n+    curr_signet_hash = bitcoin_cli(['getblockhash', '1'])\n+    if curr_signet_hash != GLOBAL_FIRST_BLOCK_HASH:\n+        print('The global faucet cannot be used with a custom Signet network. Please use the global signet or setup your custom faucet to use this functionality.\\n')\n+        exit(1)\n+\n+if args.addr == '':\n+    # get address for receiving coins\n+    args.addr = bitcoin_cli(['getnewaddress', 'faucet', 'bech32'])\n \n data = {'address': args.addr, 'password': args.password}\n try:\n     res = requests.post(args.faucet, data=data)\n except:\n     print('Unexpected error when contacting faucet:', sys.exc_info()[0])",
      "path": "contrib/signet/getcoins.py",
      "position": 43,
      "original_position": 59,
      "commit_id": "42dbd9025adc200012c103d2c091cf026f1d50b1",
      "original_commit_id": "42dbd9025adc200012c103d2c091cf026f1d50b1",
      "in_reply_to_id": null,
      "user": {
        "login": "Zero-1729",
        "id": 23586626,
        "node_id": "MDQ6VXNlcjIzNTg2NjI2",
        "avatar_url": "https://avatars.githubusercontent.com/u/23586626?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Zero-1729",
        "html_url": "https://github.com/Zero-1729",
        "followers_url": "https://api.github.com/users/Zero-1729/followers",
        "following_url": "https://api.github.com/users/Zero-1729/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Zero-1729/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Zero-1729/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Zero-1729/subscriptions",
        "organizations_url": "https://api.github.com/users/Zero-1729/orgs",
        "repos_url": "https://api.github.com/users/Zero-1729/repos",
        "events_url": "https://api.github.com/users/Zero-1729/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Zero-1729/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Currently, the message printed here might be cryptic to a non-Python savvy user. For example, when attempting to connect to a URL with no schema (e.g. `test.com`) you get the following:\r\n\r\n```sh\r\n$ ./contrib/signet/getcoins.py --faucet=\"test.com\"\r\nUnexpected error when contacting faucet: <class 'requests.exceptions.MissingSchema'>\r\n```\r\n\r\nWhile we're at it, I'd suggest the following for a more digestible error message:\r\n\r\n```suggestion\r\n    print('Unexpected error when contacting faucet:', sys.exc_info()[1])\r\n```\r\n\r\nwhich results in the following message:\r\n\r\n```sh\r\n$ ./contrib/signet/getcoins.py --faucet=\"test.com\"\r\nUnexpected error when contacting faucet: Invalid URL 'test.com': No schema supplied. Perhaps you meant http://test.com?\r\n```\r\n\r\n**Note**: this would also affect other similar error messages such as a `connectionError` (tested with `--faucet=\"http://fhjvjhj.com/\"`).",
      "created_at": "2021-08-21T10:21:00Z",
      "updated_at": "2021-08-21T10:27:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/22660#discussion_r693336444",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693336444"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22660"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 55,
      "original_line": 55,
      "side": "RIGHT"
    }
  ]
}