{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286",
    "id": 117839726,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTE3ODM5NzI2",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10286",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/10286.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/10286.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/89f03120a02690cff8399d77c979169355bf9cae",
    "number": 10286,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Call wallet notify callbacks in scheduler thread (without cs_main)",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Based on #10179, this effectively reverts #9583, regaining most of the original speedups of #7946.\r\n\r\nThis concludes the work of #9725, #10178, and #10179.\r\n\r\nSee individual commit messages for more information.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2017-04-27T00:59:32Z",
    "updated_at": "2022-02-15T10:59:31Z",
    "closed_at": "2017-11-15T15:26:13Z",
    "mergeable_state": "unknown",
    "merged_at": "2017-11-15T15:26:13Z",
    "merge_commit_sha": "89f03120a02690cff8399d77c979169355bf9cae",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "TheBlueMatt:2017-01-wallet-cache-inmempool-4",
      "ref": "2017-01-wallet-cache-inmempool-4",
      "sha": "89f03120a02690cff8399d77c979169355bf9cae",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 1443291,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDQzMjkx",
        "name": "bitcoin",
        "full_name": "TheBlueMatt/bitcoin",
        "owner": {
          "login": "TheBlueMatt",
          "id": 649246,
          "node_id": "MDQ6VXNlcjY0OTI0Ng==",
          "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/TheBlueMatt",
          "html_url": "https://github.com/TheBlueMatt",
          "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
          "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
          "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
          "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
          "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/TheBlueMatt/bitcoin",
        "description": "Bitcoin (dont fork from here, fork from bitcoin/bitcoin)",
        "fork": true,
        "url": "https://api.github.com/repos/TheBlueMatt/bitcoin",
        "archive_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/events",
        "forks_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/TheBlueMatt/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:TheBlueMatt/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/TheBlueMatt/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/TheBlueMatt/bitcoin/hooks",
        "svn_url": "https://github.com/TheBlueMatt/bitcoin",
        "homepage": "http://www.bitcoin.org/",
        "language": "C++",
        "forks_count": 6,
        "stargazers_count": 19,
        "watchers_count": 19,
        "size": 171686,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T09:40:23Z",
        "created_at": "2011-03-05T14:14:49Z",
        "updated_at": "2022-12-15T18:21:13Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "326a5652e0d25fdb60c337ef4f1c98a63e0748f0",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69818,
        "watchers_count": 69818,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T22:42:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-06T22:16:48Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 354,
    "deletions": 28,
    "changed_files": 12,
    "commits": 12,
    "review_comments": 114,
    "comments": 21
  },
  "events": [
    {
      "event": "head_ref_force_pushed",
      "id": 1059669289,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTA1OTY2OTI4OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1059669289",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-27T02:15:34Z"
    },
    {
      "event": "reviewed",
      "id": 35889308,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4ODkzMDg=",
      "url": null,
      "actor": null,
      "commit_id": "1b6b0c9911a7429c001f74d1b58645f0716988fb",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 6fb571977d9cc41793a594688e5071dd5bbd864d.\r\n\r\nCode changes mostly seem great, though as you can tell from my comments I have a somewhat hazy understanding of the semantics and assumptions being made. A little more documentation would make everything clear, I think.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-35889308",
      "submitted_at": "2017-05-02T22:06:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1067834212,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTA2NzgzNDIxMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1067834212",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-03T19:20:03Z"
    },
    {
      "event": "commented",
      "id": 299009278,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTAwOTI3OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299009278",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-03T19:20:32Z",
      "updated_at": "2017-05-03T19:20:32Z",
      "author_association": "MEMBER",
      "body": "Rebased and fixed @ryanofsky's mostly-comment nits :).",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-299009278",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "mentioned",
      "id": 1067835141,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA2NzgzNTE0MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1067835141",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-03T19:20:32Z"
    },
    {
      "event": "subscribed",
      "id": 1067835143,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwNjc4MzUxNDM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1067835143",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-03T19:20:33Z"
    },
    {
      "event": "mentioned",
      "id": 1067902469,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA2NzkwMjQ2OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1067902469",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-03T20:05:12Z"
    },
    {
      "event": "subscribed",
      "id": 1067902470,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwNjc5MDI0NzA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1067902470",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-03T20:05:12Z"
    },
    {
      "event": "reviewed",
      "id": 36116036,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMTYwMzY=",
      "url": null,
      "actor": null,
      "commit_id": "a14fa884f7ef82b9b1fc8b8d85a211ec2f8ea59e",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Overall appears to be on a good track. It looks to me like the global lock (cs_main) is causing some serious confusion/issues and there is some general mistake in the pattern of locks or their encapsulation that makes this all difficult. \r\n\r\nI reviewed everything pretty closely aside from the ZMQ test changes, that went over my head. \r\n\r\nPlease don't overlook the outdated validationinterface.cpp comments, those took some time to put together.",
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-36116036",
      "submitted_at": "2017-05-03T23:16:52Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "mentioned",
      "id": 1068235521,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA2ODIzNTUyMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1068235521",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T01:23:56Z"
    },
    {
      "event": "subscribed",
      "id": 1068235522,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwNjgyMzU1MjI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1068235522",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T01:23:56Z"
    },
    {
      "event": "mentioned",
      "id": 1069553253,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA2OTU1MzI1Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069553253",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T19:39:09Z"
    },
    {
      "event": "subscribed",
      "id": 1069553254,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwNjk1NTMyNTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069553254",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T19:39:09Z"
    },
    {
      "event": "mentioned",
      "id": 1069574527,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA2OTU3NDUyNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069574527",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T19:53:37Z"
    },
    {
      "event": "subscribed",
      "id": 1069574529,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwNjk1NzQ1Mjk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069574529",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T19:53:37Z"
    },
    {
      "event": "commented",
      "id": 299296104,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTI5NjEwNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299296104",
      "actor": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T20:13:45Z",
      "updated_at": "2017-05-04T20:13:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "So far looks good to me, I'm going to poke around wallet<->blockchain interaction so I can better understand the wallet.cpp changes you made before I comment further.\r\n\r\nThat said I feel like there is something fundamentally wrong with the interaction between CWallet and the blockchain (I don't even know where that code lives yet). This feels like a solution to current issues but I would hope a refactor prevents needing such frequently occurring checks and thread specific execution. \r\n\r\nThat said, it would be interesting if a single \"blockchain operations\" thread is needed to get the code working in a reasonable manner. GUI systems tend to need such threads because of the nature of problem which is events coming from both ends of the system (rendering thread vs input thread) which would have to, in any logical design, invert lock ordering or else excessively block.",
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-299296104",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "reviewed",
      "id": 36372945,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzNzI5NDU=",
      "url": null,
      "actor": null,
      "commit_id": "943217460bc527c4003868415c264e4a77a6e55a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 943217460bc527c4003868415c264e4a77a6e55a.\r\n\r\nChanges since previous ACK were rebasing, adding developer notes, tweaking some comments, adding a check to the zmq test",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-36372945",
      "submitted_at": "2017-05-04T20:16:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "commented",
      "id": 299298859,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTI5ODg1OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299298859",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T20:25:00Z",
      "updated_at": "2017-05-04T20:25:00Z",
      "author_association": "MEMBER",
      "body": "@mchrostowski thanks for the review! Generally, wallet and blockchain (essentially validation.cpp's stuff) have historically been pretty tightly coupled (updated all under the same cs_main lock). This PR is a step, however small, towards decoupling that a bit. Because the wallet still relies on \"is it in our mempool?\" as a proxy for \"is this possibly going to get confirmed/is it spendable with the result making it into my mempool\", the chainstate and mempool still need to be updated in-sync and the wallet notified of the updates in a single notification, which come in in the order they happened. Still, this is much better than the wallet actually querying the mempool/validation logic directly instead of tracking the stuff it cares about out of them.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-299298859",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "mentioned",
      "id": 1069621020,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA2OTYyMTAyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069621020",
      "actor": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T20:25:00Z"
    },
    {
      "event": "subscribed",
      "id": 1069621021,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwNjk2MjEwMjE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069621021",
      "actor": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T20:25:00Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1069665000,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTA2OTY2NTAwMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069665000",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T20:54:41Z"
    },
    {
      "event": "commented",
      "id": 299306356,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTMwNjM1Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299306356",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T20:55:07Z",
      "updated_at": "2017-05-04T20:55:07Z",
      "author_association": "MEMBER",
      "body": "Rebased on latest #10179, current master, and fixed @ryanofsky's english corrections.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-299306356",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "mentioned",
      "id": 1069665665,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA2OTY2NTY2NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069665665",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T20:55:07Z"
    },
    {
      "event": "subscribed",
      "id": 1069665666,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwNjk2NjU2NjY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069665666",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T20:55:07Z"
    },
    {
      "event": "mentioned",
      "id": 1069677542,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA2OTY3NzU0Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069677542",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T21:02:30Z"
    },
    {
      "event": "subscribed",
      "id": 1069677543,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwNjk2Nzc1NDM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069677543",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T21:02:30Z"
    },
    {
      "event": "mentioned",
      "id": 1069681121,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA2OTY4MTEyMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069681121",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T21:05:15Z"
    },
    {
      "event": "subscribed",
      "id": 1069681122,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwNjk2ODExMjI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069681122",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T21:05:16Z"
    },
    {
      "event": "mentioned",
      "id": 1069700914,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA2OTcwMDkxNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069700914",
      "actor": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T21:20:06Z"
    },
    {
      "event": "subscribed",
      "id": 1069700916,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwNjk3MDA5MTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069700916",
      "actor": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T21:20:06Z"
    },
    {
      "event": "mentioned",
      "id": 1069729570,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA2OTcyOTU3MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069729570",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T21:42:03Z"
    },
    {
      "event": "subscribed",
      "id": 1069729571,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwNjk3Mjk1NzE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1069729571",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-04T21:42:03Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1070977918,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTA3MDk3NzkxOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1070977918",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-05T17:51:07Z"
    },
    {
      "event": "commented",
      "id": 299574349,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTU3NDM0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299574349",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-05T21:00:01Z",
      "updated_at": "2017-05-05T21:00:37Z",
      "author_association": "MEMBER",
      "body": "utACK 2c306d7876fb57ff26d217f97415a79942094002. Changes since previous were some documentation tweaks and new block calls in \"Add calls to CWallet::BlockUntilSyncedToCurrentChain()\", along with the rebase.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-299574349",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "commented",
      "id": 301278019,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTI3ODAxOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/301278019",
      "actor": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-13T22:12:00Z",
      "updated_at": "2017-05-13T22:12:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "@TheBlueMatt The stated purpose of this PR is to reduce locking on cs_main so as to reducing code coupling. I see one change in this PR that actually deletes a `LOCK(cs_main)` which is in `CWallet::InMempool()`. This looks like a step in the right direction.\r\n\r\nThat said, the remaining changes seem to be all about getting the signals into a background thread. What does this gain us for decoupling?\r\n\r\nIf the purpose is to not hold cs_main from whatever call sites hit `GetMainSignals()` then I don't see a benefit in using new threads when we can release the lock before making the call. That is, running in another thread is not decoupling synchronization or interface dependencies. The goal of \"move wallet updates out of cs_main into a background thread\" seems unrelated to decoupling because \"using a background thread\" and \"not holding cs_main\" are not dependent on each other, at least in the cases I observed.\r\n\r\nOf particular concern is the re-ordering of calls, which you're avoiding with the single threaded scheduler, but if this isn't required for decoupling then it is just added complexity and overhead.",
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-301278019",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "mentioned",
      "id": 1081119906,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTA4MTExOTkwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1081119906",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-13T22:12:00Z"
    },
    {
      "event": "subscribed",
      "id": 1081119907,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEwODExMTk5MDc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1081119907",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-13T22:12:00Z"
    },
    {
      "event": "commented",
      "id": 304929650,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDkyOTY1MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/304929650",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-05-30T16:14:18Z",
      "updated_at": "2017-05-30T16:14:18Z",
      "author_association": "MEMBER",
      "body": "This needs rebase due to a minor conflict in listunspent.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-304929650",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "reviewed",
      "id": 41340432,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNDA0MzI=",
      "url": null,
      "actor": null,
      "commit_id": "6cbe04c9cf237b34b6521edd33468b61b1f2032b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-41340432",
      "submitted_at": "2017-05-31T20:10:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1115725239,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTExNTcyNTIzOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1115725239",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-08T15:24:12Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1115728418,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTExNTcyODQxOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1115728418",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-08T15:25:55Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1115737103,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTExNTczNzEwMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1115737103",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-08T15:30:21Z"
    },
    {
      "event": "commented",
      "id": 307140100,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzE0MDEwMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307140100",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-08T15:32:08Z",
      "updated_at": "2017-06-08T15:32:08Z",
      "author_association": "MEMBER",
      "body": "Rebased and rewrote CWallet::BlockUntilSyncedToCurrentChain(). Instead of the complicated fallback logic, it now just tests if it is caught up, and if it is not, it puts a callback into the CValidationInterface queue and waits for it to trigger. I wanted to avoid having this function previously, but I ended up needing it for a different branch which moves more CValidationInterface callbacks to the background and the logic is so simple, that I went ahead with it.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-307140100",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "reviewed",
      "id": 43007637,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDc2Mzc=",
      "url": null,
      "actor": null,
      "commit_id": "09c604afe78f080bd1dbd82c4bcc8cdbe11455cd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 91aad9fa3b33ae387145e4b84a14c5f61cbd2494. Changes since last review were rebase, style guide fixes, BlockUntilSyncedToCurrentChain rewrite.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-43007637",
      "submitted_at": "2017-06-08T21:06:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1117584787,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTExNzU4NDc4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1117584787",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-09T16:50:45Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1117613778,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTExNzYxMzc3OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1117613778",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-09T17:11:56Z"
    },
    {
      "event": "reviewed",
      "id": 43795547,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3OTU1NDc=",
      "url": null,
      "actor": null,
      "commit_id": "ae0c83326bdae2b61c1bcffd122f78468aa2aefb",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK ae0c83326bdae2b61c1bcffd122f78468aa2aefb. Same as previous except the last 3 review suggestions are now incorporated. There is a minor conflict now with master, but since this depends on #10179 anyway, there's probably no hurry to rebase.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-43795547",
      "submitted_at": "2017-06-13T17:23:31Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "reviewed",
      "id": 44954013,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NTQwMTM=",
      "url": null,
      "actor": null,
      "commit_id": "ef52453c96d33a754a17c320325d9b391ef70c4b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-44954013",
      "submitted_at": "2017-06-19T19:53:28Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1132067028,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTEzMjA2NzAyOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1132067028",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-21T01:22:42Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1132072339,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTEzMjA3MjMzOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1132072339",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-21T01:30:16Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1133051006,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTEzMzA1MTAwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1133051006",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-21T14:43:48Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1133062137,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTEzMzA2MjEzNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1133062137",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-21T14:49:11Z"
    },
    {
      "event": "reviewed",
      "id": 45449956,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDk5NTY=",
      "url": null,
      "actor": null,
      "commit_id": "176612666d7fa05d1416b7386c69121f751b552e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK db1d712d5668496ca83947cf9d6c4a39d3a3af1f. Changes since last review: rebase, sendraw change, naming style updates, added std::function includes.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-45449956",
      "submitted_at": "2017-06-21T14:53:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "reviewed",
      "id": 45465002,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NjUwMDI=",
      "url": null,
      "actor": null,
      "commit_id": "b5410f848045afbdaca875fa13141919de4769a6",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK e3617741430df7d21d807549041f7251ba5b91e5. Only change since last review was sendraw locking fix.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-45465002",
      "submitted_at": "2017-06-21T15:12:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1133120376,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTEzMzEyMDM3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1133120376",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-21T15:17:22Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1133137793,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTEzMzEzNzc5Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1133137793",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-21T15:25:48Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1133174458,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTEzMzE3NDQ1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1133174458",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-21T15:43:43Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1133306890,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTEzMzMwNjg5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1133306890",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-21T17:01:42Z"
    },
    {
      "event": "reviewed",
      "id": 45793902,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3OTM5MDI=",
      "url": null,
      "actor": null,
      "commit_id": "a40c312e6bb9df2cc25249982ce70c472b9fad79",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 68201ec021944b1216e321a572060a7fd5183cbe. Just AssertLockNotHeldInternal foreach fix and sendrawtransaction tweaks since last review.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-45793902",
      "submitted_at": "2017-06-22T17:40:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "labeled",
      "id": 1142258454,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDExNDIyNTg0NTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1142258454",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-06-28T12:24:27Z",
      "label": {
        "name": "Wallet",
        "color": "02d7e1"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1154666675,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTE1NDY2NjY3NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1154666675",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-07-07T15:19:25Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1154724211,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTE1NDcyNDIxMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1154724211",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-07-07T15:52:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1159003976,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTE1OTAwMzk3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1159003976",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-07-11T15:14:30Z"
    },
    {
      "event": "commented",
      "id": 314477197,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDQ3NzE5Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314477197",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-07-11T15:15:00Z",
      "updated_at": "2017-07-11T15:15:00Z",
      "author_association": "MEMBER",
      "body": "Rebased. Would be nice to get this in early in 16 to let it simmer on master.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-314477197",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "reviewed",
      "id": 52134606,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzQ2MDY=",
      "url": null,
      "actor": null,
      "commit_id": "964f376b6a34294d328b634ef045b11079b0859d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 964f376b6a34294d328b634ef045b11079b0859d. No changes since last review, only rebase.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-52134606",
      "submitted_at": "2017-07-25T17:17:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "commented",
      "id": 321917202,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTkxNzIwMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321917202",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-11T20:58:16Z",
      "updated_at": "2017-08-11T20:58:16Z",
      "author_association": "MEMBER",
      "body": "I haven't fully reviewed yet, but @ryanofsky pointed me to this for `m_last_block_processed`. Should that be rewound in `DisconnectBlock()`?",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-321917202",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "mentioned",
      "id": 1203276154,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTIwMzI3NjE1NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1203276154",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-11T20:58:16Z"
    },
    {
      "event": "subscribed",
      "id": 1203276155,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEyMDMyNzYxNTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1203276155",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-11T20:58:16Z"
    },
    {
      "event": "commented",
      "id": 321919047,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTkxOTA0Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321919047",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-11T21:06:56Z",
      "updated_at": "2017-08-11T21:06:56Z",
      "author_association": "MEMBER",
      "body": "I think it should be safe to update m_last_block_processed in disconnectblock. It just isn't needed for this pr, because m_last_block_processed is used here in a pretty limited way.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-321919047",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "reviewed",
      "id": 55934232,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MzQyMzI=",
      "url": null,
      "actor": null,
      "commit_id": "3e3dfecccc275fd8b4b84b2e5c1f6b1fd8d861d8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-55934232",
      "submitted_at": "2017-08-12T03:07:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1205389131,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTIwNTM4OTEzMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1205389131",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-14T19:34:19Z"
    },
    {
      "event": "commented",
      "id": 322286910,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjI4NjkxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322286910",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-14T19:34:21Z",
      "updated_at": "2017-08-14T19:34:21Z",
      "author_association": "MEMBER",
      "body": "Rebased.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-322286910",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "reviewed",
      "id": 56699427,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2OTk0Mjc=",
      "url": null,
      "actor": null,
      "commit_id": "daab5ea6d853020838ba2c19d3e35079ae1312c2",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 9adaf5f2c5a28e338dcf99d873f0bd40000696e7. Only change sinces the last review were rebase and fInMempool move",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-56699427",
      "submitted_at": "2017-08-16T17:13:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1210703805,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTIxMDcwMzgwNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1210703805",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-17T18:52:50Z"
    },
    {
      "event": "added_to_project",
      "id": 1210735637,
      "node_id": "MDE5OkFkZGVkVG9Qcm9qZWN0RXZlbnQxMjEwNzM1NjM3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1210735637",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-08-17T19:13:32Z",
      "project_card": {
        "id": 4264303,
        "url": "https://api.github.com/projects/columns/cards/4264303",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Blockers"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1245718578,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI0NTcxODU3OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1245718578",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-12T17:06:56Z"
    },
    {
      "event": "commented",
      "id": 328919318,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMyODkxOTMxOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328919318",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-12T17:07:16Z",
      "updated_at": "2017-09-12T17:07:16Z",
      "author_association": "MEMBER",
      "body": "(Trivially) rebased.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-328919318",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "reviewed",
      "id": 66184198,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjYxODQxOTg=",
      "url": null,
      "actor": null,
      "commit_id": "340164291f2258be28cbcc8a4aa69b35cb2d15d9",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-66184198",
      "submitted_at": "2017-09-29T15:17:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "reviewed",
      "id": 66195001,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjYxOTUwMDE=",
      "url": null,
      "actor": null,
      "commit_id": "901eb9f4335bf87be9dd88931569f527e6c1c15b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-66195001",
      "submitted_at": "2017-09-29T15:53:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "reviewed",
      "id": 66195766,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjYxOTU3NjY=",
      "url": null,
      "actor": null,
      "commit_id": "901eb9f4335bf87be9dd88931569f527e6c1c15b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-66195766",
      "submitted_at": "2017-09-29T15:56:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "reviewed",
      "id": 66199470,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjYxOTk0NzA=",
      "url": null,
      "actor": null,
      "commit_id": "340164291f2258be28cbcc8a4aa69b35cb2d15d9",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-66199470",
      "submitted_at": "2017-09-29T16:10:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "reviewed",
      "id": 66211031,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjYyMTEwMzE=",
      "url": null,
      "actor": null,
      "commit_id": "1b67af2ca07fa22efb61952438cc23ac64901c17",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-66211031",
      "submitted_at": "2017-09-29T16:58:34Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "commented",
      "id": 333183420,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzE4MzQyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333183420",
      "actor": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-29T17:09:12Z",
      "updated_at": "2017-09-29T17:09:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "- `BlockConnectedDisconnected` in comments and commit messages should say `BlockConnected/Disconnected`, or Block[Connected|Disconnected]`, or something of the sort. The way it's written like now looks like there's an actual single function by that name.\r\n- In commit message 975f071b49b642b069c5e1de8d0050b663ca7c1c, \"CSceduler background threa\" -> \"CScheduler background thread\"\r\n",
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-333183420",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "reviewed",
      "id": 66264053,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjYyNjQwNTM=",
      "url": null,
      "actor": null,
      "commit_id": "4b6a0c9aad7a91e68ef885046a963f6b233b3150",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-66264053",
      "submitted_at": "2017-09-29T20:32:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "reviewed",
      "id": 66265047,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjYyNjUwNDc=",
      "url": null,
      "actor": null,
      "commit_id": "a9629cb6525985a4fcd40f6bfdaf99731b074acb",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-66265047",
      "submitted_at": "2017-09-29T20:36:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "commented",
      "id": 333238825,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzIzODgyNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333238825",
      "actor": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-09-29T21:04:19Z",
      "updated_at": "2017-09-29T21:05:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "utACK, looks like a very nice improvement.\r\nReviewed everything except zmq which I have no idea about :)\r\nI think `CallFunctionInValidationInterfaceQueue` interface can be improved, detailed further in a comment above.",
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-333238825",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1272955168,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI3Mjk1NTE2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1272955168",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-01T04:26:26Z"
    },
    {
      "event": "commented",
      "id": 333352594,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzM1MjU5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333352594",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-01T04:26:35Z",
      "updated_at": "2017-10-01T04:26:35Z",
      "author_association": "MEMBER",
      "body": "Rebased and address @danra's comments.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-333352594",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "mentioned",
      "id": 1272955198,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTI3Mjk1NTE5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1272955198",
      "actor": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-01T04:26:35Z"
    },
    {
      "event": "subscribed",
      "id": 1272955199,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEyNzI5NTUxOTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1272955199",
      "actor": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-01T04:26:35Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1272962070,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI3Mjk2MjA3MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1272962070",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-01T05:08:40Z"
    },
    {
      "event": "reviewed",
      "id": 68693050,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njg2OTMwNTA=",
      "url": null,
      "actor": null,
      "commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Lightly tested ac204f8f87bbc761a4e682c084838a6f47349bae. A few comments and questions inline.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-68693050",
      "submitted_at": "2017-10-11T19:21:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1292623965,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI5MjYyMzk2NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1292623965",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-13T16:36:39Z"
    },
    {
      "event": "commented",
      "id": 336503910,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjUwMzkxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336503910",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-13T16:37:11Z",
      "updated_at": "2017-10-13T16:37:11Z",
      "author_association": "MEMBER",
      "body": "Addressed @jnewbery's comments, and added more code comments where things were not entirely clear.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-336503910",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "mentioned",
      "id": 1292624683,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTI5MjYyNDY4Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1292624683",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-13T16:37:11Z"
    },
    {
      "event": "subscribed",
      "id": 1292624684,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEyOTI2MjQ2ODQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1292624684",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-13T16:37:11Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1292846831,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI5Mjg0NjgzMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1292846831",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-13T18:56:31Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1292896588,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI5Mjg5NjU4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1292896588",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-13T19:29:39Z"
    },
    {
      "event": "commented",
      "id": 336547593,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjU0NzU5Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336547593",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-13T19:35:02Z",
      "updated_at": "2017-10-13T19:35:02Z",
      "author_association": "MEMBER",
      "body": "Most recent round of changes looks good to me. utACK 024e7b51ee4eeaf21ecda71915438241dd666705",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-336547593",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzphN2QzOTM2ZGU4NDE4NTIyZGJiMTYxYmZlZjMxYzIzNGZjNmMyNTAz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a7d3936de8418522dbb161bfef31c234fc6c2503",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a7d3936de8418522dbb161bfef31c234fc6c2503",
      "tree": {
        "sha": "7b14bdfffb142c4097a8abee0ccb58c1498f591f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7b14bdfffb142c4097a8abee0ccb58c1498f591f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/326a5652e0d25fdb60c337ef4f1c98a63e0748f0",
          "sha": "326a5652e0d25fdb60c337ef4f1c98a63e0748f0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/326a5652e0d25fdb60c337ef4f1c98a63e0748f0"
        }
      ],
      "message": "Add a CValidationInterface::TransactionRemovedFromMempool\n\nThis is currently unused, but will by used by wallet to cache when\ntransactions are in the mempool, obviating the need for calls to\nmempool from CWalletTx::InMempool()",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:29:54Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-01-20T20:08:14Z"
      },
      "sha": "a7d3936de8418522dbb161bfef31c234fc6c2503"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMzQzNjc2Y2UzMmVmNjliMjViYWRhMTAxMjIzYjkyZjkyZGExNThh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0343676ce32ef69b25bada101223b92f92da158a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0343676ce32ef69b25bada101223b92f92da158a",
      "tree": {
        "sha": "6ce316c85afe8884c123c1226d0b4a2f8b89df32",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6ce316c85afe8884c123c1226d0b4a2f8b89df32"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a7d3936de8418522dbb161bfef31c234fc6c2503",
          "sha": "a7d3936de8418522dbb161bfef31c234fc6c2503",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a7d3936de8418522dbb161bfef31c234fc6c2503"
        }
      ],
      "message": "Call TransactionRemovedFromMempool in the CScheduler thread\n\nThis is both good practice (we want to move all such callbacks\ninto a background thread eventually) and prevents a lock inversion\nwhen we go to use this in wallet (mempool.cs->cs_wallet and\ncs_wallet->mempool.cs would otherwise both be used).",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:29:54Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-06-08T15:05:18Z"
      },
      "sha": "0343676ce32ef69b25bada101223b92f92da158a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyYjRiMzQ1MDNmZjBlZDQ0MzY1ZDgzYTY4ZmZlZDI3MzZlYTljYzUx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2b4b34503ff0ed44365d83a68ffed2736ea9cc51",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2b4b34503ff0ed44365d83a68ffed2736ea9cc51",
      "tree": {
        "sha": "62462c66263e297f19d6b1de7a24f91acfab8093",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/62462c66263e297f19d6b1de7a24f91acfab8093"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0343676ce32ef69b25bada101223b92f92da158a",
          "sha": "0343676ce32ef69b25bada101223b92f92da158a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0343676ce32ef69b25bada101223b92f92da158a"
        }
      ],
      "message": "Add ability to assert a lock is not held in DEBUG_LOCKORDER",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:29:54Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-01-17T22:42:46Z"
      },
      "sha": "2b4b34503ff0ed44365d83a68ffed2736ea9cc51"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzowYjJmNDJkNzM3NmM1ZjdjMWJhMWFjNWQxN2EzMDY5MTk4OWQ5MTU5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0b2f42d7376c5f7c1ba1ac5d17a30691989d9159",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0b2f42d7376c5f7c1ba1ac5d17a30691989d9159",
      "tree": {
        "sha": "435de24bb4a2795e44c547bc4829dd1f9ddde1df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/435de24bb4a2795e44c547bc4829dd1f9ddde1df"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2b4b34503ff0ed44365d83a68ffed2736ea9cc51",
          "sha": "2b4b34503ff0ed44365d83a68ffed2736ea9cc51",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2b4b34503ff0ed44365d83a68ffed2736ea9cc51"
        }
      ],
      "message": "Add CallFunctionInQueue to wait on validation interface queue drain",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:29:54Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-06-08T15:13:46Z"
      },
      "sha": "0b2f42d7376c5f7c1ba1ac5d17a30691989d9159"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZWUzMTcyNjM2MGNiZTM0M2Y1YTFhNTBhNWU0NDBkYjczNmRhNWI3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5ee31726360cbe343f5a1a50a5e440db736da5b7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5ee31726360cbe343f5a1a50a5e440db736da5b7",
      "tree": {
        "sha": "d6e3cab34961e1875957bbec38742feccd01f778",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d6e3cab34961e1875957bbec38742feccd01f778"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0b2f42d7376c5f7c1ba1ac5d17a30691989d9159",
          "sha": "0b2f42d7376c5f7c1ba1ac5d17a30691989d9159",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0b2f42d7376c5f7c1ba1ac5d17a30691989d9159"
        }
      ],
      "message": "Add CWallet::BlockUntilSyncedToCurrentChain()\n\nThis blocks until the wallet has synced up to the current height.",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:29:54Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-01-17T23:06:16Z"
      },
      "sha": "5ee31726360cbe343f5a1a50a5e440db736da5b7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZDY3YTc4NjhkYjE4OGY3ZTQzY2U5MDI4ZjIxNTAzNGQwNTc3OTBk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5d67a7868db188f7e43ce9028f215034d057790d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5d67a7868db188f7e43ce9028f215034d057790d",
      "tree": {
        "sha": "2d7bb0486accc6295fc0abc203c387371f046fbe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2d7bb0486accc6295fc0abc203c387371f046fbe"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5ee31726360cbe343f5a1a50a5e440db736da5b7",
          "sha": "5ee31726360cbe343f5a1a50a5e440db736da5b7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5ee31726360cbe343f5a1a50a5e440db736da5b7"
        }
      ],
      "message": "Add calls to CWallet::BlockUntilSyncedToCurrentChain() in RPCs\n\nThis prevents the wallet-RPCs-return-stale-info issue from being\nre-introduced when new-block callbacks no longer happen in the\nblock-connection cs_main lock",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:29:54Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-09-12T17:05:28Z"
      },
      "sha": "5d67a7868db188f7e43ce9028f215034d057790d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxNzIyMGQ2MzI1ZWY4ZDc3ODkzNzMwNTU1ODZlNDMzMjk3NzA3N2Iw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/17220d6325ef8d7789373055586e4332977077b0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/17220d6325ef8d7789373055586e4332977077b0",
      "tree": {
        "sha": "6a2f87e2ad43fbd785f498f97d187a871d89079e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6a2f87e2ad43fbd785f498f97d187a871d89079e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5d67a7868db188f7e43ce9028f215034d057790d",
          "sha": "5d67a7868db188f7e43ce9028f215034d057790d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5d67a7868db188f7e43ce9028f215034d057790d"
        }
      ],
      "message": "Use callbacks to cache whether wallet transactions are in mempool\n\nThis avoid calling out to mempool state during coin selection,\nbalance calculation, etc. In the next commit we ensure all wallet\ncallbacks from CValidationInterface happen in the same queue,\nserialized with each other. This helps to avoid re-introducing one\nof the issues described in #9584 [1] by further disconnecting\nwallet from current chain/mempool state.\n\nThanks to @morcos for the suggestion to do this.\n\nNote that there are several race conditions introduced here:\n\n * If a user calls sendrawtransaction from RPC, adding a\n   transaction which is \"trusted\" (ie from them) and pays them\n   change, it may not be immediately used by coin selection until\n   the notification callbacks finish running. No such race is\n   introduced in normal transaction-sending RPCs as this case is\n   explicitly handled.\n\n * Until Block{Connected,Disconnected} and\n   TransactionAddedToMempool calls also run in the CSceduler\n   background thread, there is a race where\n   TransactionAddedToMempool might be called after a\n   Block{Connected,Disconnected} call happens.\n\n * Wallet will write a new best chain from the SetBestChain\n   callback prior to having processed the transaction from that\n   block.\n\n[1] \"you could go to select coins, need to use 0-conf change, but\nsuch 0-conf change may have been included in a block who's\ncallbacks have not yet been processed - resulting in thinking they\nare not in mempool and, thus, not selectable.\"",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:30:14Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-01-20T21:38:07Z"
      },
      "sha": "17220d6325ef8d7789373055586e4332977077b0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzplNTQ1ZGVkZjcyYmZmMmJkNDFjOTNjOTNlYjU3NjkyOWZjZTM3MTEy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e545dedf72bff2bd41c93c93eb576929fce37112",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e545dedf72bff2bd41c93c93eb576929fce37112",
      "tree": {
        "sha": "1afa0523a8bcd4ce54b41b60832515542cb30447",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1afa0523a8bcd4ce54b41b60832515542cb30447"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/17220d6325ef8d7789373055586e4332977077b0",
          "sha": "17220d6325ef8d7789373055586e4332977077b0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/17220d6325ef8d7789373055586e4332977077b0"
        }
      ],
      "message": "Also call other wallet notify callbacks in scheduler thread\n\nThis runs Block{Connected,Disconnected}, SetBestChain, Inventory,\nand TransactionAddedToMempool on the background scheduler thread.\n\nOf those, only BlockConnected is used outside of Wallet/ZMQ, and\nis used only for orphan transaction removal in net_processing,\nsomething which does not need to be synchronous with anything\nelse.\n\nThis partially reverts #9583, re-enabling some of the gains from\n #7946. This does not, however, re-enable the gains achieved by\nrepeatedly releasing cs_main between each transaction processed.",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:30:15Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-06-08T15:08:53Z"
      },
      "sha": "e545dedf72bff2bd41c93c93eb576929fce37112"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjYjA2ZWRmOTM4MzAyMTY2MDMwZGIxOTAxN2MyNzg4OWVhNWIxMGI2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb06edf938302166030db19017c27889ea5b10b6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cb06edf938302166030db19017c27889ea5b10b6",
      "tree": {
        "sha": "a11872ce2488f5780ecf07025549edad4fc0f76b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a11872ce2488f5780ecf07025549edad4fc0f76b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e545dedf72bff2bd41c93c93eb576929fce37112",
          "sha": "e545dedf72bff2bd41c93c93eb576929fce37112",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e545dedf72bff2bd41c93c93eb576929fce37112"
        }
      ],
      "message": "Fix wallet RPC race by waiting for callbacks in sendrawtransaction",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:30:15Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-06-21T01:21:36Z"
      },
      "sha": "cb06edf938302166030db19017c27889ea5b10b6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzozZWE4Yjc1MjgxZWRjNjAwNzg0MjNiZDVkMjc3Y2QyYTg0YWE1ZDMz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3ea8b75281edc60078423bd5d277cd2a84aa5d33",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3ea8b75281edc60078423bd5d277cd2a84aa5d33",
      "tree": {
        "sha": "0db0d4510f04c1bbf1fd4f8a8199415ec67459e9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0db0d4510f04c1bbf1fd4f8a8199415ec67459e9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb06edf938302166030db19017c27889ea5b10b6",
          "sha": "cb06edf938302166030db19017c27889ea5b10b6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cb06edf938302166030db19017c27889ea5b10b6"
        }
      ],
      "message": "Give ZMQ consistent order with UpdatedBlockTip on scheduler thread\n\nNote that UpdatedBlockTip is also used in net_processing to\nannounce new blocks to peers. As this may need additional review,\nthis change is included in its own commit.",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:30:15Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-01T03:49:59Z"
      },
      "sha": "3ea8b75281edc60078423bd5d277cd2a84aa5d33"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjNDc4NGI1MDY1NTg3NDQ3NDlhY2YxMmQ0Y2ZmMWFjYTJkY2MzZjc2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c4784b506558744749acf12d4cff1aca2dcc3f76",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c4784b506558744749acf12d4cff1aca2dcc3f76",
      "tree": {
        "sha": "9875b534cb3f66698f29e24b050b39a98c841157",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9875b534cb3f66698f29e24b050b39a98c841157"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3ea8b75281edc60078423bd5d277cd2a84aa5d33",
          "sha": "3ea8b75281edc60078423bd5d277cd2a84aa5d33",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3ea8b75281edc60078423bd5d277cd2a84aa5d33"
        }
      ],
      "message": "Add a dev notes document describing the new wallet RPC blocking",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:30:15Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-05-03T19:57:56Z"
      },
      "sha": "c4784b506558744749acf12d4cff1aca2dcc3f76"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4OWYwMzEyMGEwMjY5MGNmZjgzOTlkNzdjOTc5MTY5MzU1YmY5Y2Fl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/89f03120a02690cff8399d77c979169355bf9cae",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/89f03120a02690cff8399d77c979169355bf9cae",
      "tree": {
        "sha": "d7003b4a1f6e94872dcb7fe62d1b96b80d9405de",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d7003b4a1f6e94872dcb7fe62d1b96b80d9405de"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c4784b506558744749acf12d4cff1aca2dcc3f76",
          "sha": "c4784b506558744749acf12d4cff1aca2dcc3f76",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c4784b506558744749acf12d4cff1aca2dcc3f76"
        }
      ],
      "message": "Remove redundant pwallet nullptr check",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-13T23:30:15Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-10-01T04:23:02Z"
      },
      "sha": "89f03120a02690cff8399d77c979169355bf9cae"
    },
    {
      "event": "commented",
      "id": 336590135,
      "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjU5MDEzNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336590135",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-13T23:30:21Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "author_association": "MEMBER",
      "body": "Rebased.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-336590135",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1293173325,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTI5MzE3MzMyNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1293173325",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-10-13T23:30:21Z"
    },
    {
      "event": "commented",
      "id": 344626853,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDYyNjg1Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/344626853",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-15T15:25:33Z",
      "updated_at": "2017-11-15T15:25:33Z",
      "author_association": "MEMBER",
      "body": "utACK 89f0312",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-344626853",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "merged",
      "id": 1343226707,
      "node_id": "MDExOk1lcmdlZEV2ZW50MTM0MzIyNjcwNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1343226707",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/89f03120a02690cff8399d77c979169355bf9cae",
      "created_at": "2017-11-15T15:26:13Z"
    },
    {
      "event": "closed",
      "id": 1343226712,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTM0MzIyNjcxMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1343226712",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-15T15:26:13Z"
    },
    {
      "event": "referenced",
      "id": 1343227720,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEzNDMyMjc3MjA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1343227720",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "927a1d7d088e52aa079682e1d4f514222c0a2069",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/927a1d7d088e52aa079682e1d4f514222c0a2069",
      "created_at": "2017-11-15T15:26:39Z"
    },
    {
      "event": "reviewed",
      "id": 76899069,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzY4OTkwNjk=",
      "url": null,
      "actor": null,
      "commit_id": "5ee31726360cbe343f5a1a50a5e440db736da5b7",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-76899069",
      "submitted_at": "2017-11-15T19:18:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "reviewed",
      "id": 76900570,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzY5MDA1NzA=",
      "url": null,
      "actor": null,
      "commit_id": "5ee31726360cbe343f5a1a50a5e440db736da5b7",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-76900570",
      "submitted_at": "2017-11-15T19:23:27Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "reviewed",
      "id": 76924029,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzY5MjQwMjk=",
      "url": null,
      "actor": null,
      "commit_id": "17220d6325ef8d7789373055586e4332977077b0",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-76924029",
      "submitted_at": "2017-11-15T20:45:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "mentioned",
      "id": 1344011780,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM0NDAxMTc4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1344011780",
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-15T22:25:51Z"
    },
    {
      "event": "subscribed",
      "id": 1344011781,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzNDQwMTE3ODE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1344011781",
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-15T22:25:51Z"
    },
    {
      "event": "removed_from_project",
      "id": 1344979190,
      "node_id": "MDIzOlJlbW92ZWRGcm9tUHJvamVjdEV2ZW50MTM0NDk3OTE5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1344979190",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-16T12:17:05Z",
      "project_card": {
        "id": 4264303,
        "url": "https://api.github.com/projects/columns/cards/4264303",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Blockers"
      }
    },
    {
      "event": "mentioned",
      "id": 1350381062,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTM1MDM4MTA2Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1350381062",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-20T17:43:52Z"
    },
    {
      "event": "subscribed",
      "id": 1350381063,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDEzNTAzODEwNjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1350381063",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-11-20T17:43:52Z"
    },
    {
      "event": "reviewed",
      "id": 77865402,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Nzc4NjU0MDI=",
      "url": null,
      "actor": null,
      "commit_id": "a7d3936de8418522dbb161bfef31c234fc6c2503",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "morcos",
        "id": 4360349,
        "node_id": "MDQ6VXNlcjQzNjAzNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4360349?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/morcos",
        "html_url": "https://github.com/morcos",
        "followers_url": "https://api.github.com/users/morcos/followers",
        "following_url": "https://api.github.com/users/morcos/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/morcos/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/morcos/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
        "organizations_url": "https://api.github.com/users/morcos/orgs",
        "repos_url": "https://api.github.com/users/morcos/repos",
        "events_url": "https://api.github.com/users/morcos/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/morcos/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#pullrequestreview-77865402",
      "submitted_at": "2017-11-20T17:43:52Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
    },
    {
      "event": "referenced",
      "id": 1353679284,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEzNTM2NzkyODQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1353679284",
      "actor": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a256e6a2f1066c9872ec1e7ff9944e68e2308d9c",
      "commit_url": "https://api.github.com/repos/practicalswift/bitcoin/commits/a256e6a2f1066c9872ec1e7ff9944e68e2308d9c",
      "created_at": "2017-11-22T09:41:12Z"
    },
    {
      "event": "referenced",
      "id": 1361131559,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEzNjExMzE1NTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1361131559",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "bf72888e72dd442bbc949850909b7223ef24aa09",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/bf72888e72dd442bbc949850909b7223ef24aa09",
      "created_at": "2017-11-28T11:11:44Z"
    },
    {
      "event": "referenced",
      "id": 1361132324,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEzNjExMzIzMjQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1361132324",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d31e5c1d0f303a8cd97077d425488ed5abdf5345",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/d31e5c1d0f303a8cd97077d425488ed5abdf5345",
      "created_at": "2017-11-28T11:12:11Z"
    },
    {
      "event": "referenced",
      "id": 1361492059,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEzNjE0OTIwNTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1361492059",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "e1fae707004735ff0fd5e7dcd05de7f9a270edd1",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/e1fae707004735ff0fd5e7dcd05de7f9a270edd1",
      "created_at": "2017-11-28T14:39:09Z"
    },
    {
      "event": "referenced",
      "id": 1363182331,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEzNjMxODIzMzE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1363182331",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4b5f4f5b42c7bff0f64fe328a78c8a601ebb3fc9",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/4b5f4f5b42c7bff0f64fe328a78c8a601ebb3fc9",
      "created_at": "2017-11-29T10:07:39Z"
    },
    {
      "event": "referenced",
      "id": 1365309501,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDEzNjUzMDk1MDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1365309501",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "16fff802574159286e424802442551dc9eba9098",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/16fff802574159286e424802442551dc9eba9098",
      "created_at": "2017-11-30T10:16:13Z"
    },
    {
      "event": "commented",
      "id": 349061908,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTA2MTkwOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349061908",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-04T18:42:12Z",
      "updated_at": "2017-12-04T18:42:12Z",
      "author_association": "MEMBER",
      "body": "According to https://github.com/bitcoin/bitcoin/issues/11822#issuecomment-348903894, this may be causing a memory leak",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-349061908",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10286"
    },
    {
      "event": "referenced",
      "id": 1520548916,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE1MjA1NDg5MTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1520548916",
      "actor": {
        "login": "HashUnlimited",
        "id": 26601261,
        "node_id": "MDQ6VXNlcjI2NjAxMjYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/26601261?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/HashUnlimited",
        "html_url": "https://github.com/HashUnlimited",
        "followers_url": "https://api.github.com/users/HashUnlimited/followers",
        "following_url": "https://api.github.com/users/HashUnlimited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/HashUnlimited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/HashUnlimited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/HashUnlimited/subscriptions",
        "organizations_url": "https://api.github.com/users/HashUnlimited/orgs",
        "repos_url": "https://api.github.com/users/HashUnlimited/repos",
        "events_url": "https://api.github.com/users/HashUnlimited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/HashUnlimited/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "050cfaf11f1800ecffced2560e0b1902bb992739",
      "commit_url": "https://api.github.com/repos/chaincoin/chaincoin/commits/050cfaf11f1800ecffced2560e0b1902bb992739",
      "created_at": "2018-03-14T10:06:20Z"
    },
    {
      "event": "referenced",
      "id": 2577904019,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI1Nzc5MDQwMTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2577904019",
      "actor": {
        "login": "jkczyz",
        "id": 4015903,
        "node_id": "MDQ6VXNlcjQwMTU5MDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jkczyz",
        "html_url": "https://github.com/jkczyz",
        "followers_url": "https://api.github.com/users/jkczyz/followers",
        "following_url": "https://api.github.com/users/jkczyz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jkczyz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jkczyz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
        "organizations_url": "https://api.github.com/users/jkczyz/orgs",
        "repos_url": "https://api.github.com/users/jkczyz/repos",
        "events_url": "https://api.github.com/users/jkczyz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jkczyz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5c3f8e14bb49366ea5aded5cb5bd85acdc6bace8",
      "commit_url": "https://api.github.com/repos/jkczyz/bitcoin/commits/5c3f8e14bb49366ea5aded5cb5bd85acdc6bace8",
      "created_at": "2019-08-22T21:25:24Z"
    },
    {
      "event": "referenced",
      "id": 2758122237,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI3NTgxMjIyMzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2758122237",
      "actor": {
        "login": "jkczyz",
        "id": 4015903,
        "node_id": "MDQ6VXNlcjQwMTU5MDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jkczyz",
        "html_url": "https://github.com/jkczyz",
        "followers_url": "https://api.github.com/users/jkczyz/followers",
        "following_url": "https://api.github.com/users/jkczyz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jkczyz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jkczyz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
        "organizations_url": "https://api.github.com/users/jkczyz/orgs",
        "repos_url": "https://api.github.com/users/jkczyz/repos",
        "events_url": "https://api.github.com/users/jkczyz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jkczyz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "dc86c73cf703e565356f62e4f5f347e348d76f98",
      "commit_url": "https://api.github.com/repos/jkczyz/bitcoin/commits/dc86c73cf703e565356f62e4f5f347e348d76f98",
      "created_at": "2019-10-31T01:04:01Z"
    },
    {
      "event": "referenced",
      "id": 2758264473,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI3NTgyNjQ0NzM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2758264473",
      "actor": {
        "login": "jkczyz",
        "id": 4015903,
        "node_id": "MDQ6VXNlcjQwMTU5MDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jkczyz",
        "html_url": "https://github.com/jkczyz",
        "followers_url": "https://api.github.com/users/jkczyz/followers",
        "following_url": "https://api.github.com/users/jkczyz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jkczyz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jkczyz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
        "organizations_url": "https://api.github.com/users/jkczyz/orgs",
        "repos_url": "https://api.github.com/users/jkczyz/repos",
        "events_url": "https://api.github.com/users/jkczyz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jkczyz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a54833a54b5094bf29b4cfe77bd7febc2b392821",
      "commit_url": "https://api.github.com/repos/jkczyz/bitcoin/commits/a54833a54b5094bf29b4cfe77bd7febc2b392821",
      "created_at": "2019-10-31T02:39:37Z"
    },
    {
      "event": "referenced",
      "id": 2758512313,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI3NTg1MTIzMTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2758512313",
      "actor": {
        "login": "jkczyz",
        "id": 4015903,
        "node_id": "MDQ6VXNlcjQwMTU5MDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jkczyz",
        "html_url": "https://github.com/jkczyz",
        "followers_url": "https://api.github.com/users/jkczyz/followers",
        "following_url": "https://api.github.com/users/jkczyz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jkczyz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jkczyz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
        "organizations_url": "https://api.github.com/users/jkczyz/orgs",
        "repos_url": "https://api.github.com/users/jkczyz/repos",
        "events_url": "https://api.github.com/users/jkczyz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jkczyz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "dd2855d6a7290fa4cecfd0d3472113552dcd85c6",
      "commit_url": "https://api.github.com/repos/jkczyz/bitcoin/commits/dd2855d6a7290fa4cecfd0d3472113552dcd85c6",
      "created_at": "2019-10-31T05:36:47Z"
    },
    {
      "event": "referenced",
      "id": 2784498667,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI3ODQ0OTg2Njc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2784498667",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d7c23aa1fcdc809d1e68fbb9672d303e6fb41c56",
      "commit_url": "https://api.github.com/repos/jnewbery/bitcoin/commits/d7c23aa1fcdc809d1e68fbb9672d303e6fb41c56",
      "created_at": "2019-11-08T20:46:35Z"
    },
    {
      "event": "referenced",
      "id": 2784768350,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI3ODQ3NjgzNTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2784768350",
      "actor": {
        "login": "jkczyz",
        "id": 4015903,
        "node_id": "MDQ6VXNlcjQwMTU5MDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jkczyz",
        "html_url": "https://github.com/jkczyz",
        "followers_url": "https://api.github.com/users/jkczyz/followers",
        "following_url": "https://api.github.com/users/jkczyz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jkczyz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jkczyz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
        "organizations_url": "https://api.github.com/users/jkczyz/orgs",
        "repos_url": "https://api.github.com/users/jkczyz/repos",
        "events_url": "https://api.github.com/users/jkczyz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jkczyz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3ec3eb55b978d70e50fd7785434e879ec34a73aa",
      "commit_url": "https://api.github.com/repos/jkczyz/bitcoin/commits/3ec3eb55b978d70e50fd7785434e879ec34a73aa",
      "created_at": "2019-11-08T22:49:31Z"
    },
    {
      "event": "referenced",
      "id": 2789308714,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI3ODkzMDg3MTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2789308714",
      "actor": {
        "login": "jkczyz",
        "id": 4015903,
        "node_id": "MDQ6VXNlcjQwMTU5MDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jkczyz",
        "html_url": "https://github.com/jkczyz",
        "followers_url": "https://api.github.com/users/jkczyz/followers",
        "following_url": "https://api.github.com/users/jkczyz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jkczyz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jkczyz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
        "organizations_url": "https://api.github.com/users/jkczyz/orgs",
        "repos_url": "https://api.github.com/users/jkczyz/repos",
        "events_url": "https://api.github.com/users/jkczyz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jkczyz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "f7a527e19fe62d47a4f09054d722aa012a313ebd",
      "commit_url": "https://api.github.com/repos/jkczyz/bitcoin/commits/f7a527e19fe62d47a4f09054d722aa012a313ebd",
      "created_at": "2019-11-11T21:04:09Z"
    },
    {
      "event": "referenced",
      "id": 2789348334,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI3ODkzNDgzMzQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2789348334",
      "actor": {
        "login": "jkczyz",
        "id": 4015903,
        "node_id": "MDQ6VXNlcjQwMTU5MDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jkczyz",
        "html_url": "https://github.com/jkczyz",
        "followers_url": "https://api.github.com/users/jkczyz/followers",
        "following_url": "https://api.github.com/users/jkczyz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jkczyz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jkczyz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
        "organizations_url": "https://api.github.com/users/jkczyz/orgs",
        "repos_url": "https://api.github.com/users/jkczyz/repos",
        "events_url": "https://api.github.com/users/jkczyz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jkczyz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9dd5013542914d348bd1b0c00b72637f2c8fa943",
      "commit_url": "https://api.github.com/repos/jkczyz/bitcoin/commits/9dd5013542914d348bd1b0c00b72637f2c8fa943",
      "created_at": "2019-11-11T21:18:59Z"
    },
    {
      "event": "referenced",
      "id": 2958583105,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI5NTg1ODMxMDU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2958583105",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a5c3d3331b4cc9048b2d435c8d008a05f7438b95",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/a5c3d3331b4cc9048b2d435c8d008a05f7438b95",
      "created_at": "2020-01-17T15:40:45Z"
    },
    {
      "event": "referenced",
      "id": 2970426391,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI5NzA0MjYzOTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2970426391",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "05bc8343a731b4c105421e1d672b6ccab70de4dc",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/05bc8343a731b4c105421e1d672b6ccab70de4dc",
      "created_at": "2020-01-22T15:12:43Z"
    },
    {
      "event": "referenced",
      "id": 2970478980,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI5NzA0Nzg5ODA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2970478980",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "e4996fc9416d72f74b818d00082a69d3ace2e5c9",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/e4996fc9416d72f74b818d00082a69d3ace2e5c9",
      "created_at": "2020-01-22T15:25:28Z"
    },
    {
      "event": "referenced",
      "id": 2990776095,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI5OTA3NzYwOTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2990776095",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0211cbff800c350a28c689e48de44706550fd1a8",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/0211cbff800c350a28c689e48de44706550fd1a8",
      "created_at": "2020-01-29T19:23:23Z"
    },
    {
      "event": "referenced",
      "id": 2991317598,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI5OTEzMTc1OTg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2991317598",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "696cd2869c505d5f42b61d9593322bef3d62bada",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/696cd2869c505d5f42b61d9593322bef3d62bada",
      "created_at": "2020-01-29T22:23:35Z"
    },
    {
      "event": "referenced",
      "id": 2991335281,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI5OTEzMzUyODE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2991335281",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5091ab5bcc671c6802f6450ff1ab60d21221f20c",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/5091ab5bcc671c6802f6450ff1ab60d21221f20c",
      "created_at": "2020-01-29T22:29:54Z"
    },
    {
      "event": "referenced",
      "id": 3033195973,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMwMzMxOTU5NzM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3033195973",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "61758874b851fa887a66e569d07207a2858fdac2",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/61758874b851fa887a66e569d07207a2858fdac2",
      "created_at": "2020-02-13T02:29:59Z"
    },
    {
      "event": "referenced",
      "id": 3035797751,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMwMzU3OTc3NTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3035797751",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "76ed385c034e5593916a16c442fb0161deaabeaf",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/76ed385c034e5593916a16c442fb0161deaabeaf",
      "created_at": "2020-02-13T17:19:58Z"
    },
    {
      "event": "referenced",
      "id": 3084917723,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMwODQ5MTc3MjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3084917723",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3eb80fdcd539357baa6bb1e1a98602f06aee7d94",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/3eb80fdcd539357baa6bb1e1a98602f06aee7d94",
      "created_at": "2020-02-29T17:51:48Z"
    },
    {
      "event": "referenced",
      "id": 3084925857,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDMwODQ5MjU4NTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3084925857",
      "actor": {
        "login": "PastaPastaPasta",
        "id": 6443210,
        "node_id": "MDQ6VXNlcjY0NDMyMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6443210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PastaPastaPasta",
        "html_url": "https://github.com/PastaPastaPasta",
        "followers_url": "https://api.github.com/users/PastaPastaPasta/followers",
        "following_url": "https://api.github.com/users/PastaPastaPasta/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PastaPastaPasta/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PastaPastaPasta/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PastaPastaPasta/subscriptions",
        "organizations_url": "https://api.github.com/users/PastaPastaPasta/orgs",
        "repos_url": "https://api.github.com/users/PastaPastaPasta/repos",
        "events_url": "https://api.github.com/users/PastaPastaPasta/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PastaPastaPasta/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "803530c83d41768615812c932be444f5a0dd9201",
      "commit_url": "https://api.github.com/repos/PastaPastaPasta/dash/commits/803530c83d41768615812c932be444f5a0dd9201",
      "created_at": "2020-02-29T18:00:48Z"
    },
    {
      "event": "referenced",
      "id": 3997099312,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM5OTcwOTkzMTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3997099312",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "7d688a3152a5bf1566bb5c0c97092f3d02606bc3",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/7d688a3152a5bf1566bb5c0c97092f3d02606bc3",
      "created_at": "2020-11-15T05:15:06Z"
    },
    {
      "event": "referenced",
      "id": 4127108258,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQxMjcxMDgyNTg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4127108258",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "59876a4873b57888f7c8e80775fc8057e1b308a6",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/59876a4873b57888f7c8e80775fc8057e1b308a6",
      "created_at": "2020-12-17T21:27:18Z"
    },
    {
      "event": "referenced",
      "id": 4127156065,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQxMjcxNTYwNjU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4127156065",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a60a7ee8e19903ee73680a84f621dd6ef991451a",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/a60a7ee8e19903ee73680a84f621dd6ef991451a",
      "created_at": "2020-12-17T21:40:21Z"
    },
    {
      "event": "referenced",
      "id": 4127168536,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQxMjcxNjg1MzY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4127168536",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4188f0475fe61ebbf11ee591c6d06b7dfffeb06f",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/4188f0475fe61ebbf11ee591c6d06b7dfffeb06f",
      "created_at": "2020-12-17T21:43:49Z"
    },
    {
      "event": "referenced",
      "id": 4298398400,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQyOTgzOTg0MDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4298398400",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "73431436952f55e4c22899077cafb47a42fe196b",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/73431436952f55e4c22899077cafb47a42fe196b",
      "created_at": "2021-02-05T23:29:20Z"
    },
    {
      "event": "referenced",
      "id": 4298402468,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQyOTg0MDI0Njg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4298402468",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "218747678d48bb046ea44159e453b20640045b42",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/218747678d48bb046ea44159e453b20640045b42",
      "created_at": "2021-02-05T23:31:30Z"
    },
    {
      "event": "referenced",
      "id": 4316677145,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQzMTY2NzcxNDU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4316677145",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "e7e9d4375a34f933b0c47b3873098a2be9c09dd3",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/e7e9d4375a34f933b0c47b3873098a2be9c09dd3",
      "created_at": "2021-02-10T19:53:03Z"
    },
    {
      "event": "referenced",
      "id": 4328852652,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQzMjg4NTI2NTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4328852652",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9e523a7b3e022efebe27565cd61f72267fa0ec79",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/9e523a7b3e022efebe27565cd61f72267fa0ec79",
      "created_at": "2021-02-14T15:58:06Z"
    },
    {
      "event": "referenced",
      "id": 4381641971,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQzODE2NDE5NzE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4381641971",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "307d7b1e5c0e341e723a17b46aea73cca586ef6c",
      "commit_url": "https://api.github.com/repos/PIVX-Project/PIVX/commits/307d7b1e5c0e341e723a17b46aea73cca586ef6c",
      "created_at": "2021-02-26T12:36:37Z"
    },
    {
      "event": "referenced",
      "id": 4406095472,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0MDYwOTU0NzI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4406095472",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "cfc69ede918319c3d116c9006208eb52fd30a771",
      "commit_url": "https://api.github.com/repos/LarryRuane/zcash/commits/cfc69ede918319c3d116c9006208eb52fd30a771",
      "created_at": "2021-03-04T07:02:50Z"
    },
    {
      "event": "referenced",
      "id": 4406095477,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ0MDYwOTU0Nzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4406095477",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "e180aa5b04bb94b2cb048f59134495d53ba253ae",
      "commit_url": "https://api.github.com/repos/LarryRuane/zcash/commits/e180aa5b04bb94b2cb048f59134495d53ba253ae",
      "created_at": "2021-03-04T07:02:50Z"
    },
    {
      "event": "referenced",
      "id": 4517981810,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1MTc5ODE4MTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4517981810",
      "actor": {
        "login": "ckti",
        "id": 7046769,
        "node_id": "MDQ6VXNlcjcwNDY3Njk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7046769?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ckti",
        "html_url": "https://github.com/ckti",
        "followers_url": "https://api.github.com/users/ckti/followers",
        "following_url": "https://api.github.com/users/ckti/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ckti/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ckti/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ckti/subscriptions",
        "organizations_url": "https://api.github.com/users/ckti/orgs",
        "repos_url": "https://api.github.com/users/ckti/repos",
        "events_url": "https://api.github.com/users/ckti/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ckti/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8ac6f5c0b4bca6275f42497a7083c96d390aad7b",
      "commit_url": "https://api.github.com/repos/ckti-ioncore-current/ion/commits/8ac6f5c0b4bca6275f42497a7083c96d390aad7b",
      "created_at": "2021-03-28T10:03:05Z"
    },
    {
      "event": "referenced",
      "id": 4517981997,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1MTc5ODE5OTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4517981997",
      "actor": {
        "login": "ckti",
        "id": 7046769,
        "node_id": "MDQ6VXNlcjcwNDY3Njk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7046769?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ckti",
        "html_url": "https://github.com/ckti",
        "followers_url": "https://api.github.com/users/ckti/followers",
        "following_url": "https://api.github.com/users/ckti/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ckti/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ckti/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ckti/subscriptions",
        "organizations_url": "https://api.github.com/users/ckti/orgs",
        "repos_url": "https://api.github.com/users/ckti/repos",
        "events_url": "https://api.github.com/users/ckti/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ckti/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "38a9ad2b41b1a0617c3d3f7c4d84fb5ed3cb626a",
      "commit_url": "https://api.github.com/repos/ckti-ioncore-current/ion/commits/38a9ad2b41b1a0617c3d3f7c4d84fb5ed3cb626a",
      "created_at": "2021-03-28T10:03:11Z"
    },
    {
      "event": "referenced",
      "id": 4585244709,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1ODUyNDQ3MDk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4585244709",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "756a33ace404a9f2967d0049c0e0a93be38cddb8",
      "commit_url": "https://api.github.com/repos/LarryRuane/zcash/commits/756a33ace404a9f2967d0049c0e0a93be38cddb8",
      "created_at": "2021-04-13T01:04:26Z"
    },
    {
      "event": "referenced",
      "id": 4585244710,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ1ODUyNDQ3MTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4585244710",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3145dce2d80c5e85250bfda7972f4d4c1d8c34e4",
      "commit_url": "https://api.github.com/repos/LarryRuane/zcash/commits/3145dce2d80c5e85250bfda7972f4d4c1d8c34e4",
      "created_at": "2021-04-13T01:04:26Z"
    },
    {
      "event": "referenced",
      "id": 4607503980,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ2MDc1MDM5ODA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4607503980",
      "actor": {
        "login": "zkbot",
        "id": 17032253,
        "node_id": "MDQ6VXNlcjE3MDMyMjUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/17032253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zkbot",
        "html_url": "https://github.com/zkbot",
        "followers_url": "https://api.github.com/users/zkbot/followers",
        "following_url": "https://api.github.com/users/zkbot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/zkbot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/zkbot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/zkbot/subscriptions",
        "organizations_url": "https://api.github.com/users/zkbot/orgs",
        "repos_url": "https://api.github.com/users/zkbot/repos",
        "events_url": "https://api.github.com/users/zkbot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/zkbot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0e36226271973ea959dc3a7bd8fc93ea472b2cb4",
      "commit_url": "https://api.github.com/repos/zcash/zcash/commits/0e36226271973ea959dc3a7bd8fc93ea472b2cb4",
      "created_at": "2021-04-17T03:52:31Z"
    },
    {
      "event": "referenced",
      "id": 4962428129,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ5NjI0MjgxMjk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4962428129",
      "actor": {
        "login": "gades",
        "id": 4200730,
        "node_id": "MDQ6VXNlcjQyMDA3MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4200730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gades",
        "html_url": "https://github.com/gades",
        "followers_url": "https://api.github.com/users/gades/followers",
        "following_url": "https://api.github.com/users/gades/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gades/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gades/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gades/subscriptions",
        "organizations_url": "https://api.github.com/users/gades/orgs",
        "repos_url": "https://api.github.com/users/gades/repos",
        "events_url": "https://api.github.com/users/gades/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gades/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "1459aa5a7210400bb68ae8e58750709bca70c596",
      "commit_url": "https://api.github.com/repos/cosanta/cosanta-core/commits/1459aa5a7210400bb68ae8e58750709bca70c596",
      "created_at": "2021-06-30T22:39:49Z"
    },
    {
      "event": "referenced",
      "id": 6057245971,
      "node_id": "REFE_lADOABII584NY7w4zwAAAAFpCj0T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6057245971",
      "actor": {
        "login": "gades",
        "id": 4200730,
        "node_id": "MDQ6VXNlcjQyMDA3MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4200730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gades",
        "html_url": "https://github.com/gades",
        "followers_url": "https://api.github.com/users/gades/followers",
        "following_url": "https://api.github.com/users/gades/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gades/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gades/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gades/subscriptions",
        "organizations_url": "https://api.github.com/users/gades/orgs",
        "repos_url": "https://api.github.com/users/gades/repos",
        "events_url": "https://api.github.com/users/gades/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gades/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "c9cbceecddbd11fd4bc150fc6ecf25dabb162761",
      "commit_url": "https://api.github.com/repos/cosanta/cosanta-core/commits/c9cbceecddbd11fd4bc150fc6ecf25dabb162761",
      "created_at": "2022-02-12T15:40:34Z"
    },
    {
      "event": "referenced",
      "id": 6072761392,
      "node_id": "REFE_lADOABII584NY7w4zwAAAAFp9vww",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6072761392",
      "actor": {
        "login": "gades",
        "id": 4200730,
        "node_id": "MDQ6VXNlcjQyMDA3MzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4200730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gades",
        "html_url": "https://github.com/gades",
        "followers_url": "https://api.github.com/users/gades/followers",
        "following_url": "https://api.github.com/users/gades/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gades/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gades/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gades/subscriptions",
        "organizations_url": "https://api.github.com/users/gades/orgs",
        "repos_url": "https://api.github.com/users/gades/repos",
        "events_url": "https://api.github.com/users/gades/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gades/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b80463372fc0480a5b4979eec33d81c7d8738096",
      "commit_url": "https://api.github.com/repos/cosanta/cosanta-core/commits/b80463372fc0480a5b4979eec33d81c7d8738096",
      "created_at": "2022-02-15T08:00:47Z"
    },
    {
      "event": "locked",
      "id": 6073982408,
      "node_id": "LOE_lADOABII584NY7w4zwAAAAFqCZ3I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6073982408",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T10:59:31Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114424119",
      "pull_request_review_id": 35889308,
      "id": 114424119,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDQyNDExOQ==",
      "diff_hunk": "@@ -511,6 +511,9 @@ class CTxMemPool\n     // to track size/count of descendant transactions.  First version of\n     // addUnchecked can be used to have it call CalculateMemPoolAncestors(), and\n     // then invoke the second version.\n+    // Note that addUnchecked is ONLY called from ATMP during normal operation,\n+    // and any other callers may break wallet's in-mempool tracking (due to\n+    // lack of CValidationInterface::TransactionAddedToMempool callbacks).",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 6,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "1b6b0c9911a7429c001f74d1b58645f0716988fb",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add a CValidationInterface::TransactionRemovedFromMempool\"\r\n\r\nWhat does this imply? Just that if there are any new calls to `addUnchecked`, the caller also needs to signal `TransactionAddedToMempool` not to break the wallet? Would say this in the comment explicitly if this is the case.",
      "created_at": "2017-05-02T21:01:49Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114424119",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114424119"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 518,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114424864",
      "pull_request_review_id": 35889308,
      "id": 114424864,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDQyNDg2NA==",
      "diff_hunk": "@@ -511,6 +511,9 @@ class CTxMemPool\n     // to track size/count of descendant transactions.  First version of\n     // addUnchecked can be used to have it call CalculateMemPoolAncestors(), and\n     // then invoke the second version.\n+    // Note that addUnchecked is ONLY called from ATMP during normal operation,",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 4,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "1b6b0c9911a7429c001f74d1b58645f0716988fb",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add a CValidationInterface::TransactionRemovedFromMempool\"\r\n\r\nUnclear to me what a normal operation is. Comment might be clearer mentioning a not normal counterexample.",
      "created_at": "2017-05-02T21:05:07Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114424864",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114424864"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 514,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114427322",
      "pull_request_review_id": 35889308,
      "id": 114427322,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDQyNzMyMg==",
      "diff_hunk": "@@ -1150,6 +1156,50 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    const CBlockIndex* initialChainTip;\n+    {\n+        LOCK(cs_main);\n+        initialChainTip = chainActive.Tip();\n+    }\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);\n+    std::unique_lock<std::mutex> lock(lastBlockProcessedMutex);\n+\n+    assert(lastBlockProcessed);\n+\n+    auto pred = [this, initialChainTip] {\n+            if (this->lastBlockProcessed == initialChainTip) {\n+                return true;\n+            }\n+            if (this->lastBlockProcessed->GetAncestor(initialChainTip->nHeight) == initialChainTip) {\n+                return true;\n+            }\n+            // Catch the race condition where the wallet may have caught up and\n+            // moved past initialChainTip through a reorg before we could get\n+            // lastBlockProcessedMutex.\n+            // This should be exceedingly rare in regular usage, so potentially\n+            // eating 100ms to retry this lock should be fine (not TRY_LOCKing\n+            // here would be a lock inversion against lastBlockProcessedMutex)\n+            TRY_LOCK(cs_main, mainLocked);\n+            if (mainLocked) {\n+                if (this->lastBlockProcessed == chainActive.Tip()) {\n+                    return true;\n+                }\n+                // If the user called invalidatechain some things might block",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 47,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "f651d58a3b841ff7d8e4917881da6f6a8f8ec42f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add CWallet::BlockUntilSyncedToCurrentChain()\"\r\n\r\nDoes \"some things might block forever\" just mean this wait might block forever? If so, maybe be more concrete and say something like \"lastBlockProcessed will not be rewound back to chainActive.Tip().\" Otherwise it would be good to clarify what some things is referring to.",
      "created_at": "2017-05-02T21:16:09Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114427322",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114427322"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114427544",
      "pull_request_review_id": 35889308,
      "id": 114427544,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDQyNzU0NA==",
      "diff_hunk": "@@ -1108,6 +1117,14 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n        If possibleOldChain is provided, the parameters from the old chain (version)\n        will be preserved. */\n     bool SetHDMasterKey(const CPubKey& key, CHDChain *possibleOldChain = nullptr);\n+\n+    /**\n+     * Blocks until the wallet state is up-to-date to /at least/ the current\n+     * chain at the time this function is entered\n+     * Obviously holding cs_main/cs_wallet when going into this call may cause\n+\t * deadlock",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 32,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "f651d58a3b841ff7d8e4917881da6f6a8f8ec42f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add CWallet::BlockUntilSyncedToCurrentChain()\"\r\n\r\nStray tab here",
      "created_at": "2017-05-02T21:17:11Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114427544",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114427544"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1125,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114430207",
      "pull_request_review_id": 35889308,
      "id": 114430207,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDQzMDIwNw==",
      "diff_hunk": "@@ -2648,6 +2712,10 @@ UniValue fundrawtransaction(const JSONRPCRequest& request)\n \n     RPCTypeCheck(request.params, boost::assign::list_of(UniValue::VSTR));\n \n+    // Make sure the results are valid at least up to the most recent block",
      "path": "src/wallet/rpcwallet.cpp",
      "position": null,
      "original_position": 180,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ec4df8c633f0297eaa6f74304ad058bb5413a2ee",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add calls to CWallet::BlockUntilSyncedToCurrentChain() in RPCs\"\r\n\r\nCan you give an example of specific bug that could occur without these BlockUntilSynced calls and is prevented by adding them? I looked at some of the old issues (#9584, #9148, etc), but they're confusing and I don't know how much of the information is up to date.\r\n\r\nIt would be great if `BlockUntilSyncedToCurrentChain` had a comment that made it clearer when it does and doesn't need to be called, and what consistency issues it is and isn't supposed to solve.\r\n\r\nMaybe there should also be a bullet point in the new [RPC interface guidelines](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#rpc-interface-guidelines) about what kind of consistency wallet RPCs are expected to have.",
      "created_at": "2017-05-02T21:30:07Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114430207",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114430207"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3005,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114434508",
      "pull_request_review_id": 35889308,
      "id": 114434508,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDQzNDUwOA==",
      "diff_hunk": "@@ -56,17 +56,25 @@ def run_test(self):\n         self.log.info(\"listen...\")\n         msg = self.zmqSubSocket.recv_multipart()\n         topic = msg[0]\n-        assert_equal(topic, b\"hashtx\")\n         body = msg[1]\n         msgSequence = struct.unpack('<I', msg[-1])[-1]\n-        assert_equal(msgSequence, 0) #must be sequence 0 on hashtx\n+        assert_equal(msgSequence, 0) #must be sequence 0 on hashtx/block\n+\n+        if topic == b\"hashblock\":\n+            blkhash = bytes_to_hex_str(body)\n+        else:\n+            assert_equal(topic, b\"hashtx\")\n \n         msg = self.zmqSubSocket.recv_multipart()\n         topic = msg[0]",
      "path": "test/functional/zmq_test.py",
      "position": null,
      "original_position": 16,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "6fb571977d9cc41793a594688e5071dd5bbd864d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Fix zmq tests now that txn/blocks are unordered\"\r\n\r\nMaybe assert `msg[0] != topic` above this line to confirm actually receive distinct `hashtx` and `hashblock` messages (not two hashblocks).",
      "created_at": "2017-05-02T21:52:37Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114434508",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114434508"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 83,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114630924",
      "pull_request_review_id": 36113880,
      "id": 114630924,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDYzMDkyNA==",
      "diff_hunk": "@@ -511,6 +511,9 @@ class CTxMemPool\n     // to track size/count of descendant transactions.  First version of\n     // addUnchecked can be used to have it call CalculateMemPoolAncestors(), and\n     // then invoke the second version.\n+    // Note that addUnchecked is ONLY called from ATMP during normal operation,\n+    // and any other callers may break wallet's in-mempool tracking (due to\n+    // lack of CValidationInterface::TransactionAddedToMempool callbacks).",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 6,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "1b6b0c9911a7429c001f74d1b58645f0716988fb",
      "in_reply_to_id": 114424119,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Updated the comment to mention that addUnchecked is only called from ATMP outside of tests period. I think the implication is that we need to fix the strong-coupling here.",
      "created_at": "2017-05-03T19:20:18Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114630924",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114630924"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 518,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114632911",
      "pull_request_review_id": 36116036,
      "id": 114632911,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDYzMjkxMQ==",
      "diff_hunk": "@@ -12,6 +12,7 @@\n #include \"rpc/server.h\"",
      "path": "src/qt/test/rpcnestedtests.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "a14fa884f7ef82b9b1fc8b8d85a211ec2f8ea59e",
      "in_reply_to_id": null,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "These changes do not appear to be related to the rest. Am I missing something or should this be in its own PR?\r\nI believe @sipa made a similar comment on #10179 ",
      "created_at": "2017-05-03T19:30:28Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114632911",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114632911"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114633497",
      "pull_request_review_id": 36116036,
      "id": 114633497,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDYzMzQ5Nw==",
      "diff_hunk": "@@ -5,48 +5,107 @@\n \n #include \"validationinterface.h\"\n \n+#include <boost/signals2/signal.hpp>\n+\n+struct CMainSignalsInstance {\n+    boost::signals2::signal<void (const CBlockIndex *, const CBlockIndex *, bool fInitialDownload)> UpdatedBlockTip;\n+    boost::signals2::signal<void (const CTransactionRef &)> TransactionAddedToMempool;\n+    boost::signals2::signal<void (const std::shared_ptr<const CBlock> &, const CBlockIndex *pindex, const std::vector<CTransactionRef>&)> BlockConnected;\n+    boost::signals2::signal<void (const std::shared_ptr<const CBlock> &)> BlockDisconnected;\n+    boost::signals2::signal<void (const CBlockLocator &)> SetBestChain;\n+    boost::signals2::signal<void (const uint256 &)> Inventory;\n+    boost::signals2::signal<void (int64_t nBestBlockTime, CConnman* connman)> Broadcast;\n+    boost::signals2::signal<void (const CBlock&, const CValidationState&)> BlockChecked;\n+    boost::signals2::signal<void (std::shared_ptr<CReserveScript>&)> ScriptForMining;\n+    boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n+};\n+\n static CMainSignals g_signals;\n \n+CMainSignals::CMainSignals() {",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "f481ce1109d5b51ea55187a497bbca7b0fe8a856",
      "in_reply_to_id": null,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This would be safer/faster/cleaner with ` : internals(new CMainSignalsInstance()) {}` instead of the body.\r\n\r\nInitializer lists guarantee proper cross-thread visibility, otherwise you might init twice and have sharing issues.",
      "created_at": "2017-05-03T19:33:26Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114633497",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114633497"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114639639",
      "pull_request_review_id": 36116036,
      "id": 114639639,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDYzOTYzOQ==",
      "diff_hunk": "@@ -43,6 +43,9 @@ class CScheduler\n     // Call func at/after time t\n     void schedule(Function f, boost::chrono::system_clock::time_point t);",
      "path": "src/scheduler.h",
      "position": null,
      "original_position": 2,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "d923d41826c7b00934284cdb04e3263ca236d99f",
      "in_reply_to_id": null,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You can accomplish this entire commit by changing this line to \r\n`    void schedule(Function f, boost::chrono::system_clock::time_point t = boost::chrono::system_clock::now());`",
      "created_at": "2017-05-03T20:03:44Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114639639",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114639639"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114641508",
      "pull_request_review_id": 36116036,
      "id": 114641508,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY0MTUwOA==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": null,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This comment and issue can  be avoided entirely if you move line 56 up to 46.\r\nAfter that lines 54 and 55 (which will be 55 and 56) can be removed.",
      "created_at": "2017-05-03T20:13:05Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114641508",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114641508"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114644451",
      "pull_request_review_id": 36116036,
      "id": 114644451,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY0NDQ1MQ==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we\n+            // accidentally have two ProcessQueue's scheduled at once its\n+            // not a big deal.\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+        }\n+        scheduler->schedule(std::bind(&CMainSignalsInstance::ProcessQueue, this));\n+    }\n+\n+    void ProcessQueue() {\n+        std::function<void (void)> callback;\n+        {\n+            LOCK(cs_callbacksPending);\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+            fCallbacksRunning = true;\n+\n+            callback = callbacksPending.front();\n+            callbacksPending.pop_front();\n+        }\n+\n+        // RAII the setting of fCallbacksRunning and calling MaybeScheduleProcessQueue",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 48,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": null,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "RAII is great and all but exists for the acquisition of resources. Why not try{} catch{}?\r\n`        try {\r\n        \tcallback();\r\n        } catch(...) {\r\n\t\t\t{\r\n\t\t\t\tLOCK(cs_callbacksPending);\r\n\t\t\t\tfCallbacksRunning = false;\r\n\t\t\t}\r\n\t\t\tMaybeScheduleProcessQueue();\r\n        }`",
      "created_at": "2017-05-03T20:26:32Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114644451",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114644451"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 62,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114646664",
      "pull_request_review_id": 36116036,
      "id": 114646664,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY0NjY2NA==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we\n+            // accidentally have two ProcessQueue's scheduled at once its\n+            // not a big deal.\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+        }\n+        scheduler->schedule(std::bind(&CMainSignalsInstance::ProcessQueue, this));\n+    }\n+\n+    void ProcessQueue() {\n+        std::function<void (void)> callback;\n+        {\n+            LOCK(cs_callbacksPending);\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+            fCallbacksRunning = true;\n+\n+            callback = callbacksPending.front();\n+            callbacksPending.pop_front();\n+        }\n+\n+        // RAII the setting of fCallbacksRunning and calling MaybeScheduleProcessQueue\n+        // to ensure both happen safely even if callback() throws.\n+        struct RAIICallbacksRunning {\n+            CMainSignalsInstance* instance;\n+            RAIICallbacksRunning(CMainSignalsInstance* _instance) : instance(_instance) {}\n+            ~RAIICallbacksRunning() {\n+                {\n+                    LOCK(instance->cs_callbacksPending);\n+                    instance->fCallbacksRunning = false;\n+                }\n+                instance->MaybeScheduleProcessQueue();",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 58,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": null,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is this really what we want? A scheduler call for each callback?\r\nIt does prevent starving any other scheduled tasks in case of a long queue, but it also generates a lot of lock contention which can be a performance killer.\r\n\r\nUnless there is evidence of this queue processing messing with other scheduling I feel strongly we should avoid this design. It will be much harder to detect performance issues from lock contention than performance issues from the processing of a long queue.\r\n\r\nI recommend replacing line 45 with a size() query, -- the size (to account for your pop), and put the entire thing in a do {} while (size > 0);. You can then avoid calling `MaybeScheduleProcessQueue()` inside of `ProcessQueue()` itself. ",
      "created_at": "2017-05-03T20:35:42Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114646664",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114646664"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114647690",
      "pull_request_review_id": 36116036,
      "id": 114647690,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY0NzY5MA==",
      "diff_hunk": "@@ -82,4 +84,26 @@ class CScheduler\n     bool shouldStop() { return stopRequested || (stopWhenEmpty && taskQueue.empty()); }\n };\n \n+/**\n+ * Class used by CScheduler clients which may schedule multiple jobs\n+ * which are required to be run serially. Does not require such jobs\n+ * to be executed on the same thread, but no two jobs will be executed\n+ * at the same time.\n+ */\n+class CSingleThreadedSchedulerClient {",
      "path": "src/scheduler.h",
      "position": null,
      "original_position": 19,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "0703075a7153912ee089f6f2e0c1dfc3b41e76fe",
      "in_reply_to_id": null,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is no longer a scheduler. It has one public method, `void AddToProcessQueue(std::function<void (void)> func);`, which does not take any 'schedule' information.\r\n\r\nThis class is neat, more of a SingleThreadedExecutor that happens to use a scheduler to execute. Really its treating the scheduler as a thread pool. \r\n\r\nI'm all for keeping this if it's not named 'scheduler' and if a thread pool abstraction can be extracted from CScheduler then both this class and CScheduler can use that pool for execution. Also to consider, is this used anywhere else yet or is it expected to be used?",
      "created_at": "2017-05-03T20:40:07Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114647690",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114647690"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 90,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114649332",
      "pull_request_review_id": 36116036,
      "id": 114649332,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY0OTMzMg==",
      "diff_hunk": "@@ -1104,6 +1113,14 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n        caller must ensure the current wallet version is correct before calling\n        this function). */\n     bool SetHDMasterKey(const CPubKey& key);\n+\n+    /**\n+     * Blocks until the wallet state is up-to-date to /at least/ the current\n+     * chain at the time this function is entered\n+     * Obviously holding cs_main/cs_wallet when going into this call may cause",
      "path": "src/wallet/wallet.h",
      "position": 70,
      "original_position": 31,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "bc3f415e09f13bb275c2d1a79b40d10f395c10c5",
      "in_reply_to_id": null,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Odd comment, \"Obviously... may...\" is concerning enough that we should have a comment explaining how to avoid a deadlock rather than this vagueness or perhaps removing the statement altogether?",
      "created_at": "2017-05-03T20:46:55Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114649332",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114649332"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1129,
      "original_line": 1129,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114651162",
      "pull_request_review_id": 36116036,
      "id": 114651162,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY1MTE2Mg==",
      "diff_hunk": "@@ -1147,6 +1153,50 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {",
      "path": "src/wallet/wallet.cpp",
      "position": 47,
      "original_position": 17,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "bc3f415e09f13bb275c2d1a79b40d10f395c10c5",
      "in_reply_to_id": null,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This method is concerning. It may be that it is being used in a safe manner but the method itself is quite dangerous. Preliminary observation suggests this can be called from both the command line RPC and JSON RPC at the same time but I don't know how true this is. \r\n\r\nCalling it from two different threads appears to be not okay, so it is \"Not thread safe\" and should likely be labeled as such (though I don't see this as a standard in the project codebase so maybe that's going a bit far). ",
      "created_at": "2017-05-03T20:55:13Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114651162",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114651162"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1265,
      "original_line": 1265,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114654883",
      "pull_request_review_id": 36116036,
      "id": 114654883,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY1NDg4Mw==",
      "diff_hunk": "@@ -1147,6 +1153,50 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    const CBlockIndex* initialChainTip;\n+    {\n+        LOCK(cs_main);\n+        initialChainTip = chainActive.Tip();\n+    }\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "bc3f415e09f13bb275c2d1a79b40d10f395c10c5",
      "in_reply_to_id": null,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If these assertions need to be held for this method to execute correctly then the method cannot be thread safe as itself being called twice, in two threads, is enough to cause a failure.",
      "created_at": "2017-05-03T21:11:39Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114654883",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114654883"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1267,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114657449",
      "pull_request_review_id": 36116036,
      "id": 114657449,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY1NzQ0OQ==",
      "diff_hunk": "@@ -104,7 +104,9 @@ void UnregisterAllValidationInterfaces() {\n \n void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {\n     if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        internals->TransactionRemovedFromMempool(ptx);\n+        internals->schedulerClient.AddToProcessQueue([ptx, this] {",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "b9acf32eb65c2a70382c36bd8b218d8ac513e2c2",
      "in_reply_to_id": null,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is a fine solution. All these lock inversion concerns make me wonder if there isn't a more serious issue regarding lack of proper encapsulation with some of these locks. I'm sure global locks (cs_main) don't help either, can't imagine actually needing a global lock. ",
      "created_at": "2017-05-03T21:24:18Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114657449",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114657449"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114685849",
      "pull_request_review_id": 36173185,
      "id": 114685849,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4NTg0OQ==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114641508,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> This comment and issue can be avoided entirely if you move line 56 up to 46.\r\n> After that lines 54 and 55 (which will be 55 and 56) can be removed.\r\n\r\nI think this is right (line numbers apply to commit 8daf2439796dfdee41c1a32787e0ec9726daf6be). It also seems like you could eliminate the fCallbacksRunning variable if you change ProcessQueue to call pop_front after running the callback and condition the AddToProcessQueue schedule() call on the queue being previously empty.",
      "created_at": "2017-05-04T01:04:28Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114685849",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114685849"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114686501",
      "pull_request_review_id": 36173185,
      "id": 114686501,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4NjUwMQ==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we\n+            // accidentally have two ProcessQueue's scheduled at once its\n+            // not a big deal.\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+        }\n+        scheduler->schedule(std::bind(&CMainSignalsInstance::ProcessQueue, this));\n+    }\n+\n+    void ProcessQueue() {\n+        std::function<void (void)> callback;\n+        {\n+            LOCK(cs_callbacksPending);\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+            fCallbacksRunning = true;\n+\n+            callback = callbacksPending.front();\n+            callbacksPending.pop_front();\n+        }\n+\n+        // RAII the setting of fCallbacksRunning and calling MaybeScheduleProcessQueue",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 48,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114644451,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Why not try{} catch{}?\r\n\r\nMy guess about this was that it allows the processqueue to take advantage of whatever error handling or reporting cscheduler provides, and to not have to repeat the finalization logic both inside and after the catch clause. Either approach seems fine to me, though.",
      "created_at": "2017-05-04T01:13:41Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114686501",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114686501"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 62,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114686861",
      "pull_request_review_id": 36174235,
      "id": 114686861,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4Njg2MQ==",
      "diff_hunk": "@@ -12,6 +12,7 @@\n #include \"rpc/server.h\"",
      "path": "src/qt/test/rpcnestedtests.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "a14fa884f7ef82b9b1fc8b8d85a211ec2f8ea59e",
      "in_reply_to_id": 114632911,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Without them test_bitcoin-qt segfaults.",
      "created_at": "2017-05-04T01:18:25Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114686861",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114686861"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114686925",
      "pull_request_review_id": 36174305,
      "id": 114686925,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4NjkyNQ==",
      "diff_hunk": "@@ -104,7 +104,9 @@ void UnregisterAllValidationInterfaces() {\n \n void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {\n     if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        internals->TransactionRemovedFromMempool(ptx);\n+        internals->schedulerClient.AddToProcessQueue([ptx, this] {",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "b9acf32eb65c2a70382c36bd8b218d8ac513e2c2",
      "in_reply_to_id": 114657449,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is being run in a background thread, so there are no possible lock inversions? We've had great success with DEBUG_LOCKORDER and havent had any serious deadlock issues afair since the 0.3.X era.",
      "created_at": "2017-05-04T01:19:21Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114686925",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114686925"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114686965",
      "pull_request_review_id": 36173185,
      "id": 114686965,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4Njk2NQ==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we\n+            // accidentally have two ProcessQueue's scheduled at once its\n+            // not a big deal.\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+        }\n+        scheduler->schedule(std::bind(&CMainSignalsInstance::ProcessQueue, this));\n+    }\n+\n+    void ProcessQueue() {\n+        std::function<void (void)> callback;\n+        {\n+            LOCK(cs_callbacksPending);\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+            fCallbacksRunning = true;\n+\n+            callback = callbacksPending.front();\n+            callbacksPending.pop_front();\n+        }\n+\n+        // RAII the setting of fCallbacksRunning and calling MaybeScheduleProcessQueue\n+        // to ensure both happen safely even if callback() throws.\n+        struct RAIICallbacksRunning {\n+            CMainSignalsInstance* instance;\n+            RAIICallbacksRunning(CMainSignalsInstance* _instance) : instance(_instance) {}\n+            ~RAIICallbacksRunning() {\n+                {\n+                    LOCK(instance->cs_callbacksPending);\n+                    instance->fCallbacksRunning = false;\n+                }\n+                instance->MaybeScheduleProcessQueue();",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 58,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114646664,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Is this really what we want? A scheduler call for each callback?\r\n\r\nI'm guessing the work done in any of these callbacks far outweighs the cost of scheduling one of them but I could be wrong.\r\n\r\n",
      "created_at": "2017-05-04T01:20:05Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114686965",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114686965"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687180",
      "pull_request_review_id": 36174603,
      "id": 114687180,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4NzE4MA==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114641508,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Looks like you commented on an outdated version and github wont show me full context, so I have no idea what those line numbers refer to :/",
      "created_at": "2017-05-04T01:23:16Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114687180",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687180"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687225",
      "pull_request_review_id": 36174655,
      "id": 114687225,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4NzIyNQ==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we\n+            // accidentally have two ProcessQueue's scheduled at once its\n+            // not a big deal.\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+        }\n+        scheduler->schedule(std::bind(&CMainSignalsInstance::ProcessQueue, this));\n+    }\n+\n+    void ProcessQueue() {\n+        std::function<void (void)> callback;\n+        {\n+            LOCK(cs_callbacksPending);\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+            fCallbacksRunning = true;\n+\n+            callback = callbacksPending.front();\n+            callbacksPending.pop_front();\n+        }\n+\n+        // RAII the setting of fCallbacksRunning and calling MaybeScheduleProcessQueue",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 48,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114644451,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@laanwj previously requested that any exceptions be thrown all the way up, so this was an easier way to do that. That request seemed reasonable.",
      "created_at": "2017-05-04T01:23:56Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114687225",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687225"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 62,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687355",
      "pull_request_review_id": 36174787,
      "id": 114687355,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4NzM1NQ==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we\n+            // accidentally have two ProcessQueue's scheduled at once its\n+            // not a big deal.\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+        }\n+        scheduler->schedule(std::bind(&CMainSignalsInstance::ProcessQueue, this));\n+    }\n+\n+    void ProcessQueue() {\n+        std::function<void (void)> callback;\n+        {\n+            LOCK(cs_callbacksPending);\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+            fCallbacksRunning = true;\n+\n+            callback = callbacksPending.front();\n+            callbacksPending.pop_front();\n+        }\n+\n+        // RAII the setting of fCallbacksRunning and calling MaybeScheduleProcessQueue\n+        // to ensure both happen safely even if callback() throws.\n+        struct RAIICallbacksRunning {\n+            CMainSignalsInstance* instance;\n+            RAIICallbacksRunning(CMainSignalsInstance* _instance) : instance(_instance) {}\n+            ~RAIICallbacksRunning() {\n+                {\n+                    LOCK(instance->cs_callbacksPending);\n+                    instance->fCallbacksRunning = false;\n+                }\n+                instance->MaybeScheduleProcessQueue();",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 58,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114646664,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Right now we only have one scheduler thread, so there should be limited lock contention, not to mention anything running is gonna take much longer than any locks held (locks are only held to push/pop/whatever, which should be very, very fast).",
      "created_at": "2017-05-04T01:25:59Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114687355",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687355"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687671",
      "pull_request_review_id": 36175082,
      "id": 114687671,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4NzY3MQ==",
      "diff_hunk": "@@ -1147,6 +1153,50 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    const CBlockIndex* initialChainTip;\n+    {\n+        LOCK(cs_main);\n+        initialChainTip = chainActive.Tip();\n+    }\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "bc3f415e09f13bb275c2d1a79b40d10f395c10c5",
      "in_reply_to_id": 114654883,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The AssertLockNotHeld call only fails if the current thread holds the lock, not any thread.",
      "created_at": "2017-05-04T01:29:50Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114687671",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1267,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687720",
      "pull_request_review_id": 36175144,
      "id": 114687720,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4NzcyMA==",
      "diff_hunk": "@@ -1147,6 +1153,50 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {",
      "path": "src/wallet/wallet.cpp",
      "position": 47,
      "original_position": 17,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "bc3f415e09f13bb275c2d1a79b40d10f395c10c5",
      "in_reply_to_id": 114651162,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm not sure how it is not thread safe? It blocks the *current* thread, not any other work.",
      "created_at": "2017-05-04T01:30:41Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114687720",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687720"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1265,
      "original_line": 1265,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687783",
      "pull_request_review_id": 36175213,
      "id": 114687783,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4Nzc4Mw==",
      "diff_hunk": "@@ -1104,6 +1113,14 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n        caller must ensure the current wallet version is correct before calling\n        this function). */\n     bool SetHDMasterKey(const CPubKey& key);\n+\n+    /**\n+     * Blocks until the wallet state is up-to-date to /at least/ the current\n+     * chain at the time this function is entered\n+     * Obviously holding cs_main/cs_wallet when going into this call may cause",
      "path": "src/wallet/wallet.h",
      "position": 70,
      "original_position": 31,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "bc3f415e09f13bb275c2d1a79b40d10f395c10c5",
      "in_reply_to_id": 114649332,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Any suggestions? The statement indicates that \"holding cs_main/cs_wallet may cause deadlock\", this is true, deadlock is not guaranteed, but may appear, thus you should obviously never call with cs_main or cs_wallet held.",
      "created_at": "2017-05-04T01:31:53Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114687783",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687783"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1129,
      "original_line": 1129,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687995",
      "pull_request_review_id": 36175430,
      "id": 114687995,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4Nzk5NQ==",
      "diff_hunk": "@@ -5,48 +5,107 @@\n \n #include \"validationinterface.h\"\n \n+#include <boost/signals2/signal.hpp>\n+\n+struct CMainSignalsInstance {\n+    boost::signals2::signal<void (const CBlockIndex *, const CBlockIndex *, bool fInitialDownload)> UpdatedBlockTip;\n+    boost::signals2::signal<void (const CTransactionRef &)> TransactionAddedToMempool;\n+    boost::signals2::signal<void (const std::shared_ptr<const CBlock> &, const CBlockIndex *pindex, const std::vector<CTransactionRef>&)> BlockConnected;\n+    boost::signals2::signal<void (const std::shared_ptr<const CBlock> &)> BlockDisconnected;\n+    boost::signals2::signal<void (const CBlockLocator &)> SetBestChain;\n+    boost::signals2::signal<void (const uint256 &)> Inventory;\n+    boost::signals2::signal<void (int64_t nBestBlockTime, CConnman* connman)> Broadcast;\n+    boost::signals2::signal<void (const CBlock&, const CValidationState&)> BlockChecked;\n+    boost::signals2::signal<void (std::shared_ptr<CReserveScript>&)> ScriptForMining;\n+    boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n+};\n+\n static CMainSignals g_signals;\n \n+CMainSignals::CMainSignals() {",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "f481ce1109d5b51ea55187a497bbca7b0fe8a856",
      "in_reply_to_id": 114633497,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Does that compile? CMainSignalsInstance() is not defined at that time, only declared.",
      "created_at": "2017-05-04T01:35:12Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114687995",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114687995"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114688203",
      "pull_request_review_id": 36175627,
      "id": 114688203,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4ODIwMw==",
      "diff_hunk": "@@ -43,6 +43,9 @@ class CScheduler\n     // Call func at/after time t\n     void schedule(Function f, boost::chrono::system_clock::time_point t);",
      "path": "src/scheduler.h",
      "position": null,
      "original_position": 2,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "d923d41826c7b00934284cdb04e3263ca236d99f",
      "in_reply_to_id": 114639639,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Took this on #10179, will be here when I next rebase.",
      "created_at": "2017-05-04T01:37:51Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114688203",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114688203"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114688353",
      "pull_request_review_id": 36175770,
      "id": 114688353,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDY4ODM1Mw==",
      "diff_hunk": "@@ -82,4 +84,26 @@ class CScheduler\n     bool shouldStop() { return stopRequested || (stopWhenEmpty && taskQueue.empty()); }\n };\n \n+/**\n+ * Class used by CScheduler clients which may schedule multiple jobs\n+ * which are required to be run serially. Does not require such jobs\n+ * to be executed on the same thread, but no two jobs will be executed\n+ * at the same time.\n+ */\n+class CSingleThreadedSchedulerClient {",
      "path": "src/scheduler.h",
      "position": null,
      "original_position": 19,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "0703075a7153912ee089f6f2e0c1dfc3b41e76fe",
      "in_reply_to_id": 114647690,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Its unlikely to be used elsewhere, but as it is more intimate with the CScheduler than the validation interface, it was abstracted out and put here. We should probably tweak up how it all works in a later PR (as we move off of the big boost threadGroup in init), but for now I'll leave it.",
      "created_at": "2017-05-04T01:39:46Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114688353",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114688353"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 90,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114847628",
      "pull_request_review_id": 36342810,
      "id": 114847628,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg0NzYyOA==",
      "diff_hunk": "@@ -5,48 +5,107 @@\n \n #include \"validationinterface.h\"\n \n+#include <boost/signals2/signal.hpp>\n+\n+struct CMainSignalsInstance {\n+    boost::signals2::signal<void (const CBlockIndex *, const CBlockIndex *, bool fInitialDownload)> UpdatedBlockTip;\n+    boost::signals2::signal<void (const CTransactionRef &)> TransactionAddedToMempool;\n+    boost::signals2::signal<void (const std::shared_ptr<const CBlock> &, const CBlockIndex *pindex, const std::vector<CTransactionRef>&)> BlockConnected;\n+    boost::signals2::signal<void (const std::shared_ptr<const CBlock> &)> BlockDisconnected;\n+    boost::signals2::signal<void (const CBlockLocator &)> SetBestChain;\n+    boost::signals2::signal<void (const uint256 &)> Inventory;\n+    boost::signals2::signal<void (int64_t nBestBlockTime, CConnman* connman)> Broadcast;\n+    boost::signals2::signal<void (const CBlock&, const CValidationState&)> BlockChecked;\n+    boost::signals2::signal<void (std::shared_ptr<CReserveScript>&)> ScriptForMining;\n+    boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n+};\n+\n static CMainSignals g_signals;\n \n+CMainSignals::CMainSignals() {",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "f481ce1109d5b51ea55187a497bbca7b0fe8a856",
      "in_reply_to_id": 114633497,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Since it is only a declaration I believe it should have been fine. I see this code isn't present in the final commit so I suppose it doesn't matter either way. ",
      "created_at": "2017-05-04T18:00:47Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114847628",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114847628"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114861172",
      "pull_request_review_id": 36357626,
      "id": 114861172,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg2MTE3Mg==",
      "diff_hunk": "@@ -5,48 +5,107 @@\n \n #include \"validationinterface.h\"\n \n+#include <boost/signals2/signal.hpp>\n+\n+struct CMainSignalsInstance {\n+    boost::signals2::signal<void (const CBlockIndex *, const CBlockIndex *, bool fInitialDownload)> UpdatedBlockTip;\n+    boost::signals2::signal<void (const CTransactionRef &)> TransactionAddedToMempool;\n+    boost::signals2::signal<void (const std::shared_ptr<const CBlock> &, const CBlockIndex *pindex, const std::vector<CTransactionRef>&)> BlockConnected;\n+    boost::signals2::signal<void (const std::shared_ptr<const CBlock> &)> BlockDisconnected;\n+    boost::signals2::signal<void (const CBlockLocator &)> SetBestChain;\n+    boost::signals2::signal<void (const uint256 &)> Inventory;\n+    boost::signals2::signal<void (int64_t nBestBlockTime, CConnman* connman)> Broadcast;\n+    boost::signals2::signal<void (const CBlock&, const CValidationState&)> BlockChecked;\n+    boost::signals2::signal<void (std::shared_ptr<CReserveScript>&)> ScriptForMining;\n+    boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n+};\n+\n static CMainSignals g_signals;\n \n+CMainSignals::CMainSignals() {",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "f481ce1109d5b51ea55187a497bbca7b0fe8a856",
      "in_reply_to_id": 114633497,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ahh, yes, since the rebase on the latest version of #10179 this code no longer exists, as the scheduler has to be passed into the creation of the internals object.",
      "created_at": "2017-05-04T18:58:15Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114861172",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114861172"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114861867",
      "pull_request_review_id": 36358355,
      "id": 114861867,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg2MTg2Nw==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we\n+            // accidentally have two ProcessQueue's scheduled at once its\n+            // not a big deal.\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+        }\n+        scheduler->schedule(std::bind(&CMainSignalsInstance::ProcessQueue, this));\n+    }\n+\n+    void ProcessQueue() {\n+        std::function<void (void)> callback;\n+        {\n+            LOCK(cs_callbacksPending);\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+            fCallbacksRunning = true;\n+\n+            callback = callbacksPending.front();\n+            callbacksPending.pop_front();\n+        }\n+\n+        // RAII the setting of fCallbacksRunning and calling MaybeScheduleProcessQueue",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 48,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114644451,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Understood, makes perfect sense. Didn't occur to me we'd have to duplicate the logic, spoiled by finally.",
      "created_at": "2017-05-04T19:01:11Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114861867",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114861867"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 62,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114865783",
      "pull_request_review_id": 36362796,
      "id": 114865783,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg2NTc4Mw==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we\n+            // accidentally have two ProcessQueue's scheduled at once its\n+            // not a big deal.\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+        }\n+        scheduler->schedule(std::bind(&CMainSignalsInstance::ProcessQueue, this));\n+    }\n+\n+    void ProcessQueue() {\n+        std::function<void (void)> callback;\n+        {\n+            LOCK(cs_callbacksPending);\n+            if (fCallbacksRunning) return;\n+            if (callbacksPending.empty()) return;\n+            fCallbacksRunning = true;\n+\n+            callback = callbacksPending.front();\n+            callbacksPending.pop_front();\n+        }\n+\n+        // RAII the setting of fCallbacksRunning and calling MaybeScheduleProcessQueue\n+        // to ensure both happen safely even if callback() throws.\n+        struct RAIICallbacksRunning {\n+            CMainSignalsInstance* instance;\n+            RAIICallbacksRunning(CMainSignalsInstance* _instance) : instance(_instance) {}\n+            ~RAIICallbacksRunning() {\n+                {\n+                    LOCK(instance->cs_callbacksPending);\n+                    instance->fCallbacksRunning = false;\n+                }\n+                instance->MaybeScheduleProcessQueue();",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 58,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114646664,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Okay, sounds like blocking/starving is the biggest risk. Can't disagree with that.\r\n\r\nFeels like a bit of wasted work to call schedule on things you know are intended to execute now, but that's just a performance (not important) concern.\r\nA bit surprising there is only one scheduler thread when the scheduler counts threads, but indeed it is only one.",
      "created_at": "2017-05-04T19:20:04Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114865783",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114865783"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114869346",
      "pull_request_review_id": 36366979,
      "id": 114869346,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg2OTM0Ng==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114641508,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@ryanofsky I believe the point is to avoid duplicate calls to the scheduler since it may be multi-threaded. So a call to AddToProcessQueue should not schedule() anything if we're already scheduled; it should only schedule() if our previously scheduled function has completed execution (at least beyond the point of it calling schedule() again). Can't see implementing that without knowing if fCallbacksRunning is true.\r\n\r\nStill, the code does not guarantee single threaded execution in its current form due to the fCallbacksRunning state being set AFTER the call to schedule(). Being that all the locks are placed appropriately we might as well make this guarantee or else it seems like a bug because the SingleThreadedClient won't be.\r\n\r\nI'll see if I can't get a test showing this behavior. ",
      "created_at": "2017-05-04T19:39:09Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114869346",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114869346"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114872197",
      "pull_request_review_id": 36370216,
      "id": 114872197,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg3MjE5Nw==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114641508,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> @ryanofsky I believe the point is to avoid duplicate calls to the scheduler since it may be multi-threaded.\r\n\r\nI know, this is why the second half of my suggestion was \"condition the AddToProcessQueue schedule() call on the queue being previously empty.\" Anyway, I don't think Matt's particularly interested in these simplifications, and it's easier to communicate these changes as patches rather than english descriptions, so I'd rather just leave any simplifications to followup PRs.\r\n\r\n> Still, the code does not guarantee single threaded execution in its current form due to the fCallbacksRunning state being set AFTER the call to schedule()\r\n\r\nThe reason it works in its current form is because of the `if (fCallbacksRunning) return;` line at the top of `ProcessQueue()`\r\n\r\nAgain, I don't think the code in it's current form is the simplest it could be, but it seems safe and easy to clean up later in a followup PR. Also this whole discussion really should be moved to #10179. #10286 is only building on the changes in #10179.",
      "created_at": "2017-05-04T19:53:37Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114872197",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114872197"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114873653",
      "pull_request_review_id": 36371910,
      "id": 114873653,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg3MzY1Mw==",
      "diff_hunk": "@@ -1104,6 +1113,14 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n        caller must ensure the current wallet version is correct before calling\n        this function). */\n     bool SetHDMasterKey(const CPubKey& key);\n+\n+    /**\n+     * Blocks until the wallet state is up-to-date to /at least/ the current\n+     * chain at the time this function is entered\n+     * Obviously holding cs_main/cs_wallet when going into this call may cause",
      "path": "src/wallet/wallet.h",
      "position": 70,
      "original_position": 31,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "bc3f415e09f13bb275c2d1a79b40d10f395c10c5",
      "in_reply_to_id": 114649332,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'd just drop \"Obviously\" now that I'm more familiar with the method.",
      "created_at": "2017-05-04T20:00:43Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114873653",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114873653"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1129,
      "original_line": 1129,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114874181",
      "pull_request_review_id": 36372483,
      "id": 114874181,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg3NDE4MQ==",
      "diff_hunk": "@@ -1147,6 +1153,50 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    const CBlockIndex* initialChainTip;\n+    {\n+        LOCK(cs_main);\n+        initialChainTip = chainActive.Tip();\n+    }\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "bc3f415e09f13bb275c2d1a79b40d10f395c10c5",
      "in_reply_to_id": 114654883,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`boost::thread_specific_ptr<LockStack> lockstack;`\r\nDidn't see that, makes perfect sense then.",
      "created_at": "2017-05-04T20:03:18Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114874181",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114874181"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1267,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114874633",
      "pull_request_review_id": 36372945,
      "id": 114874633,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg3NDYzMw==",
      "diff_hunk": "@@ -568,3 +568,16 @@ A few guidelines for introducing and reviewing new RPC interfaces:\n   - *Rationale*: as well as complicating the implementation and interfering\n     with the introduction of multi-wallet, wallet and non-wallet code should be\n     separated to avoid introducing circular dependencies between code units.\n+\n+- Wallet RPCs call BlockUntilSyncedToCurrentChain to maintain consistency with\n+  `getblockchaininfo`'s state immediately prior to the call's execution. Wallet\n+  RPCs who's behavior does *not* depend on the current chainstate may omit this",
      "path": "doc/developer-notes.md",
      "position": null,
      "original_position": 7,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "943217460bc527c4003868415c264e4a77a6e55a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add a dev notes document describing the new wallet RPC blocking\"\r\n\r\ns/who's/whose",
      "created_at": "2017-05-04T20:05:21Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114874633",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114874633"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 574,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114874764",
      "pull_request_review_id": 36373103,
      "id": 114874764,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg3NDc2NA==",
      "diff_hunk": "@@ -1147,6 +1153,50 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {",
      "path": "src/wallet/wallet.cpp",
      "position": 47,
      "original_position": 17,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "bc3f415e09f13bb275c2d1a79b40d10f395c10c5",
      "in_reply_to_id": 114651162,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I thought unsafe due to the \"AssertLockNotHeld\" that I misunderstood. My above comment is totally wrong and can be disregarded. ",
      "created_at": "2017-05-04T20:06:04Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114874764",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114874764"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1265,
      "original_line": 1265,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114874924",
      "pull_request_review_id": 36372945,
      "id": 114874924,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg3NDkyNA==",
      "diff_hunk": "@@ -568,3 +568,16 @@ A few guidelines for introducing and reviewing new RPC interfaces:\n   - *Rationale*: as well as complicating the implementation and interfering\n     with the introduction of multi-wallet, wallet and non-wallet code should be\n     separated to avoid introducing circular dependencies between code units.\n+\n+- Wallet RPCs call BlockUntilSyncedToCurrentChain to maintain consistency with\n+  `getblockchaininfo`'s state immediately prior to the call's execution. Wallet\n+  RPCs who's behavior does *not* depend on the current chainstate may omit this\n+  call.\n+\n+  - *Rationale*: In previous versions of Bitcoin Core, the wallet was always\n+    in-sync with the chainstate (by virtue of them all being updated in the\n+    same cs_main lock). In order to maintain the behavior that wallet RPCs\n+    return restults as of at least the highest best-known-block an RPC",
      "path": "doc/developer-notes.md",
      "position": null,
      "original_position": 13,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "943217460bc527c4003868415c264e4a77a6e55a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add a dev notes document describing the new wallet RPC blocking\"\r\n\r\ns/restults/results, s/best-known-block/best-known block,/",
      "created_at": "2017-05-04T20:06:56Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114874924",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114874924"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 580,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114887076",
      "pull_request_review_id": 36386797,
      "id": 114887076,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg4NzA3Ng==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114641508,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@ryanofsky I see that now, the extra check does prevent the execution. \r\n\r\nBeing that this is new code I wouldn't call it a simplification. Here's a patch of the proposed change, less logic with the same function:\r\n[scheduler.patch.txt](https://github.com/bitcoin/bitcoin/files/977512/scheduler.patch.txt)\r\n\r\nwhich reads better if you rename `fCallbacksRunning` to `fCallbacksScheduled`\r\nand this patch:\r\n[scheduler.patch2.txt](https://github.com/bitcoin/bitcoin/files/977548/scheduler.patch2.txt)\r\nwhich can be argued reduces code reuse but I think the readability is improved.\r\n",
      "created_at": "2017-05-04T21:02:30Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114887076",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114887076"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114887634",
      "pull_request_review_id": 36387425,
      "id": 114887634,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg4NzYzNA==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114641508,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@TheBlueMatt If you're open to these changes in a PR to your branch I can do that, I assume they'll be squashed so either way works.",
      "created_at": "2017-05-04T21:05:15Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114887634",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114887634"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114890462",
      "pull_request_review_id": 36390631,
      "id": 114890462,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg5MDQ2Mg==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114641508,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@mchrostowski hmm, really, I find that it decreases readability (though that may be NIH). It looks harder to reason about whether some callbacks might accidentally get missed to me.\r\n\r\n(Other random note, we dont use tabs in our codebase, which your patch added).",
      "created_at": "2017-05-04T21:20:06Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114890462",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114890462"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114894590",
      "pull_request_review_id": 36395056,
      "id": 114894590,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExNDg5NDU5MA==",
      "diff_hunk": "@@ -22,6 +27,64 @@ struct CMainSignalsInstance {\n     boost::signals2::signal<void (const CBlockIndex *, const std::shared_ptr<const CBlock>&)> NewPoWValidBlock;\n \n     CScheduler *scheduler = NULL;\n+\n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    CCriticalSection cs_callbacksPending;\n+    std::list<std::function<void (void)>> callbacksPending;\n+    bool fCallbacksRunning = false;\n+\n+    void MaybeScheduleProcessQueue() {\n+        {\n+            LOCK(cs_callbacksPending);\n+            // Try to avoid scheduling too many copies here, but if we",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "8daf2439796dfdee41c1a32787e0ec9726daf6be",
      "in_reply_to_id": 114641508,
      "user": {
        "login": "mchrostowski",
        "id": 19847568,
        "node_id": "MDQ6VXNlcjE5ODQ3NTY4",
        "avatar_url": "https://avatars.githubusercontent.com/u/19847568?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mchrostowski",
        "html_url": "https://github.com/mchrostowski",
        "followers_url": "https://api.github.com/users/mchrostowski/followers",
        "following_url": "https://api.github.com/users/mchrostowski/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mchrostowski/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mchrostowski/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mchrostowski/subscriptions",
        "organizations_url": "https://api.github.com/users/mchrostowski/orgs",
        "repos_url": "https://api.github.com/users/mchrostowski/repos",
        "events_url": "https://api.github.com/users/mchrostowski/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mchrostowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@TheBlueMatt Well, in that case I feel like either patch gets funky, especially since the use of fCallbacksRunning becomes inconsistent if you apply the first patch without the second (unless some alternative name for `fCallbacksRunning` works). \r\n\r\nThe extra safety check and inconsistency of scheduling bothers me but I wouldn't expect it to actually cause issues so I have no grounds for objection.\r\n\r\nI think my inquiry stemmed from it not being immediately apparent that ProcessQueue() only runs once and the extra check is just an extra check. Perhaps the \"not a big deal\" part of the comment could be \"because ProcessQueue() already checks\" for clarity, I would not have looked so deeply into the code except that I thought \"not a big deal\" meant \"sometimes interweaving calls is okay.\"",
      "created_at": "2017-05-04T21:42:03Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r114894590",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114894590"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/119458534",
      "pull_request_review_id": 41340432,
      "id": 119458534,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExOTQ1ODUzNA==",
      "diff_hunk": "@@ -1147,6 +1153,50 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    const CBlockIndex* initialChainTip;\n+    {\n+        LOCK(cs_main);\n+        initialChainTip = chainActive.Tip();\n+    }\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);\n+    std::unique_lock<std::mutex> lock(lastBlockProcessedMutex);\n+\n+    assert(lastBlockProcessed);\n+\n+    auto pred = [this, initialChainTip] {\n+            if (this->lastBlockProcessed == initialChainTip) {\n+                return true;\n+            }\n+            if (this->lastBlockProcessed->GetAncestor(initialChainTip->nHeight) == initialChainTip) {\n+                return true;\n+            }\n+            // Catch the race condition where the wallet may have caught up and\n+            // moved past initialChainTip through a reorg before we could get\n+            // lastBlockProcessedMutex.\n+            // This should be exceedingly rare in regular usage, so potentially\n+            // eating 100ms to retry this lock should be fine (not TRY_LOCKing\n+            // here would be a lock inversion against lastBlockProcessedMutex)\n+            TRY_LOCK(cs_main, mainLocked);\n+            if (mainLocked) {\n+                if (this->lastBlockProcessed == chainActive.Tip()) {\n+                    return true;\n+                }\n+                // If the user called invalidateblock our wait here might block\n+                // forever, so we check if we're ahead of the tip (a state\n+                // which should otherwise never be exposed outside of validation)\n+                return this->lastBlockProcessed->nChainWork > chainActive.Tip()->nChainWork;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 50,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "6cbe04c9cf237b34b6521edd33468b61b1f2032b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add CWallet::BlockUntilSyncedToCurrentChain()\"\r\n\r\nI don't understand why we would wait forever without this check. Does InvalidateBlock not trigger notifications that would lead to lastBlockProcessed being updated? And if it doesn't, shouldn't this just be fixed so the right notifications are sent?",
      "created_at": "2017-05-31T20:00:21Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r119458534",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/119458534"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/119459716",
      "pull_request_review_id": 41340432,
      "id": 119459716,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExOTQ1OTcxNg==",
      "diff_hunk": "@@ -1147,6 +1153,50 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    const CBlockIndex* initialChainTip;\n+    {\n+        LOCK(cs_main);\n+        initialChainTip = chainActive.Tip();\n+    }\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);\n+    std::unique_lock<std::mutex> lock(lastBlockProcessedMutex);\n+\n+    assert(lastBlockProcessed);\n+\n+    auto pred = [this, initialChainTip] {\n+            if (this->lastBlockProcessed == initialChainTip) {\n+                return true;\n+            }\n+            if (this->lastBlockProcessed->GetAncestor(initialChainTip->nHeight) == initialChainTip) {\n+                return true;\n+            }\n+            // Catch the race condition where the wallet may have caught up and\n+            // moved past initialChainTip through a reorg before we could get\n+            // lastBlockProcessedMutex.\n+            // This should be exceedingly rare in regular usage, so potentially\n+            // eating 100ms to retry this lock should be fine (not TRY_LOCKing\n+            // here would be a lock inversion against lastBlockProcessedMutex)\n+            TRY_LOCK(cs_main, mainLocked);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 42,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "6cbe04c9cf237b34b6521edd33468b61b1f2032b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add CWallet::BlockUntilSyncedToCurrentChain()\"\r\n\r\nMaybe consider dropping the try-lock and replacing it with `lastBlockProcessedMutex.unlock(); LOCK(cs_main);  lastBlockProcessedMutex.lock();`. Maybe this would be a little slower in the average case where this code runs (which is rare to begin with), but it would avoid the 100ms worst case, and make the code simpler because you could also replace the while loop and timeout with a plain `cv.wait(lock, pred)` call.\r\n\r\n\r\n",
      "created_at": "2017-05-31T20:05:43Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r119459716",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/119459716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1181,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120993449",
      "pull_request_review_id": 43007637,
      "id": 120993449,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMDk5MzQ0OQ==",
      "diff_hunk": "@@ -102,6 +102,10 @@ void UnregisterAllValidationInterfaces() {\n     g_signals.m_internals->NewPoWValidBlock.disconnect_all_slots();\n }\n \n+void CallFunctionInValidationInterfaceQueue(std::function<void ()> func) {\n+    g_signals.m_internals->m_schedulerClient.AddToProcessQueue(func);",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "09c604afe78f080bd1dbd82c4bcc8cdbe11455cd",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add CallFunctionInQueue to wait on validation interface queue drain\"\r\n\r\nWould std::move(func)",
      "created_at": "2017-06-08T20:40:38Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r120993449",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120993449"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 106,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120995283",
      "pull_request_review_id": 43007637,
      "id": 120995283,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMDk5NTI4Mw==",
      "diff_hunk": "@@ -1154,6 +1156,39 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);\n+\n+    {\n+        // Skip the queue-draining stuff if we know we're caught up with\n+        // chainActive.Tip()\n+        LOCK(cs_main);\n+        const CBlockIndex* initialChainTip = chainActive.Tip();\n+\n+        if (m_last_block_processed == initialChainTip) {",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "53024056522e59db67938c2df070a90ebb3592a8",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add CWallet::BlockUntilSyncedToCurrentChain()\"\r\n\r\nMaybe drop this check. Seems to be a special case of the check below which isn't actually more expensive.",
      "created_at": "2017-06-08T20:48:58Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r120995283",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120995283"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1169,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120998395",
      "pull_request_review_id": 43007637,
      "id": 120998395,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMDk5ODM5NQ==",
      "diff_hunk": "@@ -1154,6 +1156,39 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);\n+\n+    {\n+        // Skip the queue-draining stuff if we know we're caught up with\n+        // chainActive.Tip()\n+        LOCK(cs_main);\n+        const CBlockIndex* initialChainTip = chainActive.Tip();\n+\n+        if (m_last_block_processed == initialChainTip) {\n+            return;\n+        }\n+        if (m_last_block_processed->GetAncestor(initialChainTip->nHeight) == initialChainTip) {\n+            return;\n+        }\n+    }\n+\n+    std::condition_variable callbacks_done_cv;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "53024056522e59db67938c2df070a90ebb3592a8",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add CWallet::BlockUntilSyncedToCurrentChain()\"\r\n\r\nI think all the mutex/cv/lambda/looping stuff below could be replaced by:\r\n\r\n```\r\nstd::promise<void> promise;\r\nCallFunctionInValidationInterfaceQueue([&promise]() { promise.set_value(); });\r\npromise.get_future().wait();\r\n```",
      "created_at": "2017-06-08T21:03:17Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r120998395",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120998395"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1177,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122807160",
      "pull_request_review_id": 44954013,
      "id": 122807160,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMjgwNzE2MA==",
      "diff_hunk": "@@ -880,6 +880,15 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n                 }\n                 throw JSONRPCError(RPC_TRANSACTION_ERROR, state.GetRejectReason());\n             }\n+#ifdef ENABLE_WALLET\n+        } else {\n+            // If wallet is enabled, ensure that the wallet has been made aware\n+            // of the new transaction prior to returning. This prevents a race\n+            // where a user might call sendrawtransaction with a transaction\n+            // to/from their wallet, immediately call some wallet RPC, and get\n+            // a stale result because callbacks have not yet been processed.\n+            pwalletMain->TransactionAddedToMempool(tx);",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ef52453c96d33a754a17c320325d9b391ef70c4b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Fix wallet RPC race by informing wallet of tx in sendrawtransaction\"\r\n\r\nSeems like this will result in the wallet getting two TransactionAddedToMempool notifications, which is fine but might be worth noting in the comment.\r\n\r\nAlso, not asking for this change, but would another way to do this without referencing the wallet here be to release cs_main and then wait for the other notification to be processed? (Maybe using CallFunctionInValidationInterfaceQueue like in BlockUntilSyncedToCurrentChain?)",
      "created_at": "2017-06-19T19:53:28Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r122807160",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122807160"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 890,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123135130",
      "pull_request_review_id": 45308799,
      "id": 123135130,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMzEzNTEzMA==",
      "diff_hunk": "@@ -880,6 +880,15 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n                 }\n                 throw JSONRPCError(RPC_TRANSACTION_ERROR, state.GetRejectReason());\n             }\n+#ifdef ENABLE_WALLET\n+        } else {\n+            // If wallet is enabled, ensure that the wallet has been made aware\n+            // of the new transaction prior to returning. This prevents a race\n+            // where a user might call sendrawtransaction with a transaction\n+            // to/from their wallet, immediately call some wallet RPC, and get\n+            // a stale result because callbacks have not yet been processed.\n+            pwalletMain->TransactionAddedToMempool(tx);",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ef52453c96d33a754a17c320325d9b391ef70c4b",
      "in_reply_to_id": 122807160,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, much better to CallFunctionInValidatioInterface. Done.",
      "created_at": "2017-06-21T01:22:52Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r123135130",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123135130"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 890,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123264062",
      "pull_request_review_id": 45449956,
      "id": 123264062,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMzI2NDA2Mg==",
      "diff_hunk": "@@ -156,6 +156,15 @@ void AssertLockHeldInternal(const char* pszName, const char* pszFile, int nLine,\n     abort();\n }\n \n+void AssertLockNotHeldInternal(const char* pszName, const char* pszFile, int nLine, void* cs)\n+{\n+    BOOST_FOREACH (const PAIRTYPE(void*, CLockLocation) & i, *lockstack)",
      "path": "src/sync.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "176612666d7fa05d1416b7386c69121f751b552e",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Add ability to assert a lock is not held in DEBUG_LOCKORDER\"\r\n\r\nLooks like there are travis errors compiling this code (undefined FOREACH/PAIRTYPE).",
      "created_at": "2017-06-21T14:27:03Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r123264062",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123264062"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123267519",
      "pull_request_review_id": 45449956,
      "id": 123267519,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMzI2NzUxOQ==",
      "diff_hunk": "@@ -881,6 +883,17 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n                 }\n                 throw JSONRPCError(RPC_TRANSACTION_ERROR, state.GetRejectReason());\n             }\n+        } else {\n+            // If wallet is enabled, ensure that the wallet has been made aware\n+            // of the new transaction prior to returning. This prevents a race\n+            // where a user might call sendrawtransaction with a transaction\n+            // to/from their wallet, immediately call some wallet RPC, and get\n+            // a stale result because callbacks have not yet been processed.\n+            std::promise<void> promise;\n+            CallFunctionInValidationInterfaceQueue([&promise] {\n+                promise.set_value();\n+            });\n+            promise.get_future().wait();",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "c05c1c216a40e299c544cca010559528aecff9b7",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Fix wallet RPC race by waiting for callbacks in sendrawtransaction\"\r\n\r\nI think you might need to release cs_main before waiting for the promise, because the wallet handler in the notification thread will want to acquire it.\r\n\r\nFWIW, the way I implemented this in my wallet ipc branch was to call `CallFunctionInValidationInterfaceQueue` the same way you are doing here, but release cs_main before the `PushInventory` calls, and wait for the promise after the `PushInventory` calls. I also updated the comment.\r\n\r\n```diff\r\n--- a/src/rpc/rawtransaction.cpp\r\n+++ b/src/rpc/rawtransaction.cpp\r\n@@ -29,6 +29,7 @@\r\n #include \"wallet/wallet.h\"\r\n #endif\r\n \r\n+#include <future>\r\n #include <stdint.h>\r\n \r\n #include <univalue.h>\r\n@@ -846,7 +847,6 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\r\n             + HelpExampleRpc(\"sendrawtransaction\", \"\\\"signedhex\\\"\")\r\n         );\r\n \r\n-    LOCK(cs_main);\r\n     RPCTypeCheck(request.params, {UniValue::VSTR, UniValue::VBOOL});\r\n \r\n     // parse hex string from parameter\r\n@@ -860,6 +860,9 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\r\n     if (request.params.size() > 1 && request.params[1].get_bool())\r\n         nMaxRawTxFee = 0;\r\n \r\n+    std::promise<void> sent_notifications;\r\n+    {\r\n+    LOCK(cs_main);\r\n     CCoinsViewCache &view = *pcoinsTip;\r\n     bool fHaveChain = false;\r\n     for (size_t o = 0; !fHaveChain && o < tx->vout.size(); o++) {\r\n@@ -881,15 +884,6 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\r\n                 }\r\n                 throw JSONRPCError(RPC_TRANSACTION_ERROR, state.GetRejectReason());\r\n             }\r\n-#ifdef ENABLE_WALLET\r\n-        } else {\r\n-            // If wallet is enabled, ensure that the wallet has been made aware\r\n-            // of the new transaction prior to returning. This prevents a race\r\n-            // where a user might call sendrawtransaction with a transaction\r\n-            // to/from their wallet, immediately call some wallet RPC, and get\r\n-            // a stale result because callbacks have not yet been processed.\r\n-            pwalletMain->TransactionAddedToMempool(tx);\r\n-#endif\r\n         }\r\n     } else if (fHaveChain) {\r\n         throw JSONRPCError(RPC_TRANSACTION_ALREADY_IN_CHAIN, \"transaction already in block chain\");\r\n@@ -897,11 +891,22 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\r\n     if(!g_connman)\r\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\r\n \r\n+    CallFunctionInValidationInterfaceQueue([&sent_notifications] { sent_notifications.set_value(); });\r\n+    } // LOCK(cs_main)\r\n+\r\n     CInv inv(MSG_TX, hashTx);\r\n     g_connman->ForEachNode([&inv](CNode* pnode)\r\n     {\r\n         pnode->PushInventory(inv);\r\n     });\r\n+\r\n+    // Wait for any TransactionAddedToMempool notifications sent above to be\r\n+    // processed by thw wallet. This prevents a race where a user might call\r\n+    // sendrawtransaction with a transaction to/from their wallet, immediately\r\n+    // call some wallet RPC, and get a stale result because callbacks have not\r\n+    // yet been processed.\r\n+    sent_notifications.get_future().wait();\r\n+\r\n     return hashTx.GetHex();\r\n }\r\n```\r\n\r\n\r\n\r\n",
      "created_at": "2017-06-21T14:38:06Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r123267519",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123267519"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 896,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123273044",
      "pull_request_review_id": 45460001,
      "id": 123273044,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMzI3MzA0NA==",
      "diff_hunk": "@@ -881,6 +883,17 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n                 }\n                 throw JSONRPCError(RPC_TRANSACTION_ERROR, state.GetRejectReason());\n             }\n+        } else {\n+            // If wallet is enabled, ensure that the wallet has been made aware\n+            // of the new transaction prior to returning. This prevents a race\n+            // where a user might call sendrawtransaction with a transaction\n+            // to/from their wallet, immediately call some wallet RPC, and get\n+            // a stale result because callbacks have not yet been processed.\n+            std::promise<void> promise;\n+            CallFunctionInValidationInterfaceQueue([&promise] {\n+                promise.set_value();\n+            });\n+            promise.get_future().wait();",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "c05c1c216a40e299c544cca010559528aecff9b7",
      "in_reply_to_id": 123267519,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Heh, beat you to it.",
      "created_at": "2017-06-21T14:55:28Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r123273044",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123273044"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 896,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123277456",
      "pull_request_review_id": 45465002,
      "id": 123277456,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMzI3NzQ1Ng==",
      "diff_hunk": "@@ -893,6 +901,22 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n     {\n         pnode->PushInventory(inv);\n     });\n+\n+    } // cs_main\n+\n+    if (should_wait_on_validationinterface) {\n+        // If wallet is enabled, ensure that the wallet has been made aware\n+        // of the new transaction prior to returning. This prevents a race\n+        // where a user might call sendrawtransaction with a transaction\n+        // to/from their wallet, immediately call some wallet RPC, and get\n+        // a stale result because callbacks have not yet been processed.\n+        std::promise<void> promise;\n+        CallFunctionInValidationInterfaceQueue([&promise] {\n+            promise.set_value();\n+        });\n+        promise.get_future().wait();",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "b5410f848045afbdaca875fa13141919de4769a6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Fix wallet RPC race by waiting for callbacks in sendrawtransaction\"\r\n\r\nThis seems right. Possible tweaks:\r\n\r\n* `should_wait_on_validationinterface` seems like it is always true at this point, maybe the variable is not needed.\r\n* Might be better to call `CallFunctionInValidationInterfaceQueue` before releasing cs_main, to avoid waiting for notifications that might be queued in the meantime that we don't care about.\r\n* Might be cheaper / simpler just to hold on to the tx reference (remove std::move) instead of copying the hash to a temporary variable.\r\n* Maybe release cs_main before the PushInventory loop.",
      "created_at": "2017-06-21T15:10:33Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r123277456",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123277456"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 917,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123575981",
      "pull_request_review_id": 45793902,
      "id": 123575981,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMzU3NTk4MQ==",
      "diff_hunk": "@@ -881,19 +887,34 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n                 }\n                 throw JSONRPCError(RPC_TRANSACTION_ERROR, state.GetRejectReason());\n             }\n+        } else {\n+            // If wallet is enabled, ensure that the wallet has been made aware\n+            // of the new transaction prior to returning. This prevents a race\n+            // where a user might call sendrawtransaction with a transaction\n+            // to/from their wallet, immediately call some wallet RPC, and get\n+            // a stale result because callbacks have not yet been processed.\n+            CallFunctionInValidationInterfaceQueue([&promise] {\n+                promise.set_value();\n+            });\n         }\n     } else if (fHaveChain) {\n         throw JSONRPCError(RPC_TRANSACTION_ALREADY_IN_CHAIN, \"transaction already in block chain\");\n     }\n+\n+    } // cs_main\n+\n+    promise.get_future().wait();",
      "path": "src/rpc/rawtransaction.cpp",
      "position": 56,
      "original_position": 65,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "a40c312e6bb9df2cc25249982ce70c472b9fad79",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Fix wallet RPC race by waiting for callbacks in sendrawtransaction\"\r\n\r\nMight be more efficient to wait for the promise after the PushInventory calls so they aren't blocked waiting for wallets.",
      "created_at": "2017-06-22T17:38:24Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r123575981",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123575981"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123577169",
      "pull_request_review_id": 45795231,
      "id": 123577169,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyMzU3NzE2OQ==",
      "diff_hunk": "@@ -881,19 +887,34 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n                 }\n                 throw JSONRPCError(RPC_TRANSACTION_ERROR, state.GetRejectReason());\n             }\n+        } else {\n+            // If wallet is enabled, ensure that the wallet has been made aware\n+            // of the new transaction prior to returning. This prevents a race\n+            // where a user might call sendrawtransaction with a transaction\n+            // to/from their wallet, immediately call some wallet RPC, and get\n+            // a stale result because callbacks have not yet been processed.\n+            CallFunctionInValidationInterfaceQueue([&promise] {\n+                promise.set_value();\n+            });\n         }\n     } else if (fHaveChain) {\n         throw JSONRPCError(RPC_TRANSACTION_ALREADY_IN_CHAIN, \"transaction already in block chain\");\n     }\n+\n+    } // cs_main\n+\n+    promise.get_future().wait();",
      "path": "src/rpc/rawtransaction.cpp",
      "position": 56,
      "original_position": 65,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "a40c312e6bb9df2cc25249982ce70c472b9fad79",
      "in_reply_to_id": 123575981,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I figured put it above the !g_connman check to make sure we block even if at some point in the future we support running without net/connman. Dont feel strongly either way, though",
      "created_at": "2017-06-22T17:43:19Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r123577169",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/123577169"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808212",
      "pull_request_review_id": 55934232,
      "id": 132808212,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMjgwODIxMg==",
      "diff_hunk": "@@ -85,10 +97,17 @@ void UnregisterAllValidationInterfaces() {\n     g_signals.m_internals->TransactionAddedToMempool.disconnect_all_slots();\n     g_signals.m_internals->BlockConnected.disconnect_all_slots();\n     g_signals.m_internals->BlockDisconnected.disconnect_all_slots();\n+    g_signals.m_internals->TransactionRemovedFromMempool.disconnect_all_slots();\n     g_signals.m_internals->UpdatedBlockTip.disconnect_all_slots();\n     g_signals.m_internals->NewPoWValidBlock.disconnect_all_slots();\n }\n \n+void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 56,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "3e3dfecccc275fd8b4b84b2e5c1f6b1fd8d861d8",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`const CTransactionRef& ptx`, like `TransactionAddedToMempool`?",
      "created_at": "2017-08-12T02:45:26Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r132808212",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808212"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 111,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808216",
      "pull_request_review_id": 55934232,
      "id": 132808216,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMjgwODIxNg==",
      "diff_hunk": "@@ -85,10 +97,17 @@ void UnregisterAllValidationInterfaces() {\n     g_signals.m_internals->TransactionAddedToMempool.disconnect_all_slots();\n     g_signals.m_internals->BlockConnected.disconnect_all_slots();\n     g_signals.m_internals->BlockDisconnected.disconnect_all_slots();\n+    g_signals.m_internals->TransactionRemovedFromMempool.disconnect_all_slots();\n     g_signals.m_internals->UpdatedBlockTip.disconnect_all_slots();\n     g_signals.m_internals->NewPoWValidBlock.disconnect_all_slots();\n }\n \n+void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {\n+    if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 57,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "3e3dfecccc275fd8b4b84b2e5c1f6b1fd8d861d8",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why filtering?",
      "created_at": "2017-08-12T02:45:57Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r132808216",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808216"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 112,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808363",
      "pull_request_review_id": 55934232,
      "id": 132808363,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMjgwODM2Mw==",
      "diff_hunk": "@@ -1167,6 +1170,29 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);\n+\n+    {\n+        // Skip the queue-draining stuff if we know we're caught up with\n+        // chainActive.Tip()\n+        LOCK(cs_main);\n+        const CBlockIndex* initialChainTip = chainActive.Tip();\n+\n+        if (m_last_block_processed->GetAncestor(initialChainTip->nHeight) == initialChainTip) {\n+            return;\n+        }\n+    }\n+\n+    std::promise<void> promise;\n+    CallFunctionInValidationInterfaceQueue([&promise] {",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 37,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "71f168a2a6ded8bd223cb9296a05317afab56ab7",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This function is only introduced in a later commit.",
      "created_at": "2017-08-12T02:56:41Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r132808363",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808363"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1288,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808418",
      "pull_request_review_id": 55934232,
      "id": 132808418,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMjgwODQxOA==",
      "diff_hunk": "@@ -337,6 +335,7 @@ class CWalletTx : public CMerkleTx\n     mutable CAmount nImmatureWatchCreditCached;\n     mutable CAmount nAvailableWatchCreditCached;\n     mutable CAmount nChangeCached;\n+    mutable bool fInMempool;",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 13,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "b9bd72959b5737788e7ebfe7c31109b7b0529b51",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Move up for better packing?",
      "created_at": "2017-08-12T03:00:11Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r132808418",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808418"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 338,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808441",
      "pull_request_review_id": 55934232,
      "id": 132808441,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMjgwODQ0MQ==",
      "diff_hunk": "@@ -337,6 +335,7 @@ class CWalletTx : public CMerkleTx\n     mutable CAmount nImmatureWatchCreditCached;\n     mutable CAmount nAvailableWatchCreditCached;\n     mutable CAmount nChangeCached;\n+    mutable bool fInMempool;",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 13,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "b9bd72959b5737788e7ebfe7c31109b7b0529b51",
      "in_reply_to_id": 132808418,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Instead of `fInMempool` for each wallet transaction, maybe a `std::set<WalletTx*>` with the mempool transactions takes less memory?",
      "created_at": "2017-08-12T03:02:18Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r132808441",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808441"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 338,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808496",
      "pull_request_review_id": 55934232,
      "id": 132808496,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMjgwODQ5Ng==",
      "diff_hunk": "@@ -75,6 +75,9 @@ UniValue getinfo(const JSONRPCRequest& request)\n #ifdef ENABLE_WALLET\n     CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n \n+    if (pwallet) {",
      "path": "src/rpc/misc.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "15e5d05f842c69cc6f825e5e866bb3c44fa80f5e",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Move this to `EnsureWalletIsAvailable`?",
      "created_at": "2017-08-12T03:04:54Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r132808496",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132808496"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133040280",
      "pull_request_review_id": 56178933,
      "id": 133040280,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMzA0MDI4MA==",
      "diff_hunk": "@@ -85,10 +97,17 @@ void UnregisterAllValidationInterfaces() {\n     g_signals.m_internals->TransactionAddedToMempool.disconnect_all_slots();\n     g_signals.m_internals->BlockConnected.disconnect_all_slots();\n     g_signals.m_internals->BlockDisconnected.disconnect_all_slots();\n+    g_signals.m_internals->TransactionRemovedFromMempool.disconnect_all_slots();\n     g_signals.m_internals->UpdatedBlockTip.disconnect_all_slots();\n     g_signals.m_internals->NewPoWValidBlock.disconnect_all_slots();\n }\n \n+void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 56,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "3e3dfecccc275fd8b4b84b2e5c1f6b1fd8d861d8",
      "in_reply_to_id": 132808212,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This isnt a new function, it would have to be changed in txmempool.h",
      "created_at": "2017-08-14T19:30:39Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r133040280",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133040280"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 111,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133040284",
      "pull_request_review_id": 56178936,
      "id": 133040284,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMzA0MDI4NA==",
      "diff_hunk": "@@ -85,10 +97,17 @@ void UnregisterAllValidationInterfaces() {\n     g_signals.m_internals->TransactionAddedToMempool.disconnect_all_slots();\n     g_signals.m_internals->BlockConnected.disconnect_all_slots();\n     g_signals.m_internals->BlockDisconnected.disconnect_all_slots();\n+    g_signals.m_internals->TransactionRemovedFromMempool.disconnect_all_slots();\n     g_signals.m_internals->UpdatedBlockTip.disconnect_all_slots();\n     g_signals.m_internals->NewPoWValidBlock.disconnect_all_slots();\n }\n \n+void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {\n+    if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {",
      "path": "src/validationinterface.cpp",
      "position": null,
      "original_position": 57,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "3e3dfecccc275fd8b4b84b2e5c1f6b1fd8d861d8",
      "in_reply_to_id": 132808216,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Because BLOCK and CONFLICT are passed out in BlockConnectedDisconnected (see comment in validationinterface.h which describes in what cases this is called).",
      "created_at": "2017-08-14T19:30:40Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r133040284",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133040284"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 112,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133040583",
      "pull_request_review_id": 56179291,
      "id": 133040583,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMzA0MDU4Mw==",
      "diff_hunk": "@@ -1167,6 +1170,29 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);\n+\n+    {\n+        // Skip the queue-draining stuff if we know we're caught up with\n+        // chainActive.Tip()\n+        LOCK(cs_main);\n+        const CBlockIndex* initialChainTip = chainActive.Tip();\n+\n+        if (m_last_block_processed->GetAncestor(initialChainTip->nHeight) == initialChainTip) {\n+            return;\n+        }\n+    }\n+\n+    std::promise<void> promise;\n+    CallFunctionInValidationInterfaceQueue([&promise] {",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 37,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "71f168a2a6ded8bd223cb9296a05317afab56ab7",
      "in_reply_to_id": 132808363,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you've been bitten by GitHub's obnoxious order-commits-by-date-instead-of-git-ordering bug? ",
      "created_at": "2017-08-14T19:32:10Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r133040583",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133040583"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1288,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133040807",
      "pull_request_review_id": 56179563,
      "id": 133040807,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMzA0MDgwNw==",
      "diff_hunk": "@@ -75,6 +75,9 @@ UniValue getinfo(const JSONRPCRequest& request)\n #ifdef ENABLE_WALLET\n     CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n \n+    if (pwallet) {",
      "path": "src/rpc/misc.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "15e5d05f842c69cc6f825e5e866bb3c44fa80f5e",
      "in_reply_to_id": 132808496,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not all functions which want wallet need to do this, though.",
      "created_at": "2017-08-14T19:33:13Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r133040807",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133040807"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133040979",
      "pull_request_review_id": 56179792,
      "id": 133040979,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMzA0MDk3OQ==",
      "diff_hunk": "@@ -337,6 +335,7 @@ class CWalletTx : public CMerkleTx\n     mutable CAmount nImmatureWatchCreditCached;\n     mutable CAmount nAvailableWatchCreditCached;\n     mutable CAmount nChangeCached;\n+    mutable bool fInMempool;",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 13,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "b9bd72959b5737788e7ebfe7c31109b7b0529b51",
      "in_reply_to_id": 132808418,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Moved it up. At some point someone can go through and mark all the bools as 1 bit, I'd think.",
      "created_at": "2017-08-14T19:34:09Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r133040979",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133040979"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 338,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133509865",
      "pull_request_review_id": 56699427,
      "id": 133509865,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMzUwOTg2NQ==",
      "diff_hunk": "@@ -4365,7 +4383,26 @@ int CMerkleTx::GetBlocksToMaturity() const\n }\n \n \n-bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState& state)\n+bool CWalletTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState& state)\n {\n-    return ::AcceptToMemoryPool(mempool, state, tx, true, nullptr, nullptr, false, nAbsurdFee);\n+    // We must set fInMempool here - while it will be re-set to true by the\n+    // entered-mempool callback, if we did not there would be a race where a\n+    // user could call sendmoney in a loop and hit spurious out of funds errors\n+    // because we think that the transaction they just generated's change is\n+    // unavailable as we're not yet aware its in mempool.\n+    bool ret = ::AcceptToMemoryPool(mempool, state, tx, true, nullptr, nullptr, false, nAbsurdFee);\n+    fInMempool = ret;\n+    return ret;\n+}\n+\n+bool CalculateEstimateType(FeeEstimateMode mode, bool opt_in_rbf) {",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 81,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "daab5ea6d853020838ba2c19d3e35079ae1312c2",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Use callbacks to cache whether wallet transactions are in mempool\"\r\n\r\nLooks like you accidentally resurrected this CalculateEstimateType function in the rebase. Should remove.",
      "created_at": "2017-08-16T17:09:19Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r133509865",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133509865"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133799053",
      "pull_request_review_id": 57021342,
      "id": 133799053,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMzc5OTA1Mw==",
      "diff_hunk": "@@ -4365,7 +4383,26 @@ int CMerkleTx::GetBlocksToMaturity() const\n }\n \n \n-bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState& state)\n+bool CWalletTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState& state)\n {\n-    return ::AcceptToMemoryPool(mempool, state, tx, true, nullptr, nullptr, false, nAbsurdFee);\n+    // We must set fInMempool here - while it will be re-set to true by the\n+    // entered-mempool callback, if we did not there would be a race where a\n+    // user could call sendmoney in a loop and hit spurious out of funds errors\n+    // because we think that the transaction they just generated's change is\n+    // unavailable as we're not yet aware its in mempool.\n+    bool ret = ::AcceptToMemoryPool(mempool, state, tx, true, nullptr, nullptr, false, nAbsurdFee);\n+    fInMempool = ret;\n+    return ret;\n+}\n+\n+bool CalculateEstimateType(FeeEstimateMode mode, bool opt_in_rbf) {",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 81,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "daab5ea6d853020838ba2c19d3e35079ae1312c2",
      "in_reply_to_id": 133509865,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oops, fixed.",
      "created_at": "2017-08-17T18:52:52Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r133799053",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133799053"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4398,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141894492",
      "pull_request_review_id": 66184198,
      "id": 141894492,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTg5NDQ5Mg==",
      "diff_hunk": "@@ -7,6 +7,7 @@\n #define BITCOIN_VALIDATIONINTERFACE_H\n \n #include <memory>\n+#include <functional>",
      "path": "src/validationinterface.h",
      "position": null,
      "original_position": 4,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "340164291f2258be28cbcc8a4aa69b35cb2d15d9",
      "in_reply_to_id": null,
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Since you're adding system includes, might as well move them to their correct place, after the user includes. Also, better if they're sorted",
      "created_at": "2017-09-29T15:17:13Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r141894492",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141894492"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 10,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141903428",
      "pull_request_review_id": 66195001,
      "id": 141903428,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTkwMzQyOA==",
      "diff_hunk": "@@ -724,6 +724,14 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n \n     std::unique_ptr<CWalletDBWrapper> dbw;\n \n+    /**\n+     * The following are used to keep track of how far behind the wallet is",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 5,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "901eb9f4335bf87be9dd88931569f527e6c1c15b",
      "in_reply_to_id": null,
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "are used->is used?",
      "created_at": "2017-09-29T15:53:05Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r141903428",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141903428"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 728,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141904083",
      "pull_request_review_id": 66195766,
      "id": 141904083,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTkwNDA4Mw==",
      "diff_hunk": "@@ -3869,6 +3895,12 @@ CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)\n         if (walletdb.ReadBestBlock(locator))\n             pindexRescan = FindForkInGlobalIndex(chainActive, locator);\n     }\n+\n+    //We must set m_last_block_processed prior to registering the wallet as a validation interface",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 70,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "901eb9f4335bf87be9dd88931569f527e6c1c15b",
      "in_reply_to_id": null,
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Missing space after `//`",
      "created_at": "2017-09-29T15:56:00Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r141904083",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141904083"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3899,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141907208",
      "pull_request_review_id": 66199470,
      "id": 141907208,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTkwNzIwOA==",
      "diff_hunk": "@@ -31,6 +32,11 @@ void RegisterValidationInterface(CValidationInterface* pwalletIn);\n void UnregisterValidationInterface(CValidationInterface* pwalletIn);\n /** Unregister all wallets from core */\n void UnregisterAllValidationInterfaces();\n+/**\n+ * Pushes a function to callback onto the notification queue, guaranteeing any\n+ * callbacks generated prior to now are finished when the function is called.\n+ */\n+void CallFunctionInValidationInterfaceQueue(std::function<void ()> func);",
      "path": "src/validationinterface.h",
      "position": null,
      "original_position": 16,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "340164291f2258be28cbcc8a4aa69b35cb2d15d9",
      "in_reply_to_id": null,
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think a better interface would be\r\n`std::future<void> SyncWithValidationInterfaceQueue();`\r\n\r\nWhose implementation sets up the delayed call to a `promise.set_value()`, instead of this being the responsibility of the caller as it is now.\r\n\r\nThe sync functionality is the only purpose, so rather than have an overly-generic interface which allows calling any function, it's better to have a more specific interface which simplifies the interface as well as the setup work on the caller side.",
      "created_at": "2017-09-29T16:10:20Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r141907208",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141907208"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141917048",
      "pull_request_review_id": 66211031,
      "id": 141917048,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTkxNzA0OA==",
      "diff_hunk": "@@ -2769,6 +2857,10 @@ UniValue listunspent(const JSONRPCRequest& request)\n             nMaximumCount = options[\"maximumCount\"].get_int64();\n     }\n \n+    // Make sure the results are valid at least up to the most recent block\n+    // the user could have gotten from another RPC command prior to now\n+    pwallet->BlockUntilSyncedToCurrentChain();",
      "path": "src/wallet/rpcwallet.cpp",
      "position": 220,
      "original_position": 220,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "1b67af2ca07fa22efb61952438cc23ac64901c17",
      "in_reply_to_id": null,
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This should come after `assert(pwallet != nullptr);`",
      "created_at": "2017-09-29T16:58:34Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r141917048",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141917048"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2894,
      "original_line": 2894,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141961700",
      "pull_request_review_id": 66264053,
      "id": 141961700,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTk2MTcwMA==",
      "diff_hunk": "@@ -119,23 +119,33 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n }\n \n void CMainSignals::TransactionAddedToMempool(const CTransactionRef &ptx) {\n-    m_internals->TransactionAddedToMempool(ptx);\n+    m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+        m_internals->TransactionAddedToMempool(ptx);\n+    });\n }\n \n-void CMainSignals::BlockConnected(const std::shared_ptr<const CBlock> &pblock, const CBlockIndex *pindex, const std::vector<CTransactionRef>& vtxConflicted) {\n-    m_internals->BlockConnected(pblock, pindex, vtxConflicted);\n+void CMainSignals::BlockConnected(const std::shared_ptr<const CBlock> &pblock, const CBlockIndex *pindex, const std::shared_ptr<const std::vector<CTransactionRef>>& pvtxConflicted) {\n+    m_internals->m_schedulerClient.AddToProcessQueue([pblock, pindex, pvtxConflicted, this] {\n+        m_internals->BlockConnected(pblock, pindex, *pvtxConflicted);\n+    });\n }\n \n void CMainSignals::BlockDisconnected(const std::shared_ptr<const CBlock> &pblock) {\n-    m_internals->BlockDisconnected(pblock);\n+    m_internals->m_schedulerClient.AddToProcessQueue([pblock, this] {\n+        m_internals->BlockDisconnected(pblock);\n+    });\n }\n \n void CMainSignals::SetBestChain(const CBlockLocator &locator) {\n-    m_internals->SetBestChain(locator);\n+    m_internals->m_schedulerClient.AddToProcessQueue([locator, this] {\n+        m_internals->SetBestChain(locator);\n+    });",
      "path": "src/validationinterface.cpp",
      "position": 101,
      "original_position": 29,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "4b6a0c9aad7a91e68ef885046a963f6b233b3150",
      "in_reply_to_id": null,
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think this introduces a bug. `CMainSignals::SetBestChain()` might be called with a `CBlockLocator` object argument which goes out of scope and gets destructed before the queued `m_internals->SetBestChain()` is called, causing an invalid memory access. For example, this can happen in the `walletInstance->SetBestChain(chainActive.GetLocator());` call in wallet.cpp).",
      "created_at": "2017-09-29T20:32:21Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r141961700",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141961700"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 146,
      "original_line": 146,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141961944",
      "pull_request_review_id": 66264356,
      "id": 141961944,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTk2MTk0NA==",
      "diff_hunk": "@@ -119,23 +119,33 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n }\n \n void CMainSignals::TransactionAddedToMempool(const CTransactionRef &ptx) {\n-    m_internals->TransactionAddedToMempool(ptx);\n+    m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+        m_internals->TransactionAddedToMempool(ptx);\n+    });\n }\n \n-void CMainSignals::BlockConnected(const std::shared_ptr<const CBlock> &pblock, const CBlockIndex *pindex, const std::vector<CTransactionRef>& vtxConflicted) {\n-    m_internals->BlockConnected(pblock, pindex, vtxConflicted);\n+void CMainSignals::BlockConnected(const std::shared_ptr<const CBlock> &pblock, const CBlockIndex *pindex, const std::shared_ptr<const std::vector<CTransactionRef>>& pvtxConflicted) {\n+    m_internals->m_schedulerClient.AddToProcessQueue([pblock, pindex, pvtxConflicted, this] {\n+        m_internals->BlockConnected(pblock, pindex, *pvtxConflicted);\n+    });\n }\n \n void CMainSignals::BlockDisconnected(const std::shared_ptr<const CBlock> &pblock) {\n-    m_internals->BlockDisconnected(pblock);\n+    m_internals->m_schedulerClient.AddToProcessQueue([pblock, this] {\n+        m_internals->BlockDisconnected(pblock);\n+    });\n }\n \n void CMainSignals::SetBestChain(const CBlockLocator &locator) {\n-    m_internals->SetBestChain(locator);\n+    m_internals->m_schedulerClient.AddToProcessQueue([locator, this] {\n+        m_internals->SetBestChain(locator);\n+    });",
      "path": "src/validationinterface.cpp",
      "position": 101,
      "original_position": 29,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "4b6a0c9aad7a91e68ef885046a963f6b233b3150",
      "in_reply_to_id": 141961700,
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "On second thought I'm probably wrong because locator is captured by the lambda by value, not reference.",
      "created_at": "2017-09-29T20:33:37Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r141961944",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141961944"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 146,
      "original_line": 146,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141962513",
      "pull_request_review_id": 66265047,
      "id": 141962513,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTk2MjUxMw==",
      "diff_hunk": "@@ -31,6 +32,7 @@\n #endif\n \n #include <stdint.h>\n+#include <future>",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "a9629cb6525985a4fcd40f6bfdaf99731b074acb",
      "in_reply_to_id": null,
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "sort",
      "created_at": "2017-09-29T20:36:44Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r141962513",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141962513"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142012101",
      "pull_request_review_id": 66319315,
      "id": 142012101,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MjAxMjEwMQ==",
      "diff_hunk": "@@ -31,6 +32,11 @@ void RegisterValidationInterface(CValidationInterface* pwalletIn);\n void UnregisterValidationInterface(CValidationInterface* pwalletIn);\n /** Unregister all wallets from core */\n void UnregisterAllValidationInterfaces();\n+/**\n+ * Pushes a function to callback onto the notification queue, guaranteeing any\n+ * callbacks generated prior to now are finished when the function is called.\n+ */\n+void CallFunctionInValidationInterfaceQueue(std::function<void ()> func);",
      "path": "src/validationinterface.h",
      "position": null,
      "original_position": 16,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "340164291f2258be28cbcc8a4aa69b35cb2d15d9",
      "in_reply_to_id": 141907208,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Hmm..I have a few more branches which use this function for other stuff (eg one that will set a \"allowed to continue processing\" boolean on a CNodeState then call WakeMessageHandler). I think most of the use-cases for now could almost do fine with a future-like return value if std::future allowed you to query whether the future had yet completed. Still, since the promise-create-future-wait pattern isnt too many LoC, I suppose I'll leave it for now instead of adding a bunch of machinery just to create a special future-like return type.",
      "created_at": "2017-09-30T18:21:57Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r142012101",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142012101"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142013633",
      "pull_request_review_id": 66320913,
      "id": 142013633,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MjAxMzYzMw==",
      "diff_hunk": "@@ -31,6 +32,11 @@ void RegisterValidationInterface(CValidationInterface* pwalletIn);\n void UnregisterValidationInterface(CValidationInterface* pwalletIn);\n /** Unregister all wallets from core */\n void UnregisterAllValidationInterfaces();\n+/**\n+ * Pushes a function to callback onto the notification queue, guaranteeing any\n+ * callbacks generated prior to now are finished when the function is called.\n+ */\n+void CallFunctionInValidationInterfaceQueue(std::function<void ()> func);",
      "path": "src/validationinterface.h",
      "position": null,
      "original_position": 16,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "340164291f2258be28cbcc8a4aa69b35cb2d15d9",
      "in_reply_to_id": 141907208,
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> I think most of the use-cases for now could almost do fine with a future-like return value if `std::future` allowed you to query whether the future had yet completed.\r\n\r\nWouldn't `std::future::wait_for()` with argument provide that functionality?\r\n\r\nOrthogonally, if the intended interface really *is* to allow running arbitrary functions on the queue, than the current interface is fine. If it's just to sync with it, I think the interface I suggested is better.",
      "created_at": "2017-09-30T19:44:04Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r142013633",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142013633"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142014406",
      "pull_request_review_id": 66321563,
      "id": 142014406,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MjAxNDQwNg==",
      "diff_hunk": "@@ -31,6 +32,11 @@ void RegisterValidationInterface(CValidationInterface* pwalletIn);\n void UnregisterValidationInterface(CValidationInterface* pwalletIn);\n /** Unregister all wallets from core */\n void UnregisterAllValidationInterfaces();\n+/**\n+ * Pushes a function to callback onto the notification queue, guaranteeing any\n+ * callbacks generated prior to now are finished when the function is called.\n+ */\n+void CallFunctionInValidationInterfaceQueue(std::function<void ()> func);",
      "path": "src/validationinterface.h",
      "position": null,
      "original_position": 16,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "340164291f2258be28cbcc8a4aa69b35cb2d15d9",
      "in_reply_to_id": 141907208,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yea, could pull some hack like wait_for(1ns), but that's pretty gross. I think the purpose is somewhat of both - really it shouldn't be to do much more than sync, but sync may require rather arbitrary things (like calling WakeMessageHandler to wake up another thread which is waiting on some other unrelated condition in the example above). For now probably best to just leave it IMO.",
      "created_at": "2017-09-30T20:21:02Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r142014406",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142014406"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142014463",
      "pull_request_review_id": 66321616,
      "id": 142014463,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MjAxNDQ2Mw==",
      "diff_hunk": "@@ -31,6 +32,11 @@ void RegisterValidationInterface(CValidationInterface* pwalletIn);\n void UnregisterValidationInterface(CValidationInterface* pwalletIn);\n /** Unregister all wallets from core */\n void UnregisterAllValidationInterfaces();\n+/**\n+ * Pushes a function to callback onto the notification queue, guaranteeing any\n+ * callbacks generated prior to now are finished when the function is called.\n+ */\n+void CallFunctionInValidationInterfaceQueue(std::function<void ()> func);",
      "path": "src/validationinterface.h",
      "position": null,
      "original_position": 16,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "340164291f2258be28cbcc8a4aa69b35cb2d15d9",
      "in_reply_to_id": 141907208,
      "user": {
        "login": "danra",
        "id": 84245,
        "node_id": "MDQ6VXNlcjg0MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/84245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/danra",
        "html_url": "https://github.com/danra",
        "followers_url": "https://api.github.com/users/danra/followers",
        "following_url": "https://api.github.com/users/danra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/danra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/danra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/danra/subscriptions",
        "organizations_url": "https://api.github.com/users/danra/orgs",
        "repos_url": "https://api.github.com/users/danra/repos",
        "events_url": "https://api.github.com/users/danra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/danra/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok.\r\nbtw I meant to write \"with argument *zero*\" above, so it's not hacky - it just checks if the `std::future` is done, without waiting.",
      "created_at": "2017-09-30T20:23:55Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r142014463",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142014463"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142020362",
      "pull_request_review_id": 66327561,
      "id": 142020362,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MjAyMDM2Mg==",
      "diff_hunk": "@@ -2769,6 +2857,10 @@ UniValue listunspent(const JSONRPCRequest& request)\n             nMaximumCount = options[\"maximumCount\"].get_int64();\n     }\n \n+    // Make sure the results are valid at least up to the most recent block\n+    // the user could have gotten from another RPC command prior to now\n+    pwallet->BlockUntilSyncedToCurrentChain();",
      "path": "src/wallet/rpcwallet.cpp",
      "position": 220,
      "original_position": 220,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "1b67af2ca07fa22efb61952438cc23ac64901c17",
      "in_reply_to_id": 141917048,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Removed that line instead (we dont have similar checks anywhere else and the case is already covered by EnsureWalletIsAvailable).",
      "created_at": "2017-10-01T04:22:48Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r142020362",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142020362"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2894,
      "original_line": 2894,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144085266",
      "pull_request_review_id": 68693050,
      "id": 144085266,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDA4NTI2Ng==",
      "diff_hunk": "@@ -1244,6 +1262,29 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);\n+\n+    {\n+        // Skip the queue-draining stuff if we know we're caught up with\n+        // chainActive.Tip()\n+        LOCK(cs_main);\n+        const CBlockIndex* initialChainTip = chainActive.Tip();\n+\n+        if (m_last_block_processed->GetAncestor(initialChainTip->nHeight) == initialChainTip) {\n+            return;\n+        }\n+    }\n+\n+    std::promise<void> promise;\n+    CallFunctionInValidationInterfaceQueue([&promise] {",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 63,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is explained here: https://github.com/bitcoin/bitcoin/pull/10286#issuecomment-307140100\r\n\r\n> it now just tests if it is caught up, and if it is not, it puts a callback into the CValidationInterface queue and waits for it to trigger\r\n\r\nI think this should be a code comment rather than a github comment!",
      "created_at": "2017-10-11T17:45:59Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144085266",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144085266"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1288,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144103454",
      "pull_request_review_id": 68693050,
      "id": 144103454,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDEwMzQ1NA==",
      "diff_hunk": "@@ -85,32 +97,57 @@ void UnregisterAllValidationInterfaces() {\n     g_signals.m_internals->TransactionAddedToMempool.disconnect_all_slots();\n     g_signals.m_internals->BlockConnected.disconnect_all_slots();\n     g_signals.m_internals->BlockDisconnected.disconnect_all_slots();\n+    g_signals.m_internals->TransactionRemovedFromMempool.disconnect_all_slots();\n     g_signals.m_internals->UpdatedBlockTip.disconnect_all_slots();\n     g_signals.m_internals->NewPoWValidBlock.disconnect_all_slots();\n }\n \n+void CallFunctionInValidationInterfaceQueue(std::function<void ()> func) {\n+    g_signals.m_internals->m_schedulerClient.AddToProcessQueue(std::move(func));\n+}\n+\n+void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {\n+    if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n+        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+            m_internals->TransactionRemovedFromMempool(ptx);\n+        });\n+    }\n+}\n+\n void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) {\n-    m_internals->UpdatedBlockTip(pindexNew, pindexFork, fInitialDownload);\n+    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {",
      "path": "src/validationinterface.cpp",
      "position": 70,
      "original_position": 70,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There's a global variable in net_processing called `nTimeBestReceived ` which gets updated to the current time in this callback. Now that the callback is asynchronous, it won't necessarily be updated immediately. Does that cause a problem when `nTimeBestReceived` is used in the `Broadcast` callback?",
      "created_at": "2017-10-11T18:52:28Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144103454",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144103454"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 120,
      "original_line": 120,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144105398",
      "pull_request_review_id": 68693050,
      "id": 144105398,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDEwNTM5OA==",
      "diff_hunk": "@@ -85,32 +97,57 @@ void UnregisterAllValidationInterfaces() {\n     g_signals.m_internals->TransactionAddedToMempool.disconnect_all_slots();\n     g_signals.m_internals->BlockConnected.disconnect_all_slots();\n     g_signals.m_internals->BlockDisconnected.disconnect_all_slots();\n+    g_signals.m_internals->TransactionRemovedFromMempool.disconnect_all_slots();\n     g_signals.m_internals->UpdatedBlockTip.disconnect_all_slots();\n     g_signals.m_internals->NewPoWValidBlock.disconnect_all_slots();\n }\n \n+void CallFunctionInValidationInterfaceQueue(std::function<void ()> func) {\n+    g_signals.m_internals->m_schedulerClient.AddToProcessQueue(std::move(func));\n+}\n+\n+void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {",
      "path": "src/validationinterface.cpp",
      "position": 60,
      "original_position": 60,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is there a reason that you've named the validation interface callback `TransactionRemovedFromMempool()` but the signal is named `MempoolEntryRemoved`. For all other callbacks in the validation interface, the callback name matches the signal name.",
      "created_at": "2017-10-11T19:00:05Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144105398",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144105398"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 111,
      "original_line": 111,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144105572",
      "pull_request_review_id": 68693050,
      "id": 144105572,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDEwNTU3Mg==",
      "diff_hunk": "@@ -722,6 +725,14 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n \n     std::unique_ptr<CWalletDBWrapper> dbw;\n \n+    /**\n+     * The following is used to keep track of how far behind the wallet is\n+     * from the chain sync, and to allow clients to block on us being caught up\n+     *\n+     * Protected by cs_main",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 43,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't understand why this is protected by cs_main. Can you explain?",
      "created_at": "2017-10-11T19:00:47Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144105572",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144105572"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 732,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144106726",
      "pull_request_review_id": 68693050,
      "id": 144106726,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDEwNjcyNg==",
      "diff_hunk": "@@ -1625,6 +1666,8 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n         ShowProgress(_(\"Rescanning...\"), 100); // hide progress dialog in GUI\n \n         fScanningWallet = false;\n+\n+        m_last_block_processed = chainActive.Tip();",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 78,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This will be set incorrectly if the rescan was aborted.",
      "created_at": "2017-10-11T19:05:13Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144106726",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144106726"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1670,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144110386",
      "pull_request_review_id": 68693050,
      "id": 144110386,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDExMDM4Ng==",
      "diff_hunk": "@@ -917,14 +919,19 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n         );\n \n     ObserveSafeMode();\n+\n+    CTransactionRef tx;\n+    std::promise<void> promise;\n+\n+    { // cs_main scope",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can you move this cs_main scope further down (to avoid having to declare the `CTransactionRef` above and then recompute the `GetHash()` at the end of this function?",
      "created_at": "2017-10-11T19:21:02Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144110386",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144110386"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 926,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144412181",
      "pull_request_review_id": 69067247,
      "id": 144412181,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDQxMjE4MQ==",
      "diff_hunk": "@@ -1625,6 +1666,8 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n         ShowProgress(_(\"Rescanning...\"), 100); // hide progress dialog in GUI\n \n         fScanningWallet = false;\n+\n+        m_last_block_processed = chainActive.Tip();",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 78,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144106726,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I just removed this and set it to chainActive.Tip() in CreateWalletFromFile. It doesnt make sense to try to use this to block wallet until we're caught up with the current tip in reorg, it isnt a regression so we should just leave it. When/if we expose last_block_processed via RPC (and allow wallet to return data that is stale) we should change that, I suppose.",
      "created_at": "2017-10-12T21:17:00Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144412181",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144412181"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1670,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144598619",
      "pull_request_review_id": 69280726,
      "id": 144598619,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDU5ODYxOQ==",
      "diff_hunk": "@@ -85,32 +97,57 @@ void UnregisterAllValidationInterfaces() {\n     g_signals.m_internals->TransactionAddedToMempool.disconnect_all_slots();\n     g_signals.m_internals->BlockConnected.disconnect_all_slots();\n     g_signals.m_internals->BlockDisconnected.disconnect_all_slots();\n+    g_signals.m_internals->TransactionRemovedFromMempool.disconnect_all_slots();\n     g_signals.m_internals->UpdatedBlockTip.disconnect_all_slots();\n     g_signals.m_internals->NewPoWValidBlock.disconnect_all_slots();\n }\n \n+void CallFunctionInValidationInterfaceQueue(std::function<void ()> func) {\n+    g_signals.m_internals->m_schedulerClient.AddToProcessQueue(std::move(func));\n+}\n+\n+void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {",
      "path": "src/validationinterface.cpp",
      "position": 60,
      "original_position": 60,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144105398,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "For symmetry with TransactionAddedToMempool. I'd rather rename the MempoolEntryRemoved signal in CTxMempool isntead, but, really, I cant say I have hugely strong feelings. Considering I have a PR lined up after this one to rework some of the mempool parts of this interface, maybe lets leave that for the next PR?",
      "created_at": "2017-10-13T16:22:20Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144598619",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144598619"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 111,
      "original_line": 111,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144599372",
      "pull_request_review_id": 69281604,
      "id": 144599372,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDU5OTM3Mg==",
      "diff_hunk": "@@ -85,32 +97,57 @@ void UnregisterAllValidationInterfaces() {\n     g_signals.m_internals->TransactionAddedToMempool.disconnect_all_slots();\n     g_signals.m_internals->BlockConnected.disconnect_all_slots();\n     g_signals.m_internals->BlockDisconnected.disconnect_all_slots();\n+    g_signals.m_internals->TransactionRemovedFromMempool.disconnect_all_slots();\n     g_signals.m_internals->UpdatedBlockTip.disconnect_all_slots();\n     g_signals.m_internals->NewPoWValidBlock.disconnect_all_slots();\n }\n \n+void CallFunctionInValidationInterfaceQueue(std::function<void ()> func) {\n+    g_signals.m_internals->m_schedulerClient.AddToProcessQueue(std::move(func));\n+}\n+\n+void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {\n+    if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n+        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+            m_internals->TransactionRemovedFromMempool(ptx);\n+        });\n+    }\n+}\n+\n void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) {\n-    m_internals->UpdatedBlockTip(pindexNew, pindexFork, fInitialDownload);\n+    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {",
      "path": "src/validationinterface.cpp",
      "position": 70,
      "original_position": 70,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144103454,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I believe this to be fine. nTimeBestReceived is passed to wallet as the first parameter to ResendWalletTransactions, and is effectively just called on a loop to resend wallet transactions when we need to. If it gets called with an nTimeBestReceived that is further back than we are, that should be fine, it just won't rebroadcast until the next time its called.",
      "created_at": "2017-10-13T16:25:39Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144599372",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144599372"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 120,
      "original_line": 120,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144599889",
      "pull_request_review_id": 69282279,
      "id": 144599889,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDU5OTg4OQ==",
      "diff_hunk": "@@ -722,6 +725,14 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n \n     std::unique_ptr<CWalletDBWrapper> dbw;\n \n+    /**\n+     * The following is used to keep track of how far behind the wallet is\n+     * from the chain sync, and to allow clients to block on us being caught up\n+     *\n+     * Protected by cs_main",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 43,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144105572,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The code in BlockUntilSyncedToCurrentChain accesses this in a place that's going to need cs_main anyway (for chainActive.Tip()), could add a cs_wallet and call it protected by cs_wallet, but that just means an extra lock in BlockUntilSyncedToCurrentChain.",
      "created_at": "2017-10-13T16:28:16Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144599889",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144599889"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 732,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144600180",
      "pull_request_review_id": 69282654,
      "id": 144600180,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDYwMDE4MA==",
      "diff_hunk": "@@ -722,6 +725,14 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n \n     std::unique_ptr<CWalletDBWrapper> dbw;\n \n+    /**\n+     * The following is used to keep track of how far behind the wallet is\n+     * from the chain sync, and to allow clients to block on us being caught up\n+     *\n+     * Protected by cs_main",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 43,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144105572,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I added comments to explain this.",
      "created_at": "2017-10-13T16:29:48Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144600180",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144600180"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 732,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144600758",
      "pull_request_review_id": 69283324,
      "id": 144600758,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDYwMDc1OA==",
      "diff_hunk": "@@ -917,14 +919,19 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n         );\n \n     ObserveSafeMode();\n+\n+    CTransactionRef tx;\n+    std::promise<void> promise;\n+\n+    { // cs_main scope",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144110386,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "CTransactionRef->GetHash() is (virtually) free because we cache the hash in the CTransaction. Honestly we should probably just go the other way and remove the hashTx local. Additionally, if I'm correctly understanding your request, that would result in a deadlock as the validation interface queue may not be able to make progress as long as cs_main is held in the RPC thread. I've added a comment to validationinterface.h above CallFunctionInValidationInterfaceQueue to this effect.",
      "created_at": "2017-10-13T16:32:26Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144600758",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144600758"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 926,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144632370",
      "pull_request_review_id": 69320320,
      "id": 144632370,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDYzMjM3MA==",
      "diff_hunk": "@@ -85,32 +97,57 @@ void UnregisterAllValidationInterfaces() {\n     g_signals.m_internals->TransactionAddedToMempool.disconnect_all_slots();\n     g_signals.m_internals->BlockConnected.disconnect_all_slots();\n     g_signals.m_internals->BlockDisconnected.disconnect_all_slots();\n+    g_signals.m_internals->TransactionRemovedFromMempool.disconnect_all_slots();\n     g_signals.m_internals->UpdatedBlockTip.disconnect_all_slots();\n     g_signals.m_internals->NewPoWValidBlock.disconnect_all_slots();\n }\n \n+void CallFunctionInValidationInterfaceQueue(std::function<void ()> func) {\n+    g_signals.m_internals->m_schedulerClient.AddToProcessQueue(std::move(func));\n+}\n+\n+void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {\n+    if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n+        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+            m_internals->TransactionRemovedFromMempool(ptx);\n+        });\n+    }\n+}\n+\n void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) {\n-    m_internals->UpdatedBlockTip(pindexNew, pindexFork, fInitialDownload);\n+    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {",
      "path": "src/validationinterface.cpp",
      "position": 70,
      "original_position": 70,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144103454,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yep, sounds good. I *thought* this was ok, but I wasn't certain and wanted to check.",
      "created_at": "2017-10-13T18:55:03Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144632370",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144632370"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 120,
      "original_line": 120,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144632691",
      "pull_request_review_id": 69320696,
      "id": 144632691,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDYzMjY5MQ==",
      "diff_hunk": "@@ -1244,6 +1262,29 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);\n+\n+    {\n+        // Skip the queue-draining stuff if we know we're caught up with\n+        // chainActive.Tip()\n+        LOCK(cs_main);\n+        const CBlockIndex* initialChainTip = chainActive.Tip();\n+\n+        if (m_last_block_processed->GetAncestor(initialChainTip->nHeight) == initialChainTip) {\n+            return;\n+        }\n+    }\n+\n+    std::promise<void> promise;\n+    CallFunctionInValidationInterfaceQueue([&promise] {",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 63,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144085266,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "New comment looks good. Thanks.",
      "created_at": "2017-10-13T18:56:35Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144632691",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144632691"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1288,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144632826",
      "pull_request_review_id": 69320846,
      "id": 144632826,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDYzMjgyNg==",
      "diff_hunk": "@@ -917,14 +919,19 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n         );\n \n     ObserveSafeMode();\n+\n+    CTransactionRef tx;\n+    std::promise<void> promise;\n+\n+    { // cs_main scope",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144110386,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Misunderstood your point, moved the scope *start* down.",
      "created_at": "2017-10-13T18:57:14Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144632826",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144632826"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 926,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144633506",
      "pull_request_review_id": 69321684,
      "id": 144633506,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDYzMzUwNg==",
      "diff_hunk": "@@ -1625,6 +1666,8 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n         ShowProgress(_(\"Rescanning...\"), 100); // hide progress dialog in GUI\n \n         fScanningWallet = false;\n+\n+        m_last_block_processed = chainActive.Tip();",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 78,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144106726,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes - I agree. `m_last_block_processed` would be a really nice value to expose in the `getwalletinfo` RPC.\r\n\r\nI have a weak preference to make `m_last_block_processed` work as you'd expect (tracking the last block processed by the wallet), but this PR is already doing a lot, so I think it's also fine to keep this as is. Please update the comment in wallet.h to say that it's not actually tracking how far the wallet is behind chain sync and shouldn't be publicly exposed until that's changed.",
      "created_at": "2017-10-13T19:00:38Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144633506",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144633506"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1670,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144633936",
      "pull_request_review_id": 69322173,
      "id": 144633936,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDYzMzkzNg==",
      "diff_hunk": "@@ -917,14 +919,19 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n         );\n \n     ObserveSafeMode();\n+\n+    CTransactionRef tx;\n+    std::promise<void> promise;\n+\n+    { // cs_main scope",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144110386,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, sorry - my comment was unclear.\r\n\r\nChange looks good.",
      "created_at": "2017-10-13T19:02:47Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144633936",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144633936"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 926,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144639185",
      "pull_request_review_id": 69328492,
      "id": 144639185,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDYzOTE4NQ==",
      "diff_hunk": "@@ -1625,6 +1666,8 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n         ShowProgress(_(\"Rescanning...\"), 100); // hide progress dialog in GUI\n \n         fScanningWallet = false;\n+\n+        m_last_block_processed = chainActive.Tip();",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 78,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "ac204f8f87bbc761a4e682c084838a6f47349bae",
      "in_reply_to_id": 144106726,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "OK, added more info to the wallet.h comment.",
      "created_at": "2017-10-13T19:29:47Z",
      "updated_at": "2017-10-13T23:30:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r144639185",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144639185"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1670,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151225387",
      "pull_request_review_id": 76899069,
      "id": 151225387,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MTIyNTM4Nw==",
      "diff_hunk": "@@ -1244,6 +1247,36 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);\n+\n+    {\n+        // Skip the queue-draining stuff if we know we're caught up with\n+        // chainActive.Tip()...\n+        // We could also take cs_wallet here, and call m_last_block_processed\n+        // protected by cs_wallet instead of cs_main, but as long as we need\n+        // cs_main here anyway, its easier to just call it cs_main-protected.\n+        LOCK(cs_main);\n+        const CBlockIndex* initialChainTip = chainActive.Tip();\n+\n+        if (m_last_block_processed->GetAncestor(initialChainTip->nHeight) == initialChainTip) {\n+            return;\n+        }\n+    }\n+\n+    // ...otherwise put a callback in the validation interface queue and wait\n+    // for the queue to drain enough to execute it (indicating we are caught up\n+    // at least with the time we entered this function).\n+\n+    std::promise<void> promise;\n+    CallFunctionInValidationInterfaceQueue([&promise] {\n+        promise.set_value();\n+    });\n+    promise.get_future().wait();",
      "path": "src/wallet/wallet.cpp",
      "position": 73,
      "original_position": 47,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "5ee31726360cbe343f5a1a50a5e440db736da5b7",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Isn't the scheduler queue abandoned at shutdown? What keeps this from blocking forever if timed just right?",
      "created_at": "2017-11-15T19:18:42Z",
      "updated_at": "2017-11-15T19:18:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r151225387",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151225387"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1291,
      "original_line": 1276,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151226679",
      "pull_request_review_id": 76900570,
      "id": 151226679,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MTIyNjY3OQ==",
      "diff_hunk": "@@ -3913,6 +3944,10 @@ CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)\n         if (walletdb.ReadBestBlock(locator))\n             pindexRescan = FindForkInGlobalIndex(chainActive, locator);\n     }\n+\n+    walletInstance->m_last_block_processed = chainActive.Tip();",
      "path": "src/wallet/wallet.cpp",
      "position": 125,
      "original_position": 68,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "5ee31726360cbe343f5a1a50a5e440db736da5b7",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Doesn't this entire function need cs_main ?",
      "created_at": "2017-11-15T19:23:27Z",
      "updated_at": "2017-11-15T19:23:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r151226679",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151226679"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3966,
      "original_line": 3948,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151246516",
      "pull_request_review_id": 76924029,
      "id": 151246516,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MTI0NjUxNg==",
      "diff_hunk": "@@ -3010,14 +3024,18 @@ bool CWallet::CommitTransaction(CWalletTx& wtxNew, CReserveKey& reservekey, CCon\n         // Track how many getdata requests our transaction gets\n         mapRequestCount[wtxNew.GetHash()] = 0;\n \n+        // Get the inserted-CWalletTx from mapWallet so that the\n+        // fInMempool flag is cached properly\n+        CWalletTx& wtx = mapWallet[wtxNew.GetHash()];",
      "path": "src/wallet/wallet.cpp",
      "position": 96,
      "original_position": 48,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "17220d6325ef8d7789373055586e4332977077b0",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Somewhat unrelated nit: AddToWallet's return value should be checked before using it here, but that was already the case.",
      "created_at": "2017-11-15T20:45:17Z",
      "updated_at": "2017-11-15T20:45:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r151246516",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151246516"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3029,
      "original_line": 3029,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151253216",
      "pull_request_review_id": 76931942,
      "id": 151253216,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MTI1MzIxNg==",
      "diff_hunk": "@@ -881,19 +887,34 @@ UniValue sendrawtransaction(const JSONRPCRequest& request)\n                 }\n                 throw JSONRPCError(RPC_TRANSACTION_ERROR, state.GetRejectReason());\n             }\n+        } else {\n+            // If wallet is enabled, ensure that the wallet has been made aware\n+            // of the new transaction prior to returning. This prevents a race\n+            // where a user might call sendrawtransaction with a transaction\n+            // to/from their wallet, immediately call some wallet RPC, and get\n+            // a stale result because callbacks have not yet been processed.\n+            CallFunctionInValidationInterfaceQueue([&promise] {\n+                promise.set_value();\n+            });\n         }\n     } else if (fHaveChain) {\n         throw JSONRPCError(RPC_TRANSACTION_ALREADY_IN_CHAIN, \"transaction already in block chain\");\n     }\n+\n+    } // cs_main\n+\n+    promise.get_future().wait();",
      "path": "src/rpc/rawtransaction.cpp",
      "position": 56,
      "original_position": 65,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "a40c312e6bb9df2cc25249982ce70c472b9fad79",
      "in_reply_to_id": 123575981,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Without net/connman, I'd expect this RPC to fail immediately anyway.",
      "created_at": "2017-11-15T21:14:06Z",
      "updated_at": "2017-11-15T21:14:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r151253216",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151253216"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 977,
      "original_line": 977,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151270146",
      "pull_request_review_id": 76951625,
      "id": 151270146,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MTI3MDE0Ng==",
      "diff_hunk": "@@ -1244,6 +1247,36 @@ void CWallet::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) {\n \n \n \n+void CWallet::BlockUntilSyncedToCurrentChain() {\n+    AssertLockNotHeld(cs_main);\n+    AssertLockNotHeld(cs_wallet);\n+\n+    {\n+        // Skip the queue-draining stuff if we know we're caught up with\n+        // chainActive.Tip()...\n+        // We could also take cs_wallet here, and call m_last_block_processed\n+        // protected by cs_wallet instead of cs_main, but as long as we need\n+        // cs_main here anyway, its easier to just call it cs_main-protected.\n+        LOCK(cs_main);\n+        const CBlockIndex* initialChainTip = chainActive.Tip();\n+\n+        if (m_last_block_processed->GetAncestor(initialChainTip->nHeight) == initialChainTip) {\n+            return;\n+        }\n+    }\n+\n+    // ...otherwise put a callback in the validation interface queue and wait\n+    // for the queue to drain enough to execute it (indicating we are caught up\n+    // at least with the time we entered this function).\n+\n+    std::promise<void> promise;\n+    CallFunctionInValidationInterfaceQueue([&promise] {\n+        promise.set_value();\n+    });\n+    promise.get_future().wait();",
      "path": "src/wallet/wallet.cpp",
      "position": 73,
      "original_position": 47,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "5ee31726360cbe343f5a1a50a5e440db736da5b7",
      "in_reply_to_id": 151225387,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No, init.cpp calls CMainSignals().FlushBackgroundCallbacks() which will empty the CValidationInterfaceQueue. The scheduler itself is abandoned, but we shouldn't generate any new notifications by that point.",
      "created_at": "2017-11-15T22:23:24Z",
      "updated_at": "2017-11-15T22:23:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r151270146",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151270146"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1291,
      "original_line": 1276,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151270681",
      "pull_request_review_id": 76952287,
      "id": 151270681,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MTI3MDY4MQ==",
      "diff_hunk": "@@ -3913,6 +3944,10 @@ CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)\n         if (walletdb.ReadBestBlock(locator))\n             pindexRescan = FindForkInGlobalIndex(chainActive, locator);\n     }\n+\n+    walletInstance->m_last_block_processed = chainActive.Tip();",
      "path": "src/wallet/wallet.cpp",
      "position": 125,
      "original_position": 68,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "5ee31726360cbe343f5a1a50a5e440db736da5b7",
      "in_reply_to_id": 151226679,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It would appear so (though that isn't introduced here)....I'll let @practicalswift take a look since that appears to be his project atm.",
      "created_at": "2017-11-15T22:25:51Z",
      "updated_at": "2017-11-15T22:25:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r151270681",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151270681"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3966,
      "original_line": 3948,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151270910",
      "pull_request_review_id": 76952559,
      "id": 151270910,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MTI3MDkxMA==",
      "diff_hunk": "@@ -3010,14 +3024,18 @@ bool CWallet::CommitTransaction(CWalletTx& wtxNew, CReserveKey& reservekey, CCon\n         // Track how many getdata requests our transaction gets\n         mapRequestCount[wtxNew.GetHash()] = 0;\n \n+        // Get the inserted-CWalletTx from mapWallet so that the\n+        // fInMempool flag is cached properly\n+        CWalletTx& wtx = mapWallet[wtxNew.GetHash()];",
      "path": "src/wallet/wallet.cpp",
      "position": 96,
      "original_position": 48,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "17220d6325ef8d7789373055586e4332977077b0",
      "in_reply_to_id": 151246516,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Indeed, though in such cases not much we can do - bdb got upset, we're probably just going to shutdown soon anyway.",
      "created_at": "2017-11-15T22:26:55Z",
      "updated_at": "2017-11-15T22:26:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r151270910",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151270910"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3029,
      "original_line": 3029,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151348446",
      "pull_request_review_id": 77040434,
      "id": 151348446,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MTM0ODQ0Ng==",
      "diff_hunk": "@@ -3913,6 +3944,10 @@ CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)\n         if (walletdb.ReadBestBlock(locator))\n             pindexRescan = FindForkInGlobalIndex(chainActive, locator);\n     }\n+\n+    walletInstance->m_last_block_processed = chainActive.Tip();",
      "path": "src/wallet/wallet.cpp",
      "position": 125,
      "original_position": 68,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "5ee31726360cbe343f5a1a50a5e440db736da5b7",
      "in_reply_to_id": 151226679,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, according to my annotations (#11226) calling `CreateWalletFromFile` requires holding `cs_main`:\r\n\r\n```\r\nsrc/wallet/wallet.h:    static CWallet* CreateWalletFromFile(const std::string walletFile)\r\n                            EXCLUSIVE_LOCKS_REQUIRED(cs_main);\r\n```\r\n\r\nThis is due to the following underlying locking requirements:\r\n* `CreateWalletFromFile` is reading the variable `chainActive` which requires holding the mutex `cs_main`.\r\n* `CreateWalletFromFile` calls `FindForkInGlobalIndex` which reads the variable `mapBlockIndex`. Reading the variable `mapBlockIndex` requires holding the mutex `cs_main`.\r\n\r\n",
      "created_at": "2017-11-16T08:42:01Z",
      "updated_at": "2017-11-16T08:42:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r151348446",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151348446"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3966,
      "original_line": 3948,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152061507",
      "pull_request_review_id": 77865402,
      "id": 152061507,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MjA2MTUwNw==",
      "diff_hunk": "@@ -265,6 +265,7 @@ void Shutdown()\n #endif\n     UnregisterAllValidationInterfaces();\n     GetMainSignals().UnregisterBackgroundSignalScheduler();\n+    GetMainSignals().UnregisterWithMempoolSignals(mempool);",
      "path": "src/init.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "a7d3936de8418522dbb161bfef31c234fc6c2503",
      "in_reply_to_id": null,
      "user": {
        "login": "morcos",
        "id": 4360349,
        "node_id": "MDQ6VXNlcjQzNjAzNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4360349?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/morcos",
        "html_url": "https://github.com/morcos",
        "followers_url": "https://api.github.com/users/morcos/followers",
        "following_url": "https://api.github.com/users/morcos/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/morcos/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/morcos/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
        "organizations_url": "https://api.github.com/users/morcos/orgs",
        "repos_url": "https://api.github.com/users/morcos/repos",
        "events_url": "https://api.github.com/users/morcos/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/morcos/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@TheBlueMatt Shouldn't this line be before the `UnregisterBackgroundSignalScheduler`?",
      "created_at": "2017-11-20T17:43:52Z",
      "updated_at": "2017-11-20T17:43:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r152061507",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152061507"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 268,
      "original_line": 268,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152100867",
      "pull_request_review_id": 77911012,
      "id": 152100867,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1MjEwMDg2Nw==",
      "diff_hunk": "@@ -265,6 +265,7 @@ void Shutdown()\n #endif\n     UnregisterAllValidationInterfaces();\n     GetMainSignals().UnregisterBackgroundSignalScheduler();\n+    GetMainSignals().UnregisterWithMempoolSignals(mempool);",
      "path": "src/init.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "89f03120a02690cff8399d77c979169355bf9cae",
      "original_commit_id": "a7d3936de8418522dbb161bfef31c234fc6c2503",
      "in_reply_to_id": 152061507,
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I suppose it would be more correct, yes, though I do not believe this is a bug - mempool should absolutely, absolutely not be generating any events by this point, so if it does (which I believe would result in an assert(false) or so) it would represent some other shutdown-order bug.",
      "created_at": "2017-11-20T20:22:14Z",
      "updated_at": "2017-11-20T20:22:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/10286#discussion_r152100867",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/152100867"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10286"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 268,
      "original_line": 268,
      "side": "RIGHT"
    }
  ]
}