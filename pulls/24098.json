{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098",
    "id": 825876743,
    "node_id": "PR_kwDOABII584xOeEH",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/24098",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/24098.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/24098.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/54b39cfb342d10a448d49299c715e3a25c2aca4a",
    "number": 24098,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "rest: Use query parameters to control resource loading",
    "user": {
      "login": "stickies-v",
      "id": 69010457,
      "node_id": "MDQ6VXNlcjY5MDEwNDU3",
      "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stickies-v",
      "html_url": "https://github.com/stickies-v",
      "followers_url": "https://api.github.com/users/stickies-v/followers",
      "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
      "organizations_url": "https://api.github.com/users/stickies-v/orgs",
      "repos_url": "https://api.github.com/users/stickies-v/repos",
      "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/stickies-v/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In RESTful APIs, [typically](https://rapidapi.com/blog/api-glossary/parameters/query/) path parameters  (e.g. `/some/unique/resource/`) are used to represent resources, and query parameters (e.g. `?sort=asc`) are used to control how these resources are being loaded through e.g. sorting, pagination, filtering, ...\r\n\r\nAs first [discussed in #17631](https://github.com/bitcoin/bitcoin/pull/17631#discussion_r733031180), the [current REST api](https://github.com/bitcoin/bitcoin/blob/master/doc/REST-interface.md) contains two endpoints `/headers/` and `/blockfilterheaders/` that rather unexpectedly use path parameters to control how many (filter) headers are returned in the response. While this is no critical issue, it is unintuitive and we are still early enough to easily phase this behaviour out and ensure new endpoints (if any) do not have to stick to non-standard behaviour just for internal consistency.\r\n\r\nIn this PR, a new `HTTPRequest::GetQueryParameter` method is introduced to easily parse query parameters, as well as two new `/headers/` and `/blockfilterheaders/` endpoints that use a count query parameter are introduced. The old path parameter-based endpoints are kept without too much overhead, but the documentation now points to the new query parameter-based endpoints as the default interface to encourage standardness.\r\n\r\n## Behaviour change\r\n### New endpoints and default values\r\n`/headers/` and `/blockfilterheaders/` now have 2 new endpoints that contain query parameters (`?count=<count>`) instead of path parameters (`/<count>/`), as described in REST-interface.md. Since query parameters can easily have default values, I have set this at 5 for both endpoints.\r\n\r\n**headers**\r\n`GET /rest/headers/<BLOCK-HASH>.<bin|hex|json>?count=<COUNT=5>`\r\nshould now be used instead of\r\n`GET /rest/headers/<COUNT>/<BLOCK-HASH>.<bin|hex|json>`\r\n\r\n**blockfilterheaders**\r\n`GET /rest/blockfilterheaders/<FILTERTYPE>/<BLOCK-HASH>.<bin|hex|json>?count=<COUNT=5>`\r\nshould now be used instead of\r\n`GET /rest/blockfilterheaders/<FILTERTYPE>/<COUNT>/<BLOCK-HASH>.<bin|hex|json>`\r\n\r\n### Some previously invalid API calls are now valid\r\nAPI calls that contained query strings in the URI could not be parsed prior to this PR. This PR changes behaviour in that previously invalid calls (e.g. `GET /rest/headers/5/somehash.json?someunusedparam=foo`) would now become valid, as the query parameters are properly parsed, and discarded if unused. \r\nFor example, prior to this PR, adding an irrelevant `someparam` parameter would be illegal:\r\n```\r\nGET /rest/headers/5/0000004c6aad0c89c1c060e8e116dcd849e0554935cd78ff9c6a398abeac6eda.json?someparam=true\r\n->\r\nInvalid hash: 0000004c6aad0c89c1c060e8e116dcd849e0554935cd78ff9c6a398abeac6eda.json?someparam=true\r\n```\r\n**This behaviour change affects all rest endpoints, not just the 2 new ones introduced here.**\r\n\r\n*(Note: I'd be open to implementing additional logic to refuse requests containing unrecognized query parameters to minimize behaviour change, but for the endpoints that we currently have I don't really see the point for that added complexity. E.g. I don't see any scenarios where misspelling a parameter could lead to harmful outcomes)*\r\n\r\n## Using the REST API\r\n\r\nTo run the API HTTP server, start a bitcoind instance with the `-rest` flag enabled. To use the\r\n`blockfilterheaders` endpoint, you'll also need to set `-blockfilterindex=1`: \r\n```\r\n./bitcoind -signet -rest -blockfilterindex=1\r\n```\r\n\r\nAs soon as bitcoind is fully up and running, you should be able to query the API, for example by\r\nusing curl on the command line: ```curl \"127.0.0.1:38332/rest/chaininfo.json\"```. \r\nTo more easily parse the JSON output, you can also use tools like 'jq' or `json_pp`, e.g.:\r\n```\r\ncurl -s \"localhost:38332/rest/blockfilterheaders/basic/0000004c6aad0c89c1c060e8e116dcd849e0554935cd78ff9c6a398abeac6eda.json?count=2\" | json_pp .\r\n```\r\n\r\n## To do\r\n- [x] update `doc/release-notes`\r\n\r\n## Feedback\r\nThis is my first PR (hooray!). Please don't hold back on any feedback/comments/nits/... you may have, big or small, whether they are code, process, language, ... related. I welcome private messages too if there's anything you don't want to clutter the PR with. I'm here to learn and am grateful for everyone's input.\r\n",
    "labels": [
      {
        "id": 61889416,
        "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
        "name": "Build system",
        "color": "5319e7",
        "default": false
      },
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "created_at": "2022-01-18T21:06:55Z",
    "updated_at": "2022-07-31T04:43:49Z",
    "closed_at": "2022-04-06T07:28:12Z",
    "mergeable_state": "unknown",
    "merged_at": "2022-04-06T07:28:12Z",
    "merge_commit_sha": "27cfaeed1ea975f52c2307153f7295d43bc84b64",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "head": {
      "label": "stickies-v:rest/use-query-parameters",
      "ref": "rest/use-query-parameters",
      "sha": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 431644530,
        "node_id": "R_kgDOGbpfcg",
        "name": "bitcoin",
        "full_name": "stickies-v/bitcoin",
        "owner": {
          "login": "stickies-v",
          "id": 69010457,
          "node_id": "MDQ6VXNlcjY5MDEwNDU3",
          "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/stickies-v",
          "html_url": "https://github.com/stickies-v",
          "followers_url": "https://api.github.com/users/stickies-v/followers",
          "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
          "organizations_url": "https://api.github.com/users/stickies-v/orgs",
          "repos_url": "https://api.github.com/users/stickies-v/repos",
          "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/stickies-v/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/stickies-v/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/stickies-v/bitcoin",
        "archive_url": "https://api.github.com/repos/stickies-v/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/stickies-v/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/stickies-v/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/stickies-v/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/stickies-v/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/stickies-v/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/stickies-v/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/stickies-v/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/stickies-v/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/stickies-v/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/stickies-v/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/stickies-v/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/stickies-v/bitcoin/events",
        "forks_url": "https://api.github.com/repos/stickies-v/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/stickies-v/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/stickies-v/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/stickies-v/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/stickies-v/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/stickies-v/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/stickies-v/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/stickies-v/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/stickies-v/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/stickies-v/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/stickies-v/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/stickies-v/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/stickies-v/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/stickies-v/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/stickies-v/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/stickies-v/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:stickies-v/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/stickies-v/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/stickies-v/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/stickies-v/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/stickies-v/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/stickies-v/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/stickies-v/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/stickies-v/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/stickies-v/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/stickies-v/bitcoin/hooks",
        "svn_url": "https://github.com/stickies-v/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 228665,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-02T15:19:16Z",
        "created_at": "2021-11-24T22:26:41Z",
        "updated_at": "2022-09-01T14:40:19Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "9ce1c506a3a5d20b1bf254235bfae48af592d86c",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69819,
        "watchers_count": 69819,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-07T05:35:10Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T04:47:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 333,
    "deletions": 95,
    "changed_files": 11,
    "commits": 6,
    "review_comments": 65,
    "comments": 21
  },
  "events": [
    {
      "event": "head_ref_force_pushed",
      "id": 5913400215,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFgd1OX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5913400215",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-18T21:11:52Z"
    },
    {
      "event": "labeled",
      "id": 5913597896,
      "node_id": "LE_lADOABII585CAQMQzwAAAAFgelfI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5913597896",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-18T21:50:15Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "labeled",
      "id": 5913597897,
      "node_id": "LE_lADOABII585CAQMQzwAAAAFgelfJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5913597897",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-18T21:50:15Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 1016106985,
      "node_id": "IC_kwDOABII5848kI_p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016106985",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T05:48:35Z",
      "updated_at": "2022-04-05T17:46:16Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24456](https://github.com/bitcoin/bitcoin/pull/24456) (blockman: Properly guard blockfile members by dongcarl)\n* [#23599](https://github.com/bitcoin/bitcoin/pull/23599) (Tidy up RPCTxSerializationFlags by MarcoFalke)\n* [#23507](https://github.com/bitcoin/bitcoin/pull/23507) (Refactor: Improve API design of `ScriptToUniv`, `TxToUniv` etc to return the `UniValue` instead of mutating a parameter/reference by mjdietzx)\n* [#22953](https://github.com/bitcoin/bitcoin/pull/22953) (refactor: introduce single-separator split helper (boost::split replacement) by theStack)\n* [#22564](https://github.com/bitcoin/bitcoin/pull/22564) (refactor: Move mutable globals cleared in `::UnloadBlockIndex` to `BlockManager` by dongcarl)\n* [#21422](https://github.com/bitcoin/bitcoin/pull/21422) (Add feerate histogram to getmempoolinfo by kiminuo)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1016106985",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "labeled",
      "id": 5915927882,
      "node_id": "LE_lADOABII585CAQMQzwAAAAFgneVK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5915927882",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T08:40:41Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5916589606,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFgp_4m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5916589606",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T10:27:05Z"
    },
    {
      "event": "commented",
      "id": 1016296840,
      "node_id": "IC_kwDOABII5848k3WI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016296840",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T10:29:27Z",
      "updated_at": "2022-01-19T10:29:27Z",
      "author_association": "MEMBER",
      "body": "Force pushed to rebase after #24054 was merged; no other changes.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1016296840",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "unlabeled",
      "id": 5916707724,
      "node_id": "UNLE_lADOABII585CAQMQzwAAAAFgqcuM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5916707724",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T10:45:47Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 856654746,
      "node_id": "PRR_kwDOABII584zD4Oa",
      "url": null,
      "actor": null,
      "commit_id": "f861b6df054f5ebfe7a86d4b453ff95dabf3e178",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\nTested ?count=1, ?count=5 and ?count=600 (didn't paste here the result of it, obviously haha) for /rest/headers/\r\n```\r\nhttp://127.0.0.1:8332/rest/headers/000000001aeae195809d120b5d66a39c83eb48792e068f8ea1fea19d84a4278a.json?count=1\r\n\r\n[{\"hash\":\"000000001aeae195809d120b5d66a39c83eb48792e068f8ea1fea19d84a4278a\",\"confirmations\":237003,\"height\":50000,\"version\":1,\"versionHex\":\"00000001\",\"merkleroot\":\"27f1d66f8a1ee5280f4e92508dcb647e954d53004905d08a75574daee4988360\",\"time\":1270916538,\"mediantime\":1270915355,\"nonce\":58489010,\"bits\":\"1c2a1115\",\"difficulty\":6.085476906000794,\"chainwork\":\"00000000000000000000000000000000000000000000000000014a426593e15b\",\"nTx\":1,\"previousblockhash\":\"000000000845517b31c6820d83f25cff46429bf136a7515fe504116427e60f8e\",\"nextblockhash\":\"000000001c920d495e1eeef2452b6d1c6c229a919b28196c103ecffebabee141\"}]\r\n\r\nhttp://127.0.0.1:8332/rest/headers/000000001aeae195809d120b5d66a39c83eb48792e068f8ea1fea19d84a4278a.json?count=5\r\n\r\n[{\"hash\":\"000000001aeae195809d120b5d66a39c83eb48792e068f8ea1fea19d84a4278a\",\"confirmations\":240714,\"height\":50000,\"version\":1,\"versionHex\":\"00000001\",\"merkleroot\":\"27f1d66f8a1ee5280f4e92508dcb647e954d53004905d08a75574daee4988360\",\"time\":1270916538,\"mediantime\":1270915355,\"nonce\":58489010,\"bits\":\"1c2a1115\",\"difficulty\":6.085476906000794,\"chainwork\":\"00000000000000000000000000000000000000000000000000014a426593e15b\",\"nTx\":1,\"previousblockhash\":\"000000000845517b31c6820d83f25cff46429bf136a7515fe504116427e60f8e\",\"nextblockhash\":\"000000001c920d495e1eeef2452b6d1c6c229a919b28196c103ecffebabee141\"},{\"hash\":\"000000001c920d495e1eeef2452b6d1c6c229a919b28196c103ecffebabee141\",\"confirmations\":240713,\"height\":50001,\"version\":1,\"versionHex\":\"00000001\",\"merkleroot\":\"ee3a2d2b895cafacff526d06a55b55e049cf84a9735e4a63f7fd08f96d0f4649\",\"time\":1270917100,\"mediantime\":1270915522,\"nonce\":56717043,\"bits\":\"1c2a1115\",\"difficulty\":6.085476906000794,\"chainwork\":\"00000000000000000000000000000000000000000000000000014a487b7bc7c6\",\"nTx\":3,\"previousblockhash\":\"000000001aeae195809d120b5d66a39c83eb48792e068f8ea1fea19d84a4278a\",\"nextblockhash\":\"000000002066d7f9b134c30b5005b7bf5fbfa52f279883f1fde793dcdc964266\"},{\"hash\":\"000000002066d7f9b134c30b5005b7bf5fbfa52f279883f1fde793dcdc964266\",\"confirmations\":240712,\"height\":50002,\"version\":1,\"versionHex\":\"00000001\",\"merkleroot\":\"5164dc2785549f9efe14eb1c54522ec1874a02b7eda164fde370c05412f037ad\",\"time\":1270917181,\"mediantime\":1270915874,\"nonce\":9804838,\"bits\":\"1c2a1115\",\"difficulty\":6.085476906000794,\"chainwork\":\"00000000000000000000000000000000000000000000000000014a4e9163ae31\",\"nTx\":1,\"previousblockhash\":\"000000001c920d495e1eeef2452b6d1c6c229a919b28196c103ecffebabee141\",\"nextblockhash\":\"00000000237ce1b692f5ef9f1f9ac64d62d5e6a24dcfec08633fa2d339434e2a\"},{\"hash\":\"00000000237ce1b692f5ef9f1f9ac64d62d5e6a24dcfec08633fa2d339434e2a\",\"confirmations\":240711,\"height\":50003,\"version\":1,\"versionHex\":\"00000001\",\"merkleroot\":\"792c4a613e51966fc1c852cd8d94fd10a05efa55fffdd6a41281c8d139540b23\",\"time\":1270917916,\"mediantime\":1270916181,\"nonce\":311792473,\"bits\":\"1c2a1115\",\"difficulty\":6.085476906000794,\"chainwork\":\"00000000000000000000000000000000000000000000000000014a54a74b949c\",\"nTx\":1,\"previousblockhash\":\"000000002066d7f9b134c30b5005b7bf5fbfa52f279883f1fde793dcdc964266\",\"nextblockhash\":\"000000000528e8aac90e3096abb7b1f3d52efa2cd8f12754614788cb43eefe11\"},{\"hash\":\"000000000528e8aac90e3096abb7b1f3d52efa2cd8f12754614788cb43eefe11\",\"confirmations\":240710,\"height\":50004,\"version\":1,\"versionHex\":\"00000001\",\"merkleroot\":\"3cfbd9a91f033e37f05764215626c542c735ed71cd5b53467834cf881c0b9ebd\",\"time\":1270918264,\"mediantime\":1270916354,\"nonce\":78553962,\"bits\":\"1c2a1115\",\"difficulty\":6.085476906000794,\"chainwork\":\"00000000000000000000000000000000000000000000000000014a5abd337b07\",\"nTx\":1,\"previousblockhash\":\"00000000237ce1b692f5ef9f1f9ac64d62d5e6a24dcfec08633fa2d339434e2a\",\"nextblockhash\":\"0000000000e1ad737f11fe4cb3d126408b2cbcc28ab0d83293f408e413733338\"}]\r\n```\r\n\r\nI tested the same values but using `/rest/headers/<COUNT>/<BLOCK-HASH>.<bin|hex|json>` format and it worked as well. I didn't understand `Deprecated (but not removed) since 23.0:`, will both ways be kept?\r\n",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-856654746",
      "submitted_at": "2022-01-19T11:19:56Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "commented",
      "id": 1016369472,
      "node_id": "IC_kwDOABII5848lJFA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016369472",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T11:30:21Z",
      "updated_at": "2022-01-19T11:30:21Z",
      "author_association": "MEMBER",
      "body": "Is there a large cost to maintaining both ways? If not, it might be better to keep both to not upset users for a weak motivation.",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1016369472",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "reviewed",
      "id": 856666265,
      "node_id": "PRR_kwDOABII584zD7CZ",
      "url": null,
      "actor": null,
      "commit_id": "f861b6df054f5ebfe7a86d4b453ff95dabf3e178",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-856666265",
      "submitted_at": "2022-01-19T11:31:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5917754896,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFgucYQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5917754896",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T13:36:49Z"
    },
    {
      "event": "commented",
      "id": 1016482318,
      "node_id": "IC_kwDOABII5848lkoO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016482318",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T13:47:42Z",
      "updated_at": "2022-01-19T13:47:42Z",
      "author_association": "MEMBER",
      "body": "> Is there a large cost to maintaining both ways? If not, it might be better to keep both to not upset users for a weak motivation.\r\n\r\nThe PR is already setup to maintain both ways, so anyone using the (to be) deprecated endpoints should not be affected. This is documented in REST-interface.md too, so users are aware it is still supported but that they should probably use the new endpoint for new applications. The maintenance overhead is minimal, basically in [`rest_headers`](https://github.com/bitcoin/bitcoin/pull/24098/files#diff-590507deaf686d6571f73979df5f3c6da6013a13e597f390b8facce39f7c69d1R200-R204) and [`rest_filter_header`](https://github.com/bitcoin/bitcoin/pull/24098/files#diff-590507deaf686d6571f73979df5f3c6da6013a13e597f390b8facce39f7c69d1R372-R376) we have an if/else branch that adds 3 LoC to maintain the old endpoints too. Some additional refactoring could be done to simplify without the two branches, but it's no big deal.\r\n\r\nPersonally, I would definitely not remove the old endpoints in the next release, and probably not until some bigger API refactoring would make this desirable, in which case we should notify users more explicitly. I did not add any deprecation logging to avoid behaviour change, and because I think we don't have to push users away from the old endpoints yet.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1016482318",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "commented",
      "id": 1016486748,
      "node_id": "IC_kwDOABII5848lltc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016486748",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T13:53:05Z",
      "updated_at": "2022-01-19T13:53:05Z",
      "author_association": "MEMBER",
      "body": "> I didn't understand `Deprecated (but not removed) since 23.0:`, will both ways be kept?\r\n\r\nThank you for the review! Correct, I argue both should be kept at least for now, and that's how it's currently implemented. I'm open to suggestions for better phrasing, but typically deprecated means a feature is no longer developed and may be removed in the future, but is still available. See e.g. [Microsoft's definition](https://docs.microsoft.com/en-us/dynamics365/fin-ops-core/dev-itpro/migration-upgrade/deprecated-features). Does that clear things up?",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1016486748",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "commented",
      "id": 1016657935,
      "node_id": "IC_kwDOABII5848mPgP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016657935",
      "actor": {
        "login": "jsarenik",
        "id": 244565,
        "node_id": "MDQ6VXNlcjI0NDU2NQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/244565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jsarenik",
        "html_url": "https://github.com/jsarenik",
        "followers_url": "https://api.github.com/users/jsarenik/followers",
        "following_url": "https://api.github.com/users/jsarenik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jsarenik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jsarenik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jsarenik/subscriptions",
        "organizations_url": "https://api.github.com/users/jsarenik/orgs",
        "repos_url": "https://api.github.com/users/jsarenik/repos",
        "events_url": "https://api.github.com/users/jsarenik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jsarenik/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T16:46:13Z",
      "updated_at": "2022-01-19T16:46:13Z",
      "author_association": "NONE",
      "body": "@stickies-v instead of deprecating the old behavior the new can be just called backwards-compatible. By the way, an example of an externalized backward-compatible REST-service (in a way similar to what you have here) using Caddy webserver can be seen at https://github.com/jsarenik/bitcoin-faucet-shell/blob/master/Caddyfile.txt",
      "user": {
        "login": "jsarenik",
        "id": 244565,
        "node_id": "MDQ6VXNlcjI0NDU2NQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/244565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jsarenik",
        "html_url": "https://github.com/jsarenik",
        "followers_url": "https://api.github.com/users/jsarenik/followers",
        "following_url": "https://api.github.com/users/jsarenik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jsarenik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jsarenik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jsarenik/subscriptions",
        "organizations_url": "https://api.github.com/users/jsarenik/orgs",
        "repos_url": "https://api.github.com/users/jsarenik/repos",
        "events_url": "https://api.github.com/users/jsarenik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jsarenik/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1016657935",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "mentioned",
      "id": 5919099680,
      "node_id": "MEE_lADOABII585CAQMQzwAAAAFgzksg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5919099680",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T16:46:13Z"
    },
    {
      "event": "subscribed",
      "id": 5919099689,
      "node_id": "SE_lADOABII585CAQMQzwAAAAFgzksp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5919099689",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-19T16:46:13Z"
    },
    {
      "event": "reviewed",
      "id": 857077865,
      "node_id": "PRR_kwDOABII584zFfhp",
      "url": null,
      "actor": null,
      "commit_id": "0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "utACK 0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "user": {
        "login": "jsarenik",
        "id": 244565,
        "node_id": "MDQ6VXNlcjI0NDU2NQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/244565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jsarenik",
        "html_url": "https://github.com/jsarenik",
        "followers_url": "https://api.github.com/users/jsarenik/followers",
        "following_url": "https://api.github.com/users/jsarenik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jsarenik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jsarenik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jsarenik/subscriptions",
        "organizations_url": "https://api.github.com/users/jsarenik/orgs",
        "repos_url": "https://api.github.com/users/jsarenik/repos",
        "events_url": "https://api.github.com/users/jsarenik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jsarenik/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-857077865",
      "submitted_at": "2022-01-19T16:49:24Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "commented",
      "id": 1017331461,
      "node_id": "IC_kwDOABII5848oz8F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017331461",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-20T10:30:11Z",
      "updated_at": "2022-01-20T10:30:11Z",
      "author_association": "MEMBER",
      "body": "> @stickies-v instead of deprecating the old behavior the new can be just called backwards-compatible.\r\n\r\nWe can, but I'm not convinced we should? I think deprecating the old endpoints has a clear benefit of keeping the documented interface simpler and better adhering to common REST API practices. Simultaneously, since they're not removed, existing users are not affected, just gently nudged towards the new interface if and when it suits them. \r\nThank you for your review!",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1017331461",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "mentioned",
      "id": 5923755587,
      "node_id": "MEE_lADOABII585CAQMQzwAAAAFhFVZD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5923755587",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-20T10:30:11Z"
    },
    {
      "event": "subscribed",
      "id": 5923755595,
      "node_id": "SE_lADOABII585CAQMQzwAAAAFhFVZL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5923755595",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-20T10:30:12Z"
    },
    {
      "event": "reviewed",
      "id": 860377099,
      "node_id": "PRR_kwDOABII584zSFAL",
      "url": null,
      "actor": null,
      "commit_id": "0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "I don't see a strong reason for this change TBH.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-860377099",
      "submitted_at": "2022-01-23T22:29:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5943275159,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFiPy6X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5943275159",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-24T15:14:32Z"
    },
    {
      "event": "commented",
      "id": 1020285387,
      "node_id": "IC_kwDOABII58480FHL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020285387",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-24T16:27:04Z",
      "updated_at": "2022-01-24T16:27:04Z",
      "author_association": "MEMBER",
      "body": "Rebased and:\r\n- fixed wrong indentation of [GetQueryParameter](https://github.com/bitcoin/bitcoin/compare/0415aaafb2f7206c117f58cc7a4a967cee0fa619..e1822e79b3d5230f976360e5500d7ef59dd8783c#diff-aa9c90add56b31a60e0d574fa9025945be2b01306c265d00e3aa0a27c6b4bc3fL132-R146) documentation\r\n- incorporated promag's comments on [std::optional](https://github.com/bitcoin/bitcoin/pull/24098#discussion_r790336836) and [evhttp_uri_parse](https://github.com/bitcoin/bitcoin/pull/24098#discussion_r790338713)\r\n\r\nThank you @promag for your review. To address your comment:\r\n> I don't see a strong reason for this change TBH\r\n\r\nI agree this is not a critical issue. However, I think everyone can agree my proposal is the more standard way of organizing API endpoints. If that's true (and so far no one argued the opposite), it's better to refactor this earlier rather than later, because for example in [#17631](https://github.com/bitcoin/bitcoin/pull/17631#discussion_r733031180) we (I think rightfully) preferred internal consistency over adhering to best practices. We now also have the functionality in place for other existing or new endpoints to easily accept query parameters, including your [proposal](https://github.com/bitcoin/bitcoin/pull/24098#discussion_r790336549) for the data format.\r\n\r\n_Note: I've just learned I should only rebase in case of merge conflicts. My apologies for the added review difficulty, won't happen going forward._",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1020285387",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "mentioned",
      "id": 5943834507,
      "node_id": "MEE_lADOABII585CAQMQzwAAAAFiR7eL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5943834507",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-24T16:27:04Z"
    },
    {
      "event": "subscribed",
      "id": 5943834521,
      "node_id": "SE_lADOABII585CAQMQzwAAAAFiR7eZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5943834521",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-24T16:27:04Z"
    },
    {
      "event": "reviewed",
      "id": 863331148,
      "node_id": "PRR_kwDOABII584zdWNM",
      "url": null,
      "actor": null,
      "commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK. A few minor comments inline.\r\n\r\n> Why only count as a query parameter? How about\r\n>\r\n> GET /rest/headers?block_hash=&count=&format=\r\n>\r\n> block_hash defaults to tip\r\n> count defaults to 5\r\n> format defaults to request accept header, JSON if not specified\r\n\r\nEach `/headers/block` is a unique resource, so I think it makes sense to keep the block hash as part of the URI path. Making `format` a query string key seems ok to me.\r\n\r\nI also think that the `/rest/block/notxdetails/` endpoint could be deprecated and merged into `/rest/block/<BLOCKHASH>?txdetails=true|false` or similar in a follow up.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-863331148",
      "submitted_at": "2022-01-26T12:18:52Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5967930462,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFjt2Re",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5967930462",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-28T02:33:29Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5967970806,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFjuAH2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5967970806",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-28T02:48:38Z"
    },
    {
      "event": "commented",
      "id": 1023841023,
      "node_id": "IC_kwDOABII5849BpL_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023841023",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-28T03:02:36Z",
      "updated_at": "2022-01-28T03:02:36Z",
      "author_association": "MEMBER",
      "body": "Thank you for the extensive review jnewbery, I've incorporated all of your comments into the latest force push 9d9f177. \r\n\r\n> Each `/headers/block` is a unique resource, so I think it makes sense to keep the block hash as part of the URI path. Making `format` a query string key seems ok to me.\r\n>\r\n> I also think that the `/rest/block/notxdetails/` endpoint could be deprecated and merged into `/rest/block/<BLOCKHASH>?txdetails=true|false` or similar in a follow up.\r\n\r\nI agree with both of your comments, and am happy to take them on in a follow up PR. Since all of the query parameter logic is already in place now, this should be quite limited in scope too.\r\n",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1023841023",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "labeled",
      "id": 5994092442,
      "node_id": "LE_lADOABII585CAQMQzwAAAAFlRpea",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5994092442",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-02T08:41:16Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1027755825,
      "node_id": "IC_kwDOABII5849Qk8x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1027755825",
      "actor": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-02T09:46:32Z",
      "updated_at": "2022-02-02T09:46:32Z",
      "author_association": "MEMBER",
      "body": "> Each `/headers/block` is a unique resource, so I think it makes sense to keep the block hash as part of the URI path.\r\n\r\n@jnewbery this endpoint returns a list of `count` headers, not the unique resource.\r\n\r\n```\r\n// list of headers\r\nGET /rest/headers?block_hash=&count=&format=\r\n\r\nVS\r\n\r\n// an header\r\nGET /rest/headers/block_hash?format=\r\n```\r\n\r\nAnyway, just wanted to note my opinion, I'm fine with block hash in the path.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1027755825",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "mentioned",
      "id": 5994473736,
      "node_id": "MEE_lADOABII585CAQMQzwAAAAFlTGkI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5994473736",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-02T09:46:32Z"
    },
    {
      "event": "subscribed",
      "id": 5994473747,
      "node_id": "SE_lADOABII585CAQMQzwAAAAFlTGkT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5994473747",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-02T09:46:32Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5994924210,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFlU0iy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5994924210",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-02T11:01:02Z"
    },
    {
      "event": "commented",
      "id": 1027820448,
      "node_id": "IC_kwDOABII5849Q0ug",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1027820448",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-02T11:02:14Z",
      "updated_at": "2022-02-02T11:02:14Z",
      "author_association": "MEMBER",
      "body": "Rebased to fix merge conflict from #24223.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1027820448",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "unlabeled",
      "id": 5995539974,
      "node_id": "UNLE_lADOABII585CAQMQzwAAAAFlXK4G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5995539974",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-02T12:52:56Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5997110075,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFldKM7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5997110075",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-02T16:30:34Z"
    },
    {
      "event": "commented",
      "id": 1048919474,
      "node_id": "IC_kwDOABII584-hT2y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1048919474",
      "actor": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-23T15:43:29Z",
      "updated_at": "2022-02-23T15:43:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "It may be helpful to other reviews to note that you can interact with a local `bitcoind`'s REST interface from the command line using `curl`, for example:\r\n```\r\n$ curl -s localhost:8332/rest/blockhashbyheight/723418.json | jq .\r\n{\r\n  \"blockhash\": \"000000000000000000010ce22c300e67d706860e8e883ed108691a903801b0ee\"\r\n}\r\n```\r\nAnother common JSON formatting tool is `json_pp` (if you don't have `jq` installed).",
      "user": {
        "login": "LarryRuane",
        "id": 8321330,
        "node_id": "MDQ6VXNlcjgzMjEzMzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/LarryRuane",
        "html_url": "https://github.com/LarryRuane",
        "followers_url": "https://api.github.com/users/LarryRuane/followers",
        "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
        "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
        "repos_url": "https://api.github.com/users/LarryRuane/repos",
        "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1048919474",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "commented",
      "id": 1048995206,
      "node_id": "IC_kwDOABII584-hmWG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1048995206",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-23T16:55:50Z",
      "updated_at": "2022-02-23T16:55:50Z",
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\nMakes sense to follow best practices of REST API design.",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1048995206",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "commented",
      "id": 1049054758,
      "node_id": "IC_kwDOABII584-h04m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1049054758",
      "actor": {
        "login": "OliverOffing",
        "id": 84942996,
        "node_id": "MDQ6VXNlcjg0OTQyOTk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/84942996?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/OliverOffing",
        "html_url": "https://github.com/OliverOffing",
        "followers_url": "https://api.github.com/users/OliverOffing/followers",
        "following_url": "https://api.github.com/users/OliverOffing/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/OliverOffing/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/OliverOffing/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/OliverOffing/subscriptions",
        "organizations_url": "https://api.github.com/users/OliverOffing/orgs",
        "repos_url": "https://api.github.com/users/OliverOffing/repos",
        "events_url": "https://api.github.com/users/OliverOffing/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/OliverOffing/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-23T17:57:18Z",
      "updated_at": "2022-02-23T17:57:18Z",
      "author_association": "NONE",
      "body": "concept ACK",
      "user": {
        "login": "OliverOffing",
        "id": 84942996,
        "node_id": "MDQ6VXNlcjg0OTQyOTk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/84942996?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/OliverOffing",
        "html_url": "https://github.com/OliverOffing",
        "followers_url": "https://api.github.com/users/OliverOffing/followers",
        "following_url": "https://api.github.com/users/OliverOffing/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/OliverOffing/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/OliverOffing/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/OliverOffing/subscriptions",
        "organizations_url": "https://api.github.com/users/OliverOffing/orgs",
        "repos_url": "https://api.github.com/users/OliverOffing/repos",
        "events_url": "https://api.github.com/users/OliverOffing/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/OliverOffing/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1049054758",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "reviewed",
      "id": 892152112,
      "node_id": "PRR_kwDOABII5841LSkw",
      "url": null,
      "actor": null,
      "commit_id": "6628e8f3b0578ec09611c82011dd2e282ed42064",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-892152112",
      "submitted_at": "2022-02-24T09:22:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "reviewed",
      "id": 893670361,
      "node_id": "PRR_kwDOABII5841RFPZ",
      "url": null,
      "actor": null,
      "commit_id": "6628e8f3b0578ec09611c82011dd2e282ed42064",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK, I don't know much about REST but am convinced that query parameter instead of path makes more sense for specifying count.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-893670361",
      "submitted_at": "2022-02-25T13:23:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "commented",
      "id": 1050870301,
      "node_id": "IC_kwDOABII584-owId",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1050870301",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-25T13:50:24Z",
      "updated_at": "2022-02-25T13:50:24Z",
      "author_association": "MEMBER",
      "body": "@stickies-v: Seems like you didn't force-push your latest changes yet?",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1050870301",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "mentioned",
      "id": 6139257157,
      "node_id": "MEE_lADOABII585CAQMQzwAAAAFt7aFF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6139257157",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-25T13:50:24Z"
    },
    {
      "event": "subscribed",
      "id": 6139257162,
      "node_id": "SE_lADOABII585CAQMQzwAAAAFt7aFK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6139257162",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-25T13:50:24Z"
    },
    {
      "event": "reviewed",
      "id": 893779920,
      "node_id": "PRR_kwDOABII5841Rf_Q",
      "url": null,
      "actor": null,
      "commit_id": "6628e8f3b0578ec09611c82011dd2e282ed42064",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK. \r\nI agree that a query parameter is more adequate for the `count` parameter.\r\nAlso agree on the refactoring and the test added.\r\n\r\nI think the commit 833803e can be split in two: one for the change mentioned in the title of  commit and other for the test added.",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-893779920",
      "submitted_at": "2022-02-25T15:00:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6150816414,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFungKe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6150816414",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-27T19:37:40Z"
    },
    {
      "event": "commented",
      "id": 1053657286,
      "node_id": "IC_kwDOABII584-zYjG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1053657286",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-27T19:39:54Z",
      "updated_at": "2022-03-02T17:04:32Z",
      "author_association": "MEMBER",
      "body": "Force pushed changes to incorporate suggestions from theStack and an re-unresolved comment from jnewbery. As per my [comment](https://github.com/bitcoin/bitcoin/pull/24098#discussion_r815467602) in the thread, I think the best approach is to move the `block_hash` query parameter into the follow up PR along with some more improvements, so I think for now all comments on the content of this PR are resolved.\r\n\r\n> It may be helpful to other reviews to note that you can interact with a local `bitcoind`'s REST interface from the command line using `curl`, for example:\r\n\r\nThanks for the suggestion, I updated the initial post with some instructions.\r\n\r\n> @stickies-v: Seems like you didn't force-push your latest changes yet?\r\n\r\nMy bad, I tended to use the \"Mark as resolved\" as a personal to do list which I now realize is confusing, going forward I'll try to force push first and comment/mark afterwards.\r\n\r\n> I think the commit 833803e can be split in two: one for the change mentioned in the title of commit and other for the test added.\r\n\r\nCould you please explain how that would improve the PR in your view? I think since the test is quite small, so closely linked with the code changes, and wouldn't work without the prior commit, it's quite intuitive to keep it in one? I had a look at other PRs and I couldn't really find consensus between doing tests in the same or separate commits, so I just went for my intuition. _(edit: and to add to that, it would probably complicate the re-review process as `git range-diff` would break_\r\n\r\n",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1053657286",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "mentioned",
      "id": 6150819194,
      "node_id": "MEE_lADOABII585CAQMQzwAAAAFung16",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6150819194",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-27T19:39:54Z"
    },
    {
      "event": "subscribed",
      "id": 6150819196,
      "node_id": "SE_lADOABII585CAQMQzwAAAAFung18",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6150819196",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-27T19:39:54Z"
    },
    {
      "event": "reviewed",
      "id": 895699215,
      "node_id": "PRR_kwDOABII5841Y0kP",
      "url": null,
      "actor": null,
      "commit_id": "aef7c8cb4e92609385eb072c10a64eb2cbf05425",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Left some more review comments, mostly code-style nit-picking though, feel free to ignore.\r\nChanges generally LGTM and I think the PR is pretty close to a mergeable state.",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-895699215",
      "submitted_at": "2022-03-01T00:04:31Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6161678804,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFvQ8HU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6161678804",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-01T12:23:16Z"
    },
    {
      "event": "commented",
      "id": 1055394970,
      "node_id": "IC_kwDOABII584-6Aya",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1055394970",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-01T12:30:28Z",
      "updated_at": "2022-03-01T12:30:28Z",
      "author_association": "MEMBER",
      "body": "> Left some more review comments, mostly code-style nit-picking though, feel free to ignore. Changes generally LGTM and I think the PR is pretty close to a mergeable state.\r\n\r\nThank you for the thorough review, I've incorporated all of your suggestions. Hoping to get some final ACKs to get this over the line, I agree that it feels like being close to merged 👍 ",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1055394970",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "reviewed",
      "id": 896306255,
      "node_id": "PRR_kwDOABII5841bIxP",
      "url": null,
      "actor": null,
      "commit_id": "25cd29e6bd368571dd718001e04e4ecf1acf0566",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-896306255",
      "submitted_at": "2022-03-01T13:47:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6172395583,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFv50g_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6172395583",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-02T16:50:55Z"
    },
    {
      "event": "reviewed",
      "id": 898725856,
      "node_id": "PRR_kwDOABII5841kXfg",
      "url": null,
      "actor": null,
      "commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK fe95d30ae4ffd1946823ec3e2d6a59c063d62893 🌱 ",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-898725856",
      "submitted_at": "2022-03-03T10:28:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "reviewed",
      "id": 904160333,
      "node_id": "PRR_kwDOABII58415GRN",
      "url": null,
      "actor": null,
      "commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-904160333",
      "submitted_at": "2022-03-09T12:00:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "reviewed",
      "id": 904722602,
      "node_id": "PRR_kwDOABII58417Piq",
      "url": null,
      "actor": null,
      "commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "nearly ACK fe95d30ae4ffd1946823ec3e2d6a59c063d62893\r\n\r\nI've left a few minor comments. The only one that I'd definitely like to see resolved before merge is the build failure on the first two commits.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-904722602",
      "submitted_at": "2022-03-09T17:37:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDlmMWM1NDc4N2M4MTE3N2RkNTZhMzFjODgxYTlhZDI4MzRhMTIyZGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9f1c54787c81177dd56a31c881a9ad2834a122dc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9f1c54787c81177dd56a31c881a9ad2834a122dc",
      "tree": {
        "sha": "e176b2645ecceec4774f2c768f3d88d694387b29",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e176b2645ecceec4774f2c768f3d88d694387b29"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e176b2645ecceec4774f2c768f3d88d694387b29\nparent 219d728fcbde8c313940788838afa46c2fb88762\nauthor stickies-v <stickies-v@protonmail.com> 1643318405 +0000\ncommitter stickies-v <stickies-v@protonmail.com> 1646907855 +0100\n\nRefactoring: move declarations to rest.h\n\nThis facilitates unit testing\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5g/ggIZt5fccjfOgXLHObl5mp1cFAmIp0c8ACgkQXLHObl5m\np1evCw//VCJ6QGXqBlflcS2mqTkW9gdNBxvHQC15y9H+Ni/9cj7Sbs8lmSQnWoJd\n4hzck1Jm+qaT5Xjbop2NEKE2VcH4XzWf+X0Qyvvdji5wMl3rDYYbpr6njs9K2Ysb\n59kj+L+mqS2M8ynbMC7A8fBj6+0sjeVe19PKJ8aObtwnT/7yGWzAAJEY9CDOjwUB\nI+9VaJ5Nbwgbtkj4O/jsBurbZziwVK+ogwYa7Bq5qhAW9FUvaBLVSE3yEruWAxb4\nd6ylKty9Bu6mYkMeq/kx1kJ3iKwer0bgU4gnmjFYXA0vWzeR4n6T12Pygu7HECog\nVNAo5NTJ6gM1LP93iwtmB+pFRwA4v0oBFGG1+xB5yr+3OWpbS3D8HCi7S9B77BdK\no53D/tY7DpE/3q+xOCye45QWObWMbNKpyZZybR0OMB/+PdVgjpHXMZd5szk2Uvan\nlWEMaddvA3hSs9eoK8tSX296eOH/4r2+GpqDZBUHNsjlxpGHgQe795sAXXSXrLmH\nOicyoLgscFU/DKx6gmfp/JCQ2q7QQNyePpJKQXnB4429mwG1ui7xddF/UxkDNQjl\nGQiTUwCeVJ9uvrZkWYHnvxextLn7+EN+ALRPzGZLUGA2yKrAgiE6OBzPj4L0tawL\nWYtk1lZbMnF8DPdigLWvRfakG3W+lugaUEQT7AjW9z93eAMXgpo=\n=seYm\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/219d728fcbde8c313940788838afa46c2fb88762",
          "sha": "219d728fcbde8c313940788838afa46c2fb88762",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/219d728fcbde8c313940788838afa46c2fb88762"
        }
      ],
      "message": "Refactoring: move declarations to rest.h\n\nThis facilitates unit testing",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-03-10T10:24:15Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-01-27T21:20:05Z"
      },
      "sha": "9f1c54787c81177dd56a31c881a9ad2834a122dc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGMxYWFkMWIzYjk1YjdjNmJkZjA1ZTBjMjA5NWFiYTJmMmRiODMxMGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c1aad1b3b95b7c6bdf05e0c2095aba2f2db8310b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c1aad1b3b95b7c6bdf05e0c2095aba2f2db8310b",
      "tree": {
        "sha": "65f701fb542b920ee3ea78e26765b3bea6f94a96",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/65f701fb542b920ee3ea78e26765b3bea6f94a96"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 65f701fb542b920ee3ea78e26765b3bea6f94a96\nparent 9f1c54787c81177dd56a31c881a9ad2834a122dc\nauthor stickies-v <stickies-v@protonmail.com> 1643319095 +0000\ncommitter stickies-v <stickies-v@protonmail.com> 1646908149 +0100\n\nscripted-diff: rename RetFormat to RESTResponseFormat\n\nAs RetFormat is now exposed in a header, it is renamed to the more\nunderstandable RESTResponseFormat\n-BEGIN VERIFY SCRIPT-\ns() { sed -i 's/RetFormat/RESTResponseFormat/g' $1; }\ns src/rest.cpp\ns src/rest.h\n-END VERIFY SCRIPT-\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5g/ggIZt5fccjfOgXLHObl5mp1cFAmIp0vUACgkQXLHObl5m\np1c7Dw//TfPT6P5ChLeRKd3eX09F4IjVSBRaAy0pvdCf7aL19h8bmu+f3hx54ZDL\nh1Ht6fHEmIPvGRVIFtvx2FNybgSErbb+FYgGODCVSTVvRCJl88orTeS/b6NpQyy3\nr7gLY9NyPlR+pWMrDQBqcC/nj3AOtubKLkvyIInuEl9xVDZvsia6vALuCbJHq9ef\n9vm+1GCYdX74P8WfbqvDGC7JjFq8Xkm8YbADnEVnMYfHd3AzV3kVtBBJzJ2Kbgrh\ntm1Ow8tMCOvkmNov4SExexrZ0p7oDhZKSlYED6G5k4lnQu48V97WMSFYdNdNI7h/\nysAXn5bZcz0VND1zHrij5jaBDac6RQeIFeJPzyQGS6ifBFWh01LAkAEoTDah7SEU\nDTK7Pnr7hHzmNuvcaHOhGA30dgGWquNc2UhcWxomUkywbBJkTeZC5f8HTJMffRTL\nemKp368clI7ZDMu5HkOul3pLHa05e0RSOF6QcfAul6OpU2UpvjRGRx+rgztbKaJc\n800pS483aGSk+/bE+mIfcp74ZVyWSm0ptHqyh5QcC/zjK9lVJ5rJ62m1eZH2XV+F\ndjy16qZeFacPEYn/OzCBk7G2AwcRdpUvl1Brcp5lTv9Xr6NKsgw5q1hrp0mUFSWj\nVc1Ptk/QpXOk2dKGSYqVNMecsn4o0mSG46RWNxUth+FNFdkQ0Ao=\n=tt3x\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9f1c54787c81177dd56a31c881a9ad2834a122dc",
          "sha": "9f1c54787c81177dd56a31c881a9ad2834a122dc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9f1c54787c81177dd56a31c881a9ad2834a122dc"
        }
      ],
      "message": "scripted-diff: rename RetFormat to RESTResponseFormat\n\nAs RetFormat is now exposed in a header, it is renamed to the more\nunderstandable RESTResponseFormat\n-BEGIN VERIFY SCRIPT-\ns() { sed -i 's/RetFormat/RESTResponseFormat/g' $1; }\ns src/rest.cpp\ns src/rest.h\n-END VERIFY SCRIPT-",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-03-10T10:29:09Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-01-27T21:31:35Z"
      },
      "sha": "c1aad1b3b95b7c6bdf05e0c2095aba2f2db8310b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZmZjc3MWVlODY0OTc1Y2VlOGM4MzE2NTEyMzliYWM5NTUwM2MzN2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fff771ee864975cee8c831651239bac95503c37a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fff771ee864975cee8c831651239bac95503c37a",
      "tree": {
        "sha": "7cf1a82cb5442ee3ae7436cb5145305f49726b6d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7cf1a82cb5442ee3ae7436cb5145305f49726b6d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7cf1a82cb5442ee3ae7436cb5145305f49726b6d\nparent c1aad1b3b95b7c6bdf05e0c2095aba2f2db8310b\nauthor stickies-v <stickies-v@protonmail.com> 1642523874 +0000\ncommitter stickies-v <stickies-v@protonmail.com> 1646910113 +0100\n\nHandle query string when parsing data format\n\nURLs may contain a query string (prefixed with '?') and this should be ignored when parsing\nthe data format.\n\nTo facilitate testing this functionality, ParseDataFormat has been made non-static.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5g/ggIZt5fccjfOgXLHObl5mp1cFAmIp2qEACgkQXLHObl5m\np1fxhg//cJiMFmX3bd2EXStMzN6ACdpF8YLKdUN6S8+TBUFOL5ImV8S//E8uJy8J\nadwdiN9wZoEfHZteas1bQyptvt2wI8FDFmWZFrgXmadzAR6LbU15BV5fdU682tA4\nOkVBR8bRoIB73sSIJfbLaHd3qyOG2ZHA2IjfxAnAejAwRSqzh9LCz7jkFigHYzDx\nAnJL7qkH73B5pba1WIq86Ef4wbm32gSzcRjUc4igCUK6HF76AEEEZv1L6cM0dprk\nQ2i1DNOjvfo47k4xU49z5NAJ+jT53bUgl8U0ZXwOaTnNFv6vilffydqQ8/Vg4gZl\nE+tJEO50QrVMXtKEXZntXmyUKqsVTsNIxxh9NXit8UddJ13LCqTbuj54V2+saMvy\nw+QTjy+LVjVUF3ZP8PPzMNWh8vbhwt2ZYd2h3UWkxJaBSLSYhJH5+HBikbCI+Y8Y\n65ZQO2pBSxqvm8A62gsf/W2se/1SujCDMjLaBRTLLnAOGYNdjxAS/EfKccnr5+Bx\n+7+fN9yVC9W83ptJ/sXgxgSq1BgaNcG6IkazJcOu5hbTjuF1q+iQ7HLogoolmx+4\nKtVCywcdzL1ZLddGtAXktx3tLl8EFX377Rp4O37KlwPfexbW2/HcU+sJ0TSAeqRV\ndjMPt5iEzYI3NQLmytsoRvhpX8J4UNG9ZPCqaYbzw7nAZu92wLA=\n=RT7j\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c1aad1b3b95b7c6bdf05e0c2095aba2f2db8310b",
          "sha": "c1aad1b3b95b7c6bdf05e0c2095aba2f2db8310b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c1aad1b3b95b7c6bdf05e0c2095aba2f2db8310b"
        }
      ],
      "message": "Handle query string when parsing data format\n\nURLs may contain a query string (prefixed with '?') and this should be ignored when parsing\nthe data format.\n\nTo facilitate testing this functionality, ParseDataFormat has been made non-static.",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-03-10T11:01:53Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-01-18T16:37:54Z"
      },
      "sha": "fff771ee864975cee8c831651239bac95503c37a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGEwOTQ5NzYxNGU5YmI2MDNmZmYzNjI4NmQ5NjExYTI1YjIzZWViMDI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a09497614e9bb603fff36286d9611a25b23eeb02",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a09497614e9bb603fff36286d9611a25b23eeb02",
      "tree": {
        "sha": "a1c484e29c8f7c32555b580bfbf44661aad6426b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a1c484e29c8f7c32555b580bfbf44661aad6426b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a1c484e29c8f7c32555b580bfbf44661aad6426b\nparent fff771ee864975cee8c831651239bac95503c37a\nauthor stickies-v <stickies-v@protonmail.com> 1641392892 +0000\ncommitter stickies-v <stickies-v@protonmail.com> 1646910114 +0100\n\nAdd GetQueryParameter helper function\n\nEasily get the query parameter from the URI, with optional default value.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5g/ggIZt5fccjfOgXLHObl5mp1cFAmIp2qIACgkQXLHObl5m\np1d0Tg//cEQ/9wOcs6iIfamOezpo6hT8RpNj+Iyyqgfr1fqmZea7i1yDvVEnRdw7\n1GTjOBYMJVPNOmS0w7GScc4fjlmXM1hAnyj8vxo2xoT7/heLmx24aO27FxbYAVlr\nLOVaLANFiPnHV9xaJIm5fOl33DT4Y9rbh9yP5+0M+f4j2nqIvOEsowQALKdY3AvV\nB0gHACgb7t6WEa/SJXZtSLoUNmXATEZN+1gojCy5yziJ8qOfI4tliiS1FiFVL4f8\n4wSF4/TgWSyTulaN8vVCUp7YozcER9T91iNY/uqERSyOjZ6yZdgTxoxfJmwXbMp8\njwtvoo6r6saw718Pn/wskEBIEMWNEvWehUdEYQbH/X3QPl3EwC1wPGDnn4yv8dAH\n2KEuzYYYen2VRyYnfTLkDVo7bfbH1QZ6ApnC7YQYzFekNtTE2W2MYbRBgJUV+uQT\nwD4FtqHuSDVovE7i1dOonYJS+9S5J5f3NvO6IserGv3YfzwdsjK637ESssfQxumO\n99KO5Sknoa63x0/EtFKViGGbjB/LeJ50gEbS7JGoPa6N0ZuWiJ5dVm/a59oZHJ6A\nuTdXMrqaGp78ueSoHwWWyyswb8j81JxotU+ro+AsOLfYMaiX77zfNQS0NuDR1kmo\nCwI2D3e5PFD+9ARdENXQz7mmcHzZDhqfM7Hzzzk9Gvk7AUdywZc=\n=d99v\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fff771ee864975cee8c831651239bac95503c37a",
          "sha": "fff771ee864975cee8c831651239bac95503c37a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fff771ee864975cee8c831651239bac95503c37a"
        }
      ],
      "message": "Add GetQueryParameter helper function\n\nEasily get the query parameter from the URI, with optional default value.",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-03-10T11:01:54Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-01-05T14:28:12Z"
      },
      "sha": "a09497614e9bb603fff36286d9611a25b23eeb02"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6217014860,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAFykB5M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6217014860",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-10T11:32:10Z"
    },
    {
      "event": "commented",
      "id": 1063966673,
      "node_id": "IC_kwDOABII584_atfR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1063966673",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-10T11:41:50Z",
      "updated_at": "2022-03-10T11:41:50Z",
      "author_association": "MEMBER",
      "body": "Force pushed from fe95d30 to 9aac438 to address jnewbery's comments, namely [not each commit being able to compile](https://github.com/bitcoin/bitcoin/pull/24098#discussion_r822575408) and several style updates regarding spaces and brace initialization. There are no functional/behaviour changes.\r\n\r\nThe range-diff (`git range-diff 219d728 fe95d30 9aac438`) is a bit noisy unfortunately, you can also compare the commits individually:\r\n```\r\ngit diff 1cc759af212c91807735e6c9bc2c998468c7252a..9f1c54787c81177dd56a31c881a9ad2834a122dc\r\ngit diff 40830ae7ea72c6ac6082bbfd30d26d1f749c46df..c1aad1b3b95b7c6bdf05e0c2095aba2f2db8310b\r\ngit diff 2c84d3916b710fbf6029858acff941549e875cb7..fff771ee864975cee8c831651239bac95503c37a\r\ngit diff ac3c007a393d3493ad9023c71d4ed3c38a8baabd..a09497614e9bb603fff36286d9611a25b23eeb02\r\ngit diff f610294c449aefc4bdae9175292fedbe5dd1d5f5..46af138c216d5fa7ac512a42c8219706e97d88fa\r\ngit diff fe95d30ae4ffd1946823ec3e2d6a59c063d62893..9aac4381897130ce630c4c3f5fca6690cd148330\r\n```",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1063966673",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "commented",
      "id": 1082897344,
      "node_id": "IC_kwDOABII585Ai7PA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1082897344",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-30T10:15:14Z",
      "updated_at": "2022-03-30T10:15:14Z",
      "author_association": "MEMBER",
      "body": "Code review ACK 9aac4381897130ce630c4c3f5fca6690cd148330\r\n\r\nTested range-diff and that all commits build.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1082897344",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "reviewed",
      "id": 926305075,
      "node_id": "PRR_kwDOABII5843Nksz",
      "url": null,
      "actor": null,
      "commit_id": "9aac4381897130ce630c4c3f5fca6690cd148330",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "re-ACK 9aac4381897130ce630c4c3f5fca6690cd148330",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-926305075",
      "submitted_at": "2022-03-30T15:19:00Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY5NTlmYzAzOTdjM2YzNjE1ZTk5YmMyOGQyZGY1NDlkOWQ1MmYyNzc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f959fc0397c3f3615e99bc28d2df549d9d52f277",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f959fc0397c3f3615e99bc28d2df549d9d52f277",
      "tree": {
        "sha": "5025379c369e3a7e531a1e9a3ce17cd84ad2819e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5025379c369e3a7e531a1e9a3ce17cd84ad2819e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5025379c369e3a7e531a1e9a3ce17cd84ad2819e\nparent a09497614e9bb603fff36286d9611a25b23eeb02\nauthor stickies-v <stickies-v@protonmail.com> 1643322231 +0000\ncommitter stickies-v <stickies-v@protonmail.com> 1649179177 -0400\n\nUpdate /<count>/ endpoints to use a '?count=' query parameter instead\n\nIn most RESTful APIs, path parameters are used to represent resources, and\nquery parameters are used to control how these resources are being filtered/sorted/...\n\nThe old /<count>/ functionality is kept alive to maintain backwards compatibility,\nbut new paths with query parameters are introduced and documented as the default\ninterface so future API methods don't break consistency by using query parameters.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5g/ggIZt5fccjfOgXLHObl5mp1cFAmJMeikACgkQXLHObl5m\np1e1mg/8DxMEHlMDSvOrtdTFnT6jSoUkk0yO5dAjojVz5xXiE8bN2SbwHvn7Yqzc\nAgcUMlYXmgdM4t4cUyPGK8VuNQ0AZtS6+y2SjdKch04kGMvSJLviUufpVnLSZDSy\n5gomhJvutefVRkpv3Fw06hunFJ0MP/mJ5f9LK0rs9k8rWxDF96S1uOGydPu/Jt0E\nyf8I+LZ+25BSD53ImFRy0JJMQyhGKdWPaaDzBLATvzrAg6LyrHxWMJhdHYiWCzdf\nTwBgUEsWbuw2rtaHuqbAbB2b80HIZXdqHM1EYxBRS8aZauQTtRXtzXu0dOzLtiHB\nB2+iiXec8bp4ka35wXgMHjgTO9LE5WWMixVjuaiJCDA59vtDMa/c3cKiMoIOp5MK\nbTe3+6qyALKF52r1tLNUX4sTQs1w5ER9alLgz7KX8gbPZZ3HW1JzvxEqheGmTUaJ\nkEMUzroLOKkzL98jf6iLBZFuqm9iINt67plsD0JJzVUK5QrtPLhBKEvQTNunSGpm\nP9qAHXPKofwaIRqkwJTLVxR+1hP+Nr6ikpHuWHzRJcc6A0gfTmuWZtUARVvQgyn9\npSEo7O6ypyKj9nPwx0LHO/4m0kRXDFTt8D1b+hYz+fskav7Ke1AcNBMBdgDoUGzv\nzBt0OexsQiZ/jPH6399jvTeJi6TE2mrHVYNZXc672NTQT9uGpk4=\n=32LD\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a09497614e9bb603fff36286d9611a25b23eeb02",
          "sha": "a09497614e9bb603fff36286d9611a25b23eeb02",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a09497614e9bb603fff36286d9611a25b23eeb02"
        }
      ],
      "message": "Update /<count>/ endpoints to use a '?count=' query parameter instead\n\nIn most RESTful APIs, path parameters are used to represent resources, and\nquery parameters are used to control how these resources are being filtered/sorted/...\n\nThe old /<count>/ functionality is kept alive to maintain backwards compatibility,\nbut new paths with query parameters are introduced and documented as the default\ninterface so future API methods don't break consistency by using query parameters.",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-04-05T17:19:37Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-01-27T22:23:51Z"
      },
      "sha": "f959fc0397c3f3615e99bc28d2df549d9d52f277"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU0YjM5Y2ZiMzQyZDEwYTQ0OGQ0OTI5OWM3MTVlM2EyNWMyYWNhNGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "tree": {
        "sha": "0eec8e466f61f06ec832eb6c467749c13d87cea0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0eec8e466f61f06ec832eb6c467749c13d87cea0"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 0eec8e466f61f06ec832eb6c467749c13d87cea0\nparent f959fc0397c3f3615e99bc28d2df549d9d52f277\nauthor stickies-v <stickies-v@protonmail.com> 1642540128 +0000\ncommitter stickies-v <stickies-v@protonmail.com> 1649179177 -0400\n\nAdd release notes\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE5g/ggIZt5fccjfOgXLHObl5mp1cFAmJMeikACgkQXLHObl5m\np1f5Bg//QuECXOCcXNt4pbIjQCk1GEWoVQ52CuxEhbTZYBCxCxCV5zYo7ANxReHd\n4Bd6f6+Y8/GgMR8p2B60uoiFzw9URp35svTRbiZSbmI65ArLk5BLIG7a2wYKcdJR\nYZT7nd4JYoKIZM5z/AnNLqThYQOBB/xd8qZUmN2ryvnjkDbnuWC/MupI0Xu7jXDR\nG/kzTYlRGMj8Jyacf77zpsP22eJK5rrwFFmrXD1dKaagIy0ucZ5oSLeutkGVk78y\ni4nNNOayeGPN5Wd0ZwB3Wh0wyyJha6dF/4RBupZJ3tJW5Pz4ZzhVok4clP4X124l\nkKMOS1kW8wPo2KxcjwsWHo/fpQ7AuYomg94jcB3S7vCjj5ROz8leUhxUUsPlh7VQ\nrMwet48KPYAg2hafda1do//Crqs06b6fIXSixuZQspkrLc3lTHLiJToCMbxyYS/4\n5z2ihYh0p5SKU1gx/pRFAptdwphNA7eTgdcpIAgqeRGowUDw3wJG3qhC0UenTaNT\nvlPS6xvdS3/0eiizchFGGeQ1gk0HY9GTQG6+zBZk9MzkymkJi/eTv+BYmlUoQRXR\nuBz0PtjKRaizSP6C0uxBcArgkP7W0OX/UXxOAb4Rf6VlcC9MJ/M0ufGrsJBiC3lf\nrPFOVkqbTgMt9nSIwaAVLS7+pqljO9KejxuGV6pBQVOHqetItUM=\n=YNoW\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f959fc0397c3f3615e99bc28d2df549d9d52f277",
          "sha": "f959fc0397c3f3615e99bc28d2df549d9d52f277",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f959fc0397c3f3615e99bc28d2df549d9d52f277"
        }
      ],
      "message": "Add release notes",
      "committer": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-04-05T17:19:37Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2022-01-18T21:08:48Z"
      },
      "sha": "54b39cfb342d10a448d49299c715e3a25c2aca4a"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6373313414,
      "node_id": "HRFPE_lADOABII585CAQMQzwAAAAF74QuG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6373313414",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-05T17:25:19Z"
    },
    {
      "event": "commented",
      "id": 1089092771,
      "node_id": "IC_kwDOABII585A6jyj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1089092771",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-05T17:33:40Z",
      "updated_at": "2022-04-05T17:33:40Z",
      "author_association": "MEMBER",
      "body": "I've had to push a tiny doc update to `REST-interface.md` (`git range-diff 219d728 9aac438 54b39cf`) since this was not merged for v23, but since there are no significant changes beyond theStack and jnewbery's ACKs I think this PR is now ready to be considered for merging? @MarcoFalke \r\n\r\n<details>\r\n    <summary>git range-diff 219d728 9aac438 54b39cf</summary>\r\n\r\n```\r\n1:  9f1c54787 = 1:  9f1c54787 Refactoring: move declarations to rest.h\r\n2:  c1aad1b3b = 2:  c1aad1b3b scripted-diff: rename RetFormat to RESTResponseFormat\r\n3:  fff771ee8 = 3:  fff771ee8 Handle query string when parsing data format\r\n4:  a09497614 = 4:  a09497614 Add GetQueryParameter helper function\r\n5:  46af138c2 ! 5:  f959fc039 Update /<count>/ endpoints to use a '?count=' query parameter instead\r\n    @@ doc/REST-interface.md: The HTTP request and response are both handled entirely i\r\n      Given a block hash: returns <COUNT> amount of blockheaders in upward direction.\r\n      Returns empty if the block doesn't exist or it isn't in the active chain.\r\n      \r\n    -+*Deprecated (but not removed) since 23.0:*\r\n    ++*Deprecated (but not removed) since 24.0:*\r\n     +`GET /rest/headers/<COUNT>/<BLOCK-HASH>.<bin|hex|json>`\r\n     +\r\n      #### Blockfilter Headers\r\n    @@ doc/REST-interface.md: The HTTP request and response are both handled entirely i\r\n      direction for the filter type <FILTERTYPE>.\r\n      Returns empty if the block doesn't exist or it isn't in the active chain.\r\n      \r\n    -+*Deprecated (but not removed) since 23.0:*\r\n    ++*Deprecated (but not removed) since 24.0:*\r\n     +`GET /rest/blockfilterheaders/<FILTERTYPE>/<COUNT>/<BLOCK-HASH>.<bin|hex|json>`\r\n     +\r\n      #### Blockfilters\r\n6:  9aac43818 = 6:  54b39cfb3 Add release notes\r\n```\r\n</details>",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1089092771",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "mentioned",
      "id": 6373364510,
      "node_id": "MEE_lADOABII585CAQMQzwAAAAF74dMe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6373364510",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-05T17:33:41Z"
    },
    {
      "event": "subscribed",
      "id": 6373364515,
      "node_id": "SE_lADOABII585CAQMQzwAAAAF74dMj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6373364515",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-05T17:33:41Z"
    },
    {
      "event": "review_requested",
      "id": 6373725066,
      "node_id": "RRE_lADOABII585CAQMQzwAAAAF751OK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6373725066",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-05T18:34:39Z",
      "requested_reviewer": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 6373725339,
      "node_id": "RRE_lADOABII585CAQMQzwAAAAF751Sb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6373725339",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-05T18:34:41Z",
      "requested_reviewer": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 932350460,
      "node_id": "PRR_kwDOABII5843kon8",
      "url": null,
      "actor": null,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "re-ACK 54b39cfb342d10a448d49299c715e3a25c2aca4a\r\n\r\nVerified that the only change since my last ACK was bumping the version number in the REST documentation from v23 to v24 (since this PR didn't make it into v23, v24 will be the first release where the old endpoints are deprecated).",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-932350460",
      "submitted_at": "2022-04-05T18:40:34Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
    },
    {
      "event": "commented",
      "id": 1089290844,
      "node_id": "IC_kwDOABII585A7UJc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1089290844",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-05T20:19:53Z",
      "updated_at": "2022-04-05T20:19:53Z",
      "author_association": "MEMBER",
      "body": "ACK 54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1089290844",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24098"
    },
    {
      "event": "merged",
      "id": 6377548191,
      "node_id": "ME_lADOABII585CAQMQzwAAAAF8Iamf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6377548191",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "27cfaeed1ea975f52c2307153f7295d43bc84b64",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/27cfaeed1ea975f52c2307153f7295d43bc84b64",
      "created_at": "2022-04-06T07:28:12Z"
    },
    {
      "event": "closed",
      "id": 6377548219,
      "node_id": "CE_lADOABII585CAQMQzwAAAAF8Iam7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6377548219",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-06T07:28:12Z"
    },
    {
      "event": "referenced",
      "id": 6380556223,
      "node_id": "REFE_lADOABII585CAQMQzwAAAAF8T4-_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6380556223",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5e9ff53acfa976b2f504f0ea3d4f81814ef7644a",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/5e9ff53acfa976b2f504f0ea3d4f81814ef7644a",
      "created_at": "2022-04-06T14:13:37Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 6383494830,
      "node_id": "HRDE_lADOABII585CAQMQzwAAAAF8fGau",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6383494830",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-06T21:03:00Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/787655265",
      "pull_request_review_id": 856666265,
      "id": 787655265,
      "node_id": "PRRC_kwDOABII584u8qph",
      "diff_hunk": "@@ -195,15 +193,27 @@ static bool rest_headers(const std::any& context,\n     std::vector<std::string> path;\n     boost::split(path, param, boost::is_any_of(\"/\"));\n \n-    if (path.size() != 2)\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n+    std::string raw_count {};\n+    std::string hashStr {};\n+    if (path.size() == 2) {\n+        // deprecated path: /rest/headers/<count>/<hash>\n+        hashStr = path[1];\n+        raw_count = path[0];\n+    }\n+    else if (path.size() == 1) {\n+        // new path with query parameter: /rest/headers/<hash>?count=<count>\n+        hashStr = path[0];\n+        raw_count = req->GetQueryParameter(\"count\", \"5\");;\n+    }\n+    else {\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid request. Use /rest/headers/<hash>.<ext>?count=<count>\");\n+    }\n \n-    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    auto parsed_count = ToIntegral<size_t>(raw_count);\n     if (!parsed_count.has_value() || *parsed_count < 1 || *parsed_count > MAX_REST_HEADERS_RESULTS) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Header count is invalid or out of acceptable range (1-%u): %s\", MAX_REST_HEADERS_RESULTS, path[0]));\n+        return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Header count is invalid or out of acceptable range (1-%u): %s\", MAX_REST_HEADERS_RESULTS, raw_count));\n     }\n \n-    std::string hashStr = path[1];\n     uint256 hash;\n     if (!ParseHashStr(hashStr, hash))\n         return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid hash: \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 120,
      "original_position": 88,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "f861b6df054f5ebfe7a86d4b453ff95dabf3e178",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "if I try to pass a blockhash without the extension (.<bin|hex|json>) in `/headers`, like:\r\n`/rest/headers/000000001aeae195809d120b5d66a39c83eb48792e068f8ea1fea19d84a4278a?count=5`\r\nreturns: `Invalid hash: 000000001aeae195809d120b5d66a39c83eb48792e068f8ea1fea19d84a4278a?count=5`\r\n\r\nIn the deprecated, `/rest/headers/5/000000001aeae195809d120b5d66a39c83eb48792e068f8ea1fea19d84a4278a`\r\nreturns: `output format not found (available: .bin, .hex, .json)`\r\n\r\n\r\n",
      "created_at": "2022-01-19T11:31:21Z",
      "updated_at": "2022-01-19T11:31:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r787655265",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/787655265"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 218,
      "original_line": 218,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/787750681",
      "pull_request_review_id": 856801988,
      "id": 787750681,
      "node_id": "PRRC_kwDOABII584u9B8Z",
      "diff_hunk": "@@ -195,15 +193,27 @@ static bool rest_headers(const std::any& context,\n     std::vector<std::string> path;\n     boost::split(path, param, boost::is_any_of(\"/\"));\n \n-    if (path.size() != 2)\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n+    std::string raw_count {};\n+    std::string hashStr {};\n+    if (path.size() == 2) {\n+        // deprecated path: /rest/headers/<count>/<hash>\n+        hashStr = path[1];\n+        raw_count = path[0];\n+    }\n+    else if (path.size() == 1) {\n+        // new path with query parameter: /rest/headers/<hash>?count=<count>\n+        hashStr = path[0];\n+        raw_count = req->GetQueryParameter(\"count\", \"5\");;\n+    }\n+    else {\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid request. Use /rest/headers/<hash>.<ext>?count=<count>\");\n+    }\n \n-    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    auto parsed_count = ToIntegral<size_t>(raw_count);\n     if (!parsed_count.has_value() || *parsed_count < 1 || *parsed_count > MAX_REST_HEADERS_RESULTS) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Header count is invalid or out of acceptable range (1-%u): %s\", MAX_REST_HEADERS_RESULTS, path[0]));\n+        return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Header count is invalid or out of acceptable range (1-%u): %s\", MAX_REST_HEADERS_RESULTS, raw_count));\n     }\n \n-    std::string hashStr = path[1];\n     uint256 hash;\n     if (!ParseHashStr(hashStr, hash))\n         return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid hash: \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 120,
      "original_position": 88,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "f861b6df054f5ebfe7a86d4b453ff95dabf3e178",
      "in_reply_to_id": 787655265,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You're right, that should be handled better. I've:\r\n- updated `ParseDataFormat` to ignore the query string even when no data format is found\r\n- updated documentation on `ParseDataFormat` in `rest.h` to document existing and new behaviour\r\n- added a test case to `test_query_string` to capture what you've found\r\n\r\nRebased and pushed to 0415aaa",
      "created_at": "2022-01-19T13:36:46Z",
      "updated_at": "2022-01-19T13:37:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r787750681",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/787750681"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 218,
      "original_line": 218,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790169294",
      "pull_request_review_id": 860229304,
      "id": 790169294,
      "node_id": "PRRC_kwDOABII584vGQbO",
      "diff_hunk": "@@ -195,15 +193,27 @@ static bool rest_headers(const std::any& context,\n     std::vector<std::string> path;\n     boost::split(path, param, boost::is_any_of(\"/\"));\n \n-    if (path.size() != 2)\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n+    std::string raw_count {};\n+    std::string hashStr {};\n+    if (path.size() == 2) {\n+        // deprecated path: /rest/headers/<count>/<hash>\n+        hashStr = path[1];\n+        raw_count = path[0];\n+    }\n+    else if (path.size() == 1) {\n+        // new path with query parameter: /rest/headers/<hash>?count=<count>\n+        hashStr = path[0];\n+        raw_count = req->GetQueryParameter(\"count\", \"5\");;\n+    }\n+    else {\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid request. Use /rest/headers/<hash>.<ext>?count=<count>\");\n+    }\n \n-    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    auto parsed_count = ToIntegral<size_t>(raw_count);\n     if (!parsed_count.has_value() || *parsed_count < 1 || *parsed_count > MAX_REST_HEADERS_RESULTS) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Header count is invalid or out of acceptable range (1-%u): %s\", MAX_REST_HEADERS_RESULTS, path[0]));\n+        return RESTERR(req, HTTP_BAD_REQUEST, strprintf(\"Header count is invalid or out of acceptable range (1-%u): %s\", MAX_REST_HEADERS_RESULTS, raw_count));\n     }\n \n-    std::string hashStr = path[1];\n     uint256 hash;\n     if (!ParseHashStr(hashStr, hash))\n         return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid hash: \" + hashStr);",
      "path": "src/rest.cpp",
      "position": 120,
      "original_position": 88,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "f861b6df054f5ebfe7a86d4b453ff95dabf3e178",
      "in_reply_to_id": 787655265,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Tested! Works! ",
      "created_at": "2022-01-22T18:10:58Z",
      "updated_at": "2022-01-22T18:10:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r790169294",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790169294"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 218,
      "original_line": 218,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790336549",
      "pull_request_review_id": 860377099,
      "id": 790336549,
      "node_id": "PRRC_kwDOABII584vG5Ql",
      "diff_hunk": "@@ -47,18 +47,24 @@ The HTTP request and response are both handled entirely in-memory.\n With the /notxdetails/ option JSON response will only contain the transaction hash instead of the complete transaction details. The option only affects the JSON response.\n \n #### Blockheaders\n-`GET /rest/headers/<COUNT>/<BLOCK-HASH>.<bin|hex|json>`\n+`GET /rest/headers/<BLOCK-HASH>.<bin|hex|json>?count=<COUNT=5>`",
      "path": "doc/REST-interface.md",
      "position": 5,
      "original_position": 5,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why only `count` as a query parameter? How about\r\n```\r\nGET /rest/headers?block_hash=&count=&format=\r\n\r\nblock_hash defaults to tip\r\ncount defaults to 5\r\nformat defaults to request accept header, JSON if not specified\r\n```",
      "created_at": "2022-01-23T22:00:12Z",
      "updated_at": "2022-01-23T22:29:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r790336549",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790336549"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 50,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790336836",
      "pull_request_review_id": 860377099,
      "id": 790336836,
      "node_id": "PRRC_kwDOABII584vG5VE",
      "diff_hunk": "@@ -639,6 +640,42 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::string HTTPRequest::GetQueryParameter(const std::string& key, const std::string& default_val) const\n+{\n+    std::string uri = evhttp_request_get_uri(req);\n+    auto result = GetQueryParameterFromUri(uri, key, default_val);\n+\n+    return result;\n+}\n+\n+std::string GetQueryParameterFromUri(const std::string& uri, const std::string& key, const std::string& default_val)\n+{\n+    auto query_start = uri.rfind('?');\n+    if (query_start != std::string::npos) {\n+        // Capture everything after the '?' sign, i.e. the query string\n+        auto query_string = uri.substr(query_start + 1, uri.size() - (query_start + 1));\n+\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;\n+        evhttp_parse_query_str(query_string.c_str(), &params_q);\n+\n+        struct evkeyval* param;\n+        for (param = params_q.tqh_first; param; param = param->next.tqe_next) {\n+            if (param->key == key) {\n+                std::string result = param->value;\n+                evhttp_clear_headers(&params_q);\n+                return result;\n+            }\n+        }\n+        evhttp_clear_headers(&params_q);\n+    }\n+\n+    if (default_val != \"\")",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 42,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe use std::optional because an empty string could be the default?",
      "created_at": "2022-01-23T22:03:00Z",
      "updated_at": "2022-01-23T22:29:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r790336836",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790336836"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 673,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790338713",
      "pull_request_review_id": 860377099,
      "id": 790338713,
      "node_id": "PRRC_kwDOABII584vG5yZ",
      "diff_hunk": "@@ -639,6 +640,42 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::string HTTPRequest::GetQueryParameter(const std::string& key, const std::string& default_val) const\n+{\n+    std::string uri = evhttp_request_get_uri(req);\n+    auto result = GetQueryParameterFromUri(uri, key, default_val);\n+\n+    return result;\n+}\n+\n+std::string GetQueryParameterFromUri(const std::string& uri, const std::string& key, const std::string& default_val)\n+{\n+    auto query_start = uri.rfind('?');",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 22,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should use `evhttp_uri_parse`.",
      "created_at": "2022-01-23T22:21:27Z",
      "updated_at": "2022-01-23T22:29:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r790338713",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790338713"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 653,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790766518",
      "pull_request_review_id": 860991881,
      "id": 790766518,
      "node_id": "PRRC_kwDOABII584vIiO2",
      "diff_hunk": "@@ -639,6 +640,42 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::string HTTPRequest::GetQueryParameter(const std::string& key, const std::string& default_val) const\n+{\n+    std::string uri = evhttp_request_get_uri(req);\n+    auto result = GetQueryParameterFromUri(uri, key, default_val);\n+\n+    return result;\n+}\n+\n+std::string GetQueryParameterFromUri(const std::string& uri, const std::string& key, const std::string& default_val)\n+{\n+    auto query_start = uri.rfind('?');\n+    if (query_start != std::string::npos) {\n+        // Capture everything after the '?' sign, i.e. the query string\n+        auto query_string = uri.substr(query_start + 1, uri.size() - (query_start + 1));\n+\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;\n+        evhttp_parse_query_str(query_string.c_str(), &params_q);\n+\n+        struct evkeyval* param;\n+        for (param = params_q.tqh_first; param; param = param->next.tqe_next) {\n+            if (param->key == key) {\n+                std::string result = param->value;\n+                evhttp_clear_headers(&params_q);\n+                return result;\n+            }\n+        }\n+        evhttp_clear_headers(&params_q);\n+    }\n+\n+    if (default_val != \"\")",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 42,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "in_reply_to_id": 790336836,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Agreed and done, for both `GetQueryParameterFromUri` and `HTTPRequest:GetQueryParameter`.",
      "created_at": "2022-01-24T13:56:27Z",
      "updated_at": "2022-01-24T13:56:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r790766518",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790766518"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 673,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790768636",
      "pull_request_review_id": 860995025,
      "id": 790768636,
      "node_id": "PRRC_kwDOABII584vIiv8",
      "diff_hunk": "@@ -47,18 +47,24 @@ The HTTP request and response are both handled entirely in-memory.\n With the /notxdetails/ option JSON response will only contain the transaction hash instead of the complete transaction details. The option only affects the JSON response.\n \n #### Blockheaders\n-`GET /rest/headers/<COUNT>/<BLOCK-HASH>.<bin|hex|json>`\n+`GET /rest/headers/<BLOCK-HASH>.<bin|hex|json>?count=<COUNT=5>`",
      "path": "doc/REST-interface.md",
      "position": 5,
      "original_position": 5,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "in_reply_to_id": 790336549,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I agree and considered that, but decided to omit this for now to keep this PR's scope limited. Would you be okay with this being incorporated in a follow up PR (which I'm happy to take on right away?)\r\n\r\nEdit: after reading jnewbery's [comment](https://github.com/bitcoin/bitcoin/pull/24098#pullrequestreview-863331148), I realized I didn't see you also converted `block_hash` into a query parameter, which I don't agree with as per his arguments. I still agree with your suggestion for `format`.\r\n\r\nEdit 2: after reading your [latest comment](https://github.com/bitcoin/bitcoin/pull/24098#issuecomment-1027755825), I realize I did not fully think this through. I have some further thoughts but will hold off on sharing these until after the [PR review club](https://bitcoincore.reviews/24098) to encourage open discussion.",
      "created_at": "2022-01-24T13:58:54Z",
      "updated_at": "2022-02-17T05:51:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r790768636",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790768636"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 50,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790920772",
      "pull_request_review_id": 861215930,
      "id": 790920772,
      "node_id": "PRRC_kwDOABII584vJH5E",
      "diff_hunk": "@@ -639,6 +640,42 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::string HTTPRequest::GetQueryParameter(const std::string& key, const std::string& default_val) const\n+{\n+    std::string uri = evhttp_request_get_uri(req);\n+    auto result = GetQueryParameterFromUri(uri, key, default_val);\n+\n+    return result;\n+}\n+\n+std::string GetQueryParameterFromUri(const std::string& uri, const std::string& key, const std::string& default_val)\n+{\n+    auto query_start = uri.rfind('?');",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 22,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "in_reply_to_id": 790338713,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Agreed and done.",
      "created_at": "2022-01-24T16:26:54Z",
      "updated_at": "2022-01-24T16:26:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r790920772",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790920772"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 653,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792480603",
      "pull_request_review_id": 863331148,
      "id": 792480603,
      "node_id": "PRRC_kwDOABII584vPEtb",
      "diff_hunk": "@@ -14,6 +14,7 @@\n #include <node/context.h>\n #include <primitives/block.h>\n #include <primitives/transaction.h>\n+#include <rest.h>",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: most of the .cpp translation units include their own header file first, before all other includes, i.e.:\r\n\r\n```c++\r\n#include <rest.h>\r\n\r\n#include <blockfilter.h>\r\n#include <chain.h>\r\n#include <chainparams.h>\r\n...\r\n```",
      "created_at": "2022-01-26T10:05:38Z",
      "updated_at": "2022-01-26T12:18:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792480603",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792480603"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792505218",
      "pull_request_review_id": 863331148,
      "id": 792505218,
      "node_id": "PRRC_kwDOABII584vPKuC",
      "diff_hunk": "@@ -0,0 +1,28 @@\n+// Copyright (c) 2015-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_REST_H\n+#define BITCOIN_REST_H\n+\n+#include <string>\n+\n+enum class RetFormat {",
      "path": "src/rest.h",
      "position": null,
      "original_position": 10,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Now that this enum is exposed in the header, consider using a slightly more descriptive name such as `RESTRequestFormat` or similar.",
      "created_at": "2022-01-26T10:35:55Z",
      "updated_at": "2022-01-26T12:18:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792505218",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792505218"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 10,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792506087",
      "pull_request_review_id": 863331148,
      "id": 792506087,
      "node_id": "PRRC_kwDOABII584vPK7n",
      "diff_hunk": "@@ -137,25 +132,30 @@ static ChainstateManager* GetChainman(const std::any& context, HTTPRequest* req)\n     return node_context->chainman.get();\n }\n \n-static RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\n+RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\n {\n-    const std::string::size_type pos = strReq.rfind('.');\n-    if (pos == std::string::npos)\n+    // Remove query string (if any, separated with '?') as it should not interfere with\n+    // parsing param and data format\n+    const std::string::size_type pos_querystr = strReq.rfind('?');\n+    const std::string::size_type pos_format = strReq.rfind('.');\n+    param = strReq.substr(0, std::min(pos_format, pos_querystr));\n+\n+    // No format string is found\n+    if (pos_format == std::string::npos)",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "While touching this line:\r\n\r\n```suggestion\r\n    if (pos_format == std::string::npos) {\r\n```",
      "created_at": "2022-01-26T10:37:03Z",
      "updated_at": "2022-01-26T12:18:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792506087",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792506087"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 144,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792560203",
      "pull_request_review_id": 863331148,
      "id": 792560203,
      "node_id": "PRRC_kwDOABII584vPYJL",
      "diff_hunk": "@@ -0,0 +1,43 @@\n+// Copyright (c) 2012-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <rest.h>\n+#include <test/util/setup_common.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <string>\n+\n+BOOST_FIXTURE_TEST_SUITE(rest_tests, BasicTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(test_query_string)\n+{\n+    std::string param;\n+    RetFormat rf;\n+    // No query string\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RetFormat::JSON);\n+\n+    // Query string with single parameter\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json?p1=v1\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RetFormat::JSON);\n+\n+    // Query string with multiple parameters\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json?p1=v1&p2=v2\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RetFormat::JSON);\n+\n+    // Incorrectly formed query string will not be handled",
      "path": "src/test/rest_tests.cpp",
      "position": 33,
      "original_position": 33,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps also test a URI that contains a `?` before `.`, eg `\"/rest/endpoint/someresource?p1=v1.json\")`",
      "created_at": "2022-01-26T11:51:30Z",
      "updated_at": "2022-01-26T12:18:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792560203",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792560203"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 33,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792564751",
      "pull_request_review_id": 863331148,
      "id": 792564751,
      "node_id": "PRRC_kwDOABII584vPZQP",
      "diff_hunk": "@@ -355,13 +367,30 @@ static bool rest_filter_header(const std::any& context, HTTPRequest* req, const\n \n     std::vector<std::string> uri_parts;\n     boost::split(uri_parts, param, boost::is_any_of(\"/\"));\n-    if (uri_parts.size() != 3) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\");\n+    std::string raw_count {};\n+    size_t blockhash_index {};\n+    if (uri_parts.size() == 3) {\n+        // deprecated path: /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\n+        blockhash_index = 2;\n+        raw_count = uri_parts[1];\n+    }\n+    else if (uri_parts.size() == 2) {",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 116,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n    } else if (uri_parts.size() == 2) {\r\n```",
      "created_at": "2022-01-26T11:58:10Z",
      "updated_at": "2022-01-26T12:18:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792564751",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792564751"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 376,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 377,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792564863",
      "pull_request_review_id": 863331148,
      "id": 792564863,
      "node_id": "PRRC_kwDOABII584vPZR_",
      "diff_hunk": "@@ -355,13 +367,30 @@ static bool rest_filter_header(const std::any& context, HTTPRequest* req, const\n \n     std::vector<std::string> uri_parts;\n     boost::split(uri_parts, param, boost::is_any_of(\"/\"));\n-    if (uri_parts.size() != 3) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\");\n+    std::string raw_count {};\n+    size_t blockhash_index {};\n+    if (uri_parts.size() == 3) {\n+        // deprecated path: /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\n+        blockhash_index = 2;\n+        raw_count = uri_parts[1];\n+    }\n+    else if (uri_parts.size() == 2) {\n+        // new path with query parameter: /rest/blockfilterheaders/<filtertype>/<blockhash>?count=<count>\n+        blockhash_index = 1;\n+        raw_count = req->GetQueryParameter(\"count\", \"5\");\n+    }\n+    else {",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 121,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n    } else {\r\n```",
      "created_at": "2022-01-26T11:58:19Z",
      "updated_at": "2022-01-26T12:18:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792564863",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792564863"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 381,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 382,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792571528",
      "pull_request_review_id": 863331148,
      "id": 792571528,
      "node_id": "PRRC_kwDOABII584vPa6I",
      "diff_hunk": "@@ -83,6 +84,19 @@ class HTTPRequest\n      */\n     RequestMethod GetRequestMethod() const;\n \n+    /** Get the query parameter value from request uri for a specified key.\n+     * Throws std::runtime_error if key does not exist and no default_val is specified.\n+     *\n+     * If the query string contains duplicate keys, the first value is returned. Many web frameworks\n+     * would instead parse this as an array of values, but this is not (yet) implemented as it is\n+     * currently not needed in any of the endpoints.\n+     *\n+     * @param[in] key represents the query parameter of which the value is returned\n+     * @param[in] default_val (optional) is returned if key is not in query string\n+     * @throws std::runtime_error if key is not in query string and no default_val was provided",
      "path": "src/httpserver.h",
      "position": null,
      "original_position": 24,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "We don't usually use exceptions to return error conditions in the Bitcoin Core codebase. If you do this, wherever there's a key that doesn't have a default, the calling code will have to wrap this call in a try/except, and then catch the runtime_error and return it as a RESTERR.\r\n\r\nDid you consider returning a `std::optional<std::string>`, and then using [std::optional<t>::value_or()](https://en.cppreference.com/w/cpp/utility/optional/value_or) to add the default, and [std::optional<t>::has_value()](https://en.cppreference.com/w/cpp/utility/optional/operator_bool) to catch if a non-default option hasn't been set?",
      "created_at": "2022-01-26T12:06:41Z",
      "updated_at": "2022-01-26T12:18:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792571528",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792571528"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792574341",
      "pull_request_review_id": 863331148,
      "id": 792574341,
      "node_id": "PRRC_kwDOABII584vPbmF",
      "diff_hunk": "@@ -355,13 +367,30 @@ static bool rest_filter_header(const std::any& context, HTTPRequest* req, const\n \n     std::vector<std::string> uri_parts;\n     boost::split(uri_parts, param, boost::is_any_of(\"/\"));\n-    if (uri_parts.size() != 3) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\");\n+    std::string raw_count {};\n+    size_t blockhash_index {};\n+    if (uri_parts.size() == 3) {\n+        // deprecated path: /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\n+        blockhash_index = 2;\n+        raw_count = uri_parts[1];\n+    }\n+    else if (uri_parts.size() == 2) {\n+        // new path with query parameter: /rest/blockfilterheaders/<filtertype>/<blockhash>?count=<count>\n+        blockhash_index = 1;\n+        raw_count = req->GetQueryParameter(\"count\", \"5\");\n+    }\n+    else {\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<blockhash>.<ext>?count=<count>\");\n+    }\n+\n+    auto parsed_count = ToIntegral<size_t>(raw_count);",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 125,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Any reason to lose the `const` here?",
      "created_at": "2022-01-26T12:10:01Z",
      "updated_at": "2022-01-26T12:18:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792574341",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792574341"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 386,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792575674",
      "pull_request_review_id": 863331148,
      "id": 792575674,
      "node_id": "PRRC_kwDOABII584vPb66",
      "diff_hunk": "@@ -53,12 +53,13 @@ def skip_test_if_missing_module(self):\n \n     def test_rest_request(self, uri, http_method='GET', req_type=ReqType.JSON, body='', status=200, ret_type=RetType.JSON):\n         rest_uri = '/rest' + uri\n-        if req_type == ReqType.JSON:\n-            rest_uri += '.json'\n-        elif req_type == ReqType.BIN:\n-            rest_uri += '.bin'\n-        elif req_type == ReqType.HEX:\n-            rest_uri += '.hex'\n+        query_string = ''",
      "path": "test/functional/interface_rest.py",
      "position": null,
      "original_position": 10,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Did you consider making `query_string` an optional argument to `test_rest_request()`? It seems a bit contrived to pass the URI without the `req_type` as part of the string, but with the query_string.",
      "created_at": "2022-01-26T12:11:56Z",
      "updated_at": "2022-01-26T12:18:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792575674",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792575674"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792640696",
      "pull_request_review_id": 863546474,
      "id": 792640696,
      "node_id": "PRRC_kwDOABII584vPry4",
      "diff_hunk": "@@ -14,6 +14,7 @@\n #include <node/context.h>\n #include <primitives/block.h>\n #include <primitives/transaction.h>\n+#include <rest.h>",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": 792480603,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-01-26T13:34:37Z",
      "updated_at": "2022-01-26T13:34:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792640696",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792640696"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792641514",
      "pull_request_review_id": 863547266,
      "id": 792641514,
      "node_id": "PRRC_kwDOABII584vPr_q",
      "diff_hunk": "@@ -137,25 +132,30 @@ static ChainstateManager* GetChainman(const std::any& context, HTTPRequest* req)\n     return node_context->chainman.get();\n }\n \n-static RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\n+RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\n {\n-    const std::string::size_type pos = strReq.rfind('.');\n-    if (pos == std::string::npos)\n+    // Remove query string (if any, separated with '?') as it should not interfere with\n+    // parsing param and data format\n+    const std::string::size_type pos_querystr = strReq.rfind('?');\n+    const std::string::size_type pos_format = strReq.rfind('.');\n+    param = strReq.substr(0, std::min(pos_format, pos_querystr));\n+\n+    // No format string is found\n+    if (pos_format == std::string::npos)",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": 792506087,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-01-26T13:35:24Z",
      "updated_at": "2022-01-26T13:35:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792641514",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792641514"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 144,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792642855",
      "pull_request_review_id": 863548668,
      "id": 792642855,
      "node_id": "PRRC_kwDOABII584vPsUn",
      "diff_hunk": "@@ -355,13 +367,30 @@ static bool rest_filter_header(const std::any& context, HTTPRequest* req, const\n \n     std::vector<std::string> uri_parts;\n     boost::split(uri_parts, param, boost::is_any_of(\"/\"));\n-    if (uri_parts.size() != 3) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\");\n+    std::string raw_count {};\n+    size_t blockhash_index {};\n+    if (uri_parts.size() == 3) {\n+        // deprecated path: /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\n+        blockhash_index = 2;\n+        raw_count = uri_parts[1];\n+    }\n+    else if (uri_parts.size() == 2) {",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 116,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": 792564751,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-01-26T13:36:42Z",
      "updated_at": "2022-01-26T13:36:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792642855",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792642855"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 376,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 377,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792643188",
      "pull_request_review_id": 863548989,
      "id": 792643188,
      "node_id": "PRRC_kwDOABII584vPsZ0",
      "diff_hunk": "@@ -355,13 +367,30 @@ static bool rest_filter_header(const std::any& context, HTTPRequest* req, const\n \n     std::vector<std::string> uri_parts;\n     boost::split(uri_parts, param, boost::is_any_of(\"/\"));\n-    if (uri_parts.size() != 3) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\");\n+    std::string raw_count {};\n+    size_t blockhash_index {};\n+    if (uri_parts.size() == 3) {\n+        // deprecated path: /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\n+        blockhash_index = 2;\n+        raw_count = uri_parts[1];\n+    }\n+    else if (uri_parts.size() == 2) {\n+        // new path with query parameter: /rest/blockfilterheaders/<filtertype>/<blockhash>?count=<count>\n+        blockhash_index = 1;\n+        raw_count = req->GetQueryParameter(\"count\", \"5\");\n+    }\n+    else {",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 121,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": 792564863,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2022-01-26T13:37:00Z",
      "updated_at": "2022-01-26T13:37:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r792643188",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/792643188"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 381,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 382,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/794018163",
      "pull_request_review_id": 865456047,
      "id": 794018163,
      "node_id": "PRRC_kwDOABII584vU8Fz",
      "diff_hunk": "@@ -0,0 +1,28 @@\n+// Copyright (c) 2015-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_REST_H\n+#define BITCOIN_REST_H\n+\n+#include <string>\n+\n+enum class RetFormat {",
      "path": "src/rest.h",
      "position": null,
      "original_position": 10,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": 792505218,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That's a good idea. I've scripted-diff renamed `RetFormat` to `RESTResponseFormat`, since this enum is currently only used to describe response format.",
      "created_at": "2022-01-27T21:36:05Z",
      "updated_at": "2022-01-27T21:36:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r794018163",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/794018163"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 10,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/794057503",
      "pull_request_review_id": 865510840,
      "id": 794057503,
      "node_id": "PRRC_kwDOABII584vVFsf",
      "diff_hunk": "@@ -355,13 +367,30 @@ static bool rest_filter_header(const std::any& context, HTTPRequest* req, const\n \n     std::vector<std::string> uri_parts;\n     boost::split(uri_parts, param, boost::is_any_of(\"/\"));\n-    if (uri_parts.size() != 3) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\");\n+    std::string raw_count {};\n+    size_t blockhash_index {};\n+    if (uri_parts.size() == 3) {\n+        // deprecated path: /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\n+        blockhash_index = 2;\n+        raw_count = uri_parts[1];\n+    }\n+    else if (uri_parts.size() == 2) {\n+        // new path with query parameter: /rest/blockfilterheaders/<filtertype>/<blockhash>?count=<count>\n+        blockhash_index = 1;\n+        raw_count = req->GetQueryParameter(\"count\", \"5\");\n+    }\n+    else {\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<blockhash>.<ext>?count=<count>\");\n+    }\n+\n+    auto parsed_count = ToIntegral<size_t>(raw_count);",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 125,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": 792574341,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good catch, this is leftover from before I introduced the new `raw_count` variable but indeed should be `const` now. Fixed in both `rest_headers` and `rest_filter_header`.",
      "created_at": "2022-01-27T22:34:05Z",
      "updated_at": "2022-01-27T22:34:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r794057503",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/794057503"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 386,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/794060223",
      "pull_request_review_id": 865514316,
      "id": 794060223,
      "node_id": "PRRC_kwDOABII584vVGW_",
      "diff_hunk": "@@ -83,6 +84,19 @@ class HTTPRequest\n      */\n     RequestMethod GetRequestMethod() const;\n \n+    /** Get the query parameter value from request uri for a specified key.\n+     * Throws std::runtime_error if key does not exist and no default_val is specified.\n+     *\n+     * If the query string contains duplicate keys, the first value is returned. Many web frameworks\n+     * would instead parse this as an array of values, but this is not (yet) implemented as it is\n+     * currently not needed in any of the endpoints.\n+     *\n+     * @param[in] key represents the query parameter of which the value is returned\n+     * @param[in] default_val (optional) is returned if key is not in query string\n+     * @throws std::runtime_error if key is not in query string and no default_val was provided",
      "path": "src/httpserver.h",
      "position": null,
      "original_position": 24,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": 792571528,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I did not consider that, but that's a great idea. I've taken it a bit further, and removed the `default_val` optional argument from GetQueryParameter, since this functionality can now just as easily be achieved in the headers endpoints by using `std::optional::value_or()` as you suggested, slightly reducing complexity of the code.",
      "created_at": "2022-01-27T22:38:51Z",
      "updated_at": "2022-01-27T22:38:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r794060223",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/794060223"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/794117941",
      "pull_request_review_id": 865589844,
      "id": 794117941,
      "node_id": "PRRC_kwDOABII584vVUc1",
      "diff_hunk": "@@ -0,0 +1,43 @@\n+// Copyright (c) 2012-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <rest.h>\n+#include <test/util/setup_common.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <string>\n+\n+BOOST_FIXTURE_TEST_SUITE(rest_tests, BasicTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(test_query_string)\n+{\n+    std::string param;\n+    RetFormat rf;\n+    // No query string\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RetFormat::JSON);\n+\n+    // Query string with single parameter\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json?p1=v1\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RetFormat::JSON);\n+\n+    // Query string with multiple parameters\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json?p1=v1&p2=v2\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RetFormat::JSON);\n+\n+    // Incorrectly formed query string will not be handled",
      "path": "src/test/rest_tests.cpp",
      "position": 33,
      "original_position": 33,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": 792560203,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added an additional test case. More importantly, the handling of this edge case led me to simplify `ParseDataFormat` by refactoring out the `pos_querystr` variable.",
      "created_at": "2022-01-28T00:52:06Z",
      "updated_at": "2022-01-28T00:52:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r794117941",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/794117941"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 33,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/794155094",
      "pull_request_review_id": 865633185,
      "id": 794155094,
      "node_id": "PRRC_kwDOABII584vVdhW",
      "diff_hunk": "@@ -53,12 +53,13 @@ def skip_test_if_missing_module(self):\n \n     def test_rest_request(self, uri, http_method='GET', req_type=ReqType.JSON, body='', status=200, ret_type=RetType.JSON):\n         rest_uri = '/rest' + uri\n-        if req_type == ReqType.JSON:\n-            rest_uri += '.json'\n-        elif req_type == ReqType.BIN:\n-            rest_uri += '.bin'\n-        elif req_type == ReqType.HEX:\n-            rest_uri += '.hex'\n+        query_string = ''",
      "path": "test/functional/interface_rest.py",
      "position": null,
      "original_position": 10,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": 792575674,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I agree, that's a more elegant solution. To facilitate dynamic URI creation, I've added a `query_params` kwargs to `test_rest_request()` which is then encoded into a query string.",
      "created_at": "2022-01-28T02:16:50Z",
      "updated_at": "2022-01-28T02:16:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r794155094",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/794155094"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 56,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813673702",
      "pull_request_review_id": 892152112,
      "id": 813673702,
      "node_id": "PRRC_kwDOABII584wf6zm",
      "diff_hunk": "@@ -133,25 +133,28 @@ static ChainstateManager* GetChainman(const std::any& context, HTTPRequest* req)\n     return node_context->chainman.get();\n }\n \n-static RESTResponseFormat ParseDataFormat(std::string& param, const std::string& strReq)\n+RESTResponseFormat ParseDataFormat(std::string& param, const std::string& strReq)\n {\n-    const std::string::size_type pos = strReq.rfind('.');\n-    if (pos == std::string::npos)\n-    {\n-        param = strReq;\n-        return rf_names[0].rf;\n-    }\n+    // Remove query string (if any, separated with '?') as it should not interfere with\n+    // parsing param and data format\n+    param = strReq.substr(0, strReq.rfind('?'));\n+    const std::string::size_type pos_format = param.rfind('.');\n \n-    param = strReq.substr(0, pos);\n-    const std::string suff(strReq, pos + 1);\n+    // No format string is found\n+    if (pos_format == std::string::npos)\n+        return rf_names[0].rf;\n \n+    // Match format string to available formats\n+    auto len_suff = param.size() - pos_format - 1;  // - 1 so we don't include the leading .\n+    const std::string suff(param, pos_format + 1, len_suff);",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "833803e9aa4a107d9b48d0fb51b360b1b3df3b21",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Calculating the length shouldn't be necessary here, you can simply omit the third parameter of the ctor to get the sub-string from pos_format + 1 to the end:\r\n```suggestion\r\n    const std::string suff(param, pos_format + 1);\r\n```\r\n(I checked that tests still pass after this change)\r\nAlso, I'd suggest to rename \"suff\" to \"suffix\" to make it more clear (nit though)",
      "created_at": "2022-02-24T09:01:36Z",
      "updated_at": "2022-02-24T09:22:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r813673702",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813673702"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 148,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 149,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813677594",
      "pull_request_review_id": 892152112,
      "id": 813677594,
      "node_id": "PRRC_kwDOABII584wf7wa",
      "diff_hunk": "@@ -14,6 +14,15 @@ enum class RESTResponseFormat {\n     JSON,\n };\n \n+/**\n+ * Parse a URI to get the data format and URI without data format\n+ * and query string.\n+ *\n+ * @param[out]  param       The strReq without the data format string and\n+ *                          without the query string (if any).\n+ * @param[in]   strReq      The URI to be parsed.\n+ * @return      RESTResponseFormat   RESTResponseFormat that was parsed from the URI.",
      "path": "src/rest.h",
      "position": null,
      "original_position": 11,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "833803e9aa4a107d9b48d0fb51b360b1b3df3b21",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: no reason to explicitly menton the return type here before the description (we don't do that usually as far as I saw)\r\n```suggestion\r\n * @return      RESTResponseFormat that was parsed from the URI.\r\n```",
      "created_at": "2022-02-24T09:07:07Z",
      "updated_at": "2022-02-24T09:22:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r813677594",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813677594"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813684530",
      "pull_request_review_id": 892152112,
      "id": 813684530,
      "node_id": "PRRC_kwDOABII584wf9cy",
      "diff_hunk": "@@ -0,0 +1,48 @@\n+// Copyright (c) 2012-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <rest.h>\n+#include <test/util/setup_common.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <string>\n+\n+BOOST_FIXTURE_TEST_SUITE(rest_tests, BasicTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(test_query_string)\n+{\n+    std::string param;\n+    RESTResponseFormat rf;\n+    // No query string\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RESTResponseFormat::JSON);\n+\n+    // Query string with single parameter\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json?p1=v1\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RESTResponseFormat::JSON);",
      "path": "src/test/rest_tests.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "833803e9aa4a107d9b48d0fb51b360b1b3df3b21",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Could use .bin here (and .hex below, or vice versa) to also test all the different response formats.",
      "created_at": "2022-02-24T09:16:05Z",
      "updated_at": "2022-02-24T09:22:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r813684530",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813684530"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 24,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813689385",
      "pull_request_review_id": 892152112,
      "id": 813689385,
      "node_id": "PRRC_kwDOABII584wf-op",
      "diff_hunk": "@@ -0,0 +1,22 @@\n+Notable changes\n+===============\n+\n+Updated REST APIs\n+-----------------\n+\n+- The `/headers/` and `/blockfilterheaders/` endpoints have been updated to use\n+  a query parameter instead of path parameter to specify the result count. The\n+  count parameter is now optional, and defaults to 5 for both endpoints. The old\n+  endpoints are still functional, and have no documented behaviour change.\n+\n+  For `/headers`, use\n+  `GET /rest/headers/<BLOCK-HASH>.<bin|hex|json>?count=<COUNT=5>`\n+  instead of\n+  `GET /rest/headers/<COUNT>/<BLOCK-HASH>.<bin|hex|json>` (deprecated)\n+\n+  For `/blockfilterheaders/`, use\n+  `GET /rest/blockfilterheaders/<FILTERTYPE>/<BLOCK-HASH>.<bin|hex|json>?count=<COUNT=5>`\n+  instead of\n+  `GET /rest/blockfilterheaders/<FILTERTYPE>/<COUNT>/<BLOCK-HASH>.<bin|hex|json>`",
      "path": "doc/release-notes-24098.md",
      "position": null,
      "original_position": 20,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "6628e8f3b0578ec09611c82011dd2e282ed42064",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: to be consistent with the headers description above:\r\n```suggestion\r\n  `GET /rest/blockfilterheaders/<FILTERTYPE>/<COUNT>/<BLOCK-HASH>.<bin|hex|json> (deprecated)`\r\n```",
      "created_at": "2022-02-24T09:21:58Z",
      "updated_at": "2022-02-24T09:22:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r813689385",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813689385"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813691095",
      "pull_request_review_id": 892176455,
      "id": 813691095,
      "node_id": "PRRC_kwDOABII584wf_DX",
      "diff_hunk": "@@ -137,25 +132,30 @@ static ChainstateManager* GetChainman(const std::any& context, HTTPRequest* req)\n     return node_context->chainman.get();\n }\n \n-static RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\n+RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\n {\n-    const std::string::size_type pos = strReq.rfind('.');\n-    if (pos == std::string::npos)\n+    // Remove query string (if any, separated with '?') as it should not interfere with\n+    // parsing param and data format\n+    const std::string::size_type pos_querystr = strReq.rfind('?');\n+    const std::string::size_type pos_format = strReq.rfind('.');\n+    param = strReq.substr(0, std::min(pos_format, pos_querystr));\n+\n+    // No format string is found\n+    if (pos_format == std::string::npos)",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": 792506087,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This doesn't seem to be resolved?",
      "created_at": "2022-02-24T09:24:04Z",
      "updated_at": "2022-02-24T09:24:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r813691095",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/813691095"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 144,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814054421",
      "pull_request_review_id": 892688043,
      "id": 814054421,
      "node_id": "PRRC_kwDOABII584whXwV",
      "diff_hunk": "@@ -0,0 +1,22 @@\n+Notable changes\n+===============\n+\n+Updated REST APIs\n+-----------------\n+\n+- The `/headers/` and `/blockfilterheaders/` endpoints have been updated to use\n+  a query parameter instead of path parameter to specify the result count. The\n+  count parameter is now optional, and defaults to 5 for both endpoints. The old\n+  endpoints are still functional, and have no documented behaviour change.\n+\n+  For `/headers`, use\n+  `GET /rest/headers/<BLOCK-HASH>.<bin|hex|json>?count=<COUNT=5>`\n+  instead of\n+  `GET /rest/headers/<COUNT>/<BLOCK-HASH>.<bin|hex|json>` (deprecated)\n+\n+  For `/blockfilterheaders/`, use\n+  `GET /rest/blockfilterheaders/<FILTERTYPE>/<BLOCK-HASH>.<bin|hex|json>?count=<COUNT=5>`\n+  instead of\n+  `GET /rest/blockfilterheaders/<FILTERTYPE>/<COUNT>/<BLOCK-HASH>.<bin|hex|json>`",
      "path": "doc/release-notes-24098.md",
      "position": null,
      "original_position": 20,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "6628e8f3b0578ec09611c82011dd2e282ed42064",
      "in_reply_to_id": 813689385,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks, fixed",
      "created_at": "2022-02-24T16:27:49Z",
      "updated_at": "2022-02-24T16:27:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r814054421",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814054421"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814061217",
      "pull_request_review_id": 892697994,
      "id": 814061217,
      "node_id": "PRRC_kwDOABII584whZah",
      "diff_hunk": "@@ -133,25 +133,28 @@ static ChainstateManager* GetChainman(const std::any& context, HTTPRequest* req)\n     return node_context->chainman.get();\n }\n \n-static RESTResponseFormat ParseDataFormat(std::string& param, const std::string& strReq)\n+RESTResponseFormat ParseDataFormat(std::string& param, const std::string& strReq)\n {\n-    const std::string::size_type pos = strReq.rfind('.');\n-    if (pos == std::string::npos)\n-    {\n-        param = strReq;\n-        return rf_names[0].rf;\n-    }\n+    // Remove query string (if any, separated with '?') as it should not interfere with\n+    // parsing param and data format\n+    param = strReq.substr(0, strReq.rfind('?'));\n+    const std::string::size_type pos_format = param.rfind('.');\n \n-    param = strReq.substr(0, pos);\n-    const std::string suff(strReq, pos + 1);\n+    // No format string is found\n+    if (pos_format == std::string::npos)\n+        return rf_names[0].rf;\n \n+    // Match format string to available formats\n+    auto len_suff = param.size() - pos_format - 1;  // - 1 so we don't include the leading .\n+    const std::string suff(param, pos_format + 1, len_suff);",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "833803e9aa4a107d9b48d0fb51b360b1b3df3b21",
      "in_reply_to_id": 813673702,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah yes, you're right, that is more elegant. Updated to your suggestion, and also renamed `suff` to `suffix`.",
      "created_at": "2022-02-24T16:35:14Z",
      "updated_at": "2022-02-24T16:35:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r814061217",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814061217"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 148,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 149,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814068387",
      "pull_request_review_id": 892707128,
      "id": 814068387,
      "node_id": "PRRC_kwDOABII584whbKj",
      "diff_hunk": "@@ -14,6 +14,15 @@ enum class RESTResponseFormat {\n     JSON,\n };\n \n+/**\n+ * Parse a URI to get the data format and URI without data format\n+ * and query string.\n+ *\n+ * @param[out]  param       The strReq without the data format string and\n+ *                          without the query string (if any).\n+ * @param[in]   strReq      The URI to be parsed.\n+ * @return      RESTResponseFormat   RESTResponseFormat that was parsed from the URI.",
      "path": "src/rest.h",
      "position": null,
      "original_position": 11,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "833803e9aa4a107d9b48d0fb51b360b1b3df3b21",
      "in_reply_to_id": 813677594,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Okay didn't know, thanks, and you're right, by far most places in this codebase don't include the return type. Fixed",
      "created_at": "2022-02-24T16:42:31Z",
      "updated_at": "2022-02-24T16:42:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r814068387",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814068387"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814074503",
      "pull_request_review_id": 892715938,
      "id": 814074503,
      "node_id": "PRRC_kwDOABII584whcqH",
      "diff_hunk": "@@ -0,0 +1,48 @@\n+// Copyright (c) 2012-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <rest.h>\n+#include <test/util/setup_common.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <string>\n+\n+BOOST_FIXTURE_TEST_SUITE(rest_tests, BasicTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(test_query_string)\n+{\n+    std::string param;\n+    RESTResponseFormat rf;\n+    // No query string\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RESTResponseFormat::JSON);\n+\n+    // Query string with single parameter\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json?p1=v1\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RESTResponseFormat::JSON);",
      "path": "src/test/rest_tests.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "833803e9aa4a107d9b48d0fb51b360b1b3df3b21",
      "in_reply_to_id": 813684530,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Like the idea, incorporated!",
      "created_at": "2022-02-24T16:49:37Z",
      "updated_at": "2022-02-24T16:49:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r814074503",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814074503"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 24,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814074996",
      "pull_request_review_id": 892716565,
      "id": 814074996,
      "node_id": "PRRC_kwDOABII584whcx0",
      "diff_hunk": "@@ -0,0 +1,48 @@\n+// Copyright (c) 2012-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <rest.h>\n+#include <test/util/setup_common.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+#include <string>\n+\n+BOOST_FIXTURE_TEST_SUITE(rest_tests, BasicTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(test_query_string)\n+{\n+    std::string param;\n+    RESTResponseFormat rf;\n+    // No query string\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RESTResponseFormat::JSON);\n+\n+    // Query string with single parameter\n+    rf = ParseDataFormat(param, \"/rest/endpoint/someresource.json?p1=v1\");\n+    BOOST_CHECK_EQUAL(param, \"/rest/endpoint/someresource\");\n+    BOOST_CHECK_EQUAL(rf, RESTResponseFormat::JSON);",
      "path": "src/test/rest_tests.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "833803e9aa4a107d9b48d0fb51b360b1b3df3b21",
      "in_reply_to_id": 813684530,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Like the idea, incorporated!",
      "created_at": "2022-02-24T16:50:06Z",
      "updated_at": "2022-02-24T16:50:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r814074996",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814074996"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 24,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814711077",
      "pull_request_review_id": 893593394,
      "id": 814711077,
      "node_id": "PRRC_kwDOABII584wj4El",
      "diff_hunk": "@@ -137,25 +132,30 @@ static ChainstateManager* GetChainman(const std::any& context, HTTPRequest* req)\n     return node_context->chainman.get();\n }\n \n-static RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\n+RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\n {\n-    const std::string::size_type pos = strReq.rfind('.');\n-    if (pos == std::string::npos)\n+    // Remove query string (if any, separated with '?') as it should not interfere with\n+    // parsing param and data format\n+    const std::string::size_type pos_querystr = strReq.rfind('?');\n+    const std::string::size_type pos_format = strReq.rfind('.');\n+    param = strReq.substr(0, std::min(pos_format, pos_querystr));\n+\n+    // No format string is found\n+    if (pos_format == std::string::npos)",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e1822e79b3d5230f976360e5500d7ef59dd8783c",
      "in_reply_to_id": 792506087,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sorry, I think I refactored it out again after simplifying `ParseDataFormat` a bit more. Didn't realize our coding style preferred brackets for single-statement multi-line `if` statements. Added brackets again, thanks for catching this.",
      "created_at": "2022-02-25T11:59:23Z",
      "updated_at": "2022-02-25T11:59:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r814711077",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/814711077"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 144,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/815467602",
      "pull_request_review_id": 894526815,
      "id": 815467602,
      "node_id": "PRRC_kwDOABII584wmwxS",
      "diff_hunk": "@@ -47,18 +47,24 @@ The HTTP request and response are both handled entirely in-memory.\n With the /notxdetails/ option JSON response will only contain the transaction hash instead of the complete transaction details. The option only affects the JSON response.\n \n #### Blockheaders\n-`GET /rest/headers/<COUNT>/<BLOCK-HASH>.<bin|hex|json>`\n+`GET /rest/headers/<BLOCK-HASH>.<bin|hex|json>?count=<COUNT=5>`",
      "path": "doc/REST-interface.md",
      "position": 5,
      "original_position": 5,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "in_reply_to_id": 790336549,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "To conclude, I agree with promag that `/headers/` and `/blockfilterheaders/` are collection endpoints since we're not obtaining a resource identified by the specified `block_hash` but rather use it as a pagination parameter. I didn't properly realise this at first. \r\n\r\nGiven that 1) this PR has had quite a bit of review time already which I'd rather not overhaul too much and 2) these and the other updates (moving `format` and `notxdetails` to a query parameter) make sense to implement together, I'll implement this in a follow up PR (I've already briefly started but it will take a bit more time as I'm thinking about ways to minimise the maintenance burden of keeping backwards compatibility).",
      "created_at": "2022-02-27T17:15:08Z",
      "updated_at": "2022-02-27T17:15:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r815467602",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/815467602"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 50,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816327908",
      "pull_request_review_id": 895699215,
      "id": 816327908,
      "node_id": "PRRC_kwDOABII584wqCzk",
      "diff_hunk": "@@ -639,6 +641,39 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    auto uri = evhttp_request_get_uri(req);\n+    auto result = GetQueryParameterFromUri(uri, key);\n+\n+    return result;",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "b5d8761251eb7d08f8166593190a0eba8e2304af",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: could just directly return the result of the helper instead of storing it in a variable:\r\n```suggestion\r\n    return GetQueryParameterFromUri(uri, key);\r\n```",
      "created_at": "2022-02-28T23:22:34Z",
      "updated_at": "2022-03-01T00:04:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816327908",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816327908"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 647,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 649,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816331148",
      "pull_request_review_id": 895699215,
      "id": 816331148,
      "node_id": "PRRC_kwDOABII584wqDmM",
      "diff_hunk": "@@ -639,6 +641,39 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    auto uri = evhttp_request_get_uri(req);\n+    auto result = GetQueryParameterFromUri(uri, key);\n+\n+    return result;\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    auto uri_parsed = evhttp_uri_parse(uri);",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 37,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "b5d8761251eb7d08f8166593190a0eba8e2304af",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Personally I'm not a fan of using the auto keyword for results of external C library calls (or any other calls that return pointers to objects, especially if they need further calls to clean up). It's less to type, but overall harder to reason about the code, IMHO.",
      "created_at": "2022-02-28T23:29:31Z",
      "updated_at": "2022-03-01T00:04:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816331148",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816331148"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 654,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816336581",
      "pull_request_review_id": 895699215,
      "id": 816336581,
      "node_id": "PRRC_kwDOABII584wqE7F",
      "diff_hunk": "@@ -639,6 +641,39 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    auto uri = evhttp_request_get_uri(req);\n+    auto result = GetQueryParameterFromUri(uri, key);\n+\n+    return result;\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    auto uri_parsed = evhttp_uri_parse(uri);\n+    auto query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result {};",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "b5d8761251eb7d08f8166593190a0eba8e2304af",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: As far as I know we usually don't explicitly specify the empty ctor (there are also instances of those in other commits).\r\n```suggestion\r\n    std::optional<std::string> result;\r\n```",
      "created_at": "2022-02-28T23:41:18Z",
      "updated_at": "2022-03-01T00:04:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816336581",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816336581"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 656,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816340504",
      "pull_request_review_id": 895699215,
      "id": 816340504,
      "node_id": "PRRC_kwDOABII584wqF4Y",
      "diff_hunk": "@@ -194,15 +194,25 @@ static bool rest_headers(const std::any& context,\n     std::vector<std::string> path;\n     boost::split(path, param, boost::is_any_of(\"/\"));\n \n-    if (path.size() != 2)\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n-\n-    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    std::string raw_count {};\n+    std::string hashStr {};\n+    if (path.size() == 2) {\n+        // deprecated path: /rest/headers/<count>/<hash>\n+        hashStr = path[1];\n+        raw_count = path[0];\n+    } else if (path.size() == 1) {\n+        // new path with query parameter: /rest/headers/<hash>?count=<count>\n+        hashStr = path[0];\n+        raw_count = req->GetQueryParameter(\"count\").value_or(\"5\");\n+    } else {\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid request. Use /rest/headers/<hash>.<ext>?count=<count>\");",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 19,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "e87b32e8eac127de20f0d2ad538f376cb01fc8ef",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: For consistency reasons, could adapt to the corresponding error message format for blockfilterheaders:\r\n```suggestion\r\n        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/headers/<hash>.<ext>?count=<count>\");\r\n```\r\n",
      "created_at": "2022-02-28T23:50:17Z",
      "updated_at": "2022-03-01T00:04:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816340504",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816340504"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 208,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816721604",
      "pull_request_review_id": 896234865,
      "id": 816721604,
      "node_id": "PRRC_kwDOABII584wri7E",
      "diff_hunk": "@@ -639,6 +641,39 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    auto uri = evhttp_request_get_uri(req);\n+    auto result = GetQueryParameterFromUri(uri, key);\n+\n+    return result;\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    auto uri_parsed = evhttp_uri_parse(uri);",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 37,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "b5d8761251eb7d08f8166593190a0eba8e2304af",
      "in_reply_to_id": 816331148,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I hadn't considered this but I agree - updated this and in `HTTPRequest::GetQueryParameter`.",
      "created_at": "2022-03-01T12:23:29Z",
      "updated_at": "2022-03-01T12:23:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816721604",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816721604"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 654,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816721799",
      "pull_request_review_id": 896235143,
      "id": 816721799,
      "node_id": "PRRC_kwDOABII584wri-H",
      "diff_hunk": "@@ -639,6 +641,39 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    auto uri = evhttp_request_get_uri(req);\n+    auto result = GetQueryParameterFromUri(uri, key);\n+\n+    return result;\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    auto uri_parsed = evhttp_uri_parse(uri);\n+    auto query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result {};",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "b5d8761251eb7d08f8166593190a0eba8e2304af",
      "in_reply_to_id": 816336581,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks, I wasn't aware of this convention. I've updated this and 3 other zero-inits of `std::string`. I'm still zero-init'ing `size_t blockhash_index {};` as to my understanding `long` doesn't have a default ctor and this could be unsafe otherwise.",
      "created_at": "2022-03-01T12:23:47Z",
      "updated_at": "2022-03-01T12:23:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816721799",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816721799"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 656,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816772746",
      "pull_request_review_id": 896306255,
      "id": 816772746,
      "node_id": "PRRC_kwDOABII584wrvaK",
      "diff_hunk": "@@ -639,6 +641,38 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    const char* uri = evhttp_request_get_uri(req);\n+\n+    return GetQueryParameterFromUri(uri, key);\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    evhttp_uri* uri_parsed = evhttp_uri_parse(uri);\n+    const char* query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result;\n+\n+    if (query) {\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;\n+        evhttp_parse_query_str(query, &params_q);\n+\n+        struct evkeyval* param;\n+        for (param = params_q.tqh_first; param; param = param->next.tqe_next) {\n+            if (param->key == key) {\n+                result = param->value;\n+                break;\n+            }\n+        }\n+        evhttp_clear_headers(&params_q);",
      "path": "src/httpserver.cpp",
      "position": 51,
      "original_position": 52,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "25cd29e6bd368571dd718001e04e4ecf1acf0566",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Are you sure this `evhttp_clear_headers()` call is necessary? The `evkeyvalq` struct is destructed immediately after this.",
      "created_at": "2022-03-01T13:35:34Z",
      "updated_at": "2022-03-01T13:47:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816772746",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816772746"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 668,
      "original_line": 668,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816773015",
      "pull_request_review_id": 896306255,
      "id": 816773015,
      "node_id": "PRRC_kwDOABII584wrveX",
      "diff_hunk": "@@ -639,6 +641,38 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    const char* uri = evhttp_request_get_uri(req);\n+\n+    return GetQueryParameterFromUri(uri, key);\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    evhttp_uri* uri_parsed = evhttp_uri_parse(uri);\n+    const char* query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result;\n+\n+    if (query) {\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;",
      "path": "src/httpserver.cpp",
      "position": 42,
      "original_position": 42,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "25cd29e6bd368571dd718001e04e4ecf1acf0566",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is the `struct` keyword needed here?\r\n\r\n```suggestion\r\n       evkeyvalq params_q;\r\n```",
      "created_at": "2022-03-01T13:35:54Z",
      "updated_at": "2022-03-01T13:47:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816773015",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816773015"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 659,
      "original_line": 659,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816776356",
      "pull_request_review_id": 896306255,
      "id": 816776356,
      "node_id": "PRRC_kwDOABII584wrwSk",
      "diff_hunk": "@@ -639,6 +641,38 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    const char* uri = evhttp_request_get_uri(req);\n+\n+    return GetQueryParameterFromUri(uri, key);\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    evhttp_uri* uri_parsed = evhttp_uri_parse(uri);\n+    const char* query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result;\n+\n+    if (query) {\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;\n+        evhttp_parse_query_str(query, &params_q);\n+\n+        struct evkeyval* param;\n+        for (param = params_q.tqh_first; param; param = param->next.tqe_next) {",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "25cd29e6bd368571dd718001e04e4ecf1acf0566",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'd suggest a couple of changes:\r\n\r\n- put the `param` declaration in the for loop init-statement\r\n- explicitly compare `param` with `nullptr`:\r\n\r\n```suggestion\r\n        for (evkeyval* param{params_q.tqh_first}; param != nullptr; param = param->next.tqe_next) {\r\n```",
      "created_at": "2022-03-01T13:39:58Z",
      "updated_at": "2022-03-01T13:47:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816776356",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816776356"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 662,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 663,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816781335",
      "pull_request_review_id": 896306255,
      "id": 816781335,
      "node_id": "PRRC_kwDOABII584wrxgX",
      "diff_hunk": "@@ -351,17 +360,32 @@ static bool rest_filter_header(const std::any& context, HTTPRequest* req, const\n     if (!CheckWarmup(req)) return false;\n \n     std::string param;\n-    const RetFormat rf = ParseDataFormat(param, strURIPart);\n+    const RESTResponseFormat rf = ParseDataFormat(param, strURIPart);\n \n     std::vector<std::string> uri_parts;\n     boost::split(uri_parts, param, boost::is_any_of(\"/\"));\n-    if (uri_parts.size() != 3) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\");\n+    std::string raw_count;\n+    size_t blockhash_index {};",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 196,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "25cd29e6bd368571dd718001e04e4ecf1acf0566",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What do you think about handling the blockhash in the same way as the count:\r\n\r\n```diff\r\n--- a/src/rest.cpp\r\n+++ b/src/rest.cpp\r\n@@ -365,14 +365,14 @@ static bool rest_filter_header(const std::any& context, HTTPRequest* req, const\r\n     std::vector<std::string> uri_parts;\r\n     boost::split(uri_parts, param, boost::is_any_of(\"/\"));\r\n     std::string raw_count;\r\n-    size_t blockhash_index {};\r\n+    std::string raw_blockhash;\r\n     if (uri_parts.size() == 3) {\r\n         // deprecated path: /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\r\n-        blockhash_index = 2;\r\n+        raw_blockhash = uri_parts[2];\r\n         raw_count = uri_parts[1];\r\n     } else if (uri_parts.size() == 2) {\r\n         // new path with query parameter: /rest/blockfilterheaders/<filtertype>/<blockhash>?count=<count>\r\n-        blockhash_index = 1;\r\n+        raw_blockhash = uri_parts[1];\r\n         raw_count = req->GetQueryParameter(\"count\").value_or(\"5\");\r\n     } else {\r\n         return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<blockhash>.<ext>?count=<count>\");\r\n@@ -384,8 +384,8 @@ static bool rest_filter_header(const std::any& context, HTTPRequest* req, const\r\n     }\r\n \r\n     uint256 block_hash;\r\n-    if (!ParseHashStr(uri_parts[blockhash_index], block_hash)) {\r\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid hash: \" + uri_parts[blockhash_index]);\r\n+    if (!ParseHashStr(raw_blockhash, block_hash)) {\r\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid hash: \" + raw_blockhash);\r\n     }\r\n \r\n     BlockFilterType filtertype;\r\n```",
      "created_at": "2022-03-01T13:46:13Z",
      "updated_at": "2022-03-01T13:47:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816781335",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816781335"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 368,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816865897",
      "pull_request_review_id": 896438582,
      "id": 816865897,
      "node_id": "PRRC_kwDOABII584wsGJp",
      "diff_hunk": "@@ -639,6 +641,38 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    const char* uri = evhttp_request_get_uri(req);\n+\n+    return GetQueryParameterFromUri(uri, key);\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    evhttp_uri* uri_parsed = evhttp_uri_parse(uri);\n+    const char* query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result;\n+\n+    if (query) {\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;",
      "path": "src/httpserver.cpp",
      "position": 42,
      "original_position": 42,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "25cd29e6bd368571dd718001e04e4ecf1acf0566",
      "in_reply_to_id": 816773015,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This confused me too. I don't see how it's necessary to keep it, but that's how libevent [documents](https://libevent.org/doc/http_8h_source.html) it and also how it's already used [everywhere](https://github.com/bitcoin/bitcoin/search?q=evkeyvalq) ([1](https://github.com/bitcoin/bitcoin/blob/767ee2e3a1082468b4e2248bac3ef8bd54bb2ddb/src/httpserver.cpp#L525), [2](https://github.com/bitcoin/bitcoin/blob/767ee2e3a1082468b4e2248bac3ef8bd54bb2ddb/src/httpserver.cpp#L556), [3](https://github.com/bitcoin/bitcoin/blob/3c565302aaa91ae46aa09b8aeb95206711d9d8a6/src/bitcoin-cli.cpp#L766)) in Bitcoin Core, as well as in most (all?) unofficial examples/documentation you can find online. I thought it might be a good idea to keep it to stay in line with libevent conventions. Knowing that, would you still prefer to have it removed? I don't have a strong view either way, but think I prefer sticking with the convention.",
      "created_at": "2022-03-01T15:17:00Z",
      "updated_at": "2022-03-01T15:18:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816865897",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/816865897"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 659,
      "original_line": 659,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817890906",
      "pull_request_review_id": 897856902,
      "id": 817890906,
      "node_id": "PRRC_kwDOABII584wwAZa",
      "diff_hunk": "@@ -639,6 +641,38 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    const char* uri = evhttp_request_get_uri(req);\n+\n+    return GetQueryParameterFromUri(uri, key);\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    evhttp_uri* uri_parsed = evhttp_uri_parse(uri);\n+    const char* query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result;\n+\n+    if (query) {\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;\n+        evhttp_parse_query_str(query, &params_q);\n+\n+        struct evkeyval* param;\n+        for (param = params_q.tqh_first; param; param = param->next.tqe_next) {\n+            if (param->key == key) {\n+                result = param->value;\n+                break;\n+            }\n+        }\n+        evhttp_clear_headers(&params_q);",
      "path": "src/httpserver.cpp",
      "position": 51,
      "original_position": 52,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "25cd29e6bd368571dd718001e04e4ecf1acf0566",
      "in_reply_to_id": 816772746,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "As we discussed offline, it looks like it is necessary since `evkeyvalq` is a linked list so we need to make sure that all elements are deleted with `evhttp_clear_headers()`. \r\n\r\nTo my understanding, this is not necessary in e.g. `HTTPRequest::GetHeader()` because we obtain a pointer to `evkeyvalq* headers` where the underlying object is managed by the `evhttp_request* req`, which in turn should properly destroy its associated headers at the end of its lifetime (and not before that). In this case, `evkeyvalq params_q` is managed by `GetQueryParameterFromUri` directly. Does that make sense or am I missing something?",
      "created_at": "2022-03-02T16:47:10Z",
      "updated_at": "2022-03-02T16:47:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r817890906",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817890906"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 668,
      "original_line": 668,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817895375",
      "pull_request_review_id": 897862869,
      "id": 817895375,
      "node_id": "PRRC_kwDOABII584wwBfP",
      "diff_hunk": "@@ -639,6 +641,38 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    const char* uri = evhttp_request_get_uri(req);\n+\n+    return GetQueryParameterFromUri(uri, key);\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    evhttp_uri* uri_parsed = evhttp_uri_parse(uri);\n+    const char* query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result;\n+\n+    if (query) {\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;\n+        evhttp_parse_query_str(query, &params_q);\n+\n+        struct evkeyval* param;\n+        for (param = params_q.tqh_first; param; param = param->next.tqe_next) {",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "25cd29e6bd368571dd718001e04e4ecf1acf0566",
      "in_reply_to_id": 816776356,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done - although as per my other [comment](https://github.com/bitcoin/bitcoin/pull/24098#discussion_r816865897) I've kept the `struct` prefix for now to stick with convention.",
      "created_at": "2022-03-02T16:51:27Z",
      "updated_at": "2022-03-02T16:51:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r817895375",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817895375"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": 662,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 663,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822489675",
      "pull_request_review_id": 904139805,
      "id": 822489675,
      "node_id": "PRRC_kwDOABII584xBjJL",
      "diff_hunk": "@@ -639,6 +641,38 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    const char* uri = evhttp_request_get_uri(req);\n+\n+    return GetQueryParameterFromUri(uri, key);\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    evhttp_uri* uri_parsed = evhttp_uri_parse(uri);\n+    const char* query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result;\n+\n+    if (query) {\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;\n+        evhttp_parse_query_str(query, &params_q);\n+\n+        struct evkeyval* param;\n+        for (param = params_q.tqh_first; param; param = param->next.tqe_next) {\n+            if (param->key == key) {\n+                result = param->value;\n+                break;\n+            }\n+        }\n+        evhttp_clear_headers(&params_q);",
      "path": "src/httpserver.cpp",
      "position": 51,
      "original_position": 52,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "25cd29e6bd368571dd718001e04e4ecf1acf0566",
      "in_reply_to_id": 816772746,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, that looks correct to me. Thanks for looking into this!",
      "created_at": "2022-03-09T10:13:19Z",
      "updated_at": "2022-03-09T10:13:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r822489675",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822489675"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 668,
      "original_line": 668,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822499972",
      "pull_request_review_id": 904153768,
      "id": 822499972,
      "node_id": "PRRC_kwDOABII584xBlqE",
      "diff_hunk": "@@ -639,6 +641,38 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    const char* uri = evhttp_request_get_uri(req);\n+\n+    return GetQueryParameterFromUri(uri, key);\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    evhttp_uri* uri_parsed = evhttp_uri_parse(uri);\n+    const char* query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result;\n+\n+    if (query) {\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;",
      "path": "src/httpserver.cpp",
      "position": 42,
      "original_position": 42,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "25cd29e6bd368571dd718001e04e4ecf1acf0566",
      "in_reply_to_id": 816773015,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ok, I've dug into this a bit more, and it's an [elaborated type specifier](https://en.cppreference.com/w/cpp/language/elaborated_type_specifier). It means that even if we have a local variable named `evkeyvalq`, then this would still compile, since the `struct` class-key would mean the local variable is ignored.\r\n\r\nI think it's fine to leave it.",
      "created_at": "2022-03-09T10:25:13Z",
      "updated_at": "2022-03-09T10:25:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r822499972",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822499972"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 659,
      "original_line": 659,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822504648",
      "pull_request_review_id": 904160333,
      "id": 822504648,
      "node_id": "PRRC_kwDOABII584xBmzI",
      "diff_hunk": "@@ -639,6 +641,37 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    const char* uri = evhttp_request_get_uri(req);\n+\n+    return GetQueryParameterFromUri(uri, key);\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    evhttp_uri* uri_parsed = evhttp_uri_parse(uri);\n+    const char* query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result;\n+\n+    if (query) {\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;\n+        evhttp_parse_query_str(query, &params_q);\n+\n+        for (struct evkeyval* param { params_q.tqh_first }; param != nullptr; param = param->next.tqe_next) {",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sorry to nitpick, but the normal style is to not put spaces around braces when using braced initialization:\r\n\r\n```suggestion\r\n        for (struct evkeyval* param{params_q.tqh_first}; param != nullptr; param = param->next.tqe_next) {\r\n```",
      "created_at": "2022-03-09T10:30:39Z",
      "updated_at": "2022-03-09T12:00:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r822504648",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822504648"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 662,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822575408",
      "pull_request_review_id": 904160333,
      "id": 822575408,
      "node_id": "PRRC_kwDOABII584xB4Ew",
      "diff_hunk": "@@ -137,25 +133,28 @@ static ChainstateManager* GetChainman(const std::any& context, HTTPRequest* req)\n     return node_context->chainman.get();\n }\n \n-static RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\n+RESTResponseFormat ParseDataFormat(std::string& param, const std::string& strReq)",
      "path": "src/rest.cpp",
      "position": 49,
      "original_position": 49,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You remove the `static` keyword in commit 2c84d3916b7 (*Handle query string when parsing data format*), but it should be removed in the earlier commit 1cc759af21 (*Refactoring: move declarations to rest.h*) at the same time that you add the `ParseDataFormat` declaration to rest.h. Without removing that keyword, the commit fails to compile with:\r\n\r\n```\r\nrest.cpp:136:18: error: ‘RetFormat ParseDataFormat(std::string&, const string&)’ was declared ‘extern’ and later ‘static’ [-fpermissive]\r\n  136 | static RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\r\n      |                  ^~~~~~~~~~~~~~~\r\nIn file included from rest.cpp:6:\r\n./rest.h:17:11: note: previous declaration of ‘RetFormat ParseDataFormat(std::string&, const string&)’\r\n   17 | RetFormat ParseDataFormat(std::string& param, const std::string& strReq);\r\n      |           ^~~~~~~~~~~~~~~\r\n```",
      "created_at": "2022-03-09T12:00:02Z",
      "updated_at": "2022-03-09T12:00:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r822575408",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822575408"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 136,
      "original_line": 136,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822900408",
      "pull_request_review_id": 904722602,
      "id": 822900408,
      "node_id": "PRRC_kwDOABII584xDHa4",
      "diff_hunk": "@@ -191,19 +190,29 @@ static bool rest_headers(const std::any& context,\n     if (!CheckWarmup(req))\n         return false;\n     std::string param;\n-    const RetFormat rf = ParseDataFormat(param, strURIPart);\n+    const RESTResponseFormat rf = ParseDataFormat(param, strURIPart);\n     std::vector<std::string> path;\n     boost::split(path, param, boost::is_any_of(\"/\"));\n \n-    if (path.size() != 2)\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n-\n-    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    std::string raw_count;\n+    std::string hashStr;\n+    if (path.size() == 2) {\n+        // deprecated path: /rest/headers/<count>/<hash>\n+        hashStr = path[1];\n+        raw_count = path[0];\n+    } else if (path.size() == 1) {\n+        // new path with query parameter: /rest/headers/<hash>?count=<count>\n+        hashStr = path[0];\n+        raw_count = req->GetQueryParameter(\"count\").value_or(\"5\");\n+    } else {\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/headers/<hash>.<ext>?count=<count>\");\n+    }\n+\n+    const auto parsed_count = ToIntegral<size_t>(raw_count);",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 111,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is there a reason you've changed `parsed_count` from using braced initialization to using `=` initialization?",
      "created_at": "2022-03-09T17:24:11Z",
      "updated_at": "2022-03-09T17:37:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r822900408",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822900408"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 211,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822901859",
      "pull_request_review_id": 904722602,
      "id": 822901859,
      "node_id": "PRRC_kwDOABII584xDHxj",
      "diff_hunk": "@@ -351,17 +360,32 @@ static bool rest_filter_header(const std::any& context, HTTPRequest* req, const\n     if (!CheckWarmup(req)) return false;\n \n     std::string param;\n-    const RetFormat rf = ParseDataFormat(param, strURIPart);\n+    const RESTResponseFormat rf = ParseDataFormat(param, strURIPart);\n \n     std::vector<std::string> uri_parts;\n     boost::split(uri_parts, param, boost::is_any_of(\"/\"));\n-    if (uri_parts.size() != 3) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\");\n+    std::string raw_count;\n+    std::string raw_blockhash;\n+    if (uri_parts.size() == 3) {\n+        // deprecated path: /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\n+        raw_blockhash = uri_parts[2];\n+        raw_count = uri_parts[1];\n+    } else if (uri_parts.size() == 2) {\n+        // new path with query parameter: /rest/blockfilterheaders/<filtertype>/<blockhash>?count=<count>\n+        raw_blockhash = uri_parts[1];\n+        raw_count = req->GetQueryParameter(\"count\").value_or(\"5\");\n+    } else {\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<blockhash>.<ext>?count=<count>\");\n+    }\n+\n+    const auto parsed_count = ToIntegral<size_t>(raw_count);",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 209,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "in_reply_to_id": null,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Same question about changing from braced initialization to `=` initialization.",
      "created_at": "2022-03-09T17:25:42Z",
      "updated_at": "2022-03-09T17:37:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r822901859",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822901859"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 381,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/823624098",
      "pull_request_review_id": 905698942,
      "id": 823624098,
      "node_id": "PRRC_kwDOABII584xF4Gi",
      "diff_hunk": "@@ -639,6 +641,37 @@ HTTPRequest::RequestMethod HTTPRequest::GetRequestMethod() const\n     }\n }\n \n+std::optional<std::string> HTTPRequest::GetQueryParameter(const std::string& key) const\n+{\n+    const char* uri = evhttp_request_get_uri(req);\n+\n+    return GetQueryParameterFromUri(uri, key);\n+}\n+\n+std::optional<std::string> GetQueryParameterFromUri(const char* uri, const std::string& key)\n+{\n+    evhttp_uri* uri_parsed = evhttp_uri_parse(uri);\n+    const char* query = evhttp_uri_get_query(uri_parsed);\n+    std::optional<std::string> result;\n+\n+    if (query) {\n+        // Parse the query string into a key-value queue and iterate over it\n+        struct evkeyvalq params_q;\n+        evhttp_parse_query_str(query, &params_q);\n+\n+        for (struct evkeyval* param { params_q.tqh_first }; param != nullptr; param = param->next.tqe_next) {",
      "path": "src/httpserver.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "in_reply_to_id": 822504648,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed, wasn't aware of this convention, thanks. I really do appreciate the nits, consistent style is important.",
      "created_at": "2022-03-10T11:32:21Z",
      "updated_at": "2022-03-10T11:32:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r823624098",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/823624098"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 662,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/823625941",
      "pull_request_review_id": 905701564,
      "id": 823625941,
      "node_id": "PRRC_kwDOABII584xF4jV",
      "diff_hunk": "@@ -137,25 +133,28 @@ static ChainstateManager* GetChainman(const std::any& context, HTTPRequest* req)\n     return node_context->chainman.get();\n }\n \n-static RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\n+RESTResponseFormat ParseDataFormat(std::string& param, const std::string& strReq)",
      "path": "src/rest.cpp",
      "position": 49,
      "original_position": 49,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "in_reply_to_id": 822575408,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yikes, this shouldn't have happened, thanks for catching that. I've adapted [this](https://blog.ploeh.dk/2013/10/07/verifying-every-single-commit-in-a-git-branch/) script to ensure all commits in the branch build:\r\n\r\n```sh\r\nBRANCH=$(git rev-parse --abbrev-ref HEAD)\r\nCOMMITS=$(git log master..$BRANCH --oneline  --reverse | cut -d \" \" -f 1)\r\n\r\nfor COMMIT in $COMMITS\r\ndo\r\n  git -c advice.detachedHead=false checkout $COMMIT > /dev/null\r\n  make -j \"$(($(sysctl -n hw.physicalcpu)+1))\" > /dev/null  # on linux, use: make -j \"$(($(nproc)+1))\" > /dev/null\r\n  if [ $? -eq 0 ]\r\n  then\r\n        echo $COMMIT - passed\r\n    else\r\n        echo $COMMIT - failed\r\n        git checkout $BRANCH\r\n        exit\r\n    fi\r\ndone\r\necho all commits on $BRANCH built successfully\r\n\r\ngit checkout $BRANCH\r\n```",
      "created_at": "2022-03-10T11:34:52Z",
      "updated_at": "2022-03-10T11:34:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r823625941",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/823625941"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 136,
      "original_line": 136,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/823626022",
      "pull_request_review_id": 905701678,
      "id": 823626022,
      "node_id": "PRRC_kwDOABII584xF4km",
      "diff_hunk": "@@ -191,19 +190,29 @@ static bool rest_headers(const std::any& context,\n     if (!CheckWarmup(req))\n         return false;\n     std::string param;\n-    const RetFormat rf = ParseDataFormat(param, strURIPart);\n+    const RESTResponseFormat rf = ParseDataFormat(param, strURIPart);\n     std::vector<std::string> path;\n     boost::split(path, param, boost::is_any_of(\"/\"));\n \n-    if (path.size() != 2)\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"No header count specified. Use /rest/headers/<count>/<hash>.<ext>.\");\n-\n-    const auto parsed_count{ToIntegral<size_t>(path[0])};\n+    std::string raw_count;\n+    std::string hashStr;\n+    if (path.size() == 2) {\n+        // deprecated path: /rest/headers/<count>/<hash>\n+        hashStr = path[1];\n+        raw_count = path[0];\n+    } else if (path.size() == 1) {\n+        // new path with query parameter: /rest/headers/<hash>?count=<count>\n+        hashStr = path[0];\n+        raw_count = req->GetQueryParameter(\"count\").value_or(\"5\");\n+    } else {\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/headers/<hash>.<ext>?count=<count>\");\n+    }\n+\n+    const auto parsed_count = ToIntegral<size_t>(raw_count);",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 111,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "in_reply_to_id": 822900408,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't think this was an intentional change. I've changed both `parsed_count` definitions to use brace initialization.  I've also updated all other new/modified `=` initializations I could find to use brace initialization. Specifically, this is in `ParseDataFormat`, `HTTPRequest::GetQueryParameter` and `GetQueryParameterFromUri`",
      "created_at": "2022-03-10T11:35:00Z",
      "updated_at": "2022-03-10T11:35:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r823626022",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/823626022"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 211,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/823626113",
      "pull_request_review_id": 905701803,
      "id": 823626113,
      "node_id": "PRRC_kwDOABII584xF4mB",
      "diff_hunk": "@@ -351,17 +360,32 @@ static bool rest_filter_header(const std::any& context, HTTPRequest* req, const\n     if (!CheckWarmup(req)) return false;\n \n     std::string param;\n-    const RetFormat rf = ParseDataFormat(param, strURIPart);\n+    const RESTResponseFormat rf = ParseDataFormat(param, strURIPart);\n \n     std::vector<std::string> uri_parts;\n     boost::split(uri_parts, param, boost::is_any_of(\"/\"));\n-    if (uri_parts.size() != 3) {\n-        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\");\n+    std::string raw_count;\n+    std::string raw_blockhash;\n+    if (uri_parts.size() == 3) {\n+        // deprecated path: /rest/blockfilterheaders/<filtertype>/<count>/<blockhash>\n+        raw_blockhash = uri_parts[2];\n+        raw_count = uri_parts[1];\n+    } else if (uri_parts.size() == 2) {\n+        // new path with query parameter: /rest/blockfilterheaders/<filtertype>/<blockhash>?count=<count>\n+        raw_blockhash = uri_parts[1];\n+        raw_count = req->GetQueryParameter(\"count\").value_or(\"5\");\n+    } else {\n+        return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid URI format. Expected /rest/blockfilterheaders/<filtertype>/<blockhash>.<ext>?count=<count>\");\n+    }\n+\n+    const auto parsed_count = ToIntegral<size_t>(raw_count);",
      "path": "src/rest.cpp",
      "position": null,
      "original_position": 209,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "in_reply_to_id": 822901859,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed",
      "created_at": "2022-03-10T11:35:07Z",
      "updated_at": "2022-03-10T11:35:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r823626113",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/823626113"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 381,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/823635542",
      "pull_request_review_id": 905715195,
      "id": 823635542,
      "node_id": "PRRC_kwDOABII584xF65W",
      "diff_hunk": "@@ -137,25 +133,28 @@ static ChainstateManager* GetChainman(const std::any& context, HTTPRequest* req)\n     return node_context->chainman.get();\n }\n \n-static RetFormat ParseDataFormat(std::string& param, const std::string& strReq)\n+RESTResponseFormat ParseDataFormat(std::string& param, const std::string& strReq)",
      "path": "src/rest.cpp",
      "position": 49,
      "original_position": 49,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "fe95d30ae4ffd1946823ec3e2d6a59c063d62893",
      "in_reply_to_id": 822575408,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You don't need a script for that. It is built-in to git already, see https://github.com/bitcoin/bitcoin/blob/master/doc/productivity.md#interactive-dummy-rebases-for-fixups-and-execs-with-git-merge-base \r\n\r\n",
      "created_at": "2022-03-10T11:47:55Z",
      "updated_at": "2022-03-10T11:47:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r823635542",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/823635542"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 136,
      "original_line": 136,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/830537947",
      "pull_request_review_id": 915042393,
      "id": 830537947,
      "node_id": "PRRC_kwDOABII584xgQDb",
      "diff_hunk": "@@ -47,18 +47,24 @@ The HTTP request and response are both handled entirely in-memory.\n With the /notxdetails/ option JSON response will only contain the transaction hash instead of the complete transaction details. The option only affects the JSON response.\n \n #### Blockheaders\n-`GET /rest/headers/<COUNT>/<BLOCK-HASH>.<bin|hex|json>`\n+`GET /rest/headers/<BLOCK-HASH>.<bin|hex|json>?count=<COUNT=5>`",
      "path": "doc/REST-interface.md",
      "position": 5,
      "original_position": 5,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "in_reply_to_id": 790336549,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "FWIW, I agree with @promag that this would be more properly following REST best practices, which seems to be the main point of this PR.\r\n\r\nDo I understand correctly that you want to keep maintaining the old structure, this structure and then also future structures like suggested above @stickies-v ? That does seem more laborious than necessary to me. You could merge these first parts of changes as intermediary steps and then add follow-ups but I would not \"officially\" support it by adding it to docs and release notes yet. You could make the follow-up changes and only afterwards add documentation and release notes when everything is final, so that there are at least only two versions to maintain and not one per follow-up PR since without docs and release notes it can be reasonably assumed that nobody is building a client on top of the intermediary version. \r\n\r\nAlternatively if you really want to include docs I would suggest in this intermediate step instead of marking the old structure as deprecated, add the new structure marked as experimental and add a comment that it is still object to change.",
      "created_at": "2022-03-19T23:25:03Z",
      "updated_at": "2022-03-19T23:26:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r830537947",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/830537947"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 50,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/843092709",
      "pull_request_review_id": 932272508,
      "id": 843092709,
      "node_id": "PRRC_kwDOABII584yQJLl",
      "diff_hunk": "@@ -47,18 +47,24 @@ The HTTP request and response are both handled entirely in-memory.\n With the /notxdetails/ option JSON response will only contain the transaction hash instead of the complete transaction details. The option only affects the JSON response.\n \n #### Blockheaders\n-`GET /rest/headers/<COUNT>/<BLOCK-HASH>.<bin|hex|json>`\n+`GET /rest/headers/<BLOCK-HASH>.<bin|hex|json>?count=<COUNT=5>`",
      "path": "doc/REST-interface.md",
      "position": 5,
      "original_position": 5,
      "commit_id": "54b39cfb342d10a448d49299c715e3a25c2aca4a",
      "original_commit_id": "0415aaafb2f7206c117f58cc7a4a967cee0fa619",
      "in_reply_to_id": 790336549,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think your approach makes a lot of sense, fjahr. However, since there has already been significant review time spent on this and this PR seems ready for merge, I don't think this is big enough of a problem to ask for another round of review. Even if it's not a huge update, it still would touch quite a few commits (dropping release notes, modifying REST interface docs, updating error return messages and inline docs). I'll definitely consider the approach you suggest for further PRs because I think it is a more careful approach, but for now I'd prefer to leave things as they are and move forward.",
      "created_at": "2022-04-05T17:31:56Z",
      "updated_at": "2022-04-05T17:31:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24098#discussion_r843092709",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/843092709"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24098"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 50,
      "original_line": 50,
      "side": "RIGHT"
    }
  ]
}