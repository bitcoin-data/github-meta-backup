{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494",
    "id": 981832923,
    "node_id": "PR_kwDOABII5846hZTb",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/25494",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/25494.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/25494.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25494",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25494/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
    "number": 25494,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "indexes: Stop using node internal types",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Start transitioning index code away from using internal node types like `CBlockIndex` and `CChain` so index code is less coupled to node code and index code will later be able to stop locking cs_main and sync without having to deal with validationinterface race conditions, and so new indexes are easier to write and can run as plugins or separate processes.\r\n\r\nThis PR contains the first 7 commits from https://github.com/bitcoin/bitcoin/pull/24230#issuecomment-1165625977 which have been split off for easier review. Previous review comments can be found in #24230",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      }
    ],
    "created_at": "2022-06-28T20:14:51Z",
    "updated_at": "2023-05-18T18:01:16Z",
    "closed_at": "2022-07-19T20:43:39Z",
    "mergeable_state": "unknown",
    "merged_at": "2022-07-19T20:43:39Z",
    "merge_commit_sha": "92c8e1849dceea6d4f7de2b58f4c50e5e50762ea",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "ryanofsky:pr/ind",
      "ref": "pr/ind",
      "sha": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 69901633,
        "node_id": "MDEwOlJlcG9zaXRvcnk2OTkwMTYzMw==",
        "name": "bitcoin",
        "full_name": "ryanofsky/bitcoin",
        "owner": {
          "login": "ryanofsky",
          "id": 7133040,
          "node_id": "MDQ6VXNlcjcxMzMwNDA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ryanofsky",
          "html_url": "https://github.com/ryanofsky",
          "followers_url": "https://api.github.com/users/ryanofsky/followers",
          "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
          "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
          "repos_url": "https://api.github.com/users/ryanofsky/repos",
          "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/ryanofsky/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ryanofsky/bitcoin",
        "archive_url": "https://api.github.com/repos/ryanofsky/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ryanofsky/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ryanofsky/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ryanofsky/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ryanofsky/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ryanofsky/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ryanofsky/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ryanofsky/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ryanofsky/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ryanofsky/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ryanofsky/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ryanofsky/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ryanofsky/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ryanofsky/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ryanofsky/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ryanofsky/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ryanofsky/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ryanofsky/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ryanofsky/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ryanofsky/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ryanofsky/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ryanofsky/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ryanofsky/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ryanofsky/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ryanofsky/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ryanofsky/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ryanofsky/bitcoin/hooks",
        "svn_url": "https://github.com/ryanofsky/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 6,
        "stargazers_count": 8,
        "watchers_count": 8,
        "size": 229522,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T09:40:24Z",
        "created_at": "2016-10-03T19:05:43Z",
        "updated_at": "2023-05-05T12:10:19Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "8d4a058ac421da838422da127aac71abf83a49f6",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69818,
        "watchers_count": 69818,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-07T05:35:10Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T06:49:43Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 273,
    "deletions": 142,
    "changed_files": 21,
    "commits": 7,
    "review_comments": 38,
    "comments": 7
  },
  "events": [
    {
      "event": "labeled",
      "id": 6897179317,
      "node_id": "LE_lADOABII585MwsLQzwAAAAGbGpq1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6897179317",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-28T20:40:21Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "commented",
      "id": 1169413997,
      "node_id": "IC_kwDOABII585Fs9dt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1169413997",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-06-29T00:33:23Z",
      "updated_at": "2022-07-18T21:45:32Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25623](https://github.com/bitcoin/bitcoin/pull/25623) ([kernel 3e/n] Decouple `CDBWrapper` and `CBlockTreeDB` from `ArgsManager` by dongcarl)\n* [#25297](https://github.com/bitcoin/bitcoin/pull/25297) (WIP, wallet: speedup transactions sync, rescan and load not flushing to db constantly by furszy)\n* [#25222](https://github.com/bitcoin/bitcoin/pull/25222) (refactor: Pass reference to LookUpStats by MarcoFalke)\n* [#24150](https://github.com/bitcoin/bitcoin/pull/24150) (refactor: move index class members from protected to private by jonatack)\n* [#19888](https://github.com/bitcoin/bitcoin/pull/19888) (rpc, test: Improve getblockstats for unspendables by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#issuecomment-1169413997",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25494"
    },
    {
      "event": "reviewed",
      "id": 1022793964,
      "node_id": "PRR_kwDOABII58489pjs",
      "url": null,
      "actor": null,
      "commit_id": "3c82fa533a31939b867c774fe2c05f7a2e1d1a0c",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1022793964",
      "submitted_at": "2022-06-29T06:25:49Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "unlabeled",
      "id": 6919209303,
      "node_id": "UNLE_lADOABII585MwsLQzwAAAAGcasFX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6919209303",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-01T15:01:17Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "labeled",
      "id": 6919231847,
      "node_id": "LE_lADOABII585MwsLQzwAAAAGcaxln",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6919231847",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-01T15:03:57Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "commented",
      "id": 1172976870,
      "node_id": "IC_kwDOABII585F6jTm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1172976870",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-02T23:15:44Z",
      "updated_at": "2022-07-02T23:15:44Z",
      "author_association": "MEMBER",
      "body": "Linter warns of a circular dependency\r\n\r\n```\r\nA new circular dependency in the form of \"index/base -> node/context -> net_processing -> index/blockfilterindex -> index/base\" appears to have been introduced.\r\n```",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#issuecomment-1172976870",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25494"
    },
    {
      "event": "reviewed",
      "id": 1026798012,
      "node_id": "PRR_kwDOABII5849M7G8",
      "url": null,
      "actor": null,
      "commit_id": "3c82fa533a31939b867c774fe2c05f7a2e1d1a0c",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "",
      "user": {
        "login": "Onyeali",
        "id": 99380968,
        "node_id": "U_kgDOBexu6A",
        "avatar_url": "https://avatars.githubusercontent.com/u/99380968?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Onyeali",
        "html_url": "https://github.com/Onyeali",
        "followers_url": "https://api.github.com/users/Onyeali/followers",
        "following_url": "https://api.github.com/users/Onyeali/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Onyeali/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Onyeali/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Onyeali/subscriptions",
        "organizations_url": "https://api.github.com/users/Onyeali/orgs",
        "repos_url": "https://api.github.com/users/Onyeali/repos",
        "events_url": "https://api.github.com/users/Onyeali/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Onyeali/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1026798012",
      "submitted_at": "2022-07-03T00:58:09Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6936219507,
      "node_id": "HRFPE_lADOABII585MwsLQzwAAAAGdbk9z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6936219507",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-05T17:25:06Z"
    },
    {
      "event": "reviewed",
      "id": 1028935378,
      "node_id": "PRR_kwDOABII5849VE7S",
      "url": null,
      "actor": null,
      "commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#issuecomment-1172976870\r\n\r\n> Linter warns of a circular dependency\r\n\r\nThanks! Should be fixed\r\n\r\n---\r\n\r\nUpdated 3c82fa533a31939b867c774fe2c05f7a2e1d1a0c -> ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3 ([`pr/ind.1`](https://github.com/ryanofsky/bitcoin/commits/pr/ind.1) -> [`pr/ind.2`](https://github.com/ryanofsky/bitcoin/commits/pr/ind.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ind.1..pr/ind.2)) to fix `lint-circular-dependencies.py` error",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1028935378",
      "submitted_at": "2022-07-05T17:30:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "reviewed",
      "id": 1032087084,
      "node_id": "PRR_kwDOABII5849hGYs",
      "url": null,
      "actor": null,
      "commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3\r\n\r\nI reviewed these commits multiple times as part of #24230, and think they are good.\r\nI also did some manual testing for this PR on regtest and signet and didn't see any differences in behavior.\r\n\r\nWhile it's a bit unfortunate that this introduces a circular dependency, this is transitory and will get removed with the last commits of #24230 after all internal uses of `CChainState` are removed.\r\n\r\nnit: clang-format suggests a few minor changes (spacing) over these commits",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1032087084",
      "submitted_at": "2022-07-07T19:48:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "reviewed",
      "id": 1033423438,
      "node_id": "PRR_kwDOABII5849mMpO",
      "url": null,
      "actor": null,
      "commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "tACK ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3\r\n\r\nReviewed code and ran it, syncing `txindex` from intermittently synced state to fully synced and fully synced `coinstatsindex` from scratch.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1033423438",
      "submitted_at": "2022-07-10T12:06:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "reviewed",
      "id": 1037443507,
      "node_id": "PRR_kwDOABII58491iGz",
      "url": null,
      "actor": null,
      "commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Happy to merge as-is. Let me know what you think.\r\n\r\n\r\nreview ACK ddbbdcf4112c3a84e3287e6bf701e0eb592b24c 🐯\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nreview ACK ddbbdcf4112c3a84e3287e6bf701e0eb592b24c 🐯\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUjssQwAplJ1ZbuRcMBriV0HxqVNf02T4stpYurghGghrlmhm8pidPOD4r+gcr+g\r\nECrmBrsbS9Ka/ycxwoM0nel0hEMsXLZWy6ueY0ufksVY8TFgIdVSQJtSLZ9MNuUE\r\n7n9/Qz+z1tl2isShx5nbEQ+UcRiCfXVryfV0OuGO4RLPSJV9fqYaPBKh85af6hxt\r\nP+q4qD4Ql6kWZLPyrdZ+M3JO3KIgRDdGLjXdvFQvNDVDos68HT+UTRvRod2B3kkM\r\n5I84K4L6SfO/WW5sGXM/G8t7qyC4Sdv906qBP9zGkxFV/D5jj3n+cpgb8vog1RGr\r\n6riVrC9pPnCC8kSopDgHdHIEiNdnqxeQJ2eiFutmI2B2Gz6ex7YjvBGyeJeRSka5\r\nsNtrD+9EKtUE5Ta/Iby8mpl1+lSpzC9vFGJGuhTQg1kNzOV80MSVw480wDZcUrTM\r\nvtZoxXpOH3/CnL+8Y+MvxanIahrvS/UApp60iZ848v8pEXtI4cGzUsysRIekUkeD\r\nfmaWQU9d\r\n=52YB\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n\r\n</details>\r\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1037443507",
      "submitted_at": "2022-07-13T15:55:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "commented",
      "id": 1183599233,
      "node_id": "IC_kwDOABII585GjEqB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1183599233",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-13T19:31:50Z",
      "updated_at": "2022-07-13T19:31:50Z",
      "author_association": "MEMBER",
      "body": "> Happy to merge as-is. Let me know what you think.\r\n\r\nThanks for review Marco. I definitely want to make some improvements based on your comments, so better not to merge for now\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#issuecomment-1183599233",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25494"
    },
    {
      "event": "reviewed",
      "id": 1038366919,
      "node_id": "PRR_kwDOABII58495DjH",
      "url": null,
      "actor": null,
      "commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1038366919",
      "submitted_at": "2022-07-14T06:41:28Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6998246485,
      "node_id": "HRFPE_lADOABII585MwsLQzwAAAAGhIMRV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6998246485",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-14T23:50:44Z"
    },
    {
      "event": "reviewed",
      "id": 1039377005,
      "node_id": "PRR_kwDOABII584986Jt",
      "url": null,
      "actor": null,
      "commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Updated ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3 -> fb245ec3d3644cc9cef9b990ba2c8313277f5d41 ([`pr/ind.2`](https://github.com/ryanofsky/bitcoin/commits/pr/ind.2) -> [`pr/ind.3`](https://github.com/ryanofsky/bitcoin/commits/pr/ind.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ind.2..pr/ind.3)) with suggested changes like moving the new file from node/ to kernel/\r\nUpdated fb245ec3d3644cc9cef9b990ba2c8313277f5d41 -> f678151ff9a0a5934965b1c85ec97a1dfe45a67e ([`pr/ind.3`](https://github.com/ryanofsky/bitcoin/commits/pr/ind.3) -> [`pr/ind.4`](https://github.com/ryanofsky/bitcoin/commits/pr/ind.4), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ind.3..pr/ind.4)) to fix lint error https://cirrus-ci.com/task/6068993915092992",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1039377005",
      "submitted_at": "2022-07-14T23:51:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6999007038,
      "node_id": "HRFPE_lADOABII585MwsLQzwAAAAGhLF8-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6999007038",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-15T04:04:26Z"
    },
    {
      "event": "reviewed",
      "id": 1039916505,
      "node_id": "PRR_kwDOABII5849-93Z",
      "url": null,
      "actor": null,
      "commit_id": "f678151ff9a0a5934965b1c85ec97a1dfe45a67e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "f678151ff9a0a5934965b1c85ec97a1dfe45a67e 📭\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nf678151ff9a0a5934965b1c85ec97a1dfe45a67e 📭\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUhL5AwAtnEh0cX8QFjSw7c20rH3WCFif2w8QDJpwnRDHHmc8qSzVamRRmmjGaZ2\r\nuT2IvZCVzzLqvcJKWJR6Woan9pS5GJtF/pqBxv1olJd8CBNO1VrL3o5NnBzKIDAN\r\n6PWq4Tl50TrIwnR5Wnd8pEYfbK77M4ghdSZ5TYtzL+gHTL8wQcYGmJCw7pDAgeAp\r\niMMe82rhI/sYeU9nqo3l5MF2IgJkzEuQ/wpxD4rmkDyf+9yLNtquHCBzR5BSPhDl\r\n5LoR7v9LR5WqHZzOWyrrY/FhUmnbYDpmub8TAmYGj6cy+in37jLheDY4EDU2mzJG\r\nCMtE/6yRGY8dPFohG//yUquEfHG7lVacW+9tMXrRZ0+zcmlBFcobOtwNRJ4Oc4qZ\r\nIcmULASpFcVpFbLrOTqS5n/zrIvicQSxH4nXGXNnB7gvZFT4lmpnOin6txgN/Sic\r\nsf20wlYEbQpJBWgBtRjSny8SuY5BHJeAypVzIbw1Sc78GpZs2m3bmjHZHuwud97p\r\nFKbfDUd0\r\n=d7Fu\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n\r\n</details>\r\n\r\n\r\n\r\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1039916505",
      "submitted_at": "2022-07-15T07:39:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7001545167,
      "node_id": "HRFPE_lADOABII585MwsLQzwAAAAGhUxnP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7001545167",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-15T12:20:51Z"
    },
    {
      "event": "reviewed",
      "id": 1040194096,
      "node_id": "PRR_kwDOABII584-ABow",
      "url": null,
      "actor": null,
      "commit_id": "f678151ff9a0a5934965b1c85ec97a1dfe45a67e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Updated f678151ff9a0a5934965b1c85ec97a1dfe45a67e -> 8bc1602821202d4863fab05ee1aab3ff3b70a7c0 ([`pr/ind.4`](https://github.com/ryanofsky/bitcoin/commits/pr/ind.4) -> [`pr/ind.5`](https://github.com/ryanofsky/bitcoin/commits/pr/ind.5), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ind.4..pr/ind.5)) updating commit message 8bc1602821202d4863fab05ee1aab3ff3b70a7c0 to describe some changed behavior and no longer enabling IWYU for now in the new file",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1040194096",
      "submitted_at": "2022-07-15T12:21:49Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "reviewed",
      "id": 1040247990,
      "node_id": "PRR_kwDOABII584-AOy2",
      "url": null,
      "actor": null,
      "commit_id": "8bc1602821202d4863fab05ee1aab3ff3b70a7c0",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 8bc1602821202d4863fab05ee1aab3ff3b70a7c0 though did not review the last commit 🗡\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nACK 8bc1602821202d4863fab05ee1aab3ff3b70a7c0 though did not review the last commit 🗡\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUhkpQv9EYKytsqsNKtA9Yte0NOoa/hTFzjqhx34b+kkeB9twTIhnl/8kqLcct6a\r\n1983DDhe835/ZeKxwAGPV9KTnBma+E7Sr9nAaFuY8GJfA2qsFncXzoeRpZRW8e9m\r\nEjZ1Yvi8Yac3AE9RArPayknO0uo7tvlYoL/2mx7k+6V/VvlZSAqrUMgwQY8PvQmJ\r\nc6AoUvbUrMSy6HM4HZHi9TEVveQqwMqYwPwKRqy0A5CBAlwIN75m/NKFSDWcjVTS\r\np3m88uM5fZQ1gQ4Xu9FTvXSQavIKr883gUeUXOR9yv5FXgXHCRVGjrbpVEey2nmK\r\njOwdKWHVpVv0+6jI1qzJnkTlKdKvFKcvTdPp9EW/woWW4FdcEAtAG4s0kDfvQrN6\r\nb8ZUUpowDJsM+3Uisuqq6dhq48j56u0Ux0RmXBTGsCT4t8hpPSUbsAqqSZnhpWlJ\r\nSKw4c9amB3i8kcRLIBkpntEsOgtZnXBaNgdlpv3iWUALC8xqBOF8RDi10qMcS0x2\r\n1/7likbu\r\n=LR6p\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n\r\n</details>\r\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1040247990",
      "submitted_at": "2022-07-15T12:47:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "commented",
      "id": 1187556741,
      "node_id": "IC_kwDOABII585GyK2F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1187556741",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-18T14:20:32Z",
      "updated_at": "2022-07-18T14:20:32Z",
      "author_association": "MEMBER",
      "body": "@fjahr & @mzumsande could you reack? I think only change since previous reviews has been expanding the `m_block_index == nullptr` case in `CommitInternal` to keep logging an error and avoid committing anything",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#issuecomment-1187556741",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25494"
    },
    {
      "event": "mentioned",
      "id": 7012522294,
      "node_id": "MEE_lADOABII585MwsLQzwAAAAGh-pk2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7012522294",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-18T14:20:32Z"
    },
    {
      "event": "subscribed",
      "id": 7012522311,
      "node_id": "SE_lADOABII585MwsLQzwAAAAGh-plH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7012522311",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-18T14:20:32Z"
    },
    {
      "event": "mentioned",
      "id": 7012522341,
      "node_id": "MEE_lADOABII585MwsLQzwAAAAGh-pll",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7012522341",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-18T14:20:32Z"
    },
    {
      "event": "subscribed",
      "id": 7012522354,
      "node_id": "SE_lADOABII585MwsLQzwAAAAGh-ply",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7012522354",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-18T14:20:32Z"
    },
    {
      "event": "labeled",
      "id": 7013326069,
      "node_id": "LE_lADOABII585MwsLQzwAAAAGiBtz1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7013326069",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-18T15:52:24Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGEwYjViNGFlNWEyNDUzNmQzMzNjYmNlMmVhNTg0ZjJkOTM1YzY1MWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a0b5b4ae5a24536d333cbce2ea584f2d935c651f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a0b5b4ae5a24536d333cbce2ea584f2d935c651f",
      "tree": {
        "sha": "71fbd31c68142216d20ff3414d9360feee5baa3e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/71fbd31c68142216d20ff3414d9360feee5baa3e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8d4a058ac421da838422da127aac71abf83a49f6",
          "sha": "8d4a058ac421da838422da127aac71abf83a49f6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8d4a058ac421da838422da127aac71abf83a49f6"
        }
      ],
      "message": "interfaces, refactor: Add more block information to block connected notifications\n\nAdd new interfaces::BlockInfo struct to be able to pass extra block\ninformation (file and undo information) to indexes which they are\nupdated to use high level interfaces::Chain notifications.\n\nThis commit does not change behavior in any way.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-07-18T18:39:55Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-01-13T12:55:18Z"
      },
      "sha": "a0b5b4ae5a24536d333cbce2ea584f2d935c651f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMzYjRkNDhjZmNkZjE0NWY0OWNiMjI4M2FjM2UyOTM2YTRlMjNmZmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/33b4d48cfcdf145f49cb2283ac3e2936a4e23fff",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/33b4d48cfcdf145f49cb2283ac3e2936a4e23fff",
      "tree": {
        "sha": "482ca2545df1e67a06a7d027cc2275f89ae0cb75",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/482ca2545df1e67a06a7d027cc2275f89ae0cb75"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a0b5b4ae5a24536d333cbce2ea584f2d935c651f",
          "sha": "a0b5b4ae5a24536d333cbce2ea584f2d935c651f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a0b5b4ae5a24536d333cbce2ea584f2d935c651f"
        }
      ],
      "message": "indexes, refactor: Pass Chain interface instead of CChainState class to indexes\n\nPassing abstract Chain interface will let indexes run in separate\nprocesses.\n\nThis commit does not change behavior in any way.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-07-18T18:39:55Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-01-13T12:57:54Z"
      },
      "sha": "33b4d48cfcdf145f49cb2283ac3e2936a4e23fff"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFkZGI0ZjJhZjE4M2EyNWNlNGE2YjY0ODViNWI0OTU3NWEyYmEzMWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/addb4f2af183a25ce4a6b6485b5b49575a2ba31b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/addb4f2af183a25ce4a6b6485b5b49575a2ba31b",
      "tree": {
        "sha": "b6309ded5636d485af52a696e016e8dc235f07b3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b6309ded5636d485af52a696e016e8dc235f07b3"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/33b4d48cfcdf145f49cb2283ac3e2936a4e23fff",
          "sha": "33b4d48cfcdf145f49cb2283ac3e2936a4e23fff",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/33b4d48cfcdf145f49cb2283ac3e2936a4e23fff"
        }
      ],
      "message": "indexes, refactor: Remove CBlockIndex* uses in coinstatsindex LookUpOne function\n\nThis commit does not change behavior in any way.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-07-18T18:39:55Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-01-17T22:32:19Z"
      },
      "sha": "addb4f2af183a25ce4a6b6485b5b49575a2ba31b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJlZjRlNDA1ZjNkZTI3MThkZmVlMjc5YTlhYmZmNGRhZjAxNmRhMjY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bef4e405f3de2718dfee279a9abff4daf016da26",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bef4e405f3de2718dfee279a9abff4daf016da26",
      "tree": {
        "sha": "52a53b50ad0da1ae8dcf59dc1a0ef174df1381e8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/52a53b50ad0da1ae8dcf59dc1a0ef174df1381e8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/addb4f2af183a25ce4a6b6485b5b49575a2ba31b",
          "sha": "addb4f2af183a25ce4a6b6485b5b49575a2ba31b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/addb4f2af183a25ce4a6b6485b5b49575a2ba31b"
        }
      ],
      "message": "indexes, refactor: Remove CBlockIndex* uses in index Init methods\n\nReplace overriden index Init() methods that use the best block\nCBlockIndex* pointer with pure CustomInit() callbacks that are passed\nthe block hash and height.\n\nThis gets rid of more CBlockIndex* pointer uses so indexes can work\noutside the bitcoin-node process. It also simplifies the initialization\ncall sequence so index implementations are not responsible for\ninitializing the base class.\n\nThere is a slight change in behavior here since now the best block\npointer is loaded and checked before the custom index init functions are\ncalled instead of while they are called.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-07-18T18:39:55Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-01-17T23:36:40Z"
      },
      "sha": "bef4e405f3de2718dfee279a9abff4daf016da26"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRjOTcxYmUwODMxOTU5ZTdlZTZhNmRmOWUxYWE0NjA5MTM1MWE4ZmI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dc971be0831959e7ee6a6df9e1aa46091351a8fb",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/dc971be0831959e7ee6a6df9e1aa46091351a8fb",
      "tree": {
        "sha": "16dca1f909e3a69c260045cc7b89e0123da3e1e8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/16dca1f909e3a69c260045cc7b89e0123da3e1e8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bef4e405f3de2718dfee279a9abff4daf016da26",
          "sha": "bef4e405f3de2718dfee279a9abff4daf016da26",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bef4e405f3de2718dfee279a9abff4daf016da26"
        }
      ],
      "message": "indexes, refactor: Remove CBlockIndex* uses in index WriteBlock methods\n\nReplace WriteBlock method with CustomAppend and pass BlockInfo struct\ninstead of CBlockIndex* pointer\n\nThis commit does not change behavior in any way.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-07-18T18:39:55Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-01-18T01:33:16Z"
      },
      "sha": "dc971be0831959e7ee6a6df9e1aa46091351a8fb"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVlM2EwNzlmYWIyYzMzYjQxODZiNjJhYjgyMjc1Mzk1NGE0ZTU0NWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ee3a079fab2c33b4186b62ab822753954a4e545f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ee3a079fab2c33b4186b62ab822753954a4e545f",
      "tree": {
        "sha": "6f38188bc651d5d3ea4a4a295b578b68e94998ba",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6f38188bc651d5d3ea4a4a295b578b68e94998ba"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dc971be0831959e7ee6a6df9e1aa46091351a8fb",
          "sha": "dc971be0831959e7ee6a6df9e1aa46091351a8fb",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/dc971be0831959e7ee6a6df9e1aa46091351a8fb"
        }
      ],
      "message": "indexes, refactor: Remove CBlockIndex* uses in index Rewind methods\n\nReplace Rewind method with CustomRewind and pass block hashes and\nheights instead of CBlockIndex* pointers\n\nThis commit does not change behavior in any way.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-07-18T18:39:55Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-01-18T01:33:52Z"
      },
      "sha": "ee3a079fab2c33b4186b62ab822753954a4e545f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc4NzhmOTdiZjE1YjZlN2M5YjQ3ZDFjMGQ5NjQxOWI5N2UxYmRjYmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "tree": {
        "sha": "9367800871923c254038ca199061de2e89569561",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9367800871923c254038ca199061de2e89569561"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ee3a079fab2c33b4186b62ab822753954a4e545f",
          "sha": "ee3a079fab2c33b4186b62ab822753954a4e545f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ee3a079fab2c33b4186b62ab822753954a4e545f"
        }
      ],
      "message": "indexes, refactor: Remove CChainState use in index CommitInternal method\n\nReplace CommitInternal method with CustomCommit and use interfaces::Chain\ninstead of CChainState to generate block locator.\n\nThis commit does not change behavior in any way, except in the\n(m_best_block_index == nullptr) case, which was added recently in\nhttps://github.com/bitcoin/bitcoin/pull/24117 as part of an ongoing attempt to\nprevent index corruption if bitcoind is interrupted during startup. New\nbehavior in that case should be slightly better than the old behavior (skipping\nthe entire custom+base commit now vs only skipping the base commit previously)\nand this might avoid more cases of corruption.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-07-18T18:39:55Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2022-01-18T01:35:02Z"
      },
      "sha": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7014644794,
      "node_id": "HRFPE_lADOABII585MwsLQzwAAAAGiGvw6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7014644794",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-18T19:05:30Z"
    },
    {
      "event": "commented",
      "id": 1188152409,
      "node_id": "IC_kwDOABII585G0cRZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1188152409",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-18T19:06:26Z",
      "updated_at": "2022-07-18T19:06:26Z",
      "author_association": "MEMBER",
      "body": "Rebased 8bc1602821202d4863fab05ee1aab3ff3b70a7c0 -> 7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd ([`pr/ind.5`](https://github.com/ryanofsky/bitcoin/commits/pr/ind.5) -> [`pr/ind.6`](https://github.com/ryanofsky/bitcoin/commits/pr/ind.6), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ind.5-rebase..pr/ind.6)) due to conflicts with #23997 and #25487",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#issuecomment-1188152409",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25494"
    },
    {
      "event": "unlabeled",
      "id": 7015231634,
      "node_id": "UNLE_lADOABII585MwsLQzwAAAAGiI_CS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7015231634",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-18T20:03:59Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1188755412,
      "node_id": "IC_kwDOABII585G2vfU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1188755412",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-19T08:27:42Z",
      "updated_at": "2022-07-19T08:27:42Z",
      "author_association": "MEMBER",
      "body": "ACK 7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd though did not review the last commit 🤼\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nACK 7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd though did not review the last commit 🤼\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUgZAAwAg2W4ylK74K+MHoP2XiZFNNZe6tzS3wpYnBUZXoP0ee1rOg/lNGl1o2ER\r\nd0zs+tGjHajkpDiQB9DgCqNLQAEq1qOCRmxH1W9nt04gkVqyZPPcOg7GE2da1MNL\r\nn8P8gNTHiqmS8FrRSAs40udE/VuhSr9j/4OLaCEjQiRdhWPKB1J4IduIK0OMQdW0\r\nLQw2wBXRb0rtG4L0ztwmndFXx9IbBLRNZCFRR6a2IW4/2rZN3FmPSr6kDA7PV9S+\r\nbM/+NNPThUga3KTfbPBj5ERivN/4UZXILyOdFVxs+dOcPViZVvtWd8uBLsiH+2QO\r\n5zSuVeXnWPSujZXcNKpWnXbUJv7Pi8ClPkBv2016w5hzGGYOngV/TzLyeZtihn3S\r\nIXQ7afP8zbCPBQvtcVUGB3QLZLvl1Byw88U+6OXSp0Yw/gEXXQLHujyLOI2G2/9P\r\nRwNmi+6qDhhylB5TPist30uVk4D84NEDG/cz269cHe0+M+icnh2cpwysdM7fMO1S\r\nvhWrJkyl\r\n=8s9I\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n\r\n</details>\r\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#issuecomment-1188755412",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25494"
    },
    {
      "event": "commented",
      "id": 1189393132,
      "node_id": "IC_kwDOABII585G5LLs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1189393132",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-19T18:01:30Z",
      "updated_at": "2022-07-19T18:01:30Z",
      "author_association": "MEMBER",
      "body": "Code Review ACK 7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#issuecomment-1189393132",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25494"
    },
    {
      "event": "merged",
      "id": 7023784275,
      "node_id": "ME_lADOABII585MwsLQzwAAAAGipnFT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7023784275",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "92c8e1849dceea6d4f7de2b58f4c50e5e50762ea",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/92c8e1849dceea6d4f7de2b58f4c50e5e50762ea",
      "created_at": "2022-07-19T20:43:39Z"
    },
    {
      "event": "closed",
      "id": 7023784294,
      "node_id": "CE_lADOABII585MwsLQzwAAAAGipnFm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7023784294",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-19T20:43:39Z"
    },
    {
      "event": "referenced",
      "id": 7025510075,
      "node_id": "REFE_lADOABII585MwsLQzwAAAAGiwMa7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7025510075",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d5838f1b8b12a93512f558eebb83eedca9b79ce5",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/d5838f1b8b12a93512f558eebb83eedca9b79ce5",
      "created_at": "2022-07-20T02:48:46Z"
    },
    {
      "event": "reviewed",
      "id": 1433186191,
      "node_id": "PRR_kwDOABII585VbK-P",
      "url": null,
      "actor": null,
      "commit_id": "bef4e405f3de2718dfee279a9abff4daf016da26",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#pullrequestreview-1433186191",
      "submitted_at": "2023-05-18T18:01:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
    },
    {
      "event": "unsubscribed",
      "id": 9282797461,
      "node_id": "UE_lADOABII585MwsLQzwAAAAIpTD-V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9282797461",
      "actor": {
        "login": "joostjager",
        "id": 4638168,
        "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joostjager",
        "html_url": "https://github.com/joostjager",
        "followers_url": "https://api.github.com/users/joostjager/followers",
        "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
        "organizations_url": "https://api.github.com/users/joostjager/orgs",
        "repos_url": "https://api.github.com/users/joostjager/repos",
        "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/joostjager/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T18:46:49Z"
    },
    {
      "event": "referenced",
      "id": 9393659737,
      "node_id": "REFE_lADOABII585MwsLQzwAAAAIv599Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9393659737",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3a83d4417b35cb0173286b6da97315be861901bc",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/3a83d4417b35cb0173286b6da97315be861901bc",
      "created_at": "2023-05-31T17:56:41Z"
    },
    {
      "event": "referenced",
      "id": 9394035205,
      "node_id": "REFE_lADOABII585MwsLQzwAAAAIv7ZoF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9394035205",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9ec40ffad20b44a5e0dc76626ae3be8a6522aa25",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/9ec40ffad20b44a5e0dc76626ae3be8a6522aa25",
      "created_at": "2023-05-31T18:40:23Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909241872",
      "pull_request_review_id": 1022793964,
      "id": 909241872,
      "node_id": "PRRC_kwDOABII5842Me4Q",
      "diff_hunk": "@@ -0,0 +1,23 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chain.h>\n+#include <interfaces/chain.h>\n+#include <uint256.h>\n+\n+namespace node {\n+interfaces::BlockInfo MakeBlockInfo(const CBlockIndex* index, const CBlock* data)\n+{\n+    interfaces::BlockInfo info{index ? *index->phashBlock : uint256::ZERO};\n+    if (index) {\n+        info.prev_hash = index->pprev ? index->pprev->phashBlock : nullptr;\n+        info.height = index->nHeight;\n+        LOCK(::cs_main);\n+        info.file_number = index->nFile;",
      "path": "src/node/chain.cpp",
      "position": null,
      "original_position": 17,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "3c82fa533a31939b867c774fe2c05f7a2e1d1a0c",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It seems that this will only copy/alias the internal memory to a different type. I wonder if this is actually useful, because it disables lock annotations for the memory where they may actually still be needed? Also, I wonder how useful an interface is that returns a data structure that points into memory that is owned by a different process (I am assuming each blockindex runs in a different multiprocess)",
      "created_at": "2022-06-29T06:25:49Z",
      "updated_at": "2022-06-29T06:25:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r909241872",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909241872"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914005702",
      "pull_request_review_id": 1028935378,
      "id": 914005702,
      "node_id": "PRRC_kwDOABII5842ep7G",
      "diff_hunk": "@@ -0,0 +1,23 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chain.h>\n+#include <interfaces/chain.h>\n+#include <uint256.h>\n+\n+namespace node {\n+interfaces::BlockInfo MakeBlockInfo(const CBlockIndex* index, const CBlock* data)\n+{\n+    interfaces::BlockInfo info{index ? *index->phashBlock : uint256::ZERO};\n+    if (index) {\n+        info.prev_hash = index->pprev ? index->pprev->phashBlock : nullptr;\n+        info.height = index->nHeight;\n+        LOCK(::cs_main);\n+        info.file_number = index->nFile;",
      "path": "src/node/chain.cpp",
      "position": null,
      "original_position": 17,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "3c82fa533a31939b867c774fe2c05f7a2e1d1a0c",
      "in_reply_to_id": 909241872,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r909241872\r\n\r\nIn commit \"interfaces, refactor: Add more block information to block connected notifications\" (0a93a16614659a7c12e7e95478a9bb564c1a13cb)\r\n\r\n> It seems that this will only copy/alias the internal memory to a different type. I wonder if this is actually useful, because it disables lock annotations for the memory where they may actually still be needed?\r\n\r\nI don't think there's actually a concern here, and this is what current code already does. `cs_main` is locked while reading `nFile` and `nDataPos` values, but not when `ReadBlockFromDisk` is called. Values are copied first and then used.\r\n\r\n> Also, I wonder how useful an interface is that returns a data structure that points into memory that is owned by a different process (I am assuming each blockindex runs in a different multiprocess)\r\n\r\nThe change in this commit is to replace individual `block` & `height` parameters with a `BlockInfo` struct parameter that can hold more information about the block:\r\n\r\n```diff\r\n-        virtual void blockConnected(const CBlock& block, int height) {}\r\n-        virtual void blockDisconnected(const CBlock& block, int height) {}\r\n+        virtual void blockConnected(const BlockInfo& block) {}\r\n+        virtual void blockDisconnected(const BlockInfo& block) {}\r\n```\r\n\r\nThe point of using the struct is to make code more readable and avoid the need to update `blockConnected`/`blockDisconnected` declarations when more block information is needed.\r\n\r\nSemantically there's no difference between passing a `const uint256& hash` parameter vs adding a `const uint256& hash;` struct member, or passing an `int file_number` parameter vs. adding an `int file_number;` struct member. All the copy and reference and lifetime concerns are the same.\r\n\r\nIt is true that because referencing memory in other processes is not possible, multiprocess code will create local copies of values when references are passed, and the local copies may have shorter lifetimes than original references. But this is true wherever references and pointers are used in `src/interface/` classes, so not a new thing.",
      "created_at": "2022-07-05T16:52:54Z",
      "updated_at": "2022-07-05T17:30:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r914005702",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/914005702"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/917168552",
      "pull_request_review_id": 1033423438,
      "id": 917168552,
      "node_id": "PRRC_kwDOABII5842quGo",
      "diff_hunk": "@@ -155,8 +161,14 @@ FUZZ_TARGET_INIT(wallet_notifications, initialize_setup)\n                 auto& [coins, block]{chain.back()};\n                 if (block.vtx.empty()) return; // Can only disconnect if the block was submitted first\n                 // Disconnect block\n-                a.wallet->blockDisconnected(block, chain.size() - 1);\n-                b.wallet->blockDisconnected(block, chain.size() - 1);\n+                const uint256& hash = block.GetHash();\n+                const uint256& prev_hash = chain.size() >= 2 ? std::get<1>(chain[chain.size() - 2]).GetHash() : uint256();",
      "path": "src/wallet/test/fuzz/notifications.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "0a93a16614659a7c12e7e95478a9bb564c1a13cb",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: I think this line could be made a little easier to parse but since it's in fuzzing it's not so important",
      "created_at": "2022-07-08T22:24:11Z",
      "updated_at": "2022-07-10T12:06:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r917168552",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/917168552"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/917300216",
      "pull_request_review_id": 1033423438,
      "id": 917300216,
      "node_id": "PRRC_kwDOABII5842rOP4",
      "diff_hunk": "@@ -67,6 +68,19 @@ class FoundBlock\n     mutable bool found = false;\n };\n \n+//! Block data sent with blockConnected, blockDisconnected notifications.\n+struct BlockInfo {\n+    const uint256& hash;\n+    const uint256* prev_hash = nullptr;\n+    int height = -1;\n+    int file_number = -1;\n+    unsigned data_pos = 0;\n+    const CBlock* data = nullptr;\n+    const CBlockUndo* undo_data = nullptr;",
      "path": "src/interfaces/chain.h",
      "position": 48,
      "original_position": 20,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "0a93a16614659a7c12e7e95478a9bb564c1a13cb",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "note for other reviewers: in this PR this is unused but will be used in follow-ups, see #24230",
      "created_at": "2022-07-09T19:21:50Z",
      "updated_at": "2022-07-10T12:06:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r917300216",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/917300216"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 88,
      "original_line": 88,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920134694",
      "pull_request_review_id": 1037443507,
      "id": 920134694,
      "node_id": "PRRC_kwDOABII58422CQm",
      "diff_hunk": "@@ -138,8 +138,14 @@ FUZZ_TARGET_INIT(wallet_notifications, initialize_setup)\n                     block.vtx.emplace_back(MakeTransactionRef(tx));\n                 }\n                 // Mine block\n-                a.wallet->blockConnected(block, chain.size());\n-                b.wallet->blockConnected(block, chain.size());\n+                const uint256& hash = block.GetHash();\n+                const uint256& prev_hash = std::get<1>(chain.back()).GetHash();",
      "path": "src/wallet/test/fuzz/notifications.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "0a93a16614659a7c12e7e95478a9bb564c1a13cb",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "first commit: block and chain.back() are both mutable references to the same memory, so I think this is wrong\r\n\r\nCould write `&block.hashPrevBlock` below?",
      "created_at": "2022-07-13T14:16:00Z",
      "updated_at": "2022-07-13T15:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920134694",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920134694"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 142,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920138374",
      "pull_request_review_id": 1037443507,
      "id": 920138374,
      "node_id": "PRRC_kwDOABII58422DKG",
      "diff_hunk": "@@ -155,8 +161,14 @@ FUZZ_TARGET_INIT(wallet_notifications, initialize_setup)\n                 auto& [coins, block]{chain.back()};\n                 if (block.vtx.empty()) return; // Can only disconnect if the block was submitted first\n                 // Disconnect block\n-                a.wallet->blockDisconnected(block, chain.size() - 1);\n-                b.wallet->blockDisconnected(block, chain.size() - 1);\n+                const uint256& hash = block.GetHash();\n+                const uint256& prev_hash = chain.size() >= 2 ? std::get<1>(chain[chain.size() - 2]).GetHash() : uint256();",
      "path": "src/wallet/test/fuzz/notifications.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "0a93a16614659a7c12e7e95478a9bb564c1a13cb",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Same commit: There is an early return above if the size is `1` or less, thus the size must be `2` or more, thus the check here is not needed. Also, could just remove all of this and write `&block.hashPrevBlock` below?",
      "created_at": "2022-07-13T14:19:07Z",
      "updated_at": "2022-07-13T15:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920138374",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920138374"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920139725",
      "pull_request_review_id": 1037443507,
      "id": 920139725,
      "node_id": "PRRC_kwDOABII58422DfN",
      "diff_hunk": "@@ -67,6 +68,19 @@ class FoundBlock\n     mutable bool found = false;\n };\n \n+//! Block data sent with blockConnected, blockDisconnected notifications.\n+struct BlockInfo {\n+    const uint256& hash;\n+    const uint256* prev_hash = nullptr;\n+    int height = -1;\n+    int file_number = -1;\n+    unsigned data_pos = 0;\n+    const CBlock* data = nullptr;\n+    const CBlockUndo* undo_data = nullptr;\n+\n+    BlockInfo(const uint256& hash) : hash(hash) {}",
      "path": "src/interfaces/chain.h",
      "position": null,
      "original_position": 22,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "0a93a16614659a7c12e7e95478a9bb564c1a13cb",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "first commit: Missing LIFETIMEBOUND attribute for `hash`?",
      "created_at": "2022-07-13T14:20:12Z",
      "updated_at": "2022-07-13T15:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920139725",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920139725"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920143703",
      "pull_request_review_id": 1037443507,
      "id": 920143703,
      "node_id": "PRRC_kwDOABII58422EdX",
      "diff_hunk": "@@ -1323,30 +1323,31 @@ void CWallet::transactionRemovedFromMempool(const CTransactionRef& tx, MemPoolRe\n     }\n }\n \n-void CWallet::blockConnected(const CBlock& block, int height)\n+void CWallet::blockConnected(const interfaces::BlockInfo& block)\n {\n-    const uint256& block_hash = block.GetHash();\n+    assert(block.data);\n     LOCK(cs_wallet);\n \n-    m_last_block_processed_height = height;\n-    m_last_block_processed = block_hash;\n-    for (size_t index = 0; index < block.vtx.size(); index++) {\n-        SyncTransaction(block.vtx[index], TxStateConfirmed{block_hash, height, static_cast<int>(index)});\n-        transactionRemovedFromMempool(block.vtx[index], MemPoolRemovalReason::BLOCK, 0 /* mempool_sequence */);\n+    m_last_block_processed_height = block.height;\n+    m_last_block_processed = block.hash;\n+    for (size_t index = 0; index < block.data->vtx.size(); index++) {\n+        SyncTransaction(block.data->vtx[index], TxStateConfirmed{block.hash, block.height, static_cast<int>(index)});\n+        transactionRemovedFromMempool(block.data->vtx[index], MemPoolRemovalReason::BLOCK, 0 /* mempool_sequence */);\n     }\n }\n \n-void CWallet::blockDisconnected(const CBlock& block, int height)\n+void CWallet::blockDisconnected(const interfaces::BlockInfo& block)\n {\n+    assert(block.data);\n     LOCK(cs_wallet);\n \n     // At block disconnection, this will change an abandoned transaction to\n     // be unconfirmed, whether or not the transaction is added back to the mempool.\n     // User may have to call abandontransaction again. It may be addressed in the\n     // future with a stickier abandoned state or even removing abandontransaction call.\n-    m_last_block_processed_height = height - 1;\n-    m_last_block_processed = block.hashPrevBlock;\n-    for (const CTransactionRef& ptx : block.vtx) {\n+    m_last_block_processed_height = block.height - 1;\n+    m_last_block_processed = *block.prev_hash;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 38,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "0a93a16614659a7c12e7e95478a9bb564c1a13cb",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "First commit: Why are you changing this from `block.data->hashPrevBlock`? If this is intentional, missing an assert to avoid UB?",
      "created_at": "2022-07-13T14:23:41Z",
      "updated_at": "2022-07-13T15:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920143703",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920143703"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920151862",
      "pull_request_review_id": 1037443507,
      "id": 920151862,
      "node_id": "PRRC_kwDOABII58422Gc2",
      "diff_hunk": "@@ -102,7 +102,7 @@ struct DBHashKey {\n \n std::unique_ptr<CoinStatsIndex> g_coin_stats_index;\n \n-CoinStatsIndex::CoinStatsIndex(size_t n_cache_size, bool f_memory, bool f_wipe)\n+CoinStatsIndex::CoinStatsIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe) : BaseIndex(std::move(chain))",
      "path": "src/index/coinstatsindex.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "2f8a5307b7065de08df2edaa369739544248387f",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "2f8a5307b7065de08df2edaa369739544248387f: (nit) Start newline before `:` to avoid excessive line length?",
      "created_at": "2022-07-13T14:30:09Z",
      "updated_at": "2022-07-13T15:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920151862",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920151862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920156128",
      "pull_request_review_id": 1037443507,
      "id": 920156128,
      "node_id": "PRRC_kwDOABII58422Hfg",
      "diff_hunk": "@@ -1579,22 +1579,22 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             return InitError(*error);\n         }\n \n-        g_txindex = std::make_unique<TxIndex>(cache_sizes.tx_index, false, fReindex);\n-        if (!g_txindex->Start(chainman.ActiveChainstate())) {\n+        g_txindex = std::make_unique<TxIndex>(interfaces::MakeChain(node), cache_sizes.tx_index, false, fReindex);\n+        if (!g_txindex->Start()) {\n             return false;\n         }\n     }\n \n     for (const auto& filter_type : g_enabled_filter_types) {\n-        InitBlockFilterIndex(filter_type, cache_sizes.filter_index, false, fReindex);\n-        if (!GetBlockFilterIndex(filter_type)->Start(chainman.ActiveChainstate())) {\n+        InitBlockFilterIndex([&]{ return interfaces::MakeChain(node); }, filter_type, cache_sizes.filter_index, false, fReindex);",
      "path": "src/init.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "2f8a5307b7065de08df2edaa369739544248387f",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "2f8a5307b7065de08df2edaa369739544248387f: Wrapping this into a function to avoid moving a pointer seems overkill?",
      "created_at": "2022-07-13T14:33:43Z",
      "updated_at": "2022-07-13T15:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920156128",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920156128"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1604,
      "original_line": 1604,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920222836",
      "pull_request_review_id": 1037443507,
      "id": 920222836,
      "node_id": "PRRC_kwDOABII58422Xx0",
      "diff_hunk": "@@ -878,6 +878,7 @@ libbitcoinkernel_la_SOURCES = \\\n   key.cpp \\\n   logging.cpp \\\n   node/blockstorage.cpp \\\n+  node/chain.cpp \\",
      "path": "src/Makefile.am",
      "position": null,
      "original_position": 4,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "88cad3cb604058d8f26790eeb37abe2dabc0c033",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "88cad3cb604058d8f26790eeb37abe2dabc0c033: Could explain in the commit message that this is only temporary? If not, move it to the kernel folder?",
      "created_at": "2022-07-13T15:32:07Z",
      "updated_at": "2022-07-13T15:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920222836",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920222836"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 881,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920223420",
      "pull_request_review_id": 1037443507,
      "id": 920223420,
      "node_id": "PRRC_kwDOABII58422X68",
      "diff_hunk": "@@ -209,22 +210,25 @@ size_t BlockFilterIndex::WriteFilterToDisk(FlatFilePos& pos, const BlockFilter&\n     return data_size;\n }\n \n-bool BlockFilterIndex::WriteBlock(const CBlock& block, const CBlockIndex* pindex)\n+bool BlockFilterIndex::CustomAppend(const interfaces::BlockInfo& block)\n {\n     CBlockUndo block_undo;\n     uint256 prev_header;\n \n-    if (pindex->nHeight > 0) {\n+    if (block.height > 0) {\n+        // pindex variable gives indexing code access to node internals. It\n+        // will be removed in upcoming commit\n+        const CBlockIndex* pindex = WITH_LOCK(cs_main, return m_chainstate->m_blockman.LookupBlockIndex(block.hash));\n         if (!UndoReadFromDisk(block_undo, pindex)) {\n             return false;\n         }\n \n         std::pair<uint256, DBVal> read_out;\n-        if (!m_db->Read(DBHeightKey(pindex->nHeight - 1), read_out)) {\n+        if (!m_db->Read(DBHeightKey(block.height - 1), read_out)) {\n             return false;\n         }\n \n-        uint256 expected_block_hash = pindex->pprev->GetBlockHash();\n+        uint256 expected_block_hash = *block.prev_hash;",
      "path": "src/index/blockfilterindex.cpp",
      "position": null,
      "original_position": 34,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "88cad3cb604058d8f26790eeb37abe2dabc0c033",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "88cad3cb604058d8f26790eeb37abe2dabc0c033: I wonder where UB should be avoided with asserts and where not",
      "created_at": "2022-07-13T15:32:37Z",
      "updated_at": "2022-07-13T15:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920223420",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920223420"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 231,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920223553",
      "pull_request_review_id": 1037443507,
      "id": 920223553,
      "node_id": "PRRC_kwDOABII58422X9B",
      "diff_hunk": "@@ -233,18 +237,18 @@ bool BlockFilterIndex::WriteBlock(const CBlock& block, const CBlockIndex* pindex\n         prev_header = read_out.second.header;\n     }\n \n-    BlockFilter filter(m_filter_type, block, block_undo);\n+    BlockFilter filter(m_filter_type, *block.data, block_undo);",
      "path": "src/index/blockfilterindex.cpp",
      "position": null,
      "original_position": 43,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "88cad3cb604058d8f26790eeb37abe2dabc0c033",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Same",
      "created_at": "2022-07-13T15:32:44Z",
      "updated_at": "2022-07-13T15:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920223553",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920223553"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 240,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920224709",
      "pull_request_review_id": 1037443507,
      "id": 920224709,
      "node_id": "PRRC_kwDOABII58422YPF",
      "diff_hunk": "@@ -110,24 +110,27 @@ CoinStatsIndex::CoinStatsIndex(std::unique_ptr<interfaces::Chain> chain, size_t\n     m_db = std::make_unique<CoinStatsIndex::DB>(path / \"db\", n_cache_size, f_memory, f_wipe);\n }\n \n-bool CoinStatsIndex::WriteBlock(const CBlock& block, const CBlockIndex* pindex)\n+bool CoinStatsIndex::CustomAppend(const interfaces::BlockInfo& block)\n {\n     CBlockUndo block_undo;\n-    const CAmount block_subsidy{GetBlockSubsidy(pindex->nHeight, Params().GetConsensus())};\n+    const CAmount block_subsidy{GetBlockSubsidy(block.height, Params().GetConsensus())};\n     m_total_subsidy += block_subsidy;\n \n     // Ignore genesis block\n-    if (pindex->nHeight > 0) {\n+    if (block.height > 0) {\n+        // pindex variable gives indexing code access to node internals. It\n+        // will be removed in upcoming commit\n+        const CBlockIndex* pindex = WITH_LOCK(cs_main, return m_chainstate->m_blockman.LookupBlockIndex(block.hash));\n         if (!UndoReadFromDisk(block_undo, pindex)) {\n             return false;\n         }\n \n         std::pair<uint256, DBVal> read_out;\n-        if (!m_db->Read(DBHeightKey(pindex->nHeight - 1), read_out)) {\n+        if (!m_db->Read(DBHeightKey(block.height - 1), read_out)) {\n             return false;\n         }\n \n-        uint256 expected_block_hash{pindex->pprev->GetBlockHash()};\n+        uint256 expected_block_hash{*block.prev_hash};",
      "path": "src/index/coinstatsindex.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "88cad3cb604058d8f26790eeb37abe2dabc0c033",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Same",
      "created_at": "2022-07-13T15:33:49Z",
      "updated_at": "2022-07-13T15:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920224709",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920224709"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 133,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920243749",
      "pull_request_review_id": 1037443507,
      "id": 920243749,
      "node_id": "PRRC_kwDOABII58422c4l",
      "diff_hunk": "@@ -206,22 +215,19 @@ void BaseIndex::ThreadSync()\n \n bool BaseIndex::Commit()\n {\n-    CDBBatch batch(GetDB());\n-    if (!CommitInternal(batch) || !GetDB().WriteBatch(batch)) {\n-        return error(\"%s: Failed to commit latest %s state\", __func__, GetName());\n-    }\n-    return true;\n-}\n-\n-bool BaseIndex::CommitInternal(CDBBatch& batch)\n-{\n-    LOCK(cs_main);\n     // Don't commit anything if we haven't indexed any block yet\n     // (this could happen if init is interrupted).\n     if (m_best_block_index == nullptr) {\n         return false;",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 33,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3: This changes behavior: Previously there was a call to `error()`, now there is none?",
      "created_at": "2022-07-13T15:50:52Z",
      "updated_at": "2022-07-13T15:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920243749",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920243749"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920806328",
      "pull_request_review_id": 1038366919,
      "id": 920806328,
      "node_id": "PRRC_kwDOABII58424mO4",
      "diff_hunk": "@@ -0,0 +1,23 @@\n+// Copyright (c) 2022 The Bitcoin Core developers",
      "path": "src/node/chain.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe add this new file to iwyu?",
      "created_at": "2022-07-14T06:41:28Z",
      "updated_at": "2022-07-14T06:41:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920806328",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/920806328"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921500546",
      "pull_request_review_id": 1039377005,
      "id": 921500546,
      "node_id": "PRRC_kwDOABII58427PuC",
      "diff_hunk": "@@ -67,6 +68,19 @@ class FoundBlock\n     mutable bool found = false;\n };\n \n+//! Block data sent with blockConnected, blockDisconnected notifications.\n+struct BlockInfo {\n+    const uint256& hash;\n+    const uint256* prev_hash = nullptr;\n+    int height = -1;\n+    int file_number = -1;\n+    unsigned data_pos = 0;\n+    const CBlock* data = nullptr;\n+    const CBlockUndo* undo_data = nullptr;\n+\n+    BlockInfo(const uint256& hash) : hash(hash) {}",
      "path": "src/interfaces/chain.h",
      "position": null,
      "original_position": 22,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "0a93a16614659a7c12e7e95478a9bb564c1a13cb",
      "in_reply_to_id": 920139725,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920139725\r\n\r\n> first commit: Missing LIFETIMEBOUND attribute for `hash`?\r\n\r\nAdded. This is great! I did not know about this",
      "created_at": "2022-07-14T19:28:26Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921500546",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921500546"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921500652",
      "pull_request_review_id": 1039377005,
      "id": 921500652,
      "node_id": "PRRC_kwDOABII58427Pvs",
      "diff_hunk": "@@ -0,0 +1,23 @@\n+// Copyright (c) 2022 The Bitcoin Core developers",
      "path": "src/node/chain.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "in_reply_to_id": 920806328,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920806328\r\n\r\n> Maybe add this new file to iwyu?\r\n\r\nThanks, added",
      "created_at": "2022-07-14T19:28:35Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921500652",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921500652"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921500845",
      "pull_request_review_id": 1039377005,
      "id": 921500845,
      "node_id": "PRRC_kwDOABII58427Pyt",
      "diff_hunk": "@@ -102,7 +102,7 @@ struct DBHashKey {\n \n std::unique_ptr<CoinStatsIndex> g_coin_stats_index;\n \n-CoinStatsIndex::CoinStatsIndex(size_t n_cache_size, bool f_memory, bool f_wipe)\n+CoinStatsIndex::CoinStatsIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe) : BaseIndex(std::move(chain))",
      "path": "src/index/coinstatsindex.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "2f8a5307b7065de08df2edaa369739544248387f",
      "in_reply_to_id": 920151862,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920151862\r\n\r\n> [2f8a530](https://github.com/bitcoin/bitcoin/commit/2f8a5307b7065de08df2edaa369739544248387f): (nit) Start newline before `:` to avoid excessive line length?\r\n\r\nNow moved to new line",
      "created_at": "2022-07-14T19:28:51Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921500845",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921500845"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921500928",
      "pull_request_review_id": 1039377005,
      "id": 921500928,
      "node_id": "PRRC_kwDOABII58427P0A",
      "diff_hunk": "@@ -1579,22 +1579,22 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             return InitError(*error);\n         }\n \n-        g_txindex = std::make_unique<TxIndex>(cache_sizes.tx_index, false, fReindex);\n-        if (!g_txindex->Start(chainman.ActiveChainstate())) {\n+        g_txindex = std::make_unique<TxIndex>(interfaces::MakeChain(node), cache_sizes.tx_index, false, fReindex);\n+        if (!g_txindex->Start()) {\n             return false;\n         }\n     }\n \n     for (const auto& filter_type : g_enabled_filter_types) {\n-        InitBlockFilterIndex(filter_type, cache_sizes.filter_index, false, fReindex);\n-        if (!GetBlockFilterIndex(filter_type)->Start(chainman.ActiveChainstate())) {\n+        InitBlockFilterIndex([&]{ return interfaces::MakeChain(node); }, filter_type, cache_sizes.filter_index, false, fReindex);",
      "path": "src/init.cpp",
      "position": 15,
      "original_position": 15,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "2f8a5307b7065de08df2edaa369739544248387f",
      "in_reply_to_id": 920156128,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920156128\r\n\r\n> [2f8a530](https://github.com/bitcoin/bitcoin/commit/2f8a5307b7065de08df2edaa369739544248387f): Wrapping this into a function to avoid moving a pointer seems overkill?\r\n\r\nReason this is using a `std::function` is I was looking for a simple way to allow the Init*Index functions to stay where they are in `src/index/` without referencing the `NodeContext` struct. Maybe this isn't a critical goal though, or there is a better way of achieving it. Since I want to extend #10102 to run indexes separately I will have to revisit this code anyway later, so happy to go with whatever would be suggested now if this is not good.",
      "created_at": "2022-07-14T19:28:58Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921500928",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921500928"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1604,
      "original_line": 1604,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921501175",
      "pull_request_review_id": 1039377005,
      "id": 921501175,
      "node_id": "PRRC_kwDOABII58427P33",
      "diff_hunk": "@@ -878,6 +878,7 @@ libbitcoinkernel_la_SOURCES = \\\n   key.cpp \\\n   logging.cpp \\\n   node/blockstorage.cpp \\\n+  node/chain.cpp \\",
      "path": "src/Makefile.am",
      "position": null,
      "original_position": 4,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "88cad3cb604058d8f26790eeb37abe2dabc0c033",
      "in_reply_to_id": 920222836,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920222836\r\n\r\n> [88cad3c](https://github.com/bitcoin/bitcoin/commit/88cad3cb604058d8f26790eeb37abe2dabc0c033): Could explain in the commit message that this is only temporary? If not, move it to the kernel folder?\r\n\r\nMoved to kernel folder",
      "created_at": "2022-07-14T19:29:18Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921501175",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921501175"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 881,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921501282",
      "pull_request_review_id": 1039377005,
      "id": 921501282,
      "node_id": "PRRC_kwDOABII58427P5i",
      "diff_hunk": "@@ -209,22 +210,25 @@ size_t BlockFilterIndex::WriteFilterToDisk(FlatFilePos& pos, const BlockFilter&\n     return data_size;\n }\n \n-bool BlockFilterIndex::WriteBlock(const CBlock& block, const CBlockIndex* pindex)\n+bool BlockFilterIndex::CustomAppend(const interfaces::BlockInfo& block)\n {\n     CBlockUndo block_undo;\n     uint256 prev_header;\n \n-    if (pindex->nHeight > 0) {\n+    if (block.height > 0) {\n+        // pindex variable gives indexing code access to node internals. It\n+        // will be removed in upcoming commit\n+        const CBlockIndex* pindex = WITH_LOCK(cs_main, return m_chainstate->m_blockman.LookupBlockIndex(block.hash));\n         if (!UndoReadFromDisk(block_undo, pindex)) {\n             return false;\n         }\n \n         std::pair<uint256, DBVal> read_out;\n-        if (!m_db->Read(DBHeightKey(pindex->nHeight - 1), read_out)) {\n+        if (!m_db->Read(DBHeightKey(block.height - 1), read_out)) {\n             return false;\n         }\n \n-        uint256 expected_block_hash = pindex->pprev->GetBlockHash();\n+        uint256 expected_block_hash = *block.prev_hash;",
      "path": "src/index/blockfilterindex.cpp",
      "position": null,
      "original_position": 34,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "88cad3cb604058d8f26790eeb37abe2dabc0c033",
      "in_reply_to_id": 920223420,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920223420\r\n\r\n> [88cad3c](https://github.com/bitcoin/bitcoin/commit/88cad3cb604058d8f26790eeb37abe2dabc0c033): I wonder where UB should be avoided with asserts and where not\r\n\r\nI think it's reasonable to add Asserts all these places or add a `const uint256& PrevHash()` helper method which asserts, if the Assert is too verbose. Just to be clear, there shouldn't be any UB presently here due to the `block.height > 0` check above. The Assert is just an extra check against possible future UB that could occur if a bug is introduced somewhere else in the code.",
      "created_at": "2022-07-14T19:29:30Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921501282",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921501282"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 231,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921501376",
      "pull_request_review_id": 1039377005,
      "id": 921501376,
      "node_id": "PRRC_kwDOABII58427P7A",
      "diff_hunk": "@@ -110,24 +110,27 @@ CoinStatsIndex::CoinStatsIndex(std::unique_ptr<interfaces::Chain> chain, size_t\n     m_db = std::make_unique<CoinStatsIndex::DB>(path / \"db\", n_cache_size, f_memory, f_wipe);\n }\n \n-bool CoinStatsIndex::WriteBlock(const CBlock& block, const CBlockIndex* pindex)\n+bool CoinStatsIndex::CustomAppend(const interfaces::BlockInfo& block)\n {\n     CBlockUndo block_undo;\n-    const CAmount block_subsidy{GetBlockSubsidy(pindex->nHeight, Params().GetConsensus())};\n+    const CAmount block_subsidy{GetBlockSubsidy(block.height, Params().GetConsensus())};\n     m_total_subsidy += block_subsidy;\n \n     // Ignore genesis block\n-    if (pindex->nHeight > 0) {\n+    if (block.height > 0) {\n+        // pindex variable gives indexing code access to node internals. It\n+        // will be removed in upcoming commit\n+        const CBlockIndex* pindex = WITH_LOCK(cs_main, return m_chainstate->m_blockman.LookupBlockIndex(block.hash));\n         if (!UndoReadFromDisk(block_undo, pindex)) {\n             return false;\n         }\n \n         std::pair<uint256, DBVal> read_out;\n-        if (!m_db->Read(DBHeightKey(pindex->nHeight - 1), read_out)) {\n+        if (!m_db->Read(DBHeightKey(block.height - 1), read_out)) {\n             return false;\n         }\n \n-        uint256 expected_block_hash{pindex->pprev->GetBlockHash()};\n+        uint256 expected_block_hash{*block.prev_hash};",
      "path": "src/index/coinstatsindex.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "88cad3cb604058d8f26790eeb37abe2dabc0c033",
      "in_reply_to_id": 920224709,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920224709\r\n\r\n> Same\r\n\r\nAdded Assert",
      "created_at": "2022-07-14T19:29:38Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921501376",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921501376"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 133,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921501660",
      "pull_request_review_id": 1039377005,
      "id": 921501660,
      "node_id": "PRRC_kwDOABII58427P_c",
      "diff_hunk": "@@ -206,22 +215,19 @@ void BaseIndex::ThreadSync()\n \n bool BaseIndex::Commit()\n {\n-    CDBBatch batch(GetDB());\n-    if (!CommitInternal(batch) || !GetDB().WriteBatch(batch)) {\n-        return error(\"%s: Failed to commit latest %s state\", __func__, GetName());\n-    }\n-    return true;\n-}\n-\n-bool BaseIndex::CommitInternal(CDBBatch& batch)\n-{\n-    LOCK(cs_main);\n     // Don't commit anything if we haven't indexed any block yet\n     // (this could happen if init is interrupted).\n     if (m_best_block_index == nullptr) {\n         return false;",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 33,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "in_reply_to_id": 920243749,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920243749\r\n\r\n> [ddbbdcf](https://github.com/bitcoin/bitcoin/commit/ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3): This changes behavior: Previously there was a call to `error()`, now there is none?\r\n\r\nGood catch. The error print was lost because of a bad rebase. The `m_best_block_index == nullptr` check was added in #24117 after this was written. Fixed now",
      "created_at": "2022-07-14T19:30:03Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921501660",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921501660"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921502632",
      "pull_request_review_id": 1039377005,
      "id": 921502632,
      "node_id": "PRRC_kwDOABII58427QOo",
      "diff_hunk": "@@ -138,8 +138,14 @@ FUZZ_TARGET_INIT(wallet_notifications, initialize_setup)\n                     block.vtx.emplace_back(MakeTransactionRef(tx));\n                 }\n                 // Mine block\n-                a.wallet->blockConnected(block, chain.size());\n-                b.wallet->blockConnected(block, chain.size());\n+                const uint256& hash = block.GetHash();\n+                const uint256& prev_hash = std::get<1>(chain.back()).GetHash();",
      "path": "src/wallet/test/fuzz/notifications.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "0a93a16614659a7c12e7e95478a9bb564c1a13cb",
      "in_reply_to_id": 920134694,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920134694\r\n\r\n> first commit: block and chain.back() are both mutable references to the same memory, so I think this is wrong\r\n> \r\n> Could write `&block.hashPrevBlock` below?\r\n\r\nGood catch. `block.hashPrevBlock` seems simpler anyway",
      "created_at": "2022-07-14T19:31:17Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921502632",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921502632"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 142,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921503131",
      "pull_request_review_id": 1039377005,
      "id": 921503131,
      "node_id": "PRRC_kwDOABII58427QWb",
      "diff_hunk": "@@ -155,8 +161,14 @@ FUZZ_TARGET_INIT(wallet_notifications, initialize_setup)\n                 auto& [coins, block]{chain.back()};\n                 if (block.vtx.empty()) return; // Can only disconnect if the block was submitted first\n                 // Disconnect block\n-                a.wallet->blockDisconnected(block, chain.size() - 1);\n-                b.wallet->blockDisconnected(block, chain.size() - 1);\n+                const uint256& hash = block.GetHash();\n+                const uint256& prev_hash = chain.size() >= 2 ? std::get<1>(chain[chain.size() - 2]).GetHash() : uint256();",
      "path": "src/wallet/test/fuzz/notifications.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "0a93a16614659a7c12e7e95478a9bb564c1a13cb",
      "in_reply_to_id": 920138374,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920138374\r\n\r\n> Same commit: There is an early return above if the size is `1` or less, thus the size must be `2` or more, thus the check here is not needed. Also, could just remove all of this and write `&block.hashPrevBlock` below?\r\n\r\nGood catch, simplified",
      "created_at": "2022-07-14T19:31:43Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921503131",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921503131"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921503292",
      "pull_request_review_id": 1039377005,
      "id": 921503292,
      "node_id": "PRRC_kwDOABII58427QY8",
      "diff_hunk": "@@ -155,8 +161,14 @@ FUZZ_TARGET_INIT(wallet_notifications, initialize_setup)\n                 auto& [coins, block]{chain.back()};\n                 if (block.vtx.empty()) return; // Can only disconnect if the block was submitted first\n                 // Disconnect block\n-                a.wallet->blockDisconnected(block, chain.size() - 1);\n-                b.wallet->blockDisconnected(block, chain.size() - 1);\n+                const uint256& hash = block.GetHash();\n+                const uint256& prev_hash = chain.size() >= 2 ? std::get<1>(chain[chain.size() - 2]).GetHash() : uint256();",
      "path": "src/wallet/test/fuzz/notifications.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "0a93a16614659a7c12e7e95478a9bb564c1a13cb",
      "in_reply_to_id": 917168552,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r917168552\r\n\r\n> nit: I think this line could be made a little easier to parse but since it's in fuzzing it's not so important\r\n\r\nSimplified",
      "created_at": "2022-07-14T19:31:50Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921503292",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921503292"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921503603",
      "pull_request_review_id": 1039377005,
      "id": 921503603,
      "node_id": "PRRC_kwDOABII58427Qdz",
      "diff_hunk": "@@ -1323,30 +1323,31 @@ void CWallet::transactionRemovedFromMempool(const CTransactionRef& tx, MemPoolRe\n     }\n }\n \n-void CWallet::blockConnected(const CBlock& block, int height)\n+void CWallet::blockConnected(const interfaces::BlockInfo& block)\n {\n-    const uint256& block_hash = block.GetHash();\n+    assert(block.data);\n     LOCK(cs_wallet);\n \n-    m_last_block_processed_height = height;\n-    m_last_block_processed = block_hash;\n-    for (size_t index = 0; index < block.vtx.size(); index++) {\n-        SyncTransaction(block.vtx[index], TxStateConfirmed{block_hash, height, static_cast<int>(index)});\n-        transactionRemovedFromMempool(block.vtx[index], MemPoolRemovalReason::BLOCK, 0 /* mempool_sequence */);\n+    m_last_block_processed_height = block.height;\n+    m_last_block_processed = block.hash;\n+    for (size_t index = 0; index < block.data->vtx.size(); index++) {\n+        SyncTransaction(block.data->vtx[index], TxStateConfirmed{block.hash, block.height, static_cast<int>(index)});\n+        transactionRemovedFromMempool(block.data->vtx[index], MemPoolRemovalReason::BLOCK, 0 /* mempool_sequence */);\n     }\n }\n \n-void CWallet::blockDisconnected(const CBlock& block, int height)\n+void CWallet::blockDisconnected(const interfaces::BlockInfo& block)\n {\n+    assert(block.data);\n     LOCK(cs_wallet);\n \n     // At block disconnection, this will change an abandoned transaction to\n     // be unconfirmed, whether or not the transaction is added back to the mempool.\n     // User may have to call abandontransaction again. It may be addressed in the\n     // future with a stickier abandoned state or even removing abandontransaction call.\n-    m_last_block_processed_height = height - 1;\n-    m_last_block_processed = block.hashPrevBlock;\n-    for (const CTransactionRef& ptx : block.vtx) {\n+    m_last_block_processed_height = block.height - 1;\n+    m_last_block_processed = *block.prev_hash;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 38,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "0a93a16614659a7c12e7e95478a9bb564c1a13cb",
      "in_reply_to_id": 920143703,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920143703\r\n\r\n> First commit: Why are you changing this from `block.data->hashPrevBlock`? If this is intentional, missing an assert to avoid UB?\r\n\r\nI just didn't want to depend on block data unnecessarily here, even it it used below. Maybe the code could be split up or reorganized and it would no longer be necessary. Added asserts here and below, though.",
      "created_at": "2022-07-14T19:32:04Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921503603",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921503603"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921518110",
      "pull_request_review_id": 1039377005,
      "id": 921518110,
      "node_id": "PRRC_kwDOABII58427UAe",
      "diff_hunk": "@@ -233,18 +237,18 @@ bool BlockFilterIndex::WriteBlock(const CBlock& block, const CBlockIndex* pindex\n         prev_header = read_out.second.header;\n     }\n \n-    BlockFilter filter(m_filter_type, block, block_undo);\n+    BlockFilter filter(m_filter_type, *block.data, block_undo);",
      "path": "src/index/blockfilterindex.cpp",
      "position": null,
      "original_position": 43,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "88cad3cb604058d8f26790eeb37abe2dabc0c033",
      "in_reply_to_id": 920223553,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r920223553\r\n\r\n> Same\r\n\r\nAdded Assert",
      "created_at": "2022-07-14T19:51:22Z",
      "updated_at": "2022-07-14T23:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921518110",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921518110"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 240,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921898495",
      "pull_request_review_id": 1039916505,
      "id": 921898495,
      "node_id": "PRRC_kwDOABII58428w3_",
      "diff_hunk": "@@ -206,22 +215,20 @@ void BaseIndex::ThreadSync()\n \n bool BaseIndex::Commit()\n {\n-    CDBBatch batch(GetDB());\n-    if (!CommitInternal(batch) || !GetDB().WriteBatch(batch)) {\n-        return error(\"%s: Failed to commit latest %s state\", __func__, GetName());\n-    }\n-    return true;\n-}\n-\n-bool BaseIndex::CommitInternal(CDBBatch& batch)\n-{\n-    LOCK(cs_main);\n     // Don't commit anything if we haven't indexed any block yet\n     // (this could happen if init is interrupted).\n-    if (m_best_block_index == nullptr) {\n-        return false;\n+    bool ok = m_best_block_index != nullptr;\n+    if (ok) {",
      "path": "src/index/base.cpp",
      "position": 73,
      "original_position": 35,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "f678151ff9a0a5934965b1c85ec97a1dfe45a67e",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is still wrong?\r\n\r\nPreviously the call order was CoinStatsIndex::CustomCommit , then BaseIndex::CommitInternal (which may be skipped).\r\n\r\nNow, everything is skipped?",
      "created_at": "2022-07-15T07:39:14Z",
      "updated_at": "2022-07-15T07:39:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921898495",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921898495"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 221,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921899155",
      "pull_request_review_id": 1039917440,
      "id": 921899155,
      "node_id": "PRRC_kwDOABII58428xCT",
      "diff_hunk": "@@ -0,0 +1,23 @@\n+// Copyright (c) 2022 The Bitcoin Core developers",
      "path": "src/node/chain.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "in_reply_to_id": 920806328,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "https://cirrus-ci.com/task/4504627910541312?logs=ci#L6998",
      "created_at": "2022-07-15T07:40:05Z",
      "updated_at": "2022-07-15T07:40:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921899155",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921899155"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921900387",
      "pull_request_review_id": 1039919099,
      "id": 921900387,
      "node_id": "PRRC_kwDOABII58428xVj",
      "diff_hunk": "@@ -0,0 +1,23 @@\n+// Copyright (c) 2022 The Bitcoin Core developers",
      "path": "src/node/chain.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "in_reply_to_id": 920806328,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Looks like an iwyu bug, so maybe undo for now?",
      "created_at": "2022-07-15T07:41:40Z",
      "updated_at": "2022-07-15T07:41:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921900387",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/921900387"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/922095827",
      "pull_request_review_id": 1040194096,
      "id": 922095827,
      "node_id": "PRRC_kwDOABII58429hDT",
      "diff_hunk": "@@ -206,22 +215,20 @@ void BaseIndex::ThreadSync()\n \n bool BaseIndex::Commit()\n {\n-    CDBBatch batch(GetDB());\n-    if (!CommitInternal(batch) || !GetDB().WriteBatch(batch)) {\n-        return error(\"%s: Failed to commit latest %s state\", __func__, GetName());\n-    }\n-    return true;\n-}\n-\n-bool BaseIndex::CommitInternal(CDBBatch& batch)\n-{\n-    LOCK(cs_main);\n     // Don't commit anything if we haven't indexed any block yet\n     // (this could happen if init is interrupted).\n-    if (m_best_block_index == nullptr) {\n-        return false;\n+    bool ok = m_best_block_index != nullptr;\n+    if (ok) {",
      "path": "src/index/base.cpp",
      "position": 73,
      "original_position": 35,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "f678151ff9a0a5934965b1c85ec97a1dfe45a67e",
      "in_reply_to_id": 921898495,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921898495\r\n\r\nIn commit \"indexes, refactor: Remove CChainState use in index CommitInternal method\" (f678151ff9a0a5934965b1c85ec97a1dfe45a67e)\r\n\r\n> This is still wrong?\r\n> \r\n> Previously the call order was CoinStatsIndex::CustomCommit , then BaseIndex::CommitInternal (which may be skipped).\r\n> \r\n> Now, everything is skipped?\r\n\r\nYou are referring to the `m_best_block_index == nullptr` case? If so then yes the whole commit is skipped now when previously only half of the commit was skipped (custom part was not skipped, base part was skipped).\r\n\r\nI didn't notice yesterday that only the base half of the commit was skipped, but it's definitely better to skip the whole commit. This `m_block_index == nullptr` case was only added very recently in https://github.com/bitcoin/bitcoin/pull/24117/commits/0243907faee0aa6af09974131d9a46a7f9c3ef38 as part of an attempt to avoid index corruption if state was flushed during startup that would happen because `GetLocator` can return null on startup. It was an imperfect attempt and according to comments in https://github.com/bitcoin/bitcoin/pull/24117#issuecomment-1155529925, corruption continued to happen after that PR. It's possible this commit might inadvertently fix this by skipping the whole commit instead of half of it, but it's not clear. In any case, it should be better behavior and it makes more sense to skip the whole commit.",
      "created_at": "2022-07-15T11:55:34Z",
      "updated_at": "2022-07-15T12:21:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r922095827",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/922095827"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 221,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/922113738",
      "pull_request_review_id": 1040220430,
      "id": 922113738,
      "node_id": "PRRC_kwDOABII58429lbK",
      "diff_hunk": "@@ -0,0 +1,23 @@\n+// Copyright (c) 2022 The Bitcoin Core developers",
      "path": "src/node/chain.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "ddbbdcf4112c3a84e3287e6bf701e0eb592b24c3",
      "in_reply_to_id": 920806328,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/25494#discussion_r921900387\r\n\r\n> https://cirrus-ci.com/task/4504627910541312?logs=ci#L6998\r\n\r\n> Looks like an iwyu bug, so maybe undo for now?\r\n\r\nI'm not actually sure what the bug is but I added some missing includes and undid change that adds the file to IWYU for now. The larger PR https://github.com/bitcoin/bitcoin/pull/24230 this was part of adds more to this file so there is a chance to enable IWYU again later\r\n\r\n\r\n",
      "created_at": "2022-07-15T12:22:11Z",
      "updated_at": "2022-07-15T12:24:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r922113738",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/922113738"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/924810836",
      "pull_request_review_id": 1043871599,
      "id": 924810836,
      "node_id": "PRRC_kwDOABII5843H35U",
      "diff_hunk": "@@ -206,22 +215,20 @@ void BaseIndex::ThreadSync()\n \n bool BaseIndex::Commit()\n {\n-    CDBBatch batch(GetDB());\n-    if (!CommitInternal(batch) || !GetDB().WriteBatch(batch)) {\n-        return error(\"%s: Failed to commit latest %s state\", __func__, GetName());\n-    }\n-    return true;\n-}\n-\n-bool BaseIndex::CommitInternal(CDBBatch& batch)\n-{\n-    LOCK(cs_main);\n     // Don't commit anything if we haven't indexed any block yet\n     // (this could happen if init is interrupted).\n-    if (m_best_block_index == nullptr) {\n-        return false;\n+    bool ok = m_best_block_index != nullptr;\n+    if (ok) {",
      "path": "src/index/base.cpp",
      "position": 73,
      "original_position": 35,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "f678151ff9a0a5934965b1c85ec97a1dfe45a67e",
      "in_reply_to_id": 921898495,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think that skipping the error message in the `m_block_index == nullptr` case would have actually been ok: Right now, everytime one starts to sync a new index with an existing chain, this would appear once in the error log, even though it is expected and not actually an error. But possibly this is fixed anyway by a later commit from https://github.com/bitcoin/bitcoin/pull/24230 rewriting the init logic anyway into not attempting to call commit before actually doing some indexing?\r\n\r\nI agree that skipping the entire thing custom+base commit makes more sense, but I can't see how this could possibly avoid additional cases of corruption or be the cause of https://github.com/bitcoin/bitcoin/pull/24117#issuecomment-1155529925, since the custom code in both coinstatsindex and blockfilterindex doesn't make use of `m_block_index` and just prepares custom data in the batch without committing.",
      "created_at": "2022-07-19T18:00:58Z",
      "updated_at": "2022-07-19T18:00:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r924810836",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/924810836"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 221,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198123860",
      "pull_request_review_id": 1433186191,
      "id": 1198123860,
      "node_id": "PRRC_kwDOABII585HaetU",
      "diff_hunk": "@@ -359,7 +359,10 @@ bool BaseIndex::Start()\n     // Need to register this ValidationInterface before running Init(), so that\n     // callbacks are not missed if Init sets m_synced to true.\n     RegisterValidationInterface(this);\n-    if (!Init()) {\n+    if (!Init()) return false;\n+\n+    const CBlockIndex* index = m_best_block_index.load();\n+    if (!CustomInit(index ? std::make_optional(interfaces::BlockKey{index->GetBlockHash(), index->nHeight}) : std::nullopt)) {",
      "path": "src/index/base.cpp",
      "position": 128,
      "original_position": 8,
      "commit_id": "7878f97bf15b6e7c9b47d1c0d96419b97e1bdcbd",
      "original_commit_id": "bef4e405f3de2718dfee279a9abff4daf016da26",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"indexes, refactor: Remove CBlockIndex* uses in index Init methods\" (bef4e405f3de2718dfee279a9abff4daf016da26)\r\n\r\nCalling the `CustomInit()` function after the `Init()` function here seems to cause a race condition, noticed by @furszy and described in https://github.com/bitcoin/bitcoin/pull/27607#issuecomment-1553400917. The problem is that `Init()` can set `m_synced` to true, which enables `BlockConnected` callbacks. But if `BlockConnected` callback runs before `CustomInit` finishes the index may still be only partially loaded, and the `CustomAppend` call in `BlockConnected` could fail",
      "created_at": "2023-05-18T18:01:15Z",
      "updated_at": "2023-05-18T18:01:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/25494#discussion_r1198123860",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1198123860"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25494"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 380,
      "original_line": 365,
      "side": "RIGHT"
    }
  ]
}