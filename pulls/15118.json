{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118",
    "id": 242565345,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjQyNTY1MzQ1",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15118",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/15118.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/15118.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15118",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15118/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/04cca330944f859b4ed68cb8da8a79f5206fd630",
    "number": 15118,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Refactor block file logic",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This cleans up and refactors block file helpers so that they may be used by the block filter indexer. Per [design discussion](https://github.com/bitcoin/bitcoin/pull/14121#issuecomment-451252591) about storing BIP 157 block filters, it has been suggested that they are stored in the same way as block and undo data. This refactor is sufficient to simplify file operations for this use case, though in the future perhaps more pruning-related logic ought to be moved into the new classes.\r\n\r\nThe basic abstraction is a `FlatFileSeq` which manages access to a sequence of numbered files into which raw data is written.\r\n",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2019-01-07T06:32:58Z",
    "updated_at": "2021-12-16T13:55:25Z",
    "closed_at": "2019-03-02T22:21:30Z",
    "mergeable_state": "unknown",
    "merged_at": "2019-03-02T22:21:30Z",
    "merge_commit_sha": "04cca330944f859b4ed68cb8da8a79f5206fd630",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "jimpo:flatfile",
      "ref": "flatfile",
      "sha": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 18502174,
        "node_id": "MDEwOlJlcG9zaXRvcnkxODUwMjE3NA==",
        "name": "bitcoin",
        "full_name": "jimpo/bitcoin",
        "owner": {
          "login": "jimpo",
          "id": 881253,
          "node_id": "MDQ6VXNlcjg4MTI1Mw==",
          "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jimpo",
          "html_url": "https://github.com/jimpo",
          "followers_url": "https://api.github.com/users/jimpo/followers",
          "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
          "organizations_url": "https://api.github.com/users/jimpo/orgs",
          "repos_url": "https://api.github.com/users/jimpo/repos",
          "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/jimpo/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/jimpo/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/jimpo/bitcoin",
        "archive_url": "https://api.github.com/repos/jimpo/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/jimpo/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/jimpo/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/jimpo/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/jimpo/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/jimpo/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/jimpo/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/jimpo/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/jimpo/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/jimpo/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/jimpo/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/jimpo/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/jimpo/bitcoin/events",
        "forks_url": "https://api.github.com/repos/jimpo/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/jimpo/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/jimpo/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/jimpo/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/jimpo/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/jimpo/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/jimpo/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/jimpo/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/jimpo/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/jimpo/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/jimpo/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/jimpo/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/jimpo/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/jimpo/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/jimpo/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/jimpo/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:jimpo/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/jimpo/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/jimpo/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/jimpo/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/jimpo/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/jimpo/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/jimpo/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/jimpo/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/jimpo/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/jimpo/bitcoin/hooks",
        "svn_url": "https://github.com/jimpo/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 126773,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2020-05-04T07:11:12Z",
        "created_at": "2014-04-06T23:53:29Z",
        "updated_at": "2019-08-03T04:25:20Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "f3f9c1de19e6d254e0c3a26ce7a3d8cd57fb7641",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69817,
        "watchers_count": 69817,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T22:42:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T01:13:41Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 417,
    "deletions": 181,
    "changed_files": 12,
    "commits": 9,
    "review_comments": 67,
    "comments": 3
  },
  "events": [
    {
      "event": "renamed",
      "id": 2056834616,
      "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjA1NjgzNDYxNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2056834616",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-07T06:33:20Z",
      "rename": {
        "from": "Flatfile",
        "to": "Refactor block file logic"
      }
    },
    {
      "event": "labeled",
      "id": 2056835479,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDIwNTY4MzU0Nzk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2056835479",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-07T06:33:52Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "mentioned",
      "id": 2056871844,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjA1Njg3MTg0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2056871844",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-07T07:04:03Z"
    },
    {
      "event": "subscribed",
      "id": 2056871845,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwNTY4NzE4NDU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2056871845",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-07T07:04:03Z"
    },
    {
      "event": "reviewed",
      "id": 189693788,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTg5NjkzNzg4",
      "url": null,
      "actor": null,
      "commit_id": "9ab64b2276b2ab6638987282cce16be9b682d490",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-189693788",
      "submitted_at": "2019-01-07T07:04:03Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 189694792,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTg5Njk0Nzky",
      "url": null,
      "actor": null,
      "commit_id": "2af8b710b3183e82f7ff898a5c42502bab4bf753",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-189694792",
      "submitted_at": "2019-01-07T07:10:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2056892222,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjA1Njg5MjIyMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2056892222",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-07T07:20:31Z"
    },
    {
      "event": "reviewed",
      "id": 189696918,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTg5Njk2OTE4",
      "url": null,
      "actor": null,
      "commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-189696918",
      "submitted_at": "2019-01-07T07:22:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 189699366,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTg5Njk5MzY2",
      "url": null,
      "actor": null,
      "commit_id": "d48754408bb36c8105002b1515ab8bb12db9313b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-189699366",
      "submitted_at": "2019-01-07T07:34:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 189700488,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTg5NzAwNDg4",
      "url": null,
      "actor": null,
      "commit_id": "d48754408bb36c8105002b1515ab8bb12db9313b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-189700488",
      "submitted_at": "2019-01-07T07:40:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 189701918,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTg5NzAxOTE4",
      "url": null,
      "actor": null,
      "commit_id": "13583e8a5edbb433f3e92562080786f8c079c5ca",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-189701918",
      "submitted_at": "2019-01-07T07:47:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "commented",
      "id": 451848663,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTg0ODY2Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/451848663",
      "actor": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-07T07:48:32Z",
      "updated_at": "2019-01-07T07:48:32Z",
      "author_association": "MEMBER",
      "body": "Concept ACK hooray objects!",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#issuecomment-451848663",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15118"
    },
    {
      "event": "reviewed",
      "id": 189726949,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTg5NzI2OTQ5",
      "url": null,
      "actor": null,
      "commit_id": "2af8b710b3183e82f7ff898a5c42502bab4bf753",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK.\r\n\r\nCode review up to ad59122.",
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-189726949",
      "submitted_at": "2019-01-07T09:44:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 190359901,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTkwMzU5OTAx",
      "url": null,
      "actor": null,
      "commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-190359901",
      "submitted_at": "2019-01-08T18:14:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 190388449,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTkwMzg4NDQ5",
      "url": null,
      "actor": null,
      "commit_id": "13583e8a5edbb433f3e92562080786f8c079c5ca",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "All commits so far reviewed (up to 697d4c3fc). Great change aside from the bug I've noted above. This does a nice job of cleaning up and deduplicating flatfile data access code, and adds some test coverage. When taking into account the use for BIP157 filter storage (forthcoming), this is a very valuable patch.",
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-190388449",
      "submitted_at": "2019-01-08T19:28:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2061262797,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjA2MTI2Mjc5Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2061262797",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-08T20:34:27Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2064113203,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjA2NDExMzIwMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2064113203",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-09T20:28:07Z"
    },
    {
      "event": "reviewed",
      "id": 190930215,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTkwOTMwMjE1",
      "url": null,
      "actor": null,
      "commit_id": "fbbf962422f2c73f45ef759f1a38c1bfced56fe7",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-190930215",
      "submitted_at": "2019-01-09T20:44:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 190930519,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTkwOTMwNTE5",
      "url": null,
      "actor": null,
      "commit_id": "fbbf962422f2c73f45ef759f1a38c1bfced56fe7",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-190930519",
      "submitted_at": "2019-01-09T20:45:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "commented",
      "id": 452898676,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ1Mjg5ODY3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/452898676",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-09T22:48:36Z",
      "updated_at": "2019-03-02T15:24:36Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15340](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15340.html) (gui: Introduce bilingual GUI error messages by hebasto)\n* [#13868](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/13868.html) (Remove unused fScriptChecks parameter from CheckInputs by Empact)\n* [#13746](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/13746.html) (-masterdatadir for datadir bootstrapping by kallewoof)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#issuecomment-452898676",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15118"
    },
    {
      "event": "added_to_project",
      "id": 2095378302,
      "node_id": "MDE5OkFkZGVkVG9Qcm9qZWN0RXZlbnQyMDk1Mzc4MzAy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2095378302",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-24T19:06:21Z",
      "project_card": {
        "id": 16889158,
        "url": "https://api.github.com/projects/columns/cards/16889158",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Blockers"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2095412943,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjA5NTQxMjk0Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2095412943",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-24T19:21:24Z"
    },
    {
      "event": "reviewed",
      "id": 196093691,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTk2MDkzNjkx",
      "url": null,
      "actor": null,
      "commit_id": "fbbf962422f2c73f45ef759f1a38c1bfced56fe7",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "tACK https://github.com/bitcoin/bitcoin/commit/9b2d9ee0ef221668b834ffe9668b9a15297bc93f, though the last two commits are in need of fixup.\r\n\r\nI read over the code once more since the last rebase and feedback commits. To test, I ran a reindex using this branch on a datadir with a preexisting chain of height 522,000 that had been built without these changes. The reindex completed successfully. I started a recent version of master (12b30105fc) and saw that block verification succeeded and startup ran as normal.\r\n\r\nI'll reACK after squash.",
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-196093691",
      "submitted_at": "2019-01-25T16:28:20Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 197933627,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTk3OTMzNjI3",
      "url": null,
      "actor": null,
      "commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK with some nits",
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-197933627",
      "submitted_at": "2019-01-30T08:20:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 198791045,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTk4NzkxMDQ1",
      "url": null,
      "actor": null,
      "commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "etscrivner",
        "id": 69561,
        "node_id": "MDQ6VXNlcjY5NTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/69561?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/etscrivner",
        "html_url": "https://github.com/etscrivner",
        "followers_url": "https://api.github.com/users/etscrivner/followers",
        "following_url": "https://api.github.com/users/etscrivner/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/etscrivner/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/etscrivner/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/etscrivner/subscriptions",
        "organizations_url": "https://api.github.com/users/etscrivner/orgs",
        "repos_url": "https://api.github.com/users/etscrivner/repos",
        "events_url": "https://api.github.com/users/etscrivner/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/etscrivner/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-198791045",
      "submitted_at": "2019-01-31T20:11:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 198795431,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTk4Nzk1NDMx",
      "url": null,
      "actor": null,
      "commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "etscrivner",
        "id": 69561,
        "node_id": "MDQ6VXNlcjY5NTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/69561?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/etscrivner",
        "html_url": "https://github.com/etscrivner",
        "followers_url": "https://api.github.com/users/etscrivner/followers",
        "following_url": "https://api.github.com/users/etscrivner/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/etscrivner/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/etscrivner/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/etscrivner/subscriptions",
        "organizations_url": "https://api.github.com/users/etscrivner/orgs",
        "repos_url": "https://api.github.com/users/etscrivner/repos",
        "events_url": "https://api.github.com/users/etscrivner/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/etscrivner/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-198795431",
      "submitted_at": "2019-01-31T20:22:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 198802128,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTk4ODAyMTI4",
      "url": null,
      "actor": null,
      "commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "etscrivner",
        "id": 69561,
        "node_id": "MDQ6VXNlcjY5NTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/69561?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/etscrivner",
        "html_url": "https://github.com/etscrivner",
        "followers_url": "https://api.github.com/users/etscrivner/followers",
        "following_url": "https://api.github.com/users/etscrivner/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/etscrivner/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/etscrivner/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/etscrivner/subscriptions",
        "organizations_url": "https://api.github.com/users/etscrivner/orgs",
        "repos_url": "https://api.github.com/users/etscrivner/repos",
        "events_url": "https://api.github.com/users/etscrivner/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/etscrivner/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-198802128",
      "submitted_at": "2019-01-31T20:35:03Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 198803228,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTk4ODAzMjI4",
      "url": null,
      "actor": null,
      "commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "etscrivner",
        "id": 69561,
        "node_id": "MDQ6VXNlcjY5NTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/69561?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/etscrivner",
        "html_url": "https://github.com/etscrivner",
        "followers_url": "https://api.github.com/users/etscrivner/followers",
        "following_url": "https://api.github.com/users/etscrivner/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/etscrivner/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/etscrivner/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/etscrivner/subscriptions",
        "organizations_url": "https://api.github.com/users/etscrivner/orgs",
        "repos_url": "https://api.github.com/users/etscrivner/repos",
        "events_url": "https://api.github.com/users/etscrivner/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/etscrivner/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-198803228",
      "submitted_at": "2019-01-31T20:38:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2111581061,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjExMTU4MTA2MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2111581061",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-01T08:39:44Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2112486675,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjExMjQ4NjY3NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2112486675",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-01T15:33:47Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2112891840,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjExMjg5MTg0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2112891840",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-01T18:17:32Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2117685514,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjExNzY4NTUxNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2117685514",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-05T07:19:37Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2119872081,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjExOTg3MjA4MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2119872081",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-05T22:46:01Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2122279224,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjEyMjI3OTIyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2122279224",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-06T19:57:04Z"
    },
    {
      "event": "labeled",
      "id": 2137230789,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDIxMzcyMzA3ODk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2137230789",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-13T16:24:39Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2137709254,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjEzNzcwOTI1NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2137709254",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-13T19:29:31Z"
    },
    {
      "event": "unlabeled",
      "id": 2137722852,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50MjEzNzcyMjg1Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2137722852",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-13T19:34:43Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 206000944,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MjA2MDAwOTQ0",
      "url": null,
      "actor": null,
      "commit_id": "72d693209018fc0b94d7875574686283936751e6",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK 2e476e9488616a3413e15fdc2281902b28e3beeb",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-206000944",
      "submitted_at": "2019-02-20T21:35:47Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "reviewed",
      "id": 206620912,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MjA2NjIwOTEy",
      "url": null,
      "actor": null,
      "commit_id": "6c8f5d009458cecb40e4439928e241f634de505d",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "utACK 2e476e9, all comments are nits.",
      "user": {
        "login": "gwillen",
        "id": 458997,
        "node_id": "MDQ6VXNlcjQ1ODk5Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/458997?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gwillen",
        "html_url": "https://github.com/gwillen",
        "followers_url": "https://api.github.com/users/gwillen/followers",
        "following_url": "https://api.github.com/users/gwillen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gwillen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gwillen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gwillen/subscriptions",
        "organizations_url": "https://api.github.com/users/gwillen/orgs",
        "repos_url": "https://api.github.com/users/gwillen/repos",
        "events_url": "https://api.github.com/users/gwillen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gwillen/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#pullrequestreview-206620912",
      "submitted_at": "2019-02-22T07:06:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2158772588,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjE1ODc3MjU4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2158772588",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-22T19:38:27Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2MmU3YWRkYjYzMmNhZDc3Y2JkNWZiY2NiYWVlNTFjN2IzMjUwNWQw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/62e7addb632cad77cbd5fbccbaee51c7b32505d0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/62e7addb632cad77cbd5fbccbaee51c7b32505d0",
      "tree": {
        "sha": "d1251329ff8b5fc6dd6c85a0fdee883d66736f0e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d1251329ff8b5fc6dd6c85a0fdee883d66736f0e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f3f9c1de19e6d254e0c3a26ce7a3d8cd57fb7641",
          "sha": "f3f9c1de19e6d254e0c3a26ce7a3d8cd57fb7641",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f3f9c1de19e6d254e0c3a26ce7a3d8cd57fb7641"
        }
      ],
      "message": "util: Move CheckDiskSpace to util.",
      "committer": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-02-23T01:38:45Z"
      },
      "author": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2018-09-01T22:18:02Z"
      },
      "sha": "62e7addb632cad77cbd5fbccbaee51c7b32505d0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5MTgzZDZlZjY1NmM4ZjNlZDQwNjgyMWI5OTgyN2Y5YjVmMDQ3NjY1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9183d6ef656c8f3ed406821b99827f9b5f047665",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9183d6ef656c8f3ed406821b99827f9b5f047665",
      "tree": {
        "sha": "9357c0f274c933b4515af76f1cf62a8a89da9005",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9357c0f274c933b4515af76f1cf62a8a89da9005"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/62e7addb632cad77cbd5fbccbaee51c7b32505d0",
          "sha": "62e7addb632cad77cbd5fbccbaee51c7b32505d0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/62e7addb632cad77cbd5fbccbaee51c7b32505d0"
        }
      ],
      "message": "validation: Extract basic block file logic into FlatFileSeq class.",
      "committer": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-02-23T01:38:45Z"
      },
      "author": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-01-06T19:06:31Z"
      },
      "sha": "9183d6ef656c8f3ed406821b99827f9b5f047665"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMmQyYWJiOTlmZTM1M2ZmYzJmZjNiYzFmZjU3OGZhZDMxMDY1MzM1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e2d2abb99fe353ffc2ff3bc1ff578fad31065335",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e2d2abb99fe353ffc2ff3bc1ff578fad31065335",
      "tree": {
        "sha": "d2085909eecec7d13d78cb111bc466fa4f072480",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d2085909eecec7d13d78cb111bc466fa4f072480"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9183d6ef656c8f3ed406821b99827f9b5f047665",
          "sha": "9183d6ef656c8f3ed406821b99827f9b5f047665",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9183d6ef656c8f3ed406821b99827f9b5f047665"
        }
      ],
      "message": "validation: Refactor OpenDiskFile into method on FlatFileSeq.",
      "committer": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-02-23T01:38:45Z"
      },
      "author": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-01-06T19:14:22Z"
      },
      "sha": "e2d2abb99fe353ffc2ff3bc1ff578fad31065335"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5OTI0MDRiMzFlZDJmOGNhYmVlZDU5ZDA3NDU1MmYwYWUxMGZkYTk0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/992404b31ed2f8cabeed59d074552f0ae10fda94",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/992404b31ed2f8cabeed59d074552f0ae10fda94",
      "tree": {
        "sha": "3213de9eb432c4ce86c87970dd2bde8905d1042d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3213de9eb432c4ce86c87970dd2bde8905d1042d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e2d2abb99fe353ffc2ff3bc1ff578fad31065335",
          "sha": "e2d2abb99fe353ffc2ff3bc1ff578fad31065335",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e2d2abb99fe353ffc2ff3bc1ff578fad31065335"
        }
      ],
      "message": "validation: Refactor block file pre-allocation into FlatFileSeq.",
      "committer": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-02-23T01:38:45Z"
      },
      "author": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-01-06T19:27:31Z"
      },
      "sha": "992404b31ed2f8cabeed59d074552f0ae10fda94"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMDM4MDkzM2UzNzQ1MjE0MzMxZDM1OGJkYThjNWU3OTI5OWM4NGQy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e0380933e3745214331d358bda8c5e79299c84d2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e0380933e3745214331d358bda8c5e79299c84d2",
      "tree": {
        "sha": "b3dc6b1ad203e1c19b7beceae88e9b3131e4025d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b3dc6b1ad203e1c19b7beceae88e9b3131e4025d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/992404b31ed2f8cabeed59d074552f0ae10fda94",
          "sha": "992404b31ed2f8cabeed59d074552f0ae10fda94",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/992404b31ed2f8cabeed59d074552f0ae10fda94"
        }
      ],
      "message": "validation: Refactor file flush logic into FlatFileSeq.",
      "committer": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-02-23T01:38:45Z"
      },
      "author": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-01-06T18:14:35Z"
      },
      "sha": "e0380933e3745214331d358bda8c5e79299c84d2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNmQ4YTc4ZjI2ZjUyZmRmZTQzMjkzNjg2MTM1ZTJmYzY5MTk5MjZj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d6d8a78f26f52fdfe43293686135e2fc6919926c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d6d8a78f26f52fdfe43293686135e2fc6919926c",
      "tree": {
        "sha": "88e7fdae60dcacd7cede677273556a4c69c4544f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/88e7fdae60dcacd7cede677273556a4c69c4544f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e0380933e3745214331d358bda8c5e79299c84d2",
          "sha": "e0380933e3745214331d358bda8c5e79299c84d2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e0380933e3745214331d358bda8c5e79299c84d2"
        }
      ],
      "message": "Move CDiskBlockPos from chain to flatfile.",
      "committer": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-02-23T01:38:45Z"
      },
      "author": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-01-06T19:43:38Z"
      },
      "sha": "d6d8a78f26f52fdfe43293686135e2fc6919926c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2NWE0ODllOTNkMTgxZDNjMGY3YTljZjc5ZjdjMTFmZjhjZjJiMGYw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/65a489e93d181d3c0f7a9cf79f7c11ff8cf2b0f0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/65a489e93d181d3c0f7a9cf79f7c11ff8cf2b0f0",
      "tree": {
        "sha": "dd513c7251d8524e7efd58ded79895ae38652531",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dd513c7251d8524e7efd58ded79895ae38652531"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d6d8a78f26f52fdfe43293686135e2fc6919926c",
          "sha": "d6d8a78f26f52fdfe43293686135e2fc6919926c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d6d8a78f26f52fdfe43293686135e2fc6919926c"
        }
      ],
      "message": "scripted-diff: Rename CBlockDiskPos to FlatFilePos.\n\n-BEGIN VERIFY SCRIPT-\nsed -i 's/CDiskBlockPos/FlatFilePos/g' $(git ls-files 'src/*.h' 'src/*.cpp')\n-END VERIFY SCRIPT-",
      "committer": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-02-23T01:38:45Z"
      },
      "author": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-01-06T19:46:30Z"
      },
      "sha": "65a489e93d181d3c0f7a9cf79f7c11ff8cf2b0f0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0YzAxZTRlMTU5ZGI4MmNlNGIyYWNjZTc1ZjcwOWNhYzk5NjM2N2Q3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4c01e4e159db82ce4b2acce75f709cac996367d7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4c01e4e159db82ce4b2acce75f709cac996367d7",
      "tree": {
        "sha": "a31cabbffb28cbb219094551409df563c1321eef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a31cabbffb28cbb219094551409df563c1321eef"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/65a489e93d181d3c0f7a9cf79f7c11ff8cf2b0f0",
          "sha": "65a489e93d181d3c0f7a9cf79f7c11ff8cf2b0f0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/65a489e93d181d3c0f7a9cf79f7c11ff8cf2b0f0"
        }
      ],
      "message": "flatfile: Unit tests for FlatFileSeq methods.",
      "committer": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-02-23T01:38:45Z"
      },
      "author": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-01-07T06:23:34Z"
      },
      "sha": "4c01e4e159db82ce4b2acce75f709cac996367d7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNGNjYTMzMDk0NGY4NTliNGVkNjhjYjhkYThhNzlmNTIwNmZkNjMw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/04cca330944f859b4ed68cb8da8a79f5206fd630",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/04cca330944f859b4ed68cb8da8a79f5206fd630",
      "tree": {
        "sha": "a0c42f2d1b123a0c73e3bf3943cbdb18393e441d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a0c42f2d1b123a0c73e3bf3943cbdb18393e441d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4c01e4e159db82ce4b2acce75f709cac996367d7",
          "sha": "4c01e4e159db82ce4b2acce75f709cac996367d7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4c01e4e159db82ce4b2acce75f709cac996367d7"
        }
      ],
      "message": "Style cleanup.",
      "committer": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-02-23T01:38:45Z"
      },
      "author": {
        "name": "Jim Posen",
        "email": "jim.posen@gmail.com",
        "date": "2019-01-24T19:20:57Z"
      },
      "sha": "04cca330944f859b4ed68cb8da8a79f5206fd630"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 2159329080,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MjE1OTMyOTA4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2159329080",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-23T01:39:04Z"
    },
    {
      "event": "commented",
      "id": 468965994,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODk2NTk5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/468965994",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-03-02T22:21:08Z",
      "updated_at": "2019-03-02T22:21:08Z",
      "author_association": "MEMBER",
      "body": "utACK 04cca330944f859b4ed68cb8da8a79f5206fd630",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#issuecomment-468965994",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15118"
    },
    {
      "event": "merged",
      "id": 2175990629,
      "node_id": "MDExOk1lcmdlZEV2ZW50MjE3NTk5MDYyOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2175990629",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/04cca330944f859b4ed68cb8da8a79f5206fd630",
      "created_at": "2019-03-02T22:21:30Z"
    },
    {
      "event": "closed",
      "id": 2175990630,
      "node_id": "MDExOkNsb3NlZEV2ZW50MjE3NTk5MDYzMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2175990630",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-03-02T22:21:30Z"
    },
    {
      "event": "referenced",
      "id": 2175990706,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIxNzU5OTA3MDY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2175990706",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2d46f1be0c3c8b7287aa1f62bb1f5b4a8d00ff6e",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2d46f1be0c3c8b7287aa1f62bb1f5b4a8d00ff6e",
      "created_at": "2019-03-02T22:21:43Z"
    },
    {
      "event": "removed_from_project",
      "id": 2175997739,
      "node_id": "MDIzOlJlbW92ZWRGcm9tUHJvamVjdEV2ZW50MjE3NTk5NzczOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2175997739",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-03-02T22:41:26Z",
      "project_card": {
        "id": 16889158,
        "url": "https://api.github.com/projects/columns/cards/16889158",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Blockers"
      }
    },
    {
      "event": "head_ref_deleted",
      "id": 2179492983,
      "node_id": "MDE5OkhlYWRSZWZEZWxldGVkRXZlbnQyMTc5NDkyOTgz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2179492983",
      "actor": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-03-05T00:04:41Z"
    },
    {
      "event": "referenced",
      "id": 4750030233,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ3NTAwMzAyMzM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4750030233",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6b95c76dafa7440b166818d1b2a9b15e24609139",
      "commit_url": "https://api.github.com/repos/PIVX-Project/PIVX/commits/6b95c76dafa7440b166818d1b2a9b15e24609139",
      "created_at": "2021-05-15T14:28:42Z"
    },
    {
      "event": "referenced",
      "id": 5100234692,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUxMDAyMzQ2OTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5100234692",
      "actor": {
        "login": "kittywhiskers",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kittywhiskers",
        "html_url": "https://github.com/kittywhiskers",
        "followers_url": "https://api.github.com/users/kittywhiskers/followers",
        "following_url": "https://api.github.com/users/kittywhiskers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kittywhiskers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kittywhiskers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kittywhiskers/subscriptions",
        "organizations_url": "https://api.github.com/users/kittywhiskers/orgs",
        "repos_url": "https://api.github.com/users/kittywhiskers/repos",
        "events_url": "https://api.github.com/users/kittywhiskers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kittywhiskers/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9bfa2b78511b4fbfd1609e8fe3c5b73febe306e3",
      "commit_url": "https://api.github.com/repos/kittywhiskers/dash/commits/9bfa2b78511b4fbfd1609e8fe3c5b73febe306e3",
      "created_at": "2021-08-02T17:00:19Z"
    },
    {
      "event": "referenced",
      "id": 5100429361,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUxMDA0MjkzNjE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5100429361",
      "actor": {
        "login": "kittywhiskers",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kittywhiskers",
        "html_url": "https://github.com/kittywhiskers",
        "followers_url": "https://api.github.com/users/kittywhiskers/followers",
        "following_url": "https://api.github.com/users/kittywhiskers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kittywhiskers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kittywhiskers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kittywhiskers/subscriptions",
        "organizations_url": "https://api.github.com/users/kittywhiskers/orgs",
        "repos_url": "https://api.github.com/users/kittywhiskers/repos",
        "events_url": "https://api.github.com/users/kittywhiskers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kittywhiskers/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b1d481eb785e8b0a2f9a08a8cfdd6e00598365ec",
      "commit_url": "https://api.github.com/repos/kittywhiskers/dash/commits/b1d481eb785e8b0a2f9a08a8cfdd6e00598365ec",
      "created_at": "2021-08-02T17:40:27Z"
    },
    {
      "event": "referenced",
      "id": 5126760710,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUxMjY3NjA3MTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5126760710",
      "actor": {
        "login": "kittywhiskers",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kittywhiskers",
        "html_url": "https://github.com/kittywhiskers",
        "followers_url": "https://api.github.com/users/kittywhiskers/followers",
        "following_url": "https://api.github.com/users/kittywhiskers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kittywhiskers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kittywhiskers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kittywhiskers/subscriptions",
        "organizations_url": "https://api.github.com/users/kittywhiskers/orgs",
        "repos_url": "https://api.github.com/users/kittywhiskers/repos",
        "events_url": "https://api.github.com/users/kittywhiskers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kittywhiskers/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d921f4fecfd407ed499ef16f97cfda46952a959d",
      "commit_url": "https://api.github.com/repos/kittywhiskers/dash/commits/d921f4fecfd407ed499ef16f97cfda46952a959d",
      "created_at": "2021-08-08T15:16:55Z"
    },
    {
      "event": "referenced",
      "id": 5145127726,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUxNDUxMjc3MjY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5145127726",
      "actor": {
        "login": "UdjinM6",
        "id": 1935069,
        "node_id": "MDQ6VXNlcjE5MzUwNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1935069?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/UdjinM6",
        "html_url": "https://github.com/UdjinM6",
        "followers_url": "https://api.github.com/users/UdjinM6/followers",
        "following_url": "https://api.github.com/users/UdjinM6/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/UdjinM6/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/UdjinM6/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/UdjinM6/subscriptions",
        "organizations_url": "https://api.github.com/users/UdjinM6/orgs",
        "repos_url": "https://api.github.com/users/UdjinM6/repos",
        "events_url": "https://api.github.com/users/UdjinM6/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/UdjinM6/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "db810bdb1f24c4e19bcc76212063e04a2c1e76b7",
      "commit_url": "https://api.github.com/repos/UdjinM6/dash/commits/db810bdb1f24c4e19bcc76212063e04a2c1e76b7",
      "created_at": "2021-08-11T21:47:37Z"
    },
    {
      "event": "referenced",
      "id": 5147518534,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUxNDc1MTg1MzQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5147518534",
      "actor": {
        "login": "kittywhiskers",
        "id": 63189531,
        "node_id": "MDQ6VXNlcjYzMTg5NTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/63189531?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kittywhiskers",
        "html_url": "https://github.com/kittywhiskers",
        "followers_url": "https://api.github.com/users/kittywhiskers/followers",
        "following_url": "https://api.github.com/users/kittywhiskers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kittywhiskers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kittywhiskers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kittywhiskers/subscriptions",
        "organizations_url": "https://api.github.com/users/kittywhiskers/orgs",
        "repos_url": "https://api.github.com/users/kittywhiskers/repos",
        "events_url": "https://api.github.com/users/kittywhiskers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kittywhiskers/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4d3e3d7b073799fc6b713766f446635ad84b1820",
      "commit_url": "https://api.github.com/repos/kittywhiskers/dash/commits/4d3e3d7b073799fc6b713766f446635ad84b1820",
      "created_at": "2021-08-12T08:11:14Z"
    },
    {
      "event": "referenced",
      "id": 5157555289,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDUxNTc1NTUyODk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5157555289",
      "actor": {
        "login": "UdjinM6",
        "id": 1935069,
        "node_id": "MDQ6VXNlcjE5MzUwNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1935069?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/UdjinM6",
        "html_url": "https://github.com/UdjinM6",
        "followers_url": "https://api.github.com/users/UdjinM6/followers",
        "following_url": "https://api.github.com/users/UdjinM6/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/UdjinM6/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/UdjinM6/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/UdjinM6/subscriptions",
        "organizations_url": "https://api.github.com/users/UdjinM6/orgs",
        "repos_url": "https://api.github.com/users/UdjinM6/repos",
        "events_url": "https://api.github.com/users/UdjinM6/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/UdjinM6/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "607bd4b6b59a963b2bf627f29f3eb9e94fac9207",
      "commit_url": "https://api.github.com/repos/dashpay/dash/commits/607bd4b6b59a963b2bf627f29f3eb9e94fac9207",
      "created_at": "2021-08-13T20:23:05Z"
    },
    {
      "event": "locked",
      "id": 5778516350,
      "node_id": "LOE_lADOABII584XoAvYzwAAAAFYbSl-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5778516350",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-16T13:55:25Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245562887",
      "pull_request_review_id": 189693788,
      "id": 245562887,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU2Mjg4Nw==",
      "diff_hunk": "@@ -1631,8 +1631,8 @@ bool AppInitMain(InitInterfaces& interfaces)\n \n     // ********************************************************* Step 11: import blocks\n \n-    if (!CheckDiskSpace() && !CheckDiskSpace(0, true))\n-        return false;\n+    if (!CheckDiskSpace(GetDataDir()) && !CheckDiskSpace(GetBlocksDir()))",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 17,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9ab64b2276b2ab6638987282cce16be9b682d490",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should this not be `||`? /cc @jonasschnelli 386a6b62a8a1db9dd0f354cb95b7585f555c7e5d",
      "created_at": "2019-01-07T07:04:02Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245562887",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245562887"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1634,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245563648",
      "pull_request_review_id": 189694792,
      "id": 245563648,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU2MzY0OA==",
      "diff_hunk": "@@ -78,6 +78,9 @@\n #include <openssl/conf.h>\n #include <thread>\n \n+/** Minimum disk space required - used in CheckDiskSpace() */\n+static constexpr uint64_t nMinDiskSpace = 52428800;",
      "path": "src/util/system.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "2af8b710b3183e82f7ff898a5c42502bab4bf753",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: could be static within the function",
      "created_at": "2019-01-07T07:10:08Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245563648",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245563648"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 82,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245565332",
      "pull_request_review_id": 189696918,
      "id": 245565332,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU2NTMzMg==",
      "diff_hunk": "@@ -0,0 +1,36 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_FLATFILE_H\n+#define BITCOIN_FLATFILE_H\n+\n+#include <chain.h>\n+#include <fs.h>\n+\n+/**\n+ * FlatFileSeq represents a sequence of numbered files storing raw data. This class facilitates\n+ * access to and efficient management of these files.\n+ */\n+class FlatFileSeq\n+{\n+private:\n+    fs::path m_dir;\n+    const char* m_prefix;\n+    size_t m_chunk_size;",
      "path": "src/flatfile.h",
      "position": null,
      "original_position": 20,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: These could each be const.\r\n`#include <cstddef>` for `size_t`",
      "created_at": "2019-01-07T07:22:24Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245565332",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245565332"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245567581",
      "pull_request_review_id": 189699366,
      "id": 245567581,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU2NzU4MQ==",
      "diff_hunk": "@@ -45,6 +45,15 @@ class FlatFileSeq\n      * @return The number of bytes successfully allocated.\n      */\n     size_t Allocate(const CDiskBlockPos& pos, size_t add_size, bool& out_of_space);\n+\n+    /**\n+     * Commit a file to disk, and optionally truncate off extra pre-allocated bytes if final.\n+     *\n+     * @param[in] pos The first unwritten position in the file to be flushed.\n+     * @param[in] finalize True if no more data will be written to this file.\n+     * @return True on success, false on failure.",
      "path": "src/flatfile.h",
      "position": null,
      "original_position": 10,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "d48754408bb36c8105002b1515ab8bb12db9313b",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: `true`",
      "created_at": "2019-01-07T07:34:40Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245567581",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245567581"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 93,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245568440",
      "pull_request_review_id": 189700488,
      "id": 245568440,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU2ODQ0MA==",
      "diff_hunk": "@@ -1631,25 +1631,12 @@ void static FlushBlockFile(bool fFinalize = false)\n {\n     LOCK(cs_LastBlockFile);\n \n-    CDiskBlockPos posOld(nLastBlockFile, 0);\n-    bool status = true;\n-\n-    FILE *fileOld = OpenBlockFile(posOld);\n-    if (fileOld) {\n-        if (fFinalize)\n-            status &= TruncateFile(fileOld, vinfoBlockFile[nLastBlockFile].nSize);\n-        status &= FileCommit(fileOld);\n-        fclose(fileOld);\n-    }\n-\n-    fileOld = OpenUndoFile(posOld);\n-    if (fileOld) {\n-        if (fFinalize)\n-            status &= TruncateFile(fileOld, vinfoBlockFile[nLastBlockFile].nUndoSize);\n-        status &= FileCommit(fileOld);\n-        fclose(fileOld);\n-    }\n+    CDiskBlockPos block_pos_old(nLastBlockFile, vinfoBlockFile[nLastBlockFile].nSize);\n+    CDiskBlockPos undo_pos_old(nLastBlockFile, vinfoBlockFile[nLastBlockFile].nUndoSize);\n \n+    bool status = true;\n+    status &= BlockFileSeq().Flush(block_pos_old, fFinalize);\n+    status &= UndoFileSeq().Flush(undo_pos_old, fFinalize);",
      "path": "src/validation.cpp",
      "position": 130,
      "original_position": 27,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "d48754408bb36c8105002b1515ab8bb12db9313b",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: this adds an extra `fseek` via `Open` each.",
      "created_at": "2019-01-07T07:40:07Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245568440",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245568440"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1638,
      "original_line": 1638,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245569540",
      "pull_request_review_id": 189701918,
      "id": 245569540,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU2OTU0MA==",
      "diff_hunk": "@@ -0,0 +1,98 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_FLATFILE_H\n+#define BITCOIN_FLATFILE_H\n+\n+#include <string>\n+\n+#include <fs.h>\n+#include <serialize.h>\n+\n+struct FlatFilePos\n+{\n+    int nFile;\n+    unsigned int nPos;\n+\n+    ADD_SERIALIZE_METHODS;\n+\n+    template <typename Stream, typename Operation>\n+    inline void SerializationOp(Stream& s, Operation ser_action) {\n+        READWRITE(VARINT(nFile, VarIntMode::NONNEGATIVE_SIGNED));\n+        READWRITE(VARINT(nPos));\n+    }\n+\n+    FlatFilePos() {\n+        SetNull();\n+    }\n+\n+    FlatFilePos(int nFileIn, unsigned int nPosIn) {\n+        nFile = nFileIn;\n+        nPos = nPosIn;\n+    }\n+\n+    friend bool operator==(const FlatFilePos &a, const FlatFilePos &b) {\n+        return (a.nFile == b.nFile && a.nPos == b.nPos);\n+    }\n+\n+    friend bool operator!=(const FlatFilePos &a, const FlatFilePos &b) {\n+        return !(a == b);\n+    }\n+\n+    void SetNull() { nFile = -1; nPos = 0; }\n+    bool IsNull() const { return (nFile == -1); }\n+\n+    std::string ToString() const;",
      "path": "src/flatfile.h",
      "position": 45,
      "original_position": 47,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "13583e8a5edbb433f3e92562080786f8c079c5ca",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`#include <string>`",
      "created_at": "2019-01-07T07:47:09Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245569540",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245569540"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 45,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245589527",
      "pull_request_review_id": 189726949,
      "id": 245589527,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU4OTUyNw==",
      "diff_hunk": "@@ -2135,8 +2135,10 @@ bool static FlushStateToDisk(const CChainParams& chainparams, CValidationState &\n         // Write blocks and block index to disk.\n         if (fDoFullFlush || fPeriodicWrite) {\n             // Depend on nMinDiskSpace to ensure we can write block index\n-            if (!CheckDiskSpace(0, true))\n+            if (!CheckDiskSpace(GetBlocksDir(), 0)) {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "2af8b710b3183e82f7ff898a5c42502bab4bf753",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Commit 2af8b71\r\n\r\nRemove 2nd arg, it's the default?",
      "created_at": "2019-01-07T09:21:53Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245589527",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245589527"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2138,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245591202",
      "pull_request_review_id": 189726949,
      "id": 245591202,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU5MTIwMg==",
      "diff_hunk": "@@ -3024,7 +3028,7 @@ static bool FindBlockPos(CDiskBlockPos &pos, unsigned int nAddSize, unsigned int\n                 }\n             }\n             else",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 36,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "2af8b710b3183e82f7ff898a5c42502bab4bf753",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Commit 2af8b71\r\n\r\nCare add `{}`?",
      "created_at": "2019-01-07T09:27:42Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245591202",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245591202"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3030,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245592023",
      "pull_request_review_id": 189726949,
      "id": 245592023,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU5MjAyMw==",
      "diff_hunk": "@@ -0,0 +1,15 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <tinyformat.h>\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)",
      "path": "src/flatfile.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Commit 88cf780\r\n\r\nnit, initialize one per line?",
      "created_at": "2019-01-07T09:30:07Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245592023",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245592023"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245592409",
      "pull_request_review_id": 189726949,
      "id": 245592409,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU5MjQwOQ==",
      "diff_hunk": "@@ -0,0 +1,36 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_FLATFILE_H\n+#define BITCOIN_FLATFILE_H\n+\n+#include <chain.h>\n+#include <fs.h>\n+\n+/**\n+ * FlatFileSeq represents a sequence of numbered files storing raw data. This class facilitates\n+ * access to and efficient management of these files.\n+ */\n+class FlatFileSeq\n+{\n+private:\n+    fs::path m_dir;\n+    const char* m_prefix;\n+    size_t m_chunk_size;",
      "path": "src/flatfile.h",
      "position": null,
      "original_position": 20,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": 245565332,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Commit 88cf780\r\n\r\nAgree with `const` members.",
      "created_at": "2019-01-07T09:31:10Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245592409",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245592409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 20,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245592900",
      "pull_request_review_id": 189726949,
      "id": 245592900,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU5MjkwMA==",
      "diff_hunk": "@@ -0,0 +1,36 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_FLATFILE_H\n+#define BITCOIN_FLATFILE_H\n+\n+#include <chain.h>",
      "path": "src/flatfile.h",
      "position": null,
      "original_position": 8,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Commit 88cf780\r\n\r\nPrefer forward declaration of `CDiskBlockPos`?",
      "created_at": "2019-01-07T09:33:03Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245592900",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245592900"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 8,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245594004",
      "pull_request_review_id": 189726949,
      "id": 245594004,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU5NDAwNA==",
      "diff_hunk": "@@ -3802,9 +3815,9 @@ static FILE* OpenUndoFile(const CDiskBlockPos &pos, bool fReadOnly) {\n     return OpenDiskFile(pos, \"rev\", fReadOnly);\n }\n \n-fs::path GetBlockPosFilename(const CDiskBlockPos &pos, const char *prefix)",
      "path": "src/validation.cpp",
      "position": 370,
      "original_position": 49,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Commit 88cf780\r\n\r\nnit, remove?",
      "created_at": "2019-01-07T09:36:20Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245594004",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245594004"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3809,
      "original_line": 3809,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245595454",
      "pull_request_review_id": 189726949,
      "id": 245595454,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTU5NTQ1NA==",
      "diff_hunk": "@@ -13,3 +14,26 @@ fs::path FlatFileSeq::FileName(const CDiskBlockPos& pos) const\n {\n     return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n }\n+\n+FILE* FlatFileSeq::Open(const CDiskBlockPos& pos, bool fReadOnly)",
      "path": "src/flatfile.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "ad59122358b936613cb7ea51ff490595e1c13e40",
      "in_reply_to_id": null,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Commit ad59122\r\n\r\nJust asking for a follow up, could this be changed to `std::fstream`?",
      "created_at": "2019-01-07T09:41:36Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245595454",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245595454"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245726324",
      "pull_request_review_id": 189900452,
      "id": 245726324,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTcyNjMyNA==",
      "diff_hunk": "@@ -1631,8 +1631,8 @@ bool AppInitMain(InitInterfaces& interfaces)\n \n     // ********************************************************* Step 11: import blocks\n \n-    if (!CheckDiskSpace() && !CheckDiskSpace(0, true))\n-        return false;\n+    if (!CheckDiskSpace(GetDataDir()) && !CheckDiskSpace(GetBlocksDir()))",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 17,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9ab64b2276b2ab6638987282cce16be9b682d490",
      "in_reply_to_id": 245562887,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah, seems like it to me.",
      "created_at": "2019-01-07T17:01:38Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245726324",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245726324"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1634,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245728116",
      "pull_request_review_id": 189902746,
      "id": 245728116,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTcyODExNg==",
      "diff_hunk": "@@ -1631,25 +1631,12 @@ void static FlushBlockFile(bool fFinalize = false)\n {\n     LOCK(cs_LastBlockFile);\n \n-    CDiskBlockPos posOld(nLastBlockFile, 0);\n-    bool status = true;\n-\n-    FILE *fileOld = OpenBlockFile(posOld);\n-    if (fileOld) {\n-        if (fFinalize)\n-            status &= TruncateFile(fileOld, vinfoBlockFile[nLastBlockFile].nSize);\n-        status &= FileCommit(fileOld);\n-        fclose(fileOld);\n-    }\n-\n-    fileOld = OpenUndoFile(posOld);\n-    if (fileOld) {\n-        if (fFinalize)\n-            status &= TruncateFile(fileOld, vinfoBlockFile[nLastBlockFile].nUndoSize);\n-        status &= FileCommit(fileOld);\n-        fclose(fileOld);\n-    }\n+    CDiskBlockPos block_pos_old(nLastBlockFile, vinfoBlockFile[nLastBlockFile].nSize);\n+    CDiskBlockPos undo_pos_old(nLastBlockFile, vinfoBlockFile[nLastBlockFile].nUndoSize);\n \n+    bool status = true;\n+    status &= BlockFileSeq().Flush(block_pos_old, fFinalize);\n+    status &= UndoFileSeq().Flush(undo_pos_old, fFinalize);",
      "path": "src/validation.cpp",
      "position": 130,
      "original_position": 27,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "d48754408bb36c8105002b1515ab8bb12db9313b",
      "in_reply_to_id": 245568440,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good catch",
      "created_at": "2019-01-07T17:07:04Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245728116",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245728116"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1638,
      "original_line": 1638,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245728196",
      "pull_request_review_id": 189902845,
      "id": 245728196,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTcyODE5Ng==",
      "diff_hunk": "@@ -0,0 +1,98 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_FLATFILE_H\n+#define BITCOIN_FLATFILE_H\n+\n+#include <string>\n+\n+#include <fs.h>\n+#include <serialize.h>\n+\n+struct FlatFilePos\n+{\n+    int nFile;\n+    unsigned int nPos;\n+\n+    ADD_SERIALIZE_METHODS;\n+\n+    template <typename Stream, typename Operation>\n+    inline void SerializationOp(Stream& s, Operation ser_action) {\n+        READWRITE(VARINT(nFile, VarIntMode::NONNEGATIVE_SIGNED));\n+        READWRITE(VARINT(nPos));\n+    }\n+\n+    FlatFilePos() {\n+        SetNull();\n+    }\n+\n+    FlatFilePos(int nFileIn, unsigned int nPosIn) {\n+        nFile = nFileIn;\n+        nPos = nPosIn;\n+    }\n+\n+    friend bool operator==(const FlatFilePos &a, const FlatFilePos &b) {\n+        return (a.nFile == b.nFile && a.nPos == b.nPos);\n+    }\n+\n+    friend bool operator!=(const FlatFilePos &a, const FlatFilePos &b) {\n+        return !(a == b);\n+    }\n+\n+    void SetNull() { nFile = -1; nPos = 0; }\n+    bool IsNull() const { return (nFile == -1); }\n+\n+    std::string ToString() const;",
      "path": "src/flatfile.h",
      "position": 45,
      "original_position": 47,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "13583e8a5edbb433f3e92562080786f8c079c5ca",
      "in_reply_to_id": 245569540,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's included.",
      "created_at": "2019-01-07T17:07:18Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245728196",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245728196"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 45,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245729668",
      "pull_request_review_id": 189904820,
      "id": 245729668,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTcyOTY2OA==",
      "diff_hunk": "@@ -3024,7 +3028,7 @@ static bool FindBlockPos(CDiskBlockPos &pos, unsigned int nAddSize, unsigned int\n                 }\n             }\n             else",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 36,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "2af8b710b3183e82f7ff898a5c42502bab4bf753",
      "in_reply_to_id": 245591202,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I added the braces after the code is moved to `FlatFileSeq::Allocate`.",
      "created_at": "2019-01-07T17:12:10Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245729668",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245729668"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3030,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245729820",
      "pull_request_review_id": 189905009,
      "id": 245729820,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTcyOTgyMA==",
      "diff_hunk": "@@ -0,0 +1,15 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <tinyformat.h>\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)",
      "path": "src/flatfile.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": 245592023,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't see this in the style guide?",
      "created_at": "2019-01-07T17:12:40Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245729820",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245729820"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245730040",
      "pull_request_review_id": 189905265,
      "id": 245730040,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTczMDA0MA==",
      "diff_hunk": "@@ -0,0 +1,36 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_FLATFILE_H\n+#define BITCOIN_FLATFILE_H\n+\n+#include <chain.h>",
      "path": "src/flatfile.h",
      "position": null,
      "original_position": 8,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": 245592900,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good point. Though CDiskBlockPos is moved into this header later on, so I don't think it's necessary to change in the earlier commit.",
      "created_at": "2019-01-07T17:13:16Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245730040",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245730040"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 8,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245730162",
      "pull_request_review_id": 189905427,
      "id": 245730162,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTczMDE2Mg==",
      "diff_hunk": "@@ -3802,9 +3815,9 @@ static FILE* OpenUndoFile(const CDiskBlockPos &pos, bool fReadOnly) {\n     return OpenDiskFile(pos, \"rev\", fReadOnly);\n }\n \n-fs::path GetBlockPosFilename(const CDiskBlockPos &pos, const char *prefix)",
      "path": "src/validation.cpp",
      "position": 370,
      "original_position": 49,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": 245594004,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's used once in `init.cpp`.",
      "created_at": "2019-01-07T17:13:37Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245730162",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245730162"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3809,
      "original_line": 3809,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245730847",
      "pull_request_review_id": 189906305,
      "id": 245730847,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTczMDg0Nw==",
      "diff_hunk": "@@ -13,3 +14,26 @@ fs::path FlatFileSeq::FileName(const CDiskBlockPos& pos) const\n {\n     return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n }\n+\n+FILE* FlatFileSeq::Open(const CDiskBlockPos& pos, bool fReadOnly)",
      "path": "src/flatfile.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "ad59122358b936613cb7ea51ff490595e1c13e40",
      "in_reply_to_id": 245595454,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe... but a lot of file utilities like `FileCommit`, `AllocateFileRange`, etc would have to be modified as well. I think the better approach would be to return a `CAutoFile` and define the move constructor/assignment operator properly. And probably move it to a different module, like in util.",
      "created_at": "2019-01-07T17:15:51Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245730847",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245730847"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245735065",
      "pull_request_review_id": 189911813,
      "id": 245735065,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTczNTA2NQ==",
      "diff_hunk": "@@ -3802,9 +3815,9 @@ static FILE* OpenUndoFile(const CDiskBlockPos &pos, bool fReadOnly) {\n     return OpenDiskFile(pos, \"rev\", fReadOnly);\n }\n \n-fs::path GetBlockPosFilename(const CDiskBlockPos &pos, const char *prefix)",
      "path": "src/validation.cpp",
      "position": 370,
      "original_position": 49,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": 245594004,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I know, just inline where needed?",
      "created_at": "2019-01-07T17:29:14Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245735065",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245735065"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3809,
      "original_line": 3809,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245760248",
      "pull_request_review_id": 189944250,
      "id": 245760248,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTc2MDI0OA==",
      "diff_hunk": "@@ -3802,9 +3815,9 @@ static FILE* OpenUndoFile(const CDiskBlockPos &pos, bool fReadOnly) {\n     return OpenDiskFile(pos, \"rev\", fReadOnly);\n }\n \n-fs::path GetBlockPosFilename(const CDiskBlockPos &pos, const char *prefix)",
      "path": "src/validation.cpp",
      "position": 370,
      "original_position": 49,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": 245594004,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That would mean require `BlockFileSeq`, which is currently static and a broader interface.",
      "created_at": "2019-01-07T18:54:46Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245760248",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245760248"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3809,
      "original_line": 3809,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245761352",
      "pull_request_review_id": 189945678,
      "id": 245761352,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTc2MTM1Mg==",
      "diff_hunk": "@@ -1631,8 +1631,8 @@ bool AppInitMain(InitInterfaces& interfaces)\n \n     // ********************************************************* Step 11: import blocks\n \n-    if (!CheckDiskSpace() && !CheckDiskSpace(0, true))\n-        return false;\n+    if (!CheckDiskSpace(GetDataDir()) && !CheckDiskSpace(GetBlocksDir()))",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 17,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9ab64b2276b2ab6638987282cce16be9b682d490",
      "in_reply_to_id": 245562887,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "#15124",
      "created_at": "2019-01-07T18:58:30Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245761352",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245761352"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1634,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245827237",
      "pull_request_review_id": 190030764,
      "id": 245827237,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTgyNzIzNw==",
      "diff_hunk": "@@ -0,0 +1,15 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <tinyformat.h>\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)",
      "path": "src/flatfile.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": 245592023,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You also don't see to declare class members in multiple lines, but fair enough.",
      "created_at": "2019-01-07T22:57:49Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245827237",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245827237"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245831153",
      "pull_request_review_id": 190035743,
      "id": 245831153,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTgzMTE1Mw==",
      "diff_hunk": "@@ -3802,9 +3815,9 @@ static FILE* OpenUndoFile(const CDiskBlockPos &pos, bool fReadOnly) {\n     return OpenDiskFile(pos, \"rev\", fReadOnly);\n }\n \n-fs::path GetBlockPosFilename(const CDiskBlockPos &pos, const char *prefix)",
      "path": "src/validation.cpp",
      "position": 370,
      "original_position": 49,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": 245594004,
      "user": {
        "login": "promag",
        "id": 3534524,
        "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/promag",
        "html_url": "https://github.com/promag",
        "followers_url": "https://api.github.com/users/promag/followers",
        "following_url": "https://api.github.com/users/promag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/promag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/promag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
        "organizations_url": "https://api.github.com/users/promag/orgs",
        "repos_url": "https://api.github.com/users/promag/repos",
        "events_url": "https://api.github.com/users/promag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/promag/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Right, just realized it's a static function in `validation.cpp`",
      "created_at": "2019-01-07T23:17:30Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r245831153",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245831153"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3809,
      "original_line": 3809,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246087519",
      "pull_request_review_id": 190359901,
      "id": 246087519,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjA4NzUxOQ==",
      "diff_hunk": "@@ -310,6 +311,8 @@ static void FindFilesToPruneManual(std::set<int>& setFilesToPrune, int nManualPr\n static void FindFilesToPrune(std::set<int>& setFilesToPrune, uint64_t nPruneAfterHeight);\n bool CheckInputs(const CTransaction& tx, CValidationState &state, const CCoinsViewCache &inputs, bool fScriptChecks, unsigned int flags, bool cacheSigStore, bool cacheFullScriptStore, PrecomputedTransactionData& txdata, std::vector<CScriptCheck> *pvChecks = nullptr);\n static FILE* OpenUndoFile(const CDiskBlockPos &pos, bool fReadOnly = false);\n+static FlatFileSeq BlockFileSeq();\n+static FlatFileSeq UndoFileSeq();",
      "path": "src/validation.cpp",
      "position": 33,
      "original_position": 13,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": null,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Any reason not to just have these on-hand as global objects instead of having to reconstruct an object for each use through these functions? Obviously there isn't much of a performance concern given these calls happen before disk IO, but I'm just curious.",
      "created_at": "2019-01-08T17:37:04Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r246087519",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246087519"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 323,
      "original_line": 323,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246099197",
      "pull_request_review_id": 190359901,
      "id": 246099197,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjA5OTE5Nw==",
      "diff_hunk": "@@ -3017,21 +3017,13 @@ static bool FindBlockPos(CDiskBlockPos &pos, unsigned int nAddSize, unsigned int\n         vinfoBlockFile[nFile].nSize += nAddSize;\n \n     if (!fKnown) {\n-        unsigned int nOldChunks = (pos.nPos + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        unsigned int nNewChunks = (vinfoBlockFile[nFile].nSize + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        if (nNewChunks > nOldChunks) {\n-            if (fPruneMode)\n-                fCheckForPruning = true;\n-            if (CheckDiskSpace(GetBlocksDir(), nNewChunks * BLOCKFILE_CHUNK_SIZE - pos.nPos)) {\n-                FILE *file = OpenBlockFile(pos);\n-                if (file) {\n-                    LogPrintf(\"Pre-allocating up to position 0x%x in blk%05u.dat\\n\", nNewChunks * BLOCKFILE_CHUNK_SIZE, pos.nFile);\n-                    AllocateFileRange(file, pos.nPos, nNewChunks * BLOCKFILE_CHUNK_SIZE - pos.nPos);\n-                    fclose(file);\n-                }\n-            }\n-            else\n-                return AbortNode(\"Disk space is low!\", _(\"Error: Disk space is low!\"));\n+        bool out_of_space;\n+        size_t bytes_allocated = UndoFileSeq().Allocate(pos, nAddSize, out_of_space);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "930e2839544dc82c333c2452f3cf6e662c5255e5",
      "in_reply_to_id": null,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This should be `BlockFileSeq` and not `UndoFileSeq`, no?",
      "created_at": "2019-01-08T18:14:46Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r246099197",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246099197"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3021,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246109696",
      "pull_request_review_id": 190388449,
      "id": 246109696,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjEwOTY5Ng==",
      "diff_hunk": "@@ -0,0 +1,123 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <test/test_bitcoin.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_FIXTURE_TEST_SUITE(flatfile_tests, BasicTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(flatfile_filename)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+\n+    FlatFilePos pos(456, 789);\n+\n+    FlatFileSeq seq1(data_dir, \"a\", 16 * 1024);\n+    BOOST_CHECK_EQUAL(seq1.FileName(pos), data_dir / \"a00456.dat\");\n+\n+    FlatFileSeq seq2(data_dir / \"a\", \"b\", 16 * 1024);\n+    BOOST_CHECK_EQUAL(seq2.FileName(pos), data_dir / \"a\" / \"b00456.dat\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(flatfile_open)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+    FlatFileSeq seq(data_dir, \"a\", 16 * 1024);\n+\n+    std::string line1(\"A purely peer-to-peer version of electronic cash would allow online \"\n+                      \"payments to be sent directly from one party to another without going \"\n+                      \"through a financial institution.\");\n+    std::string line2(\"Digital signatures provide part of the solution, but the main benefits are \"\n+                      \"lost if a trusted third party is still required to prevent double-spending.\");",
      "path": "src/test/flatfile_tests.cpp",
      "position": 34,
      "original_position": 34,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "13583e8a5edbb433f3e92562080786f8c079c5ca",
      "in_reply_to_id": null,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Cute.",
      "created_at": "2019-01-08T18:48:43Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r246109696",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246109696"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 34,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246133462",
      "pull_request_review_id": 190419189,
      "id": 246133462,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjEzMzQ2Mg==",
      "diff_hunk": "@@ -310,6 +311,8 @@ static void FindFilesToPruneManual(std::set<int>& setFilesToPrune, int nManualPr\n static void FindFilesToPrune(std::set<int>& setFilesToPrune, uint64_t nPruneAfterHeight);\n bool CheckInputs(const CTransaction& tx, CValidationState &state, const CCoinsViewCache &inputs, bool fScriptChecks, unsigned int flags, bool cacheSigStore, bool cacheFullScriptStore, PrecomputedTransactionData& txdata, std::vector<CScriptCheck> *pvChecks = nullptr);\n static FILE* OpenUndoFile(const CDiskBlockPos &pos, bool fReadOnly = false);\n+static FlatFileSeq BlockFileSeq();\n+static FlatFileSeq UndoFileSeq();",
      "path": "src/validation.cpp",
      "position": 33,
      "original_position": 13,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": 246087519,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "They are constructed with `GetDataDir/GetBlocksDir` which are not static, so the initialization logic would get a bit tricky. Could be OK with lazy evaluation or something, but didn't seem worth it. Open to suggestions.",
      "created_at": "2019-01-08T20:03:45Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r246133462",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246133462"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 323,
      "original_line": 323,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246133723",
      "pull_request_review_id": 190419563,
      "id": 246133723,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjEzMzcyMw==",
      "diff_hunk": "@@ -3017,21 +3017,13 @@ static bool FindBlockPos(CDiskBlockPos &pos, unsigned int nAddSize, unsigned int\n         vinfoBlockFile[nFile].nSize += nAddSize;\n \n     if (!fKnown) {\n-        unsigned int nOldChunks = (pos.nPos + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        unsigned int nNewChunks = (vinfoBlockFile[nFile].nSize + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        if (nNewChunks > nOldChunks) {\n-            if (fPruneMode)\n-                fCheckForPruning = true;\n-            if (CheckDiskSpace(GetBlocksDir(), nNewChunks * BLOCKFILE_CHUNK_SIZE - pos.nPos)) {\n-                FILE *file = OpenBlockFile(pos);\n-                if (file) {\n-                    LogPrintf(\"Pre-allocating up to position 0x%x in blk%05u.dat\\n\", nNewChunks * BLOCKFILE_CHUNK_SIZE, pos.nFile);\n-                    AllocateFileRange(file, pos.nPos, nNewChunks * BLOCKFILE_CHUNK_SIZE - pos.nPos);\n-                    fclose(file);\n-                }\n-            }\n-            else\n-                return AbortNode(\"Disk space is low!\", _(\"Error: Disk space is low!\"));\n+        bool out_of_space;\n+        size_t bytes_allocated = UndoFileSeq().Allocate(pos, nAddSize, out_of_space);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "930e2839544dc82c333c2452f3cf6e662c5255e5",
      "in_reply_to_id": 246099197,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oops, good catch.",
      "created_at": "2019-01-08T20:04:44Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r246133723",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246133723"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3021,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246137546",
      "pull_request_review_id": 190424488,
      "id": 246137546,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjEzNzU0Ng==",
      "diff_hunk": "@@ -310,6 +311,8 @@ static void FindFilesToPruneManual(std::set<int>& setFilesToPrune, int nManualPr\n static void FindFilesToPrune(std::set<int>& setFilesToPrune, uint64_t nPruneAfterHeight);\n bool CheckInputs(const CTransaction& tx, CValidationState &state, const CCoinsViewCache &inputs, bool fScriptChecks, unsigned int flags, bool cacheSigStore, bool cacheFullScriptStore, PrecomputedTransactionData& txdata, std::vector<CScriptCheck> *pvChecks = nullptr);\n static FILE* OpenUndoFile(const CDiskBlockPos &pos, bool fReadOnly = false);\n+static FlatFileSeq BlockFileSeq();\n+static FlatFileSeq UndoFileSeq();",
      "path": "src/validation.cpp",
      "position": 33,
      "original_position": 13,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": 246087519,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah, okay. Like I said, no big deal AFAICT.",
      "created_at": "2019-01-08T20:18:42Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r246137546",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246137546"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 323,
      "original_line": 323,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246536417",
      "pull_request_review_id": 190930215,
      "id": 246536417,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjUzNjQxNw==",
      "diff_hunk": "@@ -0,0 +1,98 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_FLATFILE_H\n+#define BITCOIN_FLATFILE_H\n+\n+#include <string>\n+\n+#include <fs.h>\n+#include <serialize.h>\n+\n+struct FlatFilePos\n+{\n+    int nFile;\n+    unsigned int nPos;\n+\n+    ADD_SERIALIZE_METHODS;\n+\n+    template <typename Stream, typename Operation>\n+    inline void SerializationOp(Stream& s, Operation ser_action) {\n+        READWRITE(VARINT(nFile, VarIntMode::NONNEGATIVE_SIGNED));\n+        READWRITE(VARINT(nPos));\n+    }\n+\n+    FlatFilePos() {\n+        SetNull();\n+    }\n+\n+    FlatFilePos(int nFileIn, unsigned int nPosIn) {\n+        nFile = nFileIn;\n+        nPos = nPosIn;\n+    }\n+\n+    friend bool operator==(const FlatFilePos &a, const FlatFilePos &b) {\n+        return (a.nFile == b.nFile && a.nPos == b.nPos);\n+    }\n+\n+    friend bool operator!=(const FlatFilePos &a, const FlatFilePos &b) {\n+        return !(a == b);\n+    }\n+\n+    void SetNull() { nFile = -1; nPos = 0; }\n+    bool IsNull() const { return (nFile == -1); }\n+\n+    std::string ToString() const;\n+};\n+\n+/**\n+ * FlatFileSeq represents a sequence of numbered files storing raw data. This class facilitates\n+ * access to and efficient management of these files.\n+ */\n+class FlatFileSeq\n+{\n+private:\n+    const fs::path m_dir;\n+    const char* const m_prefix;\n+    const size_t m_chunk_size;\n+\n+public:\n+    /**\n+     * Constructor\n+     *\n+     * @param dir The base directory that all files live in.\n+     * @param prefix A short prefix given to all file names.\n+     * @param chunk_size Disk space is pre-allocated in multiples of this amount.\n+     */\n+    FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size);\n+\n+    /** Get the name of the file at the given position. */\n+    fs::path FileName(const FlatFilePos& pos) const;\n+\n+    /** Open a handle to the file at the given position. */\n+    FILE* Open(const FlatFilePos& pos, bool read_only = false);",
      "path": "src/flatfile.h",
      "position": 73,
      "original_position": 75,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "fbbf962422f2c73f45ef759f1a38c1bfced56fe7",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Make sure parameter names match between declaration and definition :-)",
      "created_at": "2019-01-09T20:44:50Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r246536417",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246536417"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 73,
      "original_line": 73,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246536653",
      "pull_request_review_id": 190930519,
      "id": 246536653,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjUzNjY1Mw==",
      "diff_hunk": "@@ -0,0 +1,92 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <logging.h>\n+#include <tinyformat.h>\n+#include <util/system.h>\n+\n+std::string FlatFilePos::ToString() const\n+{\n+    return strprintf(\"FlatFilePos(nFile=%i, nPos=%i)\", nFile, nPos);\n+}\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)\n+{}\n+\n+fs::path FlatFileSeq::FileName(const FlatFilePos& pos) const\n+{\n+    return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n+}\n+\n+FILE* FlatFileSeq::Open(const FlatFilePos& pos, bool fReadOnly)\n+{\n+    if (pos.IsNull())\n+        return nullptr;\n+    fs::path path = FileName(pos);\n+    fs::create_directories(path.parent_path());\n+    FILE* file = fsbridge::fopen(path, fReadOnly ? \"rb\": \"rb+\");\n+    if (!file && !fReadOnly)\n+        file = fsbridge::fopen(path, \"wb+\");\n+    if (!file) {\n+        LogPrintf(\"Unable to open file %s\\n\", path.string());\n+        return nullptr;\n+    }\n+    if (pos.nPos) {\n+        if (fseek(file, pos.nPos, SEEK_SET)) {\n+            LogPrintf(\"Unable to seek to position %u of %s\\n\", pos.nPos, path.string());\n+            fclose(file);\n+            return nullptr;\n+        }\n+    }\n+    return file;\n+}\n+\n+size_t FlatFileSeq::Allocate(const FlatFilePos& pos, size_t add_size, bool& out_of_space)\n+{\n+    out_of_space = false;\n+\n+    unsigned int n_old_chunks = (pos.nPos + m_chunk_size - 1) / m_chunk_size;\n+    unsigned int n_new_chunks = (pos.nPos + add_size + m_chunk_size - 1) / m_chunk_size;\n+    if (n_new_chunks > n_old_chunks) {\n+        size_t old_size = pos.nPos;\n+        size_t new_size = n_new_chunks * m_chunk_size;\n+        size_t inc_size = new_size - old_size;\n+\n+        if (CheckDiskSpace(m_dir, inc_size)) {\n+            FILE *file = Open(pos);\n+            if (file) {\n+                LogPrintf(\"Pre-allocating up to position 0x%x in %s%05u.dat\\n\", new_size, m_prefix, pos.nFile);\n+                AllocateFileRange(file, pos.nPos, inc_size);\n+                fclose(file);\n+                return inc_size;\n+            }\n+        }\n+        else {",
      "path": "src/flatfile.cpp",
      "position": null,
      "original_position": 68,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "fbbf962422f2c73f45ef759f1a38c1bfced56fe7",
      "in_reply_to_id": null,
      "user": {
        "login": "practicalswift",
        "id": 7826565,
        "node_id": "MDQ6VXNlcjc4MjY1NjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/practicalswift",
        "html_url": "https://github.com/practicalswift",
        "followers_url": "https://api.github.com/users/practicalswift/followers",
        "following_url": "https://api.github.com/users/practicalswift/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/practicalswift/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/practicalswift/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
        "organizations_url": "https://api.github.com/users/practicalswift/orgs",
        "repos_url": "https://api.github.com/users/practicalswift/repos",
        "events_url": "https://api.github.com/users/practicalswift/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/practicalswift/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Move `else {` one line up :-)",
      "created_at": "2019-01-09T20:45:44Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r246536653",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246536653"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 68,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/250655268",
      "pull_request_review_id": 196093691,
      "id": 250655268,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MDY1NTI2OA==",
      "diff_hunk": "@@ -0,0 +1,98 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_FLATFILE_H\n+#define BITCOIN_FLATFILE_H\n+\n+#include <string>\n+\n+#include <fs.h>\n+#include <serialize.h>\n+\n+struct FlatFilePos\n+{\n+    int nFile;\n+    unsigned int nPos;\n+\n+    ADD_SERIALIZE_METHODS;\n+\n+    template <typename Stream, typename Operation>\n+    inline void SerializationOp(Stream& s, Operation ser_action) {\n+        READWRITE(VARINT(nFile, VarIntMode::NONNEGATIVE_SIGNED));\n+        READWRITE(VARINT(nPos));\n+    }\n+\n+    FlatFilePos() {\n+        SetNull();\n+    }\n+\n+    FlatFilePos(int nFileIn, unsigned int nPosIn) {\n+        nFile = nFileIn;\n+        nPos = nPosIn;\n+    }",
      "path": "src/flatfile.h",
      "position": null,
      "original_position": 34,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "fbbf962422f2c73f45ef759f1a38c1bfced56fe7",
      "in_reply_to_id": null,
      "user": {
        "login": "jamesob",
        "id": 73197,
        "node_id": "MDQ6VXNlcjczMTk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jamesob",
        "html_url": "https://github.com/jamesob",
        "followers_url": "https://api.github.com/users/jamesob/followers",
        "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
        "organizations_url": "https://api.github.com/users/jamesob/orgs",
        "repos_url": "https://api.github.com/users/jamesob/repos",
        "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jamesob/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I know this is kind of a move, but worth using an initializer list?",
      "created_at": "2019-01-24T15:36:08Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r250655268",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/250655268"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252140925",
      "pull_request_review_id": 197933627,
      "id": 252140925,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjE0MDkyNQ==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers",
      "path": "src/flatfile.cpp",
      "position": 2,
      "original_position": 2,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Copyright looked off to me initially, but I guess if you move code, the copyright stays the same. (I was expecting \"2019\" only).",
      "created_at": "2019-01-30T07:27:19Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252140925",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252140925"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2,
      "original_line": 2,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252141251",
      "pull_request_review_id": 197933627,
      "id": 252141251,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjE0MTI1MQ==",
      "diff_hunk": "@@ -0,0 +1,15 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <tinyformat.h>\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)",
      "path": "src/flatfile.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "88cf78032c221632643877dcada1ef38b3819460",
      "in_reply_to_id": 245592023,
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "+1 on one per line as it makes diffs prettier when adding/removing stuff, but I'm fine as it is too, since it's only 3 vars.",
      "created_at": "2019-01-30T07:29:02Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252141251",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252141251"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252142212",
      "pull_request_review_id": 197933627,
      "id": 252142212,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjE0MjIxMg==",
      "diff_hunk": "@@ -45,6 +45,15 @@ class FlatFileSeq\n      * @return The number of bytes successfully allocated.\n      */\n     size_t Allocate(const CDiskBlockPos& pos, size_t add_size, bool& out_of_space);\n+\n+    /**\n+     * Commit a file to disk, and optionally truncate off extra pre-allocated bytes if final.\n+     *\n+     * @param[in] pos The first unwritten position in the file to be flushed.\n+     * @param[in] finalize True if no more data will be written to this file.\n+     * @return True on success, false on failure.",
      "path": "src/flatfile.h",
      "position": null,
      "original_position": 10,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "d48754408bb36c8105002b1515ab8bb12db9313b",
      "in_reply_to_id": 245567581,
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Start of sentence `True` is fine IMO.",
      "created_at": "2019-01-30T07:33:37Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252142212",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252142212"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 93,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252142551",
      "pull_request_review_id": 197933627,
      "id": 252142551,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjE0MjU1MQ==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <logging.h>\n+#include <tinyformat.h>\n+#include <util/system.h>\n+\n+std::string FlatFilePos::ToString() const\n+{\n+    return strprintf(\"FlatFilePos(nFile=%i, nPos=%i)\", nFile, nPos);\n+}\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)\n+{}\n+\n+fs::path FlatFileSeq::FileName(const FlatFilePos& pos) const\n+{\n+    return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n+}\n+\n+FILE* FlatFileSeq::Open(const FlatFilePos& pos, bool read_only)\n+{\n+    if (pos.IsNull())\n+        return nullptr;",
      "path": "src/flatfile.cpp",
      "position": 36,
      "original_position": 28,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is a move I believe, so feel free to ignore: add `{}` or remove newline. (Also applies to code 4 lines down.)",
      "created_at": "2019-01-30T07:35:20Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252142551",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252142551"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 36,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252143222",
      "pull_request_review_id": 197933627,
      "id": 252143222,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjE0MzIyMg==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <logging.h>\n+#include <tinyformat.h>\n+#include <util/system.h>\n+\n+std::string FlatFilePos::ToString() const\n+{\n+    return strprintf(\"FlatFilePos(nFile=%i, nPos=%i)\", nFile, nPos);\n+}\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)\n+{}\n+\n+fs::path FlatFileSeq::FileName(const FlatFilePos& pos) const\n+{\n+    return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n+}\n+\n+FILE* FlatFileSeq::Open(const FlatFilePos& pos, bool read_only)\n+{\n+    if (pos.IsNull())\n+        return nullptr;\n+    fs::path path = FileName(pos);\n+    fs::create_directories(path.parent_path());\n+    FILE* file = fsbridge::fopen(path, read_only ? \"rb\": \"rb+\");\n+    if (!file && !read_only)\n+        file = fsbridge::fopen(path, \"wb+\");\n+    if (!file) {\n+        LogPrintf(\"Unable to open file %s\\n\", path.string());\n+        return nullptr;\n+    }\n+    if (pos.nPos) {\n+        if (fseek(file, pos.nPos, SEEK_SET)) {",
      "path": "src/flatfile.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can do single `if` here.\r\n```C++\r\nif (pos.nPos && fseek(file, pos.nPos, SEEK_SET)) {\r\n```\r\n",
      "created_at": "2019-01-30T07:38:40Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252143222",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252143222"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252144706",
      "pull_request_review_id": 197933627,
      "id": 252144706,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjE0NDcwNg==",
      "diff_hunk": "@@ -71,6 +71,7 @@ void AllocateFileRange(FILE *file, unsigned int offset, unsigned int length);\n bool RenameOver(fs::path src, fs::path dest);\n bool LockDirectory(const fs::path& directory, const std::string lockfile_name, bool probe_only=false);\n bool DirIsWritable(const fs::path& directory);\n+bool CheckDiskSpace(const fs::path& dir, uint64_t nAdditionalBytes = 0);",
      "path": "src/util/system.h",
      "position": null,
      "original_position": 4,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit/style: naming convention, `additional_bytes`?",
      "created_at": "2019-01-30T07:45:56Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252144706",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252144706"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252146133",
      "pull_request_review_id": 197933627,
      "id": 252146133,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjE0NjEzMw==",
      "diff_hunk": "@@ -0,0 +1,123 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <test/test_bitcoin.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_FIXTURE_TEST_SUITE(flatfile_tests, BasicTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(flatfile_filename)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+\n+    FlatFilePos pos(456, 789);\n+\n+    FlatFileSeq seq1(data_dir, \"a\", 16 * 1024);\n+    BOOST_CHECK_EQUAL(seq1.FileName(pos), data_dir / \"a00456.dat\");\n+\n+    FlatFileSeq seq2(data_dir / \"a\", \"b\", 16 * 1024);\n+    BOOST_CHECK_EQUAL(seq2.FileName(pos), data_dir / \"a\" / \"b00456.dat\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(flatfile_open)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+    FlatFileSeq seq(data_dir, \"a\", 16 * 1024);\n+\n+    std::string line1(\"A purely peer-to-peer version of electronic cash would allow online \"\n+                      \"payments to be sent directly from one party to another without going \"\n+                      \"through a financial institution.\");\n+    std::string line2(\"Digital signatures provide part of the solution, but the main benefits are \"\n+                      \"lost if a trusted third party is still required to prevent double-spending.\");\n+\n+    size_t pos1 = 0;\n+    size_t pos2 = pos1 + GetSerializeSize(line1, CLIENT_VERSION);\n+\n+    // Write first line to file.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos1)), SER_DISK, CLIENT_VERSION);\n+        file << LIMITED_STRING(line1, 256);\n+    }\n+\n+    // Attempt to append to file opened in read-only mode.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2), true), SER_DISK, CLIENT_VERSION);\n+        BOOST_CHECK_THROW(file << LIMITED_STRING(line2, 256), std::ios_base::failure);\n+    }\n+\n+    // Append second line to file.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2)), SER_DISK, CLIENT_VERSION);\n+        file << LIMITED_STRING(line2, 256);\n+    }\n+\n+    // Read text from file in read-only mode.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos1), true), SER_DISK, CLIENT_VERSION);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line1);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line2);\n+    }\n+\n+    // Read text from file with position offset.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2)), SER_DISK, CLIENT_VERSION);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line2);\n+    }\n+\n+    // Ensure another file in the sequence has no data.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(1, pos2)), SER_DISK, CLIENT_VERSION);\n+        BOOST_CHECK_THROW(file >> LIMITED_STRING(text, 256), std::ios_base::failure);\n+    }\n+}\n+\n+BOOST_AUTO_TEST_CASE(flatfile_allocate)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+    FlatFileSeq seq(data_dir, \"a\", 100);\n+\n+    bool out_of_space;\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 0), 1, out_of_space), 100);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 0))), 100);\n+    BOOST_CHECK(!out_of_space);\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 99), 1, out_of_space), 0);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 99))), 100);\n+    BOOST_CHECK(!out_of_space);\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 99), 2, out_of_space), 101);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 99))), 200);\n+    BOOST_CHECK(!out_of_space);",
      "path": "src/test/flatfile_tests.cpp",
      "position": 103,
      "original_position": 103,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Would adding\r\n```C++\r\n    uint64_t too_big = 1024 * 1024 + fs::space(data_dir).available;\r\n    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 0), too_big, out_of_space), 0);\r\n    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 0))), 200);\r\n    BOOST_CHECK(out_of_space);\r\n```\r\nbe overkill?",
      "created_at": "2019-01-30T07:52:12Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252146133",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252146133"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 103,
      "original_line": 103,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252147182",
      "pull_request_review_id": 197933627,
      "id": 252147182,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjE0NzE4Mg==",
      "diff_hunk": "@@ -135,6 +135,13 @@ bool DirIsWritable(const fs::path& directory)\n     return true;\n }\n \n+bool CheckDiskSpace(const fs::path& dir, uint64_t nAdditionalBytes)\n+{\n+    constexpr uint64_t nMinDiskSpace = 52428800;\n+    uint64_t nFreeBytesAvailable = fs::space(dir).available;\n+    return nFreeBytesAvailable >= nMinDiskSpace + nAdditionalBytes;",
      "path": "src/util/system.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit/style: var_names",
      "created_at": "2019-01-30T07:56:43Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252147182",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252147182"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 142,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252148996",
      "pull_request_review_id": 197933627,
      "id": 252148996,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjE0ODk5Ng==",
      "diff_hunk": "@@ -3018,54 +3012,38 @@ static bool FindBlockPos(CDiskBlockPos &pos, unsigned int nAddSize, unsigned int\n         vinfoBlockFile[nFile].nSize += nAddSize;\n \n     if (!fKnown) {\n-        unsigned int nOldChunks = (pos.nPos + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        unsigned int nNewChunks = (vinfoBlockFile[nFile].nSize + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        if (nNewChunks > nOldChunks) {\n-            if (fPruneMode)\n-                fCheckForPruning = true;\n-            if (CheckDiskSpace(nNewChunks * BLOCKFILE_CHUNK_SIZE - pos.nPos, true)) {\n-                FILE *file = OpenBlockFile(pos);\n-                if (file) {\n-                    LogPrintf(\"Pre-allocating up to position 0x%x in blk%05u.dat\\n\", nNewChunks * BLOCKFILE_CHUNK_SIZE, pos.nFile);\n-                    AllocateFileRange(file, pos.nPos, nNewChunks * BLOCKFILE_CHUNK_SIZE - pos.nPos);\n-                    fclose(file);\n-                }\n-            }\n-            else\n-                return error(\"out of disk space\");\n+        bool out_of_space;\n+        size_t bytes_allocated = BlockFileSeq().Allocate(pos, nAddSize, out_of_space);\n+        if (out_of_space) {\n+            return AbortNode(\"Disk space is low!\", _(\"Error: Disk space is low!\"));\n+        }\n+        if (bytes_allocated != 0 && fPruneMode) {\n+            fCheckForPruning = true;",
      "path": "src/validation.cpp",
      "position": 215,
      "original_position": 215,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can also do\r\n```C++\r\nfCheckForPruning |= bytes_allocated != 0 && fPruneMode;\r\n```\r\nand remove the `if` stuff.",
      "created_at": "2019-01-30T08:04:41Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252148996",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252148996"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3010,
      "original_line": 3010,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252149147",
      "pull_request_review_id": 197933627,
      "id": 252149147,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjE0OTE0Nw==",
      "diff_hunk": "@@ -3018,54 +3012,38 @@ static bool FindBlockPos(CDiskBlockPos &pos, unsigned int nAddSize, unsigned int\n         vinfoBlockFile[nFile].nSize += nAddSize;\n \n     if (!fKnown) {\n-        unsigned int nOldChunks = (pos.nPos + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        unsigned int nNewChunks = (vinfoBlockFile[nFile].nSize + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        if (nNewChunks > nOldChunks) {\n-            if (fPruneMode)\n-                fCheckForPruning = true;\n-            if (CheckDiskSpace(nNewChunks * BLOCKFILE_CHUNK_SIZE - pos.nPos, true)) {\n-                FILE *file = OpenBlockFile(pos);\n-                if (file) {\n-                    LogPrintf(\"Pre-allocating up to position 0x%x in blk%05u.dat\\n\", nNewChunks * BLOCKFILE_CHUNK_SIZE, pos.nFile);\n-                    AllocateFileRange(file, pos.nPos, nNewChunks * BLOCKFILE_CHUNK_SIZE - pos.nPos);\n-                    fclose(file);\n-                }\n-            }\n-            else\n-                return error(\"out of disk space\");\n+        bool out_of_space;\n+        size_t bytes_allocated = BlockFileSeq().Allocate(pos, nAddSize, out_of_space);\n+        if (out_of_space) {\n+            return AbortNode(\"Disk space is low!\", _(\"Error: Disk space is low!\"));\n+        }\n+        if (bytes_allocated != 0 && fPruneMode) {\n+            fCheckForPruning = true;\n         }\n     }\n \n     setDirtyFileInfo.insert(nFile);\n     return true;\n }\n \n-static bool FindUndoPos(CValidationState &state, int nFile, CDiskBlockPos &pos, unsigned int nAddSize)\n+static bool FindUndoPos(CValidationState &state, int nFile, FlatFilePos &pos, unsigned int nAddSize)\n {\n     pos.nFile = nFile;\n \n     LOCK(cs_LastBlockFile);\n \n-    unsigned int nNewSize;\n     pos.nPos = vinfoBlockFile[nFile].nUndoSize;\n-    nNewSize = vinfoBlockFile[nFile].nUndoSize += nAddSize;\n+    vinfoBlockFile[nFile].nUndoSize += nAddSize;\n     setDirtyFileInfo.insert(nFile);\n \n-    unsigned int nOldChunks = (pos.nPos + UNDOFILE_CHUNK_SIZE - 1) / UNDOFILE_CHUNK_SIZE;\n-    unsigned int nNewChunks = (nNewSize + UNDOFILE_CHUNK_SIZE - 1) / UNDOFILE_CHUNK_SIZE;\n-    if (nNewChunks > nOldChunks) {\n-        if (fPruneMode)\n-            fCheckForPruning = true;\n-        if (CheckDiskSpace(nNewChunks * UNDOFILE_CHUNK_SIZE - pos.nPos, true)) {\n-            FILE *file = OpenUndoFile(pos);\n-            if (file) {\n-                LogPrintf(\"Pre-allocating up to position 0x%x in rev%05u.dat\\n\", nNewChunks * UNDOFILE_CHUNK_SIZE, pos.nFile);\n-                AllocateFileRange(file, pos.nPos, nNewChunks * UNDOFILE_CHUNK_SIZE - pos.nPos);\n-                fclose(file);\n-            }\n-        }\n-        else\n-            return state.Error(\"out of disk space\");\n+    bool out_of_space;\n+    size_t bytes_allocated = UndoFileSeq().Allocate(pos, nAddSize, out_of_space);\n+    if (out_of_space) {\n+        AbortNode(\"Disk space is low!\", _(\"Error: Disk space is low!\"));\n+        return state.Error(\"out of disk space\");\n+    }\n+    if (bytes_allocated != 0 && fPruneMode) {\n+        fCheckForPruning = true;",
      "path": "src/validation.cpp",
      "position": 257,
      "original_position": 258,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can get rid of `if` case here as described above.",
      "created_at": "2019-01-30T08:05:26Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252149147",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252149147"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3034,
      "original_line": 3034,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252822562",
      "pull_request_review_id": 198791045,
      "id": 252822562,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjgyMjU2Mg==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <logging.h>\n+#include <tinyformat.h>\n+#include <util/system.h>\n+\n+std::string FlatFilePos::ToString() const\n+{\n+    return strprintf(\"FlatFilePos(nFile=%i, nPos=%i)\", nFile, nPos);\n+}\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)\n+{}",
      "path": "src/flatfile.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "etscrivner",
        "id": 69561,
        "node_id": "MDQ6VXNlcjY5NTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/69561?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/etscrivner",
        "html_url": "https://github.com/etscrivner",
        "followers_url": "https://api.github.com/users/etscrivner/followers",
        "following_url": "https://api.github.com/users/etscrivner/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/etscrivner/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/etscrivner/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/etscrivner/subscriptions",
        "organizations_url": "https://api.github.com/users/etscrivner/orgs",
        "repos_url": "https://api.github.com/users/etscrivner/repos",
        "events_url": "https://api.github.com/users/etscrivner/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/etscrivner/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should this raise an error if `chunk_size = 0`?",
      "created_at": "2019-01-31T20:11:46Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252822562",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252822562"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252826046",
      "pull_request_review_id": 198795431,
      "id": 252826046,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjgyNjA0Ng==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <logging.h>\n+#include <tinyformat.h>\n+#include <util/system.h>\n+\n+std::string FlatFilePos::ToString() const\n+{\n+    return strprintf(\"FlatFilePos(nFile=%i, nPos=%i)\", nFile, nPos);\n+}\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)\n+{}\n+\n+fs::path FlatFileSeq::FileName(const FlatFilePos& pos) const\n+{\n+    return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n+}\n+\n+FILE* FlatFileSeq::Open(const FlatFilePos& pos, bool read_only)\n+{\n+    if (pos.IsNull())\n+        return nullptr;\n+    fs::path path = FileName(pos);\n+    fs::create_directories(path.parent_path());\n+    FILE* file = fsbridge::fopen(path, read_only ? \"rb\": \"rb+\");\n+    if (!file && !read_only)\n+        file = fsbridge::fopen(path, \"wb+\");\n+    if (!file) {\n+        LogPrintf(\"Unable to open file %s\\n\", path.string());\n+        return nullptr;\n+    }\n+    if (pos.nPos) {\n+        if (fseek(file, pos.nPos, SEEK_SET)) {\n+            LogPrintf(\"Unable to seek to position %u of %s\\n\", pos.nPos, path.string());\n+            fclose(file);\n+            return nullptr;\n+        }\n+    }\n+    return file;\n+}\n+\n+size_t FlatFileSeq::Allocate(const FlatFilePos& pos, size_t add_size, bool& out_of_space)",
      "path": "src/flatfile.cpp",
      "position": 55,
      "original_position": 48,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "etscrivner",
        "id": 69561,
        "node_id": "MDQ6VXNlcjY5NTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/69561?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/etscrivner",
        "html_url": "https://github.com/etscrivner",
        "followers_url": "https://api.github.com/users/etscrivner/followers",
        "following_url": "https://api.github.com/users/etscrivner/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/etscrivner/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/etscrivner/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/etscrivner/subscriptions",
        "organizations_url": "https://api.github.com/users/etscrivner/orgs",
        "repos_url": "https://api.github.com/users/etscrivner/repos",
        "events_url": "https://api.github.com/users/etscrivner/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/etscrivner/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should `add_size = 0` be allowed? Seems like this would always cause `n_new_chunks = n_old_chunks` thereby causing the function to return `0`.",
      "created_at": "2019-01-31T20:22:12Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252826046",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252826046"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 55,
      "original_line": 55,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252830663",
      "pull_request_review_id": 198802128,
      "id": 252830663,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjgzMDY2Mw==",
      "diff_hunk": "@@ -135,6 +135,13 @@ bool DirIsWritable(const fs::path& directory)\n     return true;\n }\n \n+bool CheckDiskSpace(const fs::path& dir, uint64_t nAdditionalBytes)\n+{\n+    constexpr uint64_t nMinDiskSpace = 52428800;",
      "path": "src/util/system.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "etscrivner",
        "id": 69561,
        "node_id": "MDQ6VXNlcjY5NTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/69561?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/etscrivner",
        "html_url": "https://github.com/etscrivner",
        "followers_url": "https://api.github.com/users/etscrivner/followers",
        "following_url": "https://api.github.com/users/etscrivner/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/etscrivner/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/etscrivner/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/etscrivner/subscriptions",
        "organizations_url": "https://api.github.com/users/etscrivner/orgs",
        "repos_url": "https://api.github.com/users/etscrivner/repos",
        "events_url": "https://api.github.com/users/etscrivner/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/etscrivner/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It would be good to add an additional comment above this indicating its approximate size. Previously this comment was present:\r\n\r\n```\r\n// Check for nMinDiskSpace bytes (currently 50MB)\r\n```",
      "created_at": "2019-01-31T20:35:03Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252830663",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252830663"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 140,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252831478",
      "pull_request_review_id": 198803228,
      "id": 252831478,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MjgzMTQ3OA==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <logging.h>\n+#include <tinyformat.h>\n+#include <util/system.h>\n+\n+std::string FlatFilePos::ToString() const\n+{\n+    return strprintf(\"FlatFilePos(nFile=%i, nPos=%i)\", nFile, nPos);\n+}\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)\n+{}\n+\n+fs::path FlatFileSeq::FileName(const FlatFilePos& pos) const\n+{\n+    return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n+}\n+\n+FILE* FlatFileSeq::Open(const FlatFilePos& pos, bool read_only)\n+{\n+    if (pos.IsNull())\n+        return nullptr;\n+    fs::path path = FileName(pos);\n+    fs::create_directories(path.parent_path());\n+    FILE* file = fsbridge::fopen(path, read_only ? \"rb\": \"rb+\");\n+    if (!file && !read_only)\n+        file = fsbridge::fopen(path, \"wb+\");\n+    if (!file) {\n+        LogPrintf(\"Unable to open file %s\\n\", path.string());\n+        return nullptr;\n+    }\n+    if (pos.nPos) {\n+        if (fseek(file, pos.nPos, SEEK_SET)) {\n+            LogPrintf(\"Unable to seek to position %u of %s\\n\", pos.nPos, path.string());\n+            fclose(file);\n+            return nullptr;\n+        }\n+    }\n+    return file;\n+}\n+\n+size_t FlatFileSeq::Allocate(const FlatFilePos& pos, size_t add_size, bool& out_of_space)\n+{\n+    out_of_space = false;\n+\n+    unsigned int n_old_chunks = (pos.nPos + m_chunk_size - 1) / m_chunk_size;\n+    unsigned int n_new_chunks = (pos.nPos + add_size + m_chunk_size - 1) / m_chunk_size;\n+    if (n_new_chunks > n_old_chunks) {\n+        size_t old_size = pos.nPos;\n+        size_t new_size = n_new_chunks * m_chunk_size;\n+        size_t inc_size = new_size - old_size;\n+\n+        if (CheckDiskSpace(m_dir, inc_size)) {",
      "path": "src/flatfile.cpp",
      "position": 66,
      "original_position": 59,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": null,
      "user": {
        "login": "etscrivner",
        "id": 69561,
        "node_id": "MDQ6VXNlcjY5NTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/69561?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/etscrivner",
        "html_url": "https://github.com/etscrivner",
        "followers_url": "https://api.github.com/users/etscrivner/followers",
        "following_url": "https://api.github.com/users/etscrivner/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/etscrivner/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/etscrivner/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/etscrivner/subscriptions",
        "organizations_url": "https://api.github.com/users/etscrivner/orgs",
        "repos_url": "https://api.github.com/users/etscrivner/repos",
        "events_url": "https://api.github.com/users/etscrivner/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/etscrivner/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Any concerns about the type mismatch here between `inc_size` (`size_t`) and the second argument to `CheckDiskSpace` which is a `uint64_t`?",
      "created_at": "2019-01-31T20:38:04Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252831478",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252831478"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252955575",
      "pull_request_review_id": 198953532,
      "id": 252955575,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1Mjk1NTU3NQ==",
      "diff_hunk": "@@ -71,6 +71,7 @@ void AllocateFileRange(FILE *file, unsigned int offset, unsigned int length);\n bool RenameOver(fs::path src, fs::path dest);\n bool LockDirectory(const fs::path& directory, const std::string lockfile_name, bool probe_only=false);\n bool DirIsWritable(const fs::path& directory);\n+bool CheckDiskSpace(const fs::path& dir, uint64_t nAdditionalBytes = 0);",
      "path": "src/util/system.h",
      "position": null,
      "original_position": 4,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": 252144706,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is just moving code out of validation.{h,cpp}. Would rather not also rename vars.",
      "created_at": "2019-02-01T07:34:53Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252955575",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252955575"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252955587",
      "pull_request_review_id": 198953542,
      "id": 252955587,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1Mjk1NTU4Nw==",
      "diff_hunk": "@@ -135,6 +135,13 @@ bool DirIsWritable(const fs::path& directory)\n     return true;\n }\n \n+bool CheckDiskSpace(const fs::path& dir, uint64_t nAdditionalBytes)\n+{\n+    constexpr uint64_t nMinDiskSpace = 52428800;\n+    uint64_t nFreeBytesAvailable = fs::space(dir).available;\n+    return nFreeBytesAvailable >= nMinDiskSpace + nAdditionalBytes;",
      "path": "src/util/system.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": 252147182,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is just moving code out of validation.{h,cpp}. Would rather not also rename vars.",
      "created_at": "2019-02-01T07:34:56Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252955587",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252955587"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 142,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252956627",
      "pull_request_review_id": 198954699,
      "id": 252956627,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1Mjk1NjYyNw==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <logging.h>\n+#include <tinyformat.h>\n+#include <util/system.h>\n+\n+std::string FlatFilePos::ToString() const\n+{\n+    return strprintf(\"FlatFilePos(nFile=%i, nPos=%i)\", nFile, nPos);\n+}\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)\n+{}\n+\n+fs::path FlatFileSeq::FileName(const FlatFilePos& pos) const\n+{\n+    return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n+}\n+\n+FILE* FlatFileSeq::Open(const FlatFilePos& pos, bool read_only)\n+{\n+    if (pos.IsNull())\n+        return nullptr;",
      "path": "src/flatfile.cpp",
      "position": 36,
      "original_position": 28,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": 252142551,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah, it's a move. Would rather not change.",
      "created_at": "2019-02-01T07:40:08Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252956627",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252956627"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 36,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252956646",
      "pull_request_review_id": 198954721,
      "id": 252956646,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1Mjk1NjY0Ng==",
      "diff_hunk": "@@ -0,0 +1,123 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <test/test_bitcoin.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_FIXTURE_TEST_SUITE(flatfile_tests, BasicTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(flatfile_filename)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+\n+    FlatFilePos pos(456, 789);\n+\n+    FlatFileSeq seq1(data_dir, \"a\", 16 * 1024);\n+    BOOST_CHECK_EQUAL(seq1.FileName(pos), data_dir / \"a00456.dat\");\n+\n+    FlatFileSeq seq2(data_dir / \"a\", \"b\", 16 * 1024);\n+    BOOST_CHECK_EQUAL(seq2.FileName(pos), data_dir / \"a\" / \"b00456.dat\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(flatfile_open)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+    FlatFileSeq seq(data_dir, \"a\", 16 * 1024);\n+\n+    std::string line1(\"A purely peer-to-peer version of electronic cash would allow online \"\n+                      \"payments to be sent directly from one party to another without going \"\n+                      \"through a financial institution.\");\n+    std::string line2(\"Digital signatures provide part of the solution, but the main benefits are \"\n+                      \"lost if a trusted third party is still required to prevent double-spending.\");\n+\n+    size_t pos1 = 0;\n+    size_t pos2 = pos1 + GetSerializeSize(line1, CLIENT_VERSION);\n+\n+    // Write first line to file.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos1)), SER_DISK, CLIENT_VERSION);\n+        file << LIMITED_STRING(line1, 256);\n+    }\n+\n+    // Attempt to append to file opened in read-only mode.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2), true), SER_DISK, CLIENT_VERSION);\n+        BOOST_CHECK_THROW(file << LIMITED_STRING(line2, 256), std::ios_base::failure);\n+    }\n+\n+    // Append second line to file.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2)), SER_DISK, CLIENT_VERSION);\n+        file << LIMITED_STRING(line2, 256);\n+    }\n+\n+    // Read text from file in read-only mode.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos1), true), SER_DISK, CLIENT_VERSION);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line1);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line2);\n+    }\n+\n+    // Read text from file with position offset.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2)), SER_DISK, CLIENT_VERSION);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line2);\n+    }\n+\n+    // Ensure another file in the sequence has no data.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(1, pos2)), SER_DISK, CLIENT_VERSION);\n+        BOOST_CHECK_THROW(file >> LIMITED_STRING(text, 256), std::ios_base::failure);\n+    }\n+}\n+\n+BOOST_AUTO_TEST_CASE(flatfile_allocate)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+    FlatFileSeq seq(data_dir, \"a\", 100);\n+\n+    bool out_of_space;\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 0), 1, out_of_space), 100);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 0))), 100);\n+    BOOST_CHECK(!out_of_space);\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 99), 1, out_of_space), 0);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 99))), 100);\n+    BOOST_CHECK(!out_of_space);\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 99), 2, out_of_space), 101);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 99))), 200);\n+    BOOST_CHECK(!out_of_space);",
      "path": "src/test/flatfile_tests.cpp",
      "position": 103,
      "original_position": 103,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": 252146133,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good idea.",
      "created_at": "2019-02-01T07:40:15Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252956646",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252956646"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 103,
      "original_line": 103,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252956984",
      "pull_request_review_id": 198955114,
      "id": 252956984,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1Mjk1Njk4NA==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <logging.h>\n+#include <tinyformat.h>\n+#include <util/system.h>\n+\n+std::string FlatFilePos::ToString() const\n+{\n+    return strprintf(\"FlatFilePos(nFile=%i, nPos=%i)\", nFile, nPos);\n+}\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)\n+{}\n+\n+fs::path FlatFileSeq::FileName(const FlatFilePos& pos) const\n+{\n+    return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n+}\n+\n+FILE* FlatFileSeq::Open(const FlatFilePos& pos, bool read_only)\n+{\n+    if (pos.IsNull())\n+        return nullptr;\n+    fs::path path = FileName(pos);\n+    fs::create_directories(path.parent_path());\n+    FILE* file = fsbridge::fopen(path, read_only ? \"rb\": \"rb+\");\n+    if (!file && !read_only)\n+        file = fsbridge::fopen(path, \"wb+\");\n+    if (!file) {\n+        LogPrintf(\"Unable to open file %s\\n\", path.string());\n+        return nullptr;\n+    }\n+    if (pos.nPos) {\n+        if (fseek(file, pos.nPos, SEEK_SET)) {\n+            LogPrintf(\"Unable to seek to position %u of %s\\n\", pos.nPos, path.string());\n+            fclose(file);\n+            return nullptr;\n+        }\n+    }\n+    return file;\n+}\n+\n+size_t FlatFileSeq::Allocate(const FlatFilePos& pos, size_t add_size, bool& out_of_space)\n+{\n+    out_of_space = false;\n+\n+    unsigned int n_old_chunks = (pos.nPos + m_chunk_size - 1) / m_chunk_size;\n+    unsigned int n_new_chunks = (pos.nPos + add_size + m_chunk_size - 1) / m_chunk_size;\n+    if (n_new_chunks > n_old_chunks) {\n+        size_t old_size = pos.nPos;\n+        size_t new_size = n_new_chunks * m_chunk_size;\n+        size_t inc_size = new_size - old_size;\n+\n+        if (CheckDiskSpace(m_dir, inc_size)) {",
      "path": "src/flatfile.cpp",
      "position": 66,
      "original_position": 59,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": 252831478,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Do you get a compiler warning? If not, the implicit cast ought to be fine.",
      "created_at": "2019-02-01T07:42:16Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252956984",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252956984"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252962806",
      "pull_request_review_id": 198962411,
      "id": 252962806,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1Mjk2MjgwNg==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <logging.h>\n+#include <tinyformat.h>\n+#include <util/system.h>\n+\n+std::string FlatFilePos::ToString() const\n+{\n+    return strprintf(\"FlatFilePos(nFile=%i, nPos=%i)\", nFile, nPos);\n+}\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)\n+{}\n+\n+fs::path FlatFileSeq::FileName(const FlatFilePos& pos) const\n+{\n+    return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n+}\n+\n+FILE* FlatFileSeq::Open(const FlatFilePos& pos, bool read_only)\n+{\n+    if (pos.IsNull())\n+        return nullptr;\n+    fs::path path = FileName(pos);\n+    fs::create_directories(path.parent_path());\n+    FILE* file = fsbridge::fopen(path, read_only ? \"rb\": \"rb+\");\n+    if (!file && !read_only)\n+        file = fsbridge::fopen(path, \"wb+\");\n+    if (!file) {\n+        LogPrintf(\"Unable to open file %s\\n\", path.string());\n+        return nullptr;\n+    }\n+    if (pos.nPos) {\n+        if (fseek(file, pos.nPos, SEEK_SET)) {\n+            LogPrintf(\"Unable to seek to position %u of %s\\n\", pos.nPos, path.string());\n+            fclose(file);\n+            return nullptr;\n+        }\n+    }\n+    return file;\n+}\n+\n+size_t FlatFileSeq::Allocate(const FlatFilePos& pos, size_t add_size, bool& out_of_space)",
      "path": "src/flatfile.cpp",
      "position": 55,
      "original_position": 48,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": 252826046,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Returning 0 seems like the right thing to do there. Probably better than throwing an exception or something.",
      "created_at": "2019-02-01T08:11:50Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r252962806",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/252962806"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 55,
      "original_line": 55,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253228171",
      "pull_request_review_id": 199304440,
      "id": 253228171,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MzIyODE3MQ==",
      "diff_hunk": "@@ -0,0 +1,123 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <test/test_bitcoin.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_FIXTURE_TEST_SUITE(flatfile_tests, BasicTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(flatfile_filename)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+\n+    FlatFilePos pos(456, 789);\n+\n+    FlatFileSeq seq1(data_dir, \"a\", 16 * 1024);\n+    BOOST_CHECK_EQUAL(seq1.FileName(pos), data_dir / \"a00456.dat\");\n+\n+    FlatFileSeq seq2(data_dir / \"a\", \"b\", 16 * 1024);\n+    BOOST_CHECK_EQUAL(seq2.FileName(pos), data_dir / \"a\" / \"b00456.dat\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(flatfile_open)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+    FlatFileSeq seq(data_dir, \"a\", 16 * 1024);\n+\n+    std::string line1(\"A purely peer-to-peer version of electronic cash would allow online \"\n+                      \"payments to be sent directly from one party to another without going \"\n+                      \"through a financial institution.\");\n+    std::string line2(\"Digital signatures provide part of the solution, but the main benefits are \"\n+                      \"lost if a trusted third party is still required to prevent double-spending.\");\n+\n+    size_t pos1 = 0;\n+    size_t pos2 = pos1 + GetSerializeSize(line1, CLIENT_VERSION);\n+\n+    // Write first line to file.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos1)), SER_DISK, CLIENT_VERSION);\n+        file << LIMITED_STRING(line1, 256);\n+    }\n+\n+    // Attempt to append to file opened in read-only mode.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2), true), SER_DISK, CLIENT_VERSION);\n+        BOOST_CHECK_THROW(file << LIMITED_STRING(line2, 256), std::ios_base::failure);\n+    }\n+\n+    // Append second line to file.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2)), SER_DISK, CLIENT_VERSION);\n+        file << LIMITED_STRING(line2, 256);\n+    }\n+\n+    // Read text from file in read-only mode.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos1), true), SER_DISK, CLIENT_VERSION);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line1);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line2);\n+    }\n+\n+    // Read text from file with position offset.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2)), SER_DISK, CLIENT_VERSION);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line2);\n+    }\n+\n+    // Ensure another file in the sequence has no data.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(1, pos2)), SER_DISK, CLIENT_VERSION);\n+        BOOST_CHECK_THROW(file >> LIMITED_STRING(text, 256), std::ios_base::failure);\n+    }\n+}\n+\n+BOOST_AUTO_TEST_CASE(flatfile_allocate)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+    FlatFileSeq seq(data_dir, \"a\", 100);\n+\n+    bool out_of_space;\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 0), 1, out_of_space), 100);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 0))), 100);\n+    BOOST_CHECK(!out_of_space);\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 99), 1, out_of_space), 0);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 99))), 100);\n+    BOOST_CHECK(!out_of_space);\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 99), 2, out_of_space), 101);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 99))), 200);\n+    BOOST_CHECK(!out_of_space);",
      "path": "src/test/flatfile_tests.cpp",
      "position": 103,
      "original_position": 103,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": 252146133,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I couldn't get this test passing on Travis... tried setting `too_big` to a petabyte as well, and there was still some issue.",
      "created_at": "2019-02-01T23:07:54Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r253228171",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253228171"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 103,
      "original_line": 103,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253276704",
      "pull_request_review_id": 199360433,
      "id": 253276704,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1MzI3NjcwNA==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <logging.h>\n+#include <tinyformat.h>\n+#include <util/system.h>\n+\n+std::string FlatFilePos::ToString() const\n+{\n+    return strprintf(\"FlatFilePos(nFile=%i, nPos=%i)\", nFile, nPos);\n+}\n+\n+FlatFileSeq::FlatFileSeq(fs::path dir, const char* prefix, size_t chunk_size)\n+    : m_dir(std::move(dir)), m_prefix(prefix), m_chunk_size(chunk_size)\n+{}\n+\n+fs::path FlatFileSeq::FileName(const FlatFilePos& pos) const\n+{\n+    return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n+}\n+\n+FILE* FlatFileSeq::Open(const FlatFilePos& pos, bool read_only)\n+{\n+    if (pos.IsNull())\n+        return nullptr;\n+    fs::path path = FileName(pos);\n+    fs::create_directories(path.parent_path());\n+    FILE* file = fsbridge::fopen(path, read_only ? \"rb\": \"rb+\");\n+    if (!file && !read_only)\n+        file = fsbridge::fopen(path, \"wb+\");\n+    if (!file) {\n+        LogPrintf(\"Unable to open file %s\\n\", path.string());\n+        return nullptr;\n+    }\n+    if (pos.nPos) {\n+        if (fseek(file, pos.nPos, SEEK_SET)) {\n+            LogPrintf(\"Unable to seek to position %u of %s\\n\", pos.nPos, path.string());\n+            fclose(file);\n+            return nullptr;\n+        }\n+    }\n+    return file;\n+}\n+\n+size_t FlatFileSeq::Allocate(const FlatFilePos& pos, size_t add_size, bool& out_of_space)\n+{\n+    out_of_space = false;\n+\n+    unsigned int n_old_chunks = (pos.nPos + m_chunk_size - 1) / m_chunk_size;\n+    unsigned int n_new_chunks = (pos.nPos + add_size + m_chunk_size - 1) / m_chunk_size;\n+    if (n_new_chunks > n_old_chunks) {\n+        size_t old_size = pos.nPos;\n+        size_t new_size = n_new_chunks * m_chunk_size;\n+        size_t inc_size = new_size - old_size;\n+\n+        if (CheckDiskSpace(m_dir, inc_size)) {",
      "path": "src/flatfile.cpp",
      "position": 66,
      "original_position": 59,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": 252831478,
      "user": {
        "login": "etscrivner",
        "id": 69561,
        "node_id": "MDQ6VXNlcjY5NTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/69561?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/etscrivner",
        "html_url": "https://github.com/etscrivner",
        "followers_url": "https://api.github.com/users/etscrivner/followers",
        "following_url": "https://api.github.com/users/etscrivner/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/etscrivner/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/etscrivner/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/etscrivner/subscriptions",
        "organizations_url": "https://api.github.com/users/etscrivner/orgs",
        "repos_url": "https://api.github.com/users/etscrivner/repos",
        "events_url": "https://api.github.com/users/etscrivner/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/etscrivner/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "No compiler warning, maybe just a note for the future that the sizes of the integer types should probably be reconciled at some point.",
      "created_at": "2019-02-02T19:56:04Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r253276704",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/253276704"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256755993",
      "pull_request_review_id": 203646980,
      "id": 256755993,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1Njc1NTk5Mw==",
      "diff_hunk": "@@ -0,0 +1,123 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <flatfile.h>\n+#include <test/test_bitcoin.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_FIXTURE_TEST_SUITE(flatfile_tests, BasicTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(flatfile_filename)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+\n+    FlatFilePos pos(456, 789);\n+\n+    FlatFileSeq seq1(data_dir, \"a\", 16 * 1024);\n+    BOOST_CHECK_EQUAL(seq1.FileName(pos), data_dir / \"a00456.dat\");\n+\n+    FlatFileSeq seq2(data_dir / \"a\", \"b\", 16 * 1024);\n+    BOOST_CHECK_EQUAL(seq2.FileName(pos), data_dir / \"a\" / \"b00456.dat\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(flatfile_open)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+    FlatFileSeq seq(data_dir, \"a\", 16 * 1024);\n+\n+    std::string line1(\"A purely peer-to-peer version of electronic cash would allow online \"\n+                      \"payments to be sent directly from one party to another without going \"\n+                      \"through a financial institution.\");\n+    std::string line2(\"Digital signatures provide part of the solution, but the main benefits are \"\n+                      \"lost if a trusted third party is still required to prevent double-spending.\");\n+\n+    size_t pos1 = 0;\n+    size_t pos2 = pos1 + GetSerializeSize(line1, CLIENT_VERSION);\n+\n+    // Write first line to file.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos1)), SER_DISK, CLIENT_VERSION);\n+        file << LIMITED_STRING(line1, 256);\n+    }\n+\n+    // Attempt to append to file opened in read-only mode.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2), true), SER_DISK, CLIENT_VERSION);\n+        BOOST_CHECK_THROW(file << LIMITED_STRING(line2, 256), std::ios_base::failure);\n+    }\n+\n+    // Append second line to file.\n+    {\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2)), SER_DISK, CLIENT_VERSION);\n+        file << LIMITED_STRING(line2, 256);\n+    }\n+\n+    // Read text from file in read-only mode.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos1), true), SER_DISK, CLIENT_VERSION);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line1);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line2);\n+    }\n+\n+    // Read text from file with position offset.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(0, pos2)), SER_DISK, CLIENT_VERSION);\n+\n+        file >> LIMITED_STRING(text, 256);\n+        BOOST_CHECK_EQUAL(text, line2);\n+    }\n+\n+    // Ensure another file in the sequence has no data.\n+    {\n+        std::string text;\n+        CAutoFile file(seq.Open(FlatFilePos(1, pos2)), SER_DISK, CLIENT_VERSION);\n+        BOOST_CHECK_THROW(file >> LIMITED_STRING(text, 256), std::ios_base::failure);\n+    }\n+}\n+\n+BOOST_AUTO_TEST_CASE(flatfile_allocate)\n+{\n+    auto data_dir = SetDataDir(\"flatfile_test\");\n+    FlatFileSeq seq(data_dir, \"a\", 100);\n+\n+    bool out_of_space;\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 0), 1, out_of_space), 100);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 0))), 100);\n+    BOOST_CHECK(!out_of_space);\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 99), 1, out_of_space), 0);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 99))), 100);\n+    BOOST_CHECK(!out_of_space);\n+\n+    BOOST_CHECK_EQUAL(seq.Allocate(FlatFilePos(0, 99), 2, out_of_space), 101);\n+    BOOST_CHECK_EQUAL(fs::file_size(seq.FileName(FlatFilePos(0, 99))), 200);\n+    BOOST_CHECK(!out_of_space);",
      "path": "src/test/flatfile_tests.cpp",
      "position": 103,
      "original_position": 103,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "9b2d9ee0ef221668b834ffe9668b9a15297bc93f",
      "in_reply_to_id": 252146133,
      "user": {
        "login": "kallewoof",
        "id": 250224,
        "node_id": "MDQ6VXNlcjI1MDIyNA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kallewoof",
        "html_url": "https://github.com/kallewoof",
        "followers_url": "https://api.github.com/users/kallewoof/followers",
        "following_url": "https://api.github.com/users/kallewoof/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kallewoof/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kallewoof/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
        "organizations_url": "https://api.github.com/users/kallewoof/orgs",
        "repos_url": "https://api.github.com/users/kallewoof/repos",
        "events_url": "https://api.github.com/users/kallewoof/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kallewoof/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The reason is that `size_t` is 32 bit (edit: on certain systems) and there is more than 2^32 bytes available on the system, resulting in an overflow. The Allocate method should probably take a `uint64_t` to avoid this.",
      "created_at": "2019-02-14T09:42:39Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r256755993",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256755993"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 103,
      "original_line": 103,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/258677029",
      "pull_request_review_id": 206000944,
      "id": 258677029,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1ODY3NzAyOQ==",
      "diff_hunk": "@@ -3016,21 +3016,13 @@ static bool FindBlockPos(CDiskBlockPos &pos, unsigned int nAddSize, unsigned int\n         vinfoBlockFile[nFile].nSize += nAddSize;\n \n     if (!fKnown) {\n-        unsigned int nOldChunks = (pos.nPos + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        unsigned int nNewChunks = (vinfoBlockFile[nFile].nSize + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;",
      "path": "src/validation.cpp",
      "position": 195,
      "original_position": 5,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "72d693209018fc0b94d7875574686283936751e6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"validation: Refactor block file pre-allocation into FlatFileSeq.\" (72d693209018fc0b94d7875574686283936751e6)\r\n\r\nNote (just for reference because I found this function confusing): In the new code this line is replaced with:\r\n\r\n```c++\r\nunsigned int n_new_chunks = (pos.nPos + add_size + m_chunk_size - 1) / m_chunk_size;\r\n```\r\n\r\nwhich is equivalent because `vinfoBlockFile[nFile].nSize` == `pos.nPos + add_size` in the `!fKnown` case due to:\r\n\r\n```c++\r\npos.nPos = vinfoBlockFile[nFile].nSize;\r\n...\r\nvinfoBlockFile[nFile].nSize += nAddSize;\t\t￼\r\n```\r\n\r\nabove",
      "created_at": "2019-02-20T21:10:06Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r258677029",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/258677029"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3013,
      "original_line": 3013,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/258678354",
      "pull_request_review_id": 206000944,
      "id": 258678354,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1ODY3ODM1NA==",
      "diff_hunk": "@@ -3016,21 +3016,13 @@ static bool FindBlockPos(CDiskBlockPos &pos, unsigned int nAddSize, unsigned int\n         vinfoBlockFile[nFile].nSize += nAddSize;\n \n     if (!fKnown) {\n-        unsigned int nOldChunks = (pos.nPos + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        unsigned int nNewChunks = (vinfoBlockFile[nFile].nSize + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        if (nNewChunks > nOldChunks) {\n-            if (fPruneMode)\n-                fCheckForPruning = true;\n-            if (CheckDiskSpace(GetBlocksDir(), nNewChunks * BLOCKFILE_CHUNK_SIZE - pos.nPos)) {\n-                FILE *file = OpenBlockFile(pos);\n-                if (file) {\n-                    LogPrintf(\"Pre-allocating up to position 0x%x in blk%05u.dat\\n\", nNewChunks * BLOCKFILE_CHUNK_SIZE, pos.nFile);\n-                    AllocateFileRange(file, pos.nPos, nNewChunks * BLOCKFILE_CHUNK_SIZE - pos.nPos);\n-                    fclose(file);\n-                }\n-            }\n-            else\n-                return AbortNode(\"Disk space is low!\", _(\"Error: Disk space is low!\"));\n+        bool out_of_space;\n+        size_t bytes_allocated = BlockFileSeq().Allocate(pos, nAddSize, out_of_space);\n+        if (out_of_space) {\n+            return AbortNode(\"Disk space is low!\", _(\"Error: Disk space is low!\"));\n+        }\n+        if (bytes_allocated != 0 && fPruneMode) {\n+            fCheckForPruning = true;",
      "path": "src/validation.cpp",
      "position": 215,
      "original_position": 25,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "72d693209018fc0b94d7875574686283936751e6",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"validation: Refactor block file pre-allocation into FlatFileSeq.\" (72d693209018fc0b94d7875574686283936751e6)\r\n\r\nProbably doesn't make any difference, but previously the `fCheckForPruning = true` setting would happen before `return AbortNode`, but now it will be skipped if there is no disk space.\r\n\r\nSame comment applies in `FindUndoPos` below.",
      "created_at": "2019-02-20T21:13:37Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r258678354",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/258678354"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3010,
      "original_line": 3010,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/258684686",
      "pull_request_review_id": 206000944,
      "id": 258684686,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1ODY4NDY4Ng==",
      "diff_hunk": "@@ -72,3 +72,22 @@ size_t FlatFileSeq::Allocate(const CDiskBlockPos& pos, size_t add_size, bool& ou\n     }\n     return 0;\n }\n+\n+bool FlatFileSeq::Flush(const CDiskBlockPos& pos, bool finalize)\n+{\n+    FILE* file = Open(FlatFilePos(pos.nFile, 0)); // Avoid fseek to nPos\n+    if (!file) {\n+        return error(\"%s: failed to open file %d\", __func__, pos.nFile);\n+    }\n+    if (finalize && !TruncateFile(file, pos.nPos)) {\n+        fclose(file);\n+        return error(\"%s: failed to truncate file %d\", __func__, pos.nFile);\n+    }\n+    if (!FileCommit(file)) {",
      "path": "src/flatfile.cpp",
      "position": 91,
      "original_position": 15,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "5bc3ece663177235606e4ee272ff0de2bac1306a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"validation: Refactor file flush logic into FlatFileSeq.\" (5bc3ece663177235606e4ee272ff0de2bac1306a)\r\n\r\nProbably ok, but previous code would still call `FileCommit` when `TruncateFile` failed, and now it is skipped.",
      "created_at": "2019-02-20T21:30:04Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r258684686",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/258684686"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 91,
      "original_line": 91,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259180890",
      "pull_request_review_id": 206619468,
      "id": 259180890,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTE4MDg5MA==",
      "diff_hunk": "@@ -3016,21 +3016,13 @@ static bool FindBlockPos(CDiskBlockPos &pos, unsigned int nAddSize, unsigned int\n         vinfoBlockFile[nFile].nSize += nAddSize;\n \n     if (!fKnown) {\n-        unsigned int nOldChunks = (pos.nPos + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        unsigned int nNewChunks = (vinfoBlockFile[nFile].nSize + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;",
      "path": "src/validation.cpp",
      "position": 195,
      "original_position": 5,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "72d693209018fc0b94d7875574686283936751e6",
      "in_reply_to_id": 258677029,
      "user": {
        "login": "gwillen",
        "id": 458997,
        "node_id": "MDQ6VXNlcjQ1ODk5Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/458997?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gwillen",
        "html_url": "https://github.com/gwillen",
        "followers_url": "https://api.github.com/users/gwillen/followers",
        "following_url": "https://api.github.com/users/gwillen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gwillen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gwillen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gwillen/subscriptions",
        "organizations_url": "https://api.github.com/users/gwillen/orgs",
        "repos_url": "https://api.github.com/users/gwillen/repos",
        "events_url": "https://api.github.com/users/gwillen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gwillen/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Probably the right move would be to add some comments in the new code, to reduce confusion to future readers?",
      "created_at": "2019-02-22T01:12:35Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r259180890",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259180890"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3013,
      "original_line": 3013,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259182140",
      "pull_request_review_id": 206620912,
      "id": 259182140,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTE4MjE0MA==",
      "diff_hunk": "@@ -2134,8 +2134,10 @@ bool static FlushStateToDisk(const CChainParams& chainparams, CValidationState &\n         // Write blocks and block index to disk.\n         if (fDoFullFlush || fPeriodicWrite) {\n             // Depend on nMinDiskSpace to ensure we can write block index\n-            if (!CheckDiskSpace(0, true))\n+            if (!CheckDiskSpace(GetBlocksDir())) {\n+                AbortNode(\"Disk space is low!\", _(\"Error: Disk space is low!\"));",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "6c8f5d009458cecb40e4439928e241f634de505d",
      "in_reply_to_id": null,
      "user": {
        "login": "gwillen",
        "id": 458997,
        "node_id": "MDQ6VXNlcjQ1ODk5Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/458997?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gwillen",
        "html_url": "https://github.com/gwillen",
        "followers_url": "https://api.github.com/users/gwillen/followers",
        "following_url": "https://api.github.com/users/gwillen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gwillen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gwillen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gwillen/subscriptions",
        "organizations_url": "https://api.github.com/users/gwillen/orgs",
        "repos_url": "https://api.github.com/users/gwillen/repos",
        "events_url": "https://api.github.com/users/gwillen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gwillen/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: There's an overload of AbortNode that takes a CValidationState for just what you're doing here, unless you specifically want the messages to be different (which would make sense if you want to preserve them exactly as they were before, although it doesn't look like you preserve them everywhere.)",
      "created_at": "2019-02-22T01:18:56Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r259182140",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259182140"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2138,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259182216",
      "pull_request_review_id": 206620912,
      "id": 259182216,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTE4MjIxNg==",
      "diff_hunk": "@@ -2168,8 +2170,10 @@ bool static FlushStateToDisk(const CChainParams& chainparams, CValidationState &\n             // twice (once in the log, and once in the tables). This is already\n             // an overestimation, as most will delete an existing entry or\n             // overwrite one. Still, use a conservative safety factor of 2.\n-            if (!CheckDiskSpace(48 * 2 * 2 * pcoinsTip->GetCacheSize()))\n+            if (!CheckDiskSpace(GetDataDir(), 48 * 2 * 2 * pcoinsTip->GetCacheSize())) {\n+                AbortNode(\"Disk space is low!\", _(\"Error: Disk space is low!\"));",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "6c8f5d009458cecb40e4439928e241f634de505d",
      "in_reply_to_id": null,
      "user": {
        "login": "gwillen",
        "id": 458997,
        "node_id": "MDQ6VXNlcjQ1ODk5Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/458997?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gwillen",
        "html_url": "https://github.com/gwillen",
        "followers_url": "https://api.github.com/users/gwillen/followers",
        "following_url": "https://api.github.com/users/gwillen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gwillen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gwillen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gwillen/subscriptions",
        "organizations_url": "https://api.github.com/users/gwillen/orgs",
        "repos_url": "https://api.github.com/users/gwillen/repos",
        "events_url": "https://api.github.com/users/gwillen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gwillen/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "As above.",
      "created_at": "2019-02-22T01:19:22Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r259182216",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259182216"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2174,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259196701",
      "pull_request_review_id": 206638282,
      "id": 259196701,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTE5NjcwMQ==",
      "diff_hunk": "@@ -3016,21 +3016,13 @@ static bool FindBlockPos(CDiskBlockPos &pos, unsigned int nAddSize, unsigned int\n         vinfoBlockFile[nFile].nSize += nAddSize;\n \n     if (!fKnown) {\n-        unsigned int nOldChunks = (pos.nPos + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;\n-        unsigned int nNewChunks = (vinfoBlockFile[nFile].nSize + BLOCKFILE_CHUNK_SIZE - 1) / BLOCKFILE_CHUNK_SIZE;",
      "path": "src/validation.cpp",
      "position": 195,
      "original_position": 5,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "72d693209018fc0b94d7875574686283936751e6",
      "in_reply_to_id": 258677029,
      "user": {
        "login": "jimpo",
        "id": 881253,
        "node_id": "MDQ6VXNlcjg4MTI1Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jimpo",
        "html_url": "https://github.com/jimpo",
        "followers_url": "https://api.github.com/users/jimpo/followers",
        "following_url": "https://api.github.com/users/jimpo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jimpo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jimpo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
        "organizations_url": "https://api.github.com/users/jimpo/orgs",
        "repos_url": "https://api.github.com/users/jimpo/repos",
        "events_url": "https://api.github.com/users/jimpo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jimpo/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm happy to add comments anywhere you think it would make the new code more clear, but I don't want to add comments because the old code was unnecessarily confusing and this is a slight change for anyone who happened to be familiar with it. I personally find the new Allocate function clear enough as is (including the `n_new_chunks` calculation), but of course I wrote it...\r\n\r\nA PR comment like the one above seems like a fine way to address this sort of thing IMO.",
      "created_at": "2019-02-22T02:47:05Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r259196701",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259196701"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 3013,
      "original_line": 3013,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259229196",
      "pull_request_review_id": 206620912,
      "id": 259229196,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTIyOTE5Ng==",
      "diff_hunk": "@@ -30,25 +30,23 @@ fs::path FlatFileSeq::FileName(const FlatFilePos& pos) const\n     return m_dir / strprintf(\"%s%05u.dat\", m_prefix, pos.nFile);\n }\n \n-FILE* FlatFileSeq::Open(const FlatFilePos& pos, bool fReadOnly)\n+FILE* FlatFileSeq::Open(const FlatFilePos& pos, bool read_only)",
      "path": "src/flatfile.cpp",
      "position": 33,
      "original_position": 5,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "2e476e9488616a3413e15fdc2281902b28e3beeb",
      "in_reply_to_id": null,
      "user": {
        "login": "gwillen",
        "id": 458997,
        "node_id": "MDQ6VXNlcjQ1ODk5Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/458997?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gwillen",
        "html_url": "https://github.com/gwillen",
        "followers_url": "https://api.github.com/users/gwillen/followers",
        "following_url": "https://api.github.com/users/gwillen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gwillen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gwillen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gwillen/subscriptions",
        "organizations_url": "https://api.github.com/users/gwillen/orgs",
        "repos_url": "https://api.github.com/users/gwillen/repos",
        "events_url": "https://api.github.com/users/gwillen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gwillen/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: Braces on the \"if\" below, since you're doing a style cleanup pass?",
      "created_at": "2019-02-22T06:53:01Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r259229196",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259229196"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 33,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259229622",
      "pull_request_review_id": 206620912,
      "id": 259229622,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTIyOTYyMg==",
      "diff_hunk": "@@ -3047,16 +3051,18 @@ static bool FindUndoPos(CValidationState &state, int nFile, CDiskBlockPos &pos,\n     if (nNewChunks > nOldChunks) {\n         if (fPruneMode)\n             fCheckForPruning = true;\n-        if (CheckDiskSpace(nNewChunks * UNDOFILE_CHUNK_SIZE - pos.nPos, true)) {\n+        if (CheckDiskSpace(GetBlocksDir(), nNewChunks * UNDOFILE_CHUNK_SIZE - pos.nPos)) {\n             FILE *file = OpenUndoFile(pos);\n             if (file) {\n                 LogPrintf(\"Pre-allocating up to position 0x%x in rev%05u.dat\\n\", nNewChunks * UNDOFILE_CHUNK_SIZE, pos.nFile);\n                 AllocateFileRange(file, pos.nPos, nNewChunks * UNDOFILE_CHUNK_SIZE - pos.nPos);\n                 fclose(file);\n             }\n         }\n-        else\n+        else {\n+            AbortNode(\"Disk space is low!\", _(\"Error: Disk space is low!\"));",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 57,
      "commit_id": "04cca330944f859b4ed68cb8da8a79f5206fd630",
      "original_commit_id": "6c8f5d009458cecb40e4439928e241f634de505d",
      "in_reply_to_id": null,
      "user": {
        "login": "gwillen",
        "id": 458997,
        "node_id": "MDQ6VXNlcjQ1ODk5Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/458997?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gwillen",
        "html_url": "https://github.com/gwillen",
        "followers_url": "https://api.github.com/users/gwillen/followers",
        "following_url": "https://api.github.com/users/gwillen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gwillen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gwillen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gwillen/subscriptions",
        "organizations_url": "https://api.github.com/users/gwillen/orgs",
        "repos_url": "https://api.github.com/users/gwillen/repos",
        "events_url": "https://api.github.com/users/gwillen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gwillen/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "As above.",
      "created_at": "2019-02-22T06:55:44Z",
      "updated_at": "2019-02-23T01:39:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/15118#discussion_r259229622",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259229622"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15118"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3063,
      "side": "RIGHT"
    }
  ]
}