{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1995",
    "id": 2948635,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Mjk0ODYzNQ==",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1995",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/1995.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/1995.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1995",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1995/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1995/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1995/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/6ca2ea2fa2465c80f60830241d53cbd278870288",
    "number": 1995,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Large locking change",
    "user": {
      "login": "alexanderkjeldaas",
      "id": 339369,
      "node_id": "MDQ6VXNlcjMzOTM2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/339369?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexanderkjeldaas",
      "html_url": "https://github.com/alexanderkjeldaas",
      "followers_url": "https://api.github.com/users/alexanderkjeldaas/followers",
      "following_url": "https://api.github.com/users/alexanderkjeldaas/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/alexanderkjeldaas/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/alexanderkjeldaas/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/alexanderkjeldaas/subscriptions",
      "organizations_url": "https://api.github.com/users/alexanderkjeldaas/orgs",
      "repos_url": "https://api.github.com/users/alexanderkjeldaas/repos",
      "events_url": "https://api.github.com/users/alexanderkjeldaas/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/alexanderkjeldaas/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "A while back I started looking at bitcoin, and I was disappointed with the code quality wrt locking.\n\nI tried to fix the code to be clang -Wthread-safety clean, but I don't know the code enough to understand some of the entanglements that are currently present.\n\nI've added lots of annotations that specifies the locking requirements on functions and data.  This might seem a little overzealous, but I believe that this is necessary to \"get back on track\" and make the locking strategy clear and consistent.\n\nEven with this patch there are lots of locking issues left - probably benign like things happening during startup and shutdown.   There are also false positives from me not getting clang to grok TRY_LOCK correctly.\n\nBelow is a long note I wrote while looking through the source code a while back.  Maybe you guys agree or maybe not - at least it explains the whats and the whys.\n\n---\n\nFor an object that is accessed by multiple threads we have, for every field:\n- It is const, constant after initialization, or guarded by a mutex.\n- Re-using an object is a _bad idea_.  It should never be done. If we\n  do, we are mutating the constant-after-initialization fields.  This\n  leads to exessive locking and overcomplicated code.  It is a lot\n  simpler to discard the object and re-create it.  This works, because\n  the object is owned by some other object, and in that other object,\n  it is a \"guarded by mutex\" field.  Thus by re-creating the object,\n  we lift the responsibility for locking into the parent.\n- A result of the above is that \"constructors\" must be separate from\n  other functions in the class.  Constructors that are not strictly\n  C++ constructors, such as deserializing should be static functions\n  if possible.  This makes it impossible for them to to be used to\n  mutate constant-after-initialization fields.\n- Locks should not be exported outside of a class.  Java did this\n  mistake and it is considered an anti-pattern.\n- Locks should never serialize code, they should protect data from\n  being accessed while invariants on that data are broken.\n- Locks should be textually close to the fields.  Given a lock, it\n  should be easy to understand what it guards, and given a field, it\n  should be easy to see which locks guard that field.\n  Thus, locks should be private members of a class.\n  \n  A good way to obfuscate this is to put a lock in a parent class, as\n  done in keystore.h where CKeyStore.  It is hard to know what that\n  lock guards.  It is a lot cleaner to duplicate that lock in the data\n  section of the subclasses.\n- Recursive locks should never be used.  They lead to bugs, and are\n  _only_ necessary in order to write sloppy code.  If some functionality\n  is both a transaction that ensures that the invariants of the data are\n  obeyed, and part of larger transactions, then it is much clearer to\n  separate these conserns into two functions:\n  \n  void DoFoo() {\n     LOCK(cs);\n     DoFooUnlocked();\n  }\n  void DoFooUnlocked() { ... }\n- Using locks to protect simple setters and getters is often buggy\n  and/or complex.  In most cases, mutating some state is part of a\n  larger transaction, so the setter is often protected by some other\n  lock external to the class.  In these cases, re-building a new\n  object is usually the best approach, but otherwise, explicitly\n  marking setters as SetFooUnlocked() and not lock is clearer.  It\n  makes it explicit that you can't just mutate randomly without doing\n  some external locking.\n- Do not hold locks over callbacks out of an object.  This means that\n  objects should _signal_ some state change, and not guarantee which\n  state the object is in when a callback happens.  Sometimes, it makes\n  sense to break this, but then the callback will have to be treated\n  like a signal handler, or irq handler - i.e. it can only do simple\n  things and not call out to other random code.\n- Every time you call TRY_LOCK, a kitten dies.  The reason why this is\n  bad is that it makes reasoning, and testing the code incredibly\n  hard.  TRY_LOCK is basically this:\n  \n    if (rand() % 1) {\n      DoA();\n    } else {\n      DoB();\n    }\n  \n  It is simply unnecessary randomness. The TRY_LOCK macro should be\n  removed, it kills kittens.\n  \n  If something like TRY_LOCK is truly needed, then at least it should\n  be abstracted out of the actual functions, so that the functions\n  themselves are testable.  Thus in the above case, DoA() would be a\n  separate, testable, function.\n  \n  In some really large systems (millions of large tps), sharding work\n  queues by lock is a reasonable design to reduce resource usage by\n  threads (so you do cs_someLock.DoWorkNowOrWhenUnlocked(&DoA), and it\n  is more efficient than TRY_LOCK, but for bitcoin - this is just\n  overkill.\n- Having lots of semantically different locks in a class is not ideal.\n  For example CNode has 4 locks.  This means that there are 4 sets of\n  invariants that can be established independently of each other in\n  this class.  To put it another way, when you call a function on this\n  object, it should work on a subset of the state, or it should hold\n  all 4 locks.  This suggests that either the class is a composite of\n  multiple objects, and should be broken up, or the number of locks\n  should be reduced.\n- We cannot compose multiple critical sections which all take a lock\n  into a large critical section.  After we have released locks, all\n  checks that we have done are invalidated.  Most of CWallet is just\n  plain wrong and based on this false assumption.  Locking is done in\n  CCryptoKeyStore instead of in CWallet.  See above \"Locks should be\n  textually close to the fields\" for a reason why people confuse\n  themselves.\n- There is a lot of convoluted code like this:\n      bool result;\n      {\n          LOCK(cs_KeyStore);\n          result = (mapKeys.count(address) > 0);\n      }\n      return result;\n  \n  which is equivalent to this:\n  \n  ```\n  LOCK(cs_KeyStore);\n  return (mapKeys.count(address) > 0);\n  ```\n  \n  The destructor is guaranteed to run after the expression is\n  evaluated.  There is no need to over-engineer.\n  \n  Similarly, there is a lot of code like this:\n  \n  void SomeFunction(...)\n  {\n      something();\n      {\n          LOCK(cs_something);\n          ...\n      }\n  }\n  \n  or this:\n  void SomeFunction(...)\n  {\n      {\n          LOCK(cs_something);\n          .. rest of function ...\n      }\n      return false;\n  }\n  \n  There is no point in all the excessive blocks.  What are they for?\n",
    "labels": [],
    "active_lock_reason": "resolved",
    "created_at": "2012-11-09T18:37:41Z",
    "updated_at": "2021-09-08T10:17:21Z",
    "closed_at": "2012-11-11T03:36:41Z",
    "mergeable_state": "unknown",
    "merged_at": "2012-11-11T03:36:41Z",
    "merge_commit_sha": "939144b9505eb596e6b70e65b836414fcded8ded",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "alexanderkjeldaas:master",
      "ref": "master",
      "sha": "6ca2ea2fa2465c80f60830241d53cbd278870288",
      "user": {
        "login": "alexanderkjeldaas",
        "id": 339369,
        "node_id": "MDQ6VXNlcjMzOTM2OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/339369?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alexanderkjeldaas",
        "html_url": "https://github.com/alexanderkjeldaas",
        "followers_url": "https://api.github.com/users/alexanderkjeldaas/followers",
        "following_url": "https://api.github.com/users/alexanderkjeldaas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/alexanderkjeldaas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/alexanderkjeldaas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/alexanderkjeldaas/subscriptions",
        "organizations_url": "https://api.github.com/users/alexanderkjeldaas/orgs",
        "repos_url": "https://api.github.com/users/alexanderkjeldaas/repos",
        "events_url": "https://api.github.com/users/alexanderkjeldaas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/alexanderkjeldaas/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 6609109,
        "node_id": "MDEwOlJlcG9zaXRvcnk2NjA5MTA5",
        "name": "bitcoin",
        "full_name": "alexanderkjeldaas/bitcoin",
        "owner": {
          "login": "alexanderkjeldaas",
          "id": 339369,
          "node_id": "MDQ6VXNlcjMzOTM2OQ==",
          "avatar_url": "https://avatars.githubusercontent.com/u/339369?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/alexanderkjeldaas",
          "html_url": "https://github.com/alexanderkjeldaas",
          "followers_url": "https://api.github.com/users/alexanderkjeldaas/followers",
          "following_url": "https://api.github.com/users/alexanderkjeldaas/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/alexanderkjeldaas/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/alexanderkjeldaas/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/alexanderkjeldaas/subscriptions",
          "organizations_url": "https://api.github.com/users/alexanderkjeldaas/orgs",
          "repos_url": "https://api.github.com/users/alexanderkjeldaas/repos",
          "events_url": "https://api.github.com/users/alexanderkjeldaas/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/alexanderkjeldaas/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/alexanderkjeldaas/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin",
        "archive_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/events",
        "forks_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/alexanderkjeldaas/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:alexanderkjeldaas/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/alexanderkjeldaas/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/alexanderkjeldaas/bitcoin/hooks",
        "svn_url": "https://github.com/alexanderkjeldaas/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 8894,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2012-11-14T03:06:05Z",
        "created_at": "2012-11-09T05:38:32Z",
        "updated_at": "2018-08-21T18:58:36Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "6ca2ea2fa2465c80f60830241d53cbd278870288",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34323,
        "stargazers_count": 69817,
        "watchers_count": 69817,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T19:05:23Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-06T18:57:56Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1995"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 0,
    "deletions": 0,
    "changed_files": 0,
    "commits": 0,
    "review_comments": 0,
    "comments": 5
  },
  "events": [
    {
      "event": "commented",
      "id": 10254336,
      "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjU0MzM2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10254336",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2012-11-10T11:41:35Z",
      "updated_at": "2012-11-10T11:41:35Z",
      "author_association": "MEMBER",
      "body": "Need to look at this in detail, but I certainly applaud the effort of improving the locking situation. I dread having to debug deadlocks in the current source.\n\nI also took a look at this in the past (see #1801),  but I didn't have the patience at that time to unentangle the complex web of locks. Also the nested mutexes are indeed a bad idea.\n\nIf you go through the difficulties of making sense of it all, it may be wise to switch from shared state completely and switch to a message-passing architecture. This will also allow running the different parts in different locked-down processs eventually, increasing robustness and security. But it's a lot of work.\n",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/1995#issuecomment-10254336",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1995"
    },
    {
      "event": "commented",
      "id": 10256133,
      "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjU2MTMz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10256133",
      "actor": {
        "login": "alexanderkjeldaas",
        "id": 339369,
        "node_id": "MDQ6VXNlcjMzOTM2OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/339369?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alexanderkjeldaas",
        "html_url": "https://github.com/alexanderkjeldaas",
        "followers_url": "https://api.github.com/users/alexanderkjeldaas/followers",
        "following_url": "https://api.github.com/users/alexanderkjeldaas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/alexanderkjeldaas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/alexanderkjeldaas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/alexanderkjeldaas/subscriptions",
        "organizations_url": "https://api.github.com/users/alexanderkjeldaas/orgs",
        "repos_url": "https://api.github.com/users/alexanderkjeldaas/repos",
        "events_url": "https://api.github.com/users/alexanderkjeldaas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/alexanderkjeldaas/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2012-11-10T15:21:55Z",
      "updated_at": "2012-11-10T15:21:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "On 10 November 2012 08:41, Wladimir J. van der Laan <\nnotifications@github.com> wrote:\n\n> Need to look at this in detail, but I certainly applaud the effort of\n> improving the locking situation. I dread having to debug deadlocks in the\n> current source.\n> \n> I also took a look at this in the past (see #1801https://github.com/bitcoin/bitcoin/issues/1801),\n> but I didn't have the patience at that time to unentangle the complex web\n> of locks. Also the nested mutexes are indeed a bad idea.\n> \n> If you go through the difficulties of making sense of it all, it may be\n> wise to switch from shared state completely and switch to a message-passing\n> architecture. This will also allow running the different parts in different\n> locked-down processs eventually, increasing robustness and security. But\n> it's a lot of work.\n> \n> Actually what I am doing is a series of transforms.\n\nFirst I annotate data and locks based on evidence in the code.  So I see\nthat a given lock is taken before mutation of a variable, then that locks\nprotects the variable.  The annotations on functions are again just deduced\nfrom that. Then the compiler will prove inconsistencies, and that is when\none either have to change the annotation, or change the locking code.  The\nlatter is not automatic but depends on knowing the code in question.\n\nI understand that the result of all of the above can be somewhat hard to\ndigest as a patch.  I can make it easier by splitting it into smaller\npieces, but first I'd like to get thumbs up for this kind of annotations.\n It really is a domain-specific type system available in clang.\n\nI've done a large backend system at Google using this strategy, and not\nonce did I have to debug locking issues.  And this in a very popular\nproduct.  Unfortunately, at this point in time I don't have much time to\ndedicate to this (I'm doing a startup, so I need to be selective about my\ntime).\n\nIf you are interested, I can also insert TODOs for other developers to look\nat, for dubious locking/APIs that are too entangled.  I have personally\nfound that having a lot of TOODs in the code makes it easier for others to\nunderstand suboptimal code that they can reasonably try to fix when they\nrefactor a piece of code, but others find that it makes the code look even\nmore horrible than it is. YMMV.\n\nSmaller sized changes would be something like:\n1. Add the annotation support\n2. Do the necessary changes to sync.h to support annotations\n3. Annotate most of the classes/interfaces and do transformations of\n   methods that are involved in recursive locking.\n4. Create a patch that does the actual locking changes, including the\n   compler-deduced inconsistency at each point.\n5. Remove the compiler comments from the code.\n\nAlexander\n\n> —\n> Reply to this email directly or view it on GitHubhttps://github.com/bitcoin/bitcoin/pull/1995#issuecomment-10254336.\n",
      "user": {
        "login": "alexanderkjeldaas",
        "id": 339369,
        "node_id": "MDQ6VXNlcjMzOTM2OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/339369?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alexanderkjeldaas",
        "html_url": "https://github.com/alexanderkjeldaas",
        "followers_url": "https://api.github.com/users/alexanderkjeldaas/followers",
        "following_url": "https://api.github.com/users/alexanderkjeldaas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/alexanderkjeldaas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/alexanderkjeldaas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/alexanderkjeldaas/subscriptions",
        "organizations_url": "https://api.github.com/users/alexanderkjeldaas/orgs",
        "repos_url": "https://api.github.com/users/alexanderkjeldaas/repos",
        "events_url": "https://api.github.com/users/alexanderkjeldaas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/alexanderkjeldaas/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/1995#issuecomment-10256133",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1995"
    },
    {
      "event": "commented",
      "id": 10257587,
      "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjU3NTg3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10257587",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2012-11-10T17:38:21Z",
      "updated_at": "2012-11-10T17:38:37Z",
      "author_association": "MEMBER",
      "body": "I'm certainly in favor of improving the locking system. I didn't know about clang's -Wthread-safety, but it certainly looks like a nice way to improvements. If we go that way, I'd like to see it completed as well, so that probably means rebasing from time to time, and following up. Unfortunately, refactoring patches are often not considered high priority, and they conflict easily with other patches.\n\nAbout the locks in general, I think most of the uglyness/entanglement is the result of lack of encapsulation. Many objects expose their inner state publically, and are also accessed/modified from almost everywhere. I think we made at least some improvement since Satoshi's days (there wasn't even a CWallet or CkeyStore, and all was done from within main), but there's a long road ahead still.\n\nFor the block chain, I've been planning to add a class to separate the block tree (mapBlockChain, pblocktree & co) and the coin state (pcoinsTip, hashBestChain) entirely after ultraprune (which is now merged). Ideally, both get guarded by separate locks (so cs_main can go), and encapsulate them in well-behaved classes.\n\nRegarding callbacks, @TheBlueMatt has worked on creating a message queue for the core before, so callbacks to wallet could run in separate threads. This never got merged, unfortunately.\n",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/1995#issuecomment-10257587",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1995"
    },
    {
      "event": "mentioned",
      "id": 29114620,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjkxMTQ2MjA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/29114620",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2012-11-10T17:38:21Z"
    },
    {
      "event": "subscribed",
      "id": 29114621,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDI5MTE0NjIx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/29114621",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2012-11-10T17:38:21Z"
    },
    {
      "event": "commented",
      "id": 10259812,
      "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjU5ODEy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10259812",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2012-11-10T20:58:22Z",
      "updated_at": "2012-11-10T20:58:22Z",
      "author_association": "MEMBER",
      "body": "I agree that doing this in multiple phases is a good idea, and that adding the annotations would be a good first step, so that we can all get an idea of the kind of warnings that clang gives in this case.\n",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/1995#issuecomment-10259812",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1995"
    },
    {
      "event": "commented",
      "id": 10260803,
      "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjYwODAz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10260803",
      "actor": {
        "login": "gavinandresen",
        "id": 331997,
        "node_id": "MDQ6VXNlcjMzMTk5Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gavinandresen",
        "html_url": "https://github.com/gavinandresen",
        "followers_url": "https://api.github.com/users/gavinandresen/followers",
        "following_url": "https://api.github.com/users/gavinandresen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gavinandresen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gavinandresen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
        "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
        "repos_url": "https://api.github.com/users/gavinandresen/repos",
        "events_url": "https://api.github.com/users/gavinandresen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2012-11-10T22:37:53Z",
      "updated_at": "2012-11-10T22:37:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thumbs up from me on improving the locking; ideas for how we can test to make sure we're not making things worse as we improve the code are welcome.\n",
      "user": {
        "login": "gavinandresen",
        "id": 331997,
        "node_id": "MDQ6VXNlcjMzMTk5Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gavinandresen",
        "html_url": "https://github.com/gavinandresen",
        "followers_url": "https://api.github.com/users/gavinandresen/followers",
        "following_url": "https://api.github.com/users/gavinandresen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gavinandresen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gavinandresen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
        "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
        "repos_url": "https://api.github.com/users/gavinandresen/repos",
        "events_url": "https://api.github.com/users/gavinandresen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/1995#issuecomment-10260803",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1995"
    },
    {
      "event": "merged",
      "id": 29142326,
      "node_id": "MDExOk1lcmdlZEV2ZW50MjkxNDIzMjY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/29142326",
      "actor": {
        "login": "alexanderkjeldaas",
        "id": 339369,
        "node_id": "MDQ6VXNlcjMzOTM2OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/339369?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alexanderkjeldaas",
        "html_url": "https://github.com/alexanderkjeldaas",
        "followers_url": "https://api.github.com/users/alexanderkjeldaas/followers",
        "following_url": "https://api.github.com/users/alexanderkjeldaas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/alexanderkjeldaas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/alexanderkjeldaas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/alexanderkjeldaas/subscriptions",
        "organizations_url": "https://api.github.com/users/alexanderkjeldaas/orgs",
        "repos_url": "https://api.github.com/users/alexanderkjeldaas/repos",
        "events_url": "https://api.github.com/users/alexanderkjeldaas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/alexanderkjeldaas/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6ca2ea2fa2465c80f60830241d53cbd278870288",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6ca2ea2fa2465c80f60830241d53cbd278870288",
      "created_at": "2012-11-11T03:36:41Z"
    },
    {
      "event": "closed",
      "id": 29142327,
      "node_id": "MDExOkNsb3NlZEV2ZW50MjkxNDIzMjc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/29142327",
      "actor": {
        "login": "alexanderkjeldaas",
        "id": 339369,
        "node_id": "MDQ6VXNlcjMzOTM2OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/339369?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alexanderkjeldaas",
        "html_url": "https://github.com/alexanderkjeldaas",
        "followers_url": "https://api.github.com/users/alexanderkjeldaas/followers",
        "following_url": "https://api.github.com/users/alexanderkjeldaas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/alexanderkjeldaas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/alexanderkjeldaas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/alexanderkjeldaas/subscriptions",
        "organizations_url": "https://api.github.com/users/alexanderkjeldaas/orgs",
        "repos_url": "https://api.github.com/users/alexanderkjeldaas/repos",
        "events_url": "https://api.github.com/users/alexanderkjeldaas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/alexanderkjeldaas/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2012-11-11T03:36:42Z"
    },
    {
      "event": "referenced",
      "id": 1533188316,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE1MzMxODgzMTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1533188316",
      "actor": {
        "login": "HashUnlimited",
        "id": 26601261,
        "node_id": "MDQ6VXNlcjI2NjAxMjYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/26601261?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/HashUnlimited",
        "html_url": "https://github.com/HashUnlimited",
        "followers_url": "https://api.github.com/users/HashUnlimited/followers",
        "following_url": "https://api.github.com/users/HashUnlimited/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/HashUnlimited/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/HashUnlimited/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/HashUnlimited/subscriptions",
        "organizations_url": "https://api.github.com/users/HashUnlimited/orgs",
        "repos_url": "https://api.github.com/users/HashUnlimited/repos",
        "events_url": "https://api.github.com/users/HashUnlimited/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/HashUnlimited/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5e4c1fca71d32281f190c54aabcc2ffd027b8467",
      "commit_url": "https://api.github.com/repos/chaincoin/chaincoin/commits/5e4c1fca71d32281f190c54aabcc2ffd027b8467",
      "created_at": "2018-03-21T13:26:56Z"
    },
    {
      "event": "referenced",
      "id": 4076010041,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQwNzYwMTAwNDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4076010041",
      "actor": {
        "login": "KolbyML",
        "id": 31669092,
        "node_id": "MDQ6VXNlcjMxNjY5MDky",
        "avatar_url": "https://avatars.githubusercontent.com/u/31669092?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/KolbyML",
        "html_url": "https://github.com/KolbyML",
        "followers_url": "https://api.github.com/users/KolbyML/followers",
        "following_url": "https://api.github.com/users/KolbyML/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/KolbyML/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/KolbyML/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/KolbyML/subscriptions",
        "organizations_url": "https://api.github.com/users/KolbyML/orgs",
        "repos_url": "https://api.github.com/users/KolbyML/repos",
        "events_url": "https://api.github.com/users/KolbyML/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/KolbyML/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b09752dc6920cf2734c7da3b42cf75e58b806ff7",
      "commit_url": "https://api.github.com/repos/KolbyML/bitcoin/commits/b09752dc6920cf2734c7da3b42cf75e58b806ff7",
      "created_at": "2020-12-05T20:50:53Z"
    },
    {
      "event": "locked",
      "id": 5271313647,
      "node_id": "LOE_lADOABII584AfdsuzwAAAAE6Mdzv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271313647",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T10:17:21Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": []
}