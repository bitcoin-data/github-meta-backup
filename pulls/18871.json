{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18871",
    "id": 413214089,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDEzMjE0MDg5",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18871",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/18871.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/18871.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18871/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18871/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/fcd4f6155edd3464883ae0f7dac1eeee2ab52ccc",
    "number": 18871,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "rpc: prevent circular deps by extracting into separate include",
    "user": {
      "login": "brakmic",
      "id": 56779,
      "node_id": "MDQ6VXNlcjU2Nzc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brakmic",
      "html_url": "https://github.com/brakmic",
      "followers_url": "https://api.github.com/users/brakmic/followers",
      "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
      "organizations_url": "https://api.github.com/users/brakmic/orgs",
      "repos_url": "https://api.github.com/users/brakmic/repos",
      "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/brakmic/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "### This PR is only a draft. \r\n\r\n## The description below will change over time.\r\n\r\n----\r\n\r\nThis PR removes a potential **circular dependency** that was discovered in travis while building binaries for this PR https://github.com/bitcoin/bitcoin/pull/18827\r\n\r\nThe affected sources/includes in that PR are _httprpc_ and _rpc/server_\r\n\r\nMy first \"solution\" was a _forward declare_ of a single function in _rpc/server.cpp_. However, that merely defeats the linter and could not count as a proper solution.\r\n\r\nAfter some discussion https://github.com/bitcoin/bitcoin/pull/18827#pullrequestreview-404116986 I tried to extract certain classes and function declarations into a new include file, _rpc/interfaces.h_\r\n\r\nNow, the circular dependency in that PR is gone, but as this constitutes a much bigger change than the PR wanted to make, I think it should better get its own PR.\r\n\r\nThe following classes and functions got moved into a new source file pair *rpc/interfaces.cpp* and *rpc/interfaces.h*:\r\n\r\n```cpp\r\nclass RPCTimerBase\r\nclass RPCTimerInterface\r\nclass CRPCCommand\r\nclass CRPCTable\r\n\r\nvoid SetRPCWarmupStatus(const std::string& newStatus);\r\nvoid SetRPCWarmupFinished();\r\n\r\nbool RPCIsInWarmup(std::string *outStatus);\r\nbool IsRPCRunning();\r\n\r\nint64_t GetStartupTime();\r\nint RPCSerializationFlags();\r\n\r\nstd::string JSONRPCExecBatch(const JSONRPCRequest& jreq, const UniValue& vReq);\r\n\r\nvoid RPCSetTimerInterface(RPCTimerInterface *iface);\r\nvoid RPCSetTimerInterfaceIfUnset(RPCTimerInterface *iface);\r\nvoid RPCUnsetTimerInterface(RPCTimerInterface *iface);\r\nvoid RPCRunLater(const std::string& name, std::function<void()> func, int64_t nSeconds);\r\n\r\nbool IsDeprecatedRPCEnabled(const std::string& method);\r\n```\r\n\r\nIn `src/Makefile.am` there is a new library defined: **LIBBITCOIN_SERVER_INTERFACES** that contains the implementation and is linked with `bitcoind` and `bitcoin-qt` (test and bench libraries are linked as well).\r\n\r\nThe changes reduce the size of `rpc/server.cpp` substantially. What remains there are pure server management functionalities:\r\n\r\n```cpp\r\nnamespace RPCServer\r\n{\r\n    void OnStarted(std::function<void ()> slot);\r\n    void OnStopped(std::function<void ()> slot);\r\n}\r\n\r\nvoid StartRPC();\r\nvoid InterruptRPC();\r\nvoid StopRPC();\r\n```\r\n\r\nAnother advantage coming from these changes is that we got rid of forward declarations like `class CRPCTable`, `class CRPCCommand` etc.\r\n\r\n----\r\n\r\n### Possible future changes in class structure and function grouping\r\n\r\nAlthough this PR isn't aiming for more complex engineering changes, like introducing new classes and other structures, there might be some advantage if we'd in future *group* the \"extracted\" functions into new classes. Just like we have `CRPCTable` that carries table-oriented functions, or `CRPCCommand`, we could introduce a new class called `CRPCTimer`:\r\n\r\n```cpp\r\nclass CRPCTimer {\r\npublic:\r\n    /** Set the factory function for timers */\r\n    void RPCSetTimerInterface(RPCTimerInterface *iface);\r\n    /** Set the factory function for timer, but only, if unset */\r\n    void RPCSetTimerInterfaceIfUnset(RPCTimerInterface *iface);\r\n   /** Unset factory function for timers */\r\n   void RPCUnsetTimerInterface(RPCTimerInterface *iface);\r\n};\r\n```\r\n\r\nAnd *server-status* functions could be moved into a new class like this:\r\n\r\n```cpp\r\nclass CRPCServerStatus {\r\npublic:\r\n    void SetRPCWarmupStatus(const std::string& newStatus);\r\n    void SetRPCWarmupFinished();\r\n    bool RPCIsInWarmup(std::string *outStatus);\r\n    bool IsRPCRunning();\r\n    int64_t GetStartupTime();\r\nprivate:\r\n   [...here come mutexes, guards, atomics etc. ]\r\n};\r\n```\r\nThen we could give access to their instances the same way we do with `CRPCtable tableRPC` now.\r\n\r\n```cpp\r\nextern CRPCTimer timerRPC;\r\nextern CRPCServerStatus statusRPC;\r\n```",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2020-05-04T22:16:09Z",
    "updated_at": "2022-02-15T10:30:38Z",
    "closed_at": "2020-05-10T19:59:00Z",
    "mergeable_state": "unknown",
    "merge_commit_sha": "0ecca5b3fce5f3429427219d852f15414a8b834f",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "brakmic:prevent-circular-deps",
      "ref": "prevent-circular-deps",
      "sha": "fcd4f6155edd3464883ae0f7dac1eeee2ab52ccc",
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "88d8b4e182bfc75e8496f7046af7aab93307b9d0",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69818,
        "watchers_count": 69818,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T22:42:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T03:51:27Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18871"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": true,
    "additions": 715,
    "deletions": 647,
    "changed_files": 42,
    "commits": 1,
    "review_comments": 5,
    "comments": 11
  },
  "events": [
    {
      "event": "commented",
      "id": 623738446,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzczODQ0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623738446",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-04T22:20:14Z",
      "updated_at": "2020-05-04T22:20:14Z",
      "author_association": "MEMBER",
      "body": "This is still just defeating the linter, I'm afraid. It assumes that a .h file and a .cpp with the same name form a unit.\r\n\r\nThe question it's trying to answer is \"can you use module X without having module Y or the other way around\", where a module is seen as defined by F.cpp + F.h (if both exist).",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-623738446",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871"
    },
    {
      "event": "commented",
      "id": 623738924,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzczODkyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623738924",
      "actor": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-04T22:21:29Z",
      "updated_at": "2020-05-04T22:21:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "> This is still just defeating the linter, I'm afraid. It assumes that a .h file and a .cpp with the same name form a unit.\r\n> \r\n> The question it's trying to answer is \"can you use module X without having module Y or the other way around\", where a module is seen as defined by F.cpp + F.h (if both exist).\r\n\r\nWhat if I would create rpc/interfaces.cpp that contains all the implementations?",
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-623738924",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871"
    },
    {
      "event": "commented",
      "id": 623739364,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzczOTM2NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623739364",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-04T22:22:48Z",
      "updated_at": "2020-05-04T22:22:48Z",
      "author_association": "MEMBER",
      "body": "> What if I would create rpc/interfaces.cpp that contains all the implementations?\r\n\r\nIf that works, it's a solution indeed.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-623739364",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871"
    },
    {
      "event": "convert_to_draft",
      "id": 3301953140,
      "node_id": "MDE5OkNvbnZlcnRUb0RyYWZ0RXZlbnQzMzAxOTUzMTQw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3301953140",
      "actor": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-04T22:24:16Z"
    },
    {
      "event": "labeled",
      "id": 3301987619,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMzMDE5ODc2MTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3301987619",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-04T22:38:25Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 623779949,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzc3OTk0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623779949",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T00:31:40Z",
      "updated_at": "2020-05-10T04:00:30Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18830 (rpc: add user field to getrpcinfo's json by brakmic)\n* #18827 (rpc: added getrpcwhitelist method by brakmic)\n* #18814 (rpc: Relock wallet only if most recent callback by promag)\n* #18677 (Multiprocess build support by ryanofsky)\n* #18606 (test: checks that bitcoin-cli autocomplete is in sync by pierreN)\n* #18531 (rpc: Assert that RPCArg names are equal to CRPCCommand ones by MarcoFalke)\n* #18452 (qt: Fix shutdown when waitfor* cmds are called from RPC console by hebasto)\n* #18267 (BIP-325: Signet [consensus] by kallewoof)\n* #18130 (Replace uses of boost::trim* with locale-independent alternatives by Empact)\n* #17356 (RPC: Internal named params by luke-jr)\n* #17127 (util: Correct permissions for datadir and wallets subdir by hebasto)\n* #16710 (build: Enable -Wsuggest-override if available by hebasto)\n* #16549 (UI external signer support (e.g. hardware wallet) by Sjors)\n* #16546 (External signer support - Wallet Box edition by Sjors)\n* #16365 (Log RPC parameters (arguments) if -debug=rpcparams by LarryRuane)\n* #15382 (util: add runCommandParseJSON by Sjors)\n* #14810 (qt: Enable tabbing through labels by hebasto)\n* #13686 (ZMQ: Small cleanups in the ZMQ code by domob1812)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-623779949",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871"
    },
    {
      "event": "commented",
      "id": 624237736,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDIzNzczNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624237736",
      "actor": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T18:45:45Z",
      "updated_at": "2020-05-05T19:13:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > What if I would create rpc/interfaces.cpp that contains all the implementations?\r\n> \r\n> If that works, it's a solution indeed.\r\n\r\nI have now extracted `CRPCCommand`, `CRPCTable`, various `RPCTimer*`-structures and `Status/WarmUp` functions from `rpc/server.cpp` into the new `rpc/interfaces.cpp`. \r\n\r\nI'm deliberately using the plural form \"interfaces\" to indicate that these are interfaces that deal with RPC Server, but could be later split up into even smaller units, if needed. \r\n\r\nAlso, the `shutdown.h/*.cpp` got removed to get rid of this linker error:\r\n\r\n```shell\r\n AR       libbitcoin_wallet.a\r\n  CXXLD    bitcoin-wallet\r\n  CXXLD    bitcoind\r\nUndefined symbols for architecture x86_64:\r\n  \"StartShutdown()\", referenced from:\r\n      stop(JSONRPCRequest const&) in libbitcoin_common.a(libbitcoin_common_a-interfaces.o)\r\nld: symbol(s) not found for architecture x86_64\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\r\n```\r\n\r\nI think that moving the shutdown functionality into `rpc/interfaces` is acceptable, because other server-control functions are located there as well, like `IsRPCRunning` and others.\r\n\r\nWhile I was working on `rpc/interfaces` I also got a chance to remove all those forward class declarations `class CRPCTable`, which btw. provoked warnings like these:\r\n\r\n```shell\r\nMaking all in src\r\n  CXX      wallet/libbitcoin_wallet_a-rpcwallet.o\r\n  AR       libbitcoin_wallet.a\r\n  CXXLD    bitcoind\r\n  CXXLD    bitcoin-wallet\r\nld: warning: duplicate symbol '_tableRPC' in:\r\n    libbitcoin_util.a(libbitcoin_util_a-interfaces.o)\r\n    libbitcoin_wallet.a(libbitcoin_wallet_a-rpcdump.o)\r\nld: warning: duplicate symbol '_tableRPC' in:\r\n    libbitcoin_wallet.a(libbitcoin_wallet_a-wallet.o)\r\n    libbitcoin_wallet.a(libbitcoin_wallet_a-rpcwallet.o)\r\nld: warning: duplicate symbol '_tableRPC' in:\r\n    libbitcoin_wallet.a(libbitcoin_wallet_a-rpcwallet.o)\r\n    libbitcoin_util.a(libbitcoin_util_a-interfaces.o)\r\nld: warning: duplicate symbol '_tableRPC' in:\r\n    libbitcoin_zmq.a(libbitcoin_zmq_a-zmqrpc.o)\r\n    libbitcoin_wallet.a(libbitcoin_wallet_a-wallet.o)\r\nld: warning: duplicate symbol '_tableRPC' in:\r\n    libbitcoin_zmq.a(libbitcoin_zmq_a-zmqrpc.o)\r\n    libbitcoin_wallet.a(libbitcoin_wallet_a-rpcdump.o)\r\nld: warning: duplicate symbol '_tableRPC' in:\r\n    libbitcoin_zmq.a(libbitcoin_zmq_a-zmqrpc.o)\r\n[...snip...]\r\n```\r\n\r\n`rpc/interfaces.cpp` is part of `libbitcoin_server_a_SOURCES` in `src/Makefile.am`\r\n\r\nAnd just to make it even more complex for me, I also stumbled upon yet another circular dependency. :)\r\n\r\n```shell\r\nnode/transaction -> validation -> rpc/interfaces -> rpc/util -> node/transaction\r\n```\r\nBut after I replaced `node/transaction.h` with `util/error.h` in `rpc/util.h`, it disappeared.\r\n\r\nI hope that this proposed solution makes more sense. There are other circular dependencies still, but those exist independently from the one I was chasing over the last few days.\r\n\r\n```shell\r\nCircular dependency: chainparamsbase -> util/system -> chainparamsbase\r\nCircular dependency: index/txindex -> validation -> index/txindex\r\nCircular dependency: policy/fees -> txmempool -> policy/fees\r\nCircular dependency: qt/addresstablemodel -> qt/walletmodel -> qt/addresstablemodel\r\nCircular dependency: qt/bitcoingui -> qt/walletframe -> qt/bitcoingui\r\nCircular dependency: qt/recentrequeststablemodel -> qt/walletmodel -> qt/recentrequeststablemodel\r\nCircular dependency: qt/sendcoinsdialog -> qt/walletmodel -> qt/sendcoinsdialog\r\nCircular dependency: qt/transactiontablemodel -> qt/walletmodel -> qt/transactiontablemodel\r\nCircular dependency: txmempool -> validation -> txmempool\r\nCircular dependency: wallet/fees -> wallet/wallet -> wallet/fees\r\nCircular dependency: wallet/wallet -> wallet/walletdb -> wallet/wallet\r\nCircular dependency: policy/fees -> txmempool -> validation -> policy/fees\r\n```",
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-624237736",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871"
    },
    {
      "event": "reviewed",
      "id": 406104191,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MTA0MTkx",
      "url": null,
      "actor": null,
      "commit_id": "0ce2518428d5b307c6f1cc4e874a4243472c3bbb",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#pullrequestreview-406104191",
      "submitted_at": "2020-05-05T19:48:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18871"
    },
    {
      "event": "commented",
      "id": 624283992,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDI4Mzk5Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624283992",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T20:18:55Z",
      "updated_at": "2020-05-05T20:18:55Z",
      "author_association": "MEMBER",
      "body": "Have't looked closely at this but I'd discourage using \"prevent circular deps\" as the main justification for a change. If a change makes sense you should be able to say what advantages it has without reference to the linter, and I don't see other advantages cited in the PR description.\r\n\r\nThe circular dependencies linter often suggests joining files together which make more sense separately and splitting things up which make more sense together. It's also rare that it can't be satisfied by just dropping unnecessary includes and using forward-declared types appropriately.\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-624283992",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871"
    },
    {
      "event": "commented",
      "id": 624286806,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDI4NjgwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624286806",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T20:24:48Z",
      "updated_at": "2020-05-05T20:27:41Z",
      "author_association": "MEMBER",
      "body": "@ryanofsky Circular dependency here is not in the meaning of \"can code be compiled without a cycle in #includes\" but in the meaning of \"can this module be used at a semantic level without this other module\". Forward declares do not solve that, they only hide the ability to detect it.\r\n\r\nThe sort of circular dependencies we're talking about here are a symptom of badly organized code, and improving it is a worthwhile goal in my opinion - but not at all costs. Sometimes it requires introducing costly abstractions like installing callbacks/signals, which just aren't worth it. Often it can be solved by just moving things appropriately so that module dependencies form a DAG.\r\n\r\nI agree that the advantage can be stated without reference to the linter in that case.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-624286806",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871"
    },
    {
      "event": "mentioned",
      "id": 3305881387,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzMwNTg4MTM4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3305881387",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T20:24:48Z"
    },
    {
      "event": "subscribed",
      "id": 3305881389,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzMDU4ODEzODk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3305881389",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T20:24:48Z"
    },
    {
      "event": "commented",
      "id": 624295335,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDI5NTMzNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624295335",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T20:43:13Z",
      "updated_at": "2020-05-05T20:43:13Z",
      "author_association": "MEMBER",
      "body": "> The sort of circular dependencies we're talking about here are a symptom of badly organized code, and improving it is a worthwhile goal in my opinion - but not at all costs.\r\n\r\nI think we agree. I just think if the code is badly organized and the PR improves the organization, the PR description should actually say what was wrong with the organization before and how it's improved. I'm definitely willing to believe there's bad organization here, but I think it'd be good to take a few minutes and spell out what the actual problem is before spending too much time chasing linker and linter errors.\r\n\r\n> Sometimes it requires introducing costly abstractions like installing callbacks/signals, which just aren't worth it. Often it can be solved by just moving things appropriately so that module dependencies form a DAG.\r\n\r\nDefinitely agree. I think if someone is introducing virtual classes and callbacks for no other reason than to satisfy the linter they are doing something wrong. I think there are cases like the fee estimation / mempool circular dependency where having modules call back and forth directly, but still be separate modules is a simple and good solution (https://github.com/bitcoin/bitcoin/pull/15638#discussion_r268718912)",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-624295335",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871"
    },
    {
      "event": "commented",
      "id": 624299092,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDI5OTA5Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624299092",
      "actor": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T20:51:02Z",
      "updated_at": "2020-05-05T20:51:02Z",
      "author_association": "CONTRIBUTOR",
      "body": ">the PR description should actually say what was wrong with the organization before and how it's improved. \r\n\r\nYes, the description will be updated as soon as this PR becomes a *real one*. Currently, it's only a draft and the only proper description is my first (longer) [answer](https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-624237736) to @sipa regarding latest changes. As this is still a moving target and I am right now trying to overcome the linking error with `shutdown.cpp` any description in the header of this PR would sooner or later become obsolete. So, better not changing it every few minutes as this would only annoy people.\r\n\r\n> I think if someone is introducing virtual classes and callbacks for no other reason than to satisfy the linter they are doing something wrong. \r\n\r\nMy goal is to **change nothing**, that is: no *magic* via extra calls or structures to circumvent obstacles whatsoever. As @sipa said, it's about creating modules that could be used independently from each other. Either I will succeed in creating proper binary modules out of existing structures and functions, or I will have to give up.\r\n\r\nSo I hope it'll work.",
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-624299092",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871"
    },
    {
      "event": "mentioned",
      "id": 3305968520,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzMwNTk2ODUyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3305968520",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T20:51:03Z"
    },
    {
      "event": "subscribed",
      "id": 3305968523,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzMDU5Njg1MjM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3305968523",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T20:51:03Z"
    },
    {
      "event": "commented",
      "id": 624318884,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDMxODg4NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624318884",
      "actor": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T21:34:40Z",
      "updated_at": "2020-05-05T22:08:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "@sipa \r\n\r\n`shutdown.h/.cpp` is back. I've removed its functions from `rpc/interfaces.h/.cpp` accordingly. \r\nRPC functional tests are passing. Unit tests as well. Qt code compiles too and its test pass also.\r\nThis change introduced no new circular dependency that'd affect `rpc/interfaces`. \r\n\r\nThat is, they stayed the same as before:\r\n\r\n```shell\r\nCircular dependency: chainparamsbase -> util/system -> chainparamsbase\r\nCircular dependency: index/txindex -> validation -> index/txindex\r\nCircular dependency: policy/fees -> txmempool -> policy/fees\r\nCircular dependency: qt/addresstablemodel -> qt/walletmodel -> qt/addresstablemodel\r\nCircular dependency: qt/bitcoingui -> qt/walletframe -> qt/bitcoingui\r\nCircular dependency: qt/recentrequeststablemodel -> qt/walletmodel -> qt/recentrequeststablemodel\r\nCircular dependency: qt/sendcoinsdialog -> qt/walletmodel -> qt/sendcoinsdialog\r\nCircular dependency: qt/transactiontablemodel -> qt/walletmodel -> qt/transactiontablemodel\r\nCircular dependency: txmempool -> validation -> txmempool\r\nCircular dependency: wallet/fees -> wallet/wallet -> wallet/fees\r\nCircular dependency: wallet/wallet -> wallet/walletdb -> wallet/wallet\r\nCircular dependency: policy/fees -> txmempool -> validation -> policy/fees\r\n```\r\n\r\n**--EDIT:** the only line of code that I had to change was in `void SetRPCWarmupFinished()` because of this complaint from Travis:\r\n\r\n```shell\r\n* Checking consistency between dispatch tables and vRPCConvertParams\r\nCHECK_NONFATAL(condition) should be used instead of assert for RPC code.\r\nsrc/rpc/interfaces.cpp:28:    assert(fRPCInWarmup);\r\n^---- failure generated from test/lint/lint-assertions.sh\r\n```\r\n \r\nSo I replaced `assert` with `CHECK_NONFATAL`.",
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-624318884",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871"
    },
    {
      "event": "mentioned",
      "id": 3306105279,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzMwNjEwNTI3OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3306105279",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T21:34:40Z"
    },
    {
      "event": "subscribed",
      "id": 3306105287,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzMDYxMDUyODc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3306105287",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-05T21:34:40Z"
    },
    {
      "event": "commented",
      "id": 626217801,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjIxNzgwMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626217801",
      "actor": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-09T18:33:17Z",
      "updated_at": "2020-05-09T19:22:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > What if I would create rpc/interfaces.cpp that contains all the implementations?\r\n> \r\n> If that works, it's a solution indeed.\r\n\r\nMeanwhile, I have created a separate shared library that contains the \"extracted\" functions. There are no forward declarations anymore. I've also updated the PR description to reflect all the changes, and when you have time, it'd help me a lot if you could check them.\r\n\r\nAm I on the right track? Did I miss something important? Or is this whole thing simply not worth the effort?\r\n\r\n--EDIT: _And I have no clue why AppVeyor is failing. Travis is fine._",
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#issuecomment-626217801",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18871"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmY2Q0ZjYxNTVlZGQzNDY0ODgzYWUwZjdkYWMxZWVlZTJhYjUyY2Nj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fcd4f6155edd3464883ae0f7dac1eeee2ab52ccc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fcd4f6155edd3464883ae0f7dac1eeee2ab52ccc",
      "tree": {
        "sha": "05b83c76055bc0a8193edcfbb876045c8d5b8b5e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/05b83c76055bc0a8193edcfbb876045c8d5b8b5e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 05b83c76055bc0a8193edcfbb876045c8d5b8b5e\nparent 88d8b4e182bfc75e8496f7046af7aab93307b9d0\nauthor Harris <brakmic@gmail.com> 1589050105 +0200\ncommitter Harris <brakmic@gmail.com> 1589050105 +0200\n\nrpc: prevent circular deps by extracting into separate include\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEED2bWxOeRx//n2QOeJiaFvHjtEfsFAl62+vkACgkQJiaFvHjt\nEfv4aggApYXQCCNlgAcL0P+aqPBag6EEfkvW1XM7AUeUhHFfn8T+xke/WCkyxVqN\nqbH2pfTBByrht+euxBYxcrypH+INm2slGoMg9ZxSrh22PejRISAg2EJU6sGHqAbY\ndPoWKIoAlRh7m+kkMmz6VuMozECBBSyfGruiDFmK6W4fCUItX3b1H2NWp7dfE36H\nFMa14xKP4mhGXp2HqR0Fy4z+FPui2gf0lVdGjzyFAD4x82i1AzBZDYjR3yfoGa3a\nL9lDLkmDxa2WVnpSANGeWkn0yREFrkPmX7/1rAJteCXL9dDELBIMwo/ZGHJj+7Yn\noZotpevGkiN9HlM55lAJysIOw6ocNQ==\n=D9ZD\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/88d8b4e182bfc75e8496f7046af7aab93307b9d0",
          "sha": "88d8b4e182bfc75e8496f7046af7aab93307b9d0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/88d8b4e182bfc75e8496f7046af7aab93307b9d0"
        }
      ],
      "message": "rpc: prevent circular deps by extracting into separate include",
      "committer": {
        "name": "Harris",
        "email": "brakmic@gmail.com",
        "date": "2020-05-09T18:48:25Z"
      },
      "author": {
        "name": "Harris",
        "email": "brakmic@gmail.com",
        "date": "2020-05-09T18:48:25Z"
      },
      "sha": "fcd4f6155edd3464883ae0f7dac1eeee2ab52ccc"
    },
    {
      "event": "closed",
      "id": 3320643786,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzMyMDY0Mzc4Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3320643786",
      "actor": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-10T19:59:00Z"
    },
    {
      "event": "locked",
      "id": 6073784768,
      "node_id": "LOE_lADOABII584kfX6kzwAAAAFqBpnA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6073784768",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T10:30:38Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420364414",
      "pull_request_review_id": 406104191,
      "id": 420364414,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM2NDQxNA==",
      "diff_hunk": "@@ -0,0 +1,175 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_INTERFACES_H\n+#define BITCOIN_RPC_INTERFACES_H\n+\n+#include <atomic>\n+#include <functional>\n+#include <list>\n+#include <map>\n+#include <string>\n+#include <vector>\n+\n+#include <rpc/request.h>\n+#include <univalue.h>\n+#include <sync.h>\n+\n+static const unsigned int DEFAULT_RPC_SERIALIZE_VERSION = 1;\n+\n+static std::atomic<bool> fRequestShutdown(false);",
      "path": "src/rpc/interfaces.h",
      "position": null,
      "original_position": 21,
      "commit_id": "fcd4f6155edd3464883ae0f7dac1eeee2ab52ccc",
      "original_commit_id": "0ce2518428d5b307c6f1cc4e874a4243472c3bbb",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Making this static and in a .h file means that every compilation unit (cpp file) that includes it will get its own copy of the variable. If you only want a single copy, it must be declared in a .cpp file, and defined in the corresponding .h file.\r\n\r\nI also think it's very strange that shutdown is now merged into an RPC-specific module. Does nothing outside of RPC need it?",
      "created_at": "2020-05-05T19:48:17Z",
      "updated_at": "2020-05-09T18:48:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#discussion_r420364414",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420364414"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18871"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420366965",
      "pull_request_review_id": 406107300,
      "id": 420366965,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM2Njk2NQ==",
      "diff_hunk": "@@ -0,0 +1,175 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_INTERFACES_H\n+#define BITCOIN_RPC_INTERFACES_H\n+\n+#include <atomic>\n+#include <functional>\n+#include <list>\n+#include <map>\n+#include <string>\n+#include <vector>\n+\n+#include <rpc/request.h>\n+#include <univalue.h>\n+#include <sync.h>\n+\n+static const unsigned int DEFAULT_RPC_SERIALIZE_VERSION = 1;\n+\n+static std::atomic<bool> fRequestShutdown(false);",
      "path": "src/rpc/interfaces.h",
      "position": null,
      "original_position": 21,
      "commit_id": "fcd4f6155edd3464883ae0f7dac1eeee2ab52ccc",
      "original_commit_id": "0ce2518428d5b307c6f1cc4e874a4243472c3bbb",
      "in_reply_to_id": 420364414,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Making this static and in a .h file means that every compilation unit (cpp file) that includes it will get its own copy of the variable. If you only want a single copy, it must be declared in a .cpp file, and defined in the corresponding .h file.\r\n> \r\n\r\nThanks for the hint. Will correct it now.\r\n\r\n> I also think it's very strange that shutdown is now merged into an RPC-specific module. Does nothing outside of RPC need it?\r\n\r\nI never wanted to remove shutdown.h/cpp, but as I couldn't pass the linker error I spoke above, the only way for me was to include shutdown's three methods into rpc/interface.\r\n\r\nI haven't encountered any problems with shutdown removed. Functional RPC-tests are passing.  \r\n\r\nBut I'll gladly revert it, if there is a way to avoid the linker error. ",
      "created_at": "2020-05-05T19:53:00Z",
      "updated_at": "2020-05-09T18:48:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#discussion_r420366965",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420366965"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18871"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420378587",
      "pull_request_review_id": 406121739,
      "id": 420378587,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM3ODU4Nw==",
      "diff_hunk": "@@ -0,0 +1,175 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_INTERFACES_H\n+#define BITCOIN_RPC_INTERFACES_H\n+\n+#include <atomic>\n+#include <functional>\n+#include <list>\n+#include <map>\n+#include <string>\n+#include <vector>\n+\n+#include <rpc/request.h>\n+#include <univalue.h>\n+#include <sync.h>\n+\n+static const unsigned int DEFAULT_RPC_SERIALIZE_VERSION = 1;\n+\n+static std::atomic<bool> fRequestShutdown(false);",
      "path": "src/rpc/interfaces.h",
      "position": null,
      "original_position": 21,
      "commit_id": "fcd4f6155edd3464883ae0f7dac1eeee2ab52ccc",
      "original_commit_id": "0ce2518428d5b307c6f1cc4e874a4243472c3bbb",
      "in_reply_to_id": 420364414,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> it must be declared in a .cpp file, and defined in the corresponding .h file.\r\n> \r\n\r\nI must admit that I don't know how to do this. Especially with const variables and atomics.\r\n",
      "created_at": "2020-05-05T20:14:45Z",
      "updated_at": "2020-05-09T18:48:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#discussion_r420378587",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420378587"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18871"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420381223",
      "pull_request_review_id": 406125031,
      "id": 420381223,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM4MTIyMw==",
      "diff_hunk": "@@ -0,0 +1,175 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_INTERFACES_H\n+#define BITCOIN_RPC_INTERFACES_H\n+\n+#include <atomic>\n+#include <functional>\n+#include <list>\n+#include <map>\n+#include <string>\n+#include <vector>\n+\n+#include <rpc/request.h>\n+#include <univalue.h>\n+#include <sync.h>\n+\n+static const unsigned int DEFAULT_RPC_SERIALIZE_VERSION = 1;\n+\n+static std::atomic<bool> fRequestShutdown(false);",
      "path": "src/rpc/interfaces.h",
      "position": null,
      "original_position": 21,
      "commit_id": "fcd4f6155edd3464883ae0f7dac1eeee2ab52ccc",
      "original_commit_id": "0ce2518428d5b307c6f1cc4e874a4243472c3bbb",
      "in_reply_to_id": 420364414,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm being stupid sorry - it's a static variable that's local to shutdown.cpp. It can't and doesn't need to go in shutdown.h.\r\n\r\nI think you shouldn't need to touch this at all. It's perfectly fine as-as in shutdown.cpp. It also has no dependencies, so touching it shouldn't be needed for the purpose of breaking circular dependencies.\r\n\r\nThe issue you're seeing while linking must have to do with the organization into libraries and possibly the order in which those are passed to the linker. That should be solvable by potentially moving things between libraries, but it's hard to say what the exact issue is without tinkering with it myself.",
      "created_at": "2020-05-05T20:19:42Z",
      "updated_at": "2020-05-09T18:48:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#discussion_r420381223",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420381223"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18871"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420382513",
      "pull_request_review_id": 406126660,
      "id": 420382513,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM4MjUxMw==",
      "diff_hunk": "@@ -0,0 +1,175 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_INTERFACES_H\n+#define BITCOIN_RPC_INTERFACES_H\n+\n+#include <atomic>\n+#include <functional>\n+#include <list>\n+#include <map>\n+#include <string>\n+#include <vector>\n+\n+#include <rpc/request.h>\n+#include <univalue.h>\n+#include <sync.h>\n+\n+static const unsigned int DEFAULT_RPC_SERIALIZE_VERSION = 1;\n+\n+static std::atomic<bool> fRequestShutdown(false);",
      "path": "src/rpc/interfaces.h",
      "position": null,
      "original_position": 21,
      "commit_id": "fcd4f6155edd3464883ae0f7dac1eeee2ab52ccc",
      "original_commit_id": "0ce2518428d5b307c6f1cc4e874a4243472c3bbb",
      "in_reply_to_id": 420364414,
      "user": {
        "login": "brakmic",
        "id": 56779,
        "node_id": "MDQ6VXNlcjU2Nzc5",
        "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brakmic",
        "html_url": "https://github.com/brakmic",
        "followers_url": "https://api.github.com/users/brakmic/followers",
        "following_url": "https://api.github.com/users/brakmic/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brakmic/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brakmic/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
        "organizations_url": "https://api.github.com/users/brakmic/orgs",
        "repos_url": "https://api.github.com/users/brakmic/repos",
        "events_url": "https://api.github.com/users/brakmic/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brakmic/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> I'm being stupid sorry - it's a static variable that's local to shutdown.cpp. It can't and doesn't need to go in shutdown.h.\r\n\r\nThanks for the clarification! I was already questioning life and existence. :)\r\n\r\n> \r\n> I think you shouldn't need to touch this at all. It's perfectly fine as-as in shutdown.cpp. It also has no dependencies, so touching it shouldn't be needed for the purpose of breaking circular dependencies.\r\n> \r\n> The issue you're seeing while linking must have to do with the organization into libraries and possibly the order in which those are passed to the linker. That should be solvable by potentially moving things between libraries, but it's hard to say what the exact issue is without tinkering with it myself.\r\n\r\nOk, then I will bring back shutdown.h/cpp and then try to find a way.",
      "created_at": "2020-05-05T20:22:15Z",
      "updated_at": "2020-05-09T18:48:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18871#discussion_r420382513",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420382513"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18871"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    }
  ]
}