{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935",
    "id": 180753498,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTgwNzUzNDk4",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12935",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/12935.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/12935.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12935",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12935/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
    "number": 12935,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Add ProcessOrphans (move-only)",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Moving the orphan processing into a new function makes it possible to call it from other places. E.g. `sendrawtransaction` or when a transaction is received via a `NetMsgType` different from `TX`.\r\n\r\nAlso, add test coverage for the function in our ~unit~ functional test framework.",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2018-04-10T23:23:35Z",
    "updated_at": "2021-09-08T11:53:57Z",
    "closed_at": "2018-05-10T20:07:37Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merge_commit_sha": "31d50095b4d8e884661c20c41ca18b1e5031a1ad",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "MarcoFalke:Mf1804-ProcessOrphans",
      "ref": "Mf1804-ProcessOrphans",
      "sha": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 40046254,
        "node_id": "MDEwOlJlcG9zaXRvcnk0MDA0NjI1NA==",
        "name": "b-c",
        "full_name": "MarcoFalke/b-c",
        "owner": {
          "login": "MarcoFalke",
          "id": 6399679,
          "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
          "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/MarcoFalke",
          "html_url": "https://github.com/MarcoFalke",
          "followers_url": "https://api.github.com/users/MarcoFalke/followers",
          "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
          "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
          "repos_url": "https://api.github.com/users/MarcoFalke/repos",
          "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/MarcoFalke/b-c",
        "fork": true,
        "url": "https://api.github.com/repos/MarcoFalke/b-c",
        "archive_url": "https://api.github.com/repos/MarcoFalke/b-c/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/MarcoFalke/b-c/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/MarcoFalke/b-c/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/MarcoFalke/b-c/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/MarcoFalke/b-c/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/MarcoFalke/b-c/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/MarcoFalke/b-c/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/MarcoFalke/b-c/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/MarcoFalke/b-c/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/MarcoFalke/b-c/contributors",
        "deployments_url": "https://api.github.com/repos/MarcoFalke/b-c/deployments",
        "downloads_url": "https://api.github.com/repos/MarcoFalke/b-c/downloads",
        "events_url": "https://api.github.com/repos/MarcoFalke/b-c/events",
        "forks_url": "https://api.github.com/repos/MarcoFalke/b-c/forks",
        "git_commits_url": "https://api.github.com/repos/MarcoFalke/b-c/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/MarcoFalke/b-c/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/MarcoFalke/b-c/git/tags%7B/sha%7D",
        "git_url": "git://github.com/MarcoFalke/b-c.git",
        "issue_comment_url": "https://api.github.com/repos/MarcoFalke/b-c/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/MarcoFalke/b-c/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/MarcoFalke/b-c/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/MarcoFalke/b-c/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/MarcoFalke/b-c/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/MarcoFalke/b-c/languages",
        "merges_url": "https://api.github.com/repos/MarcoFalke/b-c/merges",
        "milestones_url": "https://api.github.com/repos/MarcoFalke/b-c/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/MarcoFalke/b-c/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/MarcoFalke/b-c/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/MarcoFalke/b-c/releases%7B/id%7D",
        "ssh_url": "git@github.com:MarcoFalke/b-c.git",
        "stargazers_url": "https://api.github.com/repos/MarcoFalke/b-c/stargazers",
        "statuses_url": "https://api.github.com/repos/MarcoFalke/b-c/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/MarcoFalke/b-c/subscribers",
        "subscription_url": "https://api.github.com/repos/MarcoFalke/b-c/subscription",
        "tags_url": "https://api.github.com/repos/MarcoFalke/b-c/tags",
        "teams_url": "https://api.github.com/repos/MarcoFalke/b-c/teams",
        "trees_url": "https://api.github.com/repos/MarcoFalke/b-c/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/MarcoFalke/b-c.git",
        "hooks_url": "https://api.github.com/repos/MarcoFalke/b-c/hooks",
        "svn_url": "https://github.com/MarcoFalke/b-c",
        "homepage": "",
        "language": "C++",
        "forks_count": 12,
        "stargazers_count": 25,
        "watchers_count": 25,
        "size": 205775,
        "default_branch": "master",
        "open_issues_count": 25,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T19:05:17Z",
        "created_at": "2015-08-01T12:42:47Z",
        "updated_at": "2023-05-28T20:12:34Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "07825088f9cfd8abece774b9d978c36ab90ce3d1",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69818,
        "watchers_count": 69818,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T22:42:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T00:30:39Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 759,
    "deletions": 617,
    "changed_files": 21,
    "commits": 12,
    "review_comments": 12,
    "comments": 2
  },
  "events": [
    {
      "event": "labeled",
      "id": 1567455996,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE1Njc0NTU5OTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1567455996",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-11T00:42:27Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "reviewed",
      "id": 111105663,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTExMTA1NjYz",
      "url": null,
      "actor": null,
      "commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#pullrequestreview-111105663",
      "submitted_at": "2018-04-11T06:55:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
    },
    {
      "event": "commented",
      "id": 380347558,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDM0NzU1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380347558",
      "actor": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-11T06:57:19Z",
      "updated_at": "2018-04-11T06:57:19Z",
      "author_association": "MEMBER",
      "body": "Concept ACK, both for the addition of testing and due to the fact that ProcessMessage is >1300 lines at the moment. Would be great if other applications of the method were ready, to help inform its interface.",
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#issuecomment-380347558",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12935"
    },
    {
      "event": "commented",
      "id": 380521404,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDUyMTQwNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380521404",
      "actor": {
        "login": "skeees",
        "id": 195769,
        "node_id": "MDQ6VXNlcjE5NTc2OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/195769?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/skeees",
        "html_url": "https://github.com/skeees",
        "followers_url": "https://api.github.com/users/skeees/followers",
        "following_url": "https://api.github.com/users/skeees/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/skeees/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/skeees/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/skeees/subscriptions",
        "organizations_url": "https://api.github.com/users/skeees/orgs",
        "repos_url": "https://api.github.com/users/skeees/repos",
        "events_url": "https://api.github.com/users/skeees/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/skeees/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-11T16:51:24Z",
      "updated_at": "2018-04-11T16:51:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "This is a move-only commit - so maybe not the right place - but it might be nice to separate the misbehaving peer punishment logic from the re-attempting to accept orphans to the mempool logic - good first step though",
      "user": {
        "login": "skeees",
        "id": 195769,
        "node_id": "MDQ6VXNlcjE5NTc2OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/195769?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/skeees",
        "html_url": "https://github.com/skeees",
        "followers_url": "https://api.github.com/users/skeees/followers",
        "following_url": "https://api.github.com/users/skeees/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/skeees/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/skeees/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/skeees/subscriptions",
        "organizations_url": "https://api.github.com/users/skeees/orgs",
        "repos_url": "https://api.github.com/users/skeees/repos",
        "events_url": "https://api.github.com/users/skeees/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/skeees/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#issuecomment-380521404",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12935"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxNmU0YzRiZWQ2NmU0MzZiZTYwNmI5Y2ZjNmZhOTgyODE5ZjAwYjg2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/16e4c4bed66e436be606b9cfc6fa982819f00b86",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/16e4c4bed66e436be606b9cfc6fa982819f00b86",
      "tree": {
        "sha": "e669fe3d7524eb0e570592542a52f6f0a1d5005a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e669fe3d7524eb0e570592542a52f6f0a1d5005a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f2a39946fd42535038e0143cbd289d3070b9f07",
          "sha": "5f2a39946fd42535038e0143cbd289d3070b9f07",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5f2a39946fd42535038e0143cbd289d3070b9f07"
        }
      ],
      "message": "Clarify validationinterface notification ordering",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-13T18:54:56Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-09-12T17:29:08Z"
      },
      "sha": "16e4c4bed66e436be606b9cfc6fa982819f00b86"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZjE0OGM3ZTBmMTI4NDc2MzI0YTgyYWUwZjllNTk1NjdkNjAzZWJh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f148c7e0f128476324a82ae0f9e59567d603eba",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5f148c7e0f128476324a82ae0f9e59567d603eba",
      "tree": {
        "sha": "ceaa11df5c387a2139bba0f0a8f26f235463b9e5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ceaa11df5c387a2139bba0f0a8f26f235463b9e5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/16e4c4bed66e436be606b9cfc6fa982819f00b86",
          "sha": "16e4c4bed66e436be606b9cfc6fa982819f00b86",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/16e4c4bed66e436be606b9cfc6fa982819f00b86"
        }
      ],
      "message": "Add a parallel validation interface for mempool events.\n\nBecause many listeners (eg wallet) will want both types of events\nto be well-ordered, they are parallel and connected on the backend.\nHowever, they are exposed separately to clients to separate the\nlogic (and because, hopefully, eventually, they can be exposed to\nexternal clients of Bitcoin Core via libconsensus or similar).",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-13T18:54:56Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-03-27T20:27:42Z"
      },
      "sha": "5f148c7e0f128476324a82ae0f9e59567d603eba"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzphMDY3ZjNjZDllYTViNDMxYWNjMmRmNGJlY2FjMGVmYTZiNjIwMjM1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a067f3cd9ea5b431acc2df4becac0efa6b620235",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a067f3cd9ea5b431acc2df4becac0efa6b620235",
      "tree": {
        "sha": "5c21c75504096a7dcccd448cbbe97242a24f9511",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5c21c75504096a7dcccd448cbbe97242a24f9511"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f148c7e0f128476324a82ae0f9e59567d603eba",
          "sha": "5f148c7e0f128476324a82ae0f9e59567d603eba",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5f148c7e0f128476324a82ae0f9e59567d603eba"
        }
      ],
      "message": "Pass MemPoolRemovalReason out through TransactionRemovedFromMempool",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-13T18:54:56Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-09-12T22:52:59Z"
      },
      "sha": "a067f3cd9ea5b431acc2df4becac0efa6b620235"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3ZjcyZDBhYTU3OTlhYzE0NDA2MzY5ZGEwZDZhMmMyNzQwN2VkMTc4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7f72d0aa5799ac14406369da0d6a2c27407ed178",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7f72d0aa5799ac14406369da0d6a2c27407ed178",
      "tree": {
        "sha": "b707fe02f17220db89182014ebcf431c459d3638",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b707fe02f17220db89182014ebcf431c459d3638"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a067f3cd9ea5b431acc2df4becac0efa6b620235",
          "sha": "a067f3cd9ea5b431acc2df4becac0efa6b620235",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a067f3cd9ea5b431acc2df4becac0efa6b620235"
        }
      ],
      "message": "Split removeRecursive into calculate/remove steps",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-13T18:54:56Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-09-13T17:38:57Z"
      },
      "sha": "7f72d0aa5799ac14406369da0d6a2c27407ed178"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmZjkzNmFlZWE1NjlhMmFlNTZhM2Q5MDk2YTQ4NmZiZDk0YjZkZGU3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ff936aeea569a2ae56a3d9096a486fbd94b6dde7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ff936aeea569a2ae56a3d9096a486fbd94b6dde7",
      "tree": {
        "sha": "b269d0129f7f86beca438d8767ab7b2ddf50c9e7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b269d0129f7f86beca438d8767ab7b2ddf50c9e7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7f72d0aa5799ac14406369da0d6a2c27407ed178",
          "sha": "7f72d0aa5799ac14406369da0d6a2c27407ed178",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7f72d0aa5799ac14406369da0d6a2c27407ed178"
        }
      ],
      "message": "Track the set of transactions removed/conflicted in removeForBlock",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-13T18:54:56Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-09-13T17:41:12Z"
      },
      "sha": "ff936aeea569a2ae56a3d9096a486fbd94b6dde7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjYTYxNjYxY2IwODc3ZDZlZWNmYjQwMzQyMjk0YWQ1ZmIyYzcwYzll",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ca61661cb0877d6eecfb40342294ad5fb2c70c9e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ca61661cb0877d6eecfb40342294ad5fb2c70c9e",
      "tree": {
        "sha": "2e9c38e7bcfa62f4c5c5aab25e2fa56e3f41f0d6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2e9c38e7bcfa62f4c5c5aab25e2fa56e3f41f0d6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ff936aeea569a2ae56a3d9096a486fbd94b6dde7",
          "sha": "ff936aeea569a2ae56a3d9096a486fbd94b6dde7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ff936aeea569a2ae56a3d9096a486fbd94b6dde7"
        }
      ],
      "message": "BlockConnected(vtxConflicted) -> New MempoolInterface callback\n\nThis removes the whole ConnectTrace object, which may make it\nslightly harder to remove the unbounded-memory-during-reorg bug\nby throwing blocks out of memory and re-loading them from disk\nlater. Comments are added to validationinterface to note where\nthis should likely happen instead of ConnectTrace.",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-13T18:54:56Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-09-13T18:23:15Z"
      },
      "sha": "ca61661cb0877d6eecfb40342294ad5fb2c70c9e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5NTBlY2U1M2E4OTdlNTczOThhMWYwYTBlYzdkMzZmN2U1M2YzYTE2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/950ece53a897e57398a1f0a0ec7d36f7e53f3a16",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/950ece53a897e57398a1f0a0ec7d36f7e53f3a16",
      "tree": {
        "sha": "297531c3ea5ef92ff95067d1babda414147910f7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/297531c3ea5ef92ff95067d1babda414147910f7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ca61661cb0877d6eecfb40342294ad5fb2c70c9e",
          "sha": "ca61661cb0877d6eecfb40342294ad5fb2c70c9e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ca61661cb0877d6eecfb40342294ad5fb2c70c9e"
        }
      ],
      "message": "Remove boost::signals from txmempool, call GetMainSignals() directly",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-13T18:54:56Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-05T17:23:36Z"
      },
      "sha": "950ece53a897e57398a1f0a0ec7d36f7e53f3a16"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1N2E1NmRmZTM2YThmMTBjYzc0ZDE4YTNiMWM5NDMxMmZlMTc2NWVl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/57a56dfe36a8f10cc74d18a3b1c94312fe1765ee",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/57a56dfe36a8f10cc74d18a3b1c94312fe1765ee",
      "tree": {
        "sha": "9850aaab9f514452135510df136ebf04798f71a2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9850aaab9f514452135510df136ebf04798f71a2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/950ece53a897e57398a1f0a0ec7d36f7e53f3a16",
          "sha": "950ece53a897e57398a1f0a0ec7d36f7e53f3a16",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/950ece53a897e57398a1f0a0ec7d36f7e53f3a16"
        }
      ],
      "message": "Remove useless scope in AcceptToMemoryPoolWorker",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-13T18:56:12Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-13T18:56:12Z"
      },
      "sha": "57a56dfe36a8f10cc74d18a3b1c94312fe1765ee"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2YjRlMmE3OWU0MTQwMWM2YTM5ZjcwMzliNDY5ZDA0ZTEzZmQzYzgz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6b4e2a79e41401c6a39f7039b469d04e13fd3c83",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6b4e2a79e41401c6a39f7039b469d04e13fd3c83",
      "tree": {
        "sha": "73df1cfe7fd797ddea9a2212a08cad2071bcbdcc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/73df1cfe7fd797ddea9a2212a08cad2071bcbdcc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/57a56dfe36a8f10cc74d18a3b1c94312fe1765ee",
          "sha": "57a56dfe36a8f10cc74d18a3b1c94312fe1765ee",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/57a56dfe36a8f10cc74d18a3b1c94312fe1765ee"
        }
      ],
      "message": "Add txn_replaced to Added callback, remove lReplaced ATMP arg",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-13T18:57:13Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-05T17:28:40Z"
      },
      "sha": "6b4e2a79e41401c6a39f7039b469d04e13fd3c83"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkYjE1NmVhMzI3NTc3ZmIxNDU1MDQ5ZWZlMDQ3ZTU3MjJhMThiMWFi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/db156ea327577fb1455049efe047e5722a18b1ab",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/db156ea327577fb1455049efe047e5722a18b1ab",
      "tree": {
        "sha": "9e1b7d2dafc643e13a3ef96f09ae1c378df25f4d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9e1b7d2dafc643e13a3ef96f09ae1c378df25f4d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6b4e2a79e41401c6a39f7039b469d04e13fd3c83",
          "sha": "6b4e2a79e41401c6a39f7039b469d04e13fd3c83",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6b4e2a79e41401c6a39f7039b469d04e13fd3c83"
        }
      ],
      "message": "Pass new block height through MempoolUpdatedForBlock",
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2018-04-13T18:57:14Z"
      },
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-09-14T01:07:06Z"
      },
      "sha": "db156ea327577fb1455049efe047e5722a18b1ab"
    },
    {
      "event": "reviewed",
      "id": 112109784,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTEyMTA5Nzg0",
      "url": null,
      "actor": null,
      "commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "utACK aaaa4569b1ef49ce6f031325f03d171de55d8419 for both test code and moveonly refactoring code (I didn't have any comments on the moveonly code).",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#pullrequestreview-112109784",
      "submitted_at": "2018-04-13T19:26:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1574600838,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTU3NDYwMDgzOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1574600838",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-14T16:00:25Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1574602091,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTU3NDYwMjA5MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1574602091",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-14T16:04:28Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1577191467,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTU3NzE5MTQ2Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1577191467",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-16T20:11:16Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiY2RlZGJkOWQ2Yjc5NjMwNTc3NTlhZGUwMTdkOGFiMzk3NTMyZjY1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bcdedbd9d6b7963057759ade017d8ab397532f65",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bcdedbd9d6b7963057759ade017d8ab397532f65",
      "tree": {
        "sha": "4ff502206def711114989c00cbae11b6435fa40a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4ff502206def711114989c00cbae11b6435fa40a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/db156ea327577fb1455049efe047e5722a18b1ab",
          "sha": "db156ea327577fb1455049efe047e5722a18b1ab",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/db156ea327577fb1455049efe047e5722a18b1ab"
        }
      ],
      "message": "qa: Add test for orphan handling",
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-04-16T20:28:06Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-04-10T22:05:53Z"
      },
      "sha": "bcdedbd9d6b7963057759ade017d8ab397532f65"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzowYzJiYzU4N2Y2MTA3ZmNjNTQ2YmEyYjExNjA1ZmIwODI4YzdmY2Uz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "tree": {
        "sha": "7bb637d05486644a9f9f37113f9bf80be9df8cfe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7bb637d05486644a9f9f37113f9bf80be9df8cfe"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bcdedbd9d6b7963057759ade017d8ab397532f65",
          "sha": "bcdedbd9d6b7963057759ade017d8ab397532f65",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bcdedbd9d6b7963057759ade017d8ab397532f65"
        }
      ],
      "message": "move-only: ProcessOrphans",
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-04-16T20:31:04Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-04-07T14:31:08Z"
      },
      "sha": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 1577233980,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MTU3NzIzMzk4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1577233980",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-16T20:32:11Z"
    },
    {
      "event": "closed",
      "id": 1620592940,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTYyMDU5Mjk0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1620592940",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-05-10T20:07:37Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 1620593008,
      "node_id": "MDE5OkhlYWRSZWZEZWxldGVkRXZlbnQxNjIwNTkzMDA4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1620593008",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-05-10T20:07:40Z"
    },
    {
      "event": "locked",
      "id": 5271801434,
      "node_id": "LOE_lADOABII584Sqd8FzwAAAAE6OU5a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271801434",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T11:53:57Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180651168",
      "pull_request_review_id": 111105663,
      "id": 180651168,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MDY1MTE2OA==",
      "diff_hunk": "@@ -2179,9 +2250,6 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n             AcceptToMemoryPool(mempool, state, ptx, &fMissingInputs, &lRemovedTxn, false /* bypass_limits */, 0 /* nAbsurdFee */)) {",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": null,
      "user": {
        "login": "Empact",
        "id": 5470,
        "node_id": "MDQ6VXNlcjU0NzA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Empact",
        "html_url": "https://github.com/Empact",
        "followers_url": "https://api.github.com/users/Empact/followers",
        "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
        "organizations_url": "https://api.github.com/users/Empact/orgs",
        "repos_url": "https://api.github.com/users/Empact/repos",
        "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Empact/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Looks like `lRemovedTxn` still needs to be cleared in this method, unless moving it wholly into `ProcessOrphans` is appropriate.",
      "created_at": "2018-04-11T06:55:39Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r180651168",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180651168"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2250,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180830562",
      "pull_request_review_id": 111322303,
      "id": 180830562,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MDgzMDU2Mg==",
      "diff_hunk": "@@ -2179,9 +2250,6 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n             AcceptToMemoryPool(mempool, state, ptx, &fMissingInputs, &lRemovedTxn, false /* bypass_limits */, 0 /* nAbsurdFee */)) {",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": 180651168,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sorry, that indeed looks ugly right now. I will rebase this on #11775, which removes `lRemovedTxn` in whole.",
      "created_at": "2018-04-11T17:11:27Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r180830562",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/180830562"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2250,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181469335",
      "pull_request_review_id": 112109784,
      "id": 181469335,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTQ2OTMzNQ==",
      "diff_hunk": "@@ -6,24 +6,45 @@\n \n In this test we connect to one node over p2p, and test tx requests.\"\"\"\n from test_framework.blocktools import create_block, create_coinbase, create_transaction\n-from test_framework.messages import COIN\n-from test_framework.mininode import network_thread_start, P2PDataStore\n+from test_framework.messages import (\n+    COIN,\n+    COutPoint,\n+    CTransaction,\n+    CTxIn,\n+    CTxOut,\n+)\n+from test_framework.mininode import network_thread_start, P2PDataStore, network_thread_join\n from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n \n-class InvalidTxRequestTest(BitcoinTestFramework):\n \n+class InvalidTxRequestTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n         self.setup_clean_chain = True\n-        self.extra_args = [[\"-whitelist=127.0.0.1\"]]\n+\n+    def reconnect_p2p(self, additional_conn=False):\n+        \"\"\"Add a P2P connection to the node.\n+\n+        The node gets disconnected several times in this test. This helper\n+        method reconnects the p2p and restarts the network thread.\"\"\"\n+\n+        network_thread_join()\n+        self.nodes[0].disconnect_p2ps()",
      "path": "test/functional/p2p_invalid_tx.py",
      "position": null,
      "original_position": 34,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Seems like it woud be more robust (prevent hangs if the node wasn't disconnected) to call `network_thread_join` after `disconnect_p2ps`. This is the pattern used most other places (except `feature_block` for some reason). This would also make shutdown order the reverse of initialization order, which is a good pattern in general.",
      "created_at": "2018-04-13T18:13:30Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r181469335",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181469335"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181470108",
      "pull_request_review_id": 112109784,
      "id": 181470108,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTQ3MDEwOA==",
      "diff_hunk": "@@ -6,24 +6,45 @@\n \n In this test we connect to one node over p2p, and test tx requests.\"\"\"\n from test_framework.blocktools import create_block, create_coinbase, create_transaction\n-from test_framework.messages import COIN\n-from test_framework.mininode import network_thread_start, P2PDataStore\n+from test_framework.messages import (\n+    COIN,\n+    COutPoint,\n+    CTransaction,\n+    CTxIn,\n+    CTxOut,\n+)\n+from test_framework.mininode import network_thread_start, P2PDataStore, network_thread_join\n from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n \n-class InvalidTxRequestTest(BitcoinTestFramework):\n \n+class InvalidTxRequestTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n         self.setup_clean_chain = True\n-        self.extra_args = [[\"-whitelist=127.0.0.1\"]]\n+\n+    def reconnect_p2p(self, additional_conn=False):\n+        \"\"\"Add a P2P connection to the node.\n+\n+        The node gets disconnected several times in this test. This helper\n+        method reconnects the p2p and restarts the network thread.\"\"\"\n+\n+        network_thread_join()\n+        self.nodes[0].disconnect_p2ps()\n+        self.nodes[0].add_p2p_connection(P2PDataStore())\n+        if additional_conn:\n+            self.nodes[0].add_p2p_connection(P2PDataStore())\n+        network_thread_start()\n+        self.nodes[0].p2p.wait_for_verack()\n \n     def run_test(self):\n         # Add p2p connection to node0\n         node = self.nodes[0]  # convenience reference to the node\n-        node.add_p2p_connection(P2PDataStore())\n-\n+        # reconnect_p2p() expects the network thread to be running\n         network_thread_start()",
      "path": "test/functional/p2p_invalid_tx.py",
      "position": null,
      "original_position": 47,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It seems not great to immediately start, stop, and restart the network thread. Could just split up the reconnect method up into connect / disconnect methods to avoid this.",
      "created_at": "2018-04-13T18:16:30Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r181470108",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181470108"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181470581",
      "pull_request_review_id": 112109784,
      "id": 181470581,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTQ3MDU4MQ==",
      "diff_hunk": "@@ -6,24 +6,45 @@\n \n In this test we connect to one node over p2p, and test tx requests.\"\"\"\n from test_framework.blocktools import create_block, create_coinbase, create_transaction\n-from test_framework.messages import COIN\n-from test_framework.mininode import network_thread_start, P2PDataStore\n+from test_framework.messages import (\n+    COIN,\n+    COutPoint,\n+    CTransaction,\n+    CTxIn,\n+    CTxOut,\n+)\n+from test_framework.mininode import network_thread_start, P2PDataStore, network_thread_join\n from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n \n-class InvalidTxRequestTest(BitcoinTestFramework):\n \n+class InvalidTxRequestTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n         self.setup_clean_chain = True\n-        self.extra_args = [[\"-whitelist=127.0.0.1\"]]\n+\n+    def reconnect_p2p(self, additional_conn=False):\n+        \"\"\"Add a P2P connection to the node.\n+\n+        The node gets disconnected several times in this test. This helper\n+        method reconnects the p2p and restarts the network thread.\"\"\"\n+\n+        network_thread_join()\n+        self.nodes[0].disconnect_p2ps()\n+        self.nodes[0].add_p2p_connection(P2PDataStore())\n+        if additional_conn:",
      "path": "test/functional/p2p_invalid_tx.py",
      "position": null,
      "original_position": 36,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe just take a num_connections=1 optional argument and shorten to\r\n\r\n```python\r\nfor _ in range(num_connections):\r\n    self.nodes[0].add_p2p_connection(P2PDataStore())\r\n```",
      "created_at": "2018-04-13T18:18:09Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r181470581",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181470581"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 37,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181473228",
      "pull_request_review_id": 112109784,
      "id": 181473228,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTQ3MzIyOA==",
      "diff_hunk": "@@ -44,12 +65,48 @@ def run_test(self):\n \n         # b'\\x64' is OP_NOTIF\n         # Transaction will be rejected with code 16 (REJECT_INVALID)",
      "path": "test/functional/p2p_invalid_tx.py",
      "position": 60,
      "original_position": 56,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Check for reject reason below is now dropped (I guess is because the mininode is no longer whitelisted), so might be clearer to update this comment.",
      "created_at": "2018-04-13T18:27:45Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r181473228",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181473228"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181473709",
      "pull_request_review_id": 112109784,
      "id": 181473709,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTQ3MzcwOQ==",
      "diff_hunk": "@@ -573,7 +573,8 @@ def send_txs_and_test(self, txs, rpc, success=True, reject_code=None, reject_rea\n         for tx in txs:\n             self.send_message(msg_tx(tx))\n \n-        self.sync_with_ping()\n+        if not expect_disconnect:",
      "path": "test/functional/test_framework/mininode.py",
      "position": null,
      "original_position": 14,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can the `expect_disconnect` case actually wait and verify the disconnect happened?",
      "created_at": "2018-04-13T18:29:50Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r181473709",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181473709"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 576,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181477903",
      "pull_request_review_id": 112109784,
      "id": 181477903,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTQ3NzkwMw==",
      "diff_hunk": "@@ -44,12 +65,48 @@ def run_test(self):\n \n         # b'\\x64' is OP_NOTIF\n         # Transaction will be rejected with code 16 (REJECT_INVALID)\n+        self.log.info('Test a transaction that is rejected')\n         tx1 = create_transaction(block1.vtx[0], 0, b'\\x64', 50 * COIN - 12000)\n-        node.p2p.send_txs_and_test([tx1], node, success=False, reject_code=16, reject_reason=b'mandatory-script-verify-flag-failed (Invalid OP_IF construction)')\n+        node.p2p.send_txs_and_test([tx1], node, success=False, expect_disconnect=True)\n+        self.reconnect_p2p(additional_conn=True)  # Add one more (that is later disconnected)",
      "path": "test/functional/p2p_invalid_tx.py",
      "position": null,
      "original_position": 61,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "More test description would be helpful here (it took me a while to figure it out): Test confirms that mininode 1 doesn't get disconnected right away after sending the node an invalid orphan transaction. It then confirms mininode 1 is disconnected later when mininode 0 provides the missing parent which makes it possible to detect the orphan was invalid.\r\n\r\nAt least this explains the `tx_withhold` and `tx_orphan_2_invalid` parts of the new test. I still don't know why `tx_orphan_1`, `tx_orphan_2_no_fee`, and `tx_orphan_2_valid` are added and what they are testing for.",
      "created_at": "2018-04-13T18:45:12Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r181477903",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181477903"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 71,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181478907",
      "pull_request_review_id": 112109784,
      "id": 181478907,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTQ3ODkwNw==",
      "diff_hunk": "@@ -44,12 +65,48 @@ def run_test(self):\n \n         # b'\\x64' is OP_NOTIF\n         # Transaction will be rejected with code 16 (REJECT_INVALID)\n+        self.log.info('Test a transaction that is rejected')\n         tx1 = create_transaction(block1.vtx[0], 0, b'\\x64', 50 * COIN - 12000)\n-        node.p2p.send_txs_and_test([tx1], node, success=False, reject_code=16, reject_reason=b'mandatory-script-verify-flag-failed (Invalid OP_IF construction)')\n+        node.p2p.send_txs_and_test([tx1], node, success=False, expect_disconnect=True)\n+        self.reconnect_p2p(additional_conn=True)  # Add one more (that is later disconnected)\n+\n+        self.log.info('Test orphan transaction handling ... ')\n+        tx_withhold = CTransaction()\n+        tx_withhold.vin.append(CTxIn(outpoint=COutPoint(block1.vtx[0].sha256, 0)))\n+        tx_withhold.vout.append(CTxOut(nValue=50 * COIN - 12000, scriptPubKey=b'\\x51'))\n+        tx_withhold.calc_sha256()\n+\n+        tx_orphan_1 = CTransaction()\n+        tx_orphan_1.vin.append(CTxIn(outpoint=COutPoint(tx_withhold.sha256, 0)))\n+        tx_orphan_1.vout = [CTxOut(nValue=10 * COIN, scriptPubKey=b'\\x51')] * 3\n+        tx_orphan_1.calc_sha256()\n+\n+        tx_orphan_2_no_fee = CTransaction()\n+        tx_orphan_2_no_fee.vin.append(CTxIn(outpoint=COutPoint(tx_orphan_1.sha256, 0)))\n+        tx_orphan_2_no_fee.vout.append(CTxOut(nValue=10 * COIN, scriptPubKey=b'\\x51'))\n+\n+        tx_orphan_2_valid = CTransaction()\n+        tx_orphan_2_valid.vin.append(CTxIn(outpoint=COutPoint(tx_orphan_1.sha256, 1)))\n+        tx_orphan_2_valid.vout.append(CTxOut(nValue=10 * COIN - 12000, scriptPubKey=b'\\x51'))\n+        tx_orphan_2_valid.calc_sha256()\n+\n+        tx_orphan_2_invalid = CTransaction()\n+        tx_orphan_2_invalid.vin.append(CTxIn(outpoint=COutPoint(tx_orphan_1.sha256, 2)))\n+        tx_orphan_2_invalid.vout.append(CTxOut(nValue=11 * COIN, scriptPubKey=b'\\x51'))\n+\n+        self.log.info('Send the orphans ... ')\n+        # Send orphan txs that are valid by consensus, but may be rejected by policy from p2ps[0]",
      "path": "test/functional/p2p_invalid_tx.py",
      "position": null,
      "original_position": 88,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What is \"may be rejected by policy\" referring to and which transactions does it apply to?",
      "created_at": "2018-04-13T18:49:05Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r181478907",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181478907"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181480094",
      "pull_request_review_id": 112109784,
      "id": 181480094,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTQ4MDA5NA==",
      "diff_hunk": "@@ -44,12 +65,48 @@ def run_test(self):\n \n         # b'\\x64' is OP_NOTIF\n         # Transaction will be rejected with code 16 (REJECT_INVALID)\n+        self.log.info('Test a transaction that is rejected')\n         tx1 = create_transaction(block1.vtx[0], 0, b'\\x64', 50 * COIN - 12000)\n-        node.p2p.send_txs_and_test([tx1], node, success=False, reject_code=16, reject_reason=b'mandatory-script-verify-flag-failed (Invalid OP_IF construction)')\n+        node.p2p.send_txs_and_test([tx1], node, success=False, expect_disconnect=True)\n+        self.reconnect_p2p(additional_conn=True)  # Add one more (that is later disconnected)\n+\n+        self.log.info('Test orphan transaction handling ... ')\n+        tx_withhold = CTransaction()\n+        tx_withhold.vin.append(CTxIn(outpoint=COutPoint(block1.vtx[0].sha256, 0)))\n+        tx_withhold.vout.append(CTxOut(nValue=50 * COIN - 12000, scriptPubKey=b'\\x51'))\n+        tx_withhold.calc_sha256()\n+\n+        tx_orphan_1 = CTransaction()\n+        tx_orphan_1.vin.append(CTxIn(outpoint=COutPoint(tx_withhold.sha256, 0)))\n+        tx_orphan_1.vout = [CTxOut(nValue=10 * COIN, scriptPubKey=b'\\x51')] * 3\n+        tx_orphan_1.calc_sha256()\n+\n+        tx_orphan_2_no_fee = CTransaction()\n+        tx_orphan_2_no_fee.vin.append(CTxIn(outpoint=COutPoint(tx_orphan_1.sha256, 0)))\n+        tx_orphan_2_no_fee.vout.append(CTxOut(nValue=10 * COIN, scriptPubKey=b'\\x51'))\n+\n+        tx_orphan_2_valid = CTransaction()\n+        tx_orphan_2_valid.vin.append(CTxIn(outpoint=COutPoint(tx_orphan_1.sha256, 1)))\n+        tx_orphan_2_valid.vout.append(CTxOut(nValue=10 * COIN - 12000, scriptPubKey=b'\\x51'))\n+        tx_orphan_2_valid.calc_sha256()\n+\n+        tx_orphan_2_invalid = CTransaction()\n+        tx_orphan_2_invalid.vin.append(CTxIn(outpoint=COutPoint(tx_orphan_1.sha256, 2)))\n+        tx_orphan_2_invalid.vout.append(CTxOut(nValue=11 * COIN, scriptPubKey=b'\\x51'))\n+\n+        self.log.info('Send the orphans ... ')\n+        # Send orphan txs that are valid by consensus, but may be rejected by policy from p2ps[0]\n+        node.p2p.send_txs_and_test([tx_orphan_1, tx_orphan_2_no_fee, tx_orphan_2_valid], node, success=False)\n+        # Send consensus-invalid tx from p2ps[1], they should get disconnected later on\n+        node.p2ps[1].send_txs_and_test([tx_orphan_2_invalid], node, success=False)\n+\n+        self.log.info('Send the withhold tx ... ')\n+        assert_equal(2, len(node.getpeerinfo()))\n+        # The tx itself is successfully accepted, but we should get disconnected anyway\n+        node.p2p.send_txs_and_test([tx_withhold], node, success=True, expect_disconnect=False)\n+        assert_equal(1, len(node.getpeerinfo()))",
      "path": "test/functional/p2p_invalid_tx.py",
      "position": null,
      "original_position": 97,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Would be nice just for clarity if this could explicitly verify mininode 1 was disconnected and mininode is still connected. I understand the condition is implied from the peer count combined with `expect_disconnect=False` above, but it's not clear why this can't just be tested directly.",
      "created_at": "2018-04-13T18:52:37Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r181480094",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181480094"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181485154",
      "pull_request_review_id": 112109784,
      "id": 181485154,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTQ4NTE1NA==",
      "diff_hunk": "@@ -44,12 +65,48 @@ def run_test(self):\n \n         # b'\\x64' is OP_NOTIF\n         # Transaction will be rejected with code 16 (REJECT_INVALID)\n+        self.log.info('Test a transaction that is rejected')\n         tx1 = create_transaction(block1.vtx[0], 0, b'\\x64', 50 * COIN - 12000)\n-        node.p2p.send_txs_and_test([tx1], node, success=False, reject_code=16, reject_reason=b'mandatory-script-verify-flag-failed (Invalid OP_IF construction)')\n+        node.p2p.send_txs_and_test([tx1], node, success=False, expect_disconnect=True)\n+        self.reconnect_p2p(additional_conn=True)  # Add one more (that is later disconnected)\n+\n+        self.log.info('Test orphan transaction handling ... ')\n+        tx_withhold = CTransaction()\n+        tx_withhold.vin.append(CTxIn(outpoint=COutPoint(block1.vtx[0].sha256, 0)))\n+        tx_withhold.vout.append(CTxOut(nValue=50 * COIN - 12000, scriptPubKey=b'\\x51'))\n+        tx_withhold.calc_sha256()\n+\n+        tx_orphan_1 = CTransaction()\n+        tx_orphan_1.vin.append(CTxIn(outpoint=COutPoint(tx_withhold.sha256, 0)))\n+        tx_orphan_1.vout = [CTxOut(nValue=10 * COIN, scriptPubKey=b'\\x51')] * 3\n+        tx_orphan_1.calc_sha256()\n+\n+        tx_orphan_2_no_fee = CTransaction()\n+        tx_orphan_2_no_fee.vin.append(CTxIn(outpoint=COutPoint(tx_orphan_1.sha256, 0)))\n+        tx_orphan_2_no_fee.vout.append(CTxOut(nValue=10 * COIN, scriptPubKey=b'\\x51'))\n+\n+        tx_orphan_2_valid = CTransaction()\n+        tx_orphan_2_valid.vin.append(CTxIn(outpoint=COutPoint(tx_orphan_1.sha256, 1)))\n+        tx_orphan_2_valid.vout.append(CTxOut(nValue=10 * COIN - 12000, scriptPubKey=b'\\x51'))\n+        tx_orphan_2_valid.calc_sha256()\n+\n+        tx_orphan_2_invalid = CTransaction()\n+        tx_orphan_2_invalid.vin.append(CTxIn(outpoint=COutPoint(tx_orphan_1.sha256, 2)))\n+        tx_orphan_2_invalid.vout.append(CTxOut(nValue=11 * COIN, scriptPubKey=b'\\x51'))\n+\n+        self.log.info('Send the orphans ... ')\n+        # Send orphan txs that are valid by consensus, but may be rejected by policy from p2ps[0]\n+        node.p2p.send_txs_and_test([tx_orphan_1, tx_orphan_2_no_fee, tx_orphan_2_valid], node, success=False)\n+        # Send consensus-invalid tx from p2ps[1], they should get disconnected later on\n+        node.p2ps[1].send_txs_and_test([tx_orphan_2_invalid], node, success=False)\n+\n+        self.log.info('Send the withhold tx ... ')\n+        assert_equal(2, len(node.getpeerinfo()))\n+        # The tx itself is successfully accepted, but we should get disconnected anyway\n+        node.p2p.send_txs_and_test([tx_withhold], node, success=True, expect_disconnect=False)\n+        assert_equal(1, len(node.getpeerinfo()))\n \n-        # Verify valid transaction\n-        tx1 = create_transaction(block1.vtx[0], 0, b'', 50 * COIN - 12000)\n-        node.p2p.send_txs_and_test([tx1], node, success=True)\n+        assert_equal({t.hash for t in [tx_withhold, tx_orphan_1, tx_orphan_2_valid]}, set(node.getrawmempool()))",
      "path": "test/functional/p2p_invalid_tx.py",
      "position": null,
      "original_position": 102,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Could make sense to rebase the test commit before the refactoring commit, to make it clear existing code is supposed to pass the new test.\r\n\r\nOr maybe just put the new test in a standalone PR if the refactoring is going to be held up by #11775 anyway (https://github.com/bitcoin/bitcoin/pull/12935#discussion_r180830562).",
      "created_at": "2018-04-13T19:12:07Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r181485154",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181485154"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181497585",
      "pull_request_review_id": 112143964,
      "id": 181497585,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTQ5NzU4NQ==",
      "diff_hunk": "@@ -6,24 +6,45 @@\n \n In this test we connect to one node over p2p, and test tx requests.\"\"\"\n from test_framework.blocktools import create_block, create_coinbase, create_transaction\n-from test_framework.messages import COIN\n-from test_framework.mininode import network_thread_start, P2PDataStore\n+from test_framework.messages import (\n+    COIN,\n+    COutPoint,\n+    CTransaction,\n+    CTxIn,\n+    CTxOut,\n+)\n+from test_framework.mininode import network_thread_start, P2PDataStore, network_thread_join\n from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+)\n \n-class InvalidTxRequestTest(BitcoinTestFramework):\n \n+class InvalidTxRequestTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n         self.setup_clean_chain = True\n-        self.extra_args = [[\"-whitelist=127.0.0.1\"]]\n+\n+    def reconnect_p2p(self, additional_conn=False):\n+        \"\"\"Add a P2P connection to the node.\n+\n+        The node gets disconnected several times in this test. This helper\n+        method reconnects the p2p and restarts the network thread.\"\"\"\n+\n+        network_thread_join()\n+        self.nodes[0].disconnect_p2ps()",
      "path": "test/functional/p2p_invalid_tx.py",
      "position": null,
      "original_position": 34,
      "commit_id": "0c2bc587f6107fcc546ba2b11605fb0828c7fce3",
      "original_commit_id": "aaaa4569b1ef49ce6f031325f03d171de55d8419",
      "in_reply_to_id": 181469335,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Agree. Should be fixed in both places.",
      "created_at": "2018-04-13T20:07:27Z",
      "updated_at": "2018-04-16T20:32:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/12935#discussion_r181497585",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181497585"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12935"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    }
  ]
}