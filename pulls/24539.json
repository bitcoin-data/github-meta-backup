{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
    "id": 877751403,
    "node_id": "PR_kwDOABII5840UWxr",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/24539",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/24539.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/24539.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
    "number": 24539,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Add a \"tx output spender\" index",
    "user": {
      "login": "sstone",
      "id": 1573866,
      "node_id": "MDQ6VXNlcjE1NzM4NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sstone",
      "html_url": "https://github.com/sstone",
      "followers_url": "https://api.github.com/users/sstone/followers",
      "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
      "organizations_url": "https://api.github.com/users/sstone/orgs",
      "repos_url": "https://api.github.com/users/sstone/repos",
      "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sstone/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This PR adds a new \"tx output spender\" index, which allows users to query which tx spent a given outpoint with the `gettxspendingprevout` RPC call that was added by https://github.com/bitcoin/bitcoin/pull/24408.\r\n\r\nSuch an index would be extremely useful for Lightning, and probably for most layer-2 protocols that rely on chains of unpublished transactions.\r\n\r\nCode may need additional tests, but I wanted to collect ACKs/NACKs first (I'm aware that new indexes are not necessarily welcome additions)\r\n\r\nI chose to store an outpoint (32 + 4 bytes) -> txid (32 bytes) index (so -txospenderindex requires -txindex) rather than a outpoint -> disk pos index.",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      }
    ],
    "created_at": "2022-03-11T19:32:41Z",
    "updated_at": "2023-06-05T17:30:30Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "0b4dddf9c777dc506400d5584910c05546c84b90",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "sstone:add-txospender-index",
      "ref": "add-txospender-index",
      "sha": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 31305826,
        "node_id": "MDEwOlJlcG9zaXRvcnkzMTMwNTgyNg==",
        "name": "bitcoin",
        "full_name": "sstone/bitcoin",
        "owner": {
          "login": "sstone",
          "id": 1573866,
          "node_id": "MDQ6VXNlcjE1NzM4NjY=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sstone",
          "html_url": "https://github.com/sstone",
          "followers_url": "https://api.github.com/users/sstone/followers",
          "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
          "organizations_url": "https://api.github.com/users/sstone/orgs",
          "repos_url": "https://api.github.com/users/sstone/repos",
          "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sstone/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/sstone/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sstone/bitcoin",
        "archive_url": "https://api.github.com/repos/sstone/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sstone/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sstone/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sstone/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sstone/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sstone/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sstone/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sstone/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sstone/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sstone/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sstone/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sstone/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sstone/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sstone/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sstone/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sstone/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sstone/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sstone/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sstone/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sstone/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sstone/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sstone/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sstone/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sstone/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sstone/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sstone/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sstone/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sstone/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sstone/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sstone/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sstone/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sstone/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sstone/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sstone/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sstone/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sstone/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sstone/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sstone/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sstone/bitcoin/hooks",
        "svn_url": "https://github.com/sstone/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 200984,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-06T07:26:26Z",
        "created_at": "2015-02-25T09:17:18Z",
        "updated_at": "2022-01-10T08:23:52Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "f4a8269dfc144cc918570bdb870aa5143a11c1fe",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34324,
        "stargazers_count": 69819,
        "watchers_count": 69819,
        "size": 233879,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-07T05:35:10Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-06-07T04:47:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 415,
    "deletions": 1,
    "changed_files": 13,
    "commits": 3,
    "review_comments": 63,
    "comments": 22
  },
  "events": [
    {
      "event": "head_ref_force_pushed",
      "id": 6227681994,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAFzMuLK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6227681994",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:08:30Z"
    },
    {
      "event": "commented",
      "id": 1065541156,
      "node_id": "IC_kwDOABII584_gt4k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065541156",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:24:10Z",
      "updated_at": "2022-03-11T21:24:10Z",
      "author_association": "MEMBER",
      "body": "Concept ACK. It would be good know more about specific use-cases for this, if you can provide some links or more description. But the implementation seems very simple, so I don't think adding this would be a maintenance burden.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065541156",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "labeled",
      "id": 6227844439,
      "node_id": "LE_lADOABII585Fi6uozwAAAAFzNV1X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6227844439",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:39:05Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "labeled",
      "id": 6227844441,
      "node_id": "LE_lADOABII585Fi6uozwAAAAFzNV1Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6227844441",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:39:05Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "labeled",
      "id": 6227844444,
      "node_id": "LE_lADOABII585Fi6uozwAAAAFzNV1c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6227844444",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:39:05Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "labeled",
      "id": 6227844446,
      "node_id": "LE_lADOABII585Fi6uozwAAAAFzNV1e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6227844446",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:39:05Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "commented",
      "id": 1065836894,
      "node_id": "IC_kwDOABII584_h2Fe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065836894",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-12T08:01:34Z",
      "updated_at": "2022-03-12T08:01:34Z",
      "author_association": "MEMBER",
      "body": "@ ryan, I think the idea is that there is one coin that is owned by more than one entity. There may be several (conflicting) pre-signed txs spending it and as soon as it is spent, all entities with ownership in it want to check which pre-signed tx spent the coin.\r\nIf they use Bitcoin Core to monitor the coin, they may use:\r\n* A watch-only wallet (which requires a file on disk and BDB/Sqlite)\r\n* Walk the raw chain and raw mempool themselves (According to https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1059188351 this is doable for the chain, but may not be for the mempool)\r\n* Use an index. A blockfilterindex might speed up scanning the chain, whereas this index directly gives the answer.",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065836894",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "commented",
      "id": 1065868465,
      "node_id": "IC_kwDOABII584_h9yx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065868465",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-12T11:46:10Z",
      "updated_at": "2022-03-12T11:46:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "Lightning channels are basically trees of unpublished transactions:\r\n- a commit tx that spends a shared onchain \"funding\" UTXO\r\n- HTLC txs that spend the commit tx (there can be competing HTLC txs that spend the same commit tx output: one for successful payments, one for timed out payments)\r\n\r\nThere is also a penalty scheme built into these txs: if you cheat, you need to wait before you can spend your outputs but your channel peer can spend them immediately.\r\n\r\nAnd LN is also transitioning to a model where these txs pay minimum fees and can be \"bumped\" with RBF/CPFP.\r\n\r\n=> it's very useful for LN nodes to detect when transactions have been spent, but also how they've been spent and react accordingly (by extracting info from the spending txs for example), and walk up chains of txs that spend each other.\r\n\r\nAs described above, there are tools in bitcoin core that we could use and would help a bit, and Lightning nodes could also create their own indexes independently or use electrum servers, block explorers, but this would make running LN nodes connected to your own bitcoin node much easier.\r\n",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065868465",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "commented",
      "id": 1065899900,
      "node_id": "IC_kwDOABII584_iFd8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065899900",
      "actor": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-12T15:13:04Z",
      "updated_at": "2022-03-12T15:13:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nI think the use case is clear and if others think the maintenance burden is reasonable there doesn't seem to be an obvious downside.\r\n\r\n> This PR can be viewed as an \"extension\" to #24408\r\n\r\nSeems like review should be focused on #24408 first but assuming that gets merged, Concept ACK for this.",
      "user": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065899900",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "commented",
      "id": 1065965240,
      "node_id": "IC_kwDOABII584_iVa4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065965240",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-12T21:25:18Z",
      "updated_at": "2023-04-22T02:39:56Z",
      "author_association": "MEMBER",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065541156), [michaelfolkson](https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065899900), [mzumsande](https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-908174478), [glozow](https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1086218571), [aureleoules](https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276604721), [achow101](https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-1188968612) |\n| Approach ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-958601762) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065965240",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "reviewed",
      "id": 908174478,
      "node_id": "PRR_kwDOABII5842IaSO",
      "url": null,
      "actor": null,
      "commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK - I can see why this could be helpful for lightning, the code is very similar to the txindex code.\r\n\r\nSome general thoughts:\r\n- `getmempooltxspendingprevout` in #24408 takes a list of outpoints, `gettxospender` takes a single outpoint. Would it make sense to have the same format here (I'd guess a common use case would be to check both RPCs with the same outpoint(s)?)\r\n- Taking this one step further, `getrawtransaction` queries transaction data from the mempool or from blocks (if txindex is enabled) in one RPC. Would it make sense to have something similar for outpoints, instead of two separate RPCs?\r\n- I think that the indexed data will not be deleted in case of a reorg (but possibly overwritten if an outpoint would be spent in a different tx as a result of a reorg). That means that a result from `gettxospender` could be stale. Would it make sense to delete entries or should we at least mention this possibility in the rpc doc?\r\n- What's the reason for the dependency on -txindex? As far as I can see it's not technical, so would knowing the fact that an outpoint was used in a tx (even if we can't lookup the details of that tx further) be sufficient for some use cases?",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-908174478",
      "submitted_at": "2022-03-13T21:25:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6234272771,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAFzl3QD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6234272771",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-14T10:27:58Z"
    },
    {
      "event": "commented",
      "id": 1066633467,
      "node_id": "IC_kwDOABII584_k4j7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066633467",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-14T10:47:14Z",
      "updated_at": "2022-03-14T10:47:14Z",
      "author_association": "CONTRIBUTOR",
      "body": ">     * `getmempooltxspendingprevout` in #24408 takes a list of outpoints, `gettxospender` takes a single outpoint. Would it make sense to have the same format here (I'd guess a common use case would be to check both RPCs with the same outpoint(s)?)\r\n\r\nBitcoin supports batched RPC request so from a functional p.o.v it's equivalent to passing a list of outpoints but it's a bit easier to reason about imho. \r\nI think that the use case for  `getmempooltxspendingprevout` is a bit different: you want to bump fees for a set of txs that are related to the same channel and want to understand who is spending what. You may also have txs with multiple inputs, and would pass them all together to `getmempooltxspendingprevout`.\r\n\r\nFor `gettxospender` the use case is trying to understand why channels have been closed and react if needed, if we could pass in multiple outpoints they would likely be unrelated.\r\n \r\n>     * Taking this one step further, `getrawtransaction` queries transaction data from the mempool or from blocks (if txindex is enabled) in one RPC. Would it make sense to have something similar for outpoints, instead of two separate RPCs?\r\n\r\nMaybe, let's see where the discussion in https://github.com/bitcoin/bitcoin/pull/24408 but to me it feels cleaner to have separate calls.\r\n\r\n>     * I think that the indexed data will not be deleted in case of a reorg (but possibly overwritten if an outpoint would be spent in a different tx as a result of a reorg). That means that a result from `gettxospender` could be stale. Would it make sense to delete entries or should we at least mention this possibility in the rpc doc?\r\n> \r\n>     * What's the reason for the dependency on -txindex? As far as I can see it's not technical, so would knowing the fact that an outpoint was used in a tx (even if we can't lookup the details of that tx further) be sufficient for some use cases?\r\n\r\nWe would almost always want to get the actual tx that spends our outpoint. My reasoning was that relying on `-txindex` makes `gettxospender` robust and consistent in the case of reorgs and is also simpler and easier to understand that storing block positions instead of txids. ",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1066633467",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "labeled",
      "id": 6294804839,
      "node_id": "LE_lADOABII585Fi6uozwAAAAF3Mxln",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6294804839",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-23T20:55:24Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6297680749,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAF3Xvtt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6297680749",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-24T09:11:13Z"
    },
    {
      "event": "unlabeled",
      "id": 6297823303,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAF3YShH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6297823303",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-24T09:30:14Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6298501136,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAF3a4AQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6298501136",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-24T11:03:23Z"
    },
    {
      "event": "commented",
      "id": 1086218571,
      "node_id": "IC_kwDOABII585AvmFL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1086218571",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-01T18:41:32Z",
      "updated_at": "2022-04-01T18:41:32Z",
      "author_association": "MEMBER",
      "body": "Concept ACK, nice",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1086218571",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "unlabeled",
      "id": 6432241836,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAF_ZDis",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6432241836",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-14T06:54:43Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "unlabeled",
      "id": 6432241837,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAF_ZDit",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6432241837",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-14T06:54:43Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "unlabeled",
      "id": 6432241838,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAF_ZDiu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6432241838",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-14T06:54:43Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "reviewed",
      "id": 950732877,
      "node_id": "PRR_kwDOABII5844qwhN",
      "url": null,
      "actor": null,
      "commit_id": "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-950732877",
      "submitted_at": "2022-04-23T00:41:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6492194951,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGC9wiH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6492194951",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-25T17:03:37Z"
    },
    {
      "event": "commented",
      "id": 1108832699,
      "node_id": "IC_kwDOABII585CF3G7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108832699",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-25T17:14:59Z",
      "updated_at": "2022-04-25T17:14:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased on https://github.com/bitcoin/bitcoin/pull/24408",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1108832699",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "labeled",
      "id": 6501915115,
      "node_id": "LE_lADOABII585Fi6uozwAAAAGDi1nr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6501915115",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-26T20:48:55Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1110949442,
      "node_id": "IC_kwDOABII585CN75C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110949442",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T12:37:13Z",
      "updated_at": "2022-04-27T12:37:13Z",
      "author_association": "MEMBER",
      "body": "Looks like the test somehow went away? If #https://github.com/bitcoin/bitcoin/pull/24408 is merged soon, you can fix everything on the next rebase.",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1110949442",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6507479187,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGD4ECT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6507479187",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T14:22:47Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6507719483,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGD4-s7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6507719483",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T14:51:34Z"
    },
    {
      "event": "commented",
      "id": 1111137054,
      "node_id": "IC_kwDOABII585COpse",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111137054",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T15:23:50Z",
      "updated_at": "2022-04-27T15:23:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Looks like the test somehow went away? If ##24408 is merged soon, you can fix everything on the next rebase.\r\n\r\nYes sorry about that, I've brought it back. I will also add another commit to move `gettxspendingprevout` out of `rpc/mempool.cpp`.",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1111137054",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "unlabeled",
      "id": 6508168651,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAGD6sXL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6508168651",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T15:48:56Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1113716662,
      "node_id": "IC_kwDOABII585CYfe2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113716662",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-29T20:52:02Z",
      "updated_at": "2022-04-29T20:52:02Z",
      "author_association": "MEMBER",
      "body": "As with #24408, unless there's a need for looking up an unpredictable outpoint after its spend is mined (why?), I think a watch-only wallet is the correct approach for this use case, and expecting users to build infinitely-growing indexes isn't a good solution.",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1113716662",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "reviewed",
      "id": 958241302,
      "node_id": "PRR_kwDOABII5845HZoW",
      "url": null,
      "actor": null,
      "commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Suggested patch: https://gist.github.com/luke-jr/beb37abb2cfc2f7db86605f74bc4b934",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-958241302",
      "submitted_at": "2022-04-29T22:47:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "reviewed",
      "id": 958601762,
      "node_id": "PRR_kwDOABII5845Ixoi",
      "url": null,
      "actor": null,
      "commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-958601762",
      "submitted_at": "2022-05-01T15:16:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "reviewed",
      "id": 959202584,
      "node_id": "PRR_kwDOABII5845LEUY",
      "url": null,
      "actor": null,
      "commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-959202584",
      "submitted_at": "2022-05-02T15:18:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "reviewed",
      "id": 959413555,
      "node_id": "PRR_kwDOABII5845L30z",
      "url": null,
      "actor": null,
      "commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-959413555",
      "submitted_at": "2022-05-02T18:34:59Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "commented",
      "id": 1115235423,
      "node_id": "IC_kwDOABII585CeSRf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1115235423",
      "actor": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-02T18:42:06Z",
      "updated_at": "2022-05-02T18:42:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "@sstone I created a branch that modifies this PR to include the `in_mempool` and `block_height` of the transaction that spends the output.\r\nThe result is like this:\r\n\r\n```\r\n[\r\n  {\r\n    \"txid\": \"c8de5b22e7dac049cd6a2628580876d74c16a58a886be2b4b1c744901f8e953e\",\r\n    \"vout\": 0,\r\n    \"spendingtxid\": \"117dd0df58201d4ac6c49472dc59208487caa7d79079a4bb32d85c16f4174e72\",\r\n    \"in_mempool\": false,\r\n    \"block_height\": 88551\r\n  }\r\n]\r\n```\r\n\r\nIf you agree with this approach, feel free to use the code of that branch.\r\nhttps://github.com/w0xlt/bitcoin/tree/add_txospender_index_2",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1115235423",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "mentioned",
      "id": 6535486440,
      "node_id": "MEE_lADOABII585Fi6uozwAAAAGFi5vo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6535486440",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-02T18:42:06Z"
    },
    {
      "event": "subscribed",
      "id": 6535486448,
      "node_id": "SE_lADOABII585Fi6uozwAAAAGFi5vw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6535486448",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-02T18:42:06Z"
    },
    {
      "event": "comment_deleted",
      "id": 6543103911,
      "node_id": "CDE_lADOABII585Fi6uozwAAAAGF_9en",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6543103911",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-03T18:51:05Z"
    },
    {
      "event": "commented",
      "id": 1116455957,
      "node_id": "IC_kwDOABII585Ci8QV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116455957",
      "actor": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-03T19:00:42Z",
      "updated_at": "2022-05-03T19:00:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "There is no need for a new commit to address review comments.\r\nThe last commit can be squashed.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1116455957",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6543418094,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGGBKLu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6543418094",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-03T19:37:39Z"
    },
    {
      "event": "commented",
      "id": 1117947117,
      "node_id": "IC_kwDOABII585CooTt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1117947117",
      "actor": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-04T21:18:05Z",
      "updated_at": "2022-05-04T21:18:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "The `static RPCHelpMan getindexinfo()` RPC should also be updated.\r\n\r\n```diff\r\nstatic RPCHelpMan getindexinfo()\r\n{\r\n    // ...\r\n    if (g_txindex) {\r\n        result.pushKVs(SummaryToJSON(g_txindex->GetSummary(), index_name));\r\n    }\r\n\r\n    if (g_coin_stats_index) {\r\n        result.pushKVs(SummaryToJSON(g_coin_stats_index->GetSummary(), index_name));\r\n    }\r\n\r\n+    if (g_txospenderindex) {\r\n+        result.pushKVs(SummaryToJSON(g_txospenderindex->GetSummary(), index_name));\r\n+    }\r\n\r\n    ForEachBlockFilterIndex([&result, &index_name](const BlockFilterIndex& index) {\r\n        result.pushKVs(SummaryToJSON(index.GetSummary(), index_name));\r\n    });\r\n    // ...\r\n}\r\n```\r\n\r\n",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1117947117",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6558792341,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGG7zqV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6558792341",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-05T18:35:21Z"
    },
    {
      "event": "commented",
      "id": 1119010703,
      "node_id": "IC_kwDOABII585Csr-P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119010703",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-05T20:21:43Z",
      "updated_at": "2022-05-05T20:21:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The `static RPCHelpMan getindexinfo()` RPC should also be updated.\r\n> \r\n> ```diff\r\n> static RPCHelpMan getindexinfo()\r\n> {\r\n>     // ...\r\n>     if (g_txindex) {\r\n>         result.pushKVs(SummaryToJSON(g_txindex->GetSummary(), index_name));\r\n>     }\r\n> \r\n>     if (g_coin_stats_index) {\r\n>         result.pushKVs(SummaryToJSON(g_coin_stats_index->GetSummary(), index_name));\r\n>     }\r\n> \r\n> +    if (g_txospenderindex) {\r\n> +        result.pushKVs(SummaryToJSON(g_txospenderindex->GetSummary(), index_name));\r\n> +    }\r\n> \r\n>     ForEachBlockFilterIndex([&result, &index_name](const BlockFilterIndex& index) {\r\n>         result.pushKVs(SummaryToJSON(index.GetSummary(), index_name));\r\n>     });\r\n>     // ...\r\n> }\r\n> ```\r\n\r\nThanks! done in https://github.com/bitcoin/bitcoin/pull/24539/commits/d9d96f8b5dab7a617efb95c7a4c53114a7815abe",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1119010703",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6697741235,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGPN2uz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6697741235",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-29T02:20:03Z"
    },
    {
      "event": "labeled",
      "id": 7013334694,
      "node_id": "LE_lADOABII585Fi6uozwAAAAGiBv6m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7013334694",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-18T15:53:27Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7028797593,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGi8vCZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7028797593",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-20T12:14:17Z"
    },
    {
      "event": "unlabeled",
      "id": 7029704478,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAGjAMce",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7029704478",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-20T14:00:56Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7446350582,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAG71kr2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7446350582",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-23T10:50:22Z"
    },
    {
      "event": "commented",
      "id": 1260928098,
      "node_id": "IC_kwDOABII585LKDxi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1260928098",
      "actor": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-28T13:36:38Z",
      "updated_at": "2022-09-28T13:37:09Z",
      "author_association": "MEMBER",
      "body": "> As described above, there are tools in bitcoin core that we could use and would help a bit\r\n\r\nMarcoFalke and luke-jr suggested using a watch-only wallet for this use case. I don't fully understand how Lightning works in depth/implementation. Do you know @sstone what would be the pros and cons of using a watch-only wallet for this? \r\n\r\nI haven't fully synced the txospenderindex (height 568907) and I know the index is optional but it's already ~60GB, so is it worth it for layer 2 node operators?",
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1260928098",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "mentioned",
      "id": 7478044550,
      "node_id": "MEE_lADOABII585Fi6uozwAAAAG9ueeG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7478044550",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-28T13:36:39Z"
    },
    {
      "event": "subscribed",
      "id": 7478044558,
      "node_id": "SE_lADOABII585Fi6uozwAAAAG9ueeO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7478044558",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-28T13:36:39Z"
    },
    {
      "event": "commented",
      "id": 1265735375,
      "node_id": "IC_kwDOABII585LcZbP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1265735375",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-03T16:41:53Z",
      "updated_at": "2022-10-03T16:41:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "For most LN nodes watch-only wallets are probably enough: you would import all your channel outpoints, and check your wallet transactions for spending transactions (bitcoin core should include them). AFAIK you would do this by importing each channel outpoint in a single \"address\" descriptor (though it seems that there is currently no way to remove a descriptor ?).\r\n\r\nBut I'm not sure yet how practical and efficient this would be for large nodes with 10s of 1000s of transactions (I would like to have bitcoin core do some kind of filtering before it returns wallet transactions).   ",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1265735375",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "labeled",
      "id": 7515773589,
      "node_id": "LE_lADOABII585Fi6uozwAAAAG_-ZqV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7515773589",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-04T11:59:31Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7524218832,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHAenfQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7524218832",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-05T11:04:53Z"
    },
    {
      "event": "unlabeled",
      "id": 7524269215,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAHAezyf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7524269215",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-05T11:13:21Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1276595646,
      "node_id": "IC_kwDOABII585MF02-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276595646",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-12T18:49:44Z",
      "updated_at": "2022-10-12T18:49:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "update: unless I've missed something, unless you have just a few transactions to monitor, using watch-only wallet would not work as is and even if it was modified it would still create serious operational issues:\r\n\r\nIf we were to use a single watch-only wallet and import all the outpoints that we need to watch, with one descriptor per outpoint , we would still to to fetch all wallet transactions to get spending transactions even if we used labels when importing our descriptors because label filtering only works for incoming transactions, so this does not scale (and again there does not seem to be a way to remove descriptors once they've been imported). \r\n\r\nSince with LN we currently know which transactions would spend the outpoints that we are watching, we could also import them. It would solves our filtering problem but we would end up with a huge number of transaction in our wallet (millions of them). \r\n\r\nAnother option would be using one watch-only wallet per channel. This would be much better from an indexing point of view but would scale even less because there would be one wallet database per channel.\r\n\r\nAnd even if we modified how watch-only wallets work to add an optional \"spent-by\" field to listtransactions (this would be fairly easy), using them would be a problem from an operational point of view: rebuilding a node can be done very quickly, as we don't even need to restore the bitcoin wallet that we used before (we just need to have a backup): we can just point our system to a new bitcoin node with a fresh wallet and we're good to go. With watch-only wallets we would first need to rebuild this wallet, which could take hours, before we're operational again.\r\n\r\n=> I still believe that indexing \"spending\" transactions is a better approach than watch-only wallets.",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276595646",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "commented",
      "id": 1276604721,
      "node_id": "IC_kwDOABII585MF3Ex",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276604721",
      "actor": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-12T18:58:16Z",
      "updated_at": "2022-10-12T18:58:16Z",
      "author_association": "MEMBER",
      "body": "Thanks for the clarification @sstone. \r\n> I still believe that indexing \"spending\" transactions is a better approach than watch-only wallets.\r\n\r\nAgreed, this is Concept ACK for me then.\r\n\r\n> rebuilding a node can be done very quickly, as we don't even need to restore the bitcoin wallet that we used before (we just need to have a backup): we can just point our system to a new bitcoin node with a fresh wallet and we're good to go. With watch-only wallets we would first need to rebuild this wallet, which could take hours, before we're operational again.\r\n\r\nThe \"new bitcoin node\" would still need to have the `txospenderindex` constructed though right? Which also takes some time no?",
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276604721",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "mentioned",
      "id": 7574514401,
      "node_id": "MEE_lADOABII585Fi6uozwAAAAHDeerh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7574514401",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-12T18:58:17Z"
    },
    {
      "event": "subscribed",
      "id": 7574514408,
      "node_id": "SE_lADOABII585Fi6uozwAAAAHDeero",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7574514408",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-12T18:58:17Z"
    },
    {
      "event": "commented",
      "id": 1277200926,
      "node_id": "IC_kwDOABII585MIIoe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1277200926",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-13T08:05:05Z",
      "updated_at": "2022-10-13T08:05:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The \"new bitcoin node\" would still need to have the `txospenderindex` constructed though right? Which also takes some time no?\r\n\r\nYes, you would need to run your bitcoin nodes with -txospenderindex and -txindex (but theses indexes are \"generic\" and completely independent from your application). \r\n\r\n",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1277200926",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "reviewed",
      "id": 1140554364,
      "node_id": "PRR_kwDOABII585D-3p8",
      "url": null,
      "actor": null,
      "commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "LGTM.\r\nI tried this:\r\n```bash\r\n./src/bitcoin-cli -testnet gettxspendingprevout '[{\"txid\": \"f52c6102a5e9b9d11ff5edf0d888009cdcad85b44a7e83f057cf934745d9dce2\", \"vout\": 1}]'\r\n[\r\n  {\r\n    \"txid\": \"f52c6102a5e9b9d11ff5edf0d888009cdcad85b44a7e83f057cf934745d9dce2\",\r\n    \"vout\": 1,\r\n    \"spendingtxid\": \"cb891f936bb45b347495542ebc7f413db612424c5516e14faef0239fbedecee1\"\r\n  }\r\n]\r\n```\r\nThe information returned is correct (https://blockstream.info/testnet/tx/f52c6102a5e9b9d11ff5edf0d888009cdcad85b44a7e83f057cf934745d9dce2?output:1).\r\n\r\nHere's the result on `master`:\r\n```bash\r\n./src/bitcoin-cli -testnet gettxspendingprevout '[{\"txid\": \"f52c6102a5e9b9d11ff5edf0d888009cdcad85b44a7e83f057cf934745d9dce2\", \"vout\": 1}]'\r\n[\r\n  {\r\n    \"txid\": \"f52c6102a5e9b9d11ff5edf0d888009cdcad85b44a7e83f057cf934745d9dce2\",\r\n    \"vout\": 1\r\n  }\r\n]\r\n```\r\n\r\nI verified that if the spending transaction is already in the mempool, `gettxspendingprevout` behaves the same on master and this PR.\r\n\r\nFor info, the index is `6.7GB` on testnet, and 110GB on mainnet. \r\n\r\nI would also suggest splitting the PR in 3 commits (index, rpc and test) for easier review.\r\n",
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-1140554364",
      "submitted_at": "2022-10-13T11:44:09Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "reviewed",
      "id": 1140675810,
      "node_id": "PRR_kwDOABII585D_VTi",
      "url": null,
      "actor": null,
      "commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "didn't review, but left some nits (no need to address them, unless you push for other reasons)",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-1140675810",
      "submitted_at": "2022-10-13T12:20:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "commented",
      "id": 1320276112,
      "node_id": "IC_kwDOABII585OsdCQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1320276112",
      "actor": {
        "login": "Pantamis",
        "id": 13965245,
        "node_id": "MDQ6VXNlcjEzOTY1MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/13965245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Pantamis",
        "html_url": "https://github.com/Pantamis",
        "followers_url": "https://api.github.com/users/Pantamis/followers",
        "following_url": "https://api.github.com/users/Pantamis/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Pantamis/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Pantamis/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Pantamis/subscriptions",
        "organizations_url": "https://api.github.com/users/Pantamis/orgs",
        "repos_url": "https://api.github.com/users/Pantamis/repos",
        "events_url": "https://api.github.com/users/Pantamis/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Pantamis/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-18T16:50:46Z",
      "updated_at": "2022-11-18T16:50:46Z",
      "author_association": "NONE",
      "body": "I did not review the code but tested the PR at commit 972728ab72b63ad074ffc1f2d8275d0c05672fa8 and it works.\r\n\r\nIt would be great to reduce the size of the index because it is well larger than `txindex`:\r\n\r\n```\r\nbitcoin/indexes $ du -h --max-depth=1\r\n119G\t./txospenderindex\r\n38G\t./txindex\r\n157G\t.\r\n```\r\nInstead of storing outpoint (32 + 4 bytes) -> txid (32 bytes) it could be outpointhash (32  bytes) -> txid (32 bytes) to gain 4 bytes per txos (or even using RIPEMD160 to gain 4 + 12 bytes per txo).\r\n\r\nThe txospenderindex stores redondantly the funding_txid as key for each transaction's outputs. It could be made almost half its current size if it was possible to store with the following schema: \r\n\r\nfunding_txid (32 bytes) -> concat_txids (32 * number_of_outpoints_in_funding_txid bytes)\r\n\r\nwhere concat_txid would be all the spending txid concatenated in the order of the vout of the funding transaction or 32 bytes at 0 if the outpoint is unspent. To get the spending transaction of an outpoint txid:vout, you would just have to read the bytes 32 * vout to 32 * (vout+1)  of the concat_txids given by the index. However this requires modifying the value at a given key during the sync of the index, I don't know if it is an issue.\r\n\r\nIt could be nice to provide more informations on the spending transaction too, like blockheight of spending transaction and the index of the input spending the outpoint in the spending transaction althought not necessary since these information can be found by using `txindex`.",
      "user": {
        "login": "Pantamis",
        "id": 13965245,
        "node_id": "MDQ6VXNlcjEzOTY1MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/13965245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Pantamis",
        "html_url": "https://github.com/Pantamis",
        "followers_url": "https://api.github.com/users/Pantamis/followers",
        "following_url": "https://api.github.com/users/Pantamis/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Pantamis/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Pantamis/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Pantamis/subscriptions",
        "organizations_url": "https://api.github.com/users/Pantamis/orgs",
        "repos_url": "https://api.github.com/users/Pantamis/repos",
        "events_url": "https://api.github.com/users/Pantamis/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Pantamis/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1320276112",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "commented",
      "id": 1322129396,
      "node_id": "IC_kwDOABII585Ozhf0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1322129396",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-21T14:16:01Z",
      "updated_at": "2022-11-21T14:16:01Z",
      "author_association": "CONTRIBUTOR",
      "body": "> It would be great to reduce the size of the index because it is well larger than `txindex`:\r\n> ...\r\n> Instead of storing outpoint (32 + 4 bytes) -> txid (32 bytes) it could be outpointhash (32 bytes) -> txid (32 bytes) to gain 4 bytes per txos (or even using RIPEMD160 to gain 4 + 12 bytes per txo).\r\n\r\nI went for a simple scheme that is easy to use and did not try to optimize for space as it would still be O(n) so there's not much to be gained unless I'm missing something.\r\nIt could be made smaller by using `blockheight | txindex |outputindex` (8 bytes) instead of txids ((this is how we define \"short channel ids\" in LN), but it would be harder to use. \r\n  \r\n> The txospenderindex stores redondantly the funding_txid as key for each transaction's outputs. It could be made almost half its current size if it was possible to store with the following schema:\r\n> \r\n> funding_txid (32 bytes) -> concat_txids (32 * number_of_outpoints_in_funding_txid bytes)\r\n> \r\n> where concat_txid would be all the spending txid concatenated in the order of the vout of the funding transaction or 32 bytes at 0 if the outpoint is unspent. To get the spending transaction of an outpoint txid:vout, you would just have to read the bytes 32 * vout to 32 * (vout+1) of the concat_txids given by the index. However this requires modifying the value at a given key during the sync of the index, I don't know if it is an issue.\r\n> \r\n\r\nSame reason as above, I'll have a look but I'm not sure the gain is worth the added complexity.\r\n\r\n> It could be nice to provide more informations on the spending transaction too, like blockheight of spending transaction and the index of the input spending the outpoint in the spending transaction althought not necessary since these information can be found by using `txindex`.\r\n\r\nYes, I supposed that users would call `gettransaction` to get additional info on the spending tx \r\n\r\n",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1322129396",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "reviewed",
      "id": 1188968612,
      "node_id": "PRR_kwDOABII585G3jik",
      "url": null,
      "actor": null,
      "commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-1188968612",
      "submitted_at": "2022-11-21T22:01:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7869473337,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHVDqI5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7869473337",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-22T16:08:47Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7879596144,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHVqRhw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7879596144",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-23T18:01:53Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7941177033,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHZVL7J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7941177033",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-02T14:27:06Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7941320883,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHZVvCz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7941320883",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-02T14:45:17Z"
    },
    {
      "event": "reviewed",
      "id": 1204651133,
      "node_id": "PRR_kwDOABII585HzYR9",
      "url": null,
      "actor": null,
      "commit_id": "47e60750e7de54365dba3651b412716af552f85f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-1204651133",
      "submitted_at": "2022-12-05T14:27:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "labeled",
      "id": 7970455511,
      "node_id": "LE_lADOABII585Fi6uozwAAAAHbE3_X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7970455511",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-06T20:07:46Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7978142479,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHbiMsP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7978142479",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-07T14:01:39Z"
    },
    {
      "event": "unlabeled",
      "id": 7978810264,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAHbkvuY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7978810264",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-07T15:06:39Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8374655068,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHzKxhc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8374655068",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-27T15:50:10Z"
    },
    {
      "event": "labeled",
      "id": 8913456669,
      "node_id": "LE_lADOABII585Fi6uozwAAAAITSI4d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8913456669",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T14:07:24Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8914750217,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAITXEsJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8914750217",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T16:01:22Z"
    },
    {
      "event": "unlabeled",
      "id": 8914914692,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAITXs2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8914914692",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T16:16:19Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9082659489,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAIdXmKh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9082659489",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-24T15:04:54Z"
    },
    {
      "event": "labeled",
      "id": 9237859929,
      "node_id": "LE_lADOABII585Fi6uozwAAAAImno5Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9237859929",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-13T05:54:06Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unsubscribed",
      "id": 9281775210,
      "node_id": "UE_lADOABII585Fi6uozwAAAAIpPKZq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9281775210",
      "actor": {
        "login": "joostjager",
        "id": 4638168,
        "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joostjager",
        "html_url": "https://github.com/joostjager",
        "followers_url": "https://api.github.com/users/joostjager/followers",
        "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
        "organizations_url": "https://api.github.com/users/joostjager/orgs",
        "repos_url": "https://api.github.com/users/joostjager/repos",
        "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/joostjager/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T16:41:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9286450296,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAIpg_x4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9286450296",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-19T07:11:42Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9287920726,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAIpmmxW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9287920726",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-19T10:14:45Z"
    },
    {
      "event": "unlabeled",
      "id": 9295604388,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAIqD6qk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9295604388",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-21T08:41:25Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 9384952005,
      "node_id": "LE_lADOABII585Fi6uozwAAAAIvYwDF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9384952005",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T03:29:53Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFkNDJjMjhkZmMwMzBiYzk0ZmNkMjNjMmJjNWY1MTZiYTEwYjE4MDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ad42c28dfc030bc94fcd23c2bc5f516ba10b1808",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ad42c28dfc030bc94fcd23c2bc5f516ba10b1808",
      "tree": {
        "sha": "d444d3e11d9dcd1d6559e273380fe828ed42f128",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d444d3e11d9dcd1d6559e273380fe828ed42f128"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f4a8269dfc144cc918570bdb870aa5143a11c1fe",
          "sha": "f4a8269dfc144cc918570bdb870aa5143a11c1fe",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f4a8269dfc144cc918570bdb870aa5143a11c1fe"
        }
      ],
      "message": "Add a \"tx output spender\" index\n\nAdds an outpoint -> txid index, which can be used to find which transactions spent a given output.\nThis is extremely useful for Lightning and more generally for layer-2 protocol that rely on chains of unpublished transactions.\nIf enabled, this index will be used by `gettxspendingprevout` when it does not find a spending transaction in the mempool.",
      "committer": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2023-06-05T15:59:42Z"
      },
      "author": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2022-03-10T09:26:57Z"
      },
      "sha": "ad42c28dfc030bc94fcd23c2bc5f516ba10b1808"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU3NjdkMDRjMDZjZTM5ZWY3MjJiNzE4ZDNkZDE4ZjIyM2NmNzk1MmI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e767d04c06ce39ef722b718d3dd18f223cf7952b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e767d04c06ce39ef722b718d3dd18f223cf7952b",
      "tree": {
        "sha": "07a2468cd3b2e8ce30dcaf393c9ab7ac5247baed",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/07a2468cd3b2e8ce30dcaf393c9ab7ac5247baed"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ad42c28dfc030bc94fcd23c2bc5f516ba10b1808",
          "sha": "ad42c28dfc030bc94fcd23c2bc5f516ba10b1808",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ad42c28dfc030bc94fcd23c2bc5f516ba10b1808"
        }
      ],
      "message": "Warn if a spending tx was found but the index was not synced yet\n\nThis spending tx may be removed or replaced by a reorg that has not been synced yet.",
      "committer": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2023-06-05T15:59:42Z"
      },
      "author": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2022-12-01T18:30:26Z"
      },
      "sha": "e767d04c06ce39ef722b718d3dd18f223cf7952b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUyMDhmZjhiZjdhZmYyZDMzOTM1NTNlMWE2Y2JmNzZkYTlmM2UwMTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "tree": {
        "sha": "cd8dd4568cc5bcc6e0c18d81f7ab4fec8bd32267",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cd8dd4568cc5bcc6e0c18d81f7ab4fec8bd32267"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e767d04c06ce39ef722b718d3dd18f223cf7952b",
          "sha": "e767d04c06ce39ef722b718d3dd18f223cf7952b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e767d04c06ce39ef722b718d3dd18f223cf7952b"
        }
      ],
      "message": "Do not require -txindex for -txospenderindex\n\nThis makes -txospenderindex compatible with pruning too.",
      "committer": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2023-06-05T15:59:42Z"
      },
      "author": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2022-12-02T13:32:23Z"
      },
      "sha": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9435682643,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAIyaRdT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9435682643",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-05T16:13:59Z"
    },
    {
      "event": "unlabeled",
      "id": 9436392478,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAIyc-we",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9436392478",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-05T17:30:30Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825489966",
      "pull_request_review_id": 908174478,
      "id": 825489966,
      "node_id": "PRRC_kwDOABII584xM_ou",
      "diff_hunk": "@@ -857,6 +866,8 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n     if (args.GetIntArg(\"-prune\", 0)) {\n         if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n+        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX))",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should use DEFAULT_TXOSPENDERINDEX",
      "created_at": "2022-03-13T18:58:24Z",
      "updated_at": "2022-03-13T21:25:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825489966",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825489966"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 869,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825490023",
      "pull_request_review_id": 908174478,
      "id": 825490023,
      "node_id": "PRRC_kwDOABII584xM_pn",
      "diff_hunk": "@@ -1397,6 +1408,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n         LogPrintf(\"* Using %.1f MiB for transaction index database\\n\", cache_sizes.tx_index * (1.0 / 1024 / 1024));\n     }\n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX)) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 50,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "DEFAULT_TXOSPENDERINDEX here as well",
      "created_at": "2022-03-13T18:59:04Z",
      "updated_at": "2022-03-13T21:25:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825490023",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825490023"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494247",
      "pull_request_review_id": 908174478,
      "id": 825494247,
      "node_id": "PRRC_kwDOABII584xNArn",
      "diff_hunk": "@@ -268,6 +269,43 @@ static RPCHelpMan getrawtransaction()\n     };\n }\n \n+static RPCHelpMan gettxospender()\n+{\n+    return RPCHelpMan{\"gettxospender\",\n+                \"\\nReturns the id of the transaction that spend the provided outpoint.\\n\",\n+                {\n+                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The outpoint transaction id\"},\n+                    {\"index\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The outpoint output index\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::STR_HEX, \"\", \"The id of the transaction that spend the provided outpoint\"},",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "spends",
      "created_at": "2022-03-13T19:38:19Z",
      "updated_at": "2022-03-13T21:25:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494247",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494247"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 281,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494466",
      "pull_request_review_id": 908174478,
      "id": 825494466,
      "node_id": "PRRC_kwDOABII584xNAvC",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txindex database (indexes/txindex/) */",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "update comment",
      "created_at": "2022-03-13T19:39:48Z",
      "updated_at": "2022-03-13T21:25:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494466",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494466"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494504",
      "pull_request_review_id": 908174478,
      "id": 825494504,
      "node_id": "PRRC_kwDOABII584xNAvo",
      "diff_hunk": "@@ -0,0 +1,44 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+/**\n+ * TxIndex is used to look up transactions included in the blockchain by hash.",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 11,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "update comment",
      "created_at": "2022-03-13T19:40:00Z",
      "updated_at": "2022-03-13T21:25:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494504",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494504"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797435",
      "pull_request_review_id": 908575857,
      "id": 825797435,
      "node_id": "PRRC_kwDOABII584xOKs7",
      "diff_hunk": "@@ -857,6 +866,8 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n     if (args.GetIntArg(\"-prune\", 0)) {\n         if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n+        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX))",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": 825489966,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at": "2022-03-14T10:28:47Z",
      "updated_at": "2022-03-14T10:28:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797435",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797435"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 869,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797563",
      "pull_request_review_id": 908576025,
      "id": 825797563,
      "node_id": "PRRC_kwDOABII584xOKu7",
      "diff_hunk": "@@ -1397,6 +1408,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n         LogPrintf(\"* Using %.1f MiB for transaction index database\\n\", cache_sizes.tx_index * (1.0 / 1024 / 1024));\n     }\n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX)) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 50,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": 825490023,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at": "2022-03-14T10:28:57Z",
      "updated_at": "2022-03-14T10:28:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797563",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797563"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797688",
      "pull_request_review_id": 908576192,
      "id": 825797688,
      "node_id": "PRRC_kwDOABII584xOKw4",
      "diff_hunk": "@@ -268,6 +269,43 @@ static RPCHelpMan getrawtransaction()\n     };\n }\n \n+static RPCHelpMan gettxospender()\n+{\n+    return RPCHelpMan{\"gettxospender\",\n+                \"\\nReturns the id of the transaction that spend the provided outpoint.\\n\",\n+                {\n+                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The outpoint transaction id\"},\n+                    {\"index\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The outpoint output index\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::STR_HEX, \"\", \"The id of the transaction that spend the provided outpoint\"},",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": 825494247,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at": "2022-03-14T10:29:06Z",
      "updated_at": "2022-03-14T10:29:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797688",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797688"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 281,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797820",
      "pull_request_review_id": 908576381,
      "id": 825797820,
      "node_id": "PRRC_kwDOABII584xOKy8",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txindex database (indexes/txindex/) */",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": 825494466,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at": "2022-03-14T10:29:15Z",
      "updated_at": "2022-03-14T10:29:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797820",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797820"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797928",
      "pull_request_review_id": 908576548,
      "id": 825797928,
      "node_id": "PRRC_kwDOABII584xOK0o",
      "diff_hunk": "@@ -0,0 +1,44 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+/**\n+ * TxIndex is used to look up transactions included in the blockchain by hash.",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 11,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": 825494504,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at": "2022-03-14T10:29:23Z",
      "updated_at": "2022-03-14T10:29:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797928",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797928"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856687862",
      "pull_request_review_id": 950732877,
      "id": 856687862,
      "node_id": "PRRC_kwDOABII584zEAT2",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the gettxospender RPC call.\n+\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    find_vout_for_address,\n+)\n+\n+class GetTxoSpenderTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-txindex\", \"-txospenderindex\"],\n+            [\"-txindex\"],\n+        ]\n+        # whitelist all peers to speed up tx relay / mempool sync\n+        for args in self.extra_args:\n+            args.append(\"-whitelist=noban@127.0.0.1\")\n+\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "path": "test/functional/rpc_txospender.py",
      "position": null,
      "original_position": 31,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "RPC tests shouldn't require wallet, please use `MiniWallet`",
      "created_at": "2022-04-23T00:40:54Z",
      "updated_at": "2022-04-23T00:41:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r856687862",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856687862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 30,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857127463",
      "pull_request_review_id": 951206356,
      "id": 857127463,
      "node_id": "PRRC_kwDOABII584zFron",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the gettxospender RPC call.\n+\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    find_vout_for_address,\n+)\n+\n+class GetTxoSpenderTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-txindex\", \"-txospenderindex\"],\n+            [\"-txindex\"],\n+        ]\n+        # whitelist all peers to speed up tx relay / mempool sync\n+        for args in self.extra_args:\n+            args.append(\"-whitelist=noban@127.0.0.1\")\n+\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "path": "test/functional/rpc_txospender.py",
      "position": null,
      "original_position": 31,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "in_reply_to_id": 856687862,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I've translated the test to MiniWallet. If you take it, make sure to rebase on current master first, as it is using new MiniWallet functions.\r\n\r\nAlso, I am removing not needed stuff. Let me know if you have any questions. And no need to mention me in the commit as author.\r\n\r\n```diff\r\ndiff --git a/test/functional/rpc_txospender.py b/test/functional/rpc_txospender.py\r\nindex 1d7157e9bf..c063b4e502 100755\r\n--- a/test/functional/rpc_txospender.py\r\n+++ b/test/functional/rpc_txospender.py\r\n@@ -10,57 +10,36 @@ from test_framework.test_framework import BitcoinTestFramework\r\n from test_framework.util import (\r\n     assert_equal,\r\n     assert_raises_rpc_error,\r\n-    find_vout_for_address,\r\n )\r\n+from test_framework.wallet import MiniWallet\r\n+\r\n \r\n class GetTxoSpenderTest(BitcoinTestFramework):\r\n     def set_test_params(self):\r\n-        self.setup_clean_chain = True\r\n         self.num_nodes = 2\r\n         self.extra_args = [\r\n             [\"-txindex\", \"-txospenderindex\"],\r\n             [\"-txindex\"],\r\n         ]\r\n-        # whitelist all peers to speed up tx relay / mempool sync\r\n-        for args in self.extra_args:\r\n-            args.append(\"-whitelist=noban@127.0.0.1\")\r\n-\r\n         self.supports_cli = False\r\n \r\n-    def skip_test_if_missing_module(self):\r\n-        self.skip_if_no_wallet()\r\n-\r\n-    def setup_network(self):\r\n-        super().setup_network()\r\n-        self.connect_nodes(0, 1)\r\n-\r\n     def run_test(self):\r\n-        self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\r\n-        self.generate(self.nodes[1], 1)\r\n-        self.generate(self.nodes[0], COINBASE_MATURITY + 1)\r\n-        self.sync_all()\r\n-        self.generate(self.nodes[0], 5)\r\n+        self.wallet = MiniWallet(self.nodes[1])\r\n+        self.wallet.rescan_utxos()\r\n \r\n         self.gettxospender_tests()\r\n \r\n     def gettxospender_tests(self):\r\n-        addr = self.nodes[1].getnewaddress()\r\n-        txid = self.nodes[0].sendtoaddress(addr, 10)\r\n-        self.generate(self.nodes[0], 1)\r\n-        vout = find_vout_for_address(self.nodes[1], txid, addr)\r\n-        rawTx = self.nodes[1].createrawtransaction([{'txid': txid, 'vout': vout}], {self.nodes[1].getnewaddress(): 9.999})\r\n-        rawTxSigned = self.nodes[1].signrawtransactionwithwallet(rawTx)\r\n-        txId = self.nodes[1].sendrawtransaction(rawTxSigned['hex'])\r\n-        self.generateblock(self.nodes[0], output=self.nodes[0].getnewaddress(), transactions=[rawTxSigned['hex']])\r\n+        partially_spent_tx = self.wallet.send_self_transfer_multi(from_node=self.nodes[1], num_outputs=2)\r\n+        num_out = 1\r\n+        spending_txid = self.wallet.send_self_transfer(from_node=self.nodes[1], utxo_to_spend=partially_spent_tx[\"new_utxos\"][num_out])[\"txid\"]\r\n+        self.generate(self.wallet, 1)\r\n \r\n-        for n in [0, 1]:\r\n-            self.log.info(f\"Test gettxospender {'with' if n == 0 else 'without'} -txospenderindex\")\r\n+        self.log.info(f\"Test gettxospender with -txospenderindex\")\r\n+        assert_equal(self.nodes[0].gettxospender(partially_spent_tx[\"txid\"], num_out), spending_txid)\r\n+        self.log.info(f\"Test gettxospender without -txospenderindex\")\r\n+        assert_raises_rpc_error(-8, \"This RPC call requires -txospenderindex to be enabled.\", self.nodes[1].gettxospender, partially_spent_tx[\"txid\"], num_out)\r\n \r\n-            if n == 0:\r\n-                assert_equal(self.nodes[n].gettxospender(txid, vout), txId)\r\n-            else:\r\n-                # Without -txospenderindex, expect to raise.\r\n-                assert_raises_rpc_error(-8, \"This RPC call requires -txospenderindex to be enabled.\", self.nodes[n].gettxospender, txid, vout)\r\n \r\n-if __name__ == '__main__':\r\n+if __name__ == \"__main__\":\r\n     GetTxoSpenderTest().main()\r\n",
      "created_at": "2022-04-24T13:34:15Z",
      "updated_at": "2022-04-24T13:34:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r857127463",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857127463"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 30,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857855347",
      "pull_request_review_id": 952206496,
      "id": 857855347,
      "node_id": "PRRC_kwDOABII584zIdVz",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the gettxospender RPC call.\n+\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    find_vout_for_address,\n+)\n+\n+class GetTxoSpenderTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-txindex\", \"-txospenderindex\"],\n+            [\"-txindex\"],\n+        ]\n+        # whitelist all peers to speed up tx relay / mempool sync\n+        for args in self.extra_args:\n+            args.append(\"-whitelist=noban@127.0.0.1\")\n+\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "path": "test/functional/rpc_txospender.py",
      "position": null,
      "original_position": 31,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "in_reply_to_id": 856687862,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks! I've rebased on https://github.com/bitcoin/bitcoin/pull/24408 and used your code to extend its RPC test",
      "created_at": "2022-04-25T17:16:43Z",
      "updated_at": "2022-04-25T17:16:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r857855347",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857855347"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 30,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862144297",
      "pull_request_review_id": 958241302,
      "id": 862144297,
      "node_id": "PRRC_kwDOABII584zY0cp",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>",
      "path": "src/index/txospenderindex.cpp",
      "position": 7,
      "original_position": 1,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Missing copyright/license header",
      "created_at": "2022-04-29T20:54:08Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862144297",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862144297"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862146611",
      "pull_request_review_id": 958241302,
      "id": 862146611,
      "node_id": "PRRC_kwDOABII584zY1Az",
      "diff_hunk": "@@ -1574,6 +1588,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX)) {\n+        if (!args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"-txospenderindex requires -txindex.\"));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe(?) should SoftSetArg in param interaction",
      "created_at": "2022-04-29T20:56:36Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862146611",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862146611"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1584,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862149848",
      "pull_request_review_id": 958241302,
      "id": 862149848,
      "node_id": "PRRC_kwDOABII584zY1zY",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 72,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Suggest moving this below where it's actually needed/used.\r\n\r\nNote this is non-trivial: we shouldn't re-\"block\" for each outpoint, and lock order might matter.",
      "created_at": "2022-04-29T21:01:26Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862149848",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862149848"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 651,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862150115",
      "pull_request_review_id": 958241302,
      "id": 862150115,
      "node_id": "PRRC_kwDOABII584zY13j",
      "diff_hunk": "@@ -0,0 +1,121 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+         self.num_nodes = 3\n+         self.extra_args = [\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\"],\n+         ]",
      "path": "test/functional/rpc_mempool_info.py",
      "position": null,
      "original_position": 23,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Block indented 1 space too many",
      "created_at": "2022-04-29T21:01:51Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862150115",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862150115"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 18,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862152877",
      "pull_request_review_id": 958241302,
      "id": 862152877,
      "node_id": "PRRC_kwDOABII584zY2it",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 1,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Wrong year range",
      "created_at": "2022-04-29T21:05:34Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862152877",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862152877"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862156731",
      "pull_request_review_id": 958241302,
      "id": 862156731,
      "node_id": "PRRC_kwDOABII584zY3e7",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Space at the end instead of punctuation",
      "created_at": "2022-04-29T21:13:19Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862156731",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862156731"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862157126",
      "pull_request_review_id": 958241302,
      "id": 862157126,
      "node_id": "PRRC_kwDOABII584zY3lG",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Doesn't say *which* output triggers it, and blocks partial results.\r\n\r\nSuggest something like a \"warnings\" key on the output result.",
      "created_at": "2022-04-29T21:14:09Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862157126",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862157126"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862187808",
      "pull_request_review_id": 958241302,
      "id": 862187808,
      "node_id": "PRRC_kwDOABII584zY_Eg",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "RPC_INVALID_ADDRESS_OR_KEY seems like the wrong code to use",
      "created_at": "2022-04-29T21:46:18Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862187808",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862187808"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862487923",
      "pull_request_review_id": 958601762,
      "id": 862487923,
      "node_id": "PRRC_kwDOABII584zaIVz",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index",
      "path": "src/rpc/mempool.cpp",
      "position": 70,
      "original_position": 88,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps a new field could be added to the response indicating whether the transaction is in the mempool or not?\r\nSomething like:\r\n```c++\r\no.pushKV(\"in_mempool\", true); // or false\r\n```",
      "created_at": "2022-05-01T15:15:10Z",
      "updated_at": "2022-05-01T15:16:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862487923",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862487923"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 693,
      "original_line": 693,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862938062",
      "pull_request_review_id": 959202584,
      "id": 862938062,
      "node_id": "PRRC_kwDOABII584zb2PO",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is there any reason to use `std::make_pair(DB_TXOSPENDERINDEX, tuple.first)`  as the key instead of just  `tuple.first` ?\r\n\r\n`DB_TXOSPENDERINDEX` seems redundant.",
      "created_at": "2022-05-02T15:18:20Z",
      "updated_at": "2022-05-02T15:18:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862938062",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862938062"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863085647",
      "pull_request_review_id": 959413555,
      "id": 863085647,
      "node_id": "PRRC_kwDOABII584zcaRP",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 23,
      "original_position": 35,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This message needs to be changed, as the transaction may not be in the mempool, but in the blocks.\r\nThis field is no longer optional in this PR.\r\n\r\n```suggestion\r\n                    {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the id of the transaction that spends the output\"},\r\n```",
      "created_at": "2022-05-02T18:34:59Z",
      "updated_at": "2022-05-02T18:49:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r863085647",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863085647"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 619,
      "original_line": 619,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864062496",
      "pull_request_review_id": 960797515,
      "id": 864062496,
      "node_id": "PRRC_kwDOABII584zgIwg",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>",
      "path": "src/index/txospenderindex.cpp",
      "position": 7,
      "original_position": 1,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862144297,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks! I've applied your patch and updated python tests",
      "created_at": "2022-05-03T18:14:52Z",
      "updated_at": "2022-05-03T18:14:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864062496",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864062496"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864075572",
      "pull_request_review_id": 960826186,
      "id": 864075572,
      "node_id": "PRRC_kwDOABII584zgL80",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 72,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862149848,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That what I tried at first but could not get it to work without triggering a deadlock:\r\n```\r\nPOTENTIAL DEADLOCK DETECTED\r\nPrevious lock order was:\r\n(2) 'cs_main' in node/chainstate.cpp:30 (in thread 'qt-init')\r\n(1) 'cs' in txmempool.cpp:709 (in thread 'qt-init')\r\nCurrent lock order is:\r\n(1) 'mempool.cs' in rpc/mempool.cpp:676 (in thread 'qt-rpcconsole')\r\n(2) 'cs_main' in index/base.cpp:331 (in thread 'qt-rpcconsole')\r\n```",
      "created_at": "2022-05-03T18:32:54Z",
      "updated_at": "2022-05-03T18:32:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864075572",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864075572"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 651,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076176",
      "pull_request_review_id": 960829245,
      "id": 864076176,
      "node_id": "PRRC_kwDOABII584zgMGQ",
      "diff_hunk": "@@ -0,0 +1,121 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+         self.num_nodes = 3\n+         self.extra_args = [\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\"],\n+         ]",
      "path": "test/functional/rpc_mempool_info.py",
      "position": null,
      "original_position": 23,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862150115,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:33:46Z",
      "updated_at": "2022-05-03T18:33:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076176",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076176"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 18,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076237",
      "pull_request_review_id": 960829715,
      "id": 864076237,
      "node_id": "PRRC_kwDOABII584zgMHN",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 1,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862152877,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:33:53Z",
      "updated_at": "2022-05-03T18:33:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076237",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076237"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076338",
      "pull_request_review_id": 960830357,
      "id": 864076338,
      "node_id": "PRRC_kwDOABII584zgMIy",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862156731,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:34:01Z",
      "updated_at": "2022-05-03T18:34:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076338",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076338"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076573",
      "pull_request_review_id": 960831256,
      "id": 864076573,
      "node_id": "PRRC_kwDOABII584zgMMd",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862157126,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:34:14Z",
      "updated_at": "2022-05-03T18:34:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076573",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076573"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076726",
      "pull_request_review_id": 960831665,
      "id": 864076726,
      "node_id": "PRRC_kwDOABII584zgMO2",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862187808,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:34:22Z",
      "updated_at": "2022-05-03T18:34:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076726",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076726"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864078378",
      "pull_request_review_id": 960835258,
      "id": 864078378,
      "node_id": "PRRC_kwDOABII584zgMoq",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index",
      "path": "src/rpc/mempool.cpp",
      "position": 70,
      "original_position": 88,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862487923,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm not sure it is needed: caller will receive a list of tx ids and will call `getrawtransaction` which will include number of confirmations etc....",
      "created_at": "2022-05-03T18:35:53Z",
      "updated_at": "2022-05-03T18:35:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864078378",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864078378"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 693,
      "original_line": 693,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864081172",
      "pull_request_review_id": 960838860,
      "id": 864081172,
      "node_id": "PRRC_kwDOABII584zgNUU",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862938062,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is how all other indexes work even when there is just one possible key. Maybe because it makes it easier to add new record type later with a new key prefix ?",
      "created_at": "2022-05-03T18:37:45Z",
      "updated_at": "2022-05-03T18:37:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864081172",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864081172"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864083637",
      "pull_request_review_id": 960840371,
      "id": 864083637,
      "node_id": "PRRC_kwDOABII584zgN61",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 23,
      "original_position": 35,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 863085647,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/commit/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:39:10Z",
      "updated_at": "2022-05-03T18:39:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864083637",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864083637"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 619,
      "original_line": 619,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994483806",
      "pull_request_review_id": 1140554364,
      "id": 994483806,
      "node_id": "PRRC_kwDOABII5847Rp5e",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit\r\n```suggestion\r\n    for (const auto& [outPoint, hash] : items) {\r\n        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, outPoint), hash);\r\n```",
      "created_at": "2022-10-13T10:51:21Z",
      "updated_at": "2022-10-13T11:44:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r994483806",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994483806"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994567590",
      "pull_request_review_id": 1140673527,
      "id": 994567590,
      "node_id": "PRRC_kwDOABII5847R-Wm",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 994483806,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "we use snake_case, so if this suggestion is taken, it should be `outpoint` or `out_point`",
      "created_at": "2022-10-13T12:16:40Z",
      "updated_at": "2022-10-13T12:16:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r994567590",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994567590"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994569142",
      "pull_request_review_id": 1140675810,
      "id": 994569142,
      "node_id": "PRRC_kwDOABII5847R-u2",
      "diff_hunk": "@@ -881,6 +890,8 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n     if (args.GetIntArg(\"-prune\", 0)) {\n         if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n+        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX))",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit for new code: (only if you retouch)\r\n```suggestion\r\n        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX)) {\r\n```",
      "created_at": "2022-10-13T12:18:14Z",
      "updated_at": "2022-10-13T12:20:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r994569142",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994569142"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 893,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994570253",
      "pull_request_review_id": 1140675810,
      "id": 994570253,
      "node_id": "PRRC_kwDOABII5847R_AN",
      "diff_hunk": "@@ -644,6 +672,30 @@ static RPCHelpMan gettxspendingprevout()\n                 const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n                 if (spendingTx != nullptr) {\n                     o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (mempool_only.value_or(false)) {\n+                    // do nothing\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 72,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit (only if you retouch):\r\n```suggestion\r\n                    if (g_txospenderindex->FindSpender(prevout, spendingtxid)) {\r\n```",
      "created_at": "2022-10-13T12:19:24Z",
      "updated_at": "2022-10-13T12:20:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r994570253",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994570253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 680,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1000327209",
      "pull_request_review_id": 1148815922,
      "id": 1000327209,
      "node_id": "PRRC_kwDOABII5847n8gp",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 994483806,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks! I'll use your suggestions next time I rebase",
      "created_at": "2022-10-20T08:48:19Z",
      "updated_at": "2022-10-20T08:48:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1000327209",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1000327209"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028538250",
      "pull_request_review_id": 1188968612,
      "id": 1028538250,
      "node_id": "PRRC_kwDOABII5849Tj-K",
      "diff_hunk": "@@ -644,6 +672,30 @@ static RPCHelpMan gettxspendingprevout()\n                 const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n                 if (spendingTx != nullptr) {\n                     o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (mempool_only.value_or(false)) {\n+                    // do nothing\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        if (mempool_only.has_value()) {  // NOTE: value is false here\n+                            throw JSONRPCError(RPC_MISC_ERROR, strprintf(\"No spending tx for the outpoint %s:%d found, and txospenderindex is still being synced.\", prevout.hash.GetHex(), prevout.n));\n+                        } else {\n+                            UniValue warnings(UniValue::VARR);\n+                            warnings.push_back(\"txospenderindex is still being synced.\");\n+                            o.pushKV(\"warnings\", warnings);\n+                        }\n+                    }",
      "path": "src/rpc/mempool.cpp",
      "position": 88,
      "original_position": 82,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nI think we should be warning if the spending txid was found, but the index was not yet synced? It seems like it would be possible for a spend to have been recorded in the index, but was removed/changed by a reorg that has not been synced by the index yet.",
      "created_at": "2022-11-21T21:38:48Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028538250",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028538250"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": 703,
      "original_start_line": 682,
      "start_side": "RIGHT",
      "line": 711,
      "original_line": 711,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028539576",
      "pull_request_review_id": 1188968612,
      "id": 1028539576,
      "node_id": "PRRC_kwDOABII5849TkS4",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);\n+    }\n+    return WriteBatch(batch);\n+}\n+\n+bool TxoSpenderIndex::CustomAppend(const interfaces::BlockInfo& block)\n+{\n+    std::vector<std::pair<COutPoint, uint256>> items;\n+    items.reserve(block.data->vtx.size());\n+\n+    for (const auto& tx : block.data->vtx) {",
      "path": "src/index/txospenderindex.cpp",
      "position": 60,
      "original_position": 49,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nThis should skip coinbase transactions.",
      "created_at": "2022-11-21T21:40:42Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028539576",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028539576"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 60,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028541621",
      "pull_request_review_id": 1188968612,
      "id": 1028541621,
      "node_id": "PRRC_kwDOABII5849Tky1",
      "diff_hunk": "@@ -1520,6 +1534,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX)) {\n+        if (!args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"-txospenderindex requires -txindex.\"));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nI don't think it's necessary to require that txindex when enabling txospenderindex. There isn't anything in the txospenderindex that inherently requires the txindex (i.e. it isn't storing information specific to the txindex). I get that it isn't as useful without the txindex enabled, but that isn't really a reason to restrict it.\r\n\r\nRemoving this restriction would also allow txospenderindex to be enabled with pruning.",
      "created_at": "2022-11-21T21:43:30Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028541621",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028541621"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1584,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028542275",
      "pull_request_review_id": 1188968612,
      "id": 1028542275,
      "node_id": "PRRC_kwDOABII5849Tk9D",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+static constexpr bool DEFAULT_TXOSPENDERINDEX{false};\n+\n+/**\n+ * TxoSpenderIndex is used to look up which transaction spent a given output.\n+ * The index is written to a LevelDB database and, for each input of each transaction in a block,\n+ * records the outpoint that is spent and the hash of the spending transaction.\n+ */\n+class TxoSpenderIndex final : public BaseIndex\n+{\n+protected:\n+    class DB;\n+\n+private:\n+    const std::unique_ptr<DB> m_db;\n+\n+    bool AllowPrune() const override { return false; }",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 25,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nI don't see a technical reason for why the txospenderindex should not work with pruning (other than the current requirement of -txindex). It doesn't store any information related to the block files.",
      "created_at": "2022-11-21T21:44:23Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028542275",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028542275"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028544839",
      "pull_request_review_id": 1188968612,
      "id": 1028544839,
      "node_id": "PRRC_kwDOABII5849TllH",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+static constexpr bool DEFAULT_TXOSPENDERINDEX{false};\n+\n+/**\n+ * TxoSpenderIndex is used to look up which transaction spent a given output.\n+ * The index is written to a LevelDB database and, for each input of each transaction in a block,\n+ * records the outpoint that is spent and the hash of the spending transaction.\n+ */\n+class TxoSpenderIndex final : public BaseIndex\n+{\n+protected:\n+    class DB;\n+\n+private:\n+    const std::unique_ptr<DB> m_db;\n+\n+    bool AllowPrune() const override { return false; }\n+\n+protected:\n+    bool CustomAppend(const interfaces::BlockInfo& block) override;",
      "path": "src/index/txospenderindex.h",
      "position": 28,
      "original_position": 28,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nI think this will need to implement `CustomRewind` as well so that reorgs can be handled. Otherwise, as it is now, a reorg that removes a spend and does not replace it with a conflicting one will leave the original spend in the index. However it would be incorrect to say that that txo has been spent as in the main chain following the reorg, the txo was not spent.\r\n\r\nSo `CustomRewind` is needed in order to remove those records.\r\n\r\nA test for this condition would also be nice.",
      "created_at": "2022-11-21T21:48:01Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028544839",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028544839"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028547783",
      "pull_request_review_id": 1188968612,
      "id": 1028547783,
      "node_id": "PRRC_kwDOABII5849TmTH",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nWrong date range here.",
      "created_at": "2022-11-21T21:52:11Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028547783",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028547783"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028548977",
      "pull_request_review_id": 1188968612,
      "id": 1028548977,
      "node_id": "PRRC_kwDOABII5849Tmlx",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <index/txospenderindex.h>\n+#include <script/standard.h>\n+#include <test/util/setup_common.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(txospenderindex_tests)\n+\n+BOOST_FIXTURE_TEST_CASE(txospenderindex_initial_sync, TestChain100Setup)\n+{\n+    TxoSpenderIndex txospenderindex(interfaces::MakeChain(m_node), 1 << 20, true);\n+    // Mine blocks for coinbase maturity, so we can spend some coinbase outputs in the test.\n+     for (int i = 0; i < 50; i++) {\n+         std::vector<CMutableTransaction> no_txns;\n+         CreateAndProcessBlock(no_txns, this->m_coinbase_txns[i]->vout[0].scriptPubKey);\n+     }\n+    std::vector<COutPoint> spent(10);\n+    std::vector<CMutableTransaction> spender(spent.size());\n+\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        spent[i] = COutPoint(this->m_coinbase_txns[i]->GetHash(), 0);\n+        spender[i].nVersion = 1;\n+        spender[i].vin.resize(1);\n+        spender[i].vin[0].prevout.hash = spent[i].hash;\n+        spender[i].vin[0].prevout.n = spent[i].n;\n+        spender[i].vout.resize(1);\n+        spender[i].vout[0].nValue = this->m_coinbase_txns[i]->GetValueOut();\n+        spender[i].vout[0].scriptPubKey = this->m_coinbase_txns[i]->vout[0].scriptPubKey;\n+\n+        // Sign:\n+        std::vector<unsigned char> vchSig;\n+        const uint256 hash = SignatureHash(this->m_coinbase_txns[i]->vout[0].scriptPubKey, spender[i], 0, SIGHASH_ALL, 0, SigVersion::BASE);\n+        coinbaseKey.Sign(hash, vchSig);\n+        vchSig.push_back((unsigned char)SIGHASH_ALL);\n+        spender[i].vin[0].scriptSig << vchSig;\n+    }\n+\n+    CreateAndProcessBlock(spender, this->m_coinbase_txns[0]->vout[0].scriptPubKey);\n+    uint256 txid;\n+\n+    // Transaction should not be found in the index before it is started.\n+    for (const auto& outpoint : spent) {\n+        BOOST_CHECK(!txospenderindex.FindSpender(outpoint, txid));\n+    }\n+\n+    // BlockUntilSyncedToCurrentChain should return false before txindex is started.",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 53,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\ns/txindex/txospenderindex",
      "created_at": "2022-11-21T21:53:45Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028548977",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028548977"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 53,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028552792",
      "pull_request_review_id": 1188968612,
      "id": 1028552792,
      "node_id": "PRRC_kwDOABII5849TnhY",
      "diff_hunk": "@@ -60,8 +65,13 @@ def create_tx(**kwargs):\n             assert_equal(txid in mempool, True)\n \n         self.log.info(\"Find transactions spending outputs\")\n+        # spending transactions are found in the mempool of node 0 but not 1 and 2\n         result = self.nodes[0].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n         assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'spendingtxid' : txidA}, {'txid' : txidA, 'vout' : 1, 'spendingtxid' : txidC} ])\n+        result = self.nodes[1].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        result = self.nodes[2].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'warnings': ['txospenderindex is unavailable.']}, {'txid' : txidA, 'vout' : 1, 'warnings': ['txospenderindex is unavailable.']} ])",
      "path": "test/functional/rpc_mempool_info.py",
      "position": null,
      "original_position": 24,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nI don't see why the spends wouldn't be in nodes 1 and 2's mempools, other than that this is a race.",
      "created_at": "2022-11-21T21:59:11Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028552792",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028552792"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 71,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540125",
      "pull_request_review_id": 1190363982,
      "id": 1029540125,
      "node_id": "PRRC_kwDOABII5849XYkd",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 994483806,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:09:46Z",
      "updated_at": "2022-11-22T16:09:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029540125",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540125"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540434",
      "pull_request_review_id": 1190364412,
      "id": 1029540434,
      "node_id": "PRRC_kwDOABII5849XYpS",
      "diff_hunk": "@@ -881,6 +890,8 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n     if (args.GetIntArg(\"-prune\", 0)) {\n         if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n+        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX))",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 994569142,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:10:02Z",
      "updated_at": "2022-11-22T16:10:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029540434",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540434"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 893,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540643",
      "pull_request_review_id": 1190364734,
      "id": 1029540643,
      "node_id": "PRRC_kwDOABII5849XYsj",
      "diff_hunk": "@@ -644,6 +672,30 @@ static RPCHelpMan gettxspendingprevout()\n                 const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n                 if (spendingTx != nullptr) {\n                     o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (mempool_only.value_or(false)) {\n+                    // do nothing\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 72,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 994570253,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:10:13Z",
      "updated_at": "2022-11-22T16:10:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029540643",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540643"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 680,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540948",
      "pull_request_review_id": 1190365157,
      "id": 1029540948,
      "node_id": "PRRC_kwDOABII5849XYxU",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);\n+    }\n+    return WriteBatch(batch);\n+}\n+\n+bool TxoSpenderIndex::CustomAppend(const interfaces::BlockInfo& block)\n+{\n+    std::vector<std::pair<COutPoint, uint256>> items;\n+    items.reserve(block.data->vtx.size());\n+\n+    for (const auto& tx : block.data->vtx) {",
      "path": "src/index/txospenderindex.cpp",
      "position": 60,
      "original_position": 49,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028539576,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:10:29Z",
      "updated_at": "2022-11-22T16:10:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029540948",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540948"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 60,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029541298",
      "pull_request_review_id": 1190365575,
      "id": 1029541298,
      "node_id": "PRRC_kwDOABII5849XY2y",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028547783,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:10:44Z",
      "updated_at": "2022-11-22T16:10:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029541298",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029541298"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029541433",
      "pull_request_review_id": 1190365757,
      "id": 1029541433,
      "node_id": "PRRC_kwDOABII5849XY45",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <index/txospenderindex.h>\n+#include <script/standard.h>\n+#include <test/util/setup_common.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(txospenderindex_tests)\n+\n+BOOST_FIXTURE_TEST_CASE(txospenderindex_initial_sync, TestChain100Setup)\n+{\n+    TxoSpenderIndex txospenderindex(interfaces::MakeChain(m_node), 1 << 20, true);\n+    // Mine blocks for coinbase maturity, so we can spend some coinbase outputs in the test.\n+     for (int i = 0; i < 50; i++) {\n+         std::vector<CMutableTransaction> no_txns;\n+         CreateAndProcessBlock(no_txns, this->m_coinbase_txns[i]->vout[0].scriptPubKey);\n+     }\n+    std::vector<COutPoint> spent(10);\n+    std::vector<CMutableTransaction> spender(spent.size());\n+\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        spent[i] = COutPoint(this->m_coinbase_txns[i]->GetHash(), 0);\n+        spender[i].nVersion = 1;\n+        spender[i].vin.resize(1);\n+        spender[i].vin[0].prevout.hash = spent[i].hash;\n+        spender[i].vin[0].prevout.n = spent[i].n;\n+        spender[i].vout.resize(1);\n+        spender[i].vout[0].nValue = this->m_coinbase_txns[i]->GetValueOut();\n+        spender[i].vout[0].scriptPubKey = this->m_coinbase_txns[i]->vout[0].scriptPubKey;\n+\n+        // Sign:\n+        std::vector<unsigned char> vchSig;\n+        const uint256 hash = SignatureHash(this->m_coinbase_txns[i]->vout[0].scriptPubKey, spender[i], 0, SIGHASH_ALL, 0, SigVersion::BASE);\n+        coinbaseKey.Sign(hash, vchSig);\n+        vchSig.push_back((unsigned char)SIGHASH_ALL);\n+        spender[i].vin[0].scriptSig << vchSig;\n+    }\n+\n+    CreateAndProcessBlock(spender, this->m_coinbase_txns[0]->vout[0].scriptPubKey);\n+    uint256 txid;\n+\n+    // Transaction should not be found in the index before it is started.\n+    for (const auto& outpoint : spent) {\n+        BOOST_CHECK(!txospenderindex.FindSpender(outpoint, txid));\n+    }\n+\n+    // BlockUntilSyncedToCurrentChain should return false before txindex is started.",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 53,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028548977,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done  in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:10:50Z",
      "updated_at": "2022-11-22T16:10:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029541433",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029541433"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 53,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029542286",
      "pull_request_review_id": 1190367024,
      "id": 1029542286,
      "node_id": "PRRC_kwDOABII5849XZGO",
      "diff_hunk": "@@ -60,8 +65,13 @@ def create_tx(**kwargs):\n             assert_equal(txid in mempool, True)\n \n         self.log.info(\"Find transactions spending outputs\")\n+        # spending transactions are found in the mempool of node 0 but not 1 and 2\n         result = self.nodes[0].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n         assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'spendingtxid' : txidA}, {'txid' : txidA, 'vout' : 1, 'spendingtxid' : txidC} ])\n+        result = self.nodes[1].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        result = self.nodes[2].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'warnings': ['txospenderindex is unavailable.']}, {'txid' : txidA, 'vout' : 1, 'warnings': ['txospenderindex is unavailable.']} ])",
      "path": "test/functional/rpc_mempool_info.py",
      "position": null,
      "original_position": 24,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028552792,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "you're right, thanks! fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:11:34Z",
      "updated_at": "2022-11-22T16:11:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029542286",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029542286"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 71,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029549049",
      "pull_request_review_id": 1190376797,
      "id": 1029549049,
      "node_id": "PRRC_kwDOABII5849Xav5",
      "diff_hunk": "@@ -1520,6 +1534,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX)) {\n+        if (!args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"-txospenderindex requires -txindex.\"));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028541621,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I did not see a use case for `txospenderindex` without `txindex` as you would always want you fetch the spending tx but I guess people could want to know that a tx was confirmed and spent and nothing more.",
      "created_at": "2022-11-22T16:17:27Z",
      "updated_at": "2022-11-22T16:17:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029549049",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029549049"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1584,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029553655",
      "pull_request_review_id": 1190383600,
      "id": 1029553655,
      "node_id": "PRRC_kwDOABII5849Xb33",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+static constexpr bool DEFAULT_TXOSPENDERINDEX{false};\n+\n+/**\n+ * TxoSpenderIndex is used to look up which transaction spent a given output.\n+ * The index is written to a LevelDB database and, for each input of each transaction in a block,\n+ * records the outpoint that is spent and the hash of the spending transaction.\n+ */\n+class TxoSpenderIndex final : public BaseIndex\n+{\n+protected:\n+    class DB;\n+\n+private:\n+    const std::unique_ptr<DB> m_db;\n+\n+    bool AllowPrune() const override { return false; }",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 25,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028542275,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I will experiment with not requiring txindex and pruning support and add a separate commit for that.  ",
      "created_at": "2022-11-22T16:21:31Z",
      "updated_at": "2022-11-22T16:21:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029553655",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029553655"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1030752512",
      "pull_request_review_id": 1192099078,
      "id": 1030752512,
      "node_id": "PRRC_kwDOABII5849cAkA",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+static constexpr bool DEFAULT_TXOSPENDERINDEX{false};\n+\n+/**\n+ * TxoSpenderIndex is used to look up which transaction spent a given output.\n+ * The index is written to a LevelDB database and, for each input of each transaction in a block,\n+ * records the outpoint that is spent and the hash of the spending transaction.\n+ */\n+class TxoSpenderIndex final : public BaseIndex\n+{\n+protected:\n+    class DB;\n+\n+private:\n+    const std::unique_ptr<DB> m_db;\n+\n+    bool AllowPrune() const override { return false; }\n+\n+protected:\n+    bool CustomAppend(const interfaces::BlockInfo& block) override;",
      "path": "src/index/txospenderindex.h",
      "position": 28,
      "original_position": 28,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028544839,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/5957f992b7afe20dca250c398bb28ad0ae52f868\r\n\r\nI may have missed something, but it seems that if the chain tip is reorged out, `CustomRewind` won't be called until a new block is added to the chain. Until then, our txospenderindex (and I guess this might be true for other indexes) will return stale results. In our case, you'll be able to see that the spending tx has 0 confirmations and could be replaced, but it makes me wonder how usable this index is if you cannot tell if spending txs are confirmed or not. So yes technically `txospenderindex` does not require `txindex` but could it really be usable in practice without it ?",
      "created_at": "2022-11-23T18:09:37Z",
      "updated_at": "2022-11-23T18:09:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1030752512",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1030752512"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038197461",
      "pull_request_review_id": 1202581582,
      "id": 1038197461,
      "node_id": "PRRC_kwDOABII58494aLV",
      "diff_hunk": "@@ -644,6 +672,30 @@ static RPCHelpMan gettxspendingprevout()\n                 const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n                 if (spendingTx != nullptr) {\n                     o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (mempool_only.value_or(false)) {\n+                    // do nothing\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        if (mempool_only.has_value()) {  // NOTE: value is false here\n+                            throw JSONRPCError(RPC_MISC_ERROR, strprintf(\"No spending tx for the outpoint %s:%d found, and txospenderindex is still being synced.\", prevout.hash.GetHex(), prevout.n));\n+                        } else {\n+                            UniValue warnings(UniValue::VARR);\n+                            warnings.push_back(\"txospenderindex is still being synced.\");\n+                            o.pushKV(\"warnings\", warnings);\n+                        }\n+                    }",
      "path": "src/rpc/mempool.cpp",
      "position": 88,
      "original_position": 82,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028538250,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done  in https://github.com/bitcoin/bitcoin/pull/24539/commits/15e850c0a41c295683c90b42b5b8d97033e68be7",
      "created_at": "2022-12-02T14:28:05Z",
      "updated_at": "2022-12-02T14:28:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1038197461",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038197461"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": 703,
      "original_start_line": 682,
      "start_side": "RIGHT",
      "line": 711,
      "original_line": 711,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038198878",
      "pull_request_review_id": 1202583500,
      "id": 1038198878,
      "node_id": "PRRC_kwDOABII58494ahe",
      "diff_hunk": "@@ -1520,6 +1534,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX)) {\n+        if (!args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"-txospenderindex requires -txindex.\"));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028541621,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/24539/commits/2d6f407fb70e6afe004cfcdc563a6fab00f29e42 removes the requirement on `-txindex`",
      "created_at": "2022-12-02T14:29:24Z",
      "updated_at": "2022-12-02T14:29:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1038198878",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038198878"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1584,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038200079",
      "pull_request_review_id": 1202585275,
      "id": 1038200079,
      "node_id": "PRRC_kwDOABII58494a0P",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+static constexpr bool DEFAULT_TXOSPENDERINDEX{false};\n+\n+/**\n+ * TxoSpenderIndex is used to look up which transaction spent a given output.\n+ * The index is written to a LevelDB database and, for each input of each transaction in a block,\n+ * records the outpoint that is spent and the hash of the spending transaction.\n+ */\n+class TxoSpenderIndex final : public BaseIndex\n+{\n+protected:\n+    class DB;\n+\n+private:\n+    const std::unique_ptr<DB> m_db;\n+\n+    bool AllowPrune() const override { return false; }",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 25,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028542275,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/24539/commits/2d6f407fb70e6afe004cfcdc563a6fab00f29e42 makes this index compatible with pruning.",
      "created_at": "2022-12-02T14:30:35Z",
      "updated_at": "2022-12-02T14:30:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1038200079",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038200079"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039669931",
      "pull_request_review_id": 1204651133,
      "id": 1039669931,
      "node_id": "PRRC_kwDOABII5849-Bqr",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <index/txospenderindex.h>\n+#include <script/standard.h>\n+#include <test/util/setup_common.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(txospenderindex_tests)\n+\n+BOOST_FIXTURE_TEST_CASE(txospenderindex_initial_sync, TestChain100Setup)\n+{\n+    TxoSpenderIndex txospenderindex(interfaces::MakeChain(m_node), 1 << 20, true);\n+    // Mine blocks for coinbase maturity, so we can spend some coinbase outputs in the test.\n+     for (int i = 0; i < 50; i++) {\n+         std::vector<CMutableTransaction> no_txns;\n+         CreateAndProcessBlock(no_txns, this->m_coinbase_txns[i]->vout[0].scriptPubKey);\n+     }\n+    std::vector<COutPoint> spent(10);\n+    std::vector<CMutableTransaction> spender(spent.size());\n+\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        spent[i] = COutPoint(this->m_coinbase_txns[i]->GetHash(), 0);\n+        spender[i].nVersion = 1;\n+        spender[i].vin.resize(1);\n+        spender[i].vin[0].prevout.hash = spent[i].hash;\n+        spender[i].vin[0].prevout.n = spent[i].n;\n+        spender[i].vout.resize(1);\n+        spender[i].vout[0].nValue = this->m_coinbase_txns[i]->GetValueOut();\n+        spender[i].vout[0].scriptPubKey = this->m_coinbase_txns[i]->vout[0].scriptPubKey;\n+\n+        // Sign:\n+        std::vector<unsigned char> vchSig;\n+        const uint256 hash = SignatureHash(this->m_coinbase_txns[i]->vout[0].scriptPubKey, spender[i], 0, SIGHASH_ALL, 0, SigVersion::BASE);\n+        coinbaseKey.Sign(hash, vchSig);\n+        vchSig.push_back((unsigned char)SIGHASH_ALL);\n+        spender[i].vin[0].scriptSig << vchSig;\n+    }\n+\n+    CreateAndProcessBlock(spender, this->m_coinbase_txns[0]->vout[0].scriptPubKey);\n+    uint256 txid;\n+\n+    // Transaction should not be found in the index before it is started.\n+    for (const auto& outpoint : spent) {\n+        BOOST_CHECK(!txospenderindex.FindSpender(outpoint, txid));\n+    }\n+\n+    // BlockUntilSyncedToCurrentChain should return false before txospenderindex is started.\n+    BOOST_CHECK(!txospenderindex.BlockUntilSyncedToCurrentChain());\n+\n+    BOOST_REQUIRE(txospenderindex.Start());\n+\n+\n+    // Allow tx index to catch up with the block index.\n+    constexpr int64_t timeout_ms = 10 * 1000;\n+    int64_t time_start = GetTimeMillis();\n+    while (!txospenderindex.BlockUntilSyncedToCurrentChain()) {\n+        BOOST_REQUIRE(time_start + timeout_ms > GetTimeMillis());\n+        UninterruptibleSleep(std::chrono::milliseconds{100});\n+    }\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        BOOST_CHECK(txospenderindex.FindSpender(spent[i], txid) && txid == spender[i].GetHash());\n+    }\n+\n+    // shutdown sequence (c.f. Shutdown() in init.cpp)\n+    txospenderindex.Stop();\n+\n+    // Let scheduler events finish running to avoid accessing any memory related to txindex after it is destructed\n+    SyncWithValidationInterfaceQueue();",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 74,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "47e60750e7de54365dba3651b412716af552f85f",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit if you retouch: Looks like the order was changed in the other tests.\r\n\r\n\r\n```cpp\r\n    // It is not safe to stop and destroy the index until it finishes handling\r\n    // the last BlockConnected notification. The BlockUntilSyncedToCurrentChain()\r\n    // call above is sufficient to ensure this, but the\r\n    // SyncWithValidationInterfaceQueue() call below is also needed to ensure\r\n    // TSAN always sees the test thread waiting for the notification thread, and\r\n    // avoid potential false positive reports.\r\n    SyncWithValidationInterfaceQueue();\r\n\r\n    // Shutdown sequence (c.f. Shutdown() in init.cpp)\r\n    coin_stats_index.Stop();\r\n```\r\n\r\nSee 861cb3fadce88cfaee27088185a48f03fb9dafe7",
      "created_at": "2022-12-05T14:27:58Z",
      "updated_at": "2022-12-05T14:27:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1039669931",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039669931"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1043428164",
      "pull_request_review_id": 1210191997,
      "id": 1043428164,
      "node_id": "PRRC_kwDOABII584-MXNE",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <index/txospenderindex.h>\n+#include <script/standard.h>\n+#include <test/util/setup_common.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(txospenderindex_tests)\n+\n+BOOST_FIXTURE_TEST_CASE(txospenderindex_initial_sync, TestChain100Setup)\n+{\n+    TxoSpenderIndex txospenderindex(interfaces::MakeChain(m_node), 1 << 20, true);\n+    // Mine blocks for coinbase maturity, so we can spend some coinbase outputs in the test.\n+     for (int i = 0; i < 50; i++) {\n+         std::vector<CMutableTransaction> no_txns;\n+         CreateAndProcessBlock(no_txns, this->m_coinbase_txns[i]->vout[0].scriptPubKey);\n+     }\n+    std::vector<COutPoint> spent(10);\n+    std::vector<CMutableTransaction> spender(spent.size());\n+\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        spent[i] = COutPoint(this->m_coinbase_txns[i]->GetHash(), 0);\n+        spender[i].nVersion = 1;\n+        spender[i].vin.resize(1);\n+        spender[i].vin[0].prevout.hash = spent[i].hash;\n+        spender[i].vin[0].prevout.n = spent[i].n;\n+        spender[i].vout.resize(1);\n+        spender[i].vout[0].nValue = this->m_coinbase_txns[i]->GetValueOut();\n+        spender[i].vout[0].scriptPubKey = this->m_coinbase_txns[i]->vout[0].scriptPubKey;\n+\n+        // Sign:\n+        std::vector<unsigned char> vchSig;\n+        const uint256 hash = SignatureHash(this->m_coinbase_txns[i]->vout[0].scriptPubKey, spender[i], 0, SIGHASH_ALL, 0, SigVersion::BASE);\n+        coinbaseKey.Sign(hash, vchSig);\n+        vchSig.push_back((unsigned char)SIGHASH_ALL);\n+        spender[i].vin[0].scriptSig << vchSig;\n+    }\n+\n+    CreateAndProcessBlock(spender, this->m_coinbase_txns[0]->vout[0].scriptPubKey);\n+    uint256 txid;\n+\n+    // Transaction should not be found in the index before it is started.\n+    for (const auto& outpoint : spent) {\n+        BOOST_CHECK(!txospenderindex.FindSpender(outpoint, txid));\n+    }\n+\n+    // BlockUntilSyncedToCurrentChain should return false before txospenderindex is started.\n+    BOOST_CHECK(!txospenderindex.BlockUntilSyncedToCurrentChain());\n+\n+    BOOST_REQUIRE(txospenderindex.Start());\n+\n+\n+    // Allow tx index to catch up with the block index.\n+    constexpr int64_t timeout_ms = 10 * 1000;\n+    int64_t time_start = GetTimeMillis();\n+    while (!txospenderindex.BlockUntilSyncedToCurrentChain()) {\n+        BOOST_REQUIRE(time_start + timeout_ms > GetTimeMillis());\n+        UninterruptibleSleep(std::chrono::milliseconds{100});\n+    }\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        BOOST_CHECK(txospenderindex.FindSpender(spent[i], txid) && txid == spender[i].GetHash());\n+    }\n+\n+    // shutdown sequence (c.f. Shutdown() in init.cpp)\n+    txospenderindex.Stop();\n+\n+    // Let scheduler events finish running to avoid accessing any memory related to txindex after it is destructed\n+    SyncWithValidationInterfaceQueue();",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 74,
      "commit_id": "e208ff8bf7aff2d3393553e1a6cbf76da9f3e011",
      "original_commit_id": "47e60750e7de54365dba3651b412716af552f85f",
      "in_reply_to_id": 1039669931,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/1ea70b814d641deb63746044795001d1bd3d709b",
      "created_at": "2022-12-08T14:38:49Z",
      "updated_at": "2022-12-08T14:38:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1043428164",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1043428164"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    }
  ]
}